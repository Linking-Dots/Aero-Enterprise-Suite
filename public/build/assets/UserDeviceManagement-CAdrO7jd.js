import{j as e,r as Ce,F as W,a as r,H as Fe,L as Re,b as le}from"./app-BiR4HUU6.js";import{r as i}from"./react-core-SLWS96gT.js";import{e as H,B as N,h as $e,f as Ae,b as je,n as ce,k as oe,c as Me,A as Oe}from"./App-WMq6RoU3.js";import{G as S}from"./logo-Bl0iXllB.js";import{G as Pe}from"./GlassDialog-DV54zn6N.js";import{P as Ue}from"./PageHeader-Bpq-xkFY.js";import{S as Te}from"./StatsCards-BERqnUUA.js";import{a as j}from"./utilities-DyZVG5is.js";import{u as Ie,a as de,G as Ee,F as Be,T as l,f as We,B as M,p as He,o as ze,q as Ge,r as Ve}from"./mui-libraries-CQTi8RHu.js";import{F as P,a as qe,b as Ke,c as Qe}from"./SignalIcon-Xm5LjO8M.js";import{F as ee}from"./CheckCircleIcon-CDPGBXlV.js";import{F as Ze}from"./ArrowLeftIcon-CYrXhd2_.js";import{F as me}from"./DocumentArrowDownIcon-Z7LEdu9S.js";import{a as Je}from"./ShieldCheckIcon-BRKjP3CW.js";import{F as Xe}from"./LockClosedIcon-C1mDI3TC.js";import{F as Ye}from"./GlobeAltIcon-DcQuMnEx.js";import{F as et}from"./FunnelIcon-C87ldPNv.js";import{F as ue}from"./ExclamationTriangleIcon-EI717oj0.js";import{F as tt}from"./MapPinIcon-880aLkdn.js";import{F as rt}from"./XCircleIcon-CL14Mpox.js";import{F as at}from"./EllipsisVerticalIcon-B_1nfmYU.js";import{F as st}from"./EyeIcon-4-OVq7BQ.js";import{F as nt}from"./IdentificationIcon-B8lzZksZ.js";import{b,f as U,i as it,S as z,O as G,P as V,Q as f,k as lt,m as ct,n as L,o as ot,q as dt,v as C,t as mt,G as ut}from"./ui-libraries-CePrafQA.js";import"./app-B9RuXsJe.js";import"./EnvelopeIcon-C4jDV72b.js";import"./UserIcon-CGZSeVa1.js";function ht({title:g,titleId:p,...D},y){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:y,"aria-labelledby":p},D),g?i.createElement("title",{id:p},g):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const q=i.forwardRef(ht);function ft({title:g,titleId:p,...D},y){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:y,"aria-labelledby":p},D),g?i.createElement("title",{id:p},g):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 20.25h12m-7.5-3v3m3-3v3m-10.125-3h17.25c.621 0 1.125-.504 1.125-1.125V4.875c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125Z"}))}const gt=i.forwardRef(ft);function bt({title:g,titleId:p,...D},y){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:y,"aria-labelledby":p},D),g?i.createElement("title",{id:p},g):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"}))}const vt=i.forwardRef(bt),pt=({title:g,user:p,devices:D})=>{const y=Ie(),_=de(y.breakpoints.down("sm"));de(y.breakpoints.down("md"));const[n,K]=i.useState(p),[m,O]=i.useState(D||[]),[he,F]=i.useState(!1),[x,R]=i.useState({}),[te,re]=i.useState(!1),[d,ae]=i.useState(null),[fe,se]=i.useState(!1),[c,ne]=i.useState({search:"",status:"all",type:"all",dateRange:"all"}),[Q,ge]=i.useState(!1),[$,Z]=i.useState({currentPage:1,perPage:10}),w=i.useMemo(()=>{const t=new Date,a=new Date(t.getTime()-300*1e3),s=new Date(t.getTime()-1440*60*1e3),o=m.filter(v=>v.is_active),u=m.filter(v=>v.is_active&&v.last_seen_at&&new Date(v.last_seen_at)>a),h=m.filter(v=>v.last_seen_at&&new Date(v.last_seen_at)>s),B=m.filter(v=>v.user_agent&&v.user_agent.toLowerCase().includes("mobile"));return{total:m.length,active:o.length,online:u.length,recent:h.length,mobile:B.length,desktop:m.length-B.length,inactive:m.length-o.length}},[m]),be=i.useMemo(()=>[{title:"Total Devices",value:w.total,icon:e(P,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All registered devices"},{title:"Active Sessions",value:w.active,icon:e(ee,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Currently active devices"},{title:"Online Now",value:w.online,icon:e(qe,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Active within 5 minutes"},{title:"Recent Activity",value:w.recent,icon:e(H,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Active within 24 hours"}],[w]),A=i.useCallback(async()=>{F(!0);try{const t=await j.get(route("users.device.list",{user:n.id}));t.status===200&&(O(t.data.devices||[]),t.data.user&&K(a=>({...a,...t.data.user})))}catch(t){console.error("Error fetching devices:",t),N.error("Failed to fetch device information"),O([])}finally{F(!1)}},[n.id]),ve=i.useCallback(async()=>{re(!0),await A(),re(!1),N.success("Device data refreshed")},[A]),pe=i.useCallback(()=>{const t=m.map(h=>({"Device Name":h.device_name||"Unknown","User Agent":h.user_agent,"IP Address":h.ip_address,Location:h.location||"Unknown",Status:h.is_active?"Active":"Inactive","Last Seen":h.last_seen_at?new Date(h.last_seen_at).toLocaleString():"Never",Created:h.created_at?new Date(h.created_at).toLocaleString():"Unknown"})),a=[Object.keys(t[0]||{}).join(","),...t.map(h=>Object.values(h).map(B=>`"${B}"`).join(","))].join(`
`),s=new Blob([a],{type:"text/csv"}),o=window.URL.createObjectURL(s),u=document.createElement("a");u.href=o,u.download=`${n.name}_devices_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(o),N.success("Device data exported successfully")},[m,n.name]),we=i.useMemo(()=>{const t=[];return t.push({label:_?"Back":"Back to Users",icon:e(Ze,{className:"w-4 h-4"}),onClick:()=>Ce.visit(route("users")),variant:"light"}),t.push({label:_?"Refresh":"Refresh Data",icon:e(W,{className:"w-4 h-4"}),onClick:ve,variant:"flat",color:"primary",isLoading:te}),w.total>0&&t.push({label:_?"Export":"Export Devices",icon:e(me,{className:"w-4 h-4"}),onClick:pe,variant:"flat"}),t},[_,w.total,te]),xe=async t=>{R(a=>({...a,toggle:!0}));try{const a=await j.post(route("users.device.toggle"),{user_id:n.id,enabled:t});if(a.status===200&&a.data.success){const s={...n,single_device_login:a.data.user.single_device_login,active_device:a.data.user.active_device};K(s),N.success(a.data.message||(t?"Single device login enabled":"Single device login disabled")),F(!0);try{const o=await j.get(route("users.device.list",{user:n.id}));o.status===200&&O(o.data.devices||[])}catch(o){console.error("Error refreshing devices:",o)}finally{F(!1)}}}catch(a){console.error("Error toggling single device login:",a),N.error("Failed to update device settings")}finally{R(a=>({...a,toggle:!1}))}},Ne=async()=>{R(t=>({...t,reset:!0}));try{(await j.post(route("users.device.reset"),{user_id:n.id})).status===200&&(K(a=>({...a,active_device:null})),O(a=>a.map(s=>({...s,is_active:!1}))),N.success("User device has been reset"),setTimeout(async()=>{try{F(!0);const a=await j.get(route("users.device.list",{user:n.id}));a.status===200&&O(a.data.devices||[])}catch(a){console.error("Error refreshing devices after reset:",a)}finally{F(!1)}},1e3))}catch(t){console.error("Error resetting user device:",t),N.error("Failed to reset user device")}finally{R(t=>({...t,reset:!1}))}},J=i.useCallback(async t=>{R(a=>({...a,[`logout_${t}`]:!0}));try{(await j.post(route("users.device.logout"),{user_id:n.id,device_id:t})).status===200&&(N.success("Device logged out successfully"),await A())}catch(a){console.error("Error logging out device:",a),N.error("Failed to logout device")}finally{R(a=>({...a,[`logout_${t}`]:!1}))}},[n.id,A]),k=i.useMemo(()=>{let t=[...m];if(c.search){const a=c.search.toLowerCase();t=t.filter(s=>(s.device_name||"").toLowerCase().includes(a)||(s.user_agent||"").toLowerCase().includes(a)||(s.ip_address||"").toLowerCase().includes(a)||(s.location||"").toLowerCase().includes(a))}if(c.status!=="all"&&(t=t.filter(a=>c.status==="active"?a.is_active:c.status==="inactive"?!a.is_active:!0)),c.type!=="all"&&(t=t.filter(a=>{const s=(a.user_agent||"").toLowerCase();return c.type==="mobile"?s.includes("mobile")||s.includes("android")||s.includes("iphone"):c.type==="desktop"?!(s.includes("mobile")||s.includes("android")||s.includes("iphone")):!0})),c.dateRange!=="all"){const a=new Date;t=t.filter(s=>{if(!s.last_seen_at)return!1;const o=new Date(s.last_seen_at),u=(a-o)/(1e3*60*60);switch(c.dateRange){case"hour":return u<=1;case"day":return u<=24;case"week":return u<=168;case"month":return u<=720;default:return!0}})}return t},[m,c]),ye=i.useMemo(()=>{const t=($.currentPage-1)*$.perPage,a=t+$.perPage;return k.slice(t,a)},[k,$]),ie=Math.ceil(k.length/$.perPage),T=(t,a)=>{ne(s=>({...s,[t]:a})),Z(s=>({...s,currentPage:1}))},I=(t,a="w-5 h-5")=>{const s=(t||"").toLowerCase();return s.includes("iphone")||s.includes("ipod")?e(P,{className:`${a} text-default-600`}):s.includes("android")&&s.includes("mobile")?e(P,{className:`${a} text-default-600`}):s.includes("ipad")||s.includes("android")&&s.includes("tablet")?e(Qe,{className:`${a} text-default-600`}):s.includes("smart-tv")||s.includes("smarttv")||s.includes("tizen")||s.includes("webos")?e(gt,{className:`${a} text-default-600`}):e(oe,{className:`${a} text-default-600`})},X=t=>{const a=(t||"").toLowerCase();return a.includes("iphone")||a.includes("ipod")?"iPhone":a.includes("android")&&a.includes("mobile")?"Android Phone":a.includes("ipad")?"iPad":a.includes("android")&&a.includes("tablet")?"Android Tablet":a.includes("smart-tv")||a.includes("smarttv")?"Smart TV":a.includes("windows")?"Windows PC":a.includes("mac")?"Mac":a.includes("linux")?"Linux":"Desktop"},_e=t=>{const a=(t||"").toLowerCase();return a.includes("chrome")&&!a.includes("edg")?"Chrome":a.includes("firefox")?"Firefox":a.includes("safari")&&!a.includes("chrome")?"Safari":a.includes("edg")?"Edge":a.includes("opera")?"Opera":"Unknown Browser"},ke=t=>{const a=(t||"").toLowerCase();if(a.includes("windows nt 10"))return"Windows 10/11";if(a.includes("windows nt 6.3"))return"Windows 8.1";if(a.includes("windows nt 6.1"))return"Windows 7";if(a.includes("windows"))return"Windows";if(a.includes("mac os x")){const s=a.match(/mac os x ([0-9_]+)/);return s?`macOS ${s[1].replace(/_/g,".")}`:"macOS"}if(a.includes("android")){const s=a.match(/android ([0-9.]+)/);return s?`Android ${s[1]}`:"Android"}if(a.includes("iphone os")){const s=a.match(/iphone os ([0-9_]+)/);return s?`iOS ${s[1].replace(/_/g,".")}`:"iOS"}return a.includes("linux")?"Linux":"Unknown OS"},De=t=>{ae(t),se(!0)},E=()=>{se(!1),ae(null)},Y=t=>{if(!t)return"Never";const a=new Date(t),o=Math.floor((new Date-a)/(1e3*60));if(o<1)return"Just now";if(o<60)return`${o}m ago`;const u=Math.floor(o/60);if(u<24)return`${u}h ago`;const h=Math.floor(u/24);return h<7?`${h}d ago`:a.toLocaleDateString()},Se=t=>{if(!t.is_active)return"default";if(t.last_seen_at){const a=new Date,s=new Date(t.last_seen_at),o=(a-s)/(1e3*60);if(o<=5)return"success";if(o<=60)return"warning"}return"primary"},Le=t=>{if(!t.is_active)return"Inactive";if(t.last_seen_at){const a=new Date,s=new Date(t.last_seen_at),o=(a-s)/(1e3*60);if(o<=5)return"Online";if(o<=60)return"Recent"}return"Active"};return i.useEffect(()=>{A()},[A]),r(le,{children:[e(Fe,{title:g}),e(M,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Ee,{in:!0,children:e(S,{children:e(Ue,{title:`Device Management - ${n.name}`,subtitle:`Manage ${n.name}'s device access, restrictions and session history`,icon:e(P,{className:"w-8 h-8"}),actionButtons:we,children:r("div",{className:"p-4 sm:p-6",children:[e(Te,{stats:be,className:"mb-6"}),e("div",{className:"mb-6",children:e(S,{variant:"glass",className:"overflow-hidden",children:r("div",{className:"flex flex-col lg:flex-row",children:[r("div",{className:"lg:w-2/5 bg-linear-to-br from-white/5 to-white/10 p-6 border-r border-white/10",children:[r("div",{className:"text-center mb-6",children:[r("div",{className:"relative inline-block mb-4",children:[e("div",{className:"w-24 h-24 rounded-full bg-linear-to-br from-primary/60 via-secondary/60 to-accent/60 p-1 shadow-2xl",children:e("div",{className:"w-full h-full rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center overflow-hidden border border-white/20",children:n.profile_image_url?e("img",{src:n.profile_image_url,alt:n.name,className:"w-full h-full object-cover rounded-full"}):e("span",{className:"text-2xl font-bold text-white",children:n.name?.charAt(0)?.toUpperCase()||"U"})})}),e("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-success/80 backdrop-blur-sm border-2 border-white/30 rounded-full flex items-center justify-center shadow-lg",children:e("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]}),e("h2",{className:"text-xl font-bold text-foreground mb-1",children:n.name}),e("p",{className:"text-sm text-default-500 mb-3",children:n.email})]}),r("div",{className:"space-y-4",children:[e("div",{className:"bg-white/5 backdrop-blur-sm rounded-lg p-3 border border-white/10 hover:bg-white/10 transition-colors",children:r("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 bg-primary/20 backdrop-blur-sm rounded-lg flex items-center justify-center border border-primary/30",children:e($e,{className:"w-5 h-5 text-primary"})}),r("div",{children:[e("p",{className:"text-xs text-default-400 uppercase tracking-wide",children:"Department"}),e("p",{className:"text-sm font-medium text-foreground",children:n.department?.name||"No Department"})]})]})}),e("div",{className:"bg-white/5 backdrop-blur-sm rounded-lg p-3 border border-white/10 hover:bg-white/10 transition-colors",children:r("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 bg-secondary/20 backdrop-blur-sm rounded-lg flex items-center justify-center border border-secondary/30",children:e(Ae,{className:"w-5 h-5 text-secondary"})}),r("div",{children:[e("p",{className:"text-xs text-default-400 uppercase tracking-wide",children:"Member Since"}),e("p",{className:"text-sm font-medium text-foreground",children:n.created_at?new Date(n.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]})]})}),e("div",{className:"bg-white/5 backdrop-blur-sm rounded-lg p-3 border border-white/10 hover:bg-white/10 transition-colors",children:r("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 bg-success/20 backdrop-blur-sm rounded-lg flex items-center justify-center border border-success/30",children:e(je,{className:"w-5 h-5 text-success"})}),r("div",{children:[e("p",{className:"text-xs text-default-400 uppercase tracking-wide",children:"User ID"}),r("p",{className:"text-sm font-medium text-foreground",children:["#",n.id]})]})]})}),r("div",{className:"pt-4 border-t border-white/10",children:[e("p",{className:"text-xs text-default-400 uppercase tracking-wide mb-3",children:"Quick Actions"}),r("div",{className:"flex gap-2",children:[e(b,{as:Re,href:route("profile",{user:n.id}),size:"sm",variant:"flat",className:"bg-primary/20 text-primary border-primary/30 hover:bg-primary/30 backdrop-blur-sm",startContent:e(q,{className:"w-4 h-4"}),children:"View Profile"}),e(b,{size:"sm",variant:"flat",className:"bg-secondary/20 text-secondary border-secondary/30 hover:bg-secondary/30 backdrop-blur-sm",startContent:e(me,{className:"w-4 h-4"}),children:"Export Data"})]})]})]})]}),r("div",{className:"lg:w-3/5 p-6",children:[r("div",{className:"mb-6",children:[e("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Device Security Settings"}),e("p",{className:"text-sm text-default-400",children:"Manage device access restrictions and session controls"})]}),r("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-5 border border-white/10 hover:bg-white/10 transition-colors mb-6",children:[r("div",{className:"flex items-center justify-between mb-4",children:[r("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-12 h-12 bg-primary/20 backdrop-blur-sm rounded-xl flex items-center justify-center border border-primary/30",children:e(Je,{className:"w-6 h-6 text-primary"})}),r("div",{children:[e("h4",{className:"font-semibold text-foreground",children:"Single Device Login"}),e("p",{className:"text-xs text-default-400",children:"Restrict user to one active device"})]})]}),r("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer",checked:n.single_device_login,onChange:t=>{xe(t.target.checked)},disabled:x.toggle}),e("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-opacity-30 rounded-full peer transition-all duration-300 ${n.single_device_login?"bg-green-500 peer-focus:ring-green-300":"bg-red-500 peer-focus:ring-red-300"} peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all`}),x.toggle&&e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})})]})]}),r("div",{className:"space-y-4",children:[r("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/10",children:[e("span",{className:"text-sm font-medium text-default-600",children:"Current Status:"}),e(U,{size:"sm",variant:"flat",className:`font-semibold backdrop-blur-sm ${n.single_device_login?n.active_device?"bg-warning/20 text-warning border-warning/30":"bg-success/20 text-success border-success/30":"bg-default/20 text-default-600 border-default/30"}`,startContent:n.single_device_login?n.active_device?e(Xe,{className:"w-3 h-3"}):e(Ke,{className:"w-3 h-3"}):e(ce,{className:"w-3 h-3"}),children:n.single_device_login?n.active_device?"Device Locked":"Device Free":"Disabled"})]}),n.single_device_login&&n.active_device&&r("div",{className:"bg-warning/10 backdrop-blur-sm border border-warning/20 rounded-lg p-4",children:[r("div",{className:"flex items-start gap-3",children:[e("div",{className:"w-10 h-10 bg-warning/20 backdrop-blur-sm rounded-lg flex items-center justify-center shrink-0 border border-warning/30",children:n.active_device.device_name?.toLowerCase().includes("mobile")?e(P,{className:"w-5 h-5 text-warning"}):e(oe,{className:"w-5 h-5 text-warning"})}),r("div",{className:"flex-1",children:[e("h5",{className:"font-semibold text-warning mb-1",children:"Active Device"}),e("p",{className:"text-sm text-warning/80 mb-2",children:n.active_device.device_name||"Unknown Device"}),n.active_device.last_seen_at&&r("div",{className:"flex items-center gap-1 text-xs text-warning/70",children:[e(H,{className:"w-3 h-3"}),"Last seen: ",Y(n.active_device.last_seen_at)]})]})]}),e("div",{className:"mt-4 pt-3 border-t border-warning/20",children:e(b,{size:"sm",variant:"flat",className:"bg-danger/20 text-danger border-danger/30 hover:bg-danger/30 backdrop-blur-sm",startContent:x.reset?e(W,{className:"w-4 h-4 animate-spin"}):e(W,{className:"w-4 h-4"}),isDisabled:x.reset,onClick:()=>Ne(),children:x.reset?"Resetting...":"Reset Device Lock"})})]}),n.single_device_login&&!n.active_device&&e("div",{className:"bg-success/10 backdrop-blur-sm border border-success/20 rounded-lg p-4",children:r("div",{className:"flex items-center gap-3",children:[e(ee,{className:"w-8 h-8 text-success shrink-0"}),r("div",{children:[e("h5",{className:"font-semibold text-success mb-1",children:"Ready for Device Lock"}),e("p",{className:"text-sm text-success/80",children:"Single device login is enabled. The user's next login will lock their session to that device."})]})]})}),!n.single_device_login&&e("div",{className:"bg-primary/10 backdrop-blur-sm border border-primary/20 rounded-lg p-4",children:r("div",{className:"flex items-center gap-3",children:[e(Ye,{className:"w-8 h-8 text-primary shrink-0"}),r("div",{children:[e("h5",{className:"font-semibold text-primary mb-1",children:"Multiple Device Access"}),e("p",{className:"text-sm text-primary/80",children:"User can log in from multiple devices simultaneously. Enable single device login for enhanced security."})]})]})})]})]})]})]})})}),r("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(it,{label:"Search Devices",variant:"bordered",placeholder:"Search by device name, IP, location...",value:c.search,onValueChange:t=>T("search",t),startContent:e(Me,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:_?"sm":"md"})}),r("div",{className:"flex gap-2 items-end",children:[r(b,{isIconOnly:_,variant:"bordered",onPress:()=>ge(!Q),className:"bg-white/5 border-white/20",children:[e(et,{className:"w-4 h-4"}),!_&&e("span",{className:"ml-2",children:"Filters"})]}),e("div",{className:"hidden md:flex items-center gap-4 px-4 py-2 bg-white/5 rounded-lg border border-white/20",children:r("div",{className:"text-xs",children:[e("span",{className:"text-default-500",children:"Showing: "}),e("span",{className:"font-medium text-foreground",children:k.length}),r("span",{className:"text-default-500",children:[" / ",m.length]})]})})]})]}),Q&&e(Be,{in:Q,children:e("div",{className:"mb-6 p-4 bg-white/5 rounded-lg border border-white/10",children:r("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Status"}),r(z,{children:[e(G,{children:e(b,{variant:"bordered",className:"w-full justify-between bg-white/5",children:c.status==="all"?"All Status":c.status==="active"?"Active Only":"Inactive Only"})}),r(V,{selectedKeys:[c.status],onSelectionChange:t=>T("status",Array.from(t)[0]),children:[e(f,{children:"All Status"},"all"),e(f,{children:"Active Only"},"active"),e(f,{children:"Inactive Only"},"inactive")]})]})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Device Type"}),r(z,{children:[e(G,{children:e(b,{variant:"bordered",className:"w-full justify-between bg-white/5",children:c.type==="all"?"All Types":c.type==="mobile"?"Mobile Only":"Desktop Only"})}),r(V,{selectedKeys:[c.type],onSelectionChange:t=>T("type",Array.from(t)[0]),children:[e(f,{children:"All Types"},"all"),e(f,{children:"Mobile Only"},"mobile"),e(f,{children:"Desktop Only"},"desktop")]})]})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Activity"}),r(z,{children:[e(G,{children:e(b,{variant:"bordered",className:"w-full justify-between bg-white/5",children:c.dateRange==="all"?"All Time":c.dateRange==="hour"?"Last Hour":c.dateRange==="day"?"Last 24 Hours":c.dateRange==="week"?"Last Week":"Last Month"})}),r(V,{selectedKeys:[c.dateRange],onSelectionChange:t=>T("dateRange",Array.from(t)[0]),children:[e(f,{children:"All Time"},"all"),e(f,{children:"Last Hour"},"hour"),e(f,{children:"Last 24 Hours"},"day"),e(f,{children:"Last Week"},"week"),e(f,{children:"Last Month"},"month")]})]})]}),e("div",{className:"flex items-end",children:e(b,{variant:"flat",color:"primary",className:"w-full",onPress:()=>{ne({search:"",status:"all",type:"all",dateRange:"all"}),Z(t=>({...t,currentPage:1}))},children:"Clear Filters"})})]})})}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:r("div",{className:"flex items-center justify-between",children:[r("div",{children:[e(l,{variant:"h6",className:"font-semibold text-foreground",children:"Device History"}),r(l,{variant:"caption",className:"text-default-500",children:[k.length," device",k.length!==1?"s":""," found",k.length!==m.length&&r("span",{children:[" (filtered from ",m.length," total)"]})]})]}),w.total>0&&r("div",{className:"hidden sm:flex items-center gap-2",children:[r(U,{size:"sm",variant:"flat",color:"primary",children:[w.active," Active"]}),r(U,{size:"sm",variant:"flat",color:"success",children:[w.online," Online"]})]})]})}),he?e("div",{className:"flex justify-center py-12",children:r("div",{className:"text-center",children:[e(We,{size:40}),e(l,{className:"mt-4 text-default-500",children:"Loading device data..."})]})}):k.length===0?r("div",{className:"text-center py-12",children:[e(ue,{className:"w-12 h-12 text-default-300 mx-auto mb-4"}),e(l,{variant:"h6",className:"text-foreground mb-2",children:"No devices found"}),e(l,{variant:"body2",className:"text-default-500",children:m.length===0?`${n.name} has no device records yet`:"Try adjusting your search or filters"}),m.length===0&&e(l,{variant:"caption",className:"text-default-400 block mt-2",children:"Device records are created when users log in"})]}):r(le,{children:[r(lt,{"aria-label":"Device history table",className:"w-full",classNames:{wrapper:"shadow-none bg-transparent",th:"bg-white/10 backdrop-blur-md text-default-600 border-b border-white/10",td:"border-b border-white/5"},children:[r(ct,{children:[e(L,{children:"Device"}),e(L,{children:"Type"}),e(L,{children:"IP Address"}),e(L,{children:"Location"}),e(L,{children:"Status"}),e(L,{children:"Last Seen"}),e(L,{children:"Actions"})]}),e(ot,{children:ye.map(t=>r(dt,{className:"hover:bg-white/5 transition-colors",children:[e(C,{children:r("div",{className:"flex items-center gap-3",children:[e("div",{className:"shrink-0",children:I(t.user_agent)}),r("div",{className:"min-w-0 flex-1",children:[e("div",{className:"font-medium text-sm text-foreground truncate",children:t.device_name||"Unknown Device"}),e("div",{className:"text-xs text-default-500 truncate max-w-48",title:t.user_agent,children:t.user_agent})]})]})}),e(C,{children:e(U,{size:"sm",variant:"flat",color:X(t.user_agent)==="Mobile"?"secondary":"default",startContent:I(t.user_agent),children:X(t.user_agent)})}),e(C,{children:e("span",{className:"text-sm font-mono text-foreground",children:t.ip_address})}),e(C,{children:r("div",{className:"flex items-center gap-1",children:[e(tt,{className:"w-3 h-3 text-default-400 shrink-0"}),e("span",{className:"text-sm text-foreground truncate",children:t.location||"Unknown"})]})}),e(C,{children:e(U,{size:"sm",variant:"flat",color:Se(t),startContent:t.is_active?e(ee,{className:"w-3 h-3"}):e(rt,{className:"w-3 h-3"}),children:Le(t)})}),e(C,{children:r("div",{className:"flex items-center gap-1",children:[e(H,{className:"w-3 h-3 text-default-400 shrink-0"}),e("span",{className:"text-sm text-foreground",children:Y(t.last_seen_at)})]})}),e(C,{children:r("div",{className:"flex items-center gap-1",children:[t.is_active&&e(mt,{content:"Force logout this device",children:e(b,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",onPress:()=>J(t.id),isDisabled:x[`logout_${t.id}`],className:"min-w-0 w-8 h-8",children:x[`logout_${t.id}`]?e("div",{className:"animate-spin",children:e(W,{className:"w-3 h-3"})}):e(q,{className:"w-3 h-3"})})}),r(z,{children:[e(G,{children:e(b,{isIconOnly:!0,size:"sm",variant:"light",className:"min-w-0 w-8 h-8",children:e(at,{className:"w-3 h-3"})})}),r(V,{"aria-label":"Device Actions",children:[e(f,{description:"View detailed device information",startContent:e(st,{className:"w-4 h-4"}),onPress:()=>De(t),children:"Device Details"},"details"),t.is_active&&e(f,{description:"Force logout this device",startContent:e(q,{className:"w-4 h-4"}),color:"warning",onPress:()=>J(t.id),children:"Force Logout"},"logout")]})]})]})})]},t.id))})]}),ie>1&&e("div",{className:"flex justify-center items-center p-4 border-t border-white/10",children:e(ut,{total:ie,page:$.currentPage,onChange:t=>Z(a=>({...a,currentPage:t})),showControls:!0,showShadow:!0,color:"primary",size:_?"sm":"md",classNames:{wrapper:"gap-2",item:"bg-white/10 backdrop-blur-md",cursor:"bg-primary text-primary-foreground"}})})]})]})]})})})})}),r(Pe,{open:fe,closeModal:E,maxWidth:"md",fullWidth:!0,children:[r(He,{children:[r("div",{className:"flex items-center gap-3",children:[d&&I(d.user_agent,"w-6 h-6"),r("div",{children:[e(l,{variant:"h6",className:"font-semibold text-foreground",children:"Device Information"}),e(l,{variant:"body2",className:"text-default-500",children:d?.device_name||"Unknown Device"})]})]}),e(ze,{onClick:E,sx:{position:"absolute",right:8,top:8,color:"text.secondary"},children:e(ce,{className:"w-5 h-5"})})]}),e(Ge,{dividers:!0,children:d&&r("div",{className:"space-y-6",children:[r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e(S,{variant:"glass",children:r(M,{p:3,children:[r("div",{className:"flex items-center gap-3 mb-3",children:[e("div",{className:"w-10 h-10 bg-primary/20 backdrop-blur-sm rounded-lg flex items-center justify-center border border-primary/30",children:I(d.user_agent,"w-5 h-5")}),r("div",{children:[e(l,{variant:"subtitle1",className:"font-semibold text-foreground",children:"Device Type"}),e(l,{variant:"body2",className:"text-default-500",children:X(d.user_agent)})]})]}),r("div",{className:"space-y-2 text-sm",children:[r("div",{className:"flex justify-between",children:[e("span",{className:"text-default-400",children:"Browser:"}),e("span",{className:"text-foreground",children:_e(d.user_agent)})]}),r("div",{className:"flex justify-between",children:[e("span",{className:"text-default-400",children:"OS:"}),e("span",{className:"text-foreground",children:ke(d.user_agent)})]})]})]})}),e(S,{variant:"glass",children:r(M,{p:3,children:[r("div",{className:"flex items-center gap-3 mb-3",children:[e("div",{className:"w-10 h-10 bg-secondary/20 backdrop-blur-sm rounded-lg flex items-center justify-center border border-secondary/30",children:e(vt,{className:"w-5 h-5 text-secondary"})}),r("div",{children:[e(l,{variant:"subtitle1",className:"font-semibold text-foreground",children:"Connection"}),e(l,{variant:"body2",className:"text-default-500",children:"Network Information"})]})]}),r("div",{className:"space-y-2 text-sm",children:[r("div",{className:"flex justify-between",children:[e("span",{className:"text-default-400",children:"IP Address:"}),e("span",{className:"text-foreground font-mono",children:d.ip_address})]}),r("div",{className:"flex justify-between",children:[e("span",{className:"text-default-400",children:"Location:"}),e("span",{className:"text-foreground",children:d.location||"Unknown"})]})]})]})})]}),e(S,{variant:"glass",children:r(M,{p:3,children:[r("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"w-10 h-10 bg-success/20 backdrop-blur-sm rounded-lg flex items-center justify-center border border-success/30",children:e(H,{className:"w-5 h-5 text-success"})}),r("div",{children:[e(l,{variant:"subtitle1",className:"font-semibold text-foreground",children:"Activity Timeline"}),e(l,{variant:"body2",className:"text-default-500",children:"Session and usage information"})]})]}),r("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r("div",{className:"text-center p-3 bg-white/5 rounded-lg border border-white/10",children:[e(l,{variant:"h6",className:"font-bold text-foreground",children:d.is_active?"Active":"Inactive"}),e(l,{variant:"caption",className:"text-default-400",children:"Current Status"})]}),r("div",{className:"text-center p-3 bg-white/5 rounded-lg border border-white/10",children:[e(l,{variant:"h6",className:"font-bold text-foreground",children:Y(d.last_seen_at)}),e(l,{variant:"caption",className:"text-default-400",children:"Last Seen"})]}),r("div",{className:"text-center p-3 bg-white/5 rounded-lg border border-white/10",children:[e(l,{variant:"h6",className:"font-bold text-foreground",children:d.created_at?new Date(d.created_at).toLocaleDateString():"Unknown"}),e(l,{variant:"caption",className:"text-default-400",children:"First Login"})]})]})]})}),e(S,{variant:"glass",children:r(M,{p:3,children:[r("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"w-10 h-10 bg-warning/20 backdrop-blur-sm rounded-lg flex items-center justify-center border border-warning/30",children:e(nt,{className:"w-5 h-5 text-warning"})}),r("div",{children:[e(l,{variant:"subtitle1",className:"font-semibold text-foreground",children:"Technical Information"}),e(l,{variant:"body2",className:"text-default-500",children:"Detailed device specifications"})]})]}),r("div",{className:"space-y-3",children:[r("div",{children:[e(l,{variant:"caption",className:"text-default-400 uppercase tracking-wide",children:"Device ID"}),e(l,{variant:"body2",className:"text-foreground font-mono mt-1 p-2 bg-white/5 rounded border border-white/10",children:d.id})]}),r("div",{children:[e(l,{variant:"caption",className:"text-default-400 uppercase tracking-wide",children:"User Agent"}),e(l,{variant:"body2",className:"text-foreground break-all mt-1 p-2 bg-white/5 rounded border border-white/10",children:d.user_agent})]})]})]})}),d.is_active&&e(S,{variant:"glass",children:r(M,{p:3,className:"bg-danger/10 backdrop-blur-sm border border-danger/20",children:[r("div",{className:"flex items-center gap-3 mb-3",children:[e(ue,{className:"w-6 h-6 text-danger shrink-0"}),r("div",{children:[e(l,{variant:"subtitle1",className:"font-semibold text-danger",children:"Security Actions"}),e(l,{variant:"body2",className:"text-danger/80",children:"Manage device access and security"})]})]}),e(b,{size:"sm",variant:"flat",className:"bg-danger/20 text-danger border-danger/30 hover:bg-danger/30 backdrop-blur-sm",startContent:e(q,{className:"w-4 h-4"}),onPress:()=>{J(d.id),E()},isDisabled:x[`logout_${d.id}`],children:x[`logout_${d.id}`]?"Logging out...":"Force Logout Device"})]})})]})}),e(Ve,{children:e(b,{variant:"flat",onPress:E,className:"bg-default/20 text-default-700 border-default/30 hover:bg-default/30",children:"Close"})})]})]})};pt.layout=g=>e(Oe,{children:g});export{pt as default};
