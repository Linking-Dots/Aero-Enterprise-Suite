import{r as y,j as t,s as Ve,d as te,t as Ur,F as ye,a as je,bX as Na,bY as Fa,bZ as yn,Q as jn,c as se,b as ie,S as Mr}from"./app-Lr-3OgmL.js";import{y as ht,e as Pe,c as _n,C as pt,D as xt,E as gt,H as re,G as wn,x as Nn,s as _e,w as Ge,f as Fn,l as Fe,I as Tn,A as Cn}from"./Dashboard-7JrhaZle.js";import{S as In}from"./StatsCards-C5GbGJRM.js";import{c as le,t as vt,F as Ta,B as z,b as Ca}from"./react-toastify.esm-zBwRcaUE.js";import{F as Pn}from"./HashtagIcon-Dyn_o2C0.js";import{F as Ke}from"./UserIcon-B1EQ1dzI.js";import{F as bt}from"./EnvelopeIcon-Cfwoaacc.js";import{F as Se,a as Ia}from"./DeviceTabletIcon-BpR33dQV.js";import{F as Pa}from"./CheckCircleIcon-DlDuFQYe.js";import{F as $e}from"./ShieldCheckIcon-DXoo013u.js";import{F as yt}from"./EllipsisVerticalIcon-De_n_4Zw.js";import{F as Sa}from"./PencilIcon-Cm06SXeX.js";import{F as Xe}from"./LockOpenIcon-2CvYusAG.js";import{F as Ze}from"./LockClosedIcon-BlBDtpCg.js";import{t as Sn,a as $n,b as En,c as Rn}from"./chunk-F3UDT23P-Dl6y5_Y5.js";import{t as An,a as On}from"./chunk-YRZGWF2W-uW7g34Ib.js";import{p as $a}from"./chunk-EAPQ7RWQ-BDIw9Gtz.js";import{u as Ea}from"./chunk-S574QCAN-DfDosOJJ.js";import{F as Ln}from"./XCircleIcon-C5VHM5n7.js";import{F as Dn}from"./TrophyIcon-DsMdV4sI.js";import{F as dt}from"./UserPlusIcon-C5YGJDK9.js";import{F as Br}from"./ChartBarIcon-CctM81nG.js";import{m as Un}from"./proxy-CItlny5R.js";import{F as Mn}from"./DocumentArrowDownIcon-DVq5EAmf.js";import{F as Bn}from"./ChartPieIcon-BLVum68_.js";import{F as kn}from"./TableCellsIcon-B3mtF1PI.js";import{c as zn}from"./chunk-D5XJWRAV-DdslL67t.js";import{s as q}from"./chunk-TLYTI3QM-BtsryAWn.js";import{i as Gn}from"./chunk-SSA7SXE4-8GP0mzND.js";import{b as Wn}from"./chunk-57V4RE7B-B00Gx105.js";import{s as Hn}from"./chunk-TQNYOUFX-Cy6rKjN1.js";import"./KeyIcon-cnz02KkH.js";import"./logo-Pwvcz7fP.js";import"./ExclamationTriangleIcon-BrATFOg-.js";import"./features-animation-CJOIcJme.js";import"./create-visual-element-n1sUObcM.js";import"./chunk-XJ2YRSUP-mUAsOM2l.js";import"./useToggleState-B-R-dyH0.js";function Vn({title:e,titleId:r,...a},n){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},a),e?y.createElement("title",{id:r},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const kr=y.forwardRef(Vn),fe=()=>"var(--borderRadius, 12px)",qn=({allUsers:e,roles:r,isMobile:a,isTablet:n,setUsers:l,pagination:o,onPageChange:c,onRowsPerPageChange:f,totalUsers:h=0,onEdit:v,loading:_=!1,updateUserOptimized:w,deleteUserOptimized:T,toggleUserStatusOptimized:I,updateUserRolesOptimized:P,toggleSingleDeviceLogin:O,resetUserDevice:R,deviceActions:A={}})=>{const[m,k]=y.useState({}),M=(s,p="w-5 h-5")=>{const E=(s==null?void 0:s.toLowerCase())||"";return E.includes("mobile")||E.includes("android")||E.includes("iphone")?t.jsx(Se,{className:`${p} text-primary`}):E.includes("tablet")||E.includes("ipad")?t.jsx(Ia,{className:`${p} text-secondary`}):t.jsx(Ca,{className:`${p} text-default-500`})},S=s=>{const p=(s==null?void 0:s.toLowerCase())||"";return p.includes("mobile")||p.includes("android")||p.includes("iphone")?"Mobile Device":p.includes("tablet")||p.includes("ipad")?"Tablet":"Desktop"},j=(s,p,E)=>{k($=>({...$,[`${s}-${p}`]:E}))},N=(s,p)=>m[`${s}-${p}`]||!1;async function d(s,p){j(s,"role",!0);const E=new Promise(async($,G)=>{var u;try{const ue=await axios.post(route("user.updateRole",{id:s}),{roles:p});ue.status===200&&(P&&P(s,p),$([ue.data.message||"Role updated successfully"]))}catch(ue){((u=ue.response)==null?void 0:u.status)===422?G(ue.response.data.errors||["Failed to update user role."]):G(["An unexpected error occurred. Please try again later."])}finally{j(s,"role",!1)}});return z.promise(E,{pending:"Updating employee role...",success:{render({data:$}){return $.join(", ")}},error:{render({data:$}){return Array.isArray($)?$.join(", "):$}}}),E}const C=y.useMemo(()=>{const s=[{name:"#",uid:"sl"},{name:"USER",uid:"user"},{name:"EMAIL",uid:"email"},{name:"DEPARTMENT",uid:"department"},{name:"DEVICE STATUS",uid:"device_status"},{name:"STATUS",uid:"status"},{name:"ROLES",uid:"roles"},{name:"ACTIONS",uid:"actions"}];if(!a&&!n)s.splice(3,0,{name:"PHONE",uid:"phone"});else if(a)s.splice(s.findIndex(p=>p.uid==="department"),1),s.splice(s.findIndex(p=>p.uid==="device_status"),1);else if(n){const p=s.findIndex(E=>E.uid==="device_status");if(p>-1){const E=s.splice(p,1)[0];s.splice(2,0,E)}}return s},[a,n]),B=async(s,p)=>{if(!N(s,"status")){j(s,"status",!0);try{I?(I(s,!p),z.success(`User status ${p?"deactivated":"activated"} successfully`)):l&&(l(E=>E.map($=>$.id===s?{...$,active:!p}:$)),z.success(`User status ${p?"deactivated":"activated"} successfully`))}catch(E){console.error("Error toggling user status:",E),z.error("Failed to update user status")}finally{j(s,"status",!1)}}},b=(s,p,E)=>{var G;const $=s[p];switch(p){case"sl":const ee=(o!=null&&o.currentPage&&(o!=null&&o.perPage)?Number((o.currentPage-1)*o.perPage):0)+(typeof E=="number"?E:0)+1;return t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"flex items-center justify-center w-8 h-8 border shadow-sm",style:{background:"var(--theme-content2, #F4F4F5)",borderColor:"var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 8px)",color:"var(--theme-foreground, #000000)"},children:t.jsx("span",{className:"text-sm font-bold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:ee})})});case"user":return t.jsx(Ea,{className:"w-fit max-w-full",avatarProps:{radius:fe(),size:"sm",src:(s==null?void 0:s.profile_image_url)||(s==null?void 0:s.profile_image),showFallback:!0,name:(s==null?void 0:s.name)||"Unnamed User",isBordered:!0,style:{borderColor:"var(--theme-primary, #3B82F6)",borderWidth:"2px"}},name:t.jsx("span",{className:"text-sm font-semibold whitespace-nowrap text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:(s==null?void 0:s.name)||"Unnamed User"}),description:t.jsxs("span",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["ID: ",s==null?void 0:s.id]})});case"email":return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:t.jsx(bt,{className:"w-3.5 h-3.5"})}),t.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s.email})]});case"phone":return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:t.jsx(ht,{className:"w-3.5 h-3.5"})}),t.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s.phone||"N/A"})]});case"department":return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:t.jsx(Pe,{className:"w-3.5 h-3.5"})}),t.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:(s==null?void 0:s.department)||"N/A"})]});case"device_status":const V=N(s.id,"deviceToggle");return t.jsx("div",{className:"flex items-center space-x-2",children:s.single_device_login?t.jsxs(t.Fragment,{children:[t.jsx(le,{size:"sm",variant:"flat",color:s.active_device?"warning":"success",startContent:V?t.jsx("div",{className:"animate-spin",children:t.jsx(ye,{className:"w-3 h-3"})}):s.active_device?t.jsx(Ze,{className:"w-3 h-3"}):t.jsx(Xe,{className:"w-3 h-3"}),children:V?"Loading...":s.active_device?"Locked":"Free"}),s.active_device&&!V&&t.jsx(vt,{content:t.jsxs("div",{className:"backdrop-blur-md border rounded-lg p-4 shadow-2xl max-w-sm",style:{background:"color-mix(in srgb, var(--theme-content1) 20%, transparent)",borderColor:"var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)"},children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[M(s.active_device.user_agent,"w-5 h-5"),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-foreground text-sm",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s.active_device.device_name||"Unknown Device"}),t.jsx("div",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:S(s.active_device.user_agent)})]})]}),t.jsx("div",{className:"space-y-2 text-xs",children:t.jsx("div",{className:"pt-2 mt-2 border-t",style:{borderColor:"color-mix(in srgb, var(--theme-divider) 20%, transparent)"},children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Ta,{className:"w-3 h-3 text-success"}),t.jsx("span",{className:"text-success text-xs font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s.active_device.is_active?"Currently Active":"Inactive"})]})})})]}),placement:"top",classNames:{content:"p-0 bg-transparent shadow-none border-none"},children:t.jsx("div",{className:"flex items-center p-1 rounded-sm hover:bg-content1/10 transition-colors cursor-default",children:M(s.active_device.user_agent,"w-4 h-4")})})]}):t.jsx(le,{size:"sm",variant:"flat",color:"default",startContent:V?t.jsx("div",{className:"animate-spin",children:t.jsx(ye,{className:"w-3 h-3"})}):t.jsx($e,{className:"w-3 h-3"}),children:V?"Loading...":"Disabled"})});case"status":return t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.active,onChange:()=>B(s.id,s.active),disabled:N(s.id,"status")}),t.jsx("div",{className:"w-11 h-6 peer-focus:outline-hidden peer-focus:ring-4 peer-focus:ring-opacity-30 rounded-full peer transition-all duration-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all",style:{backgroundColor:s.active?"var(--theme-success, #10B981)":"var(--theme-danger, #EF4444)"}}),N(s.id,"status")&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(Ve,{size:"sm",color:"default"})})]}),t.jsx("span",{className:"text-xs font-medium",style:{color:s.active?"var(--theme-success, #10B981)":"var(--theme-danger, #EF4444)",fontFamily:'var(--fontFamily, "Inter")'},children:s.active?"Active":"Inactive"})]});case"roles":const Be=((G=s.roles)==null?void 0:G.map(W=>typeof W=="object"&&W!==null?W.name:W))||[],ve=new Set(Be),ke=Array.from(ve).join(", ")||"No Roles";return t.jsx("div",{className:"flex items-center",children:t.jsxs(pt,{isDisabled:N(s.id,"role"),className:"max-w-[220px]",children:[t.jsx(xt,{children:t.jsx(te,{className:"capitalize",variant:"solid",size:"sm",radius:fe(),startContent:N(s.id,"role")?t.jsx(Ve,{size:"sm"}):null,style:{background:"var(--theme-primary, #3B82F6)",color:"white",fontFamily:'var(--fontFamily, "Inter")',borderRadius:fe()},children:ke})}),t.jsx(gt,{disallowEmptySelection:!1,"aria-label":"Role selection",closeOnSelect:!1,selectedKeys:ve,selectionMode:"multiple",variant:"flat",onSelectionChange:W=>{const me=Array.from(W);d(s.id,me)},children:(r||[]).map(W=>t.jsx(re,{children:typeof W=="object"&&W!==null?W.name:W},typeof W=="object"&&W!==null?W.name:W))})]})});case"actions":return t.jsx("div",{className:"flex justify-center items-center",children:t.jsxs(pt,{children:[t.jsx(xt,{children:t.jsx(te,{isIconOnly:!0,size:"sm",variant:"solid",radius:fe(),style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)",fontFamily:'var(--fontFamily, "Inter")',borderRadius:fe()},className:"hover:opacity-80 transition-opacity",children:t.jsx(yt,{className:"w-4 h-4"})})}),t.jsxs(gt,{style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-divider, #E5E7EB)",borderRadius:fe()},children:[t.jsx(re,{textValue:"View Profile",href:route("profile",{user:s.id}),as:Ur,className:"text-blue-500",startContent:t.jsx(Ke,{className:"w-4 h-4"}),children:"View Profile"}),t.jsx(re,{textValue:"Edit User",onPress:()=>{v&&v(s)},className:"text-amber-500",startContent:t.jsx(Sa,{className:"w-4 h-4"}),children:"Edit"}),t.jsx(re,{textValue:"Device Toggle",onPress:()=>{O&&!N(s.id,"deviceToggle")&&(j(s.id,"deviceToggle",!0),O(s.id,!s.single_device_login).finally(()=>{j(s.id,"deviceToggle",!1)}))},isDisabled:A[s.id]||N(s.id,"deviceToggle"),startContent:N(s.id,"deviceToggle")?t.jsx("div",{className:"animate-spin",children:t.jsx(ye,{className:"w-4 h-4"})}):s.single_device_login?t.jsx(Xe,{className:"w-4 h-4"}):t.jsx(Ze,{className:"w-4 h-4"}),className:s.single_device_login?"text-orange-500":"text-green-500",children:N(s.id,"deviceToggle")?"Processing...":s.single_device_login?"Disable Device Lock":"Enable Device Lock"}),s.single_device_login&&s.active_device&&t.jsx(re,{textValue:"Reset Device",onPress:()=>{R&&!N(s.id,"deviceReset")&&(j(s.id,"deviceReset",!0),R(s.id).finally(()=>{j(s.id,"deviceReset",!1)}))},isDisabled:A[s.id]||N(s.id,"deviceReset"),startContent:N(s.id,"deviceReset")?t.jsx("div",{className:"animate-spin",children:t.jsx(ye,{className:"w-4 h-4"})}):t.jsx(ye,{className:"w-4 h-4"}),className:"text-red-500",children:N(s.id,"deviceReset")?"Resetting...":"Reset Device"}),t.jsx(re,{textValue:"View Devices",href:route("admin.users.devices",{userId:s.id}),as:Ur,startContent:t.jsx(Se,{className:"w-4 h-4"}),className:"text-blue-500",children:"View Device History"})]})]})});default:return $}},g=()=>!e||!h||_?null:t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-6 py-4 border-t",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:"var(--theme-content2, #F4F4F5)",borderRadius:"0 0 var(--borderRadius, 12px) var(--borderRadius, 12px)"},children:[t.jsxs("span",{className:"text-sm text-default-600 mb-3 sm:mb-0 font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["Showing"," ",t.jsx("span",{className:"font-semibold text-default-900",children:(o.currentPage-1)*o.perPage+1})," ","to"," ",t.jsx("span",{className:"font-semibold text-default-900",children:Math.min(o.currentPage*o.perPage,h)})," ","of"," ",t.jsx("span",{className:"font-semibold text-default-900",children:h})," ","users"]}),t.jsx($a,{total:Math.ceil(h/o.perPage),initialPage:o.currentPage,page:o.currentPage,onChange:c,size:a?"sm":"md",variant:"flat",showControls:!0,radius:fe(),style:{fontFamily:'var(--fontFamily, "Inter")'},classNames:{wrapper:"gap-1",item:"bg-default-100 hover:bg-default-200 text-default-700 font-medium border border-default-200",cursor:"bg-primary text-primary-foreground font-semibold shadow-md",prev:"bg-default-100 hover:bg-default-200 text-default-700 border border-default-200",next:"bg-default-100 hover:bg-default-200 text-default-700 border border-default-200"}})]});return t.jsxs("div",{className:"w-full flex flex-col border rounded-lg shadow-lg",style:{maxHeight:"calc(100vh - 240px)",borderColor:"var(--theme-divider, #E4E4E7)",background:"var(--theme-content1, #FFFFFF)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[t.jsx("div",{className:"flex-1 overflow-auto",style:{scrollbarWidth:"thin",scrollbarColor:"var(--theme-divider, #E4E4E7) transparent"},children:t.jsxs(Sn,{removeWrapper:!0,selectionMode:"none",isCompact:a,classNames:{base:"min-w-[900px]",wrapper:"p-0 shadow-none",th:"text-default-600 border-b font-semibold text-xs sticky top-0 z-30",td:"border-b py-4 px-3",table:"border-collapse w-full",thead:"sticky top-0 z-30",tbody:"",tr:"hover:bg-default-50 transition-colors duration-150",emptyWrapper:"text-center h-32",loadingWrapper:"h-32"},style:{"--table-border-color":"var(--theme-divider, #E4E4E7)","--table-header-bg":"var(--theme-content2, #F4F4F5)","--table-row-hover":"var(--theme-default-50, #F9FAFB)"},children:[t.jsx(An,{columns:C,children:s=>t.jsx(On,{align:s.uid==="actions"||s.uid==="sl"?"center":"start",width:s.uid==="user"?280:s.uid==="email"?240:s.uid==="phone"?140:s.uid==="department"||s.uid==="device_status"?160:s.uid==="status"?120:s.uid==="roles"?180:s.uid==="actions"?120:void 0,style:{background:"var(--table-header-bg)",borderColor:"var(--table-border-color)",fontFamily:'var(--fontFamily, "Inter")',fontSize:"0.75rem",fontWeight:"600"},children:t.jsxs("div",{className:"flex items-center gap-2 py-1",children:[s.uid==="sl"&&t.jsx(Pn,{className:"w-3 h-3 text-default-400"}),s.uid==="user"&&t.jsx(Ke,{className:"w-3 h-3 text-default-400"}),s.uid==="email"&&t.jsx(bt,{className:"w-3 h-3 text-default-400"}),s.uid==="phone"&&t.jsx(ht,{className:"w-3 h-3 text-default-400"}),s.uid==="department"&&t.jsx(Pe,{className:"w-3 h-3 text-default-400"}),s.uid==="device_status"&&t.jsx(Se,{className:"w-3 h-3 text-default-400"}),s.uid==="status"&&t.jsx(Pa,{className:"w-3 h-3 text-default-400"}),s.uid==="roles"&&t.jsx($e,{className:"w-3 h-3 text-default-400"}),s.uid==="actions"&&t.jsx(yt,{className:"w-3 h-3 text-default-400"}),t.jsx("span",{children:s.name})]})},s.uid)}),t.jsx($n,{items:e||[],emptyContent:t.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[t.jsx(_n,{className:"w-12 h-12 text-default-300 mb-3"}),t.jsx("p",{className:"text-default-500 font-medium",children:"No users found"}),t.jsx("p",{className:"text-default-400 text-sm",children:"Try adjusting your search or filters"})]}),loadingContent:t.jsx("div",{className:"flex justify-center items-center py-8",children:t.jsx(Ve,{size:"lg",color:"primary"})}),isLoading:_,children:(s,p)=>{const E=e?e.findIndex($=>$.id===s.id):p;return t.jsx(En,{className:"group",style:{background:"var(--theme-content1, #FFFFFF)"},children:$=>t.jsx(Rn,{style:{borderColor:"var(--table-border-color)",fontFamily:'var(--fontFamily, "Inter")',background:"inherit"},children:b(s,$,E)})},s.id)}})]})}),g()]})};var Ra=typeof global=="object"&&global&&global.Object===Object&&global,Kn=typeof self=="object"&&self&&self.Object===Object&&self,Q=Ra||Kn||Function("return this")(),X=Q.Symbol,Aa=Object.prototype,Xn=Aa.hasOwnProperty,Zn=Aa.toString,Te=X?X.toStringTag:void 0;function Yn(e){var r=Xn.call(e,Te),a=e[Te];try{e[Te]=void 0;var n=!0}catch{}var l=Zn.call(e);return n&&(r?e[Te]=a:delete e[Te]),l}var Jn=Object.prototype,Qn=Jn.toString;function es(e){return Qn.call(e)}var ts="[object Null]",rs="[object Undefined]",zr=X?X.toStringTag:void 0;function pe(e){return e==null?e===void 0?rs:ts:zr&&zr in Object(e)?Yn(e):es(e)}function ne(e){return e!=null&&typeof e=="object"}var as="[object Symbol]";function at(e){return typeof e=="symbol"||ne(e)&&pe(e)==as}function Oa(e,r){for(var a=-1,n=e==null?0:e.length,l=Array(n);++a<n;)l[a]=r(e[a],a,e);return l}var J=Array.isArray,Gr=X?X.prototype:void 0,Wr=Gr?Gr.toString:void 0;function La(e){if(typeof e=="string")return e;if(J(e))return Oa(e,La)+"";if(at(e))return Wr?Wr.call(e):"";var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}var ns=/\s/;function ss(e){for(var r=e.length;r--&&ns.test(e.charAt(r)););return r}var is=/^\s+/;function ls(e){return e&&e.slice(0,ss(e)+1).replace(is,"")}function K(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Hr=NaN,os=/^[-+]0x[0-9a-f]+$/i,ds=/^0b[01]+$/i,cs=/^0o[0-7]+$/i,us=parseInt;function Vr(e){if(typeof e=="number")return e;if(at(e))return Hr;if(K(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=K(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=ls(e);var a=ds.test(e);return a||cs.test(e)?us(e.slice(2),a?2:8):os.test(e)?Hr:+e}function Da(e){return e}var ms="[object AsyncFunction]",fs="[object Function]",hs="[object GeneratorFunction]",ps="[object Proxy]";function $t(e){if(!K(e))return!1;var r=pe(e);return r==fs||r==hs||r==ms||r==ps}var ct=Q["__core-js_shared__"],qr=function(){var e=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function xs(e){return!!qr&&qr in e}var gs=Function.prototype,vs=gs.toString;function xe(e){if(e!=null){try{return vs.call(e)}catch{}try{return e+""}catch{}}return""}var bs=/[\\^$.*+?()[\]{}|]/g,ys=/^\[object .+?Constructor\]$/,js=Function.prototype,_s=Object.prototype,ws=js.toString,Ns=_s.hasOwnProperty,Fs=RegExp("^"+ws.call(Ns).replace(bs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ts(e){if(!K(e)||xs(e))return!1;var r=$t(e)?Fs:ys;return r.test(xe(e))}function Cs(e,r){return e==null?void 0:e[r]}function ge(e,r){var a=Cs(e,r);return Ts(a)?a:void 0}var jt=ge(Q,"WeakMap"),Kr=Object.create,Is=function(){function e(){}return function(r){if(!K(r))return{};if(Kr)return Kr(r);e.prototype=r;var a=new e;return e.prototype=void 0,a}}();function Ps(e,r,a){switch(a.length){case 0:return e.call(r);case 1:return e.call(r,a[0]);case 2:return e.call(r,a[0],a[1]);case 3:return e.call(r,a[0],a[1],a[2])}return e.apply(r,a)}function Ua(e,r){var a=-1,n=e.length;for(r||(r=Array(n));++a<n;)r[a]=e[a];return r}var Ss=800,$s=16,Es=Date.now;function Rs(e){var r=0,a=0;return function(){var n=Es(),l=$s-(n-a);if(a=n,l>0){if(++r>=Ss)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}function As(e){return function(){return e}}var Ye=function(){try{var e=ge(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Os=Ye?function(e,r){return Ye(e,"toString",{configurable:!0,enumerable:!1,value:As(r),writable:!0})}:Da,Ma=Rs(Os);function Ls(e,r){for(var a=-1,n=e==null?0:e.length;++a<n&&r(e[a],a,e)!==!1;);return e}var Ds=9007199254740991,Us=/^(?:0|[1-9]\d*)$/;function Et(e,r){var a=typeof e;return r=r??Ds,!!r&&(a=="number"||a!="symbol"&&Us.test(e))&&e>-1&&e%1==0&&e<r}function Rt(e,r,a){r=="__proto__"&&Ye?Ye(e,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[r]=a}function Ue(e,r){return e===r||e!==e&&r!==r}var Ms=Object.prototype,Bs=Ms.hasOwnProperty;function At(e,r,a){var n=e[r];(!(Bs.call(e,r)&&Ue(n,a))||a===void 0&&!(r in e))&&Rt(e,r,a)}function Ne(e,r,a,n){var l=!a;a||(a={});for(var o=-1,c=r.length;++o<c;){var f=r[o],h=void 0;h===void 0&&(h=e[f]),l?Rt(a,f,h):At(a,f,h)}return a}var Xr=Math.max;function Ba(e,r,a){return r=Xr(r===void 0?e.length-1:r,0),function(){for(var n=arguments,l=-1,o=Xr(n.length-r,0),c=Array(o);++l<o;)c[l]=n[r+l];l=-1;for(var f=Array(r+1);++l<r;)f[l]=n[l];return f[r]=a(c),Ps(e,this,f)}}function ks(e,r){return Ma(Ba(e,r,Da),e+"")}var zs=9007199254740991;function ka(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=zs}function nt(e){return e!=null&&ka(e.length)&&!$t(e)}function Gs(e,r,a){if(!K(a))return!1;var n=typeof r;return(n=="number"?nt(a)&&Et(r,a.length):n=="string"&&r in a)?Ue(a[r],e):!1}function Ws(e){return ks(function(r,a){var n=-1,l=a.length,o=l>1?a[l-1]:void 0,c=l>2?a[2]:void 0;for(o=e.length>3&&typeof o=="function"?(l--,o):void 0,c&&Gs(a[0],a[1],c)&&(o=l<3?void 0:o,l=1),r=Object(r);++n<l;){var f=a[n];f&&e(r,f,n,o)}return r})}var Hs=Object.prototype;function Ot(e){var r=e&&e.constructor,a=typeof r=="function"&&r.prototype||Hs;return e===a}function Vs(e,r){for(var a=-1,n=Array(e);++a<e;)n[a]=r(a);return n}var qs="[object Arguments]";function Zr(e){return ne(e)&&pe(e)==qs}var za=Object.prototype,Ks=za.hasOwnProperty,Xs=za.propertyIsEnumerable,Je=Zr(function(){return arguments}())?Zr:function(e){return ne(e)&&Ks.call(e,"callee")&&!Xs.call(e,"callee")};function Zs(){return!1}var Ga=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Yr=Ga&&typeof module=="object"&&module&&!module.nodeType&&module,Ys=Yr&&Yr.exports===Ga,Jr=Ys?Q.Buffer:void 0,Js=Jr?Jr.isBuffer:void 0,Ae=Js||Zs,Qs="[object Arguments]",ei="[object Array]",ti="[object Boolean]",ri="[object Date]",ai="[object Error]",ni="[object Function]",si="[object Map]",ii="[object Number]",li="[object Object]",oi="[object RegExp]",di="[object Set]",ci="[object String]",ui="[object WeakMap]",mi="[object ArrayBuffer]",fi="[object DataView]",hi="[object Float32Array]",pi="[object Float64Array]",xi="[object Int8Array]",gi="[object Int16Array]",vi="[object Int32Array]",bi="[object Uint8Array]",yi="[object Uint8ClampedArray]",ji="[object Uint16Array]",_i="[object Uint32Array]",U={};U[hi]=U[pi]=U[xi]=U[gi]=U[vi]=U[bi]=U[yi]=U[ji]=U[_i]=!0;U[Qs]=U[ei]=U[mi]=U[ti]=U[fi]=U[ri]=U[ai]=U[ni]=U[si]=U[ii]=U[li]=U[oi]=U[di]=U[ci]=U[ui]=!1;function wi(e){return ne(e)&&ka(e.length)&&!!U[pe(e)]}function Lt(e){return function(r){return e(r)}}var Wa=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ee=Wa&&typeof module=="object"&&module&&!module.nodeType&&module,Ni=Ee&&Ee.exports===Wa,ut=Ni&&Ra.process,we=function(){try{var e=Ee&&Ee.require&&Ee.require("util").types;return e||ut&&ut.binding&&ut.binding("util")}catch{}}(),Qr=we&&we.isTypedArray,Dt=Qr?Lt(Qr):wi,Fi=Object.prototype,Ti=Fi.hasOwnProperty;function Ha(e,r){var a=J(e),n=!a&&Je(e),l=!a&&!n&&Ae(e),o=!a&&!n&&!l&&Dt(e),c=a||n||l||o,f=c?Vs(e.length,String):[],h=f.length;for(var v in e)(r||Ti.call(e,v))&&!(c&&(v=="length"||l&&(v=="offset"||v=="parent")||o&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||Et(v,h)))&&f.push(v);return f}function Va(e,r){return function(a){return e(r(a))}}var Ci=Va(Object.keys,Object),Ii=Object.prototype,Pi=Ii.hasOwnProperty;function Si(e){if(!Ot(e))return Ci(e);var r=[];for(var a in Object(e))Pi.call(e,a)&&a!="constructor"&&r.push(a);return r}function Ut(e){return nt(e)?Ha(e):Si(e)}function $i(e){var r=[];if(e!=null)for(var a in Object(e))r.push(a);return r}var Ei=Object.prototype,Ri=Ei.hasOwnProperty;function Ai(e){if(!K(e))return $i(e);var r=Ot(e),a=[];for(var n in e)n=="constructor"&&(r||!Ri.call(e,n))||a.push(n);return a}function Me(e){return nt(e)?Ha(e,!0):Ai(e)}var Oi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Li=/^\w*$/;function Di(e,r){if(J(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||at(e)?!0:Li.test(e)||!Oi.test(e)||r!=null&&e in Object(r)}var Oe=ge(Object,"create");function Ui(){this.__data__=Oe?Oe(null):{},this.size=0}function Mi(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var Bi="__lodash_hash_undefined__",ki=Object.prototype,zi=ki.hasOwnProperty;function Gi(e){var r=this.__data__;if(Oe){var a=r[e];return a===Bi?void 0:a}return zi.call(r,e)?r[e]:void 0}var Wi=Object.prototype,Hi=Wi.hasOwnProperty;function Vi(e){var r=this.__data__;return Oe?r[e]!==void 0:Hi.call(r,e)}var qi="__lodash_hash_undefined__";function Ki(e,r){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Oe&&r===void 0?qi:r,this}function he(e){var r=-1,a=e==null?0:e.length;for(this.clear();++r<a;){var n=e[r];this.set(n[0],n[1])}}he.prototype.clear=Ui;he.prototype.delete=Mi;he.prototype.get=Gi;he.prototype.has=Vi;he.prototype.set=Ki;function Xi(){this.__data__=[],this.size=0}function st(e,r){for(var a=e.length;a--;)if(Ue(e[a][0],r))return a;return-1}var Zi=Array.prototype,Yi=Zi.splice;function Ji(e){var r=this.__data__,a=st(r,e);if(a<0)return!1;var n=r.length-1;return a==n?r.pop():Yi.call(r,a,1),--this.size,!0}function Qi(e){var r=this.__data__,a=st(r,e);return a<0?void 0:r[a][1]}function el(e){return st(this.__data__,e)>-1}function tl(e,r){var a=this.__data__,n=st(a,e);return n<0?(++this.size,a.push([e,r])):a[n][1]=r,this}function de(e){var r=-1,a=e==null?0:e.length;for(this.clear();++r<a;){var n=e[r];this.set(n[0],n[1])}}de.prototype.clear=Xi;de.prototype.delete=Ji;de.prototype.get=Qi;de.prototype.has=el;de.prototype.set=tl;var Le=ge(Q,"Map");function rl(){this.size=0,this.__data__={hash:new he,map:new(Le||de),string:new he}}function al(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function it(e,r){var a=e.__data__;return al(r)?a[typeof r=="string"?"string":"hash"]:a.map}function nl(e){var r=it(this,e).delete(e);return this.size-=r?1:0,r}function sl(e){return it(this,e).get(e)}function il(e){return it(this,e).has(e)}function ll(e,r){var a=it(this,e),n=a.size;return a.set(e,r),this.size+=a.size==n?0:1,this}function ce(e){var r=-1,a=e==null?0:e.length;for(this.clear();++r<a;){var n=e[r];this.set(n[0],n[1])}}ce.prototype.clear=rl;ce.prototype.delete=nl;ce.prototype.get=sl;ce.prototype.has=il;ce.prototype.set=ll;var ol="Expected a function";function Mt(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(ol);var a=function(){var n=arguments,l=r?r.apply(this,n):n[0],o=a.cache;if(o.has(l))return o.get(l);var c=e.apply(this,n);return a.cache=o.set(l,c)||o,c};return a.cache=new(Mt.Cache||ce),a}Mt.Cache=ce;var dl=500;function cl(e){var r=Mt(e,function(n){return a.size===dl&&a.clear(),n}),a=r.cache;return r}var ul=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ml=/\\(\\)?/g,fl=cl(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(ul,function(a,n,l,o){r.push(l?o.replace(ml,"$1"):n||a)}),r});function hl(e){return e==null?"":La(e)}function lt(e,r){return J(e)?e:Di(e,r)?[e]:fl(hl(e))}function Bt(e){if(typeof e=="string"||at(e))return e;var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}function qa(e,r){r=lt(r,e);for(var a=0,n=r.length;e!=null&&a<n;)e=e[Bt(r[a++])];return a&&a==n?e:void 0}function Qe(e,r,a){var n=e==null?void 0:qa(e,r);return n===void 0?a:n}function kt(e,r){for(var a=-1,n=r.length,l=e.length;++a<n;)e[l+a]=r[a];return e}var ea=X?X.isConcatSpreadable:void 0;function pl(e){return J(e)||Je(e)||!!(ea&&e&&e[ea])}function xl(e,r,a,n,l){var o=-1,c=e.length;for(a||(a=pl),l||(l=[]);++o<c;){var f=e[o];a(f)?kt(l,f):l[l.length]=f}return l}function gl(e){var r=e==null?0:e.length;return r?xl(e):[]}function vl(e){return Ma(Ba(e,void 0,gl),e+"")}var zt=Va(Object.getPrototypeOf,Object),bl="[object Object]",yl=Function.prototype,jl=Object.prototype,Ka=yl.toString,_l=jl.hasOwnProperty,wl=Ka.call(Object);function Xa(e){if(!ne(e)||pe(e)!=bl)return!1;var r=zt(e);if(r===null)return!0;var a=_l.call(r,"constructor")&&r.constructor;return typeof a=="function"&&a instanceof a&&Ka.call(a)==wl}function Nl(e,r,a){var n=-1,l=e.length;r<0&&(r=-r>l?0:l+r),a=a>l?l:a,a<0&&(a+=l),l=r>a?0:a-r>>>0,r>>>=0;for(var o=Array(l);++n<l;)o[n]=e[n+r];return o}function Fl(){this.__data__=new de,this.size=0}function Tl(e){var r=this.__data__,a=r.delete(e);return this.size=r.size,a}function Cl(e){return this.__data__.get(e)}function Il(e){return this.__data__.has(e)}var Pl=200;function Sl(e,r){var a=this.__data__;if(a instanceof de){var n=a.__data__;if(!Le||n.length<Pl-1)return n.push([e,r]),this.size=++a.size,this;a=this.__data__=new ce(n)}return a.set(e,r),this.size=a.size,this}function ae(e){var r=this.__data__=new de(e);this.size=r.size}ae.prototype.clear=Fl;ae.prototype.delete=Tl;ae.prototype.get=Cl;ae.prototype.has=Il;ae.prototype.set=Sl;function $l(e,r){return e&&Ne(r,Ut(r),e)}function El(e,r){return e&&Ne(r,Me(r),e)}var Za=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ta=Za&&typeof module=="object"&&module&&!module.nodeType&&module,Rl=ta&&ta.exports===Za,ra=Rl?Q.Buffer:void 0,aa=ra?ra.allocUnsafe:void 0;function Ya(e,r){if(r)return e.slice();var a=e.length,n=aa?aa(a):new e.constructor(a);return e.copy(n),n}function Al(e,r){for(var a=-1,n=e==null?0:e.length,l=0,o=[];++a<n;){var c=e[a];r(c,a,e)&&(o[l++]=c)}return o}function Ja(){return[]}var Ol=Object.prototype,Ll=Ol.propertyIsEnumerable,na=Object.getOwnPropertySymbols,Gt=na?function(e){return e==null?[]:(e=Object(e),Al(na(e),function(r){return Ll.call(e,r)}))}:Ja;function Dl(e,r){return Ne(e,Gt(e),r)}var Ul=Object.getOwnPropertySymbols,Qa=Ul?function(e){for(var r=[];e;)kt(r,Gt(e)),e=zt(e);return r}:Ja;function Ml(e,r){return Ne(e,Qa(e),r)}function en(e,r,a){var n=r(e);return J(e)?n:kt(n,a(e))}function _t(e){return en(e,Ut,Gt)}function tn(e){return en(e,Me,Qa)}var wt=ge(Q,"DataView"),Nt=ge(Q,"Promise"),Ft=ge(Q,"Set"),sa="[object Map]",Bl="[object Object]",ia="[object Promise]",la="[object Set]",oa="[object WeakMap]",da="[object DataView]",kl=xe(wt),zl=xe(Le),Gl=xe(Nt),Wl=xe(Ft),Hl=xe(jt),Y=pe;(wt&&Y(new wt(new ArrayBuffer(1)))!=da||Le&&Y(new Le)!=sa||Nt&&Y(Nt.resolve())!=ia||Ft&&Y(new Ft)!=la||jt&&Y(new jt)!=oa)&&(Y=function(e){var r=pe(e),a=r==Bl?e.constructor:void 0,n=a?xe(a):"";if(n)switch(n){case kl:return da;case zl:return sa;case Gl:return ia;case Wl:return la;case Hl:return oa}return r});var Vl=Object.prototype,ql=Vl.hasOwnProperty;function Kl(e){var r=e.length,a=new e.constructor(r);return r&&typeof e[0]=="string"&&ql.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var et=Q.Uint8Array;function Wt(e){var r=new e.constructor(e.byteLength);return new et(r).set(new et(e)),r}function Xl(e,r){var a=r?Wt(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}var Zl=/\w*$/;function Yl(e){var r=new e.constructor(e.source,Zl.exec(e));return r.lastIndex=e.lastIndex,r}var ca=X?X.prototype:void 0,ua=ca?ca.valueOf:void 0;function Jl(e){return ua?Object(ua.call(e)):{}}function rn(e,r){var a=r?Wt(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var Ql="[object Boolean]",eo="[object Date]",to="[object Map]",ro="[object Number]",ao="[object RegExp]",no="[object Set]",so="[object String]",io="[object Symbol]",lo="[object ArrayBuffer]",oo="[object DataView]",co="[object Float32Array]",uo="[object Float64Array]",mo="[object Int8Array]",fo="[object Int16Array]",ho="[object Int32Array]",po="[object Uint8Array]",xo="[object Uint8ClampedArray]",go="[object Uint16Array]",vo="[object Uint32Array]";function bo(e,r,a){var n=e.constructor;switch(r){case lo:return Wt(e);case Ql:case eo:return new n(+e);case oo:return Xl(e,a);case co:case uo:case mo:case fo:case ho:case po:case xo:case go:case vo:return rn(e,a);case to:return new n;case ro:case so:return new n(e);case ao:return Yl(e);case no:return new n;case io:return Jl(e)}}function an(e){return typeof e.constructor=="function"&&!Ot(e)?Is(zt(e)):{}}var yo="[object Map]";function jo(e){return ne(e)&&Y(e)==yo}var ma=we&&we.isMap,_o=ma?Lt(ma):jo,wo="[object Set]";function No(e){return ne(e)&&Y(e)==wo}var fa=we&&we.isSet,Fo=fa?Lt(fa):No,To=1,Co=2,Io=4,nn="[object Arguments]",Po="[object Array]",So="[object Boolean]",$o="[object Date]",Eo="[object Error]",sn="[object Function]",Ro="[object GeneratorFunction]",Ao="[object Map]",Oo="[object Number]",ln="[object Object]",Lo="[object RegExp]",Do="[object Set]",Uo="[object String]",Mo="[object Symbol]",Bo="[object WeakMap]",ko="[object ArrayBuffer]",zo="[object DataView]",Go="[object Float32Array]",Wo="[object Float64Array]",Ho="[object Int8Array]",Vo="[object Int16Array]",qo="[object Int32Array]",Ko="[object Uint8Array]",Xo="[object Uint8ClampedArray]",Zo="[object Uint16Array]",Yo="[object Uint32Array]",D={};D[nn]=D[Po]=D[ko]=D[zo]=D[So]=D[$o]=D[Go]=D[Wo]=D[Ho]=D[Vo]=D[qo]=D[Ao]=D[Oo]=D[ln]=D[Lo]=D[Do]=D[Uo]=D[Mo]=D[Ko]=D[Xo]=D[Zo]=D[Yo]=!0;D[Eo]=D[sn]=D[Bo]=!1;function Re(e,r,a,n,l,o){var c,f=r&To,h=r&Co,v=r&Io;if(a&&(c=l?a(e,n,l,o):a(e)),c!==void 0)return c;if(!K(e))return e;var _=J(e);if(_){if(c=Kl(e),!f)return Ua(e,c)}else{var w=Y(e),T=w==sn||w==Ro;if(Ae(e))return Ya(e,f);if(w==ln||w==nn||T&&!l){if(c=h||T?{}:an(e),!f)return h?Ml(e,El(c,e)):Dl(e,$l(c,e))}else{if(!D[w])return l?e:{};c=bo(e,w,f)}}o||(o=new ae);var I=o.get(e);if(I)return I;o.set(e,c),Fo(e)?e.forEach(function(R){c.add(Re(R,r,a,R,e,o))}):_o(e)&&e.forEach(function(R,A){c.set(A,Re(R,r,a,A,e,o))});var P=v?h?tn:_t:h?Me:Ut,O=_?void 0:P(e);return Ls(O||e,function(R,A){O&&(A=R,R=e[A]),At(c,A,Re(R,r,a,A,e,o))}),c}var Jo=1,Qo=4;function We(e){return Re(e,Jo|Qo)}var ed="__lodash_hash_undefined__";function td(e){return this.__data__.set(e,ed),this}function rd(e){return this.__data__.has(e)}function tt(e){var r=-1,a=e==null?0:e.length;for(this.__data__=new ce;++r<a;)this.add(e[r])}tt.prototype.add=tt.prototype.push=td;tt.prototype.has=rd;function ad(e,r){for(var a=-1,n=e==null?0:e.length;++a<n;)if(r(e[a],a,e))return!0;return!1}function nd(e,r){return e.has(r)}var sd=1,id=2;function on(e,r,a,n,l,o){var c=a&sd,f=e.length,h=r.length;if(f!=h&&!(c&&h>f))return!1;var v=o.get(e),_=o.get(r);if(v&&_)return v==r&&_==e;var w=-1,T=!0,I=a&id?new tt:void 0;for(o.set(e,r),o.set(r,e);++w<f;){var P=e[w],O=r[w];if(n)var R=c?n(O,P,w,r,e,o):n(P,O,w,e,r,o);if(R!==void 0){if(R)continue;T=!1;break}if(I){if(!ad(r,function(A,m){if(!nd(I,m)&&(P===A||l(P,A,a,n,o)))return I.push(m)})){T=!1;break}}else if(!(P===O||l(P,O,a,n,o))){T=!1;break}}return o.delete(e),o.delete(r),T}function ld(e){var r=-1,a=Array(e.size);return e.forEach(function(n,l){a[++r]=[l,n]}),a}function od(e){var r=-1,a=Array(e.size);return e.forEach(function(n){a[++r]=n}),a}var dd=1,cd=2,ud="[object Boolean]",md="[object Date]",fd="[object Error]",hd="[object Map]",pd="[object Number]",xd="[object RegExp]",gd="[object Set]",vd="[object String]",bd="[object Symbol]",yd="[object ArrayBuffer]",jd="[object DataView]",ha=X?X.prototype:void 0,mt=ha?ha.valueOf:void 0;function _d(e,r,a,n,l,o,c){switch(a){case jd:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case yd:return!(e.byteLength!=r.byteLength||!o(new et(e),new et(r)));case ud:case md:case pd:return Ue(+e,+r);case fd:return e.name==r.name&&e.message==r.message;case xd:case vd:return e==r+"";case hd:var f=ld;case gd:var h=n&dd;if(f||(f=od),e.size!=r.size&&!h)return!1;var v=c.get(e);if(v)return v==r;n|=cd,c.set(e,r);var _=on(f(e),f(r),n,l,o,c);return c.delete(e),_;case bd:if(mt)return mt.call(e)==mt.call(r)}return!1}var wd=1,Nd=Object.prototype,Fd=Nd.hasOwnProperty;function Td(e,r,a,n,l,o){var c=a&wd,f=_t(e),h=f.length,v=_t(r),_=v.length;if(h!=_&&!c)return!1;for(var w=h;w--;){var T=f[w];if(!(c?T in r:Fd.call(r,T)))return!1}var I=o.get(e),P=o.get(r);if(I&&P)return I==r&&P==e;var O=!0;o.set(e,r),o.set(r,e);for(var R=c;++w<h;){T=f[w];var A=e[T],m=r[T];if(n)var k=c?n(m,A,T,r,e,o):n(A,m,T,e,r,o);if(!(k===void 0?A===m||l(A,m,a,n,o):k)){O=!1;break}R||(R=T=="constructor")}if(O&&!R){var M=e.constructor,S=r.constructor;M!=S&&"constructor"in e&&"constructor"in r&&!(typeof M=="function"&&M instanceof M&&typeof S=="function"&&S instanceof S)&&(O=!1)}return o.delete(e),o.delete(r),O}var Cd=1,pa="[object Arguments]",xa="[object Array]",He="[object Object]",Id=Object.prototype,ga=Id.hasOwnProperty;function Pd(e,r,a,n,l,o){var c=J(e),f=J(r),h=c?xa:Y(e),v=f?xa:Y(r);h=h==pa?He:h,v=v==pa?He:v;var _=h==He,w=v==He,T=h==v;if(T&&Ae(e)){if(!Ae(r))return!1;c=!0,_=!1}if(T&&!_)return o||(o=new ae),c||Dt(e)?on(e,r,a,n,l,o):_d(e,r,h,a,n,l,o);if(!(a&Cd)){var I=_&&ga.call(e,"__wrapped__"),P=w&&ga.call(r,"__wrapped__");if(I||P){var O=I?e.value():e,R=P?r.value():r;return o||(o=new ae),l(O,R,a,n,o)}}return T?(o||(o=new ae),Td(e,r,a,n,l,o)):!1}function dn(e,r,a,n,l){return e===r?!0:e==null||r==null||!ne(e)&&!ne(r)?e!==e&&r!==r:Pd(e,r,a,n,dn,l)}function Sd(e){return function(r,a,n){for(var l=-1,o=Object(r),c=n(r),f=c.length;f--;){var h=c[++l];if(a(o[h],h,o)===!1)break}return r}}var $d=Sd(),ft=function(){return Q.Date.now()},Ed="Expected a function",Rd=Math.max,Ad=Math.min;function Od(e,r,a){var n,l,o,c,f,h,v=0,_=!1,w=!1,T=!0;if(typeof e!="function")throw new TypeError(Ed);r=Vr(r)||0,K(a)&&(_=!0,w="maxWait"in a,o=w?Rd(Vr(a.maxWait)||0,r):o,T="trailing"in a?!0:T);function I(j){var N=n,d=l;return n=l=void 0,v=j,c=e.apply(d,N),c}function P(j){return v=j,f=setTimeout(A,r),_?I(j):c}function O(j){var N=j-h,d=j-v,C=r-N;return w?Ad(C,o-d):C}function R(j){var N=j-h,d=j-v;return h===void 0||N>=r||N<0||w&&d>=o}function A(){var j=ft();if(R(j))return m(j);f=setTimeout(A,O(j))}function m(j){return f=void 0,T&&n?I(j):(n=l=void 0,c)}function k(){f!==void 0&&clearTimeout(f),v=0,n=h=l=f=void 0}function M(){return f===void 0?c:m(ft())}function S(){var j=ft(),N=R(j);if(n=arguments,l=this,h=j,N){if(f===void 0)return P(h);if(w)return clearTimeout(f),f=setTimeout(A,r),I(h)}return f===void 0&&(f=setTimeout(A,r)),c}return S.cancel=k,S.flush=M,S}function Tt(e,r,a){(a!==void 0&&!Ue(e[r],a)||a===void 0&&!(r in e))&&Rt(e,r,a)}function Ld(e){return ne(e)&&nt(e)}function Ct(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}function Dd(e){return Ne(e,Me(e))}function Ud(e,r,a,n,l,o,c){var f=Ct(e,a),h=Ct(r,a),v=c.get(h);if(v){Tt(e,a,v);return}var _=o?o(f,h,a+"",e,r,c):void 0,w=_===void 0;if(w){var T=J(h),I=!T&&Ae(h),P=!T&&!I&&Dt(h);_=h,T||I||P?J(f)?_=f:Ld(f)?_=Ua(f):I?(w=!1,_=Ya(h,!0)):P?(w=!1,_=rn(h,!0)):_=[]:Xa(h)||Je(h)?(_=f,Je(f)?_=Dd(f):(!K(f)||$t(f))&&(_=an(h))):w=!1}w&&(c.set(h,_),l(_,h,n,o,c),c.delete(h)),Tt(e,a,_)}function cn(e,r,a,n,l){e!==r&&$d(r,function(o,c){if(l||(l=new ae),K(o))Ud(e,r,c,a,cn,n,l);else{var f=n?n(Ct(e,c),o,c+"",e,r,l):void 0;f===void 0&&(f=o),Tt(e,c,f)}},Me)}function Md(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}function Bd(e,r){return r.length<2?e:qa(e,Nl(r,0,-1))}function kd(e,r){return dn(e,r)}var It=Ws(function(e,r,a){cn(e,r,a)});function zd(e,r){return r=lt(r,e),e=Bd(e,r),e==null||delete e[Bt(Md(r))]}function Gd(e){return Xa(e)?void 0:e}var Wd=1,Hd=2,Vd=4,va=vl(function(e,r){var a={};if(e==null)return a;var n=!1;r=Oa(r,function(o){return o=lt(o,e),n||(n=o.length>1),o}),Ne(e,tn(e),a),n&&(a=Re(a,Wd|Hd|Vd,Gd));for(var l=r.length;l--;)zd(a,r[l]);return a});function qd(e,r,a,n){if(!K(e))return e;r=lt(r,e);for(var l=-1,o=r.length,c=o-1,f=e;f!=null&&++l<o;){var h=Bt(r[l]),v=a;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(l!=c){var _=f[h];v=void 0,v===void 0&&(v=K(_)?_:Et(r[l+1])?[]:{})}At(f,h,v),f=f[h]}return e}function Pt(e,r,a){return e==null?e:qd(e,r,a)}let De=je.create(),un=(e,r)=>`${e.method}:${e.baseURL??r.defaults.baseURL??""}${e.url}`,mn=e=>e.status===204&&e.headers["precognition-success"]==="true";const rt={},oe={get:(e,r={},a={})=>Ie(Ce("get",e,r,a)),post:(e,r={},a={})=>Ie(Ce("post",e,r,a)),patch:(e,r={},a={})=>Ie(Ce("patch",e,r,a)),put:(e,r={},a={})=>Ie(Ce("put",e,r,a)),delete:(e,r={},a={})=>Ie(Ce("delete",e,r,a)),use(e){return De=e,oe},axios(){return De},fingerprintRequestsUsing(e){return un=e===null?()=>null:e,oe},determineSuccessUsing(e){return mn=e,oe}},Ce=(e,r,a,n)=>({url:r,method:e,...n,...["get","delete"].includes(e)?{params:It({},a,n==null?void 0:n.params)}:{data:It({},a,n==null?void 0:n.data)}}),Ie=(e={})=>{const r=[Kd,Zd,Yd].reduce((a,n)=>n(a),e);return(r.onBefore??(()=>!0))()===!1?Promise.resolve(null):((r.onStart??(()=>null))(),De.request(r).then(async a=>{r.precognitive&&ba(a);const n=a.status;let l=a;return r.precognitive&&r.onPrecognitionSuccess&&mn(l)&&(l=await Promise.resolve(r.onPrecognitionSuccess(l)??l)),r.onSuccess&&Xd(n)&&(l=await Promise.resolve(r.onSuccess(l)??l)),(ya(r,n)??(c=>c))(l)??l},a=>Jd(a)?Promise.reject(a):(r.precognitive&&ba(a.response),(ya(r,a.response.status)??((l,o)=>Promise.reject(o)))(a.response,a))).finally(r.onFinish??(()=>null)))},Kd=e=>{const r=e.only??e.validate;return{...e,timeout:e.timeout??De.defaults.timeout??3e4,precognitive:e.precognitive!==!1,fingerprint:typeof e.fingerprint>"u"?un(e,De):e.fingerprint,headers:{...e.headers,"Content-Type":Qd(e),...e.precognitive!==!1?{Precognition:!0}:{},...r?{"Precognition-Validate-Only":Array.from(r).join()}:{}}}},Xd=e=>e>=200&&e<300,Zd=e=>{var r;return typeof e.fingerprint!="string"||((r=rt[e.fingerprint])==null||r.abort(),delete rt[e.fingerprint]),e},Yd=e=>typeof e.fingerprint!="string"||e.signal||e.cancelToken||!e.precognitive?e:(rt[e.fingerprint]=new AbortController,{...e,signal:rt[e.fingerprint].signal}),ba=e=>{var r;if(((r=e.headers)==null?void 0:r.precognition)!=="true")throw Error("Did not receive a Precognition response. Ensure you have the Precognition middleware in place for the route.")},Jd=e=>{var r;return!Fa(e)||typeof((r=e.response)==null?void 0:r.status)!="number"||Na(e)},ya=(e,r)=>({401:e.onUnauthorized,403:e.onForbidden,404:e.onNotFound,409:e.onConflict,422:e.onValidationError,423:e.onLocked})[r],Qd=e=>{var r,a,n;return((r=e.headers)==null?void 0:r["Content-Type"])??((a=e.headers)==null?void 0:a["Content-type"])??((n=e.headers)==null?void 0:n["content-type"])??(fn(e.data)?"multipart/form-data":"application/json")},fn=e=>Ht(e)||typeof e=="object"&&e!==null&&Object.values(e).some(r=>fn(r)),Ht=e=>typeof File<"u"&&e instanceof File||e instanceof Blob||typeof FileList<"u"&&e instanceof FileList&&e.length>0,ja=e=>typeof e=="string"?e:e(),_a=e=>typeof e=="string"?e.toLowerCase():e(),ec=(e,r={})=>{const a={errorsChanged:[],touchedChanged:[],validatingChanged:[],validatedChanged:[]};let n=!1,l=!1;const o=b=>b!==l?(l=b,a.validatingChanged):[];let c=[];const f=b=>{const g=[...new Set(b)];return c.length!==g.length||!g.every(s=>c.includes(s))?(c=g,a.validatedChanged):[]},h=()=>c.filter(b=>typeof w[b]>"u");let v=[];const _=b=>{const g=[...new Set(b)];return v.length!==g.length||!g.every(s=>v.includes(s))?(v=g,a.touchedChanged):[]};let w={};const T=b=>{const g=rc(b);return kd(w,g)?[]:(w=g,a.errorsChanged)},I=b=>{const g={...w};return delete g[qe(b)],T(g)},P=()=>Object.keys(w).length>0;let O=1500;const R=b=>{O=b,j.cancel(),j=S()};let A=r,m=null,k=[],M=null;const S=()=>Od(b=>{e({get:(g,s={},p={})=>oe.get(g,C(s),N(p,b,s)),post:(g,s={},p={})=>oe.post(g,C(s),N(p,b,s)),patch:(g,s={},p={})=>oe.patch(g,C(s),N(p,b,s)),put:(g,s={},p={})=>oe.put(g,C(s),N(p,b,s)),delete:(g,s={},p={})=>oe.delete(g,C(s),N(p,b,s))}).catch(g=>{var s;return Na(g)||Fa(g)&&((s=g.response)==null?void 0:s.status)===422?null:Promise.reject(g)})},O,{leading:!0,trailing:!0});let j=S();const N=(b,g,s={})=>{const p={...b,...g},E=Array.from(p.only??p.validate??v);return{...g,...yn(b,g),only:E,timeout:p.timeout??5e3,onValidationError:($,G)=>([...f([...c,...E]),...T(It(va({...w},E),$.data.errors))].forEach(u=>u()),p.onValidationError?p.onValidationError($,G):Promise.reject(G)),onSuccess:$=>(f([...c,...E]).forEach(G=>G()),p.onSuccess?p.onSuccess($):$),onPrecognitionSuccess:$=>([...f([...c,...E]),...T(va({...w},E))].forEach(G=>G()),p.onPrecognitionSuccess?p.onPrecognitionSuccess($):$),onBefore:()=>p.onBeforeValidation&&p.onBeforeValidation({data:s,touched:v},{data:A,touched:k})===!1||(p.onBefore||(()=>!0))()===!1?!1:(M=v,m=s,!0),onStart:()=>{o(!0).forEach($=>$()),(p.onStart??(()=>null))()},onFinish:()=>{o(!1).forEach($=>$()),k=M,A=m,M=m=null,(p.onFinish??(()=>null))()}}},d=(b,g,s)=>{if(typeof b>"u"){const p=Array.from((s==null?void 0:s.only)??(s==null?void 0:s.validate)??[]);_([...v,...p]).forEach(E=>E()),j(s??{});return}if(Ht(g)&&!n){console.warn('Precognition file validation is not active. Call the "validateFiles" function on your form to enable it.');return}b=qe(b),Qe(A,b)!==g&&(_([b,...v]).forEach(p=>p()),j(s??{}))},C=b=>n===!1?St(b):b,B={touched:()=>v,validate(b,g,s){return typeof b=="object"&&!("target"in b)&&(s=b,b=g=void 0),d(b,g,s),B},touch(b){const g=Array.isArray(b)?b:[qe(b)];return _([...v,...g]).forEach(s=>s()),B},validating:()=>l,valid:h,errors:()=>w,hasErrors:P,setErrors(b){return T(b).forEach(g=>g()),B},forgetError(b){return I(b).forEach(g=>g()),B},reset(...b){if(b.length===0)_([]).forEach(g=>g());else{const g=[...v];b.forEach(s=>{g.includes(s)&&g.splice(g.indexOf(s),1),Pt(A,s,Qe(r,s))}),_(g).forEach(s=>s())}return B},setTimeout(b){return R(b),B},on(b,g){return a[b].push(g),B},validateFiles(){return n=!0,B}};return B},tc=e=>Object.keys(e).reduce((r,a)=>({...r,[a]:Array.isArray(e[a])?e[a][0]:e[a]}),{}),rc=e=>Object.keys(e).reduce((r,a)=>({...r,[a]:typeof e[a]=="string"?[e[a]]:e[a]}),{}),qe=e=>typeof e!="string"?e.target.name:e,St=e=>{const r={...e};return Object.keys(r).forEach(a=>{const n=r[a];if(n!==null){if(Ht(n)){delete r[a];return}if(Array.isArray(n)){r[a]=Object.values(St({...n}));return}if(typeof n=="object"){r[a]=St(r[a]);return}}}),r},ac=(e,r,a,n={})=>{const l=y.useRef(null);l.current===null&&(l.current=We(a));const o=y.useRef(null);o.current===null&&(o.current=Object.keys(l));const c=y.useRef(l.current),[f,h]=y.useState([]),[v,_]=y.useState([]),[w,T]=y.useState(!1),[I,P]=y.useState(!1),[O,R]=y.useState({}),[A,m]=y.useState(!1),[k,M]=y.useState(()=>We(l.current)),S=y.useRef(null);S.current===null&&(S.current=ec(d=>d[_a(e)](ja(r),c.current,n),a).on("validatingChanged",()=>{T(S.current.validating())}).on("validatedChanged",()=>{h(S.current.valid())}).on("touchedChanged",()=>{_(S.current.touched())}).on("errorsChanged",()=>{m(S.current.hasErrors()),R(tc(S.current.errors())),h(S.current.valid())}));const j=d=>({...d,precognitive:!1,onStart:()=>{P(!0),(d.onStart??(()=>null))()},onFinish:()=>{P(!1),(d.onFinish??(()=>null))()},onValidationError:(C,B)=>(S.current.setErrors(C.data.errors),d.onValidationError?d.onValidationError(C):Promise.reject(B))}),N={data:k,setData(d,C){if(typeof d=="object")c.current=d,M(d);else{const B=We(c.current);c.current=Pt(B,d,C),M(c.current)}return N},touched(d){return typeof d=="string"?v.includes(d):v.length>0},touch(d){return S.current.touch(d),N},validate(d,C){return typeof d=="object"&&!("target"in d)&&(C=d,d=void 0),typeof d>"u"?S.current.validate(C):(d=qe(d),S.current.validate(d,Qe(c.current,d),C)),N},validating:w,valid(d){return f.includes(d)},invalid(d){return typeof O[d]<"u"},errors:O,hasErrors:A,setErrors(d){return S.current.setErrors(d),N},forgetError(d){return S.current.forgetError(d),N},reset(...d){const C=We(l.current);return d.length===0?(c.current=C,M(C)):(d.forEach(B=>Pt(c.current,B,Qe(C,B))),M(c.current)),S.current.reset(...d),N},setValidationTimeout(d){return S.current.setTimeout(d),N},processing:I,async submit(d={}){return oe[_a(e)](ja(r),c.current,j(d))},validateFiles(){return S.current.validateFiles(),N},validator(){return S.current}};return N},wa=({user:e,allUsers:r,departments:a,designations:n,setUsers:l,open:o,closeModal:c,editMode:f=!1})=>{const[h,v]=y.useState(!1),[_,w]=y.useState(!1),[T,I]=y.useState((e==null?void 0:e.profile_image_url)||(e==null?void 0:e.profile_image)||null),[P,O]=y.useState(null),[R,A]=y.useState(r),m=ac(f?"put":"post",f?route("users.update",{user:e.id}):route("users.store"),{id:(e==null?void 0:e.id)||"",name:(e==null?void 0:e.name)||"",user_name:(e==null?void 0:e.user_name)||"",gender:(e==null?void 0:e.gender)||"",birthday:(e==null?void 0:e.birthday)||"",date_of_joining:(e==null?void 0:e.date_of_joining)||"",address:(e==null?void 0:e.address)||"",employee_id:(e==null?void 0:e.employee_id)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||"",department_id:(e==null?void 0:e.department_id)||"",designation_id:(e==null?void 0:e.designation_id)||"",report_to:(e==null?void 0:e.report_to)||"",password:"",password_confirmation:"",roles:(e==null?void 0:e.roles)||[],profile_image:null});y.useEffect(()=>{(e!=null&&e.profile_image_url||e!=null&&e.profile_image)&&I(e.profile_image_url||e.profile_image)},[e]);const k=async d=>{if(d.preventDefault(),P){const C=P.type;if(!["image/jpeg","image/jpg","image/png"].includes(C)){z.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}});return}m.setData("profile_image",P)}try{await m.submit({onSuccess:C=>{var B;l&&l(f?b=>b.map(g=>g.id===C.data.user.id?C.data.user:g):b=>[...b,C.data.user]),z.success(((B=C.data.messages)==null?void 0:B.length)>0?C.data.messages.join(" "):`User ${f?"updated":"added"} successfully`,{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}}),c()},onError:C=>{M(C)}})}catch(C){M(C)}},M=d=>{d.response?d.response.status===422?z.error(d.response.data.message||`Failed to ${f?"update":"add"} user.`,{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}}):z.error("An unexpected error occurred. Please try again later.",{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}}):d.request?z.error("No response received from the server. Please check your internet connection.",{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}}):z.error("An error occurred while setting up the request.",{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}})},S=d=>{const C=d.target.files[0];if(C){const B=URL.createObjectURL(C);I(B),O(C)}},j=(d,C)=>{m.setData(d,C),m.touched(d)&&m.validate(d)},N=()=>{v(!h)};return t.jsxs(wn,{open:o,onClose:c,fullWidth:!0,maxWidth:"md",sx:{"& .MuiPaper-root":{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:theme.glassCard.background,border:theme.glassCard.border,borderRadius:"16px",color:theme.palette.text.primary,boxShadow:theme.glassCard.boxShadow}},children:[t.jsx(DialogTitle,{sx:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",pb:2},children:t.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[t.jsx(Typography,{variant:"h6",component:"div",sx:{fontWeight:600},children:f?"Edit User":"Add New User"}),t.jsx(IconButton,{"aria-label":"close",onClick:c,sx:{color:theme.palette.grey[500],"&:hover":{color:theme.palette.primary.main}},children:t.jsx(ClearIcon,{})})]})}),t.jsx(DialogContent,{sx:{pt:3},children:t.jsx("form",{onSubmit:k,children:t.jsxs(Grid,{container:!0,spacing:3,children:[t.jsx(Grid,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",mb:2},children:t.jsxs(Box,{onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),sx:{position:"relative"},children:[t.jsx(Nn,{src:T,alt:"Profile",sx:{width:120,height:120,border:"4px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",filter:_?"brightness(70%)":"brightness(100%)",transition:"all 0.3s ease"}}),t.jsxs(Box,{component:"label",htmlFor:"icon-button-file",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:_?1:0,transition:"opacity 0.3s ease",cursor:"pointer"},children:[t.jsx("input",{accept:"image/*",id:"icon-button-file",type:"file",style:{display:"none"},onChange:S}),t.jsx(PhotoCamera,{sx:{color:"white",fontSize:32}})]})]})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Full Name",value:m.data.name,onChange:d=>j("name",d.target.value),onBlur:()=>m.validate("name"),error:m.invalid("name"),helperText:m.errors.name,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}},required:!0})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Username",value:m.data.user_name,onChange:d=>j("user_name",d.target.value),onBlur:()=>m.validate("user_name"),error:m.invalid("user_name"),helperText:m.errors.user_name,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}},required:!0})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Email",type:"email",value:m.data.email,onChange:d=>j("email",d.target.value),onBlur:()=>m.validate("email"),error:m.invalid("email"),helperText:m.errors.email,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}},required:!0})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Phone",value:m.data.phone,onChange:d=>j("phone",d.target.value),onBlur:()=>m.validate("phone"),error:m.invalid("phone"),helperText:m.errors.phone,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}}})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsxs(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t.jsx(InputLabel,{id:"department-label",sx:{color:theme.palette.text.secondary},children:"Department"}),t.jsxs(_e,{labelId:"department-label",value:m.data.department_id,onChange:d=>j("department_id",d.target.value),onBlur:()=>m.validate("department_id"),label:"Department",error:m.invalid("department_id"),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[t.jsx(MenuItem,{value:"",children:t.jsx("em",{children:"None"})}),a==null?void 0:a.map(d=>t.jsx(MenuItem,{value:d.id,children:d.name},d.id))]}),m.invalid("department_id")&&t.jsx(FormHelperText,{error:!0,children:m.errors.department_id})]})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsxs(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t.jsx(InputLabel,{id:"designation-label",sx:{color:theme.palette.text.secondary},children:"Designation"}),t.jsxs(_e,{labelId:"designation-label",value:m.data.designation_id,onChange:d=>j("designation_id",d.target.value),onBlur:()=>m.validate("designation_id"),label:"Designation",error:m.invalid("designation_id"),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[t.jsx(MenuItem,{value:"",children:t.jsx("em",{children:"None"})}),n==null?void 0:n.map(d=>t.jsx(MenuItem,{value:d.id,children:d.name},d.id))]}),m.invalid("designation_id")&&t.jsx(FormHelperText,{error:!0,children:m.errors.designation_id})]})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsxs(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t.jsx(InputLabel,{id:"gender-label",sx:{color:theme.palette.text.secondary},children:"Gender"}),t.jsxs(_e,{labelId:"gender-label",value:m.data.gender,onChange:d=>j("gender",d.target.value),onBlur:()=>m.validate("gender"),label:"Gender",error:m.invalid("gender"),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[t.jsx(MenuItem,{value:"",children:t.jsx("em",{children:"Select Gender"})}),t.jsx(MenuItem,{value:"male",children:"Male"}),t.jsx(MenuItem,{value:"female",children:"Female"}),t.jsx(MenuItem,{value:"other",children:"Other"})]}),m.invalid("gender")&&t.jsx(FormHelperText,{error:!0,children:m.errors.gender})]})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Employee ID",value:m.data.employee_id,onChange:d=>j("employee_id",d.target.value),onBlur:()=>m.validate("employee_id"),error:m.invalid("employee_id"),helperText:m.errors.employee_id,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}}})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Date of Birth",type:"date",value:m.data.birthday,onChange:d=>j("birthday",d.target.value),onBlur:()=>m.validate("birthday"),error:m.invalid("birthday"),helperText:m.errors.birthday,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{shrink:!0,sx:{color:theme.palette.text.secondary}}})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Date of Joining",type:"date",value:m.data.date_of_joining,onChange:d=>j("date_of_joining",d.target.value),onBlur:()=>m.validate("date_of_joining"),error:m.invalid("date_of_joining"),helperText:m.errors.date_of_joining,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{shrink:!0,sx:{color:theme.palette.text.secondary}}})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsxs(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t.jsx(InputLabel,{id:"report-to-label",sx:{color:theme.palette.text.secondary},children:"Reports To"}),t.jsxs(_e,{labelId:"report-to-label",value:m.data.report_to,onChange:d=>j("report_to",d.target.value),onBlur:()=>m.validate("report_to"),label:"Reports To",error:m.invalid("report_to"),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[t.jsx(MenuItem,{value:"",children:t.jsx("em",{children:"None"})}),R==null?void 0:R.filter(d=>d.id!==m.data.id).map(d=>t.jsx(MenuItem,{value:d.id,children:d.name},d.id))]}),m.invalid("report_to")&&t.jsx(FormHelperText,{error:!0,children:m.errors.report_to})]})}),t.jsx(Grid,{item:!0,xs:12,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Address",multiline:!0,rows:3,value:m.data.address,onChange:d=>j("address",d.target.value),onBlur:()=>m.validate("address"),error:m.invalid("address"),helperText:m.errors.address,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}}})})}),!f&&t.jsxs(t.Fragment,{children:[t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Password",type:h?"text":"password",value:m.data.password,onChange:d=>j("password",d.target.value),onBlur:()=>m.validate("password"),error:m.invalid("password"),helperText:m.errors.password,required:!f,InputProps:{endAdornment:t.jsx(IconButton,{"aria-label":"toggle password visibility",onClick:N,edge:"end",children:h?t.jsx(VisibilityOff,{}):t.jsx(Visibility,{})}),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}}})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Confirm Password",type:h?"text":"password",value:m.data.password_confirmation,onChange:d=>j("password_confirmation",d.target.value),onBlur:()=>m.validate("password_confirmation"),error:m.invalid("password_confirmation"),helperText:m.errors.password_confirmation||(m.data.password!==m.data.password_confirmation&&m.data.password_confirmation?"Passwords do not match":""),required:!f,InputProps:{endAdornment:t.jsx(IconButton,{"aria-label":"toggle password visibility",onClick:N,edge:"end",children:h?t.jsx(VisibilityOff,{}):t.jsx(Visibility,{})}),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}}})})})]})]})})}),t.jsxs(DialogActions,{sx:{justifyContent:"space-between",p:3,borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[t.jsx(te,{onClick:c,variant:"bordered",color:"default",size:"lg",className:"bg-white/5 hover:bg-white/10 border border-white/10",disabled:m.processing,children:"Cancel"}),t.jsx(LoadingButton,{onClick:k,loading:m.processing,loadingPosition:"start",startIcon:t.jsx(PasswordIcon,{}),variant:"contained",disabled:!m.isDirty||m.processing,sx:{background:"linear-gradient(45deg, #3a7bd5 0%, #2456bd 100%)",boxShadow:"0 4px 20px 0 rgba(58, 123, 213, 0.4)","&:hover":{background:"linear-gradient(45deg, #2456bd 0%, #1a3c8a 100%)"}},children:f?"Update User":"Add User"})]})]})},Z=()=>{var n;if(typeof window>"u")return"lg";const r=((n=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:n.trim())||"12px",a=parseInt(r);return a===0?"none":a<=4?"sm":a<=8?"md":a<=12?"lg":"xl"},nc=({title:e,roles:r,departments:a,designations:n})=>{var Yt,Jt,Qt,er,tr,rr,ar,nr,sr,ir,lr,or,dr,cr,ur,mr,fr,hr,pr,xr,gr,vr,br,yr,jr,_r,wr,Nr,Fr,Tr,Cr,Ir,Pr,Sr;const[l,o]=y.useState(!1),[c,f]=y.useState(!1),[h,v]=y.useState(!1),[_,w]=y.useState(!1);y.useEffect(()=>{const i=()=>{o(window.innerWidth<640),f(window.innerWidth<768),v(window.innerWidth>=1025),w(window.innerWidth>=641&&window.innerWidth<=1024)};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const[T,I]=y.useState([]),[P,O]=y.useState(!0),[R,A]=y.useState(null),[m,k]=y.useState(0),[M,S]=y.useState(1),[j,N]=y.useState(null),[d,C]=y.useState({search:"",role:"all",status:"all",department:"all"}),[B,b]=y.useState(!1),[g,s]=y.useState("table"),[p,E]=y.useState({currentPage:1,perPage:10,total:T.length}),[$,G]=y.useState({}),[u,ue]=y.useState({overview:{total_users:0,active_users:0,inactive_users:0,deleted_users:0,total_roles:0,total_departments:0},distribution:{by_role:[],by_department:[],by_status:[]},activity:{recent_registrations:{new_users_30_days:0,new_users_90_days:0,new_users_year:0,recently_active:0},user_growth_rate:0,current_month_registrations:0},security:{access_metrics:{users_with_roles:0,users_without_roles:0,admin_users:0,regular_users:0},role_distribution:[]},health:{status_ratio:{active_percentage:0,inactive_percentage:0,deleted_percentage:0},system_metrics:{user_activation_rate:0,role_coverage:0,department_coverage:0}},quick_metrics:{total_users:0,active_ratio:0,role_diversity:0,department_diversity:0,recent_activity:0,system_health_score:0}}),ee=y.useMemo(()=>({data:T,total:m,current_page:p.currentPage,per_page:p.perPage,last_page:M}),[T,m,p.currentPage,p.perPage,M]),V=y.useCallback(async()=>{try{const{data:i}=await je.get(route("users.stats"));i.stats&&ue(i.stats)}catch(i){console.error("Error fetching user stats:",i)}},[]),Be=y.useCallback(async()=>{O(!0);try{const i=await je.get(route("users.paginate"),{params:{page:p.currentPage,perPage:p.perPage,search:d.search||void 0,role:d.role!=="all"?d.role:void 0,status:d.status!=="all"?d.status:void 0,department:d.department!=="all"?d.department:void 0}});if(i.status===200){const{users:x}=i.data;x.data&&Array.isArray(x.data)?(I(x.data),k(x.total||x.data.length),S(x.last_page||1)):Array.isArray(x)?(I(x),k(x.length),S(1)):(console.error("Unexpected users data format:",x),I([]),k(0),S(1))}}catch(i){console.error("Error fetching users:",i),z.error("Failed to load users data"),I([])}finally{O(!1)}},[d,p.currentPage,p.perPage]);y.useEffect(()=>{Be()},[Be]),y.useEffect(()=>{V();const i=setInterval(V,6e4);return()=>clearInterval(i)},[V]);const ve=(i,x)=>{C(F=>({...F,[i]:x})),E(F=>({...F,currentPage:1}))},ke=i=>{E(x=>({...x,currentPage:i})),window.scrollTo({top:0,behavior:"smooth"})},W=i=>{E(x=>({...x,currentPage:1,perPage:i}))},me=y.useCallback((i,x=null)=>{N(i),A(x)},[]),Vt=y.useCallback(()=>{N(null),A(null)},[]),ot=y.useCallback(i=>{I(i)},[]),hn=y.useCallback(i=>{I(x=>x.map(F=>F.id===i.id?{...F,...i}:F))},[]),pn=y.useCallback(i=>{I(x=>x.filter(F=>F.id!==i)),V()},[V]),qt=y.useCallback((i,x)=>{I(F=>F.map(L=>L.id===i?{...L,active:x}:L)),V()},[V]),xn=y.useCallback((i,x)=>{I(F=>F.map(L=>L.id===i?{...L,roles:x}:L)),V()},[V]),Kt=y.useCallback(async(i,x)=>{var F,L;G(H=>({...H,[i]:!0}));try{const H=await je.post(route("admin.users.devices.toggle",{userId:i}));H.data.success&&(I(ze=>ze.map(be=>be.id===i?{...be,single_device_login_enabled:H.data.single_device_login_enabled}:be)),z.success(H.data.message))}catch(H){console.error("Error toggling single device login:",H),z.error(((L=(F=H.response)==null?void 0:F.data)==null?void 0:L.message)||"Failed to toggle single device login")}finally{G(H=>({...H,[i]:!1}))}},[]),Xt=y.useCallback(async i=>{G(x=>({...x,[i]:!0}));try{const x=await je.post(route("admin.users.devices.reset",{userId:i}),{reason:"Admin reset via user management"});x.data.success&&(I(F=>F.map(L=>L.id===i?{...L,active_device:null}:L)),z.success(x.data.message||"User devices have been reset"))}catch(x){console.error("Error resetting user devices:",x),z.error("Failed to reset user devices")}finally{G(x=>({...x,[i]:!1}))}},[]);y.useCallback(async i=>{try{const x=await je.get(route("admin.users.devices",{userId:i}));if(x.data.success){const F=x.data.devices;if(F.length===0)z.info("User has no registered devices");else{const L=F.filter(H=>H.is_active).length;z.info(`User has ${F.length} device(s): ${L} active, ${F.length-L} inactive`)}}}catch(x){console.error("Error fetching user devices:",x),z.error("Failed to fetch device information")}},[]);const Zt=(i,x="w-4 h-4")=>{const F=(i==null?void 0:i.toLowerCase())||"";return F.includes("mobile")||F.includes("android")||F.includes("iphone")?t.jsx(Se,{className:`${x} text-primary`}):F.includes("tablet")||F.includes("ipad")?t.jsx(Ia,{className:`${x} text-secondary`}):t.jsx(Ca,{className:`${x} text-default-500`})},gn=i=>{const x=(i==null?void 0:i.toLowerCase())||"";return x.includes("mobile")||x.includes("android")||x.includes("iphone")?"Mobile":x.includes("tablet")||x.includes("ipad")?"Tablet":"Desktop"},vn=({user:i,index:x})=>t.jsx(se,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 h-full min-h-[320px]",style:{background:`linear-gradient(135deg, 
          color-mix(in srgb, var(--theme-content1) 90%, transparent) 20%, 
          color-mix(in srgb, var(--theme-content2) 80%, transparent) 80%)`,borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-3 flex flex-col h-full",children:[t.jsxs("div",{className:"flex items-start gap-2 mb-3 pb-2 border-b border-white/10",children:[t.jsx(Ea,{avatarProps:{radius:"md",src:(i==null?void 0:i.profile_image_url)||(i==null?void 0:i.profile_image),size:"sm",fallback:t.jsx(Ke,{className:"w-4 h-4"}),style:{borderColor:"var(--theme-primary)",borderWidth:"2px"}},name:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-semibold text-foreground text-sm line-clamp-1",children:i.name}),t.jsxs("span",{className:"text-default-500 text-xs line-clamp-1",children:["ID: ",i.id]})]}),classNames:{wrapper:"flex-1 min-w-0",name:"text-sm font-semibold",description:"text-xs text-default-500"}}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(vt,{content:"Edit User",size:"sm",children:t.jsx(te,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-primary min-w-6 w-6 h-6",onPress:()=>me("edit",i),children:t.jsx(Sa,{className:"w-3 h-3"})})}),t.jsxs(pt,{placement:"bottom-end",children:[t.jsx(xt,{children:t.jsx(te,{isIconOnly:!0,size:"sm",variant:"ghost",radius:Z(),isDisabled:$[i.id],className:"min-w-6 w-6 h-6",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)"},children:t.jsx(yt,{className:"w-3 h-3"})})}),t.jsxs(gt,{"aria-label":"Device management actions",variant:"bordered",className:"min-w-[180px]",style:{background:"color-mix(in srgb, var(--theme-content1) 95%, transparent)",backdropFilter:"blur(16px)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:[t.jsx(re,{startContent:i.single_device_login?t.jsx(Xe,{className:"w-3 h-3"}):t.jsx(Ze,{className:"w-3 h-3"}),onPress:()=>Kt(i.id,!i.single_device_login),isDisabled:$[i.id],className:"text-xs",children:i.single_device_login?"Disable Lock":"Enable Lock"},"toggle-device-lock"),i.single_device_login&&i.active_device&&t.jsx(re,{startContent:t.jsx(ye,{className:"w-3 h-3"}),onPress:()=>Xt(i.id),isDisabled:$[i.id],className:"text-xs",children:"Reset Device"},"reset-device"),t.jsx(re,{startContent:t.jsx(Se,{className:"w-3 h-3"}),onPress:()=>Mr.visit(route("admin.users.devices",{userId:i.id})),className:"text-xs",children:"Device History"},"view-devices"),t.jsx(re,{startContent:t.jsx(Ke,{className:"w-3 h-3"}),onPress:()=>Mr.visit(route("profile",{user:i.id})),className:"text-xs",children:"View Profile"},"view-profile")]})]})]})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx(bt,{className:"w-3 h-3 text-default-400 shrink-0"}),t.jsx("span",{className:"text-default-600 line-clamp-1 flex-1",children:i.email})]}),i.phone&&t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx(ht,{className:"w-3 h-3 text-default-400 shrink-0"}),t.jsx("span",{className:"text-default-600 line-clamp-1",children:i.phone})]}),(i.department||i.department_id)&&t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx(Pe,{className:"w-3 h-3 text-default-400 shrink-0"}),t.jsx("span",{className:"text-default-600 line-clamp-1",children:typeof i.department=="string"?i.department:"N/A"})]})]}),t.jsxs("div",{className:"mb-3 p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-content2) 40%, transparent)"},children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-xs font-medium text-default-700",children:"Device Status"}),i.single_device_login&&i.active_device&&t.jsx(vt,{content:t.jsxs("div",{className:"p-2 max-w-xs",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Zt(i.active_device.user_agent,"w-4 h-4"),t.jsx("span",{className:"font-medium text-xs",children:i.active_device.device_name||"Unknown Device"})]}),t.jsxs("div",{className:"text-xs text-default-500",children:[gn(i.active_device.user_agent)," ",i.active_device.is_active?" Active":" Inactive"]})]}),size:"sm",children:t.jsx("div",{className:"cursor-help",children:Zt(i.active_device.user_agent,"w-4 h-4")})})]}),t.jsx(le,{size:"sm",variant:"flat",color:i.single_device_login?i.active_device?"warning":"success":"default",startContent:i.single_device_login?i.active_device?t.jsx(Ze,{className:"w-3 h-3"}):t.jsx(Xe,{className:"w-3 h-3"}):t.jsx($e,{className:"w-3 h-3"}),className:"text-xs",children:i.single_device_login?i.active_device?"Locked":"Free":"Disabled"})]}),t.jsxs("div",{className:"mt-auto space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs font-medium text-default-700",children:"Status"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Hn,{size:"sm",isSelected:i.active,onValueChange:F=>qt(i.id,F),color:i.active?"success":"danger",classNames:{wrapper:"group-data-[selected=true]:bg-success",thumb:"group-data-[selected=true]:ml-4"}}),t.jsx("span",{className:`text-xs font-medium ${i.active?"text-success":"text-danger"}`,children:i.active?"Active":"Inactive"})]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-default-700 mb-1 block",children:"Roles"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.roles&&i.roles.length>0?i.roles.slice(0,3).map((F,L)=>{const H=typeof F=="object"&&F!==null?F.name:F;return t.jsx(le,{size:"sm",variant:"flat",color:"secondary",className:"text-xs h-5",children:H},L)}):t.jsx(le,{size:"sm",variant:"bordered",color:"default",className:"text-xs h-5",children:"No Roles"}),i.roles&&i.roles.length>3&&t.jsxs(le,{size:"sm",variant:"bordered",color:"primary",className:"text-xs h-5",children:["+",i.roles.length-3]})]})]})]})]})}),bn=y.useMemo(()=>{var i,x,F,L,H,ze,be,$r,Er,Rr,Ar,Or,Lr,Dr;return[{title:"Total Users",value:((i=u==null?void 0:u.overview)==null?void 0:i.total_users)||0,icon:t.jsx(Ge,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All users"},{title:"Active Users",value:((x=u==null?void 0:u.overview)==null?void 0:x.active_users)||0,icon:t.jsx(Pa,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((L=(F=u==null?void 0:u.health)==null?void 0:F.status_ratio)==null?void 0:L.active_percentage)||0}% Active`},{title:"Inactive Users",value:((H=u==null?void 0:u.overview)==null?void 0:H.inactive_users)||0,icon:t.jsx(Ln,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:`${((be=(ze=u==null?void 0:u.health)==null?void 0:ze.status_ratio)==null?void 0:be.inactive_percentage)||0}% Inactive`},{title:"Total Roles",value:(($r=u==null?void 0:u.overview)==null?void 0:$r.total_roles)||0,icon:t.jsx($e,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Role diversity"},{title:"Role Coverage",value:`${((Rr=(Er=u==null?void 0:u.health)==null?void 0:Er.system_metrics)==null?void 0:Rr.role_coverage)||0}%`,icon:t.jsx(Dn,{className:"w-5 h-5"}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Users with roles"},{title:"Recent Activity",value:((Or=(Ar=u==null?void 0:u.activity)==null?void 0:Ar.recent_registrations)==null?void 0:Or.recently_active)||0,icon:t.jsx(Ta,{className:"w-5 h-5"}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Active last 7 days"},{title:"System Health",value:`${((Lr=u==null?void 0:u.quick_metrics)==null?void 0:Lr.system_health_score)||0}%`,icon:t.jsx(kr,{className:"w-5 h-5"}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Overall health"},{title:"Departments",value:((Dr=u==null?void 0:u.overview)==null?void 0:Dr.total_departments)||0,icon:t.jsx(Pe,{className:"w-5 h-5"}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Department diversity"}]},[u]);return y.useMemo(()=>{const i=[];return i.push({label:l?"Add":"Add User",icon:t.jsx(dt,{className:"w-4 h-4"}),onPress:()=>me("add"),className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}),i.push({label:l?"":"Export",isIconOnly:l,icon:t.jsx(Br,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),i},[l,me]),t.jsxs(t.Fragment,{children:[t.jsx(jn,{title:e||"Users Management"}),j==="add"&&t.jsx(wa,{user:null,allUsers:T,departments:a,designations:n,open:j==="add",setUsers:ot,closeModal:Vt,editMode:!1}),j==="edit"&&R&&t.jsx(wa,{user:R,allUsers:T,departments:a,designations:n,open:j==="edit",setUsers:ot,closeModal:Vt,editMode:!0}),t.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Users Management",children:t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"w-full",children:t.jsx(Un.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:t.jsxs(se,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[t.jsx(zn,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:t.jsx("div",{className:`${h?"p-6":_?"p-4":"p-3"} w-full`,children:t.jsx("div",{className:"flex flex-col space-y-4",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[P?t.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[t.jsx(q,{className:"w-12 h-12 rounded-xl"}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx(q,{className:"w-64 h-6 rounded mb-2"}),t.jsx(q,{className:"w-48 h-4 rounded"})]})]}):t.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[t.jsx("div",{className:`
                                ${h?"p-3":_?"p-2.5":"p-2"} 
                                rounded-xl flex items-center justify-center
                              `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsx(Ge,{className:`
                                  ${h?"w-8 h-8":_?"w-6 h-6":"w-5 h-5"}
                                `,style:{color:"var(--theme-primary)"}})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h4",{className:`
                                  ${h?"text-2xl":_?"text-xl":"text-lg"}
                                  font-bold text-foreground
                                  ${h?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Users Management"}),t.jsx("p",{className:`
                                  ${h?"text-sm":"text-xs"} 
                                  text-default-500
                                  ${h?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage user accounts, roles and permissions"})]})]}),P?t.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[t.jsx(q,{className:"w-24 h-8 rounded"}),t.jsx(q,{className:"w-20 h-8 rounded"})]}):t.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[t.jsx(te,{size:l?"sm":"md",color:"primary",startContent:t.jsx(dt,{className:"w-4 h-4"}),onPress:()=>me("add"),radius:Z(),style:{fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:l?"Add":"Add User"}),t.jsx(te,{size:l?"sm":"md",variant:"bordered",startContent:t.jsx(Mn,{className:"w-4 h-4"}),radius:Z(),style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-primary) 30%, transparent)",color:"var(--theme-primary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:l?"Export":"Export Users"})]})]})})})}),t.jsxs(ie,{className:"p-6",children:[t.jsx(In,{stats:bn,className:"mb-6",isLoading:P}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6",children:P?t.jsx(t.Fragment,{children:Array.from({length:6}).map((i,x)=>t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-default) 10%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(q,{className:"w-9 h-9 rounded-lg"}),t.jsxs("div",{className:"flex-1",children:[t.jsx(q,{className:"w-24 h-4 rounded mb-1"}),t.jsx(q,{className:"w-32 h-3 rounded"})]})]}),t.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((F,L)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(q,{className:"w-20 h-3 rounded"}),t.jsx(q,{className:"w-12 h-3 rounded"})]},L))})]})},x))}):t.jsxs(t.Fragment,{children:[t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx(Bn,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role Distribution"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User roles breakdown"})]})]}),t.jsx("div",{className:"space-y-3",children:((Jt=(Yt=u==null?void 0:u.distribution)==null?void 0:Yt.by_role)==null?void 0:Jt.length)>0?u.distribution.by_role.slice(0,4).map((i,x)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`color-mix(in srgb, var(--theme-primary) ${80-x*15}%, var(--theme-secondary) ${20+x*15}%)`}}),t.jsx("span",{className:"text-sm text-foreground truncate",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.count}),t.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",i.percentage,"%)"]})]})]},x)):t.jsx("div",{className:"text-center py-4",children:t.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No role data available"})})})]})}),t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-secondary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-secondary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx(Ge,{className:"w-5 h-5",style:{color:"var(--theme-secondary)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User Status"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Active vs inactive users"})]})]}),t.jsx("div",{className:"space-y-3",children:((er=(Qt=u==null?void 0:u.distribution)==null?void 0:Qt.by_status)==null?void 0:er.length)>0?u.distribution.by_status.map((i,x)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:i.name==="Active"?"var(--theme-success)":i.name==="Inactive"?"var(--theme-danger)":"var(--theme-default)"}}),t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.count}),t.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",i.percentage,"%)"]})]})]},x)):t.jsx("div",{className:"text-center py-4",children:t.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No status data available"})})})]})}),t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-warning) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-warning) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx(Pe,{className:"w-5 h-5",style:{color:"var(--theme-warning)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Departments"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Users by department"})]})]}),t.jsx("div",{className:"space-y-3",children:((rr=(tr=u==null?void 0:u.distribution)==null?void 0:tr.by_department)==null?void 0:rr.length)>0?u.distribution.by_department.slice(0,4).map((i,x)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`color-mix(in srgb, var(--theme-warning) ${80-x*15}%, var(--theme-primary) ${20+x*15}%)`}}),t.jsx("span",{className:"text-sm text-foreground truncate",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.count}),t.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",i.percentage,"%)"]})]})]},x)):t.jsx("div",{className:"text-center py-4",children:t.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No department data available"})})})]})}),t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-success) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-success) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx(Br,{className:"w-5 h-5",style:{color:"var(--theme-success)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User Growth"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Registration trends"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"New (30 days)"}),t.jsx("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((nr=(ar=u==null?void 0:u.activity)==null?void 0:ar.recent_registrations)==null?void 0:nr.new_users_30_days)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"New (90 days)"}),t.jsx("span",{className:"text-sm font-medium text-primary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((ir=(sr=u==null?void 0:u.activity)==null?void 0:sr.recent_registrations)==null?void 0:ir.new_users_90_days)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Recently Active"}),t.jsx("span",{className:"text-sm font-medium text-secondary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((or=(lr=u==null?void 0:u.activity)==null?void 0:lr.recent_registrations)==null?void 0:or.recently_active)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Growth Rate"}),t.jsx(le,{size:"sm",color:(((dr=u==null?void 0:u.activity)==null?void 0:dr.user_growth_rate)||0)>0?"success":(((cr=u==null?void 0:u.activity)==null?void 0:cr.user_growth_rate)||0)<0?"danger":"default",variant:"flat",radius:Z(),children:t.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((ur=u==null?void 0:u.activity)==null?void 0:ur.user_growth_rate)||0,"%"]})})]})]})]})}),t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx($e,{className:"w-5 h-5",style:{color:"var(--theme-danger)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Access Control"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role assignments"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"With Roles"}),t.jsx("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((fr=(mr=u==null?void 0:u.security)==null?void 0:mr.access_metrics)==null?void 0:fr.users_with_roles)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Without Roles"}),t.jsx("span",{className:"text-sm font-medium text-danger",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((pr=(hr=u==null?void 0:u.security)==null?void 0:hr.access_metrics)==null?void 0:pr.users_without_roles)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Admin Users"}),t.jsx("span",{className:"text-sm font-medium text-warning",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((gr=(xr=u==null?void 0:u.security)==null?void 0:xr.access_metrics)==null?void 0:gr.admin_users)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role Coverage"}),t.jsx(le,{size:"sm",color:(((br=(vr=u==null?void 0:u.health)==null?void 0:vr.system_metrics)==null?void 0:br.role_coverage)||0)>80?"success":(((jr=(yr=u==null?void 0:u.health)==null?void 0:yr.system_metrics)==null?void 0:jr.role_coverage)||0)>60?"warning":"danger",variant:"flat",radius:Z(),children:t.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((wr=(_r=u==null?void 0:u.health)==null?void 0:_r.system_metrics)==null?void 0:wr.role_coverage)||0,"%"]})})]})]})]})}),t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-default) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-default) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx(kr,{className:"w-5 h-5",style:{color:"var(--theme-default)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"System Health"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Overall metrics"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Health Score"}),t.jsx(le,{size:"sm",color:(((Nr=u==null?void 0:u.quick_metrics)==null?void 0:Nr.system_health_score)||0)>80?"success":(((Fr=u==null?void 0:u.quick_metrics)==null?void 0:Fr.system_health_score)||0)>60?"warning":"danger",variant:"flat",radius:Z(),children:t.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((Tr=u==null?void 0:u.quick_metrics)==null?void 0:Tr.system_health_score)||0,"%"]})})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Activation Rate"}),t.jsxs("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((Ir=(Cr=u==null?void 0:u.health)==null?void 0:Cr.system_metrics)==null?void 0:Ir.user_activation_rate)||0,"%"]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Total Roles"}),t.jsx("span",{className:"text-sm font-medium text-primary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((Pr=u==null?void 0:u.overview)==null?void 0:Pr.total_roles)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Total Departments"}),t.jsx("span",{className:"text-sm font-medium text-warning",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((Sr=u==null?void 0:u.overview)==null?void 0:Sr.total_departments)||0})]})]})]})})]})}),t.jsx("div",{className:"mb-6",children:P?t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[t.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(q,{className:"w-24 h-4 rounded"}),t.jsx(q,{className:"w-full h-10 rounded-lg"})]})}),t.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(q,{className:"w-20 h-4 rounded"}),t.jsx(q,{className:"w-full h-10 rounded-lg"})]})})]}):t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-end",children:[t.jsx("div",{className:"flex-1",children:t.jsx(Gn,{label:"Search Users",placeholder:"Search by name, email or phone...",value:d.search,onValueChange:i=>ve("search",i),variant:"bordered",size:l?"sm":"md",radius:Z(),startContent:t.jsx(Fn,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"border-default-200 hover:border-default-300"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),t.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[t.jsxs(_e,{label:"Status",selectedKeys:d.status?[d.status]:[],onSelectionChange:i=>ve("status",Array.from(i)[0]),variant:"bordered",size:l?"sm":"md",radius:Z(),className:"w-32",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[t.jsx(Fe,{children:"All Status"},"all"),t.jsx(Fe,{children:"Active"},"active"),t.jsx(Fe,{children:"Inactive"},"inactive")]}),t.jsxs(_e,{label:"Role",selectedKeys:d.role?[d.role]:[],onSelectionChange:i=>ve("role",Array.from(i)[0]),variant:"bordered",size:l?"sm":"md",radius:Z(),className:"w-32",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[t.jsx(Fe,{children:"All Roles"},"all"),r==null?void 0:r.map((i,x)=>{const F=typeof i=="object"&&i!==null?i.name:i,L=typeof F=="string"?F.toLowerCase():String(F||`role-${x}`).toLowerCase();return t.jsx(Fe,{children:F||"Unknown Role"},L)})]}),t.jsxs(Wn,{variant:"bordered",radius:Z(),children:[t.jsx(te,{isIconOnly:!0,color:g==="table"?"primary":"default",onPress:()=>s("table"),size:l?"sm":"md",children:t.jsx(kn,{className:"w-4 h-4"})}),t.jsx(te,{isIconOnly:!0,color:g==="grid"?"primary":"default",onPress:()=>s("grid"),size:l?"sm":"md",children:t.jsx(Tn,{className:"w-4 h-4"})})]})]})]})}),t.jsx("div",{className:"overflow-hidden",children:P?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx(Ve,{size:"lg"})}):g==="table"?t.jsx(qn,{allUsers:ee.data,roles:r,setUsers:ot,isMobile:l,isTablet:c,pagination:p,onPageChange:ke,onRowsPerPageChange:W,totalUsers:ee.total,loading:P,onEdit:i=>me("edit",i),updateUserOptimized:hn,deleteUserOptimized:pn,toggleUserStatusOptimized:qt,updateUserRolesOptimized:xn,toggleSingleDeviceLogin:Kt,resetUserDevice:Xt,deviceActions:$}):t.jsxs("div",{children:[ee.data&&ee.data.length>0?t.jsx("div",{className:`grid gap-4 ${l?"grid-cols-1":c?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:ee.data.map((i,x)=>t.jsx(vn,{user:i,index:x},i.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ge,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No users found"}),t.jsx("p",{className:"text-default-500 mb-4",children:"Try adjusting your search criteria or filters"}),t.jsx(te,{color:"primary",startContent:t.jsx(dt,{className:"w-4 h-4"}),onPress:()=>me("add"),children:"Add First User"})]}),ee.data&&ee.data.length>0&&t.jsx("div",{className:"flex justify-center mt-6 border-t pt-4",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:t.jsx($a,{total:Math.ceil(ee.total/p.perPage),initialPage:p.currentPage,page:p.currentPage,onChange:ke,size:l?"sm":"md",variant:"bordered",showControls:!0,radius:Z(),style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})})]})]})})})})})]})};nc.layout=e=>t.jsx(Cn,{children:e});export{nc as default};
