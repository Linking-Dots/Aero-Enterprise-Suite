import{j as e,H as R,L as A,f as E,c as p,d as M}from"./app-BaORz15z.js";import{A as T}from"./Dashboard-CN0tSHQO.js";import{F as X}from"./ArrowLeftIcon-D362n_kF.js";import{F as $}from"./LockClosedIcon-D6SzxqKY.js";import{F as O}from"./LockOpenIcon-B-cR_VhH.js";import{F as v,a as Y}from"./DeviceTabletIcon-SsGeRzTR.js";import{F as H}from"./CheckCircleIcon-VwHmNzMj.js";import{F as L}from"./XCircleIcon-CvKfVUXt.js";import{F as U}from"./ShieldCheckIcon-BKbCKm70.js";import{F as z}from"./ClockIcon-B7P77C_d.js";import{t as y,b as C}from"./XMarkIcon-BZHN_mnd.js";import{t as m,c as k,n as g,g as F,a as P,e as B,m as I,b as N}from"./en-US-D8UQXs-H.js";import{c as D}from"./chunk-IHOGUXIG-Dotqasbg.js";import{c as G}from"./chunk-D5XJWRAV-tpUS_Ies.js";import{t as V,a as W,b as q,c as j}from"./chunk-F3UDT23P-CffyF1Xd.js";import{t as J,a as _}from"./chunk-YRZGWF2W-Diz_QFHZ.js";import"./react-toastify.esm-2i6MONFP.js";import"./MapPinIcon-B6yzYcXd.js";import"./EnvelopeIcon-CBFgDeRM.js";import"./UserGroupIcon-2DiflRMI.js";import"./UserIcon-DLeUrrsS.js";import"./KeyIcon-BLFyq4d_.js";import"./index-B-IOawQb.js";import"./chunk-SSA7SXE4-Dp19wAJ0.js";import"./chunk-Y2AYO5NJ-CbXSogdl.js";import"./logo-Pwvcz7fP.js";import"./proxy-CtNjgSaK.js";import"./create-visual-element-fgEnxW_6.js";import"./MagnifyingGlassIcon-DnrZjf6W.js";import"./ExclamationTriangleIcon-CNtupyr4.js";import"./chunk-XJ2YRSUP-CNHW9zUz.js";import"./useToggleState-_HJPk8OU.js";function w(r,a){const t=+m(r)-+m(a);return t<0?-1:t>0?1:t}function K(r){return k(r,Date.now())}function Q(r,a,t){const[l,s]=g(t==null?void 0:t.in,r,a),i=l.getFullYear()-s.getFullYear(),d=l.getMonth()-s.getMonth();return i*12+d}function Z(r){return a=>{const l=(r?Math[r]:Math.trunc)(a);return l===0?0:l}}function ee(r,a){return+m(r)-+m(a)}function se(r,a){const t=m(r,a==null?void 0:a.in);return t.setHours(23,59,59,999),t}function te(r,a){const t=m(r,a==null?void 0:a.in),l=t.getMonth();return t.setFullYear(t.getFullYear(),l+1,0),t.setHours(23,59,59,999),t}function ae(r,a){const t=m(r,a==null?void 0:a.in);return+se(t,a)==+te(t,a)}function re(r,a,t){const[l,s,i]=g(t==null?void 0:t.in,r,r,a),d=w(s,i),n=Math.abs(Q(s,i));if(n<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-d*n);let o=w(s,i)===-d;ae(l)&&n===1&&w(l,i)===1&&(o=!1);const u=d*(n-+o);return u===0?0:u}function ne(r,a,t){const l=ee(r,a)/1e3;return Z(t==null?void 0:t.roundingMethod)(l)}function le(r,a,t){const l=P(),s=(t==null?void 0:t.locale)??l.locale??B,i=2520,d=w(r,a);if(isNaN(d))throw new RangeError("Invalid time value");const n=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:d}),[o,u]=g(t==null?void 0:t.in,...d>0?[a,r]:[r,a]),x=ne(u,o),S=(F(u)-F(o))/1e3,c=Math.round((x-S)/60);let h;if(c<2)return t!=null&&t.includeSeconds?x<5?s.formatDistance("lessThanXSeconds",5,n):x<10?s.formatDistance("lessThanXSeconds",10,n):x<20?s.formatDistance("lessThanXSeconds",20,n):x<40?s.formatDistance("halfAMinute",0,n):x<60?s.formatDistance("lessThanXMinutes",1,n):s.formatDistance("xMinutes",1,n):c===0?s.formatDistance("lessThanXMinutes",1,n):s.formatDistance("xMinutes",c,n);if(c<45)return s.formatDistance("xMinutes",c,n);if(c<90)return s.formatDistance("aboutXHours",1,n);if(c<I){const f=Math.round(c/60);return s.formatDistance("aboutXHours",f,n)}else{if(c<i)return s.formatDistance("xDays",1,n);if(c<N){const f=Math.round(c/I);return s.formatDistance("xDays",f,n)}else if(c<N*2)return h=Math.round(c/N),s.formatDistance("aboutXMonths",h,n)}if(h=re(u,o),h<12){const f=Math.round(c/N);return s.formatDistance("xMonths",f,n)}else{const f=h%12,b=Math.trunc(h/12);return f<3?s.formatDistance("aboutXYears",b,n):f<9?s.formatDistance("overXYears",b,n):s.formatDistance("almostXYears",b+1,n)}}function ce(r,a){return le(r,K(r),a)}const Ue=({user:r,devices:a})=>{const t=s=>{switch(s==null?void 0:s.toLowerCase()){case"mobile":return e.jsx(v,{className:"w-5 h-5"});case"tablet":return e.jsx(Y,{className:"w-5 h-5"});default:return e.jsx(C,{className:"w-5 h-5"})}},l=s=>{if(!s)return"Never";try{return ce(new Date(s),{addSuffix:!0})}catch{return s}};return e.jsxs(T,{children:[e.jsx(R,{title:`Device History - ${r.name}`}),e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx(A,{href:route("users"),children:e.jsx(E,{variant:"light",startContent:e.jsx(X,{className:"w-4 h-4"}),className:"mb-2",children:"Back to Users"})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Device History"}),e.jsxs("p",{className:"text-default-500 mt-1",children:[r.name," (",r.email,")"]})]}),e.jsx(D,{color:r.single_device_login_enabled?"success":"default",variant:"flat",startContent:r.single_device_login_enabled?e.jsx($,{className:"w-4 h-4"}):e.jsx(O,{className:"w-4 h-4"}),children:r.single_device_login_enabled?"Single Device Enforced":"Multiple Devices Allowed"})]}),e.jsxs(p,{children:[e.jsx(G,{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Registered Devices"}),e.jsxs("p",{className:"text-sm text-default-500",children:[a.length," ",a.length===1?"device":"devices"," registered"]})]})}),e.jsx(M,{children:a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"w-12 h-12 mx-auto text-default-300 mb-3"}),e.jsx("p",{className:"text-default-500",children:"No devices registered yet"})]}):e.jsxs(V,{"aria-label":"User devices table",removeWrapper:!0,children:[e.jsxs(J,{children:[e.jsx(_,{children:"DEVICE"}),e.jsx(_,{children:"TYPE"}),e.jsx(_,{children:"IP ADDRESS"}),e.jsx(_,{children:"STATUS"}),e.jsx(_,{children:"LAST USED"}),e.jsx(_,{children:"REGISTERED"})]}),e.jsx(W,{children:a.map(s=>e.jsxs(q,{children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[t(s.device_type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.device_name}),e.jsxs("p",{className:"text-xs text-default-500",children:[s.browser," on ",s.platform]})]})]})}),e.jsx(j,{children:e.jsx(D,{size:"sm",variant:"flat",children:s.device_type||"Unknown"})}),e.jsx(j,{children:e.jsx("span",{className:"text-sm",children:s.ip_address})}),e.jsx(j,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{content:s.is_active?"Active":"Inactive",children:e.jsx(D,{size:"sm",color:s.is_active?"success":"default",variant:"flat",startContent:s.is_active?e.jsx(H,{className:"w-3 h-3"}):e.jsx(L,{className:"w-3 h-3"}),children:s.is_active?"Active":"Inactive"})}),s.is_trusted&&e.jsx(y,{content:"Trusted Device",children:e.jsx(D,{size:"sm",color:"primary",variant:"flat",startContent:e.jsx(U,{className:"w-3 h-3"}),children:"Trusted"})})]})}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-sm",children:l(s.last_used_at)})]})}),e.jsx(j,{children:e.jsx("span",{className:"text-sm text-default-500",children:l(s.created_at)})})]},s.id))})]})})]}),a.length>0&&e.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(s=>e.jsx(p,{className:"border-2 border-default-200",children:e.jsxs(M,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t(s.device_type),e.jsx("span",{className:"font-semibold",children:s.device_name})]}),s.is_active&&e.jsx(D,{size:"sm",color:"success",variant:"dot",children:"Active"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-500",children:"Device ID:"}),e.jsxs("span",{className:"font-mono text-xs",children:[s.device_id.substring(0,8),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-500",children:"IP Address:"}),e.jsx("span",{children:s.ip_address})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-500",children:"Browser:"}),e.jsx("span",{children:s.browser})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-500",children:"Platform:"}),e.jsx("span",{children:s.platform})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-500",children:"Last Used:"}),e.jsx("span",{children:l(s.last_used_at)})]})]})]})},s.id))})]})]})};export{Ue as default};
