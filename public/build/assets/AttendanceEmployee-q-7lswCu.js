import{R as D,J as S,r as a,a as M,j as e,Q as F,e as k}from"./app-CFOXYWdD.js";import{u as C,g as A,G as R}from"./logo-AMLCgbkx.js";import{f as h,g as l,A as $}from"./App-D44H3aE5.js";import{P as B}from"./PageHeader-DIUdhN7v.js";import{S as T}from"./StatsCards-GNCJc6Af.js";import{T as W}from"./TimeSheetTable-YAdBhner.js";import{F as N}from"./CheckCircleIcon-WfVI_0Z3.js";import{F as H}from"./XCircleIcon-CXS-JZ21.js";import{F as E}from"./ExclamationTriangleIcon-Kx82ewut.js";import{F as L}from"./ChartBarIcon-COx860cq.js";import{F as P}from"./UserIcon-B8KaJTnW.js";import{F as Y}from"./PresentationChartLineIcon-BYTkVXBR.js";import{i as z}from"./chunk-SSA7SXE4-B38lyIff.js";import"./create-visual-element-DL7V4SzU.js";import"./EnvelopeIcon-DJsx2AYc.js";import"./ShieldCheckIcon-DfAiaKpT.js";import"./chunk-D5XJWRAV-Bs0mRdwq.js";import"./dayjs.min-DTClqbqG.js";import"./DocumentArrowDownIcon-CebuwUHN.js";import"./chunk-JOT4BT4P-DD-bNesh.js";import"./chunk-TLYTI3QM-CvGR7vge.js";import"./chunk-F3UDT23P-DfyL8aGa.js";import"./index-CaGcrq76.js";import"./useHasTabbableChild-Bti5CcwH.js";import"./chunk-YRZGWF2W-CVS3z9wo.js";import"./chunk-TSPNSPCL-CDimUInN.js";import"./chunk-EAPQ7RWQ-CTPnoxCw.js";import"./index-CokAva9Y.js";import"./chunk-S574QCAN-C6iBC3Hs.js";const I=D.memo(({title:n,totalWorkingDays:G,presentDays:_,absentDays:O,lateArrivals:Q})=>{const{auth:J}=S().props,{isDark:U}=C();A();const[u,p]=a.useState(!1),[V,x]=a.useState(!1);a.useEffect(()=>{const t=()=>{p(window.innerWidth<640),x(window.innerWidth<768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const[c,g]=a.useState(new Date),[f,d]=a.useState(!1),[q,K]=a.useState(!1),[s,v]=a.useState({currentMonth:new Date().toISOString().slice(0,7)}),[r,w]=a.useState({totalWorkingDays:0,totalDaysInMonth:0,holidaysCount:0,weekendsCount:0,presentDays:0,absentDays:0,lateArrivals:0,attendancePercentage:0,averageWorkHours:0,overtimeHours:0,totalWorkHours:0,totalLeaveDays:0,leaveBreakdown:{},month:"",generated_at:null}),b=t=>{const i=t.target.value;g(new Date(i)),d(o=>!o)},y=a.useCallback((t,i)=>{v(o=>({...o,[t]:i})),d(o=>!o)},[]),m=a.useCallback(async()=>{try{const t=await M.get(route("attendance.myMonthlyStats"),{params:{currentYear:s.currentMonth?new Date(s.currentMonth).getFullYear():new Date().getFullYear(),currentMonth:s.currentMonth?String(new Date(s.currentMonth).getMonth()+1).padStart(2,"0"):String(new Date().getMonth()+1).padStart(2,"0")}});t.data.success&&w(t.data.data)}catch(t){console.error("Failed to fetch monthly stats:",t)}},[s.currentMonth]);a.useEffect(()=>{m()},[m]);const j=[{title:"Working Days",value:r.totalWorkingDays,icon:e.jsx(h,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:`Total for ${r.month||"this month"}`},{title:"Present Days",value:r.presentDays,icon:e.jsx(N,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Days attended this month"},{title:"Absent Days",value:r.absentDays,icon:e.jsx(H,{}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Days missed this month"},{title:"Late Arrivals",value:r.lateArrivals,icon:e.jsx(E,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Times late this month"},{title:"Attendance Rate",value:`${r.attendancePercentage}%`,icon:e.jsx(L,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Your monthly performance"},{title:"Avg Work Hours",value:`${r.averageWorkHours}h`,icon:e.jsx(l,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Daily average this month"},{title:"Overtime",value:`${r.overtimeHours}h`,icon:e.jsx(l,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Extra hours this month"},{title:"Leave Days",value:r.totalLeaveDays,icon:e.jsx(P,{}),color:"text-amber-400",iconBg:"bg-amber-500/20",description:"Leaves taken this month"}];return e.jsxs(e.Fragment,{children:["            ",e.jsx(F,{title:n||"My Attendance"}),e.jsx(Box,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(Grow,{in:!0,children:e.jsx(R,{children:e.jsx(B,{title:"My Attendance",subtitle:"View your attendance records and timesheet details",icon:e.jsx(Y,{className:"w-8 h-8"}),variant:"default",children:e.jsxs("div",{className:"p-6",children:[e.jsx(T,{stats:j,className:"mb-6"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsx(z,{label:"Month/Year",type:"month",value:s.currentMonth,onChange:t=>y("currentMonth",t.target.value),startContent:e.jsx(h,{className:"w-4 h-4"}),variant:"bordered",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:u?"sm":"md"})})})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e.jsx(MuiCardHeader,{title:e.jsxs(Box,{className:"flex items-center gap-3",children:[e.jsx(l,{className:"w-6 h-6 text-primary"}),e.jsx(Typography,{variant:"h5",component:"h1",sx:{fontSize:{xs:"1.25rem",sm:"1.5rem",md:"1.75rem"},fontWeight:600},children:"My Attendance Records"})]}),sx:{padding:"24px"}}),e.jsx(k,{}),e.jsx(MuiCardContent,{children:e.jsx(Box,{sx:{maxHeight:"84vh",overflowY:"auto"},children:e.jsx(W,{selectedDate:c,handleDateChange:b,updateTimeSheet:f,externalFilterData:s},`${c}-${s.currentMonth}`)})})]})]})})})})})]})});I.layout=n=>e.jsx($,{children:n});export{I as default};
