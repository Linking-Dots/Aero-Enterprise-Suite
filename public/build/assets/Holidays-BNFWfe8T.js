import{r as i,R as te,k as ke,j as e,q as ne,E as se,a6 as Le,a7 as De,H as Oe,e as M,a as J}from"./app-B8QYX9Px.js";import{g as ie,a as le}from"./glassyStyles-CyKP3lIN.js";import{a1 as Pe,a2 as Te,u as de,a as ce,F as Ee,f as Ie,c as A,g as Me,B as Y,A as Ae}from"./App-DkF9RL3Y.js";import{_ as $e,E as We,u as Be,B as Ye,G as Ue,F as Ge,T as qe}from"./logo-BoX8pchB.js";import{P as Qe}from"./PageHeader-XJFWVm9P.js";import{S as Ve}from"./StatsCards-DEVVTSBN.js";import{u as ue,t as Xe,a as Ze,b as Je,c as Ke,d as et,e as tt}from"./chunk-F3UDT23P-Hrzl6yhk.js";import{m as pe,a as he,b as me,c as fe,d as ge}from"./chunk-UKLRQS27-rWSyfmAz.js";import{F as xe}from"./GlobeAltIcon-DOm-BgvY.js";import{F as at}from"./PencilIcon-q28LArt-.js";import{F as rt}from"./TrashIcon-DFtGfjbZ.js";import{F as ot}from"./CheckCircleIcon-B90VRiLI.js";import{F as nt}from"./ExclamationTriangleIcon-BW32ASrn.js";import{G as st,F as be}from"./Grow-DP1KP2ex.js";import{T as ye}from"./TextField-BAa6JqDO.js";import{I as it}from"./InputAdornment-Cc_eLtv_.js";import{I as ve}from"./InputLabel-CehJzubO.js";import{S as je}from"./Select-8HD_0XQO.js";import{M as K}from"./MenuItem-BN00sQGI.js";import{F as lt}from"./FunnelIcon-D6AgR1Ej.js";import{F as dt}from"./PlusIcon-BzbZnk-Z.js";import{d as we}from"./chunk-URM6S66B-PDfHsyB7.js";import{t as Ce}from"./chunk-BOOVDPB6-CftkAAhs.js";import"./EnvelopeIcon-B1M8vjD_.js";import"./UserIcon-D9_80nkG.js";import"./ShieldCheckIcon-RZqgNGJW.js";import"./create-visual-element-4S4I33NB.js";import"./chunk-D5XJWRAV-zQzkTunB.js";import"./useHasTabbableChild-CrUAHYqA.js";import"./index-Dxlg9OmP.js";import"./listItemTextClasses-DfTDYmaW.js";import"./NumberFormatter-DNR9MAW-.js";var ct=i.useLayoutEffect,ut=function(r){var a=te.useRef(r);return ct(function(){a.current=r}),a},Se=function(r,a){if(typeof r=="function"){r(a);return}r.current=a},pt=function(r,a){var o=te.useRef();return te.useCallback(function(l){r.current=l,o.current&&Se(o.current,null),o.current=a,a&&Se(a,l)},[a])},_e={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},ht=function(r){Object.keys(_e).forEach(function(a){r.style.setProperty(a,_e[a],"important")})},Fe=ht,b=null,He=function(r,a){var o=r.scrollHeight;return a.sizingStyle.boxSizing==="border-box"?o+a.borderSize:o-a.paddingSize};function mt(n,r,a,o){a===void 0&&(a=1),o===void 0&&(o=1/0),b||(b=document.createElement("textarea"),b.setAttribute("tabindex","-1"),b.setAttribute("aria-hidden","true"),Fe(b)),b.parentNode===null&&document.body.appendChild(b);var l=n.paddingSize,h=n.borderSize,u=n.sizingStyle,m=u.boxSizing;Object.keys(u).forEach(function(f){var y=f;b.style[y]=u[y]}),Fe(b),b.value=r;var p=He(b,n);b.value=r,p=He(b,n),b.value="x";var d=b.scrollHeight-l,g=d*a;m==="border-box"&&(g=g+l+h),p=Math.max(g,p);var x=d*o;return m==="border-box"&&(x=x+l+h),p=Math.min(x,p),[p,d]}var Ne=function(){},ft=function(r,a){return r.reduce(function(o,l){return o[l]=a[l],o},{})},gt=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],xt=!!document.documentElement.currentStyle,bt=function(r){var a=window.getComputedStyle(r);if(a===null)return null;var o=ft(gt,a),l=o.boxSizing;if(l==="")return null;xt&&l==="border-box"&&(o.width=parseFloat(o.width)+parseFloat(o.borderRightWidth)+parseFloat(o.borderLeftWidth)+parseFloat(o.paddingRight)+parseFloat(o.paddingLeft)+"px");var h=parseFloat(o.paddingBottom)+parseFloat(o.paddingTop),u=parseFloat(o.borderBottomWidth)+parseFloat(o.borderTopWidth);return{sizingStyle:o,paddingSize:h,borderSize:u}},yt=bt;function ae(n,r,a){var o=ut(a);i.useLayoutEffect(function(){var l=function(u){return o.current(u)};if(n)return n.addEventListener(r,l),function(){return n.removeEventListener(r,l)}},[])}var vt=function(r,a){ae(document.body,"reset",function(o){r.current.form===o.target&&a(o)})},jt=function(r){ae(window,"resize",r)},wt=function(r){ae(document.fonts,"loadingdone",r)},Ct=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],St=function(r,a){var o=r.cacheMeasurements,l=r.maxRows,h=r.minRows,u=r.onChange,m=u===void 0?Ne:u,p=r.onHeightChange,d=p===void 0?Ne:p,g=$e(r,Ct),x=g.value!==void 0,f=i.useRef(null),y=pt(f,a),_=i.useRef(0),S=i.useRef(),j=function(){var v=f.current,k=o&&S.current?S.current:yt(v);if(k){S.current=k;var F=mt(k,v.value||v.placeholder||"x",h,l),c=F[0],R=F[1];_.current!==c&&(_.current=c,v.style.setProperty("height",c+"px","important"),d(c,{rowHeight:R}))}},w=function(v){x||j(),m(v)};return i.useLayoutEffect(j),vt(f,function(){if(!x){var z=f.current.value;requestAnimationFrame(function(){var v=f.current;v&&z!==v.value&&j()})}}),jt(j),wt(j),i.createElement("textarea",We({},g,{onChange:w,ref:y}))},_t=i.forwardRef(St),Re=ke(({style:n,minRows:r=3,maxRows:a=8,cacheMeasurements:o=!1,disableAutosize:l=!1,onHeightChange:h,...u},m)=>{const{Component:p,label:d,description:g,startContent:x,endContent:f,hasHelper:y,shouldLabelBeOutside:_,shouldLabelBeInside:S,isInvalid:j,errorMessage:w,getBaseProps:z,getLabelProps:v,getInputProps:k,getInnerWrapperProps:F,getInputWrapperProps:c,getHelperWrapperProps:R,getDescriptionProps:H,getErrorMessageProps:N,isClearable:P,getClearButtonProps:L}=Pe({...u,ref:m,isMultiline:!0}),[U,T]=i.useState(r>1),[G,E]=i.useState(!1),$=d?e.jsx("label",{...v(),children:d}):null,D=k(),I=(s,C)=>{if(r===1&&T(s>=C.rowHeight*2),a>r){const O=s>=a*C.rowHeight;E(O)}h==null||h(s,C)},W=l?e.jsx("textarea",{...D,style:ne(D.style,n??{})}):e.jsx(_t,{...D,cacheMeasurements:o,"data-hide-scroll":se(!G),maxRows:a,minRows:r,style:ne(D.style,n??{}),onHeightChange:I}),q=i.useMemo(()=>P?e.jsx("button",{...L(),children:e.jsx(Te,{})}):null,[P,L]),Q=i.useMemo(()=>x||f?e.jsxs("div",{...F(),children:[x,W,f]}):e.jsx("div",{...F(),children:W}),[x,D,f,F]),B=j&&w,t=B||g;return e.jsxs(p,{...z(),children:[_?$:null,e.jsxs("div",{...c(),"data-has-multiple-rows":se(U),children:[S?$:null,Q,q]}),y&&t?e.jsx("div",{...R(),children:B?e.jsx("div",{...N(),children:w}):e.jsx("div",{...H(),children:g})}):null]})});Re.displayName="HeroUI.Textarea";var Ft=Re;function ee(n={}){const{id:r,defaultOpen:a,isOpen:o,onClose:l,onOpen:h,onChange:u=()=>{}}=n,m=ue(h),p=ue(l),[d,g]=Le(o,a||!1,u),x=i.useId(),f=r||x,y=o!==void 0,_=i.useCallback(()=>{y||g(!1),p==null||p()},[y,p]),S=i.useCallback(()=>{y||g(!0),m==null||m()},[y,m]),j=i.useCallback(()=>{(d?_:S)()},[d,S,_]);return{isOpen:!!d,onOpen:S,onClose:_,onOpenChange:j,isControlled:y,getButtonProps:(w={})=>({...w,"aria-expanded":d,"aria-controls":f,onClick:De(w.onClick,j)}),getDisclosureProps:(w={})=>({...w,hidden:!d,id:f})}}const Ht=({title:n,holidays:r,stats:a})=>{const o=Be(),l=de(o.breakpoints.down("sm"));de(o.breakpoints.down("md"));const[h,u]=i.useState(r),[m,p]=i.useState(""),[d,g]=i.useState(new Date().getFullYear().toString()),[x,f]=i.useState(!1),{isOpen:y,onOpen:_,onClose:S}=ee(),{isOpen:j,onOpen:w,onClose:z}=ee(),{isOpen:v,onOpen:k,onClose:F}=ee(),[c,R]=i.useState(null),[H,N]=i.useState({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1}),[P,L]=i.useState(!1),U=i.useMemo(()=>[{title:"Total Holidays",value:a.total_holidays,icon:e.jsx(xe,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All company holidays",trend:`${a.this_year_holidays} this year`},{title:"Upcoming",value:a.upcoming_holidays,icon:e.jsx(ce,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Next holidays",trend:"Next 90 days"},{title:"This Month",value:a.this_month_holidays,icon:e.jsx(Ee,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Current month",trend:"Ongoing & upcoming"},{title:"Working Days",value:365-a.total_holidays,icon:e.jsx(Ie,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Business days",trend:`${Math.round((365-a.total_holidays)/365*100)}% of year`}],[a]),T=i.useMemo(()=>h.filter(t=>{const s=t.title.toLowerCase().includes(m.toLowerCase()),C=d==="all"||new Date(t.from_date).getFullYear().toString()===d;return s&&C}),[h,m,d]),G=i.useMemo(()=>[...new Set(h.map(s=>new Date(s.from_date).getFullYear()))].sort((s,C)=>C-s),[h]),E=[{key:"public",label:"Public Holiday",color:"primary"},{key:"religious",label:"Religious Holiday",color:"secondary"},{key:"national",label:"National Holiday",color:"success"},{key:"company",label:"Company Holiday",color:"warning"},{key:"optional",label:"Optional Holiday",color:"default"}],$=async()=>{L(!0);try{const t=c?await J.put(route("holiday.update",c.id),H):await J.post(route("holiday.store"),H);t.data.success&&(u(c?s=>s.map(C=>C.id===c.id?t.data.holiday:C):s=>[...s,t.data.holiday]),Y.success(c?"Holiday updated successfully!":"Holiday created successfully!"),I())}catch{Y.error("Failed to save holiday. Please try again.")}finally{L(!1)}},D=async()=>{if(c){L(!0);try{await J.delete(route("holiday.destroy",c.id)),u(t=>t.filter(s=>s.id!==c.id)),Y.success("Holiday deleted successfully!"),F(),R(null)}catch{Y.error("Failed to delete holiday. Please try again.")}finally{L(!1)}}},I=()=>{S(),z(),R(null),N({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1})},W=t=>{R(t),N({title:t.title,from_date:t.from_date,to_date:t.to_date,description:t.description||"",type:t.type||"public",is_recurring:t.is_recurring||!1}),w()},q=t=>{R(t),k()},Q=[{name:"Holiday",uid:"title"},{name:"Date",uid:"dates"},{name:"Duration",uid:"duration"},{name:"Type",uid:"type"},{name:"Status",uid:"status"},{name:"Actions",uid:"actions"}],B=i.useCallback((t,s)=>{const C=t[s],O=new Date(t.from_date),V=new Date(t.to_date),re=Math.ceil((V-O)/(1e3*60*60*24))+1,X=O>new Date,Z=O<=new Date&&V>=new Date;switch(s){case"title":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-bold text-small capitalize",children:t.title}),t.description&&e.jsx("p",{className:"text-bold text-tiny capitalize text-default-400",children:t.description})]});case"dates":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-small",children:O.toLocaleDateString("en-US",{month:"short",day:"numeric",year:O.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}),t.from_date!==t.to_date&&e.jsxs("span",{className:"text-tiny text-default-400",children:["to ",V.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]});case"duration":return e.jsxs(A,{size:"sm",variant:"flat",children:[re," ",re===1?"day":"days"]});case"type":const oe=E.find(ze=>ze.key===t.type)||E[0];return e.jsx(A,{size:"sm",color:oe.color,variant:"flat",children:oe.label});case"status":return e.jsx(A,{size:"sm",color:Z?"success":X?"warning":"default",variant:"flat",startContent:Z?e.jsx(ot,{className:"w-3 h-3"}):X?e.jsx(ce,{className:"w-3 h-3"}):e.jsx(nt,{className:"w-3 h-3"}),children:Z?"Ongoing":X?"Upcoming":"Past"});case"actions":return e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx(Ce,{content:"Edit holiday",children:e.jsx("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>W(t),children:e.jsx(at,{className:"w-4 h-4"})})}),e.jsx(Ce,{color:"danger",content:"Delete holiday",children:e.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:()=>q(t),children:e.jsx(rt,{className:"w-4 h-4"})})})]});default:return C}},[]);return e.jsxs(e.Fragment,{children:[e.jsx(Oe,{title:n}),e.jsx(Ye,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(st,{in:!0,timeout:800,children:e.jsx(Ue,{children:e.jsx(Qe,{title:"Company Holidays",subtitle:"Manage company-wide holidays and special occasions",icon:e.jsx(xe,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:l?"Add":"Add Holiday",icon:e.jsx(dt,{className:"w-4 h-4"}),onClick:_,className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}],children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(Ve,{stats:U,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ye,{label:"Search Holidays",placeholder:"Search by holiday name...",value:m,onChange:t=>p(t.target.value),InputProps:{startAdornment:e.jsx(it,{position:"start",children:e.jsx(Me,{className:"w-4 h-4"})})},fullWidth:!0,size:l?"small":"medium",sx:ie("search")})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(be,{variant:"outlined",sx:le("default",128),children:[e.jsx(ve,{children:"Year"}),e.jsxs(je,{value:d,label:"Year",onChange:t=>g(t.target.value),children:[e.jsx(K,{value:"all",children:"All Years"}),G.map(t=>e.jsx(K,{value:t.toString(),children:t},t.toString()))]})]}),e.jsxs(M,{isIconOnly:l,variant:"bordered",onPress:()=>f(!x),className:x?"bg-purple-500/20":"bg-white/5",children:[e.jsx(lt,{className:"w-4 h-4"}),!l&&e.jsx("span",{className:"ml-1",children:"Filters"})]})]})]}),(m||d!==new Date().getFullYear().toString())&&e.jsx(Ge,{in:!0,timeout:300,children:e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[m&&e.jsxs(A,{variant:"flat",color:"primary",size:"sm",onClose:()=>p(""),children:["Search: ",m]}),d!==new Date().getFullYear().toString()&&e.jsxs(A,{variant:"flat",color:"secondary",size:"sm",onClose:()=>g(new Date().getFullYear().toString()),children:["Year: ",d==="all"?"All Years":d]})]})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs(qe,{variant:"h6",className:"font-semibold text-foreground",children:["Company Holidays",e.jsxs("span",{className:"text-sm text-default-500 ml-2",children:["(",T.length," ",T.length===1?"holiday":"holidays",")"]})]})}),e.jsxs(Xe,{isStriped:!0,removeWrapper:!0,"aria-label":"Holidays table",classNames:{th:"bg-white/5 text-default-600 border-b border-white/10",td:"border-b border-white/5"},children:[e.jsx(Ze,{columns:Q,children:t=>e.jsx(Je,{align:t.uid==="actions"?"center":"start",children:t.name},t.uid)}),e.jsx(Ke,{items:T,children:t=>e.jsx(et,{children:s=>e.jsx(tt,{children:B(t,s)})},t.id)})]})]})]})})})})}),e.jsx(pe,{isOpen:y||j,onClose:I,size:"2xl",backdrop:"blur",classNames:{backdrop:"bg-linear-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20",base:"border-[#292f46] bg-linear-to-br from-white/10 to-white/5 backdrop-blur-md",header:"border-b border-[#292f46]",footer:"border-t border-[#292f46]"},children:e.jsxs(he,{children:[e.jsx(me,{className:"flex flex-col gap-1",children:c?"Edit Holiday":"Add New Holiday"}),e.jsxs(fe,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ye,{label:"Holiday Title",placeholder:"Enter holiday name",value:H.title,onChange:t=>N(s=>({...s,title:t.target.value})),required:!0,fullWidth:!0,sx:ie()}),e.jsxs(be,{fullWidth:!0,variant:"outlined",sx:le(),children:[e.jsx(ve,{children:"Holiday Type"}),e.jsx(je,{value:H.type,label:"Holiday Type",onChange:t=>N(s=>({...s,type:t.target.value})),children:E.map(t=>e.jsx(K,{value:t.key,children:t.label},t.key))})]}),e.jsx(we,{label:"From Date",value:H.from_date,onChange:t=>N(s=>({...s,from_date:t})),isRequired:!0}),e.jsx(we,{label:"To Date",value:H.to_date,onChange:t=>N(s=>({...s,to_date:t})),isRequired:!0})]}),e.jsx(Ft,{label:"Description (Optional)",placeholder:"Enter holiday description or additional notes",value:H.description,onChange:t=>N(s=>({...s,description:t.target.value})),rows:3})]}),e.jsxs(ge,{children:[e.jsx(M,{color:"danger",variant:"light",onPress:I,children:"Cancel"}),e.jsx(M,{color:"primary",onPress:$,isLoading:P,children:c?"Update Holiday":"Add Holiday"})]})]})}),e.jsx(pe,{isOpen:v,onClose:F,size:"md",backdrop:"blur",children:e.jsxs(he,{children:[e.jsx(me,{className:"flex flex-col gap-1",children:"Confirm Delete"}),e.jsxs(fe,{children:[e.jsxs("p",{children:['Are you sure you want to delete the holiday "',c==null?void 0:c.title,'"?']}),e.jsx("p",{className:"text-small text-danger",children:"This action cannot be undone."})]}),e.jsxs(ge,{children:[e.jsx(M,{color:"default",variant:"light",onPress:F,children:"Cancel"}),e.jsx(M,{color:"danger",onPress:D,isLoading:P,children:"Delete Holiday"})]})]})})]})};Ht.layout=n=>e.jsx(Ae,{children:n});export{Ht as default};
