import{r as l,j as e,H as M,F as Z}from"./app-C1U45Ebj.js";import{j as $,u as q,G as K,T as X,I as J,C as g,A as Y}from"./App-whY0_PgO.js";import{u as ee,G as se,F as x}from"./logo-CfQNLy2U.js";import{C as W}from"./CircularProgress-CE3Tiwse.js";import{F as re}from"./ChartBarIcon-BOeg_RIy.js";import{B as i}from"./Button-D2aSymif.js";import{D as te}from"./Download-RzCHxGIg.js";import{C as z}from"./CheckCircle-CxQNz4l-.js";import{F as ae}from"./DocumentArrowDownIcon-BXxQ19kw.js";import{A as le}from"./Alert-BM1miaEH.js";import{W as oe}from"./Warning-D9Onv59x.js";import"./EnvelopeIcon-DYtxSQqd.js";import"./UserIcon-Ch89lSMO.js";import"./ShieldCheckIcon-BOaBImyC.js";import"./chunk-SSA7SXE4-CwjhqkNF.js";import"./ExclamationTriangleIcon-C6Etxr_V.js";import"./create-visual-element-BuHeE9lo.js";import"./useSlot-Cnb0Rlda.js";function ie({title:n,titleId:d,...h},p){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:p,"aria-labelledby":d},h),n?l.createElement("title",{id:d},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const ne=l.forwardRef(ie),V=$(e.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"}),"Speed"),de=$(e.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),ce=({auth:n,title:d="Performance Dashboard"})=>{var j,f,w,N,k,y,C,F,S,T,P,I,L,R;const h=ee();q(h.breakpoints.down("md"));const[p,B]=l.useState(!0),[G,u]=l.useState(!1),[t,H]=l.useState(null),[O,b]=l.useState([]),[me,xe]=l.useState("24h"),c=async()=>{try{u(!0);const r=await fetch("/storage/app/performance/baseline.json");let a=null;r.ok&&(a=await r.json());const s=await fetch("/storage/app/performance/comparison.json");let o=null;s.ok&&(o=await s.json());const A=await fetch("/storage/app/reports/performance-export.json");let E=null;A.ok&&(E=await A.json()),H({baseline:a,comparison:o,report:E,lastUpdated:new Date});const m=[];a&&(a.overall.performanceScore<70&&m.push({type:"error",message:`Performance score is below threshold: ${a.overall.performanceScore}/100`}),a.overall.totalIssues>0&&m.push({type:"warning",message:`${a.overall.totalIssues} performance issues detected`})),o&&o.summary.regressions.length>0&&m.push({type:"error",message:`${o.summary.regressions.length} performance regressions detected`}),b(m)}catch(r){console.error("Failed to fetch performance data:",r),b([{type:"error",message:"Failed to load performance data. Please check if performance monitoring is running."}])}finally{u(!1),B(!1)}};l.useEffect(()=>{c();const r=setInterval(c,300*1e3);return()=>clearInterval(r)},[]);const U=async()=>{var r;try{(await fetch("/api/performance/generate-report",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")}})).ok&&await c()}catch(a){console.error("Failed to generate report:",a)}},v=()=>{const r=document.createElement("a");r.href="/storage/app/reports/performance-export.json",r.download=`glass-erp-performance-${new Date().toISOString().split("T")[0]}.json`,r.click()},_=({score:r,size:a=120})=>{const s=o=>o>=90?"#10b981":o>=70?"#f59e0b":"#ef4444";return e.jsxs("div",{className:"relative inline-flex",children:[e.jsx(W,{variant:"determinate",value:r,size:a,thickness:4,sx:{color:s(r)}}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[e.jsx("div",{className:"text-3xl font-bold",style:{color:s(r)},children:r}),e.jsx("div",{className:"text-xs text-gray-400",children:"/100"})]})]})},D=({vitals:r})=>{if(!r)return null;const a=[{name:"FCP",value:r.FCP,unit:"ms",threshold:1800,label:"First Contentful Paint"},{name:"LCP",value:r.LCP,unit:"ms",threshold:2500,label:"Largest Contentful Paint"},{name:"FID",value:r.FID,unit:"ms",threshold:100,label:"First Input Delay"},{name:"INP",value:r.INP||0,unit:"ms",threshold:200,label:"Interaction to Next Paint"},{name:"CLS",value:r.CLS,unit:"",threshold:.1,label:"Cumulative Layout Shift"},{name:"TTFB",value:r.TTFB,unit:"ms",threshold:800,label:"Time to First Byte"}];return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:a.map(s=>e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:s.name}),e.jsxs("div",{className:`text-2xl font-bold mb-1 ${s.value<=s.threshold?"text-green-400":"text-red-400"}`,children:[s.name==="CLS"?s.value.toFixed(3):Math.round(s.value),e.jsx("span",{className:"text-xs ml-1",children:s.unit})]}),e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:s.label}),e.jsx(g,{size:"small",label:s.value<=s.threshold?"Good":"Needs Work",color:s.value<=s.threshold?"success":"error"})]},s.name))})},Q=({features:r})=>r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(r).map(([a,s])=>e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("div",{className:"text-lg font-semibold text-white",children:a}),e.jsx(g,{size:"small",label:s.priority,color:s.priority==="high"?"error":s.priority==="medium"?"warning":"default"})]}),e.jsxs("div",{className:`text-3xl font-bold mb-2 ${s.averageLoadTime<=s.target?"text-green-400":"text-orange-400"}`,children:[Math.round(s.averageLoadTime),"ms"]}),e.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["Target: ",s.target,"ms | Routes: ",Object.keys(s.routes).length]}),e.jsx(g,{size:"small",icon:s.averageLoadTime<=s.target?e.jsx(z,{}):e.jsx(oe,{}),label:s.averageLoadTime<=s.target?"Meeting Target":"Exceeds Target",color:s.averageLoadTime<=s.target?"success":"warning"})]},a))}):null;return p?e.jsxs(e.Fragment,{children:[e.jsx(M,{title:d}),e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(W,{size:60})})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{title:d}),e.jsx("div",{className:"min-h-screen p-2 sm:p-4 md:p-6",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsx(K,{in:!0,timeout:800,children:e.jsx("div",{children:e.jsxs(se,{children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20"}),e.jsx("div",{className:"relative px-6 py-8",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-linear-to-br from-blue-500/20 to-purple-500/20 rounded-2xl backdrop-blur-xs border border-white/10",children:e.jsx(re,{className:"w-8 h-8 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold bg-linear-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"ðŸš€ Performance Monitor"}),e.jsx("p",{className:"text-gray-400 mt-1 text-sm md:text-base",children:"Real-time performance monitoring and optimization insights"})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(X,{title:"Refresh Data",children:e.jsx(J,{onClick:c,disabled:G,className:"text-blue-400 hover:bg-blue-500/10",children:e.jsx(Z,{className:"w-5 h-5"})})}),e.jsx(i,{variant:"outlined",startIcon:e.jsx(de,{}),onClick:U,size:"small",className:"border-blue-400/50 text-blue-400 hover:bg-blue-500/10",children:"Generate Report"}),e.jsx(i,{variant:"outlined",startIcon:e.jsx(te,{}),onClick:v,size:"small",className:"border-purple-400/50 text-purple-400 hover:bg-purple-500/10",children:"Export"})]})]}),e.jsx(x,{in:!0,timeout:1e3,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg group-hover:bg-blue-500/30 transition-colors",children:e.jsx(V,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-blue-400",children:((f=(j=t==null?void 0:t.baseline)==null?void 0:j.overall)==null?void 0:f.performanceScore)||0}),e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Performance Score"})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg group-hover:bg-green-500/30 transition-colors",children:e.jsx(z,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-green-400",children:((N=(w=t==null?void 0:t.baseline)==null?void 0:w.overall)==null?void 0:N.totalIssues)||0}),e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Issues Detected"})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg group-hover:bg-purple-500/30 transition-colors",children:e.jsx(ne,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-purple-400",children:((C=(y=(k=t==null?void 0:t.comparison)==null?void 0:k.summary)==null?void 0:y.regressions)==null?void 0:C.length)||0}),e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Regressions"})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/20 rounded-lg group-hover:bg-orange-500/30 transition-colors",children:e.jsx(ae,{className:"w-5 h-5 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-orange-400",children:((F=t==null?void 0:t.lastUpdated)==null?void 0:F.toLocaleTimeString())||"Never"}),e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Last Updated"})]})]})})]})})]})})]}),e.jsxs("div",{className:"px-6 pb-6",children:[O.map((r,a)=>e.jsx(le,{severity:r.type,className:"mb-4",children:r.message},a)),e.jsx(x,{in:!0,timeout:1200,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-white mb-4",children:"Overall Performance"}),e.jsx(_,{score:((T=(S=t==null?void 0:t.baseline)==null?void 0:S.overall)==null?void 0:T.performanceScore)||0}),e.jsxs("div",{className:"text-xs text-gray-400 mt-4",children:["Last Updated: ",(P=t==null?void 0:t.lastUpdated)==null?void 0:P.toLocaleTimeString()]})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:[e.jsx("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ“Š Core Web Vitals"}),e.jsx(D,{vitals:(L=(I=t==null?void 0:t.baseline)==null?void 0:I.overall)==null?void 0:L.coreWebVitals})]})})]})}),e.jsx(x,{in:!0,timeout:1400,children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 mb-6",children:[e.jsx("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ“¦ Feature Module Performance"}),e.jsx(Q,{features:(R=t==null?void 0:t.baseline)==null?void 0:R.features})]})}),e.jsx(x,{in:!0,timeout:1600,children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:[e.jsx("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ”§ Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(i,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(V,{}),onClick:()=>window.open("/storage/app/reports/performance-dashboard.html","_blank"),className:"border-blue-400/50 text-blue-400 hover:bg-blue-500/10",children:"View Full Dashboard"}),e.jsx(i,{fullWidth:!0,variant:"outlined",onClick:()=>window.open("/storage/app/reports/technical-report.md","_blank"),className:"border-green-400/50 text-green-400 hover:bg-green-500/10",children:"Technical Report"}),e.jsx(i,{fullWidth:!0,variant:"outlined",onClick:()=>window.open("/storage/app/reports/executive-summary.md","_blank"),className:"border-purple-400/50 text-purple-400 hover:bg-purple-500/10",children:"Executive Summary"}),e.jsx(i,{fullWidth:!0,variant:"outlined",onClick:v,className:"border-orange-400/50 text-orange-400 hover:bg-orange-500/10",children:"Download Data"})]})]})})]})]})})})})})]})};ce.layout=n=>e.jsx(Y,{children:n});export{ce as default};
