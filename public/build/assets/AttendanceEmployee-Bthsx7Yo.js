import{R as S,u as F,r as s,a as M,j as e,H as k,d as C}from"./app-B8QYX9Px.js";import{u,F as x,a as l,i as A,A as R}from"./App-DkF9RL3Y.js";import{P as $}from"./PageHeader-XJFWVm9P.js";import{S as B}from"./StatsCards-DEVVTSBN.js";import{T as H}from"./TimeSheetTable-Ca-7Ww7J.js";import{u as N,B as c,G as T,T as W}from"./logo-BoX8pchB.js";import{F as L}from"./CheckCircleIcon-B90VRiLI.js";import{F as P}from"./XCircleIcon-tcb-l3UC.js";import{F as Y}from"./ExclamationTriangleIcon-BW32ASrn.js";import{F as E}from"./ChartBarIcon-BBONCpWc.js";import{F as G}from"./UserIcon-D9_80nkG.js";import{G as _}from"./Grow-DP1KP2ex.js";import{C as z}from"./CardHeader-Bhq2T4qN.js";import{C as I}from"./CardContent-B5B4Qw18.js";import{F as O}from"./PresentationChartLineIcon-fF9RAVuy.js";import"./EnvelopeIcon-B1M8vjD_.js";import"./ShieldCheckIcon-RZqgNGJW.js";import"./chunk-D5XJWRAV-zQzkTunB.js";import"./dayjs.min-BHuFkWn-.js";import"./Button-CpKhJqSS.js";import"./chunk-EAPQ7RWQ-OKuZgSIq.js";import"./index-CokAva9Y.js";import"./DocumentArrowDownIcon-JzXafcAn.js";import"./TextField-BAa6JqDO.js";import"./Select-8HD_0XQO.js";import"./InputLabel-CehJzubO.js";import"./InputAdornment-Cc_eLtv_.js";import"./chunk-JOT4BT4P-C9GtIuSp.js";import"./chunk-TLYTI3QM-rNm1AEt9.js";import"./chunk-F3UDT23P-Hrzl6yhk.js";import"./useHasTabbableChild-CrUAHYqA.js";import"./index-Dxlg9OmP.js";import"./chunk-S574QCAN-CoPQlLbo.js";import"./create-visual-element-4S4I33NB.js";const Q=S.memo(({title:n,totalWorkingDays:U,presentDays:V,absentDays:q,lateArrivals:J})=>{const{auth:K}=F().props,m=N(),g=u(m.breakpoints.down("sm"));u(m.breakpoints.down("md"));const[d,f]=s.useState(new Date),[y,p]=s.useState(!1),[X,Z]=s.useState(!1),[r,b]=s.useState({currentMonth:new Date().toISOString().slice(0,7)}),[a,v]=s.useState({totalWorkingDays:0,totalDaysInMonth:0,holidaysCount:0,weekendsCount:0,presentDays:0,absentDays:0,lateArrivals:0,attendancePercentage:0,averageWorkHours:0,overtimeHours:0,totalWorkHours:0,totalLeaveDays:0,leaveBreakdown:{},month:"",generated_at:null}),w=t=>{const i=t.target.value;f(new Date(i)),p(o=>!o)},j=s.useCallback((t,i)=>{b(o=>({...o,[t]:i})),p(o=>!o)},[]),h=s.useCallback(async()=>{try{const t=await M.get(route("attendance.myMonthlyStats"),{params:{currentYear:r.currentMonth?new Date(r.currentMonth).getFullYear():new Date().getFullYear(),currentMonth:r.currentMonth?String(new Date(r.currentMonth).getMonth()+1).padStart(2,"0"):String(new Date().getMonth()+1).padStart(2,"0")}});t.data.success&&v(t.data.data)}catch(t){console.error("Failed to fetch monthly stats:",t)}},[r.currentMonth]);s.useEffect(()=>{h()},[h]);const D=[{title:"Working Days",value:a.totalWorkingDays,icon:e.jsx(x,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:`Total for ${a.month||"this month"}`},{title:"Present Days",value:a.presentDays,icon:e.jsx(L,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Days attended this month"},{title:"Absent Days",value:a.absentDays,icon:e.jsx(P,{}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Days missed this month"},{title:"Late Arrivals",value:a.lateArrivals,icon:e.jsx(Y,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Times late this month"},{title:"Attendance Rate",value:`${a.attendancePercentage}%`,icon:e.jsx(E,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Your monthly performance"},{title:"Avg Work Hours",value:`${a.averageWorkHours}h`,icon:e.jsx(l,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Daily average this month"},{title:"Overtime",value:`${a.overtimeHours}h`,icon:e.jsx(l,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Extra hours this month"},{title:"Leave Days",value:a.totalLeaveDays,icon:e.jsx(G,{}),color:"text-amber-400",iconBg:"bg-amber-500/20",description:"Leaves taken this month"}];return e.jsxs(e.Fragment,{children:["            ",e.jsx(k,{title:n||"My Attendance"}),e.jsx(c,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(_,{in:!0,children:e.jsx(T,{children:e.jsx($,{title:"My Attendance",subtitle:"View your attendance records and timesheet details",icon:e.jsx(O,{className:"w-8 h-8"}),variant:"default",children:e.jsxs("div",{className:"p-6",children:[e.jsx(B,{stats:D,className:"mb-6"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsx(A,{label:"Month/Year",type:"month",value:r.currentMonth,onChange:t=>j("currentMonth",t.target.value),startContent:e.jsx(x,{className:"w-4 h-4"}),variant:"bordered",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:g?"sm":"md"})})})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e.jsx(z,{title:e.jsxs(c,{className:"flex items-center gap-3",children:[e.jsx(l,{className:"w-6 h-6 text-primary"}),e.jsx(W,{variant:"h5",component:"h1",sx:{fontSize:{xs:"1.25rem",sm:"1.5rem",md:"1.75rem"},fontWeight:600},children:"My Attendance Records"})]}),sx:{padding:"24px"}}),e.jsx(C,{}),e.jsx(I,{children:e.jsx(c,{sx:{maxHeight:"84vh",overflowY:"auto"},children:e.jsx(H,{selectedDate:d,handleDateChange:w,updateTimeSheet:y,externalFilterData:r},`${d}-${r.currentMonth}`)})})]})]})})})})})]})});Q.layout=n=>e.jsx(R,{children:n});export{Q as default};
