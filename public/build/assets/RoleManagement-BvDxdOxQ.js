import{r as a,m as sr,j as s,a as ne,Q as rr,d as x,F as ar,S as tr,c as be,b as fe}from"./app-DyyunZfI.js";import{G as or}from"./GlassCard-CSbVwD7E.js";import{v as xs,w as ke,q as lr,t as ir,n as De,G as Le,p as gs,A as nr}from"./Dashboard-eJcnLUU8.js";import{P as cr}from"./PageHeader-mDI0w_uq.js";import{S as dr}from"./StatsCards-CbSl8WWA.js";import{B as w}from"./react-toastify.esm-CYg29cdz.js";import{F as ce}from"./UserGroupIcon-27E50qMZ.js";import{F as de}from"./KeyIcon-Dltk5WDG.js";import{F as mr}from"./FunnelIcon-C_GTVuHv.js";import{F as bs}from"./ExclamationTriangleIcon-BsmzlS1r.js";import{F as Oe}from"./AdjustmentsHorizontalIcon-DJZK32RV.js";import{F as ur}from"./DocumentArrowDownIcon-7pXdVH3S.js";import{F as hr}from"./ShieldCheckIcon-kgeUV64N.js";import{F as fs}from"./PlusIcon-BwWvZwsK.js";import{F as ze}from"./MagnifyingGlassIcon-CnIa6Cul.js";import{F as ys}from"./TrashIcon-DWl2d7Ag.js";import{s as pr}from"./chunk-TQNYOUFX-yOfDey01.js";import{s as me,l as C}from"./chunk-Y2AYO5NJ-Cdo7__Ed.js";import{c as ye}from"./chunk-D5XJWRAV-Drq72Bup.js";import{c as k}from"./chunk-IHOGUXIG-B8WOVLyW.js";import{t as ve}from"./XMarkIcon-CsXY58VA.js";import"./MapPinIcon-BzuMXqkn.js";import"./EnvelopeIcon-CQykiiND.js";import"./ClockIcon-D7ADVzPp.js";import"./UserIcon-BkD21Ack.js";import"./index-CZqnmJ4-.js";import"./chunk-SSA7SXE4-BLP1fpPl.js";import"./logo-Pwvcz7fP.js";import"./proxy-DAD54e0o.js";import"./create-visual-element-202FNWgM.js";import"./features-animation-CECeEVLg.js";import"./CheckCircleIcon-Btm8mRnI.js";import"./chunk-TLYTI3QM-cTtarB9c.js";import"./useToggleState-Ds9var53.js";function xr({title:d,titleId:u,...A},E){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:E,"aria-labelledby":u},A),d?a.createElement("title",{id:u},d):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const vs=a.forwardRef(xr),Ue=d=>Array.isArray(d)?[...d]:[],js=d=>d&&typeof d=="object"&&!Array.isArray(d)?{...d}:{},gr=d=>{const u={roles:Ue(d.roles),permissions:Ue(d.permissions),role_has_permissions:Ue(d.role_has_permissions),permissionsGrouped:js(d.permissionsGrouped||d.permissions_grouped),enterprise_modules:js(d.enterprise_modules),errors:[]};if(u.roles.length===0&&u.errors.push("No roles data available"),u.permissions.length===0&&u.errors.push("No permissions data available"),u.roles.length>0&&u.permissions.length>0&&u.role_has_permissions.length===0&&u.errors.push("Role-permission relationships missing - this may indicate a cache or database issue"),u.role_has_permissions.length>0){const A=u.roles.map(D=>D.id),E=u.permissions.map(D=>D.id),N=u.role_has_permissions.filter(D=>!A.includes(D.role_id)||!E.includes(D.permission_id));N.length>0&&u.errors.push(`${N.length} invalid role-permission relationships found`)}return u},$e=(d,u)=>{const[A,E]=a.useState(d);return a.useEffect(()=>{const N=setTimeout(()=>{E(d)},u);return()=>{clearTimeout(N)}},[d,u]),A},h={IDLE:"idle",LOADING:"loading",SUCCESS:"success",ERROR:"error"},br=d=>{const u=a.useMemo(()=>gr(d),[d]),A=u.roles,E=u.permissions,N=u.permissionsGrouped,D=u.role_has_permissions;u.enterprise_modules;const Te=!!d.can_manage_super_admin,ws=d.title;d.error;const Be=u.errors,ue=d.users||[],R=a.useRef(null),J=a.useRef(Date.now()),Ge=sr();useMediaQuery(Ge.breakpoints.down("sm")),useMediaQuery(Ge.breakpoints.down("md"));const[he,Ns]=a.useState(0),[b,We]=a.useState(A),[f,He]=a.useState(E),[L,je]=a.useState(D),[O,Ss]=a.useState(A.length>0?A[0].id:null),[S,z]=a.useState(new Set),[g,I]=a.useState(!1),[Y,j]=a.useState({permissions:{},modules:{},roles:h.IDLE,users:h.IDLE}),[Ps,qe]=a.useState(!1),[Cs,Qe]=a.useState(!1),[fr,Ke]=a.useState(!1),[yr,Ve]=a.useState(!1),[U,Xe]=a.useState(null),[$,Ze]=a.useState(null),[vr,Je]=a.useState(null),[jr,Ye]=a.useState(null),[Rs,ee]=a.useState(!1),[se,es]=a.useState(null),[we,ss]=a.useState(null),[Ne,rs]=a.useState(""),[Se,as]=a.useState(""),[Pe,ts]=a.useState(""),[re,os]=a.useState("all"),[B,ls]=a.useState("all"),[pe,is]=a.useState("all"),Ce=$e(Ne,300),Re=$e(Se,300),Me=$e(Pe,300),[ae,_e]=a.useState(0),[te,Ae]=a.useState(0),[oe,Ie]=a.useState(0),[G,wr]=a.useState(10),[W,Nr]=a.useState(10),[H,Sr]=a.useState(10),[ns,y]=a.useState(""),[cs,q]=a.useState(""),[T,le]=a.useState({name:"",description:"",permissions:[],hierarchy_level:10,is_active:!0}),[M,Q]=a.useState({name:"",display_name:"",description:"",module:"",guard_name:"web"}),[_,P]=a.useState({}),[Pr,ds]=a.useState(new Set),[Cr,ms]=a.useState(new Set),[Rr,Mr]=a.useState(!1),c=a.useMemo(()=>b.find(e=>e.id===O)||null,[b,O]),K=a.useCallback(e=>{if(Array.isArray(L)){const r=L.filter(t=>t&&t.role_id===e).map(t=>t.permission_id).filter(Boolean);if(r.length>0)return r}if(Array.isArray(b)){const r=b.find(t=>t&&t.id===e);if(r&&Array.isArray(r.permissions))return r.permissions.map(t=>t.id).filter(Boolean)}return[]},[L,b]);a.useEffect(()=>{if(O){const e=K(O),r=new Set(e);(r.size!==S.size||[...r].some(t=>!S.has(t)))&&z(r)}else S.size>0&&z(new Set)},[O,L,b,K]),a.useMemo(()=>c,[c==null?void 0:c.id,c==null?void 0:c.name]),a.useMemo(()=>Te,[Te]);const V=a.useMemo(()=>({totalRoles:Array.isArray(b)?b.length:0,totalPermissions:Array.isArray(f)?f.length:0,activeRole:(c==null?void 0:c.name)||"None Selected",grantedPermissions:S.size}),[b,f,c,S]);a.useMemo(()=>[{title:"Total Roles",value:V.totalRoles,icon:s.jsx(ce,{}),color:"text-blue-600",iconBg:"bg-blue-500/20",description:"System roles"},{title:"Permissions",value:V.totalPermissions,icon:s.jsx(de,{}),color:"text-green-600",iconBg:"bg-green-500/20",description:"Available permissions"},{title:"Active Role",value:V.activeRole==="None Selected"?"None":V.activeRole,icon:s.jsx(xs,{}),color:"text-purple-600",iconBg:"bg-purple-500/20",description:"Currently selected",customStyle:V.activeRole==="None Selected"?{fontSize:"1rem"}:{}},{title:"Granted",value:V.grantedPermissions,icon:s.jsx(mr,{}),color:"text-orange-600",iconBg:"bg-orange-500/20",description:"Active permissions"}],[V]);const X=a.useMemo(()=>b.filter(e=>{const r=Ce===""||e.name.toLowerCase().includes(Ce.toLowerCase())||e.description&&e.description.toLowerCase().includes(Ce.toLowerCase()),t=re==="all"||re==="active"&&e.is_active!==!1||re==="inactive"&&e.is_active===!1;return r&&t}),[b,Ce,re]),Z=a.useMemo(()=>f.filter(e=>{const r=Re===""||e.name&&e.name.toLowerCase().includes(Re.toLowerCase())||e.display_name&&e.display_name.toLowerCase().includes(Re.toLowerCase()),t=B==="all"||e.module===B||e.name&&e.name.startsWith(B);return r&&t}),[f,Re,B]),ie=a.useMemo(()=>ue.filter(e=>{var o,l;const r=Me===""||((o=e.name)==null?void 0:o.toLowerCase().includes(Me.toLowerCase()))||((l=e.email)==null?void 0:l.toLowerCase().includes(Me.toLowerCase())),t=pe==="all"||e.roles&&e.roles.some(i=>i.name===pe);return r&&t}),[ue,Me,pe]),Ms=a.useMemo(()=>{const e=ae*G;return X.slice(e,e+G)},[X,ae,G]),_s=a.useMemo(()=>{const e=te*W;return Z.slice(e,e+W)},[Z,te,W]),As=a.useMemo(()=>{const e=oe*H;return ie.slice(e,e+H)},[ie,oe,H]),xe=a.useMemo(()=>{const e=new Set;return f.forEach(r=>{r.module?e.add(r.module):r.name&&r.name.includes(".")&&e.add(r.name.split(".")[0])}),Array.from(e).sort()},[f]),Is=a.useMemo(()=>b.map(e=>e.name).sort(),[b]),F=a.useCallback((e,r)=>{if(Array.isArray(L)&&Array.isArray(f)){const t=L.filter(l=>l&&l.role_id===e),o=f.find(l=>l&&l.name===r);if(o&&t.some(l=>l.permission_id===o.id))return!0}if(Array.isArray(b)){const t=b.find(o=>o&&o.id===e);if(t&&Array.isArray(t.permissions))return t.permissions.some(o=>o&&o.name===r)}if(c&&c.id===e&&S.size>0){const t=f.find(o=>o&&o.name===r);if(t)return S.has(t.id)}return!1},[L,f,b,c,S]);a.useCallback(e=>!c||!N[e]?!1:N[e].permissions.every(t=>F(c.id,t.name)),[c,N,F]),a.useCallback(e=>!c||!N[e]?!1:N[e].permissions.some(t=>F(c.id,t.name)),[c,N,F]);const us=e=>e.name==="Super Administrator"?Te:!0,ks=a.useCallback(e=>{try{Ss(e);const r=K(e);z(new Set(r)),y("")}catch(r){console.error("Error selecting role:",r),y("Failed to select role. Please try again.")}},[K]),Ds=a.useCallback(e=>{rs(e),_e(0)},[]),Ts=a.useCallback(e=>{as(e),Ae(0)},[]),Fs=a.useCallback(e=>{ts(e),Ie(0)},[]),Es=a.useCallback(e=>{os(e),_e(0)},[]),Ls=a.useCallback(e=>{ls(e),Ae(0)},[]),Os=a.useCallback(e=>{is(e),Ie(0)},[]),hs=a.useCallback((e=null)=>{Xe(e),le({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",permissions:(e==null?void 0:e.permissions)||[],hierarchy_level:(e==null?void 0:e.hierarchy_level)||10,is_active:(e==null?void 0:e.is_active)??!0}),qe(!0),P({}),y("")},[]),Fe=a.useCallback(()=>{qe(!1),Xe(null),P({}),y(""),le({name:"",description:"",permissions:[],hierarchy_level:10,is_active:!0})},[]),ps=a.useCallback((e=null)=>{Ze(e),Q({name:(e==null?void 0:e.name)||"",display_name:(e==null?void 0:e.display_name)||"",description:(e==null?void 0:e.description)||"",module:(e==null?void 0:e.module)||xe[0]||"users",guard_name:(e==null?void 0:e.guard_name)||"web"}),Qe(!0),P({}),y("")},[xe]),Ee=a.useCallback(()=>{Qe(!1),Ze(null),P({}),y(""),Q({name:"",display_name:"",description:"",module:"",guard_name:"web"})},[]);a.useCallback(e=>{Je(e),Ke(!0);const r=K(e.id);ms(new Set(r))},[K]),a.useCallback(()=>{Ke(!1),Je(null),ms(new Set)},[]);const zs=a.useCallback(e=>{Ye(e),Ve(!0);const r=e.roles?new Set(e.roles.map(t=>t.id)):new Set;ds(r)},[]);a.useCallback(()=>{Ve(!1),Ye(null),ds(new Set)},[]);const Us=a.useCallback(e=>{es(e),ee(!0)},[]),$s=a.useCallback(e=>{ss(e),ee(!0)},[]),Bs=async()=>{var e,r;if(se){I(!0);try{await ne.delete(`/api/roles/${se.id}`),w.success("Role deleted successfully"),q("Role deleted successfully"),ee(!1),es(null),J.current=Date.now()}catch(t){console.error("Error deleting role:",t);const o=((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to delete role";w.error(o),y(o)}finally{I(!1)}}},Gs=async()=>{var e,r;if(we){I(!0);try{await ne.delete(`/api/permissions/${we.id}`),w.success("Permission deleted successfully"),q("Permission deleted successfully"),ee(!1),ss(null),J.current=Date.now()}catch(t){console.error("Error deleting permission:",t);const o=((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to delete permission";w.error(o),y(o)}finally{I(!1)}}},Ws=async()=>{var r,t,o;P({}),y("");const e={};if(T.name.trim()||(e.name="Role name is required"),T.name.length>255&&(e.name="Role name must be less than 255 characters"),T.description&&T.description.length>500&&(e.description="Description must be less than 500 characters"),Object.keys(e).length>0){P(e);return}I(!0),j(l=>({...l,roles:h.LOADING}));try{const l=U?`/api/roles/${U.id}`:"/api/roles",m=await ne[U?"put":"post"](l,T);(m.status===200||m.status===201)&&(U?(We(n=>n.map(p=>p.id===U.id?m.data.role:p)),w.success("Role updated successfully"),q("Role updated successfully")):(We(n=>[...n,m.data.role]),w.success("Role created successfully"),q("Role created successfully")),Fe(),j(n=>({...n,roles:h.SUCCESS})),setTimeout(()=>{j(n=>({...n,roles:h.IDLE})),q("")},3e3),J.current=Date.now())}catch(l){if(console.error("Error saving role:",l),j(i=>({...i,roles:h.ERROR})),((r=l.response)==null?void 0:r.status)===422&&l.response.data.errors)P(l.response.data.errors);else{const i=((o=(t=l.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to save role";w.error(i),y(i)}setTimeout(()=>{j(i=>({...i,roles:h.IDLE}))},3e3)}finally{I(!1)}},Hs=async()=>{var r,t,o;P({}),y("");const e={};if(M.name.trim()||(e.name="Permission name is required"),M.display_name.trim()||(e.display_name="Display name is required"),M.module.trim()||(e.module="Module is required"),Object.keys(e).length>0){P(e);return}I(!0);try{const l=$?`/api/permissions/${$.id}`:"/api/permissions",m=await ne[$?"put":"post"](l,M);(m.status===200||m.status===201)&&($?(He(n=>n.map(p=>p.id===$.id?m.data.permission:p)),w.success("Permission updated successfully")):(He(n=>[...n,m.data.permission]),w.success("Permission created successfully")),Ee(),J.current=Date.now())}catch(l){if(console.error("Error saving permission:",l),((r=l.response)==null?void 0:r.status)===422&&l.response.data.errors)P(l.response.data.errors);else{const i=((o=(t=l.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to save permission";w.error(i),y(i)}}finally{I(!1)}},qs=a.useCallback(async e=>{var r,t,o,l;if(!(!c||g)){R.current&&R.current.abort(),R.current=new AbortController,j(i=>({...i,permissions:{...i.permissions,[e]:h.LOADING}}));try{const i=F(c.id,e),m=i?"revoke":"grant",n=await ne.post("/admin/roles/update-permission",{role_id:c.id,permission:e,action:m},{signal:R.current.signal});if(n.status===200){if(n.data.role_has_permissions){je(n.data.role_has_permissions);const p=n.data.role_has_permissions.filter(v=>v.role_id===c.id).map(v=>v.permission_id);z(new Set(p))}else{const p=f.find(v=>v.name===e);p&&(i?(je(v=>v.filter(ge=>!(ge.role_id===c.id&&ge.permission_id===p.id))),z(v=>{const ge=new Set(v);return ge.delete(p.id),ge})):(je(v=>[...v,{role_id:c.id,permission_id:p.id}]),z(v=>new Set([...v,p.id]))))}j(p=>({...p,permissions:{...p.permissions,[e]:h.SUCCESS}})),setTimeout(()=>{j(p=>({...p,permissions:{...p.permissions,[e]:h.IDLE}}))},2e3),w.success(`Permission ${m}ed successfully`),J.current=Date.now()}}catch(i){i.name!=="AbortError"&&(console.error("Error updating permission:",i),j(m=>({...m,permissions:{...m.permissions,[e]:h.ERROR}})),setTimeout(()=>{j(m=>({...m,permissions:{...m.permissions,[e]:h.IDLE}}))},3e3),w.error(((t=(r=i.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to update permission"),y(((l=(o=i.response)==null?void 0:o.data)==null?void 0:l.message)||"Failed to update permission"))}finally{I(!1)}}},[c,g,F,f]),Qs=a.useCallback(async e=>{var r,t,o,l;if(!(!c||g)){R.current&&R.current.abort(),R.current=new AbortController,j(i=>({...i,modules:{...i.modules,[e]:h.LOADING}}));try{const i=await ne.post("/admin/roles/update-module",{roleId:c.id,module:e,action:"toggle"},{signal:R.current.signal});if(i.status===200){je(i.data.role_has_permissions);const m=i.data.role_has_permissions.filter(n=>n.role_id===c.id).map(n=>n.permission_id);z(new Set(m)),j(n=>({...n,modules:{...n.modules,[e]:h.SUCCESS}})),setTimeout(()=>{j(n=>({...n,modules:{...n.modules,[e]:h.IDLE}}))},2e3),w.success("Module permissions updated successfully"),J.current=Date.now()}}catch(i){i.name!=="AbortError"&&(console.error("Error updating module permissions:",i),j(m=>({...m,modules:{...m.modules,[e]:h.ERROR}})),setTimeout(()=>{j(m=>({...m,modules:{...m.modules,[e]:h.IDLE}}))},3e3),w.error(((t=(r=i.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to update module permissions"),y(((l=(o=i.response)==null?void 0:o.data)==null?void 0:l.message)||"Failed to update module permissions"))}}},[c,g]);a.useCallback((e,r)=>{le(t=>({...t,[e]:r})),_[e]&&P(t=>({...t,[e]:void 0}))},[_]),a.useEffect(()=>()=>{R.current&&R.current.abort()},[]),a.useEffect(()=>{const e=r=>{if(r.key==="/"&&!r.ctrlKey&&!r.metaKey&&!r.altKey){const t=r.target;if(t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!t.isContentEditable){r.preventDefault();const o=document.querySelector('input[placeholder*="Search"]');o&&o.focus()}}if(r.key==="Escape"&&(Ne||Se||Pe||B!=="all")&&(rs(""),as(""),ts(""),ls("all"),os("all"),is("all")),(r.ctrlKey||r.metaKey)&&r.key==="k"){r.preventDefault();const t=document.querySelector('input[placeholder*="Search"]');t&&t.focus()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[Ne,Se,Pe,B,re,pe]);const Ks=a.useCallback(e=>Y.permissions[e]||h.IDLE,[Y.permissions]),Vs=a.useCallback(e=>Y.modules[e]||h.IDLE,[Y.modules]),Xs=()=>s.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20 mt-4",children:[s.jsxs(ye,{className:"p-4 border-b border-white/10",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 w-full",children:[s.jsxs(Typography,{variant:"h6",className:"flex items-center gap-2",children:[s.jsx(ce,{className:"w-5 h-5"}),"Roles Management"]}),s.jsx(x,{onPress:()=>hs(),startContent:s.jsx(fs,{className:"w-4 h-4"}),className:"bg-linear-to-r from-blue-500/20 to-purple-500/20 hover:from-blue-500/30 hover:to-purple-500/30 border border-blue-400/30 text-white",variant:"bordered",children:"Add Role"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[s.jsx(TextField,{label:"Search Roles",variant:"outlined",placeholder:"Search by role name...",value:Ne,onChange:e=>Ds(e.target.value),fullWidth:!0,size:"medium",InputProps:{startAdornment:s.jsx(InputAdornment,{position:"start",children:s.jsx(ze,{className:"w-4 h-4"})}),style:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white"}},InputLabelProps:{style:{color:"rgba(255, 255, 255, 0.7)"}},sx:{flex:1,"& .MuiInputBase-input":{backgroundColor:"transparent",color:"white"},"& .MuiOutlinedInput-root:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)"}}}),s.jsxs(me,{label:"Status Filter",variant:"bordered",selectedKeys:[re],onSelectionChange:e=>Es(Array.from(e)[0]),className:"min-w-[140px]",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",label:"text-white/70",value:"text-white"},children:[s.jsx(C,{value:"all",children:"All Status"},"all"),s.jsx(C,{value:"active",children:"Active"},"active"),s.jsx(C,{value:"inactive",children:"Inactive"},"inactive")]})]})]}),s.jsxs(fe,{className:"p-0",children:[s.jsx("div",{className:"divide-y divide-white/10",children:Ms.map(e=>{const r=K(e.id),t=r.map(o=>{var l;return(l=f.find(i=>i.id===o))==null?void 0:l.name}).filter(Boolean).slice(0,3);return s.jsx("div",{className:"p-4 hover:bg-white/5 transition-colors",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-linear-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold",children:e.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Typography,{variant:"body1",className:"font-medium",children:e.name}),e.name==="Super Administrator"&&s.jsx(k,{size:"sm",color:"warning",variant:"flat",children:"System"}),s.jsx(k,{size:"sm",color:e.is_active!==!1?"success":"default",variant:"flat",children:e.is_active!==!1?"Active":"Inactive"})]}),e.description&&s.jsx(Typography,{variant:"body2",color:"textSecondary",className:"mt-1",children:e.description}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[t.map((o,l)=>s.jsx(k,{size:"sm",variant:"flat",color:"primary",className:"text-xs",children:o},l)),r.length>3&&s.jsxs(k,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",children:["+",r.length-3," more"]})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ve,{content:"Edit Role",children:s.jsx(x,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>hs(e),isDisabled:!us(e),className:"text-blue-400 hover:text-blue-300",children:s.jsx(vs,{className:"w-4 h-4"})})}),s.jsx(ve,{content:"Delete Role",children:s.jsx(x,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>Us(e),isDisabled:!us(e),className:"text-red-400 hover:text-red-300",children:s.jsx(ys,{className:"w-4 h-4"})})})]})]})},e.id)})}),X.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ce,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),s.jsx(Typography,{variant:"body1",color:"textSecondary",children:"No roles found matching your criteria"})]}),X.length>G&&s.jsxs("div",{className:"flex justify-between items-center p-4 border-t border-white/10",children:[s.jsxs(Typography,{variant:"body2",color:"textSecondary",children:["Showing ",ae*G+1," to ",Math.min((ae+1)*G,X.length)," of ",X.length," roles"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(x,{isIconOnly:!0,size:"sm",variant:"light",isDisabled:ae===0,onPress:()=>_e(e=>Math.max(0,e-1)),className:"text-white",children:"‹"}),s.jsx(x,{isIconOnly:!0,size:"sm",variant:"light",isDisabled:(ae+1)*G>=X.length,onPress:()=>_e(e=>e+1),className:"text-white",children:"›"})]})]})]})]}),Zs=()=>s.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20 mt-4",children:[s.jsxs(ye,{className:"p-4 border-b border-white/10",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 w-full",children:[s.jsxs(Typography,{variant:"h6",className:"flex items-center gap-2",children:[s.jsx(de,{className:"w-5 h-5"}),"Permissions Management"]}),s.jsx(x,{onPress:()=>ps(),startContent:s.jsx(fs,{className:"w-4 h-4"}),className:"bg-linear-to-r from-green-500/20 to-emerald-500/20 hover:from-green-500/30 hover:to-emerald-500/30 border border-green-400/30 text-white",variant:"bordered",children:"Add Permission"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[s.jsx(TextField,{label:"Search Permissions",variant:"outlined",placeholder:"Search by permission name...",value:Se,onChange:e=>Ts(e.target.value),fullWidth:!0,size:"medium",InputProps:{startAdornment:s.jsx(InputAdornment,{position:"start",children:s.jsx(ze,{className:"w-4 h-4"})}),style:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white"}},InputLabelProps:{style:{color:"rgba(255, 255, 255, 0.7)"}},sx:{flex:1,"& .MuiInputBase-input":{backgroundColor:"transparent",color:"white"},"& .MuiOutlinedInput-root:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)"}}}),s.jsxs(me,{label:"Module Filter",variant:"bordered",selectedKeys:[B],onSelectionChange:e=>Ls(Array.from(e)[0]),className:"min-w-[180px]",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",label:"text-white/70",value:"text-white"},children:[s.jsx(C,{value:"all",children:"All Modules"},"all"),xe.map(e=>s.jsx(C,{value:e,children:e},e))]})]})]}),s.jsxs(fe,{className:"p-0",children:[s.jsx("div",{className:"divide-y divide-white/10",children:_s.map(e=>s.jsx("div",{className:"p-4 hover:bg-white/5 transition-colors",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-linear-to-r from-green-500 to-emerald-500 flex items-center justify-center text-white font-bold",children:e.name?e.name.charAt(0).toUpperCase():"P"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Typography,{variant:"body1",className:"font-medium",children:e.display_name||e.name}),s.jsx(k,{size:"sm",color:"secondary",variant:"flat",children:e.module||(e.name?e.name.split(".")[0]:"General")})]}),s.jsx(Typography,{variant:"body2",color:"textSecondary",className:"mt-1",children:e.name}),e.description&&s.jsx(Typography,{variant:"body2",color:"textSecondary",className:"mt-1 max-w-md",children:e.description})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ve,{content:"Edit Permission",children:s.jsx(x,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>ps(e),className:"text-blue-400 hover:text-blue-300",children:s.jsx(vs,{className:"w-4 h-4"})})}),s.jsx(ve,{content:"Delete Permission",children:s.jsx(x,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>$s(e),className:"text-red-400 hover:text-red-300",children:s.jsx(ys,{className:"w-4 h-4"})})})]})]})},e.id))}),Z.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(de,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),s.jsx(Typography,{variant:"body1",color:"textSecondary",children:"No permissions found matching your criteria"})]}),Z.length>W&&s.jsxs("div",{className:"flex justify-between items-center p-4 border-t border-white/10",children:[s.jsxs(Typography,{variant:"body2",color:"textSecondary",children:["Showing ",te*W+1," to ",Math.min((te+1)*W,Z.length)," of ",Z.length," permissions"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(x,{isIconOnly:!0,size:"sm",variant:"light",isDisabled:te===0,onPress:()=>Ae(e=>Math.max(0,e-1)),className:"text-white",children:"‹"}),s.jsx(x,{isIconOnly:!0,size:"sm",variant:"light",isDisabled:(te+1)*W>=Z.length,onPress:()=>Ae(e=>e+1),className:"text-white",children:"›"})]})]})]})]}),Js=()=>s.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20 mt-4",children:[s.jsx(ye,{className:"p-4 border-b border-white/10",children:s.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[s.jsxs(Typography,{variant:"h6",className:"flex items-center gap-2",children:[s.jsx(Oe,{className:"w-5 h-5"}),"Role-Permission Assignment"]}),s.jsx(me,{label:"Select Role to Manage",variant:"bordered",selectedKeys:O?[O.toString()]:[],onSelectionChange:e=>{const r=Array.from(e)[0];r&&ks(parseInt(r))},className:"max-w-md",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",label:"text-white/70",value:"text-white"},children:b.map(e=>s.jsx(C,{value:e.id.toString(),children:e.name},e.id.toString()))})]})}),s.jsx(fe,{className:"p-4",children:c?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg border border-white/10",children:[s.jsxs("div",{children:[s.jsxs(Typography,{variant:"body1",className:"font-medium",children:["Managing permissions for: ",c.name]}),s.jsxs(Typography,{variant:"body2",color:"textSecondary",children:[S.size," of ",f.length," permissions granted"]})]}),s.jsx(gs,{value:S.size/f.length*100,size:"sm",color:"primary",className:"w-32","aria-label":`${Math.round(S.size/f.length*100)}% permissions granted`})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(N).map(([e,r])=>{const t=r.permissions||[],o=t.filter(n=>F(c.id,n.name)).length,l=t.length,i=o===l,m=o>0&&o<l;return s.jsxs(be,{className:"bg-white/5 border-white/10",children:[s.jsxs(ye,{className:"pb-2",children:[s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx(Typography,{variant:"body1",className:"font-medium capitalize",children:e}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(k,{size:"sm",variant:"flat",color:i?"success":m?"warning":"default",children:[o,"/",l]}),s.jsx(x,{size:"sm",variant:"light",onPress:()=>Qs(e),isLoading:Vs(e)===h.LOADING,className:"text-xs",children:i?"Revoke All":"Grant All"})]})]}),s.jsx(gs,{value:o/l*100,size:"sm",color:i?"success":m?"warning":"default","aria-label":`${o} of ${l} permissions granted for ${e} module`})]}),s.jsx(fe,{className:"pt-0",children:s.jsx("div",{className:"space-y-2",children:t.map(n=>{const p=F(c.id,n.name),v=Ks(n.name);return s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-sm bg-white/5 hover:bg-white/10 transition-colors",children:[s.jsxs("div",{children:[s.jsx(Typography,{variant:"body2",className:"font-medium",children:n.display_name||n.name}),s.jsx(Typography,{variant:"caption",color:"textSecondary",children:n.name})]}),s.jsx(pr,{size:"sm",isSelected:p,onValueChange:()=>qs(n.name),isDisabled:v===h.LOADING,color:"success","aria-label":`Toggle ${n.display_name||n.name} permission`},`${n.id}-${p}-${v}`)]},n.id)})})})]},e)})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Oe,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),s.jsx(Typography,{variant:"body1",color:"textSecondary",className:"mb-2",children:"Select a role to manage permissions"}),s.jsx(Typography,{variant:"body2",color:"textSecondary",children:"Choose a role from the dropdown above to assign or revoke permissions"})]})})]}),Ys=()=>s.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20 mt-4",children:[s.jsxs(ye,{className:"p-4 border-b border-white/10",children:[s.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 w-full",children:s.jsxs(Typography,{variant:"h6",className:"flex items-center gap-2",children:[s.jsx(ke,{className:"w-5 h-5"}),"User-Role Assignment"]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[s.jsx(TextField,{label:"Search Users",variant:"outlined",placeholder:"Search by user name or email...",value:Pe,onChange:e=>Fs(e.target.value),fullWidth:!0,size:"medium",InputProps:{startAdornment:s.jsx(InputAdornment,{position:"start",children:s.jsx(ze,{className:"w-4 h-4"})}),style:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white"}},InputLabelProps:{style:{color:"rgba(255, 255, 255, 0.7)"}},sx:{flex:1,"& .MuiInputBase-input":{backgroundColor:"transparent",color:"white"},"& .MuiOutlinedInput-root:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)"}}}),s.jsxs(me,{label:"Filter by Role",variant:"bordered",selectedKeys:[pe],onSelectionChange:e=>Os(Array.from(e)[0]),className:"min-w-[160px]",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",label:"text-white/70",value:"text-white"},children:[s.jsx(C,{value:"all",children:"All Roles"},"all"),Is.map(e=>s.jsx(C,{value:e,children:e},e))]})]})]}),s.jsxs(fe,{className:"p-0",children:[ue&&ue.length>0?s.jsx("div",{className:"divide-y divide-white/10",children:As.map(e=>{var r;return s.jsx("div",{className:"p-4 hover:bg-white/5 transition-colors",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-linear-to-r from-orange-500 to-red-500 flex items-center justify-center text-white font-bold",children:((r=e.name)==null?void 0:r.charAt(0).toUpperCase())||"U"}),s.jsxs("div",{children:[s.jsx(Typography,{variant:"body1",className:"font-medium",children:e.name||"Unknown User"}),s.jsx(Typography,{variant:"body2",color:"textSecondary",children:e.email||"No email"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.roles&&e.roles.length>0?s.jsxs(s.Fragment,{children:[e.roles.slice(0,3).map((t,o)=>s.jsx(k,{size:"sm",variant:"flat",color:"primary",className:"text-xs",children:t.name},o)),e.roles.length>3&&s.jsxs(k,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",children:["+",e.roles.length-3," more"]})]}):s.jsx(k,{size:"sm",variant:"flat",color:"default",className:"text-xs",children:"No roles assigned"})})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx(ve,{content:"Assign Roles",children:s.jsx(x,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>zs(e),className:"text-orange-400 hover:text-orange-300",children:s.jsx(xs,{className:"w-4 h-4"})})})})]})},e.id)})}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ke,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),s.jsx(Typography,{variant:"body1",children:"No users found"}),s.jsx(Typography,{variant:"body2",children:"Users data is not available. Please ensure users are loaded from the backend."})]}),ie.length>H&&s.jsxs("div",{className:"flex justify-between items-center p-4 border-t border-white/10",children:[s.jsxs(Typography,{variant:"body2",children:["Showing ",oe*H+1," to ",Math.min((oe+1)*H,ie.length)," of ",ie.length," users"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(x,{isIconOnly:!0,size:"sm",variant:"light",isDisabled:oe===0,onPress:()=>Ie(e=>Math.max(0,e-1)),className:"text-white",children:"‹"}),s.jsx(x,{isIconOnly:!0,size:"sm",variant:"light",isDisabled:(oe+1)*H>=ie.length,onPress:()=>Ie(e=>e+1),className:"text-white",children:"›"})]})]})]})]}),er=()=>s.jsxs(s.Fragment,{children:[s.jsxs(Le,{open:Ps,onClose:g?void 0:Fe,maxWidth:"md",title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ce,{className:"w-6 h-6"}),U?"Edit Role":"Create New Role",Y.roles===h.LOADING&&s.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"})]}),actions:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(x,{variant:"light",onPress:Fe,isDisabled:g,children:"Cancel"}),s.jsx(x,{color:"primary",onPress:Ws,isLoading:g,children:U?"Update Role":"Create Role"})]}),children:[Y.roles===h.ERROR&&s.jsx("div",{className:"mb-4 p-3 bg-danger/10 border border-danger/20 rounded-lg",children:s.jsx("p",{className:"text-danger text-sm",children:"Failed to save role. Please check the form and try again."})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-1",children:[s.jsx("div",{className:"col-span-1",children:s.jsx(TextField,{label:"Role Name",placeholder:"Enter role name",value:T.name,onChange:e=>le(r=>({...r,name:e.target.value})),error:!!_.name,helperText:_.name||"Unique identifier for the role",required:!0,disabled:g,variant:"outlined",fullWidth:!0,size:"medium",InputProps:{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white"}},InputLabelProps:{style:{color:"rgba(255, 255, 255, 0.7)"}},sx:{"& .MuiInputBase-input":{color:"white","&::placeholder":{color:"rgba(255, 255, 255, 0.5)"}},"& .MuiOutlinedInput-root:hover":{borderColor:"rgba(255, 255, 255, 0.3)"},"& .MuiOutlinedInput-root.Mui-focused":{borderColor:"rgba(59, 130, 246, 0.5)"},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.5)"}}})}),s.jsx("div",{className:"col-span-1",children:s.jsxs(me,{label:"Guard Name",placeholder:"Select guard",selectedKeys:[T.guard_name],onSelectionChange:e=>{const r=Array.from(e)[0];le(t=>({...t,guard_name:r}))},isDisabled:g,variant:"bordered",classNames:{trigger:"border-white/20 bg-white/5 hover:border-white/30 data-[open]:border-primary/50",value:"text-white",label:"text-white/70",popoverContent:"bg-black/80 backdrop-blur-xl border border-white/20"},children:[s.jsx(C,{value:"web",children:"Web"},"web"),s.jsx(C,{value:"api",children:"API"},"api")]})}),s.jsx("div",{className:"col-span-2",children:s.jsx(TextField,{label:"Description",placeholder:"Optional description of role responsibilities",value:T.description,onChange:e=>le(r=>({...r,description:e.target.value})),disabled:g,variant:"outlined",fullWidth:!0,multiline:!0,rows:2,size:"medium",InputProps:{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white"}},InputLabelProps:{style:{color:"rgba(255, 255, 255, 0.7)"}},sx:{"& .MuiInputBase-input":{color:"white","&::placeholder":{color:"rgba(255, 255, 255, 0.5)"}},"& .MuiOutlinedInput-root:hover":{borderColor:"rgba(255, 255, 255, 0.3)"},"& .MuiOutlinedInput-root.Mui-focused":{borderColor:"rgba(59, 130, 246, 0.5)"}}})})]})]}),s.jsx(Le,{open:Cs,onClose:g?void 0:Ee,maxWidth:"md",title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(de,{className:"w-6 h-6"}),$?"Edit Permission":"Create New Permission"]}),actions:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(x,{variant:"light",onPress:Ee,isDisabled:g,children:"Cancel"}),s.jsx(x,{color:"success",onPress:Hs,isLoading:g,children:$?"Update Permission":"Create Permission"})]}),children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-1",children:[s.jsx("div",{className:"col-span-1",children:s.jsx(TextField,{label:"Permission Name",placeholder:"e.g., users.create",value:M.name,onChange:e=>Q(r=>({...r,name:e.target.value})),error:!!_.name,helperText:_.name||"Use format: module.action (e.g., users.create)",required:!0,disabled:g,variant:"outlined",fullWidth:!0,size:"medium",InputProps:{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white"}},InputLabelProps:{style:{color:"rgba(255, 255, 255, 0.7)"}},sx:{"& .MuiInputBase-input":{color:"white","&::placeholder":{color:"rgba(255, 255, 255, 0.5)"}},"& .MuiOutlinedInput-root:hover":{borderColor:"rgba(255, 255, 255, 0.3)"},"& .MuiOutlinedInput-root.Mui-focused":{borderColor:"rgba(59, 130, 246, 0.5)"},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.5)"}}})}),s.jsx("div",{className:"col-span-1",children:s.jsx(TextField,{label:"Display Name",placeholder:"Human-readable name",value:M.display_name,onChange:e=>Q(r=>({...r,display_name:e.target.value})),error:!!_.display_name,helperText:_.display_name||"Human-readable name",required:!0,disabled:g,variant:"outlined",fullWidth:!0,size:"medium",InputProps:{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white"}},InputLabelProps:{style:{color:"rgba(255, 255, 255, 0.7)"}},sx:{"& .MuiInputBase-input":{color:"white","&::placeholder":{color:"rgba(255, 255, 255, 0.5)"}},"& .MuiOutlinedInput-root:hover":{borderColor:"rgba(255, 255, 255, 0.3)"},"& .MuiOutlinedInput-root.Mui-focused":{borderColor:"rgba(59, 130, 246, 0.5)"},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.5)"}}})}),s.jsx("div",{className:"col-span-1",children:s.jsx(me,{label:"Module",placeholder:"Select module",selectedKeys:M.module?[M.module]:[],onSelectionChange:e=>{const r=Array.from(e)[0];Q(t=>({...t,module:r}))},isInvalid:!!_.module,errorMessage:_.module,isDisabled:g,variant:"bordered",classNames:{trigger:"border-white/20 bg-white/5 hover:border-white/30 data-[open]:border-primary/50",value:"text-white",label:"text-white/70",popoverContent:"bg-black/80 backdrop-blur-xl border border-white/20"},children:xe.map(e=>s.jsx(C,{value:e,children:e},e))})}),s.jsx("div",{className:"col-span-1",children:s.jsx(TextField,{label:"Guard Name",placeholder:"Usually 'web'",value:M.guard_name,onChange:e=>Q(r=>({...r,guard_name:e.target.value})),helperText:"Usually 'web' for web permissions",disabled:g,fullWidth:!0,size:"small",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"12px",color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&.Mui-focused fieldset":{borderColor:"var(--primary-color)"},"& input::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"var(--primary-color)"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.5)"}}})}),s.jsx("div",{className:"col-span-2",children:s.jsx(TextField,{label:"Description",placeholder:"Optional description of what this permission allows",value:M.description,onChange:e=>Q(r=>({...r,description:e.target.value})),helperText:"Optional description of what this permission allows",disabled:g,fullWidth:!0,size:"small",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"12px",color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&.Mui-focused fieldset":{borderColor:"var(--primary-color)"},"& input::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"var(--primary-color)"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.5)"}}})})]})}),s.jsx(Le,{open:Rs,onClose:()=>ee(!1),maxWidth:"sm",title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bs,{className:"w-6 h-6 text-danger"}),"Confirm Delete"]}),actions:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(x,{variant:"light",onPress:()=>ee(!1),children:"Cancel"}),s.jsxs(x,{color:"danger",onPress:se?Bs:Gs,isLoading:g,children:["Delete ",se?"Role":"Permission"]})]}),children:s.jsxs("p",{className:"text-white/90",children:["Are you sure you want to delete ",se?`the role "${se.name}"`:we?`the permission "${we.name}"`:"this item","? This action cannot be undone."]})})]});return s.jsxs(s.Fragment,{children:[s.jsx(rr,{title:ws}),s.jsx(Snackbar,{open:!!cs,autoHideDuration:3e3,onClose:()=>q(""),anchorOrigin:{vertical:"top",horizontal:"right"},children:s.jsx(Alert,{severity:"success",variant:"filled",onClose:()=>q(""),children:cs})}),s.jsx(Snackbar,{open:!!ns,autoHideDuration:5e3,onClose:()=>y(""),anchorOrigin:{vertical:"top",horizontal:"right"},children:s.jsx(Alert,{severity:"error",variant:"filled",onClose:()=>y(""),children:ns})}),Be.length>0&&s.jsx(Box,{sx:{mb:2},children:s.jsx(Alert,{severity:"warning",variant:"outlined",icon:s.jsx(bs,{className:"w-5 h-5"}),action:s.jsx(x,{color:"warning",size:"small",onClick:()=>{tr.reload({only:["roles","permissions","users"]})},startContent:s.jsx(ar,{className:"w-4 h-4"}),children:"Refresh Data"}),children:s.jsxs(Box,{children:[s.jsx(Typography,{variant:"subtitle2",sx:{mb:1},children:"Data Integrity Issues Detected"}),s.jsx(Box,{component:"ul",sx:{m:0,pl:2},children:Be.map((e,r)=>s.jsx(Typography,{component:"li",variant:"body2",sx:{mb:.5},children:e},r))}),s.jsx(Typography,{variant:"body2",sx:{mt:1,fontStyle:"italic"},children:"This may indicate a cache or database synchronization issue on the server."})]})})}),s.jsx(Box,{sx:{display:"flex",justifyContent:"center",p:2},children:s.jsx(Grow,{in:!0,children:s.jsx(or,{children:s.jsx(cr,{title:"Role & Permission Management",subtitle:"Comprehensive access control and permission management system",icon:s.jsx(hr,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:"Export Data",icon:s.jsx(ur,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-success-rgb),0.3)] bg-[rgba(var(--theme-success-rgb),0.05)] hover:bg-[rgba(var(--theme-success-rgb),0.1)]"}],children:s.jsxs("div",{className:"p-6",children:[s.jsx(dr,{stats:[{title:"Total Roles",value:b.length,icon:s.jsx(ce,{}),color:"text-blue-600",iconBg:"bg-blue-500/20",description:"System roles"},{title:"Permissions",value:f.length,icon:s.jsx(de,{}),color:"text-green-600",iconBg:"bg-green-500/20",description:"Available permissions"},{title:"Active Users",value:ue.length,icon:s.jsx(ke,{}),color:"text-purple-600",iconBg:"bg-purple-500/20",description:"System users"},{title:"Modules",value:xe.length,icon:s.jsx(lr,{}),color:"text-orange-600",iconBg:"bg-orange-500/20",description:"Permission modules"}]}),s.jsxs(Box,{sx:{width:"100%",mt:4},children:[s.jsx(Box,{sx:{borderBottom:1,borderColor:"divider"},children:s.jsxs(ir,{value:he,onChange:(e,r)=>Ns(r),"aria-label":"role management tabs",sx:{"& .MuiTab-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-selected":{color:"#3b82f6"}},"& .MuiTabs-indicator":{backgroundColor:"#3b82f6"}},children:[s.jsx(De,{label:"Roles Management",icon:s.jsx(ce,{className:"w-5 h-5"}),iconPosition:"start"}),s.jsx(De,{label:"Permissions Management",icon:s.jsx(de,{className:"w-5 h-5"}),iconPosition:"start"}),s.jsx(De,{label:"Role-Permission Assignment",icon:s.jsx(Oe,{className:"w-5 h-5"}),iconPosition:"start"}),s.jsx(De,{label:"User-Role Assignment",icon:s.jsx(ke,{className:"w-5 h-5"}),iconPosition:"start"})]})}),he===0&&s.jsx(Xs,{}),he===1&&s.jsx(Zs,{}),he===2&&s.jsx(Js,{}),he===3&&s.jsx(Ys,{})]})]})})})})}),er()]})};br.layout=d=>s.jsx(nr,{children:d});export{br as default};
