import{r as n,j as e,c as I,g as Ye,h as Ze,a as le,G as Be,f as De,H as ea}from"./app-C1U45Ebj.js";import{V as Ee,g as we,W as ve,C as Ce,L as Ge,q as aa,c as re,B as ee,D as fe,E as be,H as ue,J as ce,a as Se,X as Re,u as He,K as Pe,G as ta,h as sa,P as ra,A as la}from"./App-whY0_PgO.js";import{u as $e,B as C,T as j,G as na,F as ia}from"./logo-CfQNLy2U.js";import{P as oa}from"./PageHeader-BguKKtkP.js";import{S as da}from"./StatsCards-CTb1gp2_.js";import{G as Je}from"./GlassDialog-DlDj20KD.js";import{D as ca}from"./DialogTitle-n4i8VQ5D.js";import{F as Ae}from"./ExclamationTriangleIcon-C6Etxr_V.js";import{D as ma,a as xa}from"./DialogContent-Buy6bhT7.js";import{A as ha}from"./Alert-BM1miaEH.js";import{F as Me}from"./TrashIcon-CloBOZ-O.js";import{F as Ke}from"./UserIcon-Ch89lSMO.js";import{F as Xe}from"./CheckCircleIcon-B_RrSLXz.js";import{p as pa}from"./chunk-XVMALT6H-CYgKbo0D.js";import{F as je}from"./EllipsisVerticalIcon-Bd0t_Shn.js";import{F as qe}from"./PencilIcon-BS_QTdXf.js";import{F as Ie}from"./EnvelopeIcon-DYtxSQqd.js";import{F as ga}from"./HashtagIcon-B_rZ9IPr.js";import{C as me}from"./CircularProgress-CE3Tiwse.js";import{t as fa,a as ba,b as ua,c as ja,d as wa,e as va}from"./chunk-F3UDT23P-C9zYK25D.js";import{p as Qe}from"./chunk-EAPQ7RWQ-X8us5Cw9.js";import{F as ya}from"./TrophyIcon-FeRRZH_O.js";import{F as Oe}from"./UserPlusIcon-CaQvR3WE.js";import{F as Na}from"./ChartBarIcon-BOeg_RIy.js";import{F as _a}from"./TableCellsIcon-C3Mlb_2_.js";import{F as ka}from"./AdjustmentsHorizontalIcon-yosOaLGg.js";import{i as Ca}from"./chunk-SSA7SXE4-CwjhqkNF.js";import{b as Pa}from"./chunk-57V4RE7B-8Sp0zFrU.js";import{s as Fe,l as ie}from"./chunk-Y2AYO5NJ-BRwLVlLS.js";import"./ShieldCheckIcon-BOaBImyC.js";import"./create-visual-element-BuHeE9lo.js";import"./chunk-D5XJWRAV-D_e-q5OY.js";import"./Dialog-CLSehbXy.js";import"./useSlot-Cnb0Rlda.js";import"./index-aV7qt4-Z.js";import"./NumberFormatter-DNR9MAW-.js";import"./useHasTabbableChild-zsiyx3Qk.js";import"./index-C-LltKoZ.js";import"./index-CokAva9Y.js";function Fa({title:M,titleId:g,...r},x){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":g},r),M?n.createElement("title",{id:g},M):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Ve=n.forwardRef(Fa),Da=({open:M,onClose:g,employee:r,onConfirm:x,loading:V=!1})=>{const i=$e();if(!r)return null;const Y=r.active_projects_count>0||r.pending_leaves_count>0||r.active_trainings_count>0;return e.jsxs(Je,{open:M,onClose:g,maxWidth:"sm",fullWidth:!0,children:[e.jsx(ca,{sx:{display:"flex",alignItems:"center",gap:2,pb:2,background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05))",borderBottom:`1px solid ${i.palette.error.main}30`},children:e.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:2,color:i.palette.error.main},children:[e.jsx(C,{sx:{width:40,height:40,borderRadius:"12px",background:`linear-gradient(135deg, ${i.palette.error.main}20, ${i.palette.error.main}10)`,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${i.palette.error.main}30`},children:e.jsx(Ae,{className:"w-5 h-5"})}),e.jsx(j,{variant:"h6",component:"h2",fontWeight:"600",children:"Delete Employee"})]})}),e.jsxs(ma,{sx:{py:0},children:[e.jsxs(C,{sx:{p:3,borderRadius:3,background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.1)",mb:3,transition:"all 0.3s ease"},children:[e.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:3,mb:3},children:[e.jsx(Ee,{src:r.profile_image_url||r.profile_image,name:r.name,size:"lg",className:"ring-2 ring-white/20 shadow-lg"}),e.jsxs(C,{sx:{flex:1},children:[e.jsx(j,{variant:"h6",fontWeight:"600",sx:{mb:.5},children:r.name}),e.jsx(j,{variant:"body2",color:"text.secondary",children:r.email}),r.employee_id&&e.jsxs(j,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5,px:1.5,py:.5,borderRadius:1,background:"rgba(255, 255, 255, 0.1)",width:"fit-content"},children:["ID: ",r.employee_id]})]})]}),e.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsxs(C,{sx:{p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(we,{className:"w-4 h-4 text-blue-400"}),e.jsx(j,{variant:"caption",color:"text.secondary",fontWeight:"500",children:"Department"})]}),e.jsx(j,{variant:"body2",fontWeight:"500",children:r.department_name||"Not assigned"})]}),e.jsxs(C,{sx:{p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(ve,{className:"w-4 h-4 text-purple-400"}),e.jsx(j,{variant:"caption",color:"text.secondary",fontWeight:"500",children:"Designation"})]}),e.jsx(j,{variant:"body2",fontWeight:"500",children:r.designation_name||"Not assigned"})]})]})]}),e.jsx(ha,{severity:"error",sx:{mb:3,borderRadius:3,background:"rgba(239, 68, 68, 0.1)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(239, 68, 68, 0.3)","& .MuiAlert-icon":{color:i.palette.error.main},"& .MuiAlert-message":{color:i.palette.error.main}},children:e.jsx(j,{variant:"body2",fontWeight:"500",children:"This action will permanently delete the employee record and cannot be undone."})}),Y&&e.jsxs(C,{sx:{p:3,borderRadius:3,background:"rgba(251, 146, 60, 0.1)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(251, 146, 60, 0.3)",mb:3},children:[e.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(C,{sx:{width:32,height:32,borderRadius:"8px",background:"rgba(251, 146, 60, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ae,{className:"w-4 h-4 text-orange-400"})}),e.jsx(j,{variant:"subtitle2",color:"warning.main",fontWeight:"600",children:"Employee Has Active Data"})]}),e.jsx(j,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"This employee has the following active records that will also be affected:"}),e.jsxs(C,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[r.active_projects_count>0&&e.jsx(Ce,{size:"small",label:`${r.active_projects_count} Active Projects`,sx:{background:"rgba(251, 146, 60, 0.2)",color:"orange",border:"1px solid rgba(251, 146, 60, 0.3)",backdropFilter:"blur(10px)"}}),r.pending_leaves_count>0&&e.jsx(Ce,{size:"small",label:`${r.pending_leaves_count} Pending Leaves`,sx:{background:"rgba(251, 146, 60, 0.2)",color:"orange",border:"1px solid rgba(251, 146, 60, 0.3)",backdropFilter:"blur(10px)"}}),r.active_trainings_count>0&&e.jsx(Ce,{size:"small",label:`${r.active_trainings_count} Active Trainings`,sx:{background:"rgba(251, 146, 60, 0.2)",color:"orange",border:"1px solid rgba(251, 146, 60, 0.3)",backdropFilter:"blur(10px)"}})]})]}),e.jsxs(C,{sx:{p:3,borderRadius:3,background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",mb:2},children:[e.jsxs(j,{variant:"body1",sx:{mb:1,fontWeight:500},children:["Are you sure you want to delete ",e.jsx(C,{component:"span",sx:{color:i.palette.error.main,fontWeight:600},children:r.name}),"?"]}),e.jsx(j,{variant:"body2",color:"text.secondary",children:"Type the employee's name below to confirm this permanent deletion:"})]})]}),e.jsxs(xa,{sx:{px:3,py:3,justifyContent:"space-between",borderTop:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.02)"},children:[e.jsx(I,{variant:"light",onPress:g,disabled:V,className:"hover:bg-white/10",children:"Cancel"}),e.jsx(I,{color:"danger",variant:"solid",onPress:x,isLoading:V,startContent:!V&&e.jsx(Me,{className:"w-4 h-4"}),className:"bg-linear-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 shadow-lg",children:V?"Deleting...":"Delete Employee"})]})]})},Sa=({isOpen:M,onClose:g,employee:r,onImageUpdate:x})=>{const V=n.useRef(null),[i,Y]=n.useState(null),[d,K]=n.useState(null),[L,ae]=n.useState(!1),[X,y]=n.useState(0),[ne,l]=n.useState(""),o=2*1024*1024,Z=["image/jpeg","image/jpg","image/png","image/webp"],G=100,te=2e3,se=(r==null?void 0:r.profile_image_url)||null,xe=se&&se!==null,H=P=>{const w=P.target.files[0];if(!w)return;if(l(""),!Z.includes(w.type)){l("Invalid file type. Please select a JPEG, PNG, or WebP image.");return}if(w.size>o){l(`File too large. Maximum size is ${o/1024/1024}MB.`);return}const N=new Image;N.onload=()=>{if(N.width<G||N.height<G){l(`Image dimensions too small. Minimum size is ${G}x${G} pixels.`);return}if(N.width>te||N.height>te){l(`Image dimensions too large. Maximum size is ${te}x${te} pixels.`);return}Y(w),K(URL.createObjectURL(w))},N.onerror=()=>{l("Invalid image file.")},N.src=URL.createObjectURL(w)},T=async()=>{var w,N,F,J;if(!i||!r)return;ae(!0),y(0),l("");const P=new FormData;P.append("profile_image",i),P.append("user_id",r.id);try{const _=await le.post(route("profile.image.upload"),P,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:D=>{const oe=Math.round(D.loaded*100/D.total);y(oe)}});if(_.data.success){if(ee.success(_.data.message||"Profile picture updated successfully!"),x){const D=_.data.profile_image_url;x(r.id,D)}O()}else throw new Error(_.data.message||"Upload failed")}catch(_){console.error("Upload error:",_);let D="Failed to upload profile picture";((w=_.response)==null?void 0:w.status)===413?D="File too large. Please choose a smaller image.":((N=_.response)==null?void 0:N.status)===422?D=_.response.data.message||"Validation failed":(J=(F=_.response)==null?void 0:F.data)!=null&&J.message?D=_.response.data.message:_.message&&(D=_.message),l(D),ee.error(D)}finally{ae(!1),y(0)}},m=async()=>{var w,N;if(!r)return;ae(!0),l("");const P=new FormData;P.append("user_id",r.id);try{const F=await le.delete(route("profile.image.remove"),{data:P,headers:{"Content-Type":"multipart/form-data"}});if(F.data.success){if(ee.success(F.data.message||"Profile picture removed successfully!"),x){const J=F.data.profile_image_url;x(r.id,J)}O()}else throw new Error(F.data.message||"Remove failed")}catch(F){console.error("Remove error:",F);const J=((N=(w=F.response)==null?void 0:w.data)==null?void 0:N.message)||F.message||"Failed to remove profile picture";l(J),ee.error(J)}finally{ae(!1)}},O=()=>{L||(Y(null),K(null),l(""),y(0),d&&URL.revokeObjectURL(d),g())};return r?e.jsx(Je,{open:M,closeModal:O,maxWidth:"md",fullWidth:!0,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Update Profile Picture"}),e.jsx("p",{className:"text-sm text-gray-500",children:(r==null?void 0:r.name)||"Employee"})]})]}),e.jsx(I,{isIconOnly:!0,variant:"light",onPress:O,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ge,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(aa,{src:d||se||void 0,name:(r==null?void 0:r.name)||"Employee",size:"lg",className:"w-24 h-24",fallback:e.jsx(Ke,{className:"w-12 h-12 text-gray-400"})})}),ne&&e.jsx(re,{color:"danger",variant:"flat",startContent:e.jsx(Ae,{className:"w-4 h-4"}),className:"mb-4 w-full",children:ne}),L&&e.jsx("div",{className:"mb-4",children:e.jsx(pa,{value:X,color:"primary",size:"sm",label:"Uploading...",showValueLabel:!0,className:"w-full"})}),e.jsx(Ye,{className:"mb-4",children:e.jsxs(Ze,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("input",{ref:V,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:H,className:"hidden",disabled:L}),e.jsx(I,{onPress:()=>{var P;return(P=V.current)==null?void 0:P.click()},startContent:e.jsx(Ve,{className:"w-5 h-5"}),variant:"flat",color:"primary",disabled:L,className:"mb-3",children:"Choose New Picture"}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Supported formats: JPEG, PNG, WebP"}),e.jsx("p",{children:"Maximum size: 2MB"}),e.jsx("p",{children:"Minimum dimensions: 100x100px"}),e.jsx("p",{children:"Maximum dimensions: 2000x2000px"})]})]}),i&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(i.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(I,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>{Y(null),K(null),l("")},disabled:L,children:e.jsx(Ge,{className:"w-4 h-4"})})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[xe&&e.jsx(I,{onPress:m,startContent:e.jsx(Me,{className:"w-4 h-4"}),color:"danger",variant:"flat",disabled:L,children:"Remove Picture"}),e.jsx(I,{onPress:O,variant:"flat",disabled:L,children:"Cancel"}),e.jsx(I,{onPress:T,color:"primary",disabled:!i||L,isLoading:L,children:L?"Uploading...":"Update Picture"})]})]})}):null},Ra=({allUsers:M,departments:g,designations:r,attendanceTypes:x,setUsers:V,isMobile:i,isTablet:Y,pagination:d,onPageChange:K,onRowsPerPageChange:L,totalUsers:ae=0,loading:X=!1,updateEmployeeOptimized:y,deleteEmployeeOptimized:ne})=>{const l=$e(),[o,Z]=n.useState(!1),[G,te]=n.useState(null),[se,xe]=n.useState({}),[H,T]=n.useState(!1),[m,O]=n.useState(null),[P,w]=n.useState(!1),[N,F]=n.useState({isOpen:!1,employee:null}),J=async(t,h)=>{var v,E,$,R,u,A,c,U,W,z,k,B;const S=new Promise(async(f,a)=>{try{if((await le.post(route("user.updateDepartment",{id:t}),{department:h})).status===200){const p=g.find(b=>b.id===parseInt(h))||null;y==null||y(t,{department_id:h,department_name:(p==null?void 0:p.name)||null,designation_id:null,designation_name:null}),f("Department updated successfully")}}catch(s){console.error("Error updating department:",s),a("Failed to update department")}});ee.promise(S,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(me,{size:16}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating department..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((v=l.glassCard)==null?void 0:v.background)||"rgba(15, 20, 25, 0.15)",border:((E=l.glassCard)==null?void 0:E.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((R=($=l.palette)==null?void 0:$.text)==null?void 0:R.primary)||"#ffffff"}},success:{render({data:f}){return e.jsx("div",{children:f})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:((u=l.glassCard)==null?void 0:u.background)||"rgba(15, 20, 25, 0.15)",border:((A=l.glassCard)==null?void 0:A.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((U=(c=l.palette)==null?void 0:c.text)==null?void 0:U.primary)||"#ffffff"}},error:{render({data:f}){return e.jsx("div",{children:f})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:((W=l.glassCard)==null?void 0:W.background)||"rgba(15, 20, 25, 0.15)",border:((z=l.glassCard)==null?void 0:z.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((B=(k=l.palette)==null?void 0:k.text)==null?void 0:B.primary)||"#ffffff"}}})},_=async(t,h)=>{var v,E,$,R,u,A,c,U,W,z,k,B;const S=new Promise(async(f,a)=>{try{if((await le.post(route("user.updateDesignation",{id:t}),{designation_id:h})).status===200){const p=r.find(b=>b.id===parseInt(h))||null;y==null||y(t,{designation_id:h,designation_name:(p==null?void 0:p.title)||null}),f("Designation updated successfully")}}catch(s){console.error("Error updating designation:",s),a("Failed to update designation")}});ee.promise(S,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(me,{size:16}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating designation..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((v=l.glassCard)==null?void 0:v.background)||"rgba(15, 20, 25, 0.15)",border:((E=l.glassCard)==null?void 0:E.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((R=($=l.palette)==null?void 0:$.text)==null?void 0:R.primary)||"#ffffff"}},success:{render({data:f}){return e.jsx("div",{children:f})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:((u=l.glassCard)==null?void 0:u.background)||"rgba(15, 20, 25, 0.15)",border:((A=l.glassCard)==null?void 0:A.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((U=(c=l.palette)==null?void 0:c.text)==null?void 0:U.primary)||"#ffffff"}},error:{render({data:f}){return e.jsx("div",{children:f})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:((W=l.glassCard)==null?void 0:W.background)||"rgba(15, 20, 25, 0.15)",border:((z=l.glassCard)==null?void 0:z.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((B=(k=l.palette)==null?void 0:k.text)==null?void 0:B.primary)||"#ffffff"}}})},D=async(t,h)=>{var v,E,$,R,u,A,c,U,W,z,k,B;const S=new Promise(async(f,a)=>{try{if((await le.post(route("user.updateAttendanceType",{id:t}),{attendance_type_id:h})).status===200){const p=x.find(b=>b.id===parseInt(h))||null;y&&y(t,{attendance_type_id:h,attendance_type_name:(p==null?void 0:p.name)||null}),f("Attendance type updated successfully")}}catch(s){console.error("Error updating attendance type:",s),a("Failed to update attendance type")}});ee.promise(S,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(me,{size:16}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating attendance type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((v=l.glassCard)==null?void 0:v.background)||"rgba(15, 20, 25, 0.15)",border:((E=l.glassCard)==null?void 0:E.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((R=($=l.palette)==null?void 0:$.text)==null?void 0:R.primary)||"#ffffff"}},success:{render({data:f}){return e.jsx("div",{children:f})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:((u=l.glassCard)==null?void 0:u.background)||"rgba(15, 20, 25, 0.15)",border:((A=l.glassCard)==null?void 0:A.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((U=(c=l.palette)==null?void 0:c.text)==null?void 0:U.primary)||"#ffffff"}},error:{render({data:f}){return e.jsx("div",{children:f})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:((W=l.glassCard)==null?void 0:W.background)||"rgba(15, 20, 25, 0.15)",border:((z=l.glassCard)==null?void 0:z.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((B=(k=l.palette)==null?void 0:k.text)==null?void 0:B.primary)||"#ffffff"}}})},oe=t=>{O(t),T(!0)},ye=async()=>{var h,S,v,E,$,R,u,A,c,U,W,z;if(!m)return;w(!0);const t=new Promise(async(k,B)=>{var f,a,s,p;try{(await le.delete(route("user.delete",{id:m.id}))).status===200&&(ne&&ne(m.id),T(!1),O(null),k("Employee deleted successfully"))}catch(b){console.error("Error deleting employee:",b);let q="Failed to delete employee";((f=b.response)==null?void 0:f.status)===403?q="You do not have permission to delete this employee":((a=b.response)==null?void 0:a.status)===404?q="Employee not found or already deleted":(p=(s=b.response)==null?void 0:s.data)!=null&&p.error&&(q=b.response.data.error),B(q)}finally{w(!1)}});ee.promise(t,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(me,{size:16}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting employee..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((h=l.glassCard)==null?void 0:h.background)||"rgba(15, 20, 25, 0.15)",border:((S=l.glassCard)==null?void 0:S.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((E=(v=l.palette)==null?void 0:v.text)==null?void 0:E.primary)||"#ffffff"}},success:{render({data:k}){return e.jsx("div",{children:k})},icon:"✅",style:{backdropFilter:"blur(16px) saturate(200%)",background:(($=l.glassCard)==null?void 0:$.background)||"rgba(15, 20, 25, 0.15)",border:((R=l.glassCard)==null?void 0:R.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((A=(u=l.palette)==null?void 0:u.text)==null?void 0:A.primary)||"#ffffff"}},error:{render({data:k}){return e.jsx("div",{children:k})},icon:"❌",style:{backdropFilter:"blur(16px) saturate(200%)",background:((c=l.glassCard)==null?void 0:c.background)||"rgba(15, 20, 25, 0.15)",border:((U=l.glassCard)==null?void 0:U.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((z=(W=l.palette)==null?void 0:W.text)==null?void 0:z.primary)||"#ffffff"}}})},Ne=()=>{T(!1),O(null)},de=t=>{F({isOpen:!0,employee:t})},_e=()=>{F({isOpen:!1,employee:null})},ke=(t,h)=>{y&&y(t,{profile_image_url:h})},he=n.useMemo(()=>{const t=[{name:"#",uid:"sl",width:60},{name:"EMPLOYEE",uid:"employee",width:"auto",minWidth:200},{name:"DEPARTMENT",uid:"department",width:180},{name:"DESIGNATION",uid:"designation",width:180},{name:"ACTIONS",uid:"actions",width:80}];return i||t.splice(2,0,{name:"CONTACT",uid:"contact",width:220}),!i&&!Y&&t.splice(t.length-1,0,{name:"ATTENDANCE TYPE",uid:"attendance_type",width:180}),t},[i,Y]),pe=(t,h,S)=>{const v=t[h],R=(d!=null&&d.currentPage&&(d!=null&&d.perPage)?Number((d.currentPage-1)*d.perPage):0)+(typeof S=="number"?S:0)+1;switch(h){case"sl":return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e.jsx("span",{className:"text-sm font-semibold text-foreground",children:R})})});case"employee":return e.jsxs("div",{className:"min-w-max",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{src:(t==null?void 0:t.profile_image_url)||(t==null?void 0:t.profile_image),name:t==null?void 0:t.name,size:i?"sm":"md",onClick:()=>de(t)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"font-semibold text-foreground text-left whitespace-nowrap",children:t==null?void 0:t.name}),!i&&e.jsxs("p",{className:"text-default-500 text-left text-xs whitespace-nowrap",children:["ID: ",(t==null?void 0:t.employee_id)||"N/A"]})]})]}),i&&e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(ga,{className:"w-3 h-3"}),(t==null?void 0:t.employee_id)||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(Re,{className:"w-3 h-3"}),t==null?void 0:t.phone]})]})]});case"contact":return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Re,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:t==null?void 0:t.phone})]})]});case"department":return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(fe,{children:[e.jsx(be,{children:e.jsx(I,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e.jsx(we,{className:"w-4 h-4"}),endContent:e.jsx(je,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:t.department_name||"Select Department"})})}),e.jsx(ue,{"aria-label":"Department options",children:g==null?void 0:g.map(c=>e.jsx(ce,{onPress:()=>J(t.id,c.id),children:c.name},c.id.toString()))})]})});case"designation":const u=t.department_id,A=(r==null?void 0:r.filter(c=>c.department_id===parseInt(u)))||[];return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(fe,{isDisabled:!u,children:[e.jsx(be,{children:e.jsx(I,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[150px] transition-all duration-300 ${u?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,isDisabled:!u,startContent:e.jsx(ve,{className:"w-4 h-4"}),endContent:u&&e.jsx(je,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:u?t.designation_name||"Select Designation":"Select Department First"})})}),e.jsx(ue,{"aria-label":"Designation options",children:A.map(c=>e.jsx(ce,{onPress:()=>_(t.id,c.id),children:c.title},c.id.toString()))})]})});case"attendance_type":return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(fe,{children:[e.jsx(be,{children:e.jsx(I,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e.jsx(Se,{className:"w-4 h-4"}),endContent:e.jsx(je,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:t.attendance_type_name||"Select Type"})})}),e.jsx(ue,{"aria-label":"Attendance Type options",children:x==null?void 0:x.map(c=>e.jsx(ce,{onPress:()=>D(t.id,c.id),children:c.name},c.id.toString()))})]})});case"actions":return e.jsx("div",{className:"relative flex justify-center items-center",children:e.jsxs(fe,{children:[e.jsx(be,{children:e.jsx(I,{isIconOnly:!0,variant:"light",className:"text-default-400 hover:text-foreground transition-all duration-300",children:e.jsx(je,{className:"w-5 h-5"})})}),e.jsxs(ue,{"aria-label":"Employee Actions",children:[e.jsx(ce,{startContent:e.jsx(qe,{className:"w-4 h-4"}),onPress:()=>De.visit(route("profile",{user:t.id})),children:"Edit Profile"},"edit"),e.jsx(ce,{className:"text-danger",color:"danger",startContent:e.jsx(Me,{className:"w-4 h-4"}),onPress:()=>oe(t),children:"Delete"},"delete")]})]})});default:return v}},ge=()=>!d||X?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10 bg-white/5 backdrop-blur-md",children:[e.jsxs("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(d.currentPage-1)*d.perPage+1," to ",Math.min(d.currentPage*d.perPage,d.total)," of ",d.total," employees"]}),e.jsx(Qe,{total:Math.ceil(d.total/d.perPage),initialPage:d.currentPage,page:d.currentPage,onChange:K,size:i?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]});return e.jsxs("div",{className:"w-full overflow-hidden flex flex-col border border-white/10 rounded-lg relative",style:{maxHeight:"calc(100vh - 200px)"},children:[X&&e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-xs flex items-center justify-center z-50 rounded-lg",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:[e.jsx(Be,{size:"lg",color:"primary"}),e.jsx("span",{className:"text-sm text-foreground",children:"Loading employees..."})]})}),e.jsx("div",{className:"overflow-auto grow",children:e.jsxs(fa,{"aria-label":"Employees table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs sticky top-0 z-10 whitespace-nowrap",td:"border-b border-white/5 py-3 whitespace-nowrap",table:"border-collapse table-auto",thead:"bg-white/5",tr:"hover:bg-white/5"},isHeaderSticky:!0,isCompact:i,children:[e.jsx(ba,{columns:he,children:t=>e.jsx(ua,{align:t.uid==="actions"||t.uid==="sl"?"center":"start",width:t.width,minWidth:t.minWidth,className:t.uid==="employee"?"whitespace-nowrap":"",children:t.name},t.uid)}),e.jsx(ja,{items:M||[],emptyContent:"No employees found",loadingContent:e.jsx(Be,{}),isLoading:X,children:(t,h)=>{const S=M?M.findIndex(v=>v.id===t.id):h;return e.jsx(wa,{className:"transition-all duration-300 hover:bg-white/5",children:v=>e.jsx(va,{className:"transition-all duration-300",children:e.jsx("div",{className:"transition-all duration-200",children:pe(t,v,S)})})},t.id)}})]})}),ge(),e.jsx(Da,{open:H,onClose:Ne,employee:m,onConfirm:ye,loading:P}),e.jsx(Sa,{isOpen:N.isOpen,onClose:_e,employee:N.employee,onImageUpdate:ke})]})},Aa=({title:M,departments:g,designations:r,attendanceTypes:x})=>{var he,pe,ge,t,h,S,v,E,$,R,u,A,c,U,W,z,k,B,f;const V=$e(),i=He(V.breakpoints.down("sm")),Y=He(V.breakpoints.down("md")),[d,K]=n.useState([]),[L,ae]=n.useState(!0),[X,y]=n.useState(0),[ne,l]=n.useState(1),[o,Z]=n.useState({search:"",department:"all",designation:"all",attendanceType:"all"}),[G,te]=n.useState("table"),[se,xe]=n.useState(!1),[H,T]=n.useState({currentPage:1,perPage:10,total:0}),[m,O]=n.useState({overview:{total_employees:0,active_employees:0,inactive_employees:0,total_departments:0,total_designations:0,total_attendance_types:0},distribution:{by_department:[],by_designation:[],by_attendance_type:[]},hiring_trends:{recent_hires:{last_30_days:0,last_90_days:0,last_year:0},monthly_growth_rate:0,current_month_hires:0},workforce_health:{status_ratio:{active_percentage:0,inactive_percentage:0,retention_rate:0},retention_rate:0,turnover_rate:0},quick_metrics:{headcount:0,active_ratio:0,department_diversity:0,role_diversity:0,recent_activity:0}}),P=n.useCallback(async()=>{ae(!0);try{const{data:a}=await le.get(route("employees.paginate"),{params:{page:H.currentPage,perPage:H.perPage,search:o.search,department:o.department,designation:o.designation,attendanceType:o.attendanceType}});K(a.employees.data),y(a.employees.total),l(a.employees.last_page),T(s=>({...s,total:a.employees.total})),a.stats&&O(a.stats)}catch(a){console.error("Error fetching employees:",a),ee.error("Failed to load employees data")}finally{ae(!1)}},[H.currentPage,H.perPage,o]),w=n.useCallback(async()=>{try{const{data:a}=await le.get(route("employees.stats"));a.stats&&O(a.stats)}catch(a){console.error("Error fetching employee stats:",a)}},[]);n.useEffect(()=>{P(),w()},[P,w]);const N=n.useCallback(a=>{Z(s=>({...s,search:a})),T(s=>({...s,currentPage:1}))},[]),F=n.useCallback(a=>{Z(s=>({...s,department:a,designation:a!=="all"?"all":s.designation})),T(s=>({...s,currentPage:1}))},[]),J=n.useCallback(a=>{Z(s=>({...s,designation:a})),T(s=>({...s,currentPage:1}))},[]),_=n.useCallback(a=>{Z(s=>({...s,attendanceType:a})),T(s=>({...s,currentPage:1}))},[]),D=n.useCallback(a=>{T(s=>({...s,currentPage:a}))},[]),oe=n.useCallback(a=>{T(s=>({...s,perPage:a,currentPage:1}))},[]),ye=n.useCallback((a,s)=>{K(p=>p.map(b=>b.id===a?{...b,...s}:b))},[]),Ne=n.useCallback(a=>{K(s=>s.filter(p=>p.id!==a)),y(s=>s-1),T(s=>({...s,total:s.total-1})),w()},[w]),de=n.useMemo(()=>o.department==="all"?r:r.filter(a=>a.department_id===parseInt(o.department)),[r,o.department]),_e=n.useMemo(()=>{var a,s,p,b,q,Q,Le,Te,Ue,We,ze;return[{title:"Total Employees",value:((a=m.overview)==null?void 0:a.total_employees)||0,icon:e.jsx(Pe,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Headcount"},{title:"Active Employees",value:((s=m.overview)==null?void 0:s.active_employees)||0,icon:e.jsx(Xe,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((b=(p=m.workforce_health)==null?void 0:p.status_ratio)==null?void 0:b.active_percentage)||0}% Active`},{title:"Departments",value:((q=m.overview)==null?void 0:q.total_departments)||0,icon:e.jsx(we,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Department Diversity"},{title:"Designations",value:((Q=m.overview)==null?void 0:Q.total_designations)||0,icon:e.jsx(ve,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Role Diversity"},{title:"Retention Rate",value:`${((Le=m.workforce_health)==null?void 0:Le.retention_rate)||0}%`,icon:e.jsx(ya,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Employee Retention"},{title:"Recent Hires",value:((Ue=(Te=m.hiring_trends)==null?void 0:Te.recent_hires)==null?void 0:Ue.last_30_days)||0,icon:e.jsx(Oe,{}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 Days"},{title:"Growth Rate",value:`${((We=m.hiring_trends)==null?void 0:We.monthly_growth_rate)||0}%`,icon:e.jsx(Na,{}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Monthly Growth"},{title:"Attendance Types",value:((ze=m.overview)==null?void 0:ze.total_attendance_types)||0,icon:e.jsx(Se,{}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Available Types"}]},[m]),ke=({user:a,index:s})=>{const p=g==null?void 0:g.find(Q=>Q.id===a.department_id),b=r==null?void 0:r.find(Q=>Q.id===a.designation_id),q=x==null?void 0:x.find(Q=>Q.id===a.attendance_type_id);return e.jsx(Ye,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>De.visit(route("profile",{user:a.id})),children:e.jsxs(Ze,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(Ee,{src:(a==null?void 0:a.profile_image_url)||(a==null?void 0:a.profile_image),name:a==null?void 0:a.name,size:"md",fallback:e.jsx(Ke,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-semibold text-foreground text-left text-sm",children:a==null?void 0:a.name}),e.jsxs("span",{className:"text-default-500 text-left text-xs",children:["ID: ",(a==null?void 0:a.employee_id)||"N/A"]})]}),e.jsx("div",{className:"flex-1 min-w-0 flex justify-end",children:e.jsx(I,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:Q=>{Q.stopPropagation(),De.visit(route("profile",{user:a.id}))},children:e.jsx(qe,{className:"w-4 h-4"})})})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-3",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs truncate",children:a==null?void 0:a.email})]}),(a==null?void 0:a.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Re,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs",children:a==null?void 0:a.phone})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[p&&e.jsx(re,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e.jsx(we,{className:"w-3 h-3"}),children:p.name}),b&&e.jsx(re,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e.jsx(ve,{className:"w-3 h-3"}),children:b.title}),q&&e.jsx(re,{size:"sm",variant:"bordered",className:"text-xs",startContent:e.jsx(Se,{className:"w-3 h-3"}),children:q.name})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(ea,{title:M}),e.jsx(C,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(ta,{in:!0,timeout:800,children:e.jsx(na,{children:e.jsx(oa,{title:"Employee Directory",subtitle:"Manage employee information, departments, and designations",icon:e.jsx(Pe,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:i?"Add":"Add Employee",icon:e.jsx(Oe,{className:"w-4 h-4"}),className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}],children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(da,{stats:_e,className:"mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx(j,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Department Distribution"}),e.jsx("div",{className:"space-y-3",children:(pe=(he=m.distribution)==null?void 0:he.by_department)==null?void 0:pe.slice(0,5).map((a,s)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:a.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-linear-to-r from-blue-500 to-purple-500 rounded-full",style:{width:`${a.percentage}%`}})}),e.jsx("span",{className:"text-xs text-default-500 w-8",children:a.count})]})]},s))})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx(j,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Hiring Trends"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Last 30 Days"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((t=(ge=m.hiring_trends)==null?void 0:ge.recent_hires)==null?void 0:t.last_30_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Last 90 Days"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((S=(h=m.hiring_trends)==null?void 0:h.recent_hires)==null?void 0:S.last_90_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"This Year"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((E=(v=m.hiring_trends)==null?void 0:v.recent_hires)==null?void 0:E.last_year)||0})]}),e.jsx("div",{className:"pt-2 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Monthly Growth"}),e.jsxs("span",{className:`text-sm font-medium ${((($=m.hiring_trends)==null?void 0:$.monthly_growth_rate)||0)>=0?"text-green-400":"text-red-400"}`,children:[((R=m.hiring_trends)==null?void 0:R.monthly_growth_rate)||0,"%"]})]})})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx(j,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Workforce Health"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Retention Rate"}),e.jsxs("span",{className:"text-sm font-medium text-green-400",children:[((u=m.workforce_health)==null?void 0:u.retention_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Turnover Rate"}),e.jsxs("span",{className:"text-sm font-medium text-orange-400",children:[((A=m.workforce_health)==null?void 0:A.turnover_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Active Employees"}),e.jsxs("span",{className:"text-sm font-medium text-blue-400",children:[((U=(c=m.workforce_health)==null?void 0:c.status_ratio)==null?void 0:U.active_percentage)||0,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx(j,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Attendance Types"}),e.jsx("div",{className:"space-y-3",children:(z=(W=m.distribution)==null?void 0:W.by_attendance_type)==null?void 0:z.map((a,s)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:a.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-linear-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${a.percentage}%`}})}),e.jsx("span",{className:"text-xs text-default-500 w-8",children:a.count})]})]},s))})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ca,{label:"Search Employees",variant:"bordered",placeholder:"Search by name, email, or employee ID...",value:o.search,onValueChange:N,startContent:e.jsx(sa,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:i?"sm":"md"})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(Pa,{variant:"bordered",className:"bg-white/5",children:[e.jsxs(I,{isIconOnly:i,color:G==="table"?"primary":"default",onPress:()=>te("table"),className:G==="table"?"bg-blue-500/20":"",children:[e.jsx(_a,{className:"w-4 h-4"}),!i&&e.jsx("span",{className:"ml-1",children:"Table"})]}),e.jsxs(I,{isIconOnly:i,color:G==="grid"?"primary":"default",onPress:()=>te("grid"),className:G==="grid"?"bg-blue-500/20":"",children:[e.jsx(ra,{className:"w-4 h-4"}),!i&&e.jsx("span",{className:"ml-1",children:"Grid"})]})]}),e.jsxs(I,{isIconOnly:i,variant:"bordered",onPress:()=>xe(!se),className:se?"bg-purple-500/20":"bg-white/5",children:[e.jsx(ka,{className:"w-4 h-4"}),!i&&e.jsx("span",{className:"ml-1",children:"Filters"})]})]})]}),se&&e.jsx(ia,{in:!0,timeout:300,children:e.jsxs("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(Fe,{label:"Department",variant:"bordered",selectedKeys:o.department!=="all"?[o.department]:[],onSelectionChange:a=>{const s=Array.from(a)[0]||"all";F(s)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e.jsx(ie,{value:"all",children:"All Departments"},"all"),g==null?void 0:g.map(a=>e.jsx(ie,{value:a.id.toString(),children:a.name},a.id.toString()))]}),e.jsxs(Fe,{label:"Designation",variant:"bordered",selectedKeys:o.designation!=="all"?[o.designation]:[],onSelectionChange:a=>{const s=Array.from(a)[0]||"all";J(s)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e.jsx(ie,{value:"all",children:"All Designations"},"all"),de==null?void 0:de.map(a=>e.jsx(ie,{value:a.id.toString(),children:a.title},a.id.toString()))]}),!i&&e.jsxs(Fe,{label:"Attendance Type",variant:"bordered",selectedKeys:o.attendanceType!=="all"?[o.attendanceType]:[],onSelectionChange:a=>{const s=Array.from(a)[0]||"all";_(s)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e.jsx(ie,{value:"all",children:"All Attendance Types"},"all"),x==null?void 0:x.map(a=>e.jsx(ie,{value:a.id.toString(),children:a.name},a.id.toString()))]})]}),(o.search||o.department!=="all"||o.designation!=="all"||o.attendanceType!=="all")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[o.search&&e.jsxs(re,{variant:"flat",color:"primary",size:"sm",onClose:()=>Z(a=>({...a,search:""})),children:["Search: ",o.search]}),o.department!=="all"&&e.jsxs(re,{variant:"flat",color:"secondary",size:"sm",onClose:()=>Z(a=>({...a,department:"all"})),children:["Department: ",(k=g==null?void 0:g.find(a=>a.id===parseInt(o.department)))==null?void 0:k.name]}),o.designation!=="all"&&e.jsxs(re,{variant:"flat",color:"warning",size:"sm",onClose:()=>Z(a=>({...a,designation:"all"})),children:["Designation: ",(B=r==null?void 0:r.find(a=>a.id===parseInt(o.designation)))==null?void 0:B.title]}),o.attendanceType!=="all"&&e.jsxs(re,{variant:"flat",color:"success",size:"sm",onClose:()=>Z(a=>({...a,attendanceType:"all"})),children:["Attendance: ",(f=x==null?void 0:x.find(a=>a.id===parseInt(o.attendanceType)))==null?void 0:f.name]})]})]})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs(j,{variant:"h6",className:"font-semibold text-foreground",children:[G==="table"?"Employee Table":"Employee Grid",e.jsxs("span",{className:"text-sm text-default-500 ml-2",children:["(",X," ",X===1?"employee":"employees",")"]})]})}),L?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(me,{size:40}),e.jsx(j,{className:"mt-4",color:"textSecondary",children:"Loading employees data..."})]}):G==="table"?e.jsx(Ra,{allUsers:d,departments:g,designations:r,attendanceTypes:x,setUsers:K,isMobile:i,isTablet:Y,pagination:H,onPageChange:D,onRowsPerPageChange:oe,totalUsers:X,loading:L,updateEmployeeOptimized:ye,deleteEmployeeOptimized:Ne}):e.jsxs("div",{className:"p-4",children:[d.length>0?e.jsx("div",{className:`grid gap-4 ${i?"grid-cols-1":Y?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:d.map((a,s)=>e.jsx(ke,{user:a,index:s},a.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Pe,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e.jsx(j,{variant:"body1",color:"textSecondary",children:"No employees found"}),e.jsx(j,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),d.length>0&&e.jsx("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e.jsx(Qe,{total:Math.ceil(X/H.perPage),initialPage:H.currentPage,page:H.currentPage,onChange:D,size:i?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})})]})};Aa.layout=M=>e.jsx(la,{children:M});export{Aa as default};
