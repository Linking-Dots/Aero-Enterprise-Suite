import{r as n,j as e,b as R,c as Be,d as Ge,a as se,H as re,S as Ce,Q as Je}from"./app-CFOXYWdD.js";import{m as Ke,k as Qe,I as Xe,J as qe,P as Re,j as je,K as we,d as V,H as ze,o as et,B as q,v as pe,w as ge,x as fe,y as de,g as Fe,z as De,b as ke,c as tt,D as at,s as Pe,l as ne,A as st}from"./App-D44H3aE5.js";import{u as Oe,m as Te,G as rt}from"./logo-AMLCgbkx.js";import{P as lt}from"./PageHeader-DIUdhN7v.js";import{S as nt}from"./StatsCards-GNCJc6Af.js";import{G as it}from"./GlassDialog-CB1Z5Bs0.js";import{F as be}from"./ExclamationTriangleIcon-Kx82ewut.js";import{F as Ae}from"./TrashIcon-DmAagIVq.js";import{m as ot}from"./chunk-O5MCAK4F-b1RtXOOP.js";import{F as He}from"./UserIcon-B8KaJTnW.js";import{F as Ve}from"./CheckCircleIcon-WfVI_0Z3.js";import{p as dt}from"./chunk-XVMALT6H-Co81wkzk.js";import{F as ue}from"./EllipsisVerticalIcon-C5p9jyC7.js";import{F as Ye}from"./PencilIcon-BxC4n9WJ.js";import{F as Se}from"./EnvelopeIcon-DJsx2AYc.js";import{F as ct}from"./HashtagIcon-ByCLeTy1.js";import{t as mt,a as xt,b as ht,c as pt}from"./chunk-F3UDT23P-DfyL8aGa.js";import{t as gt}from"./chunk-YRZGWF2W-CVS3z9wo.js";import{t as ft}from"./chunk-TSPNSPCL-CDimUInN.js";import{p as Ze}from"./chunk-EAPQ7RWQ-CTPnoxCw.js";import{F as ut}from"./TrophyIcon-6L7vcMoJ.js";import{F as Ue}from"./UserPlusIcon-DEOIqm7-.js";import{F as bt}from"./ChartBarIcon-COx860cq.js";import{F as jt}from"./TableCellsIcon-KaLKNQw_.js";import{F as wt}from"./AdjustmentsHorizontalIcon-CN9Y28v6.js";import{i as Nt}from"./chunk-SSA7SXE4-B38lyIff.js";import{b as vt}from"./chunk-57V4RE7B-L7qqUn1Q.js";import"./ShieldCheckIcon-DfAiaKpT.js";import"./create-visual-element-DL7V4SzU.js";import"./chunk-D5XJWRAV-Bs0mRdwq.js";import"./index-Ds9JD08j.js";import"./NumberFormatter-DNR9MAW-.js";import"./index-CaGcrq76.js";import"./useHasTabbableChild-Bti5CcwH.js";import"./index-CokAva9Y.js";function yt({title:I,titleId:g,...r},x){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":g},r),I?n.createElement("title",{id:g},I):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const We=n.forwardRef(yt),_t=({open:I,onClose:g,employee:r,onConfirm:x,loading:Q=!1})=>{if(Oe(),!r)return null;const o=r.active_projects_count>0||r.pending_leaves_count>0||r.active_trainings_count>0;return e.jsx(Ke,{isOpen:I,onClose:g,size:"2xl",classNames:{backdrop:"bg-black/50 backdrop-blur-sm",base:"border border-white/20 bg-white/90 backdrop-blur-md",header:"border-b border-danger/30 bg-gradient-to-r from-danger-50/50 to-danger-100/30",body:"py-0",footer:"border-t border-white/10 bg-white/5"},children:e.jsxs(Qe,{children:[e.jsx(Xe,{className:"flex items-center gap-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-danger",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-danger/20 to-danger/10 flex items-center justify-center border border-danger/30",children:e.jsx(be,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Delete Employee"})]})}),e.jsxs(qe,{children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 backdrop-blur-2xl border border-white/10 mb-6 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx(Re,{src:r.profile_image_url||r.profile_image,name:r.name,size:"lg",className:"ring-2 ring-white/20 shadow-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:r.name}),e.jsx("p",{className:"text-sm text-default-500",children:r.email}),r.employee_id&&e.jsxs("span",{className:"inline-block mt-1 px-3 py-1 text-xs rounded-lg bg-white/10 border border-white/10",children:["ID: ",r.employee_id]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(je,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Department"})]}),e.jsx("p",{className:"text-sm font-medium",children:r.department_name||"Not assigned"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(we,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Designation"})]}),e.jsx("p",{className:"text-sm font-medium",children:r.designation_name||"Not assigned"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 rounded-2xl bg-danger-50/50 backdrop-blur-2xl border border-danger/30",children:e.jsxs("div",{className:"flex items-center gap-3 text-danger",children:[e.jsx(be,{className:"w-5 h-5"}),e.jsx("p",{className:"text-sm font-medium",children:"This action will permanently delete the employee record and cannot be undone."})]})}),o&&e.jsxs("div",{className:"p-6 rounded-2xl bg-warning-50/50 backdrop-blur-2xl border border-warning/30 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-warning/20 flex items-center justify-center",children:e.jsx(be,{className:"w-4 h-4 text-warning"})}),e.jsx("h4",{className:"text-sm font-semibold text-warning",children:"Employee Has Active Data"})]}),e.jsx("p",{className:"text-sm text-default-500 mb-4",children:"This employee has the following active records that will also be affected:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.active_projects_count>0&&e.jsxs(V,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[r.active_projects_count," Active Projects"]}),r.pending_leaves_count>0&&e.jsxs(V,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[r.pending_leaves_count," Pending Leaves"]}),r.active_trainings_count>0&&e.jsxs(V,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[r.active_trainings_count," Active Trainings"]})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 border border-white/10 mb-4",children:[e.jsxs("p",{className:"text-sm mb-2 font-medium",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-danger font-semibold",children:r.name}),"?"]}),e.jsx("p",{className:"text-xs text-default-500",children:"Type the employee's name below to confirm this permanent deletion:"})]})]}),e.jsxs(ot,{className:"flex justify-between px-6 py-6 bg-white/5",children:[e.jsx(R,{variant:"light",onPress:g,isDisabled:Q,className:"hover:bg-white/10",children:"Cancel"}),e.jsx(R,{color:"danger",variant:"solid",onPress:x,isLoading:Q,startContent:!Q&&e.jsx(Ae,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-danger to-danger-600 hover:from-danger-600 hover:to-danger-700 shadow-lg",children:Q?"Deleting...":"Delete Employee"})]})]})})},kt=({isOpen:I,onClose:g,employee:r,onImageUpdate:x})=>{const Q=n.useRef(null),[o,X]=n.useState(null),[d,Y]=n.useState(null),[M,ee]=n.useState(!1),[Z,N]=n.useState(0),[le,l]=n.useState(""),i=2*1024*1024,O=["image/jpeg","image/jpg","image/png","image/webp"],W=100,te=2e3,ae=(r==null?void 0:r.profile_image_url)||null,ce=ae&&ae!==null,B=k=>{const j=k.target.files[0];if(!j)return;if(l(""),!O.includes(j.type)){l("Invalid file type. Please select a JPEG, PNG, or WebP image.");return}if(j.size>i){l(`File too large. Maximum size is ${i/1024/1024}MB.`);return}const v=new Image;v.onload=()=>{if(v.width<W||v.height<W){l(`Image dimensions too small. Minimum size is ${W}x${W} pixels.`);return}if(v.width>te||v.height>te){l(`Image dimensions too large. Maximum size is ${te}x${te} pixels.`);return}X(j),Y(URL.createObjectURL(j))},v.onerror=()=>{l("Invalid image file.")},v.src=URL.createObjectURL(j)},$=async()=>{var j,v,P,H;if(!o||!r)return;ee(!0),N(0),l("");const k=new FormData;k.append("profile_image",o),k.append("user_id",r.id);try{const y=await se.post(route("profile.image.upload"),k,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:C=>{const ie=Math.round(C.loaded*100/C.total);N(ie)}});if(y.data.success){if(q.success(y.data.message||"Profile picture updated successfully!"),x){const C=y.data.profile_image_url;x(r.id,C)}G()}else throw new Error(y.data.message||"Upload failed")}catch(y){console.error("Upload error:",y);let C="Failed to upload profile picture";((j=y.response)==null?void 0:j.status)===413?C="File too large. Please choose a smaller image.":((v=y.response)==null?void 0:v.status)===422?C=y.response.data.message||"Validation failed":(H=(P=y.response)==null?void 0:P.data)!=null&&H.message?C=y.response.data.message:y.message&&(C=y.message),l(C),q.error(C)}finally{ee(!1),N(0)}},m=async()=>{var j,v;if(!r)return;ee(!0),l("");const k=new FormData;k.append("user_id",r.id);try{const P=await se.delete(route("profile.image.remove"),{data:k,headers:{"Content-Type":"multipart/form-data"}});if(P.data.success){if(q.success(P.data.message||"Profile picture removed successfully!"),x){const H=P.data.profile_image_url;x(r.id,H)}G()}else throw new Error(P.data.message||"Remove failed")}catch(P){console.error("Remove error:",P);const H=((v=(j=P.response)==null?void 0:j.data)==null?void 0:v.message)||P.message||"Failed to remove profile picture";l(H),q.error(H)}finally{ee(!1)}},G=()=>{M||(X(null),Y(null),l(""),N(0),d&&URL.revokeObjectURL(d),g())};return r?e.jsx(it,{open:I,closeModal:G,maxWidth:"md",fullWidth:!0,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Update Profile Picture"}),e.jsx("p",{className:"text-sm text-gray-500",children:(r==null?void 0:r.name)||"Employee"})]})]}),e.jsx(R,{isIconOnly:!0,variant:"light",onPress:G,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ze,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(et,{src:d||ae||void 0,name:(r==null?void 0:r.name)||"Employee",size:"lg",className:"w-24 h-24",fallback:e.jsx(He,{className:"w-12 h-12 text-gray-400"})})}),le&&e.jsx(V,{color:"danger",variant:"flat",startContent:e.jsx(be,{className:"w-4 h-4"}),className:"mb-4 w-full",children:le}),M&&e.jsx("div",{className:"mb-4",children:e.jsx(dt,{value:Z,color:"primary",size:"sm",label:"Uploading...",showValueLabel:!0,className:"w-full"})}),e.jsx(Be,{className:"mb-4",children:e.jsxs(Ge,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("input",{ref:Q,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:B,className:"hidden",disabled:M}),e.jsx(R,{onPress:()=>{var k;return(k=Q.current)==null?void 0:k.click()},startContent:e.jsx(We,{className:"w-5 h-5"}),variant:"flat",color:"primary",disabled:M,className:"mb-3",children:"Choose New Picture"}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Supported formats: JPEG, PNG, WebP"}),e.jsx("p",{children:"Maximum size: 2MB"}),e.jsx("p",{children:"Minimum dimensions: 100x100px"}),e.jsx("p",{children:"Maximum dimensions: 2000x2000px"})]})]}),o&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:o.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(o.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(R,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>{X(null),Y(null),l("")},disabled:M,children:e.jsx(ze,{className:"w-4 h-4"})})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[ce&&e.jsx(R,{onPress:m,startContent:e.jsx(Ae,{className:"w-4 h-4"}),color:"danger",variant:"flat",disabled:M,children:"Remove Picture"}),e.jsx(R,{onPress:G,variant:"flat",disabled:M,children:"Cancel"}),e.jsx(R,{onPress:$,color:"primary",disabled:!o||M,isLoading:M,children:M?"Uploading...":"Update Picture"})]})]})}):null},Pt=({allUsers:I,departments:g,designations:r,attendanceTypes:x,setUsers:Q,isMobile:o,isTablet:X,pagination:d,onPageChange:Y,onRowsPerPageChange:M,totalUsers:ee=0,loading:Z=!1,updateEmployeeOptimized:N,deleteEmployeeOptimized:le})=>{const l={glassCard:{background:"rgba(15, 20, 25, 0.15)",border:"1px solid rgba(255, 255, 255, 0.2)"},palette:{text:{primary:"#ffffff"}}},[i,O]=n.useState(!1),[W,te]=n.useState(null),[ae,ce]=n.useState({}),[B,$]=n.useState(!1),[m,G]=n.useState(null),[k,j]=n.useState(!1),[v,P]=n.useState({isOpen:!1,employee:null}),H=async(a,h)=>{var w,A,E,D,b,S,c,L,z,T,_,U;const F=new Promise(async(f,t)=>{try{if((await se.post(route("user.updateDepartment",{id:a}),{department:h})).status===200){const p=g.find(u=>u.id===parseInt(h))||null;N==null||N(a,{department_id:h,department_name:(p==null?void 0:p.name)||null,designation_id:null,designation_name:null}),f("Department updated successfully")}}catch(s){console.error("Error updating department:",s),t("Failed to update department")}});q.promise(F,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(re,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating department..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:(w=l.glassCard)==null?void 0:w.background,border:(A=l.glassCard)==null?void 0:A.border,color:(D=(E=l.palette)==null?void 0:E.text)==null?void 0:D.primary}},success:{render({data:f}){return e.jsx("div",{children:f})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:(b=l.glassCard)==null?void 0:b.background,border:(S=l.glassCard)==null?void 0:S.border,color:(L=(c=l.palette)==null?void 0:c.text)==null?void 0:L.primary}},error:{render({data:f}){return e.jsx("div",{children:f})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:(z=l.glassCard)==null?void 0:z.background,border:(T=l.glassCard)==null?void 0:T.border,color:(U=(_=l.palette)==null?void 0:_.text)==null?void 0:U.primary}}})},y=async(a,h)=>{var w,A,E,D,b,S,c,L,z,T,_,U;const F=new Promise(async(f,t)=>{try{if((await se.post(route("user.updateDesignation",{id:a}),{designation_id:h})).status===200){const p=r.find(u=>u.id===parseInt(h))||null;N==null||N(a,{designation_id:h,designation_name:(p==null?void 0:p.title)||null}),f("Designation updated successfully")}}catch(s){console.error("Error updating designation:",s),t("Failed to update designation")}});q.promise(F,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(re,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating designation..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:(w=l.glassCard)==null?void 0:w.background,border:(A=l.glassCard)==null?void 0:A.border,color:(D=(E=l.palette)==null?void 0:E.text)==null?void 0:D.primary}},success:{render({data:f}){return e.jsx("div",{children:f})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:(b=l.glassCard)==null?void 0:b.background,border:(S=l.glassCard)==null?void 0:S.border,color:(L=(c=l.palette)==null?void 0:c.text)==null?void 0:L.primary}},error:{render({data:f}){return e.jsx("div",{children:f})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:(z=l.glassCard)==null?void 0:z.background,border:(T=l.glassCard)==null?void 0:T.border,color:(U=(_=l.palette)==null?void 0:_.text)==null?void 0:U.primary}}})},C=async(a,h)=>{var w,A,E,D,b,S,c,L,z,T,_,U;const F=new Promise(async(f,t)=>{try{if((await se.post(route("user.updateAttendanceType",{id:a}),{attendance_type_id:h})).status===200){const p=x.find(u=>u.id===parseInt(h))||null;N&&N(a,{attendance_type_id:h,attendance_type_name:(p==null?void 0:p.name)||null}),f("Attendance type updated successfully")}}catch(s){console.error("Error updating attendance type:",s),t("Failed to update attendance type")}});q.promise(F,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(re,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating attendance type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:(w=l.glassCard)==null?void 0:w.background,border:(A=l.glassCard)==null?void 0:A.border,color:(D=(E=l.palette)==null?void 0:E.text)==null?void 0:D.primary}},success:{render({data:f}){return e.jsx("div",{children:f})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:(b=l.glassCard)==null?void 0:b.background,border:(S=l.glassCard)==null?void 0:S.border,color:(L=(c=l.palette)==null?void 0:c.text)==null?void 0:L.primary}},error:{render({data:f}){return e.jsx("div",{children:f})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:(z=l.glassCard)==null?void 0:z.background,border:(T=l.glassCard)==null?void 0:T.border,color:(U=(_=l.palette)==null?void 0:_.text)==null?void 0:U.primary}}})},ie=a=>{G(a),$(!0)},Ne=async()=>{var h,F,w,A,E,D,b,S,c,L,z,T;if(!m)return;j(!0);const a=new Promise(async(_,U)=>{var f,t,s,p;try{(await se.delete(route("user.delete",{id:m.id}))).status===200&&(le&&le(m.id),$(!1),G(null),_("Employee deleted successfully"))}catch(u){console.error("Error deleting employee:",u);let J="Failed to delete employee";((f=u.response)==null?void 0:f.status)===403?J="You do not have permission to delete this employee":((t=u.response)==null?void 0:t.status)===404?J="Employee not found or already deleted":(p=(s=u.response)==null?void 0:s.data)!=null&&p.error&&(J=u.response.data.error),U(J)}finally{j(!1)}});q.promise(a,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(re,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting employee..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:(h=l.glassCard)==null?void 0:h.background,border:(F=l.glassCard)==null?void 0:F.border,color:(A=(w=l.palette)==null?void 0:w.text)==null?void 0:A.primary}},success:{render({data:_}){return e.jsx("div",{children:_})},icon:"âœ…",style:{backdropFilter:"blur(16px) saturate(200%)",background:(E=l.glassCard)==null?void 0:E.background,border:(D=l.glassCard)==null?void 0:D.border,color:(S=(b=l.palette)==null?void 0:b.text)==null?void 0:S.primary}},error:{render({data:_}){return e.jsx("div",{children:_})},icon:"âŒ",style:{backdropFilter:"blur(16px) saturate(200%)",background:(c=l.glassCard)==null?void 0:c.background,border:(L=l.glassCard)==null?void 0:L.border,color:(T=(z=l.palette)==null?void 0:z.text)==null?void 0:T.primary}}})},ve=()=>{$(!1),G(null)},oe=a=>{P({isOpen:!0,employee:a})},ye=()=>{P({isOpen:!1,employee:null})},_e=(a,h)=>{N&&N(a,{profile_image_url:h})},me=n.useMemo(()=>{const a=[{name:"#",uid:"sl",width:60},{name:"EMPLOYEE",uid:"employee",width:"auto",minWidth:200},{name:"DEPARTMENT",uid:"department",width:180},{name:"DESIGNATION",uid:"designation",width:180},{name:"ACTIONS",uid:"actions",width:80}];return o||a.splice(2,0,{name:"CONTACT",uid:"contact",width:220}),!o&&!X&&a.splice(a.length-1,0,{name:"ATTENDANCE TYPE",uid:"attendance_type",width:180}),a},[o,X]),xe=(a,h,F)=>{const w=a[h],D=(d!=null&&d.currentPage&&(d!=null&&d.perPage)?Number((d.currentPage-1)*d.perPage):0)+(typeof F=="number"?F:0)+1;switch(h){case"sl":return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e.jsx("span",{className:"text-sm font-semibold text-foreground",children:D})})});case"employee":return e.jsxs("div",{className:"min-w-max",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{src:(a==null?void 0:a.profile_image_url)||(a==null?void 0:a.profile_image),name:a==null?void 0:a.name,size:o?"sm":"md",onClick:()=>oe(a)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"font-semibold text-foreground text-left whitespace-nowrap",children:a==null?void 0:a.name}),!o&&e.jsxs("p",{className:"text-default-500 text-left text-xs whitespace-nowrap",children:["ID: ",(a==null?void 0:a.employee_id)||"N/A"]})]})]}),o&&e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(ct,{className:"w-3 h-3"}),(a==null?void 0:a.employee_id)||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:a==null?void 0:a.email})]}),(a==null?void 0:a.phone)&&e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(De,{className:"w-3 h-3"}),a==null?void 0:a.phone]})]})]});case"contact":return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Se,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:a==null?void 0:a.email})]}),(a==null?void 0:a.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(De,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:a==null?void 0:a.phone})]})]});case"department":return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(pe,{children:[e.jsx(ge,{children:e.jsx(R,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e.jsx(je,{className:"w-4 h-4"}),endContent:e.jsx(ue,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:a.department_name||"Select Department"})})}),e.jsx(fe,{"aria-label":"Department options",children:g==null?void 0:g.map(c=>e.jsx(de,{onPress:()=>H(a.id,c.id),children:c.name},c.id.toString()))})]})});case"designation":const b=a.department_id,S=(r==null?void 0:r.filter(c=>c.department_id===parseInt(b)))||[];return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(pe,{isDisabled:!b,children:[e.jsx(ge,{children:e.jsx(R,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[150px] transition-all duration-300 ${b?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,isDisabled:!b,startContent:e.jsx(we,{className:"w-4 h-4"}),endContent:b&&e.jsx(ue,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:b?a.designation_name||"Select Designation":"Select Department First"})})}),e.jsx(fe,{"aria-label":"Designation options",children:S.map(c=>e.jsx(de,{onPress:()=>y(a.id,c.id),children:c.title},c.id.toString()))})]})});case"attendance_type":return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(pe,{children:[e.jsx(ge,{children:e.jsx(R,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e.jsx(Fe,{className:"w-4 h-4"}),endContent:e.jsx(ue,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:a.attendance_type_name||"Select Type"})})}),e.jsx(fe,{"aria-label":"Attendance Type options",children:x==null?void 0:x.map(c=>e.jsx(de,{onPress:()=>C(a.id,c.id),children:c.name},c.id.toString()))})]})});case"actions":return e.jsx("div",{className:"relative flex justify-center items-center",children:e.jsxs(pe,{children:[e.jsx(ge,{children:e.jsx(R,{isIconOnly:!0,variant:"light",className:"text-default-400 hover:text-foreground transition-all duration-300",children:e.jsx(ue,{className:"w-5 h-5"})})}),e.jsxs(fe,{"aria-label":"Employee Actions",children:[e.jsx(de,{startContent:e.jsx(Ye,{className:"w-4 h-4"}),onPress:()=>Ce.visit(route("profile",{user:a.id})),children:"Edit Profile"},"edit"),e.jsx(de,{className:"text-danger",color:"danger",startContent:e.jsx(Ae,{className:"w-4 h-4"}),onPress:()=>ie(a),children:"Delete"},"delete")]})]})});default:return w}},he=()=>!d||Z?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10 bg-white/5 backdrop-blur-md",children:[e.jsxs("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(d.currentPage-1)*d.perPage+1," to ",Math.min(d.currentPage*d.perPage,d.total)," of ",d.total," employees"]}),e.jsx(Ze,{total:Math.ceil(d.total/d.perPage),initialPage:d.currentPage,page:d.currentPage,onChange:Y,size:o?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]});return e.jsxs("div",{className:"w-full overflow-hidden flex flex-col border border-white/10 rounded-lg relative",style:{maxHeight:"calc(100vh - 200px)"},children:[Z&&e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-xs flex items-center justify-center z-50 rounded-lg",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:[e.jsx(re,{size:"lg",color:"primary"}),e.jsx("span",{className:"text-sm text-foreground",children:"Loading employees..."})]})}),e.jsx("div",{className:"overflow-auto grow",children:e.jsxs(mt,{"aria-label":"Employees table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs sticky top-0 z-10 whitespace-nowrap",td:"border-b border-white/5 py-3 whitespace-nowrap",table:"border-collapse table-auto",thead:"bg-white/5",tr:"hover:bg-white/5"},isHeaderSticky:!0,isCompact:o,children:[e.jsx(gt,{columns:me,children:a=>e.jsx(ft,{align:a.uid==="actions"||a.uid==="sl"?"center":"start",width:a.width,minWidth:a.minWidth,className:a.uid==="employee"?"whitespace-nowrap":"",children:a.name},a.uid)}),e.jsx(xt,{items:I||[],emptyContent:"No employees found",loadingContent:e.jsx(re,{}),isLoading:Z,children:(a,h)=>{const F=I?I.findIndex(w=>w.id===a.id):h;return e.jsx(ht,{className:"transition-all duration-300 hover:bg-white/5",children:w=>e.jsx(pt,{className:"transition-all duration-300",children:e.jsx("div",{className:"transition-all duration-200",children:xe(a,w,F)})})},a.id)}})]})}),he(),e.jsx(_t,{open:B,onClose:ve,employee:m,onConfirm:Ne,loading:k}),e.jsx(kt,{isOpen:v.isOpen,onClose:ye,employee:v.employee,onImageUpdate:_e})]})},Ct=({title:I,departments:g,designations:r,attendanceTypes:x})=>{var me,xe,he,a,h,F,w,A,E,D,b,S,c,L,z,T,_,U,f;const{theme:Q}=Oe(),[o]=n.useState(window.innerWidth<640),[X]=n.useState(window.innerWidth<768),[d,Y]=n.useState([]),[M,ee]=n.useState(!0),[Z,N]=n.useState(0),[le,l]=n.useState(1),[i,O]=n.useState({search:"",department:"all",designation:"all",attendanceType:"all"}),[W,te]=n.useState("table"),[ae,ce]=n.useState(!1),[B,$]=n.useState({currentPage:1,perPage:10,total:0}),[m,G]=n.useState({overview:{total_employees:0,active_employees:0,inactive_employees:0,total_departments:0,total_designations:0,total_attendance_types:0},distribution:{by_department:[],by_designation:[],by_attendance_type:[]},hiring_trends:{recent_hires:{last_30_days:0,last_90_days:0,last_year:0},monthly_growth_rate:0,current_month_hires:0},workforce_health:{status_ratio:{active_percentage:0,inactive_percentage:0,retention_rate:0},retention_rate:0,turnover_rate:0},quick_metrics:{headcount:0,active_ratio:0,department_diversity:0,role_diversity:0,recent_activity:0}}),k=n.useCallback(async()=>{ee(!0);try{const{data:t}=await se.get(route("employees.paginate"),{params:{page:B.currentPage,perPage:B.perPage,search:i.search,department:i.department,designation:i.designation,attendanceType:i.attendanceType}});Y(t.employees.data),N(t.employees.total),l(t.employees.last_page),$(s=>({...s,total:t.employees.total})),t.stats&&G(t.stats)}catch(t){console.error("Error fetching employees:",t),q.error("Failed to load employees data")}finally{ee(!1)}},[B.currentPage,B.perPage,i]),j=n.useCallback(async()=>{try{const{data:t}=await se.get(route("employees.stats"));t.stats&&G(t.stats)}catch(t){console.error("Error fetching employee stats:",t)}},[]);n.useEffect(()=>{k(),j()},[k,j]);const v=n.useCallback(t=>{O(s=>({...s,search:t})),$(s=>({...s,currentPage:1}))},[]),P=n.useCallback(t=>{O(s=>({...s,department:t,designation:t!=="all"?"all":s.designation})),$(s=>({...s,currentPage:1}))},[]),H=n.useCallback(t=>{O(s=>({...s,designation:t})),$(s=>({...s,currentPage:1}))},[]),y=n.useCallback(t=>{O(s=>({...s,attendanceType:t})),$(s=>({...s,currentPage:1}))},[]),C=n.useCallback(t=>{$(s=>({...s,currentPage:t}))},[]),ie=n.useCallback(t=>{$(s=>({...s,perPage:t,currentPage:1}))},[]),Ne=n.useCallback((t,s)=>{Y(p=>p.map(u=>u.id===t?{...u,...s}:u))},[]),ve=n.useCallback(t=>{Y(s=>s.filter(p=>p.id!==t)),N(s=>s-1),$(s=>({...s,total:s.total-1})),j()},[j]),oe=n.useMemo(()=>i.department==="all"?r:r.filter(t=>t.department_id===parseInt(i.department)),[r,i.department]),ye=n.useMemo(()=>{var t,s,p,u,J,K,Ee,Ie,Me,$e,Le;return[{title:"Total Employees",value:((t=m.overview)==null?void 0:t.total_employees)||0,icon:e.jsx(ke,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Headcount"},{title:"Active Employees",value:((s=m.overview)==null?void 0:s.active_employees)||0,icon:e.jsx(Ve,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((u=(p=m.workforce_health)==null?void 0:p.status_ratio)==null?void 0:u.active_percentage)||0}% Active`},{title:"Departments",value:((J=m.overview)==null?void 0:J.total_departments)||0,icon:e.jsx(je,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Department Diversity"},{title:"Designations",value:((K=m.overview)==null?void 0:K.total_designations)||0,icon:e.jsx(we,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Role Diversity"},{title:"Retention Rate",value:`${((Ee=m.workforce_health)==null?void 0:Ee.retention_rate)||0}%`,icon:e.jsx(ut,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Employee Retention"},{title:"Recent Hires",value:((Me=(Ie=m.hiring_trends)==null?void 0:Ie.recent_hires)==null?void 0:Me.last_30_days)||0,icon:e.jsx(Ue,{}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 Days"},{title:"Growth Rate",value:`${(($e=m.hiring_trends)==null?void 0:$e.monthly_growth_rate)||0}%`,icon:e.jsx(bt,{}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Monthly Growth"},{title:"Attendance Types",value:((Le=m.overview)==null?void 0:Le.total_attendance_types)||0,icon:e.jsx(Fe,{}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Available Types"}]},[m]),_e=({user:t,index:s})=>{const p=g==null?void 0:g.find(K=>K.id===t.department_id),u=r==null?void 0:r.find(K=>K.id===t.designation_id),J=x==null?void 0:x.find(K=>K.id===t.attendance_type_id);return e.jsx(Be,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>Ce.visit(route("profile",{user:t.id})),children:e.jsxs(Ge,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(Re,{src:(t==null?void 0:t.profile_image_url)||(t==null?void 0:t.profile_image),name:t==null?void 0:t.name,size:"md",fallback:e.jsx(He,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-semibold text-foreground text-left text-sm",children:t==null?void 0:t.name}),e.jsxs("span",{className:"text-default-500 text-left text-xs",children:["ID: ",(t==null?void 0:t.employee_id)||"N/A"]})]}),e.jsx("div",{className:"flex-1 min-w-0 flex justify-end",children:e.jsx(R,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:K=>{K.stopPropagation(),Ce.visit(route("profile",{user:t.id}))},children:e.jsx(Ye,{className:"w-4 h-4"})})})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-3",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Se,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs truncate",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(De,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs",children:t==null?void 0:t.phone})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[p&&e.jsx(V,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e.jsx(je,{className:"w-3 h-3"}),children:p.name}),u&&e.jsx(V,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e.jsx(we,{className:"w-3 h-3"}),children:u.title}),J&&e.jsx(V,{size:"sm",variant:"bordered",className:"text-xs",startContent:e.jsx(Fe,{className:"w-3 h-3"}),children:J.name})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(Je,{title:I}),e.jsx("div",{className:"flex justify-center p-2",children:e.jsx(Te.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8},children:e.jsx(rt,{children:e.jsx(lt,{title:"Employee Directory",subtitle:"Manage employee information, departments, and designations",icon:e.jsx(ke,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:o?"Add":"Add Employee",icon:e.jsx(Ue,{className:"w-4 h-4"}),className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}],children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(nt,{stats:ye,className:"mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Department Distribution"}),e.jsx("div",{className:"space-y-3",children:(xe=(me=m.distribution)==null?void 0:me.by_department)==null?void 0:xe.slice(0,5).map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-linear-to-r from-blue-500 to-purple-500 rounded-full",style:{width:`${t.percentage}%`}})}),e.jsx("span",{className:"text-xs text-default-500 w-8",children:t.count})]})]},s))})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Hiring Trends"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Last 30 Days"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((a=(he=m.hiring_trends)==null?void 0:he.recent_hires)==null?void 0:a.last_30_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Last 90 Days"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((F=(h=m.hiring_trends)==null?void 0:h.recent_hires)==null?void 0:F.last_90_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"This Year"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((A=(w=m.hiring_trends)==null?void 0:w.recent_hires)==null?void 0:A.last_year)||0})]}),e.jsx("div",{className:"pt-2 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Monthly Growth"}),e.jsxs("span",{className:`text-sm font-medium ${(((E=m.hiring_trends)==null?void 0:E.monthly_growth_rate)||0)>=0?"text-green-400":"text-red-400"}`,children:[((D=m.hiring_trends)==null?void 0:D.monthly_growth_rate)||0,"%"]})]})})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Workforce Health"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Retention Rate"}),e.jsxs("span",{className:"text-sm font-medium text-green-400",children:[((b=m.workforce_health)==null?void 0:b.retention_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Turnover Rate"}),e.jsxs("span",{className:"text-sm font-medium text-orange-400",children:[((S=m.workforce_health)==null?void 0:S.turnover_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Active Employees"}),e.jsxs("span",{className:"text-sm font-medium text-blue-400",children:[((L=(c=m.workforce_health)==null?void 0:c.status_ratio)==null?void 0:L.active_percentage)||0,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Attendance Types"}),e.jsx("div",{className:"space-y-3",children:(T=(z=m.distribution)==null?void 0:z.by_attendance_type)==null?void 0:T.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-linear-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${t.percentage}%`}})}),e.jsx("span",{className:"text-xs text-default-500 w-8",children:t.count})]})]},s))})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Nt,{label:"Search Employees",placeholder:"Search by name, email, or employee ID...",value:i.search,onChange:t=>v(t.target.value),startContent:e.jsx(tt,{className:"w-4 h-4 text-default-500"}),size:o?"sm":"md",classNames:{base:"max-w-full",mainWrapper:"h-full",input:"text-small",inputWrapper:"h-full bg-white/10 backdrop-blur-md border-white/20 data-[hover=true]:border-white/30 group-data-[focus=true]:border-primary",label:"text-white/70 group-data-[focus=true]:text-primary"}})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(vt,{variant:"bordered",className:"bg-white/5",children:[e.jsxs(R,{isIconOnly:o,color:W==="table"?"primary":"default",onPress:()=>te("table"),className:W==="table"?"bg-blue-500/20":"",children:[e.jsx(jt,{className:"w-4 h-4"}),!o&&e.jsx("span",{className:"ml-1",children:"Table"})]}),e.jsxs(R,{isIconOnly:o,color:W==="grid"?"primary":"default",onPress:()=>te("grid"),className:W==="grid"?"bg-blue-500/20":"",children:[e.jsx(at,{className:"w-4 h-4"}),!o&&e.jsx("span",{className:"ml-1",children:"Grid"})]})]}),e.jsxs(R,{isIconOnly:o,variant:"bordered",onPress:()=>ce(!ae),className:ae?"bg-purple-500/20":"bg-white/5",children:[e.jsx(wt,{className:"w-4 h-4"}),!o&&e.jsx("span",{className:"ml-1",children:"Filters"})]})]})]}),ae&&e.jsx(Te.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:e.jsxs("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(Pe,{label:"Department",placeholder:"Select Department",selectedKeys:i.department==="all"?[]:[i.department],onSelectionChange:t=>{const s=Array.from(t)[0]||"all";P(s)},size:"sm",classNames:{base:"max-w-full",trigger:"bg-white/10 backdrop-blur-md border-white/20 data-[hover=true]:border-white/30 data-[open=true]:border-primary",label:"text-white/70 group-data-[filled=true]:text-primary",value:"text-white/90",selectorIcon:"text-white/70"},popoverProps:{classNames:{base:"bg-white/10 backdrop-blur-md border border-white/20",content:"bg-transparent"}},children:[e.jsx(ne,{value:"all",children:"All Departments"},"all"),g==null?void 0:g.map(t=>e.jsx(ne,{value:t.id.toString(),children:t.name},t.id.toString()))]}),e.jsxs(Pe,{label:"Designation",placeholder:"Select Designation",selectedKeys:i.designation==="all"?[]:[i.designation],onSelectionChange:t=>{const s=Array.from(t)[0]||"all";H(s)},size:"sm",classNames:{base:"max-w-full",trigger:"bg-white/10 backdrop-blur-md border-white/20 data-[hover=true]:border-white/30 data-[open=true]:border-primary",label:"text-white/70 group-data-[filled=true]:text-primary",value:"text-white/90",selectorIcon:"text-white/70"},popoverProps:{classNames:{base:"bg-white/10 backdrop-blur-md border border-white/20",content:"bg-transparent"}},children:[e.jsx(ne,{value:"all",children:"All Designations"},"all"),oe==null?void 0:oe.map(t=>e.jsx(ne,{value:t.id.toString(),children:t.title},t.id.toString()))]}),!o&&e.jsxs(Pe,{label:"Attendance Type",placeholder:"Select Attendance Type",selectedKeys:i.attendanceType==="all"?[]:[i.attendanceType],onSelectionChange:t=>{const s=Array.from(t)[0]||"all";y(s)},size:"sm",classNames:{base:"max-w-full",trigger:"bg-white/10 backdrop-blur-md border-white/20 data-[hover=true]:border-white/30 data-[open=true]:border-primary",label:"text-white/70 group-data-[filled=true]:text-primary",value:"text-white/90",selectorIcon:"text-white/70"},popoverProps:{classNames:{base:"bg-white/10 backdrop-blur-md border border-white/20",content:"bg-transparent"}},children:[e.jsx(ne,{value:"all",children:"All Attendance Types"},"all"),x==null?void 0:x.map(t=>e.jsx(ne,{value:t.id.toString(),children:t.name},t.id.toString()))]})]}),(i.search||i.department!=="all"||i.designation!=="all"||i.attendanceType!=="all")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[i.search&&e.jsxs(V,{variant:"flat",color:"primary",size:"sm",onClose:()=>O(t=>({...t,search:""})),children:["Search: ",i.search]}),i.department!=="all"&&e.jsxs(V,{variant:"flat",color:"secondary",size:"sm",onClose:()=>O(t=>({...t,department:"all"})),children:["Department: ",(_=g==null?void 0:g.find(t=>t.id===parseInt(i.department)))==null?void 0:_.name]}),i.designation!=="all"&&e.jsxs(V,{variant:"flat",color:"warning",size:"sm",onClose:()=>O(t=>({...t,designation:"all"})),children:["Designation: ",(U=r==null?void 0:r.find(t=>t.id===parseInt(i.designation)))==null?void 0:U.title]}),i.attendanceType!=="all"&&e.jsxs(V,{variant:"flat",color:"success",size:"sm",onClose:()=>O(t=>({...t,attendanceType:"all"})),children:["Attendance: ",(f=x==null?void 0:x.find(t=>t.id===parseInt(i.attendanceType)))==null?void 0:f.name]})]})]})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:[W==="table"?"Employee Table":"Employee Grid",e.jsxs("span",{className:"text-sm text-default-500 ml-2",children:["(",Z," ",Z===1?"employee":"employees",")"]})]})}),M?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(re,{size:"lg",color:"primary"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading employees data..."})]}):W==="table"?e.jsx(Pt,{allUsers:d,departments:g,designations:r,attendanceTypes:x,setUsers:Y,isMobile:o,isTablet:X,pagination:B,onPageChange:C,onRowsPerPageChange:ie,totalUsers:Z,loading:M,updateEmployeeOptimized:Ne,deleteEmployeeOptimized:ve}):e.jsxs("div",{className:"p-4",children:[d.length>0?e.jsx("div",{className:`grid gap-4 ${o?"grid-cols-1":X?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:d.map((t,s)=>e.jsx(_e,{user:t,index:s},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ke,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e.jsx("p",{className:"text-base text-default-500",children:"No employees found"}),e.jsx("p",{className:"text-sm text-default-500",children:"Try adjusting your search or filters"})]}),d.length>0&&e.jsx("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e.jsx(Ze,{total:Math.ceil(Z/B.perPage),initialPage:B.currentPage,page:B.currentPage,onChange:C,size:o?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})})]})};Ct.layout=I=>e.jsx(st,{children:I});export{Ct as default};
