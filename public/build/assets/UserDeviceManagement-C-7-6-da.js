import{r as i,j as e,a as $,f as Le,F as B,H as Re,e as f,L as $e}from"./app-B8QYX9Px.js";import{u as de,a as W,B as j,f as Ae,b as Me,y as Oe,c as O,z as ue,H as me,g as Ie,t as H,v as z,w as G,x,I as Pe,A as Te}from"./App-DkF9RL3Y.js";import{u as Ue,B as A,G as k,F as Ee,T as n}from"./logo-BoX8pchB.js";import{G as Be}from"./GlassDialog-w1fMVGB6.js";import{P as We}from"./PageHeader-XJFWVm9P.js";import{S as He}from"./StatsCards-DEVVTSBN.js";import{F as I,a as ze,b as Ge,c as Ve}from"./SignalIcon-DyWSYoJq.js";import{F as Y}from"./CheckCircleIcon-B90VRiLI.js";import{F as Ke}from"./ArrowLeftIcon-B75WqFDX.js";import{F as xe}from"./DocumentArrowDownIcon-JzXafcAn.js";import{G as qe,C as Qe}from"./Grow-DP1KP2ex.js";import{a as Ze}from"./ShieldCheckIcon-RZqgNGJW.js";import{F as Je}from"./LockClosedIcon-BeHuUmSy.js";import{F as Xe}from"./GlobeAltIcon-DOm-BgvY.js";import{T as Ye}from"./TextField-BAa6JqDO.js";import{I as es}from"./InputAdornment-Cc_eLtv_.js";import{F as ss}from"./FunnelIcon-D6AgR1Ej.js";import{F as he}from"./ExclamationTriangleIcon-BW32ASrn.js";import{F as ts}from"./MapPinIcon-D7avcCzM.js";import{F as rs}from"./XCircleIcon-tcb-l3UC.js";import{F as as}from"./EllipsisVerticalIcon-B1J6VG1L.js";import{F as is}from"./EyeIcon-CDre6n7j.js";import{D as ns}from"./DialogTitle-B_yNWDSa.js";import{D as ls,a as cs}from"./DialogContent-DYCSoO7D.js";import{F as os}from"./IdentificationIcon-GpQp7nvt.js";import{t as ds,a as us,b as D,c as ms,d as xs,e as S}from"./chunk-F3UDT23P-Hrzl6yhk.js";import{t as hs}from"./chunk-BOOVDPB6-CftkAAhs.js";import{p as fs}from"./chunk-EAPQ7RWQ-OKuZgSIq.js";import"./EnvelopeIcon-B1M8vjD_.js";import"./UserIcon-D9_80nkG.js";import"./create-visual-element-4S4I33NB.js";import"./Dialog-Bo_XotCr.js";import"./chunk-D5XJWRAV-zQzkTunB.js";import"./Select-8HD_0XQO.js";import"./InputLabel-CehJzubO.js";import"./useHasTabbableChild-CrUAHYqA.js";import"./index-Dxlg9OmP.js";import"./index-CokAva9Y.js";function gs({title:h,titleId:b,..._},w){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:w,"aria-labelledby":b},_),h?i.createElement("title",{id:b},h):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const V=i.forwardRef(gs);function bs({title:h,titleId:b,..._},w){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:w,"aria-labelledby":b},_),h?i.createElement("title",{id:b},h):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 20.25h12m-7.5-3v3m3-3v3m-10.125-3h17.25c.621 0 1.125-.504 1.125-1.125V4.875c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125Z"}))}const ps=i.forwardRef(bs);function vs({title:h,titleId:b,..._},w){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:w,"aria-labelledby":b},_),h?i.createElement("title",{id:b},h):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"}))}const js=i.forwardRef(vs),ws=({title:h,user:b,devices:_})=>{var ne,le,ce,oe;const w=Ue(),N=de(w.breakpoints.down("sm"));de(w.breakpoints.down("md"));const[a,K]=i.useState(b),[d,M]=i.useState(_||[]),[fe,C]=i.useState(!1),[v,F]=i.useState({}),[ee,se]=i.useState(!1),[o,te]=i.useState(null),[ge,re]=i.useState(!1),[l,ae]=i.useState({search:"",status:"all",type:"all",dateRange:"all"}),[q,be]=i.useState(!1),[L,Q]=i.useState({currentPage:1,perPage:10}),p=i.useMemo(()=>{const s=new Date,t=new Date(s.getTime()-300*1e3),r=new Date(s.getTime()-1440*60*1e3),c=d.filter(g=>g.is_active),u=d.filter(g=>g.is_active&&g.last_seen_at&&new Date(g.last_seen_at)>t),m=d.filter(g=>g.last_seen_at&&new Date(g.last_seen_at)>r),E=d.filter(g=>g.user_agent&&g.user_agent.toLowerCase().includes("mobile"));return{total:d.length,active:c.length,online:u.length,recent:m.length,mobile:E.length,desktop:d.length-E.length,inactive:d.length-c.length}},[d]),pe=i.useMemo(()=>[{title:"Total Devices",value:p.total,icon:e.jsx(I,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All registered devices"},{title:"Active Sessions",value:p.active,icon:e.jsx(Y,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Currently active devices"},{title:"Online Now",value:p.online,icon:e.jsx(ze,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Active within 5 minutes"},{title:"Recent Activity",value:p.recent,icon:e.jsx(W,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Active within 24 hours"}],[p]),R=i.useCallback(async()=>{C(!0);try{const s=await $.get(route("users.device.list",{user:a.id}));s.status===200&&(M(s.data.devices||[]),s.data.user&&K(t=>({...t,...s.data.user})))}catch(s){console.error("Error fetching devices:",s),j.error("Failed to fetch device information"),M([])}finally{C(!1)}},[a.id]),ve=i.useCallback(async()=>{se(!0),await R(),se(!1),j.success("Device data refreshed")},[R]),je=i.useCallback(()=>{const s=d.map(m=>({"Device Name":m.device_name||"Unknown","User Agent":m.user_agent,"IP Address":m.ip_address,Location:m.location||"Unknown",Status:m.is_active?"Active":"Inactive","Last Seen":m.last_seen_at?new Date(m.last_seen_at).toLocaleString():"Never",Created:m.created_at?new Date(m.created_at).toLocaleString():"Unknown"})),t=[Object.keys(s[0]||{}).join(","),...s.map(m=>Object.values(m).map(E=>`"${E}"`).join(","))].join(`
`),r=new Blob([t],{type:"text/csv"}),c=window.URL.createObjectURL(r),u=document.createElement("a");u.href=c,u.download=`${a.name}_devices_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(c),j.success("Device data exported successfully")},[d,a.name]),we=i.useMemo(()=>{const s=[];return s.push({label:N?"Back":"Back to Users",icon:e.jsx(Ke,{className:"w-4 h-4"}),onClick:()=>Le.visit(route("users")),variant:"light"}),s.push({label:N?"Refresh":"Refresh Data",icon:e.jsx(B,{className:"w-4 h-4"}),onClick:ve,variant:"flat",color:"primary",isLoading:ee}),p.total>0&&s.push({label:N?"Export":"Export Devices",icon:e.jsx(xe,{className:"w-4 h-4"}),onClick:je,variant:"flat"}),s},[N,p.total,ee]),Ne=async s=>{F(t=>({...t,toggle:!0}));try{const t=await $.post(route("users.device.toggle"),{user_id:a.id,enabled:s});if(t.status===200&&t.data.success){const r={...a,single_device_login:t.data.user.single_device_login,active_device:t.data.user.active_device};K(r),j.success(t.data.message||(s?"Single device login enabled":"Single device login disabled")),C(!0);try{const c=await $.get(route("users.device.list",{user:a.id}));c.status===200&&M(c.data.devices||[])}catch(c){console.error("Error refreshing devices:",c)}finally{C(!1)}}}catch(t){console.error("Error toggling single device login:",t),j.error("Failed to update device settings")}finally{F(t=>({...t,toggle:!1}))}},ye=async()=>{F(s=>({...s,reset:!0}));try{(await $.post(route("users.device.reset"),{user_id:a.id})).status===200&&(K(t=>({...t,active_device:null})),M(t=>t.map(r=>({...r,is_active:!1}))),j.success("User device has been reset"),setTimeout(async()=>{try{C(!0);const t=await $.get(route("users.device.list",{user:a.id}));t.status===200&&M(t.data.devices||[])}catch(t){console.error("Error refreshing devices after reset:",t)}finally{C(!1)}},1e3))}catch(s){console.error("Error resetting user device:",s),j.error("Failed to reset user device")}finally{F(s=>({...s,reset:!1}))}},Z=i.useCallback(async s=>{F(t=>({...t,[`logout_${s}`]:!0}));try{(await $.post(route("users.device.logout"),{user_id:a.id,device_id:s})).status===200&&(j.success("Device logged out successfully"),await R())}catch(t){console.error("Error logging out device:",t),j.error("Failed to logout device")}finally{F(t=>({...t,[`logout_${s}`]:!1}))}},[a.id,R]),y=i.useMemo(()=>{let s=[...d];if(l.search){const t=l.search.toLowerCase();s=s.filter(r=>(r.device_name||"").toLowerCase().includes(t)||(r.user_agent||"").toLowerCase().includes(t)||(r.ip_address||"").toLowerCase().includes(t)||(r.location||"").toLowerCase().includes(t))}if(l.status!=="all"&&(s=s.filter(t=>l.status==="active"?t.is_active:l.status==="inactive"?!t.is_active:!0)),l.type!=="all"&&(s=s.filter(t=>{const r=(t.user_agent||"").toLowerCase();return l.type==="mobile"?r.includes("mobile")||r.includes("android")||r.includes("iphone"):l.type==="desktop"?!(r.includes("mobile")||r.includes("android")||r.includes("iphone")):!0})),l.dateRange!=="all"){const t=new Date;s=s.filter(r=>{if(!r.last_seen_at)return!1;const c=new Date(r.last_seen_at),u=(t-c)/(1e3*60*60);switch(l.dateRange){case"hour":return u<=1;case"day":return u<=24;case"week":return u<=168;case"month":return u<=720;default:return!0}})}return s},[d,l]),_e=i.useMemo(()=>{const s=(L.currentPage-1)*L.perPage,t=s+L.perPage;return y.slice(s,t)},[y,L]),ie=Math.ceil(y.length/L.perPage),P=(s,t)=>{ae(r=>({...r,[s]:t})),Q(r=>({...r,currentPage:1}))},T=(s,t="w-5 h-5")=>{const r=(s||"").toLowerCase();return r.includes("iphone")||r.includes("ipod")?e.jsx(I,{className:`${t} text-default-600`}):r.includes("android")&&r.includes("mobile")?e.jsx(I,{className:`${t} text-default-600`}):r.includes("ipad")||r.includes("android")&&r.includes("tablet")?e.jsx(Ve,{className:`${t} text-default-600`}):r.includes("smart-tv")||r.includes("smarttv")||r.includes("tizen")||r.includes("webos")?e.jsx(ps,{className:`${t} text-default-600`}):e.jsx(me,{className:`${t} text-default-600`})},J=s=>{const t=(s||"").toLowerCase();return t.includes("iphone")||t.includes("ipod")?"iPhone":t.includes("android")&&t.includes("mobile")?"Android Phone":t.includes("ipad")?"iPad":t.includes("android")&&t.includes("tablet")?"Android Tablet":t.includes("smart-tv")||t.includes("smarttv")?"Smart TV":t.includes("windows")?"Windows PC":t.includes("mac")?"Mac":t.includes("linux")?"Linux":"Desktop"},ke=s=>{const t=(s||"").toLowerCase();return t.includes("chrome")&&!t.includes("edg")?"Chrome":t.includes("firefox")?"Firefox":t.includes("safari")&&!t.includes("chrome")?"Safari":t.includes("edg")?"Edge":t.includes("opera")?"Opera":"Unknown Browser"},De=s=>{const t=(s||"").toLowerCase();if(t.includes("windows nt 10"))return"Windows 10/11";if(t.includes("windows nt 6.3"))return"Windows 8.1";if(t.includes("windows nt 6.1"))return"Windows 7";if(t.includes("windows"))return"Windows";if(t.includes("mac os x")){const r=t.match(/mac os x ([0-9_]+)/);return r?`macOS ${r[1].replace(/_/g,".")}`:"macOS"}if(t.includes("android")){const r=t.match(/android ([0-9.]+)/);return r?`Android ${r[1]}`:"Android"}if(t.includes("iphone os")){const r=t.match(/iphone os ([0-9_]+)/);return r?`iOS ${r[1].replace(/_/g,".")}`:"iOS"}return t.includes("linux")?"Linux":"Unknown OS"},Se=s=>{te(s),re(!0)},U=()=>{re(!1),te(null)},X=s=>{if(!s)return"Never";const t=new Date(s),c=Math.floor((new Date-t)/(1e3*60));if(c<1)return"Just now";if(c<60)return`${c}m ago`;const u=Math.floor(c/60);if(u<24)return`${u}h ago`;const m=Math.floor(u/24);return m<7?`${m}d ago`:t.toLocaleDateString()},Ce=s=>{if(!s.is_active)return"default";if(s.last_seen_at){const t=new Date,r=new Date(s.last_seen_at),c=(t-r)/(1e3*60);if(c<=5)return"success";if(c<=60)return"warning"}return"primary"},Fe=s=>{if(!s.is_active)return"Inactive";if(s.last_seen_at){const t=new Date,r=new Date(s.last_seen_at),c=(t-r)/(1e3*60);if(c<=5)return"Online";if(c<=60)return"Recent"}return"Active"};return i.useEffect(()=>{R()},[R]),e.jsxs(e.Fragment,{children:[e.jsx(Re,{title:h}),e.jsx(A,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(qe,{in:!0,children:e.jsx(k,{children:e.jsx(We,{title:`Device Management - ${a.name}`,subtitle:`Manage ${a.name}'s device access, restrictions and session history`,icon:e.jsx(I,{className:"w-8 h-8"}),actionButtons:we,children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(He,{stats:pe,className:"mb-6"}),e.jsx("div",{className:"mb-6",children:e.jsx(k,{variant:"glass",className:"overflow-hidden",children:e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"lg:w-2/5 bg-linear-to-br from-white/5 to-white/10 p-6 border-r border-white/10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-linear-to-br from-primary/60 via-secondary/60 to-accent/60 p-1 shadow-2xl",children:e.jsx("div",{className:"w-full h-full rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center overflow-hidden border border-white/20",children:a.profile_image_url?e.jsx("img",{src:a.profile_image_url,alt:a.name,className:"w-full h-full object-cover rounded-full"}):e.jsx("span",{className:"text-2xl font-bold text-white",children:((le=(ne=a.name)==null?void 0:ne.charAt(0))==null?void 0:le.toUpperCase())||"U"})})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-success/80 backdrop-blur-xs border-2 border-white/30 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]}),e.jsx("h2",{className:"text-xl font-bold text-foreground mb-1",children:a.name}),e.jsx("p",{className:"text-sm text-default-500 mb-3",children:a.email})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white/5 backdrop-blur-xs rounded-lg p-3 border border-white/10 hover:bg-white/10 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-primary/30",children:e.jsx(Ae,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-400 uppercase tracking-wide",children:"Department"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:((ce=a.department)==null?void 0:ce.name)||"No Department"})]})]})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-xs rounded-lg p-3 border border-white/10 hover:bg-white/10 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-secondary/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-secondary/30",children:e.jsx(Me,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-400 uppercase tracking-wide",children:"Member Since"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.created_at?new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]})]})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-xs rounded-lg p-3 border border-white/10 hover:bg-white/10 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-success/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-success/30",children:e.jsx(Oe,{className:"w-5 h-5 text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-400 uppercase tracking-wide",children:"User ID"}),e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["#",a.id]})]})]})}),e.jsxs("div",{className:"pt-4 border-t border-white/10",children:[e.jsx("p",{className:"text-xs text-default-400 uppercase tracking-wide mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{as:$e,href:route("profile",{user:a.id}),size:"sm",variant:"flat",className:"bg-primary/20 text-primary border-primary/30 hover:bg-primary/30 backdrop-blur-xs",startContent:e.jsx(V,{className:"w-4 h-4"}),children:"View Profile"}),e.jsx(f,{size:"sm",variant:"flat",className:"bg-secondary/20 text-secondary border-secondary/30 hover:bg-secondary/30 backdrop-blur-xs",startContent:e.jsx(xe,{className:"w-4 h-4"}),children:"Export Data"})]})]})]})]}),e.jsxs("div",{className:"lg:w-3/5 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Device Security Settings"}),e.jsx("p",{className:"text-sm text-default-400",children:"Manage device access restrictions and session controls"})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-xs rounded-xl p-5 border border-white/10 hover:bg-white/10 transition-colors mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/20 backdrop-blur-xs rounded-xl flex items-center justify-center border border-primary/30",children:e.jsx(Ze,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Single Device Login"}),e.jsx("p",{className:"text-xs text-default-400",children:"Restrict user to one active device"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:a.single_device_login,onChange:s=>{Ne(s.target.checked)},disabled:v.toggle}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-hidden peer-focus:ring-4 peer-focus:ring-opacity-30 rounded-full peer transition-all duration-300 ${a.single_device_login?"bg-green-500 peer-focus:ring-green-300":"bg-red-500 peer-focus:ring-red-300"} peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all`}),v.toggle&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("span",{className:"text-sm font-medium text-default-600",children:"Current Status:"}),e.jsx(O,{size:"sm",variant:"flat",className:`font-semibold backdrop-blur-xs ${a.single_device_login?a.active_device?"bg-warning/20 text-warning border-warning/30":"bg-success/20 text-success border-success/30":"bg-default/20 text-default-600 border-default/30"}`,startContent:a.single_device_login?a.active_device?e.jsx(Je,{className:"w-3 h-3"}):e.jsx(Ge,{className:"w-3 h-3"}):e.jsx(ue,{className:"w-3 h-3"}),children:a.single_device_login?a.active_device?"Device Locked":"Device Free":"Disabled"})]}),a.single_device_login&&a.active_device&&e.jsxs("div",{className:"bg-warning/10 backdrop-blur-xs border border-warning/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-warning/20 backdrop-blur-xs rounded-lg flex items-center justify-center shrink-0 border border-warning/30",children:(oe=a.active_device.device_name)!=null&&oe.toLowerCase().includes("mobile")?e.jsx(I,{className:"w-5 h-5 text-warning"}):e.jsx(me,{className:"w-5 h-5 text-warning"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-warning mb-1",children:"Active Device"}),e.jsx("p",{className:"text-sm text-warning/80 mb-2",children:a.active_device.device_name||"Unknown Device"}),a.active_device.last_seen_at&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-warning/70",children:[e.jsx(W,{className:"w-3 h-3"}),"Last seen: ",X(a.active_device.last_seen_at)]})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-warning/20",children:e.jsx(f,{size:"sm",variant:"flat",className:"bg-danger/20 text-danger border-danger/30 hover:bg-danger/30 backdrop-blur-xs",startContent:v.reset?e.jsx(B,{className:"w-4 h-4 animate-spin"}):e.jsx(B,{className:"w-4 h-4"}),isDisabled:v.reset,onClick:()=>ye(),children:v.reset?"Resetting...":"Reset Device Lock"})})]}),a.single_device_login&&!a.active_device&&e.jsx("div",{className:"bg-success/10 backdrop-blur-xs border border-success/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Y,{className:"w-8 h-8 text-success shrink-0"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-success mb-1",children:"Ready for Device Lock"}),e.jsx("p",{className:"text-sm text-success/80",children:"Single device login is enabled. The user's next login will lock their session to that device."})]})]})}),!a.single_device_login&&e.jsx("div",{className:"bg-primary/10 backdrop-blur-xs border border-primary/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{className:"w-8 h-8 text-primary shrink-0"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-primary mb-1",children:"Multiple Device Access"}),e.jsx("p",{className:"text-sm text-primary/80",children:"User can log in from multiple devices simultaneously. Enable single device login for enhanced security."})]})]})})]})]})]})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ye,{label:"Search Devices",placeholder:"Search by device name, IP, location...",value:l.search,onChange:s=>P("search",s.target.value),InputProps:{startAdornment:e.jsx(es,{position:"start",children:e.jsx(Ie,{className:"w-4 h-4"})})},fullWidth:!0,size:N?"small":"medium",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"12px",color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&.Mui-focused fieldset":{borderColor:"var(--primary-color)"},"& input::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"var(--primary-color)"}}}})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(f,{isIconOnly:N,variant:"bordered",onPress:()=>be(!q),className:"bg-white/5 border-white/20",children:[e.jsx(ss,{className:"w-4 h-4"}),!N&&e.jsx("span",{className:"ml-2",children:"Filters"})]}),e.jsx("div",{className:"hidden md:flex items-center gap-4 px-4 py-2 bg-white/5 rounded-lg border border-white/20",children:e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"text-default-500",children:"Showing: "}),e.jsx("span",{className:"font-medium text-foreground",children:y.length}),e.jsxs("span",{className:"text-default-500",children:[" / ",d.length]})]})})]})]}),q&&e.jsx(Ee,{in:q,children:e.jsx("div",{className:"mb-6 p-4 bg-white/5 rounded-lg border border-white/10",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Status"}),e.jsxs(H,{children:[e.jsx(z,{children:e.jsx(f,{variant:"bordered",className:"w-full justify-between bg-white/5",children:l.status==="all"?"All Status":l.status==="active"?"Active Only":"Inactive Only"})}),e.jsxs(G,{selectedKeys:[l.status],onSelectionChange:s=>P("status",Array.from(s)[0]),children:[e.jsx(x,{children:"All Status"},"all"),e.jsx(x,{children:"Active Only"},"active"),e.jsx(x,{children:"Inactive Only"},"inactive")]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Device Type"}),e.jsxs(H,{children:[e.jsx(z,{children:e.jsx(f,{variant:"bordered",className:"w-full justify-between bg-white/5",children:l.type==="all"?"All Types":l.type==="mobile"?"Mobile Only":"Desktop Only"})}),e.jsxs(G,{selectedKeys:[l.type],onSelectionChange:s=>P("type",Array.from(s)[0]),children:[e.jsx(x,{children:"All Types"},"all"),e.jsx(x,{children:"Mobile Only"},"mobile"),e.jsx(x,{children:"Desktop Only"},"desktop")]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Activity"}),e.jsxs(H,{children:[e.jsx(z,{children:e.jsx(f,{variant:"bordered",className:"w-full justify-between bg-white/5",children:l.dateRange==="all"?"All Time":l.dateRange==="hour"?"Last Hour":l.dateRange==="day"?"Last 24 Hours":l.dateRange==="week"?"Last Week":"Last Month"})}),e.jsxs(G,{selectedKeys:[l.dateRange],onSelectionChange:s=>P("dateRange",Array.from(s)[0]),children:[e.jsx(x,{children:"All Time"},"all"),e.jsx(x,{children:"Last Hour"},"hour"),e.jsx(x,{children:"Last 24 Hours"},"day"),e.jsx(x,{children:"Last Week"},"week"),e.jsx(x,{children:"Last Month"},"month")]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(f,{variant:"flat",color:"primary",className:"w-full",onPress:()=>{ae({search:"",status:"all",type:"all",dateRange:"all"}),Q(s=>({...s,currentPage:1}))},children:"Clear Filters"})})]})})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(n,{variant:"h6",className:"font-semibold text-foreground",children:"Device History"}),e.jsxs(n,{variant:"caption",className:"text-default-500",children:[y.length," device",y.length!==1?"s":""," found",y.length!==d.length&&e.jsxs("span",{children:[" (filtered from ",d.length," total)"]})]})]}),p.total>0&&e.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[e.jsxs(O,{size:"sm",variant:"flat",color:"primary",children:[p.active," Active"]}),e.jsxs(O,{size:"sm",variant:"flat",color:"success",children:[p.online," Online"]})]})]})}),fe?e.jsx("div",{className:"flex justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qe,{size:40}),e.jsx(n,{className:"mt-4 text-default-500",children:"Loading device data..."})]})}):y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(he,{className:"w-12 h-12 text-default-300 mx-auto mb-4"}),e.jsx(n,{variant:"h6",className:"text-foreground mb-2",children:"No devices found"}),e.jsx(n,{variant:"body2",className:"text-default-500",children:d.length===0?`${a.name} has no device records yet`:"Try adjusting your search or filters"}),d.length===0&&e.jsx(n,{variant:"caption",className:"text-default-400 block mt-2",children:"Device records are created when users log in"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(ds,{"aria-label":"Device history table",className:"w-full",classNames:{wrapper:"shadow-none bg-transparent",th:"bg-white/10 backdrop-blur-md text-default-600 border-b border-white/10",td:"border-b border-white/5"},children:[e.jsxs(us,{children:[e.jsx(D,{children:"Device"}),e.jsx(D,{children:"Type"}),e.jsx(D,{children:"IP Address"}),e.jsx(D,{children:"Location"}),e.jsx(D,{children:"Status"}),e.jsx(D,{children:"Last Seen"}),e.jsx(D,{children:"Actions"})]}),e.jsx(ms,{children:_e.map(s=>e.jsxs(xs,{className:"hover:bg-white/5 transition-colors",children:[e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"shrink-0",children:T(s.user_agent)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-sm text-foreground truncate",children:s.device_name||"Unknown Device"}),e.jsx("div",{className:"text-xs text-default-500 truncate max-w-48",title:s.user_agent,children:s.user_agent})]})]})}),e.jsx(S,{children:e.jsx(O,{size:"sm",variant:"flat",color:J(s.user_agent)==="Mobile"?"secondary":"default",startContent:T(s.user_agent),children:J(s.user_agent)})}),e.jsx(S,{children:e.jsx("span",{className:"text-sm font-mono text-foreground",children:s.ip_address})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ts,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-sm text-foreground truncate",children:s.location||"Unknown"})]})}),e.jsx(S,{children:e.jsx(O,{size:"sm",variant:"flat",color:Ce(s),startContent:s.is_active?e.jsx(Y,{className:"w-3 h-3"}):e.jsx(rs,{className:"w-3 h-3"}),children:Fe(s)})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-sm text-foreground",children:X(s.last_seen_at)})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[s.is_active&&e.jsx(hs,{content:"Force logout this device",children:e.jsx(f,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",onPress:()=>Z(s.id),isDisabled:v[`logout_${s.id}`],className:"min-w-0 w-8 h-8",children:v[`logout_${s.id}`]?e.jsx("div",{className:"animate-spin",children:e.jsx(B,{className:"w-3 h-3"})}):e.jsx(V,{className:"w-3 h-3"})})}),e.jsxs(H,{children:[e.jsx(z,{children:e.jsx(f,{isIconOnly:!0,size:"sm",variant:"light",className:"min-w-0 w-8 h-8",children:e.jsx(as,{className:"w-3 h-3"})})}),e.jsxs(G,{"aria-label":"Device Actions",children:[e.jsx(x,{description:"View detailed device information",startContent:e.jsx(is,{className:"w-4 h-4"}),onPress:()=>Se(s),children:"Device Details"},"details"),s.is_active&&e.jsx(x,{description:"Force logout this device",startContent:e.jsx(V,{className:"w-4 h-4"}),color:"warning",onPress:()=>Z(s.id),children:"Force Logout"},"logout")]})]})]})})]},s.id))})]}),ie>1&&e.jsx("div",{className:"flex justify-center items-center p-4 border-t border-white/10",children:e.jsx(fs,{total:ie,page:L.currentPage,onChange:s=>Q(t=>({...t,currentPage:s})),showControls:!0,showShadow:!0,color:"primary",size:N?"sm":"md",classNames:{wrapper:"gap-2",item:"bg-white/10 backdrop-blur-md",cursor:"bg-primary text-primary-foreground"}})})]})]})]})})})})}),e.jsxs(Be,{open:ge,closeModal:U,maxWidth:"md",fullWidth:!0,children:[e.jsxs(ns,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[o&&T(o.user_agent,"w-6 h-6"),e.jsxs("div",{children:[e.jsx(n,{variant:"h6",className:"font-semibold text-foreground",children:"Device Information"}),e.jsx(n,{variant:"body2",className:"text-default-500",children:(o==null?void 0:o.device_name)||"Unknown Device"})]})]}),e.jsx(Pe,{onClick:U,sx:{position:"absolute",right:8,top:8,color:"text.secondary"},children:e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsx(ls,{dividers:!0,children:o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(k,{variant:"glass",children:e.jsxs(A,{p:3,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-primary/30",children:T(o.user_agent,"w-5 h-5")}),e.jsxs("div",{children:[e.jsx(n,{variant:"subtitle1",className:"font-semibold text-foreground",children:"Device Type"}),e.jsx(n,{variant:"body2",className:"text-default-500",children:J(o.user_agent)})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-400",children:"Browser:"}),e.jsx("span",{className:"text-foreground",children:ke(o.user_agent)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-400",children:"OS:"}),e.jsx("span",{className:"text-foreground",children:De(o.user_agent)})]})]})]})}),e.jsx(k,{variant:"glass",children:e.jsxs(A,{p:3,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-secondary/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-secondary/30",children:e.jsx(js,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx(n,{variant:"subtitle1",className:"font-semibold text-foreground",children:"Connection"}),e.jsx(n,{variant:"body2",className:"text-default-500",children:"Network Information"})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-400",children:"IP Address:"}),e.jsx("span",{className:"text-foreground font-mono",children:o.ip_address})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-400",children:"Location:"}),e.jsx("span",{className:"text-foreground",children:o.location||"Unknown"})]})]})]})})]}),e.jsx(k,{variant:"glass",children:e.jsxs(A,{p:3,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-success/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-success/30",children:e.jsx(W,{className:"w-5 h-5 text-success"})}),e.jsxs("div",{children:[e.jsx(n,{variant:"subtitle1",className:"font-semibold text-foreground",children:"Activity Timeline"}),e.jsx(n,{variant:"body2",className:"text-default-500",children:"Session and usage information"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx(n,{variant:"h6",className:"font-bold text-foreground",children:o.is_active?"Active":"Inactive"}),e.jsx(n,{variant:"caption",className:"text-default-400",children:"Current Status"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx(n,{variant:"h6",className:"font-bold text-foreground",children:X(o.last_seen_at)}),e.jsx(n,{variant:"caption",className:"text-default-400",children:"Last Seen"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx(n,{variant:"h6",className:"font-bold text-foreground",children:o.created_at?new Date(o.created_at).toLocaleDateString():"Unknown"}),e.jsx(n,{variant:"caption",className:"text-default-400",children:"First Login"})]})]})]})}),e.jsx(k,{variant:"glass",children:e.jsxs(A,{p:3,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-warning/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-warning/30",children:e.jsx(os,{className:"w-5 h-5 text-warning"})}),e.jsxs("div",{children:[e.jsx(n,{variant:"subtitle1",className:"font-semibold text-foreground",children:"Technical Information"}),e.jsx(n,{variant:"body2",className:"text-default-500",children:"Detailed device specifications"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(n,{variant:"caption",className:"text-default-400 uppercase tracking-wide",children:"Device ID"}),e.jsx(n,{variant:"body2",className:"text-foreground font-mono mt-1 p-2 bg-white/5 rounded-sm border border-white/10",children:o.id})]}),e.jsxs("div",{children:[e.jsx(n,{variant:"caption",className:"text-default-400 uppercase tracking-wide",children:"User Agent"}),e.jsx(n,{variant:"body2",className:"text-foreground break-all mt-1 p-2 bg-white/5 rounded-sm border border-white/10",children:o.user_agent})]})]})]})}),o.is_active&&e.jsx(k,{variant:"glass",children:e.jsxs(A,{p:3,className:"bg-danger/10 backdrop-blur-xs border border-danger/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(he,{className:"w-6 h-6 text-danger shrink-0"}),e.jsxs("div",{children:[e.jsx(n,{variant:"subtitle1",className:"font-semibold text-danger",children:"Security Actions"}),e.jsx(n,{variant:"body2",className:"text-danger/80",children:"Manage device access and security"})]})]}),e.jsx(f,{size:"sm",variant:"flat",className:"bg-danger/20 text-danger border-danger/30 hover:bg-danger/30 backdrop-blur-xs",startContent:e.jsx(V,{className:"w-4 h-4"}),onPress:()=>{Z(o.id),U()},isDisabled:v[`logout_${o.id}`],children:v[`logout_${o.id}`]?"Logging out...":"Force Logout Device"})]})})]})}),e.jsx(cs,{children:e.jsx(f,{variant:"flat",onPress:U,className:"bg-default/20 text-default-700 border-default/30 hover:bg-default/30",children:"Close"})})]})]})};ws.layout=h=>e.jsx(Te,{children:h});export{ws as default};
