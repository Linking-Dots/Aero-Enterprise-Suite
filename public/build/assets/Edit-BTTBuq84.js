import{h as _,r as N,j as e,H as b,L as k}from"./app-D00qZUV_.js";function y({}){var u;const{props:m}=usePage(),{onboarding:l}=m,{data:n,setData:i,put:x,processing:h,errors:r}=_({start_date:l.start_date||"",expected_completion_date:l.expected_completion_date||"",actual_completion_date:l.actual_completion_date||"",status:l.status||"pending",notes:l.notes||"",tasks:((u=l.tasks)==null?void 0:u.map(a=>({id:a.id,task:a.task,description:a.description,due_date:a.due_date,completed_date:a.completed_date,status:a.status,assigned_to:a.assigned_to,notes:a.notes})))||[]}),[d,o]=N.useState({task:"",description:"",due_date:"",assigned_to:""}),g=()=>{d.task&&(i("tasks",[...n.tasks,{...d,status:"pending"}]),o({task:"",description:"",due_date:"",assigned_to:""}))},j=a=>{const t=[...n.tasks];t.splice(a,1),i("tasks",t)},c=(a,t,s)=>{const p=[...n.tasks];p[a]={...p[a],[t]:s},i("tasks",p)},v=a=>{a.preventDefault(),x(route("hr.onboarding.update",l.id))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(b,{title:`Edit Onboarding #${l.id}`}),e.jsxs("h1",{className:"text-xl font-semibold",children:["Edit Onboarding #",l.id]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Start Date"}),e.jsx("input",{type:"date",className:"input",value:n.start_date,onChange:a=>i("start_date",a.target.value)}),r.start_date&&e.jsx("p",{className:"error-text",children:r.start_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Expected Completion"}),e.jsx("input",{type:"date",className:"input",value:n.expected_completion_date,onChange:a=>i("expected_completion_date",a.target.value)}),r.expected_completion_date&&e.jsx("p",{className:"error-text",children:r.expected_completion_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Actual Completion"}),e.jsx("input",{type:"date",className:"input",value:n.actual_completion_date,onChange:a=>i("actual_completion_date",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsx("select",{className:"input",value:n.status,onChange:a=>i("status",a.target.value),children:["pending","in_progress","completed","cancelled"].map(a=>e.jsx("option",{value:a,children:a.replace("_","-")},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:"textarea",value:n.notes,onChange:a=>i("notes",a.target.value)})]})]}),e.jsx("div",{className:"md:col-span-2 space-y-4",children:e.jsxs("div",{className:"bg-white shadow-sm rounded-sm p-4 space-y-4",children:[e.jsx("h2",{className:"font-medium",children:"Tasks"}),e.jsxs("div",{className:"grid md:grid-cols-6 gap-2 items-end text-xs",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"form-label",children:"Task"}),e.jsx("input",{className:"input",value:d.task,onChange:a=>o({...d,task:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Due"}),e.jsx("input",{type:"date",className:"input",value:d.due_date,onChange:a=>o({...d,due_date:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Assignee ID"}),e.jsx("input",{className:"input",value:d.assigned_to,onChange:a=>o({...d,assigned_to:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsx("select",{className:"input",value:d.status||"pending",onChange:a=>o({...d,status:a.target.value}),children:["pending","in_progress","completed","not-applicable"].map(a=>e.jsx("option",{value:a,children:a.replace("_","-")},a))})]}),e.jsx("button",{type:"button",onClick:g,className:"btn btn-secondary w-full",children:"Add"})]}),e.jsxs("div",{children:[n.tasks.length===0&&e.jsx("p",{className:"text-xs text-gray-500",children:"No tasks."}),e.jsx("ul",{className:"divide-y mt-2",children:n.tasks.map((a,t)=>e.jsxs("li",{className:"py-2 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("input",{className:"input flex-1 mr-2",value:a.task,onChange:s=>c(t,"task",s.target.value)}),e.jsx("button",{type:"button",className:"link text-red-600",onClick:()=>j(t),children:"Remove"})]}),e.jsxs("div",{className:"grid md:grid-cols-6 gap-2 text-xs",children:[e.jsx("input",{className:"input md:col-span-2",placeholder:"Description",value:a.description||"",onChange:s=>c(t,"description",s.target.value)}),e.jsx("input",{type:"date",className:"input",value:a.due_date||"",onChange:s=>c(t,"due_date",s.target.value)}),e.jsx("input",{className:"input",placeholder:"Assignee",value:a.assigned_to||"",onChange:s=>c(t,"assigned_to",s.target.value)}),e.jsx("select",{className:"input",value:a.status,onChange:s=>c(t,"status",s.target.value),children:["pending","in_progress","completed","not-applicable"].map(s=>e.jsx("option",{value:s,children:s.replace("_","-")},s))}),e.jsx("input",{type:"date",className:"input",value:a.completed_date||"",onChange:s=>c(t,"completed_date",s.target.value)})]})]},t))})]})]})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:"Save"}),e.jsx(k,{href:route("hr.onboarding.show",l.id),className:"btn",children:"Cancel"})]})]})]})}export{y as default};
