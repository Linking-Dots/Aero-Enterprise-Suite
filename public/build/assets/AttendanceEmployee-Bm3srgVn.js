import{R as $,J as W,u as E,r,a as C,j as e,Q as I,c as x,b as f}from"./app-D7Emqt7L.js";import{F as g,a as d,c as y,A as T}from"./App-DMUHHDhb.js";import{S as L}from"./StatsCards-Ccw6udyf.js";import{T as B}from"./TimeSheetTable-DBkrQ6XB.js";import{F as _}from"./CheckCircleIcon-DeMwk4ZO.js";import{F as H}from"./XCircleIcon-BE8JEbra.js";import{F as Y}from"./ExclamationTriangleIcon-BNRs6txW.js";import{F as z}from"./ChartBarIcon-DQqhkyWC.js";import{F as P}from"./UserIcon-D7XMFWVZ.js";import{m as V}from"./proxy-Dz6ef5Fu.js";import{F as O}from"./PresentationChartLineIcon-Bj9m3VNf.js";import{i as Q}from"./chunk-SSA7SXE4-SzD2TXjA.js";import"./react-toastify.esm-Dr4R_w2z.js";import"./EnvelopeIcon-SPfHBOr2.js";import"./ShieldCheckIcon-CUPquFrg.js";import"./KeyIcon-CeY0WBtg.js";import"./logo-F-4VaniB.js";import"./features-animation-MBm16O-S.js";import"./create-visual-element-K5FB3JuS.js";import"./chunk-TLYTI3QM-CI1Zx9R2.js";import"./dayjs.min-C_x3TaWi.js";import"./PageHeader-CS6vfCpQ.js";import"./UserPlusIcon-BkZHFMyv.js";import"./DocumentArrowDownIcon-C9qJ2K_u.js";import"./chunk-JOT4BT4P-CPjGn-LE.js";import"./chunk-F3UDT23P-Bg4Wv5D3.js";import"./chunk-XJ2YRSUP-B0eby2gR.js";import"./useToggleState-BEq91bvp.js";import"./chunk-YRZGWF2W-aSaGnGII.js";import"./chunk-EAPQ7RWQ-BzH8cgzd.js";import"./chunk-S574QCAN-Cz5QB4VA.js";const J=$.memo(({title:c,totalWorkingDays:U,presentDays:q,absentDays:G,lateArrivals:K})=>{const{auth:X}=W().props,{isDark:Z}=E(),[ee,v]=r.useState(!1),[te,b]=r.useState(!1),[o,w]=r.useState(!1),[l,F]=r.useState(!1);r.useEffect(()=>{const t=()=>{v(window.innerWidth<640),b(window.innerWidth<768),w(window.innerWidth>=1025),F(window.innerWidth>=641&&window.innerWidth<=1024)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const j=()=>{var p;if(typeof window>"u")return"lg";const i=((p=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:p.trim())||"12px",a=parseInt(i);return a===0?"none":a<=4?"sm":a<=8?"md":a<=16?"lg":"full"},[m,S]=r.useState(new Date),[D,u]=r.useState(!1),[re,ae]=r.useState(!1),[n,N]=r.useState({currentMonth:new Date().toISOString().slice(0,7)}),[s,M]=r.useState({totalWorkingDays:0,totalDaysInMonth:0,holidaysCount:0,weekendsCount:0,presentDays:0,absentDays:0,lateArrivals:0,attendancePercentage:0,averageWorkHours:0,overtimeHours:0,totalWorkHours:0,totalLeaveDays:0,leaveBreakdown:{},month:"",generated_at:null}),R=t=>{const i=t.target.value;S(new Date(i)),u(a=>!a)},A=r.useCallback((t,i)=>{N(a=>({...a,[t]:i})),u(a=>!a)},[]),h=r.useCallback(async()=>{try{const t=await C.get(route("attendance.myMonthlyStats"),{params:{currentYear:n.currentMonth?new Date(n.currentMonth).getFullYear():new Date().getFullYear(),currentMonth:n.currentMonth?String(new Date(n.currentMonth).getMonth()+1).padStart(2,"0"):String(new Date().getMonth()+1).padStart(2,"0")}});t.data.success&&M(t.data.data)}catch(t){console.error("Failed to fetch monthly stats:",t)}},[n.currentMonth]);r.useEffect(()=>{h()},[h]);const k=[{title:"Working Days",value:s.totalWorkingDays,icon:e.jsx(g,{}),color:"text-primary",iconBg:"bg-primary/20",description:`Total for ${s.month||"this month"}`},{title:"Present Days",value:s.presentDays,icon:e.jsx(_,{}),color:"text-success",iconBg:"bg-success/20",description:"Days attended this month"},{title:"Absent Days",value:s.absentDays,icon:e.jsx(H,{}),color:"text-danger",iconBg:"bg-danger/20",description:"Days missed this month"},{title:"Late Arrivals",value:s.lateArrivals,icon:e.jsx(Y,{}),color:"text-warning",iconBg:"bg-warning/20",description:"Times late this month"},{title:"Attendance Rate",value:`${s.attendancePercentage}%`,icon:e.jsx(z,{}),color:"text-success",iconBg:"bg-success/20",description:"Your monthly performance"},{title:"Avg Work Hours",value:`${s.averageWorkHours}h`,icon:e.jsx(d,{}),color:"text-primary",iconBg:"bg-primary/20",description:"Daily average this month"},{title:"Overtime",value:`${s.overtimeHours}h`,icon:e.jsx(d,{}),color:"text-secondary",iconBg:"bg-secondary/20",description:"Extra hours this month"},{title:"Leave Days",value:s.totalLeaveDays,icon:e.jsx(P,{}),color:"text-warning",iconBg:"bg-warning/20",description:"Leaves taken this month"}];return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:c||"My Attendance"}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"My Attendance Management",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(V.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(x,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(y,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${o?"p-6":l?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                                            ${o?"p-3":l?"p-2.5":"p-2"} 
                                                            rounded-xl flex items-center justify-center
                                                        `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(O,{className:`
                                                                ${o?"w-8 h-8":l?"w-6 h-6":"w-5 h-5"}
                                                            `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                                                ${o?"text-2xl":l?"text-xl":"text-lg"}
                                                                font-bold text-foreground
                                                                ${o?"":"truncate"}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"My Attendance"}),e.jsx("p",{className:`
                                                                ${o?"text-sm":"text-xs"} 
                                                                text-default-500
                                                                ${o?"":"truncate"}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"View your attendance records and timesheet details"})]})]})})})})}),e.jsxs(f,{className:"p-6",children:[e.jsx(L,{stats:k,className:"mb-6"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsx(Q,{label:"Month/Year",type:"month",value:n.currentMonth,onChange:t=>A("currentMonth",t.target.value),variant:"bordered",size:"sm",radius:j(),startContent:e.jsx(g,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Select month and year for attendance"})})})}),e.jsxs(x,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                                                var(--theme-content1, #FAFAFA) 20%, 
                                                var(--theme-content2, #F4F4F5) 10%, 
                                                var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(y,{className:"border-b pb-2",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)"},children:e.jsx(d,{className:"w-6 h-6",style:{color:"var(--theme-primary)"}})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"My Attendance Records"})]})}),e.jsx(f,{children:e.jsx("div",{className:"max-h-[84vh] overflow-y-auto",children:e.jsx(B,{selectedDate:m,handleDateChange:R,updateTimeSheet:D,externalFilterData:n},`${m}-${n.currentMonth}`)})})]})]})]})})})})})]})});J.layout=c=>e.jsx(T,{children:c});export{J as default};
