import{R as $,u as W,a as E,r,b as C,j as e,H as I,c as x,d as f}from"./app-DHNdVVQv.js";import{F as g,A as T}from"./Dashboard-CL6aii2i.js";import{S as L}from"./StatsCards-FBa2xuLX.js";import{T as B}from"./TimeSheetTable-ToJwMo2E.js";import{F as H}from"./CheckCircleIcon-xAm9Zj2M.js";import{F as _}from"./XCircleIcon-CVde6m6d.js";import{F as P}from"./ExclamationTriangleIcon-V9aSIw1P.js";import{F as Y}from"./ChartBarIcon-D0ccFhw4.js";import{F as d}from"./ClockIcon-CXPi9B2M.js";import{F as z}from"./UserIcon-Br1hNDUA.js";import{m as V}from"./proxy-D1LloRp0.js";import{F as O}from"./PresentationChartLineIcon-CuzOHnnf.js";import{c as y}from"./chunk-D5XJWRAV-BWg0Norf.js";import{i as U}from"./chunk-SSA7SXE4-CqHXNhTc.js";import"./react-toastify.esm-CdHJ_9GV.js";import"./MapPinIcon-xKIyQDFo.js";import"./EnvelopeIcon-DP0OEU5j.js";import"./UserGroupIcon-DZQm_A1N.js";import"./ShieldCheckIcon-BU8PXtzV.js";import"./XMarkIcon-XAKSMS26.js";import"./KeyIcon-DkhQE_I3.js";import"./index-D-zhejwu.js";import"./chunk-Y2AYO5NJ-Bk2TVsbc.js";import"./logo-Pwvcz7fP.js";import"./MagnifyingGlassIcon-DeOaUoN6.js";import"./chunk-IHOGUXIG-q7BxhTVo.js";import"./chunk-TLYTI3QM-DgZwzf_H.js";import"./dayjs.min-BVNpwf10.js";import"./PageHeader-Ci0Derg-.js";import"./UserPlusIcon-BBv50z-v.js";import"./DocumentArrowDownIcon-2wlIF7PI.js";import"./chunk-JOT4BT4P-DXWsNUV6.js";import"./chunk-F3UDT23P-Buxg80gs.js";import"./chunk-XJ2YRSUP-DWgn52yP.js";import"./useToggleState-C0CIOmtj.js";import"./chunk-YRZGWF2W-CXbBYZmo.js";import"./chunk-APIAPHLK-D0vgkcm2.js";import"./chunk-S574QCAN-BeTtg-tb.js";import"./create-visual-element-D6w-5Lok.js";const q=$.memo(({title:c,totalWorkingDays:G,presentDays:J,absentDays:K,lateArrivals:Q})=>{const{auth:X}=W().props,{isDark:Z}=E(),[ee,v]=r.useState(!1),[te,b]=r.useState(!1),[o,w]=r.useState(!1),[l,F]=r.useState(!1);r.useEffect(()=>{const t=()=>{v(window.innerWidth<640),b(window.innerWidth<768),w(window.innerWidth>=1025),F(window.innerWidth>=641&&window.innerWidth<=1024)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const j=()=>{var p;if(typeof window>"u")return"lg";const i=((p=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:p.trim())||"12px",a=parseInt(i);return a===0?"none":a<=4?"sm":a<=8?"md":a<=16?"lg":"full"},[m,S]=r.useState(new Date),[D,u]=r.useState(!1),[re,ae]=r.useState(!1),[n,N]=r.useState({currentMonth:new Date().toISOString().slice(0,7)}),[s,M]=r.useState({totalWorkingDays:0,totalDaysInMonth:0,holidaysCount:0,weekendsCount:0,presentDays:0,absentDays:0,lateArrivals:0,attendancePercentage:0,averageWorkHours:0,overtimeHours:0,totalWorkHours:0,totalLeaveDays:0,leaveBreakdown:{},month:"",generated_at:null}),R=t=>{const i=t.target.value;S(new Date(i)),u(a=>!a)},A=r.useCallback((t,i)=>{N(a=>({...a,[t]:i})),u(a=>!a)},[]),h=r.useCallback(async()=>{try{const t=await C.get(route("attendance.myMonthlyStats"),{params:{currentYear:n.currentMonth?new Date(n.currentMonth).getFullYear():new Date().getFullYear(),currentMonth:n.currentMonth?String(new Date(n.currentMonth).getMonth()+1).padStart(2,"0"):String(new Date().getMonth()+1).padStart(2,"0")}});t.data.success&&M(t.data.data)}catch(t){console.error("Failed to fetch monthly stats:",t)}},[n.currentMonth]);r.useEffect(()=>{h()},[h]);const k=[{title:"Working Days",value:s.totalWorkingDays,icon:e.jsx(g,{}),color:"text-primary",iconBg:"bg-primary/20",description:`Total for ${s.month||"this month"}`},{title:"Present Days",value:s.presentDays,icon:e.jsx(H,{}),color:"text-success",iconBg:"bg-success/20",description:"Days attended this month"},{title:"Absent Days",value:s.absentDays,icon:e.jsx(_,{}),color:"text-danger",iconBg:"bg-danger/20",description:"Days missed this month"},{title:"Late Arrivals",value:s.lateArrivals,icon:e.jsx(P,{}),color:"text-warning",iconBg:"bg-warning/20",description:"Times late this month"},{title:"Attendance Rate",value:`${s.attendancePercentage}%`,icon:e.jsx(Y,{}),color:"text-success",iconBg:"bg-success/20",description:"Your monthly performance"},{title:"Avg Work Hours",value:`${s.averageWorkHours}h`,icon:e.jsx(d,{}),color:"text-primary",iconBg:"bg-primary/20",description:"Daily average this month"},{title:"Overtime",value:`${s.overtimeHours}h`,icon:e.jsx(d,{}),color:"text-secondary",iconBg:"bg-secondary/20",description:"Extra hours this month"},{title:"Leave Days",value:s.totalLeaveDays,icon:e.jsx(z,{}),color:"text-warning",iconBg:"bg-warning/20",description:"Leaves taken this month"}];return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:c||"My Attendance"}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"My Attendance Management",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(V.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(x,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(y,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${o?"p-6":l?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                                            ${o?"p-3":l?"p-2.5":"p-2"} 
                                                            rounded-xl flex items-center justify-center
                                                        `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(O,{className:`
                                                                ${o?"w-8 h-8":l?"w-6 h-6":"w-5 h-5"}
                                                            `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                                                ${o?"text-2xl":l?"text-xl":"text-lg"}
                                                                font-bold text-foreground
                                                                ${o?"":"truncate"}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"My Attendance"}),e.jsx("p",{className:`
                                                                ${o?"text-sm":"text-xs"} 
                                                                text-default-500
                                                                ${o?"":"truncate"}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"View your attendance records and timesheet details"})]})]})})})})}),e.jsxs(f,{className:"p-6",children:[e.jsx(L,{stats:k,className:"mb-6"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsx(U,{label:"Month/Year",type:"month",value:n.currentMonth,onChange:t=>A("currentMonth",t.target.value),variant:"bordered",size:"sm",radius:j(),startContent:e.jsx(g,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Select month and year for attendance"})})})}),e.jsxs(x,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                                                var(--theme-content1, #FAFAFA) 20%, 
                                                var(--theme-content2, #F4F4F5) 10%, 
                                                var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(y,{className:"border-b pb-2",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)"},children:e.jsx(d,{className:"w-6 h-6",style:{color:"var(--theme-primary)"}})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"My Attendance Records"})]})}),e.jsx(f,{children:e.jsx("div",{className:"max-h-[84vh] overflow-y-auto",children:e.jsx(B,{selectedDate:m,handleDateChange:R,updateTimeSheet:D,externalFilterData:n},`${m}-${n.currentMonth}`)})})]})]})]})})})})})]})});q.layout=c=>e.jsx(T,{children:c});export{q as default};
