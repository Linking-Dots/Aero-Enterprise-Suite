import{r as n,j as e,e as S,g as Je,h as qe,a as le,M as Ge,f as Ie,H as ar}from"./app-B8QYX9Px.js";import{P as $e,f as we,J as ve,C as ke,z as He,q as tr,c as se,B as ee,t as ue,v as be,w as fe,x as ce,a as Re,K as Se,u as Ve,y as Pe,g as sr,E as lr,A as nr}from"./App-DkF9RL3Y.js";import{u as Te,B as k,T as j,G as ir,F as or}from"./logo-BoX8pchB.js";import{P as dr}from"./PageHeader-XJFWVm9P.js";import{S as cr}from"./StatsCards-DEVVTSBN.js";import{G as Xe}from"./GlassDialog-w1fMVGB6.js";import{D as mr}from"./DialogTitle-B_yNWDSa.js";import{F as Ae}from"./ExclamationTriangleIcon-BW32ASrn.js";import{D as xr,a as pr}from"./DialogContent-DYCSoO7D.js";import{A as hr}from"./Alert-D_AVVXbH.js";import{F as Le}from"./TrashIcon-DFtGfjbZ.js";import{F as Qe}from"./UserIcon-D9_80nkG.js";import{F as Ke}from"./CheckCircleIcon-B90VRiLI.js";import{p as gr}from"./chunk-XVMALT6H-Dh5JAmN7.js";import{F as je}from"./EllipsisVerticalIcon-B1J6VG1L.js";import{F as er}from"./PencilIcon-q28LArt-.js";import{F as Ee}from"./EnvelopeIcon-B1M8vjD_.js";import{F as ur}from"./HashtagIcon-XTzCMm15.js";import{C as me,G as br,F as Fe}from"./Grow-DP1KP2ex.js";import{t as fr,a as jr,b as wr,c as vr,d as yr,e as Nr}from"./chunk-F3UDT23P-Hrzl6yhk.js";import{p as rr}from"./chunk-EAPQ7RWQ-OKuZgSIq.js";import{F as _r}from"./TrophyIcon-DiD_qCdy.js";import{F as Ye}from"./UserPlusIcon-D1Sf0MxE.js";import{F as Cr}from"./ChartBarIcon-BBONCpWc.js";import{T as kr}from"./TextField-BAa6JqDO.js";import{I as Pr}from"./InputAdornment-Cc_eLtv_.js";import{F as Fr}from"./TableCellsIcon-DR_7sKkt.js";import{F as Mr}from"./AdjustmentsHorizontalIcon-BrcFRj1g.js";import{I as Me}from"./InputLabel-CehJzubO.js";import{S as De}from"./Select-8HD_0XQO.js";import{M as ie}from"./MenuItem-BN00sQGI.js";import{b as Dr}from"./chunk-57V4RE7B-DRnWK4yB.js";import"./ShieldCheckIcon-RZqgNGJW.js";import"./create-visual-element-4S4I33NB.js";import"./chunk-D5XJWRAV-zQzkTunB.js";import"./Dialog-Bo_XotCr.js";import"./index-DU2jcyFo.js";import"./NumberFormatter-DNR9MAW-.js";import"./useHasTabbableChild-CrUAHYqA.js";import"./index-Dxlg9OmP.js";import"./index-CokAva9Y.js";import"./listItemTextClasses-DfTDYmaW.js";function Ir({title:$,titleId:g,...t},x){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":g},t),$?n.createElement("title",{id:g},$):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Ze=n.forwardRef(Ir),Rr=({open:$,onClose:g,employee:t,onConfirm:x,loading:V=!1})=>{const i=Te();if(!t)return null;const Y=t.active_projects_count>0||t.pending_leaves_count>0||t.active_trainings_count>0;return e.jsxs(Xe,{open:$,onClose:g,maxWidth:"sm",fullWidth:!0,children:[e.jsx(mr,{sx:{display:"flex",alignItems:"center",gap:2,pb:2,background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05))",borderBottom:`1px solid ${i.palette.error.main}30`},children:e.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:2,color:i.palette.error.main},children:[e.jsx(k,{sx:{width:40,height:40,borderRadius:"12px",background:`linear-gradient(135deg, ${i.palette.error.main}20, ${i.palette.error.main}10)`,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${i.palette.error.main}30`},children:e.jsx(Ae,{className:"w-5 h-5"})}),e.jsx(j,{variant:"h6",component:"h2",fontWeight:"600",children:"Delete Employee"})]})}),e.jsxs(xr,{sx:{py:0},children:[e.jsxs(k,{sx:{p:3,borderRadius:3,background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.1)",mb:3,transition:"all 0.3s ease"},children:[e.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:3,mb:3},children:[e.jsx($e,{src:t.profile_image_url||t.profile_image,name:t.name,size:"lg",className:"ring-2 ring-white/20 shadow-lg"}),e.jsxs(k,{sx:{flex:1},children:[e.jsx(j,{variant:"h6",fontWeight:"600",sx:{mb:.5},children:t.name}),e.jsx(j,{variant:"body2",color:"text.secondary",children:t.email}),t.employee_id&&e.jsxs(j,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5,px:1.5,py:.5,borderRadius:1,background:"rgba(255, 255, 255, 0.1)",width:"fit-content"},children:["ID: ",t.employee_id]})]})]}),e.jsxs(k,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsxs(k,{sx:{p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(we,{className:"w-4 h-4 text-blue-400"}),e.jsx(j,{variant:"caption",color:"text.secondary",fontWeight:"500",children:"Department"})]}),e.jsx(j,{variant:"body2",fontWeight:"500",children:t.department_name||"Not assigned"})]}),e.jsxs(k,{sx:{p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(ve,{className:"w-4 h-4 text-purple-400"}),e.jsx(j,{variant:"caption",color:"text.secondary",fontWeight:"500",children:"Designation"})]}),e.jsx(j,{variant:"body2",fontWeight:"500",children:t.designation_name||"Not assigned"})]})]})]}),e.jsx(hr,{severity:"error",sx:{mb:3,borderRadius:3,background:"rgba(239, 68, 68, 0.1)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(239, 68, 68, 0.3)","& .MuiAlert-icon":{color:i.palette.error.main},"& .MuiAlert-message":{color:i.palette.error.main}},children:e.jsx(j,{variant:"body2",fontWeight:"500",children:"This action will permanently delete the employee record and cannot be undone."})}),Y&&e.jsxs(k,{sx:{p:3,borderRadius:3,background:"rgba(251, 146, 60, 0.1)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(251, 146, 60, 0.3)",mb:3},children:[e.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(k,{sx:{width:32,height:32,borderRadius:"8px",background:"rgba(251, 146, 60, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ae,{className:"w-4 h-4 text-orange-400"})}),e.jsx(j,{variant:"subtitle2",color:"warning.main",fontWeight:"600",children:"Employee Has Active Data"})]}),e.jsx(j,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"This employee has the following active records that will also be affected:"}),e.jsxs(k,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[t.active_projects_count>0&&e.jsx(ke,{size:"small",label:`${t.active_projects_count} Active Projects`,sx:{background:"rgba(251, 146, 60, 0.2)",color:"orange",border:"1px solid rgba(251, 146, 60, 0.3)",backdropFilter:"blur(10px)"}}),t.pending_leaves_count>0&&e.jsx(ke,{size:"small",label:`${t.pending_leaves_count} Pending Leaves`,sx:{background:"rgba(251, 146, 60, 0.2)",color:"orange",border:"1px solid rgba(251, 146, 60, 0.3)",backdropFilter:"blur(10px)"}}),t.active_trainings_count>0&&e.jsx(ke,{size:"small",label:`${t.active_trainings_count} Active Trainings`,sx:{background:"rgba(251, 146, 60, 0.2)",color:"orange",border:"1px solid rgba(251, 146, 60, 0.3)",backdropFilter:"blur(10px)"}})]})]}),e.jsxs(k,{sx:{p:3,borderRadius:3,background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",mb:2},children:[e.jsxs(j,{variant:"body1",sx:{mb:1,fontWeight:500},children:["Are you sure you want to delete ",e.jsx(k,{component:"span",sx:{color:i.palette.error.main,fontWeight:600},children:t.name}),"?"]}),e.jsx(j,{variant:"body2",color:"text.secondary",children:"Type the employee's name below to confirm this permanent deletion:"})]})]}),e.jsxs(pr,{sx:{px:3,py:3,justifyContent:"space-between",borderTop:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.02)"},children:[e.jsx(S,{variant:"light",onPress:g,disabled:V,className:"hover:bg-white/10",children:"Cancel"}),e.jsx(S,{color:"danger",variant:"solid",onPress:x,isLoading:V,startContent:!V&&e.jsx(Le,{className:"w-4 h-4"}),className:"bg-linear-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 shadow-lg",children:V?"Deleting...":"Delete Employee"})]})]})},Sr=({isOpen:$,onClose:g,employee:t,onImageUpdate:x})=>{const V=n.useRef(null),[i,Y]=n.useState(null),[o,q]=n.useState(null),[T,re]=n.useState(!1),[X,y]=n.useState(0),[ne,l]=n.useState(""),d=2*1024*1024,Z=["image/jpeg","image/jpg","image/png","image/webp"],B=100,ae=2e3,te=(t==null?void 0:t.profile_image_url)||null,xe=te&&te!==null,G=P=>{const w=P.target.files[0];if(!w)return;if(l(""),!Z.includes(w.type)){l("Invalid file type. Please select a JPEG, PNG, or WebP image.");return}if(w.size>d){l(`File too large. Maximum size is ${d/1024/1024}MB.`);return}const N=new Image;N.onload=()=>{if(N.width<B||N.height<B){l(`Image dimensions too small. Minimum size is ${B}x${B} pixels.`);return}if(N.width>ae||N.height>ae){l(`Image dimensions too large. Maximum size is ${ae}x${ae} pixels.`);return}Y(w),q(URL.createObjectURL(w))},N.onerror=()=>{l("Invalid image file.")},N.src=URL.createObjectURL(w)},L=async()=>{var w,N,F,J;if(!i||!t)return;re(!0),y(0),l("");const P=new FormData;P.append("profile_image",i),P.append("user_id",t.id);try{const _=await le.post(route("profile.image.upload"),P,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:M=>{const oe=Math.round(M.loaded*100/M.total);y(oe)}});if(_.data.success){if(ee.success(_.data.message||"Profile picture updated successfully!"),x){const M=_.data.profile_image_url;x(t.id,M)}H()}else throw new Error(_.data.message||"Upload failed")}catch(_){console.error("Upload error:",_);let M="Failed to upload profile picture";((w=_.response)==null?void 0:w.status)===413?M="File too large. Please choose a smaller image.":((N=_.response)==null?void 0:N.status)===422?M=_.response.data.message||"Validation failed":(J=(F=_.response)==null?void 0:F.data)!=null&&J.message?M=_.response.data.message:_.message&&(M=_.message),l(M),ee.error(M)}finally{re(!1),y(0)}},m=async()=>{var w,N;if(!t)return;re(!0),l("");const P=new FormData;P.append("user_id",t.id);try{const F=await le.delete(route("profile.image.remove"),{data:P,headers:{"Content-Type":"multipart/form-data"}});if(F.data.success){if(ee.success(F.data.message||"Profile picture removed successfully!"),x){const J=F.data.profile_image_url;x(t.id,J)}H()}else throw new Error(F.data.message||"Remove failed")}catch(F){console.error("Remove error:",F);const J=((N=(w=F.response)==null?void 0:w.data)==null?void 0:N.message)||F.message||"Failed to remove profile picture";l(J),ee.error(J)}finally{re(!1)}},H=()=>{T||(Y(null),q(null),l(""),y(0),o&&URL.revokeObjectURL(o),g())};return t?e.jsx(Xe,{open:$,closeModal:H,maxWidth:"md",fullWidth:!0,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ze,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Update Profile Picture"}),e.jsx("p",{className:"text-sm text-gray-500",children:(t==null?void 0:t.name)||"Employee"})]})]}),e.jsx(S,{isIconOnly:!0,variant:"light",onPress:H,className:"text-gray-400 hover:text-gray-600",children:e.jsx(He,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(tr,{src:o||te||void 0,name:(t==null?void 0:t.name)||"Employee",size:"lg",className:"w-24 h-24",fallback:e.jsx(Qe,{className:"w-12 h-12 text-gray-400"})})}),ne&&e.jsx(se,{color:"danger",variant:"flat",startContent:e.jsx(Ae,{className:"w-4 h-4"}),className:"mb-4 w-full",children:ne}),T&&e.jsx("div",{className:"mb-4",children:e.jsx(gr,{value:X,color:"primary",size:"sm",label:"Uploading...",showValueLabel:!0,className:"w-full"})}),e.jsx(Je,{className:"mb-4",children:e.jsxs(qe,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("input",{ref:V,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:G,className:"hidden",disabled:T}),e.jsx(S,{onPress:()=>{var P;return(P=V.current)==null?void 0:P.click()},startContent:e.jsx(Ze,{className:"w-5 h-5"}),variant:"flat",color:"primary",disabled:T,className:"mb-3",children:"Choose New Picture"}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Supported formats: JPEG, PNG, WebP"}),e.jsx("p",{children:"Maximum size: 2MB"}),e.jsx("p",{children:"Minimum dimensions: 100x100px"}),e.jsx("p",{children:"Maximum dimensions: 2000x2000px"})]})]}),i&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(i.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(S,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>{Y(null),q(null),l("")},disabled:T,children:e.jsx(He,{className:"w-4 h-4"})})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[xe&&e.jsx(S,{onPress:m,startContent:e.jsx(Le,{className:"w-4 h-4"}),color:"danger",variant:"flat",disabled:T,children:"Remove Picture"}),e.jsx(S,{onPress:H,variant:"flat",disabled:T,children:"Cancel"}),e.jsx(S,{onPress:L,color:"primary",disabled:!i||T,isLoading:T,children:T?"Uploading...":"Update Picture"})]})]})}):null},Ar=({allUsers:$,departments:g,designations:t,attendanceTypes:x,setUsers:V,isMobile:i,isTablet:Y,pagination:o,onPageChange:q,onRowsPerPageChange:T,totalUsers:re=0,loading:X=!1,updateEmployeeOptimized:y,deleteEmployeeOptimized:ne})=>{const l=Te(),[d,Z]=n.useState(!1),[B,ae]=n.useState(null),[te,xe]=n.useState({}),[G,L]=n.useState(!1),[m,H]=n.useState(null),[P,w]=n.useState(!1),[N,F]=n.useState({isOpen:!1,employee:null}),J=async(a,p)=>{var v,A,E,I,f,R,c,O,z,U,C,W;const D=new Promise(async(u,r)=>{try{if((await le.post(route("user.updateDepartment",{id:a}),{department:p})).status===200){const h=g.find(b=>b.id===parseInt(p))||null;y==null||y(a,{department_id:p,department_name:(h==null?void 0:h.name)||null,designation_id:null,designation_name:null}),u("Department updated successfully")}}catch(s){console.error("Error updating department:",s),r("Failed to update department")}});ee.promise(D,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(me,{size:16}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating department..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((v=l.glassCard)==null?void 0:v.background)||"rgba(15, 20, 25, 0.15)",border:((A=l.glassCard)==null?void 0:A.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((I=(E=l.palette)==null?void 0:E.text)==null?void 0:I.primary)||"#ffffff"}},success:{render({data:u}){return e.jsx("div",{children:u})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:((f=l.glassCard)==null?void 0:f.background)||"rgba(15, 20, 25, 0.15)",border:((R=l.glassCard)==null?void 0:R.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((O=(c=l.palette)==null?void 0:c.text)==null?void 0:O.primary)||"#ffffff"}},error:{render({data:u}){return e.jsx("div",{children:u})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:((z=l.glassCard)==null?void 0:z.background)||"rgba(15, 20, 25, 0.15)",border:((U=l.glassCard)==null?void 0:U.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((W=(C=l.palette)==null?void 0:C.text)==null?void 0:W.primary)||"#ffffff"}}})},_=async(a,p)=>{var v,A,E,I,f,R,c,O,z,U,C,W;const D=new Promise(async(u,r)=>{try{if((await le.post(route("user.updateDesignation",{id:a}),{designation_id:p})).status===200){const h=t.find(b=>b.id===parseInt(p))||null;y==null||y(a,{designation_id:p,designation_name:(h==null?void 0:h.title)||null}),u("Designation updated successfully")}}catch(s){console.error("Error updating designation:",s),r("Failed to update designation")}});ee.promise(D,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(me,{size:16}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating designation..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((v=l.glassCard)==null?void 0:v.background)||"rgba(15, 20, 25, 0.15)",border:((A=l.glassCard)==null?void 0:A.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((I=(E=l.palette)==null?void 0:E.text)==null?void 0:I.primary)||"#ffffff"}},success:{render({data:u}){return e.jsx("div",{children:u})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:((f=l.glassCard)==null?void 0:f.background)||"rgba(15, 20, 25, 0.15)",border:((R=l.glassCard)==null?void 0:R.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((O=(c=l.palette)==null?void 0:c.text)==null?void 0:O.primary)||"#ffffff"}},error:{render({data:u}){return e.jsx("div",{children:u})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:((z=l.glassCard)==null?void 0:z.background)||"rgba(15, 20, 25, 0.15)",border:((U=l.glassCard)==null?void 0:U.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((W=(C=l.palette)==null?void 0:C.text)==null?void 0:W.primary)||"#ffffff"}}})},M=async(a,p)=>{var v,A,E,I,f,R,c,O,z,U,C,W;const D=new Promise(async(u,r)=>{try{if((await le.post(route("user.updateAttendanceType",{id:a}),{attendance_type_id:p})).status===200){const h=x.find(b=>b.id===parseInt(p))||null;y&&y(a,{attendance_type_id:p,attendance_type_name:(h==null?void 0:h.name)||null}),u("Attendance type updated successfully")}}catch(s){console.error("Error updating attendance type:",s),r("Failed to update attendance type")}});ee.promise(D,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(me,{size:16}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating attendance type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((v=l.glassCard)==null?void 0:v.background)||"rgba(15, 20, 25, 0.15)",border:((A=l.glassCard)==null?void 0:A.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((I=(E=l.palette)==null?void 0:E.text)==null?void 0:I.primary)||"#ffffff"}},success:{render({data:u}){return e.jsx("div",{children:u})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:((f=l.glassCard)==null?void 0:f.background)||"rgba(15, 20, 25, 0.15)",border:((R=l.glassCard)==null?void 0:R.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((O=(c=l.palette)==null?void 0:c.text)==null?void 0:O.primary)||"#ffffff"}},error:{render({data:u}){return e.jsx("div",{children:u})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:((z=l.glassCard)==null?void 0:z.background)||"rgba(15, 20, 25, 0.15)",border:((U=l.glassCard)==null?void 0:U.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((W=(C=l.palette)==null?void 0:C.text)==null?void 0:W.primary)||"#ffffff"}}})},oe=a=>{H(a),L(!0)},ye=async()=>{var p,D,v,A,E,I,f,R,c,O,z,U;if(!m)return;w(!0);const a=new Promise(async(C,W)=>{var u,r,s,h;try{(await le.delete(route("user.delete",{id:m.id}))).status===200&&(ne&&ne(m.id),L(!1),H(null),C("Employee deleted successfully"))}catch(b){console.error("Error deleting employee:",b);let Q="Failed to delete employee";((u=b.response)==null?void 0:u.status)===403?Q="You do not have permission to delete this employee":((r=b.response)==null?void 0:r.status)===404?Q="Employee not found or already deleted":(h=(s=b.response)==null?void 0:s.data)!=null&&h.error&&(Q=b.response.data.error),W(Q)}finally{w(!1)}});ee.promise(a,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(me,{size:16}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting employee..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((p=l.glassCard)==null?void 0:p.background)||"rgba(15, 20, 25, 0.15)",border:((D=l.glassCard)==null?void 0:D.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((A=(v=l.palette)==null?void 0:v.text)==null?void 0:A.primary)||"#ffffff"}},success:{render({data:C}){return e.jsx("div",{children:C})},icon:"✅",style:{backdropFilter:"blur(16px) saturate(200%)",background:((E=l.glassCard)==null?void 0:E.background)||"rgba(15, 20, 25, 0.15)",border:((I=l.glassCard)==null?void 0:I.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((R=(f=l.palette)==null?void 0:f.text)==null?void 0:R.primary)||"#ffffff"}},error:{render({data:C}){return e.jsx("div",{children:C})},icon:"❌",style:{backdropFilter:"blur(16px) saturate(200%)",background:((c=l.glassCard)==null?void 0:c.background)||"rgba(15, 20, 25, 0.15)",border:((O=l.glassCard)==null?void 0:O.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((U=(z=l.palette)==null?void 0:z.text)==null?void 0:U.primary)||"#ffffff"}}})},Ne=()=>{L(!1),H(null)},de=a=>{F({isOpen:!0,employee:a})},_e=()=>{F({isOpen:!1,employee:null})},Ce=(a,p)=>{y&&y(a,{profile_image_url:p})},pe=n.useMemo(()=>{const a=[{name:"#",uid:"sl",width:60},{name:"EMPLOYEE",uid:"employee",width:"auto",minWidth:200},{name:"DEPARTMENT",uid:"department",width:180},{name:"DESIGNATION",uid:"designation",width:180},{name:"ACTIONS",uid:"actions",width:80}];return i||a.splice(2,0,{name:"CONTACT",uid:"contact",width:220}),!i&&!Y&&a.splice(a.length-1,0,{name:"ATTENDANCE TYPE",uid:"attendance_type",width:180}),a},[i,Y]),he=(a,p,D)=>{const v=a[p],I=(o!=null&&o.currentPage&&(o!=null&&o.perPage)?Number((o.currentPage-1)*o.perPage):0)+(typeof D=="number"?D:0)+1;switch(p){case"sl":return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e.jsx("span",{className:"text-sm font-semibold text-foreground",children:I})})});case"employee":return e.jsxs("div",{className:"min-w-max",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($e,{src:(a==null?void 0:a.profile_image_url)||(a==null?void 0:a.profile_image),name:a==null?void 0:a.name,size:i?"sm":"md",onClick:()=>de(a)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"font-semibold text-foreground text-left whitespace-nowrap",children:a==null?void 0:a.name}),!i&&e.jsxs("p",{className:"text-default-500 text-left text-xs whitespace-nowrap",children:["ID: ",(a==null?void 0:a.employee_id)||"N/A"]})]})]}),i&&e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(ur,{className:"w-3 h-3"}),(a==null?void 0:a.employee_id)||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ee,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:a==null?void 0:a.email})]}),(a==null?void 0:a.phone)&&e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(Se,{className:"w-3 h-3"}),a==null?void 0:a.phone]})]})]});case"contact":return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ee,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:a==null?void 0:a.email})]}),(a==null?void 0:a.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Se,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:a==null?void 0:a.phone})]})]});case"department":return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(ue,{children:[e.jsx(be,{children:e.jsx(S,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e.jsx(we,{className:"w-4 h-4"}),endContent:e.jsx(je,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:a.department_name||"Select Department"})})}),e.jsx(fe,{"aria-label":"Department options",children:g==null?void 0:g.map(c=>e.jsx(ce,{onPress:()=>J(a.id,c.id),children:c.name},c.id.toString()))})]})});case"designation":const f=a.department_id,R=(t==null?void 0:t.filter(c=>c.department_id===parseInt(f)))||[];return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(ue,{isDisabled:!f,children:[e.jsx(be,{children:e.jsx(S,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[150px] transition-all duration-300 ${f?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,isDisabled:!f,startContent:e.jsx(ve,{className:"w-4 h-4"}),endContent:f&&e.jsx(je,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:f?a.designation_name||"Select Designation":"Select Department First"})})}),e.jsx(fe,{"aria-label":"Designation options",children:R.map(c=>e.jsx(ce,{onPress:()=>_(a.id,c.id),children:c.title},c.id.toString()))})]})});case"attendance_type":return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(ue,{children:[e.jsx(be,{children:e.jsx(S,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e.jsx(Re,{className:"w-4 h-4"}),endContent:e.jsx(je,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:a.attendance_type_name||"Select Type"})})}),e.jsx(fe,{"aria-label":"Attendance Type options",children:x==null?void 0:x.map(c=>e.jsx(ce,{onPress:()=>M(a.id,c.id),children:c.name},c.id.toString()))})]})});case"actions":return e.jsx("div",{className:"relative flex justify-center items-center",children:e.jsxs(ue,{children:[e.jsx(be,{children:e.jsx(S,{isIconOnly:!0,variant:"light",className:"text-default-400 hover:text-foreground transition-all duration-300",children:e.jsx(je,{className:"w-5 h-5"})})}),e.jsxs(fe,{"aria-label":"Employee Actions",children:[e.jsx(ce,{startContent:e.jsx(er,{className:"w-4 h-4"}),onPress:()=>Ie.visit(route("profile",{user:a.id})),children:"Edit Profile"},"edit"),e.jsx(ce,{className:"text-danger",color:"danger",startContent:e.jsx(Le,{className:"w-4 h-4"}),onPress:()=>oe(a),children:"Delete"},"delete")]})]})});default:return v}},ge=()=>!o||X?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10 bg-white/5 backdrop-blur-md",children:[e.jsxs("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(o.currentPage-1)*o.perPage+1," to ",Math.min(o.currentPage*o.perPage,o.total)," of ",o.total," employees"]}),e.jsx(rr,{total:Math.ceil(o.total/o.perPage),initialPage:o.currentPage,page:o.currentPage,onChange:q,size:i?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]});return e.jsxs("div",{className:"w-full overflow-hidden flex flex-col border border-white/10 rounded-lg relative",style:{maxHeight:"calc(100vh - 200px)"},children:[X&&e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-xs flex items-center justify-center z-50 rounded-lg",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:[e.jsx(Ge,{size:"lg",color:"primary"}),e.jsx("span",{className:"text-sm text-foreground",children:"Loading employees..."})]})}),e.jsx("div",{className:"overflow-auto grow",children:e.jsxs(fr,{"aria-label":"Employees table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs sticky top-0 z-10 whitespace-nowrap",td:"border-b border-white/5 py-3 whitespace-nowrap",table:"border-collapse table-auto",thead:"bg-white/5",tr:"hover:bg-white/5"},isHeaderSticky:!0,isCompact:i,children:[e.jsx(jr,{columns:pe,children:a=>e.jsx(wr,{align:a.uid==="actions"||a.uid==="sl"?"center":"start",width:a.width,minWidth:a.minWidth,className:a.uid==="employee"?"whitespace-nowrap":"",children:a.name},a.uid)}),e.jsx(vr,{items:$||[],emptyContent:"No employees found",loadingContent:e.jsx(Ge,{}),isLoading:X,children:(a,p)=>{const D=$?$.findIndex(v=>v.id===a.id):p;return e.jsx(yr,{className:"transition-all duration-300 hover:bg-white/5",children:v=>e.jsx(Nr,{className:"transition-all duration-300",children:e.jsx("div",{className:"transition-all duration-200",children:he(a,v,D)})})},a.id)}})]})}),ge(),e.jsx(Rr,{open:G,onClose:Ne,employee:m,onConfirm:ye,loading:P}),e.jsx(Sr,{isOpen:N.isOpen,onClose:_e,employee:N.employee,onImageUpdate:Ce})]})},Er=({title:$,departments:g,designations:t,attendanceTypes:x})=>{var pe,he,ge,a,p,D,v,A,E,I,f,R,c,O,z,U,C,W,u;const V=Te(),i=Ve(V.breakpoints.down("sm")),Y=Ve(V.breakpoints.down("md")),[o,q]=n.useState([]),[T,re]=n.useState(!0),[X,y]=n.useState(0),[ne,l]=n.useState(1),[d,Z]=n.useState({search:"",department:"all",designation:"all",attendanceType:"all"}),[B,ae]=n.useState("table"),[te,xe]=n.useState(!1),[G,L]=n.useState({currentPage:1,perPage:10,total:0}),[m,H]=n.useState({overview:{total_employees:0,active_employees:0,inactive_employees:0,total_departments:0,total_designations:0,total_attendance_types:0},distribution:{by_department:[],by_designation:[],by_attendance_type:[]},hiring_trends:{recent_hires:{last_30_days:0,last_90_days:0,last_year:0},monthly_growth_rate:0,current_month_hires:0},workforce_health:{status_ratio:{active_percentage:0,inactive_percentage:0,retention_rate:0},retention_rate:0,turnover_rate:0},quick_metrics:{headcount:0,active_ratio:0,department_diversity:0,role_diversity:0,recent_activity:0}}),P=n.useCallback(async()=>{re(!0);try{const{data:r}=await le.get(route("employees.paginate"),{params:{page:G.currentPage,perPage:G.perPage,search:d.search,department:d.department,designation:d.designation,attendanceType:d.attendanceType}});q(r.employees.data),y(r.employees.total),l(r.employees.last_page),L(s=>({...s,total:r.employees.total})),r.stats&&H(r.stats)}catch(r){console.error("Error fetching employees:",r),ee.error("Failed to load employees data")}finally{re(!1)}},[G.currentPage,G.perPage,d]),w=n.useCallback(async()=>{try{const{data:r}=await le.get(route("employees.stats"));r.stats&&H(r.stats)}catch(r){console.error("Error fetching employee stats:",r)}},[]);n.useEffect(()=>{P(),w()},[P,w]);const N=n.useCallback(r=>{Z(s=>({...s,search:r})),L(s=>({...s,currentPage:1}))},[]),F=n.useCallback(r=>{Z(s=>({...s,department:r,designation:r!=="all"?"all":s.designation})),L(s=>({...s,currentPage:1}))},[]),J=n.useCallback(r=>{Z(s=>({...s,designation:r})),L(s=>({...s,currentPage:1}))},[]),_=n.useCallback(r=>{Z(s=>({...s,attendanceType:r})),L(s=>({...s,currentPage:1}))},[]),M=n.useCallback(r=>{L(s=>({...s,currentPage:r}))},[]),oe=n.useCallback(r=>{L(s=>({...s,perPage:r,currentPage:1}))},[]),ye=n.useCallback((r,s)=>{q(h=>h.map(b=>b.id===r?{...b,...s}:b))},[]),Ne=n.useCallback(r=>{q(s=>s.filter(h=>h.id!==r)),y(s=>s-1),L(s=>({...s,total:s.total-1})),w()},[w]),de=n.useMemo(()=>d.department==="all"?t:t.filter(r=>r.department_id===parseInt(d.department)),[t,d.department]),_e=n.useMemo(()=>{var r,s,h,b,Q,K,Oe,ze,Ue,We,Be;return[{title:"Total Employees",value:((r=m.overview)==null?void 0:r.total_employees)||0,icon:e.jsx(Pe,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Headcount"},{title:"Active Employees",value:((s=m.overview)==null?void 0:s.active_employees)||0,icon:e.jsx(Ke,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((b=(h=m.workforce_health)==null?void 0:h.status_ratio)==null?void 0:b.active_percentage)||0}% Active`},{title:"Departments",value:((Q=m.overview)==null?void 0:Q.total_departments)||0,icon:e.jsx(we,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Department Diversity"},{title:"Designations",value:((K=m.overview)==null?void 0:K.total_designations)||0,icon:e.jsx(ve,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Role Diversity"},{title:"Retention Rate",value:`${((Oe=m.workforce_health)==null?void 0:Oe.retention_rate)||0}%`,icon:e.jsx(_r,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Employee Retention"},{title:"Recent Hires",value:((Ue=(ze=m.hiring_trends)==null?void 0:ze.recent_hires)==null?void 0:Ue.last_30_days)||0,icon:e.jsx(Ye,{}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 Days"},{title:"Growth Rate",value:`${((We=m.hiring_trends)==null?void 0:We.monthly_growth_rate)||0}%`,icon:e.jsx(Cr,{}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Monthly Growth"},{title:"Attendance Types",value:((Be=m.overview)==null?void 0:Be.total_attendance_types)||0,icon:e.jsx(Re,{}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Available Types"}]},[m]),Ce=({user:r,index:s})=>{const h=g==null?void 0:g.find(K=>K.id===r.department_id),b=t==null?void 0:t.find(K=>K.id===r.designation_id),Q=x==null?void 0:x.find(K=>K.id===r.attendance_type_id);return e.jsx(Je,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>Ie.visit(route("profile",{user:r.id})),children:e.jsxs(qe,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e.jsx("div",{className:"shrink-0",children:e.jsx($e,{src:(r==null?void 0:r.profile_image_url)||(r==null?void 0:r.profile_image),name:r==null?void 0:r.name,size:"md",fallback:e.jsx(Qe,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-semibold text-foreground text-left text-sm",children:r==null?void 0:r.name}),e.jsxs("span",{className:"text-default-500 text-left text-xs",children:["ID: ",(r==null?void 0:r.employee_id)||"N/A"]})]}),e.jsx("div",{className:"flex-1 min-w-0 flex justify-end",children:e.jsx(S,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:K=>{K.stopPropagation(),Ie.visit(route("profile",{user:r.id}))},children:e.jsx(er,{className:"w-4 h-4"})})})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-3",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ee,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs truncate",children:r==null?void 0:r.email})]}),(r==null?void 0:r.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Se,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs",children:r==null?void 0:r.phone})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[h&&e.jsx(se,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e.jsx(we,{className:"w-3 h-3"}),children:h.name}),b&&e.jsx(se,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e.jsx(ve,{className:"w-3 h-3"}),children:b.title}),Q&&e.jsx(se,{size:"sm",variant:"bordered",className:"text-xs",startContent:e.jsx(Re,{className:"w-3 h-3"}),children:Q.name})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(ar,{title:$}),e.jsx(k,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(br,{in:!0,timeout:800,children:e.jsx(ir,{children:e.jsx(dr,{title:"Employee Directory",subtitle:"Manage employee information, departments, and designations",icon:e.jsx(Pe,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:i?"Add":"Add Employee",icon:e.jsx(Ye,{className:"w-4 h-4"}),className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}],children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(cr,{stats:_e,className:"mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx(j,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Department Distribution"}),e.jsx("div",{className:"space-y-3",children:(he=(pe=m.distribution)==null?void 0:pe.by_department)==null?void 0:he.slice(0,5).map((r,s)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-linear-to-r from-blue-500 to-purple-500 rounded-full",style:{width:`${r.percentage}%`}})}),e.jsx("span",{className:"text-xs text-default-500 w-8",children:r.count})]})]},s))})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx(j,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Hiring Trends"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Last 30 Days"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((a=(ge=m.hiring_trends)==null?void 0:ge.recent_hires)==null?void 0:a.last_30_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Last 90 Days"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((D=(p=m.hiring_trends)==null?void 0:p.recent_hires)==null?void 0:D.last_90_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"This Year"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((A=(v=m.hiring_trends)==null?void 0:v.recent_hires)==null?void 0:A.last_year)||0})]}),e.jsx("div",{className:"pt-2 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Monthly Growth"}),e.jsxs("span",{className:`text-sm font-medium ${(((E=m.hiring_trends)==null?void 0:E.monthly_growth_rate)||0)>=0?"text-green-400":"text-red-400"}`,children:[((I=m.hiring_trends)==null?void 0:I.monthly_growth_rate)||0,"%"]})]})})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx(j,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Workforce Health"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Retention Rate"}),e.jsxs("span",{className:"text-sm font-medium text-green-400",children:[((f=m.workforce_health)==null?void 0:f.retention_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Turnover Rate"}),e.jsxs("span",{className:"text-sm font-medium text-orange-400",children:[((R=m.workforce_health)==null?void 0:R.turnover_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Active Employees"}),e.jsxs("span",{className:"text-sm font-medium text-blue-400",children:[((O=(c=m.workforce_health)==null?void 0:c.status_ratio)==null?void 0:O.active_percentage)||0,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx(j,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Attendance Types"}),e.jsx("div",{className:"space-y-3",children:(U=(z=m.distribution)==null?void 0:z.by_attendance_type)==null?void 0:U.map((r,s)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-linear-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${r.percentage}%`}})}),e.jsx("span",{className:"text-xs text-default-500 w-8",children:r.count})]})]},s))})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(kr,{label:"Search Employees",placeholder:"Search by name, email, or employee ID...",value:d.search,onChange:r=>N(r.target.value),InputProps:{startAdornment:e.jsx(Pr,{position:"start",children:e.jsx(sr,{className:"w-4 h-4"})})},fullWidth:!0,size:i?"small":"medium",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"12px",color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&.Mui-focused fieldset":{borderColor:"var(--primary-color)"},"& input::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"var(--primary-color)"}}}})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(Dr,{variant:"bordered",className:"bg-white/5",children:[e.jsxs(S,{isIconOnly:i,color:B==="table"?"primary":"default",onPress:()=>ae("table"),className:B==="table"?"bg-blue-500/20":"",children:[e.jsx(Fr,{className:"w-4 h-4"}),!i&&e.jsx("span",{className:"ml-1",children:"Table"})]}),e.jsxs(S,{isIconOnly:i,color:B==="grid"?"primary":"default",onPress:()=>ae("grid"),className:B==="grid"?"bg-blue-500/20":"",children:[e.jsx(lr,{className:"w-4 h-4"}),!i&&e.jsx("span",{className:"ml-1",children:"Grid"})]})]}),e.jsxs(S,{isIconOnly:i,variant:"bordered",onPress:()=>xe(!te),className:te?"bg-purple-500/20":"bg-white/5",children:[e.jsx(Mr,{className:"w-4 h-4"}),!i&&e.jsx("span",{className:"ml-1",children:"Filters"})]})]})]}),te&&e.jsx(or,{in:!0,timeout:300,children:e.jsxs("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(Fe,{size:"small",children:[e.jsx(Me,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Department"}),e.jsxs(De,{value:d.department,onChange:r=>F(r.target.value),label:"Department",sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(16px)",borderRadius:"12px","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.15)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(59, 130, 246, 0.5)"},"& .MuiSelect-select":{color:"rgba(255, 255, 255, 0.9)"},"& .MuiSelect-icon":{color:"rgba(255, 255, 255, 0.7)"}},MenuProps:{PaperProps:{sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(16px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px","& .MuiMenuItem-root":{color:"rgba(255, 255, 255, 0.9)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)"},"&.Mui-selected":{backgroundColor:"rgba(59, 130, 246, 0.3)"}}}}},children:[e.jsx(ie,{value:"all",children:"All Departments"}),g==null?void 0:g.map(r=>e.jsx(ie,{value:r.id.toString(),children:r.name},r.id.toString()))]})]}),e.jsxs(Fe,{size:"small",children:[e.jsx(Me,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Designation"}),e.jsxs(De,{value:d.designation,onChange:r=>J(r.target.value),label:"Designation",sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(16px)",borderRadius:"12px","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.15)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(59, 130, 246, 0.5)"},"& .MuiSelect-select":{color:"rgba(255, 255, 255, 0.9)"},"& .MuiSelect-icon":{color:"rgba(255, 255, 255, 0.7)"}},MenuProps:{PaperProps:{sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(16px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px","& .MuiMenuItem-root":{color:"rgba(255, 255, 255, 0.9)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)"},"&.Mui-selected":{backgroundColor:"rgba(59, 130, 246, 0.3)"}}}}},children:[e.jsx(ie,{value:"all",children:"All Designations"}),de==null?void 0:de.map(r=>e.jsx(ie,{value:r.id.toString(),children:r.title},r.id.toString()))]})]}),!i&&e.jsxs(Fe,{size:"small",children:[e.jsx(Me,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Attendance Type"}),e.jsxs(De,{value:d.attendanceType,onChange:r=>_(r.target.value),label:"Attendance Type",sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(16px)",borderRadius:"12px","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.15)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(59, 130, 246, 0.5)"},"& .MuiSelect-select":{color:"rgba(255, 255, 255, 0.9)"},"& .MuiSelect-icon":{color:"rgba(255, 255, 255, 0.7)"}},MenuProps:{PaperProps:{sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(16px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px","& .MuiMenuItem-root":{color:"rgba(255, 255, 255, 0.9)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)"},"&.Mui-selected":{backgroundColor:"rgba(59, 130, 246, 0.3)"}}}}},children:[e.jsx(ie,{value:"all",children:"All Attendance Types"}),x==null?void 0:x.map(r=>e.jsx(ie,{value:r.id.toString(),children:r.name},r.id.toString()))]})]})]}),(d.search||d.department!=="all"||d.designation!=="all"||d.attendanceType!=="all")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[d.search&&e.jsxs(se,{variant:"flat",color:"primary",size:"sm",onClose:()=>Z(r=>({...r,search:""})),children:["Search: ",d.search]}),d.department!=="all"&&e.jsxs(se,{variant:"flat",color:"secondary",size:"sm",onClose:()=>Z(r=>({...r,department:"all"})),children:["Department: ",(C=g==null?void 0:g.find(r=>r.id===parseInt(d.department)))==null?void 0:C.name]}),d.designation!=="all"&&e.jsxs(se,{variant:"flat",color:"warning",size:"sm",onClose:()=>Z(r=>({...r,designation:"all"})),children:["Designation: ",(W=t==null?void 0:t.find(r=>r.id===parseInt(d.designation)))==null?void 0:W.title]}),d.attendanceType!=="all"&&e.jsxs(se,{variant:"flat",color:"success",size:"sm",onClose:()=>Z(r=>({...r,attendanceType:"all"})),children:["Attendance: ",(u=x==null?void 0:x.find(r=>r.id===parseInt(d.attendanceType)))==null?void 0:u.name]})]})]})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs(j,{variant:"h6",className:"font-semibold text-foreground",children:[B==="table"?"Employee Table":"Employee Grid",e.jsxs("span",{className:"text-sm text-default-500 ml-2",children:["(",X," ",X===1?"employee":"employees",")"]})]})}),T?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(me,{size:40}),e.jsx(j,{className:"mt-4",color:"textSecondary",children:"Loading employees data..."})]}):B==="table"?e.jsx(Ar,{allUsers:o,departments:g,designations:t,attendanceTypes:x,setUsers:q,isMobile:i,isTablet:Y,pagination:G,onPageChange:M,onRowsPerPageChange:oe,totalUsers:X,loading:T,updateEmployeeOptimized:ye,deleteEmployeeOptimized:Ne}):e.jsxs("div",{className:"p-4",children:[o.length>0?e.jsx("div",{className:`grid gap-4 ${i?"grid-cols-1":Y?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:o.map((r,s)=>e.jsx(Ce,{user:r,index:s},r.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Pe,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e.jsx(j,{variant:"body1",color:"textSecondary",children:"No employees found"}),e.jsx(j,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),o.length>0&&e.jsx("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e.jsx(rr,{total:Math.ceil(X/G.perPage),initialPage:G.currentPage,page:G.currentPage,onChange:M,size:i?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})})]})};Er.layout=$=>e.jsx(nr,{children:$});export{Er as default};
