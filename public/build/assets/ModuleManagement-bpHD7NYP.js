import{r,j as e,Q as js,d as l,F as gs,b as ee,s as vs,c as Ee,a as k,K as Pe,A as Oe}from"./app-IdpngMkR.js";import{G as Re}from"./GlassCard-jc31XWL2.js";import{y as oe,z as Ie,A as ys,h as q,i as U,j as V,k as B,B as ze,C as ce,e as de,f as me,g as ue,m as N,D as Cs,E as ws}from"./Dashboard-H_dAcQon.js";import{P as bs}from"./PageHeader-CZIo3d06.js";import{S as Ns}from"./StatsCards-CXuVOTyS.js";import{s as f}from"./toastUtils-BRfXBOHh.js";import{F as Ue}from"./DocumentIcon-DXCpN307.js";import{F as _s}from"./ShieldCheckIcon-CqozTQ0z.js";import{F as pe}from"./PlusIcon-DJ8jguAP.js";import{F as $e}from"./MagnifyingGlassIcon-DRJ91I97.js";import{s as he}from"./chunk-TQNYOUFX-B4i4cabV.js";import{m as K}from"./chunk-O5MCAK4F-BXQCC1Zz.js";import{F as se}from"./KeyIcon-DnISCWLi.js";import{c as Ae}from"./chunk-XJ2YRSUP-DCTq6x2T.js";import{F as xe}from"./EllipsisVerticalIcon-BO4zh-km.js";import{F as fe}from"./PencilSquareIcon-RVHZLPhu.js";import{F as je}from"./TrashIcon-az9aV_0n.js";import{m as De}from"./proxy-WyzghjU6.js";import{t as Ss,F as Ms}from"./XMarkIcon-DvCWusFn.js";import{i as c}from"./chunk-SSA7SXE4-DEXv6Nyb.js";import{s as te,l as I}from"./chunk-Y2AYO5NJ-u-cYcFEY.js";import{c as Le}from"./chunk-D5XJWRAV-CGZKTfyo.js";import{c as C}from"./chunk-IHOGUXIG-DxHOhg_j.js";import"./MapPinIcon-CnQnn2gm.js";import"./EnvelopeIcon-I6ohdqtg.js";import"./UserGroupIcon-HeeXETRd.js";import"./ClockIcon-Eyae4M0k.js";import"./UserIcon-BH9cz2nj.js";import"./index-Cb4JAULR.js";import"./logo-Pwvcz7fP.js";import"./features-animation-DicNX1Q6.js";import"./create-visual-element-CNGEcOaa.js";import"./CheckCircleIcon-C3zPhB0m.js";import"./ExclamationTriangleIcon-CyTSis3O.js";import"./chunk-TLYTI3QM-cSc2rxEF.js";import"./useToggleState-Do2T2MXz.js";function Fs({title:n,titleId:i,...u},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},u),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 0 1-1.125-1.125v-3.75ZM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-8.25ZM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-2.25Z"}))}const ks=r.forwardRef(Fs);function Es({title:n,titleId:i,...u},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},u),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75 2.25 12l4.179 2.25m0-4.5 5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0 4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0-5.571 3-5.571-3"}))}const Ps=r.forwardRef(Es),Os={page:e.jsx(Ue,{className:"w-4 h-4"}),section:e.jsx(ks,{className:"w-4 h-4"}),widget:e.jsx(ws,{className:"w-4 h-4"}),action:e.jsx(Cs,{className:"w-4 h-4"}),api:e.jsx(Ms,{className:"w-4 h-4"})},qe={page:"primary",section:"secondary",widget:"success",action:"warning",api:"danger"},Rs={core_system:"primary",self_service:"secondary",human_resources:"success",project_management:"warning",document_management:"default",customer_relations:"primary",supply_chain:"secondary",retail_sales:"success",financial_management:"warning",system_administration:"danger"},ge={view:{label:"View",description:"Can view/read data"},create:{label:"Create",description:"Can create new records"},update:{label:"Edit",description:"Can modify existing records"},delete:{label:"Delete",description:"Can remove records"},import:{label:"Import",description:"Can import data from files"},export:{label:"Export",description:"Can export data to files"},approve:{label:"Approve",description:"Can approve requests"},assign:{label:"Assign",description:"Can assign to users"},manage:{label:"Manage",description:"Full management access"},operate:{label:"Operate",description:"Can operate/execute"},punch:{label:"Punch",description:"Can punch attendance"},change:{label:"Change",description:"Can change settings"},impersonate:{label:"Impersonate",description:"Can act as another user"},analytics:{label:"Analytics",description:"Can view analytics"},settings:{label:"Settings",description:"Can configure settings"},log:{label:"Log",description:"Can view logs"},schedule:{label:"Schedule",description:"Can manage schedules"},restore:{label:"Restore",description:"Can restore data"},own:{label:"Own",description:"Access to own records only"}},Ve=n=>n.split("-").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" "),Is=n=>{const i=n.split(".");if(i.length>=2){const u=Ve(i[0]),d=i[1];if(i.length>=3&&d==="own"){const z=i[2];return`${(ge[z]||{label:z.charAt(0).toUpperCase()+z.slice(1)}).label} Own ${u}`}return`${(ge[d]||{label:d.charAt(0).toUpperCase()+d.slice(1)}).label} ${u}`}return n},zs=n=>{var u;const i=n.split(".");if(i.length>=2){const d=i.length>=3&&i[1]==="own"?i[2]:i[1];return((u=ge[d])==null?void 0:u.description)||`Permission for ${n}`}return`Permission for ${n}`},$s=n=>{const i={};n.forEach(v=>{const E=v.name.split(".")[0];i[E]||(i[E]={name:Ve(E),permissions:[]}),i[E].permissions.push({...v,displayName:Is(v.name),description:zs(v.name)})});const u=Object.keys(i).sort(),d={};return u.forEach(v=>{d[v]=i[v]}),d},As=(n,i)=>{const[u,d]=r.useState(n);return r.useEffect(()=>{const v=setTimeout(()=>{d(n)},i);return()=>clearTimeout(v)},[n,i]),u},yt=n=>{var ke;const{modules:i=[],permissions:u=[],statistics:d={},categories:v={},componentTypes:z={},title:E="Module Permission Registry"}=n,[ve,Be]=r.useState(i),[A,Ke]=r.useState(d),[O,y]=r.useState(!1),[ye,Te]=r.useState(""),[T,Ge]=r.useState("all"),[D,Qe]=r.useState("all"),[Ze,He]=r.useState(new Set),[We,Je]=r.useState(new Set),[Xe,G]=r.useState(!1),[Ye,Q]=r.useState(!1),[es,Z]=r.useState(!1),[ss,H]=r.useState(!1),[ts,W]=r.useState(!1),[J,Ce]=r.useState(null),[X,we]=r.useState(null),[Y,be]=r.useState(null),[as,rs]=r.useState(null),[is,ns]=r.useState(null),[p,Ne]=r.useState(null),[w,ls]=r.useState(null),[o,_]=r.useState({code:"",name:"",description:"",icon:"",category:"core_system",route_prefix:"",is_active:!0,priority:100}),[h,M]=r.useState({code:"",name:"",description:"",icon:"",route:"",is_active:!0,priority:100}),[j,P]=r.useState({code:"",name:"",description:"",type:"page",route:"",is_active:!0}),[S,F]=r.useState([]),L=As(ye,300),ae=r.useMemo(()=>ve.filter(s=>{var b;const t=!L||s.name.toLowerCase().includes(L.toLowerCase())||s.code.toLowerCase().includes(L.toLowerCase())||((b=s.description)==null?void 0:b.toLowerCase().includes(L.toLowerCase())),a=T==="all"||s.category===T,m=D==="all"||D==="active"&&s.is_active||D==="inactive"&&!s.is_active;return t&&a&&m}),[ve,L,T,D]),os=r.useMemo(()=>[{title:"Total Modules",value:A.total_modules||0,icon:e.jsx(oe,{className:"w-6 h-6"}),color:"primary",description:"Top-level modules"},{title:"Sub-Modules",value:A.total_sub_modules||0,icon:e.jsx(Ie,{className:"w-6 h-6"}),color:"secondary",description:"Functional areas"},{title:"Components",value:A.total_components||0,icon:e.jsx(Ue,{className:"w-6 h-6"}),color:"success",description:"UI components"},{title:"Permission Rules",value:A.total_permission_requirements||0,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"warning",description:"Access requirements"}],[A]),_e=s=>{He(t=>{const a=new Set(t);return a.has(s)?a.delete(s):a.add(s),a})},Se=s=>{Je(t=>{const a=new Set(t);return a.has(s)?a.delete(s):a.add(s),a})},$=async()=>{y(!0);try{const s=await k.get(route("modules.api.index"));Be(s.data.modules||[]),Ke(s.data.statistics||{}),f("Data refreshed successfully","success")}catch(s){f("Failed to refresh data","error"),console.error("Refresh error:",s)}finally{y(!1)}},re=(s=null)=>{s?(Ce(s),_({code:s.code,name:s.name,description:s.description||"",icon:s.icon||"",category:s.category||"core_system",route_prefix:s.route_prefix||"",is_active:s.is_active,priority:s.priority||100})):(Ce(null),_({code:"",name:"",description:"",icon:"",category:"core_system",route_prefix:"",is_active:!0,priority:100})),G(!0)},Me=(s,t=null)=>{rs(s),t?(we(t),M({code:t.code,name:t.name,description:t.description||"",icon:t.icon||"",route:t.route||"",is_active:t.is_active,priority:t.priority||100})):(we(null),M({code:"",name:"",description:"",icon:"",route:"",is_active:!0,priority:100})),Q(!0)},Fe=(s,t=null)=>{ns(s),t?(be(t),P({code:t.code,name:t.name,description:t.description||"",type:t.type||"page",route:t.route||"",is_active:t.is_active})):(be(null),P({code:"",name:"",description:"",type:"page",route:"",is_active:!0})),Z(!0)},ie=s=>{var a;ls(s);const t=((a=s.permission_requirements)==null?void 0:a.map(m=>m.permission_id))||[];F(t),H(!0)},cs=async()=>{var s,t;y(!0);try{J?(await k.put(route("modules.update",J.id),o),f("Module updated successfully","success")):(await k.post(route("modules.store"),o),f("Module created successfully","success")),G(!1),$()}catch(a){f(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save module","error")}finally{y(!1)}},ds=async()=>{var s,t;y(!0);try{X?(await k.put(route("modules.sub-modules.update",X.id),h),f("Sub-module updated successfully","success")):(await k.post(route("modules.sub-modules.store",as),h),f("Sub-module created successfully","success")),Q(!1),$()}catch(a){f(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save sub-module","error")}finally{y(!1)}},ms=async()=>{var s,t;y(!0);try{Y?(await k.put(route("modules.components.update",Y.id),j),f("Component updated successfully","success")):(await k.post(route("modules.components.store",is),j),f("Component created successfully","success")),Z(!1),$()}catch(a){f(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save component","error")}finally{y(!1)}},us=async()=>{var s,t;y(!0);try{let a;w.type==="module"?a=route("modules.sync-permissions",w.id):w.type==="sub_module"?a=route("modules.sub-modules.sync-permissions",w.id):a=route("modules.components.sync-permissions",w.id),await k.post(a,{permission_ids:S}),f("Permissions updated successfully","success"),H(!1),$()}catch(a){f(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save permissions","error")}finally{y(!1)}},ne=(s,t)=>{Ne({...s,type:t}),W(!0)},ps=async()=>{var s,t;if(p){y(!0);try{let a;p.type==="module"?a=route("modules.destroy",p.id):p.type==="sub_module"?a=route("modules.sub-modules.destroy",p.id):a=route("modules.components.destroy",p.id),await k.delete(a),f(`${p.type} deleted successfully`,"success"),W(!1),Ne(null),$()}catch(a){f(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to delete","error")}finally{y(!1)}}},hs=s=>{var b;const t=Ze.has(s.id),a=s.sub_modules||[],m=((b=s.permission_requirements)==null?void 0:b.length)||0;return e.jsx(Ee,{className:"mb-3",children:e.jsxs(ee,{className:"p-0",children:[e.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer hover:bg-default-100 transition-colors ${s.is_active?"":"opacity-60"}`,onClick:()=>_e(s.id),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(l,{isIconOnly:!0,size:"sm",variant:"light",onClick:g=>{g.stopPropagation(),_e(s.id)},children:t?e.jsx(Pe,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})}),e.jsx(oe,{className:"w-6 h-6 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:s.name}),e.jsx(C,{size:"sm",variant:"flat",color:Rs[s.category]||"default",children:s.code}),!s.is_active&&e.jsx(C,{size:"sm",variant:"flat",color:"danger",children:"Inactive"})]}),e.jsx("p",{className:"text-sm text-default-500 mt-1",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{content:a.length,color:"primary",size:"sm",children:e.jsx(C,{size:"sm",variant:"bordered",children:"Sub-modules"})}),e.jsx(ce,{content:m,color:"warning",size:"sm",children:e.jsx(C,{size:"sm",variant:"bordered",children:"Permissions"})}),e.jsxs(de,{children:[e.jsx(me,{children:e.jsx(l,{isIconOnly:!0,size:"sm",variant:"light",onClick:g=>g.stopPropagation(),children:e.jsx(xe,{className:"w-5 h-5"})})}),e.jsxs(ue,{children:[e.jsx(N,{startContent:e.jsx(fe,{className:"w-4 h-4"}),onClick:()=>re(s),children:"Edit Module"},"edit"),e.jsx(N,{startContent:e.jsx(se,{className:"w-4 h-4"}),onClick:()=>ie({...s,type:"module"}),children:"Manage Permissions"},"permissions"),e.jsx(N,{startContent:e.jsx(pe,{className:"w-4 h-4"}),onClick:()=>Me(s.id),children:"Add Sub-Module"},"add-submodule"),e.jsx(N,{startContent:e.jsx(je,{className:"w-4 h-4"}),color:"danger",className:"text-danger",onClick:()=>ne(s,"module"),children:"Delete Module"},"delete")]})]})]})]}),e.jsx(Oe,{children:t&&a.length>0&&e.jsx(De.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"border-t border-default-200",children:e.jsx("div",{className:"pl-8 py-2",children:a.map(g=>xs(g,s.id))})})})]})},s.id)},xs=(s,t)=>{var b;const a=We.has(s.id),m=s.components||[];return(b=s.permission_requirements)!=null&&b.length,e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg bg-default-50 hover:bg-default-100 cursor-pointer transition-colors ${s.is_active?"":"opacity-60"}`,onClick:()=>Se(s.id),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(l,{isIconOnly:!0,size:"sm",variant:"light",onClick:g=>{g.stopPropagation(),Se(s.id)},children:a?e.jsx(Pe,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})}),e.jsx(Ie,{className:"w-5 h-5 text-secondary"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx(C,{size:"sm",variant:"flat",color:"secondary",children:s.code}),!s.is_active&&e.jsx(C,{size:"sm",variant:"flat",color:"danger",children:"Inactive"})]}),s.description&&e.jsx("p",{className:"text-xs text-default-400 mt-0.5",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{content:m.length,color:"success",size:"sm",children:e.jsx(C,{size:"sm",variant:"bordered",children:"Components"})}),e.jsxs(de,{children:[e.jsx(me,{children:e.jsx(l,{isIconOnly:!0,size:"sm",variant:"light",onClick:g=>g.stopPropagation(),children:e.jsx(xe,{className:"w-4 h-4"})})}),e.jsxs(ue,{children:[e.jsx(N,{startContent:e.jsx(fe,{className:"w-4 h-4"}),onClick:()=>Me(t,s),children:"Edit Sub-Module"},"edit"),e.jsx(N,{startContent:e.jsx(se,{className:"w-4 h-4"}),onClick:()=>ie({...s,type:"sub_module"}),children:"Manage Permissions"},"permissions"),e.jsx(N,{startContent:e.jsx(pe,{className:"w-4 h-4"}),onClick:()=>Fe(s.id),children:"Add Component"},"add-component"),e.jsx(N,{startContent:e.jsx(je,{className:"w-4 h-4"}),color:"danger",className:"text-danger",onClick:()=>ne(s,"sub_module"),children:"Delete Sub-Module"},"delete")]})]})]})]}),e.jsx(Oe,{children:a&&m.length>0&&e.jsx(De.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"pl-10 mt-2",children:m.map(g=>fs(g,s.id))})})]},s.id)},fs=(s,t)=>{var m;const a=((m=s.permission_requirements)==null?void 0:m.length)||0;return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md bg-default-100 hover:bg-default-200 mb-1 transition-colors ${s.is_active?"":"opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(Ss,{content:s.type,children:e.jsx("span",{className:`text-${qe[s.type]}`,children:Os[s.type]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:s.name}),e.jsx(C,{size:"sm",variant:"flat",color:qe[s.type],children:s.type}),s.route&&e.jsx(C,{size:"sm",variant:"bordered",color:"default",children:s.route})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a>0&&e.jsxs(C,{size:"sm",variant:"flat",color:"warning",children:[a," perms"]}),e.jsxs(de,{children:[e.jsx(me,{children:e.jsx(l,{isIconOnly:!0,size:"sm",variant:"light",children:e.jsx(xe,{className:"w-4 h-4"})})}),e.jsxs(ue,{children:[e.jsx(N,{startContent:e.jsx(fe,{className:"w-4 h-4"}),onClick:()=>Fe(t,s),children:"Edit Component"},"edit"),e.jsx(N,{startContent:e.jsx(se,{className:"w-4 h-4"}),onClick:()=>ie({...s,type:"component"}),children:"Manage Permissions"},"permissions"),e.jsx(N,{startContent:e.jsx(je,{className:"w-4 h-4"}),color:"danger",className:"text-danger",onClick:()=>ne(s,"component"),children:"Delete Component"},"delete")]})]})]})]},s.id)};return e.jsxs(ys,{children:[e.jsx(js,{title:E}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(bs,{title:E,subtitle:"Manage module permissions and access control hierarchy",icon:e.jsx(Ps,{className:"w-8 h-8"}),actions:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"flat",startContent:e.jsx(gs,{className:"w-4 h-4"}),onClick:$,isLoading:O,children:"Refresh"}),e.jsx(l,{color:"primary",startContent:e.jsx(pe,{className:"w-4 h-4"}),onClick:()=>re(),children:"Add Module"})]})}),e.jsx(Ns,{stats:os,className:"mb-6"}),e.jsx(Re,{className:"mb-6",children:e.jsx(ee,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(c,{placeholder:"Search modules...",value:ye,onChange:s=>Te(s.target.value),startContent:e.jsx($e,{className:"w-4 h-4 text-default-400"}),className:"flex-1"}),e.jsxs(te,{label:"Category",selectedKeys:[T],onChange:s=>Ge(s.target.value),className:"w-full sm:w-48",children:[e.jsx(I,{value:"all",children:"All Categories"},"all"),Object.entries(v).map(([s,t])=>e.jsx(I,{value:s,children:t},s))]}),e.jsxs(te,{label:"Status",selectedKeys:[D],onChange:s=>Qe(s.target.value),className:"w-full sm:w-36",children:[e.jsx(I,{value:"all",children:"All"},"all"),e.jsx(I,{value:"active",children:"Active"},"active"),e.jsx(I,{value:"inactive",children:"Inactive"},"inactive")]})]})})}),e.jsxs(Re,{children:[e.jsxs(Le,{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Module Hierarchy"}),e.jsxs(C,{variant:"flat",color:"default",children:[ae.length," modules"]})]}),e.jsx(ee,{children:O?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(vs,{size:"lg"})}):ae.length===0?e.jsxs("div",{className:"text-center py-12 text-default-500",children:[e.jsx(oe,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No modules found"}),e.jsx(l,{color:"primary",variant:"flat",className:"mt-4",onClick:()=>re(),children:"Create First Module"})]}):e.jsx("div",{className:"space-y-2",children:ae.map(s=>hs(s))})})]})]}),e.jsx(q,{isOpen:Xe,onClose:()=>G(!1),size:"2xl",children:e.jsxs(U,{children:[e.jsx(V,{children:J?"Edit Module":"Create New Module"}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{label:"Code",placeholder:"MODULE_CODE",value:o.code,onChange:s=>_({...o,code:s.target.value.toUpperCase()}),isRequired:!0}),e.jsx(c,{label:"Name",placeholder:"Module Name",value:o.name,onChange:s=>_({...o,name:s.target.value}),isRequired:!0}),e.jsx(c,{label:"Icon",placeholder:"Icon class name",value:o.icon,onChange:s=>_({...o,icon:s.target.value}),className:"col-span-2"}),e.jsx(c,{label:"Route Prefix",placeholder:"/module-route",value:o.route_prefix,onChange:s=>_({...o,route_prefix:s.target.value})}),e.jsx(te,{label:"Category",selectedKeys:[o.category],onChange:s=>_({...o,category:s.target.value}),children:Object.entries(v).map(([s,t])=>e.jsx(I,{value:s,children:t},s))}),e.jsx(c,{label:"Priority",type:"number",value:o.priority,onChange:s=>_({...o,priority:parseInt(s.target.value)})}),e.jsx("div",{className:"flex items-center",children:e.jsx(he,{isSelected:o.is_active,onValueChange:s=>_({...o,is_active:s}),children:"Active"})}),e.jsx(c,{label:"Description",placeholder:"Module description",value:o.description,onChange:s=>_({...o,description:s.target.value}),className:"col-span-2"})]})}),e.jsxs(K,{children:[e.jsx(l,{variant:"flat",onClick:()=>G(!1),children:"Cancel"}),e.jsx(l,{color:"primary",onClick:cs,isLoading:O,children:J?"Update":"Create"})]})]})}),e.jsx(q,{isOpen:Ye,onClose:()=>Q(!1),size:"xl",children:e.jsxs(U,{children:[e.jsx(V,{children:X?"Edit Sub-Module":"Create New Sub-Module"}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{label:"Code",placeholder:"SUBMODULE_CODE",value:h.code,onChange:s=>M({...h,code:s.target.value.toUpperCase()}),isRequired:!0}),e.jsx(c,{label:"Name",placeholder:"Sub-Module Name",value:h.name,onChange:s=>M({...h,name:s.target.value}),isRequired:!0}),e.jsx(c,{label:"Icon",placeholder:"Icon class name",value:h.icon,onChange:s=>M({...h,icon:s.target.value})}),e.jsx(c,{label:"Route",placeholder:"Named route",value:h.route,onChange:s=>M({...h,route:s.target.value})}),e.jsx(c,{label:"Priority",type:"number",value:h.priority,onChange:s=>M({...h,priority:parseInt(s.target.value)})}),e.jsx("div",{className:"flex items-center",children:e.jsx(he,{isSelected:h.is_active,onValueChange:s=>M({...h,is_active:s}),children:"Active"})}),e.jsx(c,{label:"Description",placeholder:"Sub-module description",value:h.description,onChange:s=>M({...h,description:s.target.value}),className:"col-span-2"})]})}),e.jsxs(K,{children:[e.jsx(l,{variant:"flat",onClick:()=>Q(!1),children:"Cancel"}),e.jsx(l,{color:"primary",onClick:ds,isLoading:O,children:X?"Update":"Create"})]})]})}),e.jsx(q,{isOpen:es,onClose:()=>Z(!1),size:"xl",children:e.jsxs(U,{children:[e.jsx(V,{children:Y?"Edit Component":"Create New Component"}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{label:"Code",placeholder:"COMPONENT_CODE",value:j.code,onChange:s=>P({...j,code:s.target.value.toUpperCase()}),isRequired:!0}),e.jsx(c,{label:"Name",placeholder:"Component Name",value:j.name,onChange:s=>P({...j,name:s.target.value}),isRequired:!0}),e.jsx(te,{label:"Type",selectedKeys:[j.type],onChange:s=>P({...j,type:s.target.value}),children:Object.entries(z).map(([s,t])=>e.jsx(I,{value:s,children:t},s))}),e.jsx(c,{label:"Route",placeholder:"Named route",value:j.route,onChange:s=>P({...j,route:s.target.value})}),e.jsx("div",{className:"flex items-center col-span-2",children:e.jsx(he,{isSelected:j.is_active,onValueChange:s=>P({...j,is_active:s}),children:"Active"})}),e.jsx(c,{label:"Description",placeholder:"Component description",value:j.description,onChange:s=>P({...j,description:s.target.value}),className:"col-span-2"})]})}),e.jsxs(K,{children:[e.jsx(l,{variant:"flat",onClick:()=>Z(!1),children:"Cancel"}),e.jsx(l,{color:"primary",onClick:ms,isLoading:O,children:Y?"Update":"Create"})]})]})}),e.jsx(q,{isOpen:ss,onClose:()=>H(!1),size:"4xl",scrollBehavior:"inside",children:e.jsxs(U,{children:[e.jsx(V,{className:"flex flex-col gap-1",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-primary"}),"Manage Permissions - ",w==null?void 0:w.name]})}),e.jsxs(B,{children:[e.jsxs("p",{className:"text-sm text-default-500 mb-4",children:["Select the permissions required to access this ",(ke=w==null?void 0:w.type)==null?void 0:ke.replace("_","-"),"."]}),e.jsxs("div",{className:"flex items-center justify-between mb-4 gap-4",children:[e.jsx(c,{placeholder:"Search permissions...",startContent:e.jsx($e,{className:"w-4 h-4 text-default-400"}),size:"sm",className:"max-w-xs",id:"permission-search",onValueChange:s=>{var t;(t=document.getElementById("permission-search"))==null||t.setAttribute("data-search",s.toLowerCase()),document.dispatchEvent(new CustomEvent("permission-search-change"))}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"sm",variant:"flat",color:"primary",onPress:()=>F(u.map(s=>s.id)),children:"Select All"}),e.jsx(l,{size:"sm",variant:"flat",onPress:()=>F([]),children:"Clear All"})]})]}),e.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:Object.entries($s(u)).map(([s,t])=>{const a=t.permissions.map(x=>x.id),m=a.filter(x=>S.includes(x)).length,b=m===a.length,g=m>0&&m<a.length;return e.jsxs(Ee,{className:"bg-default-50 dark:bg-default-100/10",children:[e.jsx(Le,{className:"py-2 px-4",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{isSelected:b,isIndeterminate:g,onValueChange:x=>{F(x?R=>[...new Set([...R,...a])]:R=>R.filter(le=>!a.includes(le)))},size:"sm"}),e.jsx("span",{className:"font-semibold text-foreground",children:t.name})]}),e.jsxs(C,{size:"sm",variant:"flat",color:b?"success":g?"warning":"default",children:[m,"/",a.length]})]})}),e.jsx(ee,{className:"pt-0 pb-3 px-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:t.permissions.map(x=>e.jsxs("div",{className:`flex items-start gap-2 p-2 rounded-lg border transition-colors cursor-pointer ${S.includes(x.id)?"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800":"bg-default-100/50 dark:bg-default-50/10 border-transparent hover:border-default-300"}`,onClick:()=>{S.includes(x.id)?F(S.filter(R=>R!==x.id)):F([...S,x.id])},children:[e.jsx(Ae,{isSelected:S.includes(x.id),onValueChange:R=>{F(R?[...S,x.id]:S.filter(le=>le!==x.id))},size:"sm",className:"mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:x.displayName}),e.jsx("p",{className:"text-xs text-default-400 truncate",children:x.description})]})]},x.id))})})]},s)})})]}),e.jsxs(K,{children:[e.jsx(l,{variant:"flat",onClick:()=>H(!1),children:"Cancel"}),e.jsxs(l,{color:"primary",onClick:us,isLoading:O,children:["Save Permissions (",S.length,")"]})]})]})}),e.jsx(q,{isOpen:ts,onClose:()=>W(!1),children:e.jsxs(U,{children:[e.jsx(V,{className:"text-danger",children:"Confirm Delete"}),e.jsxs(B,{children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("strong",{children:p==null?void 0:p.name}),"?"]}),(p==null?void 0:p.type)==="module"&&e.jsx("p",{className:"text-sm text-warning mt-2",children:"This will also delete all sub-modules and components within this module."}),(p==null?void 0:p.type)==="sub_module"&&e.jsx("p",{className:"text-sm text-warning mt-2",children:"This will also delete all components within this sub-module."})]}),e.jsxs(K,{children:[e.jsx(l,{variant:"flat",onClick:()=>W(!1),children:"Cancel"}),e.jsx(l,{color:"danger",onClick:ps,isLoading:O,children:"Delete"})]})]})})]})};export{yt as default};
