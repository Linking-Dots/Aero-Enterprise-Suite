import{J as ue,r as m,j as e,H as pe,b as v,e as G,a as z,Q as Se,c as Fe,d as Te}from"./app-CFOXYWdD.js";import{u as fe,g as Ie,m as de,G as Ee}from"./logo-AMLCgbkx.js";import{P as ke}from"./PageHeader-DIUdhN7v.js";import{S as Ae}from"./StatsCards-GNCJc6Af.js";import{E as $,t as U,v as Re,w as Me,x as Oe,y as V,h as ge,d as T,b as q,j as je,H as be,s as L,e as $e,B as F,m as ze,k as Be,I as Ge,J as Le,F as Ye,A as We,c as He,D as Qe,l as O}from"./App-D44H3aE5.js";import{d as Z}from"./dayjs.min-DTClqbqG.js";import{N as Ue}from"./NoDataMessage-5xSn2laF.js";import{F as ce}from"./EyeIcon-CA5zd612.js";import{F as J}from"./PencilIcon-BxC4n9WJ.js";import{F as me}from"./TrashIcon-DmAagIVq.js";import{F as Ve}from"./EllipsisVerticalIcon-C5p9jyC7.js";import{F as K}from"./CheckCircleIcon-WfVI_0Z3.js";import{F as X}from"./XCircleIcon-CXS-JZ21.js";import{F as ve}from"./MapPinIcon-DFEGbRZw.js";import{F as qe}from"./UserIcon-B8KaJTnW.js";import{t as Je,a as Ke,b as Xe,c as Ze}from"./chunk-F3UDT23P-DfyL8aGa.js";import{t as es}from"./chunk-YRZGWF2W-CVS3z9wo.js";import{t as ss}from"./chunk-TSPNSPCL-CDimUInN.js";import{p as we}from"./chunk-EAPQ7RWQ-CTPnoxCw.js";import{u as he}from"./chunk-S574QCAN-C6iBC3Hs.js";import{G as as}from"./GlassDialog-CB1Z5Bs0.js";import{F as ts}from"./ExclamationTriangleIcon-Kx82ewut.js";import{m as rs}from"./chunk-O5MCAK4F-b1RtXOOP.js";import{F as ls}from"./PlusIcon-xxvwdGLu.js";import{F as ns}from"./DocumentArrowDownIcon-CebuwUHN.js";import{b as is}from"./chunk-57V4RE7B-L7qqUn1Q.js";import{F as os}from"./TableCellsIcon-KaLKNQw_.js";import{F as ds}from"./AdjustmentsHorizontalIcon-CN9Y28v6.js";import{i as cs}from"./chunk-SSA7SXE4-B38lyIff.js";import"./create-visual-element-DL7V4SzU.js";import"./chunk-D5XJWRAV-Bs0mRdwq.js";import"./EnvelopeIcon-DJsx2AYc.js";import"./ShieldCheckIcon-DfAiaKpT.js";import"./index-CaGcrq76.js";import"./useHasTabbableChild-Bti5CcwH.js";import"./index-CokAva9Y.js";const ms=({departments:u,onEdit:h,onDelete:P,onView:t,loading:p,isMobile:o,isTablet:w,pagination:f,onPageChange:l,onRowsPerPageChange:C,canEditDepartment:r=!1,canDeleteDepartment:y=!1})=>{var S,I;const{auth:_}=ue().props,d=r||((S=_.permissions)==null?void 0:S.includes("departments.update"))||!1,x=y||((I=_.permissions)==null?void 0:I.includes("departments.delete"))||!1,j=m.useMemo(()=>[{name:"DEPARTMENT",uid:"name"},{name:"CODE",uid:"code",hide:o},{name:"MANAGER",uid:"manager"},{name:"EMPLOYEES",uid:"employees"},{name:"LOCATION",uid:"location",hide:o},{name:"STATUS",uid:"status"},{name:"ESTABLISHED",uid:"established",hide:o||w},{name:"ACTIONS",uid:"actions"}].filter(N=>!N.hide),[o,w]),n=(a,N)=>{var i,b;switch(N){case"name":return e.jsx(he,{avatarProps:{radius:"lg",fallback:e.jsx(je,{className:"w-8 h-4"}),size:o?"sm":"md"},name:a.name,description:a.parent?a.parent.name:"Top-level department",classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}});case"code":return e.jsx("div",{children:a.code?e.jsx(T,{size:"sm",variant:"flat",color:"primary",className:"text-xs",children:a.code}):e.jsx("span",{className:"text-default-400 text-xs",children:"-"})});case"manager":return e.jsx("div",{className:"flex items-start ",children:a.manager?e.jsxs(e.Fragment,{children:[e.jsx(he,{avatarProps:{radius:"lg",src:((i=a.manager)==null?void 0:i.profile_image_url)||((b=a.manager)==null?void 0:b.profile_image),size:"md",fallback:e.jsx(qe,{className:"w-5 h-5"})},classNames:{name:"font-semibold text-foreground text-sm",description:"text-default-500 text-xs"}}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm",children:a.manager.name}),!o&&a.manager.email&&e.jsx("span",{className:"text-xs text-default-400",children:a.manager.email})]})]}):e.jsx("span",{className:"text-default-400 text-xs",children:"Not assigned"})});case"employees":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{children:a.employee_count||0})]});case"location":return e.jsx("div",{className:"flex items-center gap-2",children:a.location?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{children:a.location})]}):e.jsx("span",{className:"text-default-400 text-xs",children:"-"})});case"status":return e.jsx(T,{size:"sm",variant:a.is_active?"solid":"bordered",color:a.is_active?"success":"danger",startContent:a.is_active?e.jsx(K,{className:"w-3 h-3"}):e.jsx(X,{className:"w-3 h-3"}),children:a.is_active?"Active":"Inactive"});case"established":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-sm",children:a.established_date?Z(a.established_date).format("MMM D, YYYY"):e.jsx("span",{className:"text-default-400 text-xs",children:"-"})})]});case"actions":return e.jsx("div",{className:"flex justify-end items-center",children:o?e.jsxs(Re,{children:[e.jsx(Me,{children:e.jsx(v,{isIconOnly:!0,size:"sm",variant:"light",children:e.jsx(Ve,{className:"w-4 h-4"})})}),e.jsxs(Oe,{"aria-label":"Department actions",children:[e.jsx(V,{startContent:e.jsx(ce,{className:"w-4 h-4"}),onPress:()=>t(a),children:"View Details"},"view"),d&&e.jsx(V,{startContent:e.jsx(J,{className:"w-4 h-4"}),onPress:()=>h(a),children:"Edit Department"},"edit"),x&&e.jsx(V,{className:"text-danger",color:"danger",startContent:e.jsx(me,{className:"w-4 h-4"}),isDisabled:a.employee_count>0,onPress:()=>P(a),children:"Delete Department"},"delete")]})]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{content:"View Department",children:e.jsx(v,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:()=>t(a),children:e.jsx(ce,{className:"w-4 h-4"})})}),d&&e.jsx(U,{content:"Edit Department",children:e.jsx(v,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-blue-500",onPress:()=>h(a),children:e.jsx(J,{className:"w-4 h-4"})})}),x&&e.jsx(U,{content:a.employee_count>0?"Cannot delete department with employees":"Delete Department",children:e.jsx(v,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-danger",isDisabled:a.employee_count>0,onPress:()=>P(a),children:e.jsx(me,{className:"w-4 h-4"})})})]})});default:return e.jsx("span",{children:a[N]})}},k=()=>!u||!u.data||p?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10",children:[e.jsxs("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(f.currentPage-1)*f.perPage+1," to ",Math.min(f.currentPage*f.perPage,u.total)," of ",u.total," departments"]}),e.jsx(we,{total:Math.ceil(u.total/f.perPage),initialPage:f.currentPage,page:f.currentPage,onChange:l,size:o?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]});return!p&&(!u||!u.data||u.data.length===0)?e.jsx("div",{className:"w-full",children:e.jsx(Ue,{message:"No departments found",icon:e.jsx($,{className:"w-12 h-12 text-default-300"}),description:"Try adjusting your search or filters"})}):e.jsx("div",{className:"w-full",children:e.jsxs(Je,{"aria-label":"Departments table",removeWrapper:!0,classNames:{base:"bg-transparent",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs",td:"border-b border-white/5 py-3"},bottomContent:k(),children:[e.jsx(es,{columns:j,children:a=>e.jsx(ss,{children:a.name},a.uid)}),e.jsx(Ke,{items:u.data||[],emptyContent:!p&&"No departments found",loadingContent:e.jsx(pe,{}),isLoading:p,children:a=>e.jsx(Xe,{children:N=>e.jsx(Ze,{children:n(a,N)})},a.id)})]})})},xe=({open:u,onClose:h,onSuccess:P,department:t=null,managers:p=[],parentDepartments:o=[]})=>{var k,S,I,a,N;const{isDark:w}=fe();Ie();const f=useMediaQuery(theme.breakpoints.down("md")),[l,C]=m.useState(!1),[r,y]=m.useState({}),_={name:"",code:"",description:"",parent_id:null,manager_id:null,location:"",is_active:!0,established_date:""},[d,x]=m.useState(_);m.useEffect(()=>{x(t?{name:t.name||"",code:t.code||"",description:t.description||"",parent_id:t.parent_id||null,manager_id:t.manager_id||null,location:t.location||"",is_active:t.is_active??!0,established_date:t.established_date?Z(t.established_date).format("YYYY-MM-DD"):""}:_),y({})},[t,u]);const j=i=>{const{name:b,value:c,type:D,checked:B}=i.target;x(E=>({...E,[b]:D==="checkbox"?B:c})),r[b]&&y(E=>({...E,[b]:null}))},n=async()=>{var i,b;C(!0),y({});try{const c={...d,established_date:d.established_date||null};let D;t!=null&&t.id?(D=await z.put(`/departments/${t.id}`,c),F.success("Department updated successfully")):(D=await z.post("/departments",c),F.success("Department created successfully")),P(D.data.department),h()}catch(c){if(console.error("Error saving department:",c),(b=(i=c.response)==null?void 0:i.data)!=null&&b.errors){y(c.response.data.errors);const D=Object.values(c.response.data.errors)[0];D&&F.error(D[0])}else F.error("An error occurred while saving the department")}finally{C(!1)}};return e.jsxs(as,{open:u,onClose:l?void 0:h,maxWidth:"md",fullWidth:!0,fullScreen:f,"aria-labelledby":"department-form-dialog",children:[e.jsxs(DialogTitle,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[e.jsx(Typography,{variant:"h6",component:"div",children:t?"Edit Department":"Create New Department"}),e.jsx(IconButton,{edge:"end",color:"inherit",onClick:h,disabled:l,"aria-label":"close",children:e.jsx(be,{className:"w-5 h-5"})})]}),e.jsx(G,{}),e.jsx(DialogContent,{sx:{pt:2},children:e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,children:e.jsx(Typography,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Basic Information"})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsx(TextField,{name:"name",label:"Department Name",fullWidth:!0,required:!0,value:d.name,onChange:j,error:!!r.name,helperText:((k=r.name)==null?void 0:k[0])||"",disabled:l})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsx(TextField,{name:"code",label:"Department Code",fullWidth:!0,value:d.code||"",onChange:j,error:!!r.code,helperText:((S=r.code)==null?void 0:S[0])||"Unique identifier (e.g., HR001, FIN002)",disabled:l})}),e.jsx(Grid,{item:!0,xs:12,children:e.jsx(TextField,{name:"description",label:"Description",fullWidth:!0,multiline:!0,rows:3,value:d.description||"",onChange:j,error:!!r.description,helperText:((I=r.description)==null?void 0:I[0])||"",disabled:l})}),e.jsx(Grid,{item:!0,xs:12,sx:{mt:2},children:e.jsx(Typography,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Organizational Information"})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsxs(FormControl,{fullWidth:!0,error:!!r.parent_id,children:[e.jsx(InputLabel,{id:"parent-department-label",children:"Parent Department"}),e.jsxs(L,{labelId:"parent-department-label",name:"parent_id",value:d.parent_id||"",onChange:j,label:"Parent Department",disabled:l,children:[e.jsx(MenuItem,{value:"",children:e.jsx("em",{children:"None (Top-Level Department)"})}),o.map(i=>(t==null?void 0:t.id)!==i.id&&e.jsx(MenuItem,{value:i.id,children:i.name},i.id))]}),r.parent_id&&e.jsx(FormHelperText,{children:r.parent_id[0]})]})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsxs(FormControl,{fullWidth:!0,error:!!r.manager_id,children:[e.jsx(InputLabel,{id:"manager-label",children:"Department Manager"}),e.jsxs(L,{labelId:"manager-label",name:"manager_id",value:d.manager_id||"",onChange:j,label:"Department Manager",disabled:l,children:[e.jsx(MenuItem,{value:"",children:e.jsx("em",{children:"Not Assigned"})}),p.map(i=>e.jsx(MenuItem,{value:i.id,children:i.name},i.id))]}),r.manager_id&&e.jsx(FormHelperText,{children:r.manager_id[0]})]})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsx(TextField,{name:"location",label:"Location",fullWidth:!0,value:d.location||"",onChange:j,error:!!r.location,helperText:((a=r.location)==null?void 0:a[0])||"Physical location of the department",disabled:l})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsx(TextField,{name:"established_date",label:"Established Date",type:"date",fullWidth:!0,value:d.established_date||"",onChange:j,error:!!r.established_date,helperText:((N=r.established_date)==null?void 0:N[0])||"",disabled:l,InputLabelProps:{shrink:!0}})}),e.jsxs(Grid,{item:!0,xs:12,children:[e.jsx(FormControlLabel,{control:e.jsx($e,{checked:d.is_active,onChange:j,name:"is_active",color:"success",disabled:l}),label:"Department is active"}),r.is_active&&e.jsx(FormHelperText,{error:!0,children:r.is_active[0]})]})]})}),e.jsx(G,{}),e.jsxs(DialogActions,{sx:{px:3,py:2},children:[e.jsx(v,{onClick:h,disabled:l,color:"inherit",children:"Cancel"}),e.jsx(v,{onClick:n,variant:"contained",color:"primary",disabled:l,children:l?"Saving...":t?"Update Department":"Create Department"})]})]})},hs=({open:u,onClose:h,onSuccess:P,department:t})=>{const[p,o]=m.useState(!1),[w,f]=m.useState(null),l=async()=>{var C,r,y,_;if(t){o(!0),f(null);try{await z.delete(`/departments/${t.id}`),F.success("Department deleted successfully"),P(),h()}catch(d){if(console.error("Error deleting department:",d),(r=(C=d.response)==null?void 0:C.data)!=null&&r.message)f(d.response.data.message),F.error(d.response.data.message);else if((_=(y=d.response)==null?void 0:y.data)!=null&&_.errors){const x=Object.values(d.response.data.errors)[0];f(x),F.error(x)}else f("An error occurred while deleting the department"),F.error("An error occurred while deleting the department")}finally{o(!1)}}};return t?e.jsx(ze,{isOpen:u,onOpenChange:p?void 0:h,size:"lg",children:e.jsxs(Be,{children:[e.jsxs(Ge,{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delete Department"}),e.jsx(v,{isIconOnly:!0,variant:"light",onPress:h,isDisabled:p,"aria-label":"close",children:e.jsx(be,{className:"w-5 h-5"})})]}),e.jsx(G,{}),e.jsx(Le,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-8 h-8 text-yellow-500"}),e.jsxs("p",{className:"text-sm",children:["Are you sure you want to delete the department ",e.jsx("strong",{children:t.name}),"?"]})]}),t.employee_count>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded",children:["This department has ",t.employee_count," employees assigned to it. You cannot delete a department with active employees. Please reassign these employees to other departments first."]}),w&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:w}),e.jsx("p",{className:"text-sm text-default-500 mt-1",children:"This action cannot be undone. All associated data will be permanently removed."})]})}),e.jsx(G,{}),e.jsxs(rs,{children:[e.jsx(v,{onPress:h,isDisabled:p,variant:"light",children:"Cancel"}),e.jsx(v,{onPress:l,color:"danger",isDisabled:p||t.employee_count>0,isLoading:p,children:p?"Deleting...":"Delete Department"})]})]})}):null},qs=({title:u,departments:h,managers:P,parentDepartments:t,stats:p,filters:o})=>{var ae,te,re,le,ne,ie;const{auth:w}=ue().props,{theme:f}=fe(),[l]=m.useState(window.innerWidth<640),[C]=m.useState(window.innerWidth<768),[r,y]=m.useState(h||{data:[]}),[_,d]=m.useState(!1),[x,j]=m.useState({type:null,department:null}),[n,k]=m.useState({search:(o==null?void 0:o.search)||"",status:(o==null?void 0:o.status)||"all",parentDepartment:(o==null?void 0:o.parentDepartment)||"all"}),[S,I]=m.useState(!1),[a,N]=m.useState("table"),[i,b]=m.useState({currentPage:(h==null?void 0:h.current_page)||1,perPage:(h==null?void 0:h.per_page)||10}),[c,D]=m.useState(p||{total:0,active:0,inactive:0,parent_departments:0}),B=((ae=w.permissions)==null?void 0:ae.includes("departments.create"))||!1,E=((te=w.permissions)==null?void 0:te.includes("departments.update"))||!1,Y=((re=w.permissions)==null?void 0:re.includes("departments.delete"))||!1,Ne=E||((le=w.permissions)==null?void 0:le.includes("departments.update"))||!1;Y||(ne=w.permissions)!=null&&ne.includes("departments.delete");const W=m.useCallback(async()=>{d(!0);try{const s=await z.get(route("api.departments"),{params:{page:i.currentPage,per_page:i.perPage,search:n.search,status:n.status,parent_department:n.parentDepartment}});y(s.data.departments)}catch(s){console.error("Error fetching departments:",s),F.error("Failed to load departments data")}finally{d(!1)}},[i.currentPage,i.perPage,n.search,n.status,n.parentDepartment]),H=m.useCallback(async()=>{try{const s=await z.get(route("departments.stats"));if(s.status===200){const{stats:g}=s.data;D(g)}}catch(s){console.error("Error fetching department stats:",s)}},[]);m.useEffect(()=>{W(),H()},[W,H]);const A=(s,g)=>{k(M=>({...M,[s]:g})),b(M=>({...M,currentPage:1}))},ee=s=>{b(g=>({...g,currentPage:s})),window.scrollTo({top:0,behavior:"smooth"})},ye=s=>{b({currentPage:1,perPage:s})},R=(s,g=null)=>{j({type:s,department:g})},Q=()=>{j({type:null,department:null})},se=()=>{W(),H()},_e=({department:s,index:g})=>{const M=s.manager,oe=s.parent;return e.jsx(Fe,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>R("view_department",s),children:e.jsxs(Te,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e.jsx("div",{className:"flex justify-center items-center h-10 w-10 rounded-lg bg-primary/20 text-primary shrink-0",children:e.jsx(je,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground text-sm line-clamp-1",children:s.name}),e.jsx("p",{className:"text-default-500 text-xs",children:s.code||"No Code"})]}),Ne&&e.jsx(v,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground ml-2",onPress:Ce=>{Ce.stopPropagation(),R("edit_department",s)},children:e.jsx(J,{className:"w-4 h-4"})})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[s.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ve,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs line-clamp-1",children:s.location})]}),s.established_date&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ge,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs",children:Z(s.established_date).format("MMM D, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(q,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsxs("span",{className:"text-default-600 text-xs",children:[s.employee_count||0," ",s.employee_count===1?"Employee":"Employees"]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[e.jsx(T,{size:"sm",variant:s.is_active?"solid":"bordered",color:s.is_active?"success":"danger",className:"text-xs",startContent:s.is_active?e.jsx(K,{className:"w-3 h-3"}):e.jsx(X,{className:"w-3 h-3"}),children:s.is_active?"Active":"Inactive"}),oe&&e.jsx(T,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e.jsx($,{className:"w-3 h-3"}),children:oe.name}),M&&e.jsx(T,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e.jsx(q,{className:"w-3 h-3"}),children:M.name})]})]})})},De=m.useMemo(()=>[{title:"Total Departments",value:(c==null?void 0:c.total)||0,icon:e.jsx($,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All departments"},{title:"Active",value:(c==null?void 0:c.active)||0,icon:e.jsx(K,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Active departments"},{title:"Inactive",value:(c==null?void 0:c.inactive)||0,icon:e.jsx(X,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Inactive departments"},{title:"Parent Departments",value:(c==null?void 0:c.parent_departments)||0,icon:e.jsx(Ye,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Top-level departments"}],[c]),Pe=m.useMemo(()=>{const s=[];return B&&s.push({label:l?"Add":"Add Department",icon:e.jsx(ls,{className:"w-4 h-4"}),onPress:()=>R("add_department"),className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}),s.push({label:l?"":"Export",isIconOnly:l,icon:e.jsx(ns,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),s},[B,l]);return e.jsxs(We,{children:[e.jsx(Se,{title:u}),e.jsx("div",{className:"flex justify-center p-2",children:e.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:e.jsx(Ee,{children:e.jsx(ke,{title:"Department Management",subtitle:"Manage company departments, hierarchies, and organizational structure",icon:e.jsx($,{className:"w-8 h-8"}),variant:"default",actionButtons:Pe,children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(Ae,{stats:De,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(cs,{label:"Search Departments",placeholder:"Search by name, code, or location...",value:n.search,onChange:s=>A("search",s.target.value),startContent:e.jsx(He,{className:"w-4 h-4 text-default-400"})})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(is,{variant:"bordered",className:"bg-white/5",children:[e.jsxs(v,{isIconOnly:l,color:a==="table"?"primary":"default",onPress:()=>N("table"),className:a==="table"?"bg-blue-500/20":"",children:[e.jsx(os,{className:"w-4 h-4"}),!l&&e.jsx("span",{className:"ml-1",children:"Table"})]}),e.jsxs(v,{isIconOnly:l,color:a==="grid"?"primary":"default",onPress:()=>N("grid"),className:a==="grid"?"bg-blue-500/20":"",children:[e.jsx(Qe,{className:"w-4 h-4"}),!l&&e.jsx("span",{className:"ml-1",children:"Grid"})]})]}),e.jsxs(v,{isIconOnly:l,variant:"bordered",onPress:()=>I(!S),className:S?"bg-purple-500/20":"bg-white/5",children:[e.jsx(ds,{className:"w-4 h-4"}),!l&&e.jsx("span",{className:"ml-1",children:"Filters"})]})]})]}),S&&e.jsxs(de.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(L,{label:"Status",variant:"bordered",selectedKeys:n.status!=="all"?[n.status]:[],onSelectionChange:s=>{const g=Array.from(s)[0]||"all";A("status",g)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e.jsx(O,{value:"all",children:"All Statuses"},"all"),e.jsx(O,{value:"active",children:"Active Only"},"active"),e.jsx(O,{value:"inactive",children:"Inactive Only"},"inactive")]}),e.jsxs(L,{label:"Parent Department",variant:"bordered",selectedKeys:n.parentDepartment!=="all"?[n.parentDepartment]:[],onSelectionChange:s=>{const g=Array.from(s)[0]||"all";A("parentDepartment",g)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e.jsx(O,{value:"all",children:"All Parent Departments"},"all"),e.jsx(O,{value:"none",children:"Top-Level Departments"},"none"),t==null?void 0:t.map(s=>e.jsx(O,{value:s.id.toString(),children:s.name},s.id.toString()))]})]}),(n.search||n.status!=="all"||n.parentDepartment!=="all")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[n.search&&e.jsxs(T,{variant:"flat",color:"primary",size:"sm",onClose:()=>A("search",""),children:["Search: ",n.search]}),n.status!=="all"&&e.jsxs(T,{variant:"flat",color:"secondary",size:"sm",onClose:()=>A("status","all"),children:["Status: ",n.status==="active"?"Active":"Inactive"]}),n.parentDepartment!=="all"&&e.jsxs(T,{variant:"flat",color:"warning",size:"sm",onClose:()=>A("parentDepartment","all"),children:["Parent: ",n.parentDepartment==="none"?"None (Top-Level)":(ie=t==null?void 0:t.find(s=>s.id===parseInt(n.parentDepartment)))==null?void 0:ie.name]})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:[a==="table"?"Department Table":"Department Grid",e.jsxs("span",{className:"text-sm text-default-500 ml-2",children:["(",r.total||0," ",r.total===1?"department":"departments",")"]})]})}),_?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(pe,{size:"lg"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading departments data..."})]}):a==="table"?e.jsx(ms,{departments:r,loading:_,onEdit:E?s=>R("edit_department",s):void 0,onDelete:Y?s=>R("delete_department",s):void 0,onView:s=>R("view_department",s),isMobile:l,isTablet:C,pagination:i,onPageChange:ee,onRowsPerPageChange:ye,canEditDepartment:E,canDeleteDepartment:Y}):e.jsxs("div",{className:"p-4",children:[r.data&&r.data.length>0?e.jsx("div",{className:`grid gap-4 ${l?"grid-cols-1":C?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:r.data.map((s,g)=>e.jsx(_e,{department:s,index:g},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx($,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e.jsx("p",{className:"text-default-500 mb-1",children:"No departments found"}),e.jsx("p",{className:"text-xs text-default-400",children:"Try adjusting your search or filters"})]}),r.data&&r.data.length>0&&e.jsx("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e.jsx(we,{total:Math.ceil(r.total/i.perPage),initialPage:i.currentPage,page:i.currentPage,onChange:ee,size:l?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})}),(x.type==="add_department"||x.type==="edit_department")&&e.jsx(xe,{open:!0,onClose:Q,onSuccess:se,department:x.type==="edit_department"?x.department:null,managers:P,parentDepartments:t}),x.type==="delete_department"&&e.jsx(hs,{open:!0,onClose:Q,onSuccess:se,department:x.department}),x.type==="view_department"&&e.jsx(xe,{open:!0,onClose:Q,onSuccess:()=>{},department:x.department,managers:P,parentDepartments:t,readOnly:!0})]})};export{qs as default};
