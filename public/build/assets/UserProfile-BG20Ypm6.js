import{r as u,j as e,g as be,c as Y,h as ge,d as Ue,R as $e,Z as Ne,u as Me,a as er,H as Oe}from"./app-C1U45Ebj.js";import{aq as rr,V as ar,c as ee,W as xe,b as Ie,X as pe,L as Je,I as X,k as m,l as q,B,u as qe,a as tr,A as Be,ar as ze,K as Ee,n as He,as as De,h as sr,g as or}from"./App-whY0_PgO.js";import{P as nr}from"./PageHeader-BguKKtkP.js";import{S as ir}from"./StatsCards-CTb1gp2_.js";import{m as U,u as Q,T as O,B as me,G as fe}from"./logo-CfQNLy2U.js";import{F as Se}from"./CheckCircleIcon-B_RrSLXz.js";import{F as _e}from"./ExclamationTriangleIcon-C6Etxr_V.js";import{F as Te}from"./PencilIcon-BS_QTdXf.js";import{F as lr}from"./HashtagIcon-B_rZ9IPr.js";import{F as dr}from"./EnvelopeIcon-DYtxSQqd.js";import{F as cr}from"./MapPinIcon-B6rOTr6b.js";import{c as Xe}from"./chunk-D5XJWRAV-D_e-q5OY.js";import{p as pr}from"./chunk-XVMALT6H-CYgKbo0D.js";import{m as mr,a as ur,b as xr,c as hr,d as br}from"./chunk-UKLRQS27-BP4OTlSe.js";import{C as ve}from"./Clear-DEIruHJj.js";import{G as oe}from"./GlassDialog-DlDj20KD.js";import{D as ne}from"./DialogTitle-n4i8VQ5D.js";import{D as ie,a as le}from"./DialogContent-Buy6bhT7.js";import{A as gr}from"./Avatar-DuuqbjIn.js";import{P as fr}from"./PhotoCamera-DHwamzEB.js";import{T as w,I as z,F as he}from"./TextField-BppgltFh.js";import{S as H,M as D}from"./Select-6qEezkdx.js";import{L as re}from"./LoadingButton-Df5WnXLU.js";import{C as je}from"./CircularProgress-CE3Tiwse.js";import{C as ye}from"./CardContent-Dr2XfLTO.js";import{C as Fe}from"./Clear-Y8lWSL0h.js";import{B as Ye}from"./Button-D2aSymif.js";import{A as Qe}from"./Add-CNpSLwub.js";import{C as _r}from"./CardHeader-BqMsir7C.js";import{I as jr,F as we}from"./InputAdornment-DWbv3Uuu.js";import{D as Ge}from"./Divider-H-F0eXoG.js";import{C as yr}from"./CardActions-C6layq64.js";import{d as vr}from"./dayjs.min-BTc-9rSv.js";import{F as Cr}from"./ChartBarIcon-BOeg_RIy.js";import{F as kr}from"./UserPlusIcon-CaQvR3WE.js";import{F as Ke}from"./DocumentArrowDownIcon-BXxQ19kw.js";import{F as de}from"./UserIcon-Ch89lSMO.js";import{F as se}from"./IdentificationIcon-CawgN18_.js";import{F as wr}from"./AdjustmentsHorizontalIcon-yosOaLGg.js";import{F as Nr}from"./GlobeAltIcon-DQpReNcy.js";import{a as Sr}from"./ShieldCheckIcon-BOaBImyC.js";import{i as Fr}from"./chunk-SSA7SXE4-CwjhqkNF.js";import{b as Pr}from"./chunk-57V4RE7B-8Sp0zFrU.js";import{s as Ve,l as K}from"./chunk-Y2AYO5NJ-BRwLVlLS.js";import{t as Er,a as ue}from"./chunk-ML27DD5T-CtKvWbdu.js";import"./create-visual-element-BuHeE9lo.js";import"./index-aV7qt4-Z.js";import"./NumberFormatter-DNR9MAW-.js";import"./Dialog-CLSehbXy.js";import"./useSlot-Cnb0Rlda.js";import"./Popover-B0BuhAs7.js";import"./index-C-LltKoZ.js";import"./useHasTabbableChild-zsiyx3Qk.js";import"./index-CokAva9Y.js";import"./features-animation-Bw_RqQvo.js";const Dr=({user:a,departments:T=[],designations:_=[],onEditClick:N,profileStats:c={},canEdit:P=!1})=>{const[x,j]=u.useState(!1),r=T.find(C=>C.id===a.department_id||C.id===a.department),v=_.find(C=>C.id===a.designation_id||C.id===a.designation),l=()=>a.active?"success":"danger",S=()=>{const C=c.completion_percentage||0;return C>=80?"success":C>=50?"warning":"danger"};return e.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-300",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[e.jsx(Xe,{className:"flex gap-4 pb-0",children:e.jsxs("div",{className:"flex gap-4 items-start w-full",children:[e.jsx("div",{className:"relative",children:e.jsx(rr,{content:e.jsx("div",{className:`w-4 h-4 rounded-full ${a.active?"bg-success-500":"bg-danger-500"} border-2 border-background`}),placement:"bottom-right",className:"border-0",children:e.jsx(ar,{src:a.profile_image_url||a.profile_image,name:a.name,size:"lg",className:"ring-2 ring-white/20 hover:ring-white/40 transition-all duration-300"})})}),e.jsxs("div",{className:"flex flex-col gap-2 flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:a.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[r&&e.jsx(ee,{size:"sm",variant:"flat",color:"primary",startContent:e.jsx(xe,{className:"w-3 h-3"}),children:r.name}),v&&e.jsx(ee,{size:"sm",variant:"flat",color:"secondary",children:v.title}),e.jsx(ee,{size:"sm",variant:"flat",color:l(),startContent:a.active?e.jsx(Se,{className:"w-3 h-3"}):e.jsx(_e,{className:"w-3 h-3"}),children:a.active?"Active":"Inactive"})]})]}),P&&e.jsx(U.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(Y,{color:"primary",variant:"bordered",size:"sm",startContent:e.jsx(Te,{className:"w-4 h-4"}),onPress:N,className:"bg-white/10 hover:bg-white/20 border-white/20",children:"Edit Profile"})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Profile Completion"}),e.jsxs("span",{className:"text-sm font-semibold text-foreground",children:[c.completion_percentage||0,"%"]})]}),e.jsx(pr,{value:c.completion_percentage||0,color:S(),size:"sm",className:"max-w-full"}),e.jsxs("p",{className:"text-xs text-default-500 mt-1",children:[c.completed_sections||0," of ",c.total_sections||8," sections completed"]})]})]})]})}),e.jsxs(ge,{className:"pt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(lr,{className:"w-4 h-4 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Employee ID"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.employee_id||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(Ie,{className:"w-4 h-4 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Date of Joining"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.date_of_joining?new Date(a.date_of_joining).toLocaleDateString():"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(dr,{className:"w-4 h-4 text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:a.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/20 rounded-lg",children:e.jsx(pe,{className:"w-4 h-4 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.phone||"N/A"})]})]})]}),a.address&&e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"mb-4"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-teal-500/20 rounded-lg",children:e.jsx(cr,{className:"w-4 h-4 text-teal-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Address"}),e.jsx("p",{className:"text-sm text-foreground",children:a.address})]})]})]}),(c.profile_views||c.last_updated)&&e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"my-4"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-default-500",children:[c.profile_views&&e.jsxs("span",{children:["Views: ",c.profile_views]}),c.last_updated&&e.jsxs("span",{children:["Updated: ",new Date(c.last_updated).toLocaleDateString()]})]})]})]})]})})},ce=({title:a,icon:T,children:_,onEdit:N,canEdit:c=!1,isEmpty:P=!1,isCompleted:x=!1,className:j="",headerAction:r=null,...v})=>{const S=P?{color:"danger",icon:Je,text:"Empty"}:x?{color:"success",icon:Se,text:"Complete"}:{color:"warning",icon:_e,text:"Incomplete"},C=S.icon;return e.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{y:-2},className:j,children:e.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-300 h-full",...v,children:[e.jsx(Xe,{className:"flex gap-3 pb-3",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[T&&e.jsx("div",{className:"p-2 bg-primary-500/20 rounded-lg",children:$e.cloneElement(T,{className:"w-5 h-5 text-primary-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-foreground",children:a}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx(ee,{size:"sm",variant:"flat",color:S.color,startContent:e.jsx(C,{className:"w-3 h-3"}),children:S.text})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r,c&&N&&e.jsx(U.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(Y,{isIconOnly:!0,size:"sm",variant:"bordered",color:"primary",onPress:N,className:"bg-white/10 hover:bg-white/20 border-white/20",children:e.jsx(Te,{className:"w-4 h-4"})})})]})]})}),e.jsx(ge,{className:"pt-0",children:P?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"p-4 bg-default-100/50 rounded-lg",children:[e.jsx(_e,{className:"w-8 h-8 text-default-400 mx-auto mb-2"}),e.jsx("p",{className:"text-default-500 text-sm",children:"No information available"}),c&&N&&e.jsx(Y,{size:"sm",color:"primary",variant:"bordered",className:"mt-3",onPress:N,startContent:e.jsx(Te,{className:"w-4 h-4"}),children:"Add Information"})]})}):_})]})})},A=({label:a,value:T,icon:_,type:N="text",className:c="",valueClassName:P="",labelClassName:x="",showDivider:j=!0})=>{const r=(l,S)=>{if(!l||l==="N/A")return"N/A";switch(S){case"date":return new Date(l).toLocaleDateString();case"email":return l;case"phone":return l;case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(l);default:return l}},v=()=>!T||T==="N/A"?"text-default-400":"text-foreground";return e.jsxs("div",{className:`flex items-center justify-between py-3 ${j?"border-b border-white/10 last:border-b-0":""} ${c}`,children:[e.jsxs("div",{className:`flex items-center gap-2 text-sm text-default-600 ${x}`,children:[_&&$e.cloneElement(_,{className:"w-4 h-4"}),e.jsx("span",{children:a})]}),e.jsx("div",{className:`text-sm font-medium ${v()} text-right ${P}`,children:N==="chip"&&T&&T!=="N/A"?e.jsx(ee,{size:"sm",variant:"flat",color:"primary",children:r(T,N)}):e.jsx("span",{children:r(T,N)})})]})},Z=({isOpen:a,onClose:T,title:_,subtitle:N,icon:c,children:P,onSave:x,onCancel:j,isLoading:r=!1,saveLabel:v="Save Changes",cancelLabel:l="Cancel",showFooter:S=!0,size:C="2xl",scrollBehavior:h="inside",placement:s="center",backdrop:o="blur",className:b="",headerClassName:p="",bodyClassName:n="",footerClassName:i="",...t})=>e.jsx(Ne,{children:a&&e.jsx(mr,{isOpen:a,onClose:T,size:C,scrollBehavior:h,placement:s,backdrop:o,classNames:{base:"bg-white/10 backdrop-blur-md border border-white/20",header:`bg-white/5 border-b border-white/10 ${p}`,body:`bg-transparent ${n}`,footer:`bg-white/5 border-t border-white/10 ${i}`},className:b,motionProps:{variants:{enter:{y:0,opacity:1,transition:{duration:.3,ease:"easeOut"}},exit:{y:-20,opacity:0,transition:{duration:.2,ease:"easeIn"}}}},...t,children:e.jsx(ur,{children:g=>e.jsxs(e.Fragment,{children:[e.jsx(xr,{className:"flex flex-col gap-1 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[c&&e.jsx("div",{className:"p-2 bg-primary-500/20 rounded-lg",children:$e.cloneElement(c,{className:"w-5 h-5 text-primary-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:_}),N&&e.jsx("p",{className:"text-sm text-default-500 mt-1",children:N})]})]}),e.jsx(Y,{isIconOnly:!0,variant:"light",onPress:g,className:"text-default-500 hover:text-foreground",children:e.jsx(Je,{className:"w-5 h-5"})})]})}),e.jsx(hr,{className:"px-6 py-4",children:e.jsx(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:P})}),S&&e.jsx(br,{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-3 w-full sm:w-auto sm:ml-auto",children:[e.jsx(Y,{variant:"bordered",onPress:j||g,className:"bg-white/10 border-white/20 hover:bg-white/20",isDisabled:r,children:l}),x&&e.jsx(Y,{color:"primary",onPress:x,isLoading:r,className:"bg-primary-500/90 hover:bg-primary-500",children:v})]})})]})})})}),Ir=({user:a,allUsers:T,departments:_,designations:N,setUser:c,open:P,closeModal:x})=>{const[j,r]=u.useState({id:a.id,name:a.name||"",gender:a.gender||"",birthday:a.birthday||"",date_of_joining:a.date_of_joining||"",address:a.address||"",employee_id:a.employee_id||"",phone:a.phone||"",email:a.email||"",department:a.department||"",designation:a.designation||"",report_to:a.report_to||""}),[v,l]=u.useState({id:a.id}),[S,C]=u.useState(!1),[h,s]=u.useState({}),[o,b]=u.useState(!1),[p,n]=u.useState(!1),[i,t]=u.useState(null),[g,E]=u.useState(N),[F,I]=u.useState(T),d=Q(),R=f=>{const L=f.target.files[0];if(L){const $=URL.createObjectURL(L);t($);const M=new Promise(async(G,ae)=>{try{const J=new FormData;if(J.append("id",a.id),L){const Pe=L.type;if(["image/jpeg","image/jpg","image/png"].includes(Pe))J.append("profile_image",L);else{console.error("Invalid file type. Only JPEG and PNG are allowed."),ae("Invalid file type");return}}const Ce=await fetch(route("profile.update"),{method:"POST",headers:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:J}),te=await Ce.json();Ce.ok?(c(te.user),b(!1),G([...te.messages])):(b(!1),s(te.errors),ae(te.error||"Failed to update profile image."),console.error(te.errors))}catch(J){b(!1),console.error(J),ae(J.message||"An unexpected error occurred.")}});B.promise(M,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(je,{}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating profile image..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},success:{render({data:G}){return e.jsx(e.Fragment,{children:G.map((ae,J)=>e.jsx("div",{children:ae},J))})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},error:{render({data:G}){return e.jsx(e.Fragment,{children:G})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}})}},y=(f,L)=>{r($=>{const M={...$,[f]:L};return L===""&&delete M[f],M}),l($=>{const M={...$,[f]:L};return L===""&&delete M[f],M})};u.useEffect(()=>{a.department!==j.department&&(j.designation=null,j.report_to=null),E(N.filter($=>$.department_id===(v.department||j.department))),I(T.filter($=>$.department===(v.department||j.department)));const f={...v};for(const $ in f)$!=="id"&&f[$]===a[$]&&delete f[$];const L=Object.keys(f).length>1;C(L)},[j,v]);const V=async f=>{var L;f.preventDefault(),b(!0);try{const $=await axios.post(route("profile.update"),{ruleSet:"profile",...j});$.status===200&&(c($.data.user),B.success(((L=$.data.messages)==null?void 0:L.length)>0?$.data.messages.join(" "):"Profile information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),x())}catch($){b(!1),$.response?($.response.status===422?(s($.response.data.errors||{}),B.error($.response.data.error||"Failed to update profile information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}})):B.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error($.response.data)):$.request?(B.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error($.request)):(B.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error("Error",$.message))}finally{b(!1)}};return e.jsxs(oe,{open:P,onClose:x,children:[e.jsxs(ne,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e.jsx(O,{children:"Profile Information"}),e.jsx(X,{variant:"outlined",color:"primary",onClick:x,sx:{position:"absolute",top:8,right:16},children:e.jsx(ve,{})})]}),e.jsxs("form",{onSubmit:V,children:[e.jsx(ie,{children:e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,display:"flex",alignItems:"center",justifyContent:"center",children:e.jsxs(me,{position:"relative",display:"inline-block",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsx(gr,{alt:v.name||j.name,src:i||a.profile_image,sx:{width:100,height:100}}),p&&e.jsx(e.Fragment,{children:e.jsx(me,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:"rgba(0, 0, 0, 0.5)",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(X,{color:"primary",component:"span",children:e.jsx(fr,{})})})}),e.jsx("input",{accept:"image/*",style:{display:"none"},id:"upload-button",type:"file",onChange:R}),e.jsx("label",{htmlFor:"upload-button",children:e.jsx(me,{sx:{position:"absolute",width:"100%",height:"100%",top:0,left:0,borderRadius:"50%",cursor:"pointer"}})})]})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Name",fullWidth:!0,value:v.name||j.name||"",onChange:f=>y("name",f.target.value),error:!!h.name,helperText:h.name})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"gender-label",children:"Gender"}),e.jsxs(H,{labelId:"gender-label",value:v.gender||j.gender||"na",onChange:f=>y("gender",f.target.value),error:!!h.gender,label:"Gender",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{disabled:!0,value:"na",children:"Select Gender"}),e.jsx(D,{value:"Male",children:"Male"}),e.jsx(D,{value:"Female",children:"Female"})]}),e.jsx(he,{children:h.gender})]})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Birth Date",type:"date",fullWidth:!0,value:v.birthday||j.birthday||"",onChange:f=>y("birthday",f.target.value),InputLabelProps:{shrink:!0},error:!!h.birthday,helperText:h.birthday})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Joining Date",type:"date",fullWidth:!0,value:v.date_of_joining||j.date_of_joining||"",onChange:f=>y("date_of_joining",f.target.value),InputLabelProps:{shrink:!0},error:!!h.date_of_joining,helperText:h.date_of_joining})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(w,{label:"Address",fullWidth:!0,value:v.address||j.address,onChange:f=>y("address",f.target.value),error:!!h.address,helperText:h.address})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Employee ID",fullWidth:!0,value:v.employee_id||j.employee_id||"",onChange:f=>y("employee_id",f.target.value),error:!!h.employee_id,helperText:h.employee_id})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Phone Number",fullWidth:!0,value:v.phone||j.phone,onChange:f=>y("phone",f.target.value),error:!!h.phone,helperText:h.phone})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Email Adress",fullWidth:!0,value:v.email||j.email,onChange:f=>y("email",f.target.value),error:!!h.email,helperText:h.email})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"department",children:"Department"}),e.jsxs(H,{labelId:"department",onChange:f=>y("department",f.target.value),error:!!h.department,id:`department-select-${a.id}`,value:v.department||j.department||"na",label:"Department",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",disabled:!0,children:"Select Department"}),_.map(f=>e.jsx(D,{value:f.id,children:f.name},f.id))]}),e.jsx(he,{children:h.department})]})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"designation",children:"Designation"}),e.jsxs(H,{labelId:"designation",onChange:f=>y("designation",f.target.value),label:"Designation",error:!!h.designation,id:`designation-select-${a.id}`,value:v.designation||j.designation||"na",disabled:!a.department,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",disabled:!0,children:"Select Designation"}),g.map(f=>e.jsx(D,{value:f.id,children:f.title},f.id))]}),e.jsx(he,{children:h.designation})]})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"report_to",children:"Reports To"}),e.jsxs(H,{labelId:"report_to",value:v.report_to||j.report_to,onChange:f=>y("report_to",f.target.value),label:"Reports To",error:!!h.report_to,disabled:a.report_to==="na",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",children:"--"}),F.map(f=>e.jsx(D,{value:f.id,children:f.name},f.id))]}),e.jsx(he,{children:h.report_to})]})})]})}),e.jsx(le,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsx(re,{disabled:!S,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:o,children:"Submit"})})]})]})},Br=({user:a,setUser:T,open:_,closeModal:N})=>{const[c,P]=u.useState({id:a.id,passport_no:a.passport_no||"",passport_exp_date:a.passport_exp_date||"",nationality:a.nationality||"",religion:a.religion||"",marital_status:a.marital_status||"",employment_of_spouse:a.employment_of_spouse||"",number_of_children:a.number_of_children||"",nid:a.nid||""}),[x,j]=u.useState({id:a.id}),[r,v]=u.useState(!1),[l,S]=u.useState({}),[C,h]=u.useState(!1),s=Q(),o=(p,n)=>{P(i=>{const t={...i,[p]:n};return n===""&&delete t[p],p==="marital_status"&&n==="Single"&&(t.employment_of_spouse="",t.number_of_children=""),t}),j(i=>{const t={...i,[p]:n};return n===""&&delete t[p],p==="marital_status"&&n==="Single"&&(t.employment_of_spouse=null,t.number_of_children=null),t})};u.useEffect(()=>{for(const n in x)n!=="id"&&x[n]===a[n]&&delete x[n];const p=Object.keys(x).filter(n=>n!=="id").length>0;v(p)},[c,x,a]);const b=async p=>{var n;p.preventDefault(),h(!0);try{const i=await axios.post(route("profile.update"),{ruleSet:"personal",...c});i.status===200&&(T(i.data.user),B.success(((n=i.data.messages)==null?void 0:n.length)>0?i.data.messages.join(" "):"Personal information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),N())}catch(i){h(!1),i.response?(i.response.status===422?(S(i.response.data.errors||{}),B.error(i.response.data.error||"Failed to update personal information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}})):B.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.response.data)):i.request?(B.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.request)):(B.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error("Error",i.message))}finally{h(!1)}};return e.jsxs(oe,{open:_,onClose:N,children:[e.jsxs(ne,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e.jsx(O,{children:"Personal Information"}),e.jsx(X,{variant:"outlined",color:"primary",onClick:N,sx:{position:"absolute",top:8,right:16},children:e.jsx(ve,{})})]}),e.jsxs("form",{onSubmit:b,children:[e.jsx(ie,{children:e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Passport No",fullWidth:!0,value:x.passport_no||c.passport_no||"",onChange:p=>o("passport_no",p.target.value),error:!!l.passport_no,helperText:l.passport_no})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Passport Expiry Date",fullWidth:!0,type:"date",value:x.passport_exp_date||c.passport_exp_date||"",onChange:p=>o("passport_exp_date",p.target.value),InputLabelProps:{shrink:!0},error:!!l.passport_exp_date,helperText:l.passport_exp_date})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"NID No",fullWidth:!0,value:x.nid||c.nid||"",onChange:p=>o("nid",p.target.value),error:!!l.nid,helperText:l.nid})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Nationality",fullWidth:!0,value:x.nationality||c.nationality||"",onChange:p=>o("nationality",p.target.value),error:!!l.nationality,helperText:l.nationality})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Religion",fullWidth:!0,value:x.religion||c.religion||"",onChange:p=>o("religion",p.target.value),error:!!l.religion,helperText:l.religion})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"marital-status-label",children:"Marital status"}),e.jsxs(H,{labelId:"marital-status-label",value:x.marital_status||c.marital_status||"na",onChange:p=>o("marital_status",p.target.value),label:"Marital status",error:!!l.marital_status,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",children:"-"}),e.jsx(D,{value:"Single",children:"Single"}),e.jsx(D,{value:"Married",children:"Married"})]}),e.jsx(he,{children:l.marital_status})]})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Employment of spouse",fullWidth:!0,value:x.marital_status==="Single"?"":x.employment_of_spouse||c.employment_of_spouse,onChange:p=>o("employment_of_spouse",p.target.value),error:!!l.employment_of_spouse,helperText:l.employment_of_spouse,disabled:x.marital_status==="Single"||c.marital_status==="Single"})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"No. of children",fullWidth:!0,type:"number",value:x.marital_status==="Single"?"":x.number_of_children||c.number_of_children,onChange:p=>o("number_of_children",p.target.value),error:!!l.number_of_children,helperText:l.number_of_children,disabled:x.marital_status==="Single"||c.marital_status==="Single"})})]})}),e.jsx(le,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsx(re,{disabled:!r,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:C,children:"Submit"})})]})]})},Tr=({user:a,setUser:T,open:_,closeModal:N})=>{const[c,P]=u.useState({id:a.id,emergency_contact_primary_name:a.emergency_contact_primary_name||"",emergency_contact_primary_relationship:a.emergency_contact_primary_relationship||"",emergency_contact_primary_phone:a.emergency_contact_primary_phone||"",emergency_contact_secondary_name:a.emergency_contact_secondary_name||"",emergency_contact_secondary_relationship:a.emergency_contact_secondary_relationship||"",emergency_contact_secondary_phone:a.emergency_contact_secondary_phone||""}),[x,j]=u.useState({id:a.id}),[r,v]=u.useState(!1),[l,S]=u.useState({}),[C,h]=u.useState(!1),s=Q(),o=(p,n)=>{P(i=>{const t={...i,[p]:n};return n===""&&delete t[p],t}),j(i=>{const t={...i,[p]:n};return n===""&&delete t[p],t})};u.useEffect(()=>{for(const n in x)n!=="id"&&x[n]===a[n]&&delete x[n];const p=Object.keys(x).filter(n=>n!=="id").length>0;v(p)},[c,x,a]);const b=async p=>{var n;p.preventDefault(),h(!0);try{const i=await axios.post(route("profile.update"),{ruleSet:"emergency",...c});i.status===200&&(T(i.data.user),B.success(((n=i.data.messages)==null?void 0:n.length)>0?i.data.messages.join(" "):"Emergency contact updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),N())}catch(i){h(!1),i.response?(i.response.status===422?(S(i.response.data.errors||{}),B.error(i.response.data.error||"Failed to update emergency contact.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}})):B.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.response.data)):i.request?(B.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.request)):(B.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error("Error",i.message))}finally{h(!1)}};return e.jsxs(oe,{open:_,onClose:N,children:[e.jsxs(ne,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e.jsx(O,{children:"Personal Information"}),e.jsx(X,{variant:"outlined",color:"primary",onClick:N,sx:{position:"absolute",top:8,right:16},children:e.jsx(ve,{})})]}),e.jsxs("form",{onSubmit:b,children:[e.jsx(ie,{children:e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,children:e.jsx(fe,{children:e.jsxs(ye,{children:[e.jsx(O,{variant:"h5",gutterBottom:!0,children:"Primary Contact"}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Name",required:!0,fullWidth:!0,value:x.emergency_contact_primary_name||c.emergency_contact_primary_name||"",onChange:p=>o("emergency_contact_primary_name",p.target.value),error:!!l.bank_name,helperText:l.bank_name})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Relationship",required:!0,fullWidth:!0,value:x.emergency_contact_primary_relationship||c.emergency_contact_primary_relationship||"",onChange:p=>o("emergency_contact_primary_relationship",p.target.value),error:!!l.bank_name,helperText:l.bank_name})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Phone",required:!0,fullWidth:!0,value:x.emergency_contact_primary_phone||c.emergency_contact_primary_phone||"",onChange:p=>o("emergency_contact_primary_phone",p.target.value),error:!!l.bank_name,helperText:l.bank_name})})]})]})})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(fe,{children:e.jsxs(ye,{children:[e.jsx(O,{variant:"h5",gutterBottom:!0,children:"Secondary Contact"}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Name",fullWidth:!0,value:x.emergency_contact_secondary_name||c.emergency_contact_secondary_name||"",onChange:p=>o("emergency_contact_secondary_name",p.target.value),error:!!l.bank_name,helperText:l.bank_name})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Relationship",fullWidth:!0,value:x.emergency_contact_secondary_relationship||c.emergency_contact_secondary_relationship||"",onChange:p=>o("emergency_contact_secondary_relationship",p.target.value),error:!!l.bank_name,helperText:l.bank_name})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Phone",fullWidth:!0,value:x.emergency_contact_secondary_phone||c.emergency_contact_secondary_phone||"",onChange:p=>o("emergency_contact_secondary_phone",p.target.value),error:!!l.bank_name,helperText:l.bank_name})})]})]})})})]})}),e.jsx(le,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsx(re,{disabled:!r,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:C,children:"Submit"})})]})]})},$r=({user:a,setUser:T,open:_,closeModal:N})=>{const[c,P]=u.useState({id:a.id,bank_name:a.bank_name||"",bank_account_no:a.bank_account_no||"",ifsc_code:a.ifsc_code||"",pan_no:a.pan_no||""}),[x,j]=u.useState({id:a.id}),[r,v]=u.useState(!1),[l,S]=u.useState({}),[C,h]=u.useState(!1),s=Q(),o=(p,n)=>{P(i=>{const t={...i,[p]:n};return n===""&&delete t[p],t}),j(i=>{const t={...i,[p]:n};return n===""&&delete t[p],t})};u.useEffect(()=>{for(const n in x)n!=="id"&&x[n]===a[n]&&delete x[n];const p=Object.keys(x).filter(n=>n!=="id").length>0;v(p)},[c,x,a]);const b=async p=>{var n;p.preventDefault(),h(!0);try{const i=await axios.post(route("profile.update"),{ruleSet:"bank",...c});i.status===200&&(T(i.data.user),S({}),B.success(((n=i.data.messages)==null?void 0:n.length)>0?i.data.messages.join(" "):"Bank information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),N())}catch(i){h(!1),i.response?(i.response.status===422?(S(i.response.data.errors||{}),B.error(i.response.data.error||"Failed to update bank information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}})):B.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.response.data)):i.request?(B.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.request)):(B.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error("Error",i.message))}finally{h(!1)}};return e.jsxs(oe,{open:_,onClose:N,children:[e.jsxs(ne,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e.jsx(O,{children:"Bank Information"}),e.jsx(X,{variant:"outlined",color:"primary",onClick:N,sx:{position:"absolute",top:8,right:16},children:e.jsx(ve,{})})]}),e.jsxs("form",{onSubmit:b,children:[e.jsx(ie,{children:e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,children:e.jsx(w,{label:"Bank Name",fullWidth:!0,value:x.bank_name||c.bank_name||"",onChange:p=>o("bank_name",p.target.value),error:!!l.bank_name,helperText:l.bank_name})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(w,{size:"small",label:"Bank Account No.",fullWidth:!0,value:x.bank_account_no||c.bank_account_no||"",onChange:p=>o("bank_account_no",p.target.value),error:!!l.bank_account_no,helperText:l.bank_account_no})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(w,{label:"IFSC Code",fullWidth:!0,value:x.ifsc_code||c.ifsc_code||"",onChange:p=>o("ifsc_code",p.target.value),error:!!l.ifsc_code,helperText:l.ifsc_code})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(w,{label:"PAN No.",fullWidth:!0,value:x.pan_no||c.pan_no||"",onChange:p=>o("pan_no",p.target.value),error:!!l.pan_no,helperText:l.pan_no})})]})}),e.jsx(le,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsx(re,{disabled:!r,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:C,children:"Submit"})})]})]})},Rr=({user:a,open:T,closeModal:_,handleDelete:N,setUser:c})=>{const[P,x]=u.useState({id:a.id,family_member_name:a.family_member_name||"",family_member_relationship:a.family_member_relationship||"",family_member_dob:a.family_member_dob||"",family_member_phone:a.family_member_phone||""}),[j,r]=u.useState({id:a.id}),[v,l]=u.useState(!1),[S,C]=u.useState({}),[h,s]=u.useState(!1),o=Q(),b=(n,i)=>{x(t=>{const g={...t,[n]:i};return i===""&&delete g[n],g}),r(t=>{const g={...t,[n]:i};return i===""&&delete g[n],g})};u.useEffect(()=>{for(const i in j)i!=="id"&&j[i]===a[i]&&delete j[i];const n=Object.keys(j).filter(i=>i!=="id").length>0;l(n)},[P,j,a]);const p=async n=>{var i;n.preventDefault(),s(!0);try{const t=await axios.post(route("profile.update"),{ruleSet:"family",...P});t.status===200&&(c(t.data.user),B.success(((i=t.data.messages)==null?void 0:i.length)>0?t.data.messages.join(" "):"Family information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),_())}catch(t){s(!1),t.response?(t.response.status===422?(C(t.response.data.errors||{}),B.error(t.response.data.error||"Failed to update family information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}})):B.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),console.error(t.response.data)):t.request?(B.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),console.error(t.request)):(B.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),console.error("Error",t.message))}finally{s(!1)}};return e.jsxs(oe,{open:T,onClose:_,children:[e.jsxs(ne,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e.jsx(O,{children:"Family Member"}),e.jsx(X,{variant:"outlined",color:"primary",onClick:_,sx:{position:"absolute",top:8,right:16},children:e.jsx(ve,{})})]}),e.jsxs("form",{onSubmit:p,children:[e.jsx(ie,{children:e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Name",fullWidth:!0,value:j.family_member_name||P.family_member_name||"",onChange:n=>b("family_member_name",n.target.value),error:!!S.family_member_name,helperText:S.family_member_name})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Relationship",fullWidth:!0,value:j.family_member_relationship||P.family_member_relationship||"",onChange:n=>b("family_member_relationship",n.target.value),error:!!S.family_member_relationship,helperText:S.family_member_relationship})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Date of Birth",fullWidth:!0,type:"date",value:j.family_member_dob||P.family_member_dob||"",onChange:n=>b("family_member_dob",n.target.value),InputLabelProps:{shrink:!0},error:!!S.family_member_dob,helperText:S.family_member_dob})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Phone",fullWidth:!0,value:j.family_member_phone||P.family_member_phone||"",onChange:n=>b("family_member_phone",n.target.value),error:!!S.family_member_phone,helperText:S.family_member_phone})})]})}),e.jsx(le,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsx(re,{disabled:!v,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:h,children:"Submit"})})]})]})},Ar=({user:a,open:T,closeModal:_,setUser:N})=>{const[c,P]=u.useState({id:a.id}),[x,j]=u.useState(!1),[r,v]=u.useState(a.educations&&a.educations.length>0?a.educations:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),[l,S]=u.useState({}),[C,h]=u.useState(!1),s=Q(),o=(i,t,g)=>{const E=[...r];E[i]={...E[i],[t]:g},v(E);const F=E.filter((d,R)=>{const y=a.educations[R]||{},V=!y.id||d.institution!==y.institution||d.subject!==y.subject||d.degree!==y.degree||d.starting_date!==y.starting_date||d.complete_date!==y.complete_date||d.grade!==y.grade,f=y.id&&d.institution===y.institution&&d.subject===y.subject&&d.degree===y.degree&&d.starting_date===y.starting_date&&d.complete_date===y.complete_date&&d.grade===y.grade;return V&&!f});P(d=>({...d,educations:[...F]}));const I=F.length>0;j(I)},b=async i=>{const t=r[i],g=r.filter((E,F)=>F!==i);if(v(g.length>0?g:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),t.id){const E=new Promise(async(F,I)=>{try{const d=await fetch("/education/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:t.id,user_id:a.id})}),R=await d.json();d.ok?(P(y=>({...y,educations:R.educations})),N(y=>({...y,educations:R.educations})),F(R.message||"Education record deleted successfully.")):(S(R.errors),console.error(R.errors),I(R.error||"Failed to delete education record."))}catch(d){I(d)}});B.promise(E,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(je,{}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting education record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},success:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},error:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}})}},p=async i=>{i.preventDefault(),h(!0);const t=new Promise(async(g,E)=>{try{const F=await fetch("/education/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({educations:r.map(d=>({...d,user_id:a.id}))})}),I=await F.json();F.ok?(N(d=>({...d,educations:I.educations})),h(!1),_(),g([...I.messages])):(h(!1),S(I.errors),console.error(I.errors),E(I.error||"Failed to update education records."))}catch(F){h(!1),E(F.message||"An unexpected error occurred while updating education records.")}});B.promise(t,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(je,{}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating education records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},success:{render({data:g}){return e.jsx(e.Fragment,{children:g.map((E,F)=>e.jsx("div",{children:E},F))})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},error:{render({data:g}){return e.jsx(e.Fragment,{children:g})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}})},n=async()=>{v([...r,{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}])};return e.jsxs(oe,{open:T,onClose:_,maxWidth:"md",fullWidth:!0,children:[e.jsxs(ne,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e.jsx(O,{children:"Education Information"}),e.jsx(X,{onClick:_,sx:{position:"absolute",top:8,right:16},children:e.jsx(Fe,{})})]}),e.jsxs("form",{onSubmit:p,children:[e.jsx(ie,{children:e.jsxs(me,{children:[e.jsx(m,{container:!0,spacing:2,children:r.map((i,t)=>e.jsx(m,{item:!0,xs:12,children:e.jsx(fe,{children:e.jsxs(ye,{children:[e.jsxs(O,{variant:"h6",gutterBottom:!0,children:["Education #"+(t+1),e.jsx(X,{onClick:()=>b(t),sx:{position:"absolute",top:8,right:16},children:e.jsx(Fe,{})})]}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Institution",fullWidth:!0,value:i.institution||"",onChange:g=>o(t,"institution",g.target.value),error:!!l[`educations.${t}.institution`],helperText:l[`educations.${t}.institution`]?l[`educations.${t}.institution`][0]:""})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Degree",fullWidth:!0,value:i.degree||"",onChange:g=>o(t,"degree",g.target.value),error:!!l[`educations.${t}.degree`],helperText:l[`educations.${t}.degree`]?l[`educations.${t}.degree`][0]:""})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Subject",fullWidth:!0,value:i.subject||"",onChange:g=>o(t,"subject",g.target.value),error:!!l[`educations.${t}.subject`],helperText:l[`educations.${t}.subject`]?l[`educations.${t}.subject`][0]:""})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Started in",type:"month",fullWidth:!0,InputLabelProps:{shrink:!0},value:i.starting_date||"",onChange:g=>o(t,"starting_date",g.target.value),error:!!l[`educations.${t}.starting_date`],helperText:l[`educations.${t}.starting_date`]?l[`educations.${t}.starting_date`][0]:""})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Completed in",type:"month",fullWidth:!0,InputLabelProps:{shrink:!0},value:i.complete_date||"",onChange:g=>o(t,"complete_date",g.target.value),error:!!l[`educations.${t}.complete_date`],helperText:l[`educations.${t}.complete_date`]?l[`educations.${t}.complete_date`][0]:""})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Grade",fullWidth:!0,value:i.grade||"",onChange:g=>o(t,"grade",g.target.value),error:!!l[`educations.${t}.grade`],helperText:l[`educations.${t}.grade`]?l[`educations.${t}.grade`][0]:""})})]})]})})},t))}),e.jsx(me,{mt:2,children:e.jsxs(Ye,{size:"small",color:"error",sx:{mt:2},onClick:n,children:[e.jsx(Qe,{})," Add More"]})})]})}),e.jsx(le,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsx(re,{disabled:!x,sx:{borderRadius:"50px",padding:"6px 16px"},size:"large",variant:"outlined",color:"primary",type:"submit",loading:C,children:"Submit"})})]})]})},Wr=({user:a,open:T,closeModal:_,setUser:N})=>{const[c,P]=u.useState({id:a.id}),[x,j]=u.useState(!1),[r,v]=u.useState(a.experiences.length>0?a.experiences:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),[l,S]=u.useState({}),[C,h]=u.useState(!1),s=Q(),o=(i,t,g)=>{const E=[...r];E[i]={...E[i],[t]:g},v(E);const F=E.filter((d,R)=>{const y=a.experiences[R]||{},V=!y.id||d.company_name!==y.company_name||d.location!==y.location||d.job_position!==y.job_position||d.period_from!==y.period_from||d.period_to!==y.period_to||d.description!==y.description,f=y.id&&d.company_name===y.company_name&&d.location===y.location&&d.job_position===y.job_position&&d.period_from===y.period_from&&d.period_to===y.period_to&&d.description===y.description;return V&&!f});P(d=>({...d,experiences:[...F]}));const I=F.length>0;j(I)},b=async i=>{const t=r[i],g=r.filter((E,F)=>F!==i);if(v(g.length>0?g:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),t.id){const E=new Promise(async(F,I)=>{try{const d=await fetch("/experience/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:t.id,user_id:a.id})}),R=await d.json();d.ok?(P(y=>({...y,experiences:R.experiences})),N(y=>({...y,experiences:R.experiences})),F(R.message||"Experience record deleted successfully."),_()):(S([...R.errors]),I(R.error||"Failed to delete experience record."))}catch(d){I(d)}});B.promise(E,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(je,{}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting experience record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},success:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},error:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}})}},p=async i=>{i.preventDefault(),h(!0);const t=new Promise(async(g,E)=>{try{const F=await fetch("/experience/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({experiences:r.map(d=>({...d,user_id:a.id}))})}),I=await F.json();F.ok?(N(d=>({...d,experiences:I.experiences})),h(!1),_(),g([...I.messages])):(h(!1),S(I.errors),console.error(I.errors),E(I.error||"Failed to update experience records."))}catch(F){h(!1),E(F.message||"An unexpected error occurred while updating experience records.")}});B.promise(t,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(je,{}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating experience records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},success:{render({data:g}){return e.jsx(e.Fragment,{children:g.map((E,F)=>e.jsx("div",{children:E},F))})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},error:{render({data:g}){return e.jsx(e.Fragment,{children:g})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}})},n=async()=>{v([...r,{company:"",role:"",start_date:"",end_date:"",responsibilities:""}])};return e.jsxs(oe,{open:T,onClose:_,maxWidth:"md",fullWidth:!0,children:[e.jsxs(ne,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e.jsx(O,{children:"Experience Information"}),e.jsx(X,{onClick:_,sx:{position:"absolute",top:8,right:16},children:e.jsx(Fe,{})})]}),e.jsxs("form",{onSubmit:p,children:[e.jsx(ie,{children:e.jsxs(me,{children:[e.jsx(m,{container:!0,spacing:2,children:r.map((i,t)=>e.jsx(m,{item:!0,xs:12,children:e.jsx(fe,{children:e.jsxs(ye,{children:[e.jsxs(O,{variant:"h6",gutterBottom:!0,children:["Experience #"+(t+1),e.jsx(X,{onClick:()=>b(t),sx:{position:"absolute",top:8,right:16},children:e.jsx(Fe,{})})]}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Company",fullWidth:!0,value:i.company_name||"",onChange:g=>o(t,"company_name",g.target.value),error:!!l[`experiences.${t}.company_name`],helperText:l[`experiences.${t}.company_name`]?l[`experiences.${t}.company_name`][0]:""})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Location",fullWidth:!0,value:i.location||"",onChange:g=>o(t,"location",g.target.value),error:!!l[`experiences.${t}.location`],helperText:l[`experiences.${t}.location`]?l[`experiences.${t}.location`][0]:""})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Role",fullWidth:!0,value:i.job_position||"",onChange:g=>o(t,"job_position",g.target.value),error:!!l[`experiences.${t}.job_position`],helperText:l[`experiences.${t}.job_position`]?l[`experiences.${t}.job_position`][0]:""})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Started From",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:i.period_from||"",onChange:g=>o(t,"period_from",g.target.value),error:!!l[`experiences.${t}.period_from`],helperText:l[`experiences.${t}.period_from`]?l[`experiences.${t}.period_from`][0]:""})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(w,{label:"Ended On",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:i.period_to||"",onChange:g=>o(t,"period_to",g.target.value),error:!!l[`experiences.${t}.period_to`],helperText:l[`experiences.${t}.period_to`]?l[`experiences.${t}.period_to`][0]:""})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(w,{label:"Responsibilities",fullWidth:!0,multiline:!0,rows:3,value:i.description||"",onChange:g=>o(t,"description",g.target.value),error:!!l[`experiences.${t}.description`],helperText:l[`experiences.${t}.description`]?l[`experiences.${t}.description`][0]:""})})]})]})})},t))}),e.jsxs(Ye,{size:"small",color:"error",sx:{mt:2},onClick:n,children:[e.jsx(Qe,{})," Add More"]})]})}),e.jsx(le,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsx(re,{disabled:!x,sx:{borderRadius:"50px",padding:"6px 16px"},size:"large",variant:"outlined",color:"primary",type:"submit",loading:C,children:"Submit"})})]})]})},Lr=({user:a,setUser:T})=>{const[_,N]=u.useState({id:a.id,salary_basis:a.salary_basis||"",salary_amount:a.salary_amount||"",payment_type:a.payment_type||"",pf_contribution:a.pf_contribution??!1,pf_no:a.pf_no||"",employee_pf_rate:a.employee_pf_rate||0,additional_pf_rate:a.additional_pf_rate||0,total_pf_rate:a.total_pf_rate||0,esi_contribution:a.esi_contribution??!1,esi_no:a.esi_no||"",employee_esi_rate:a.employee_esi_rate||0,additional_esi_rate:a.additional_esi_rate||0,total_esi_rate:a.total_esi_rate||0}),[c,P]=u.useState({id:a.id}),[x,j]=u.useState(!1),[r,v]=u.useState({}),[l,S]=u.useState(!1),C=Q(),h=(o,b)=>{N(p=>{const n={...p,[o]:b};return b===""&&delete n[o],o==="pf_contribution"&&b===0?(n.pf_no="",n.employee_pf_rate=0,n.additional_pf_rate=0,n.total_pf_rate=0):(o==="employee_pf_rate"||o==="additional_pf_rate")&&(n.total_pf_rate=n.employee_pf_rate+n.additional_pf_rate),o==="esi_contribution"&&b===0?(n.esi_no="",n.employee_esi_rate=0,n.additional_esi_rate=0,n.total_esi_rate=0):(o==="employee_esi_rate"||o==="additional_esi_rate")&&(n.total_esi_rate=n.employee_esi_rate+n.additional_esi_rate),n}),P(p=>{const n={...p,[o]:b};return b===""&&delete n[o],o==="pf_contribution"&&b===0?(n.pf_no="",n.employee_pf_rate=0,n.additional_pf_rate=0,n.total_pf_rate=0):(o==="employee_pf_rate"||o==="additional_pf_rate")&&(n.total_pf_rate=n.employee_pf_rate+n.additional_pf_rate),o==="esi_contribution"&&b===0?(n.esi_no="",n.employee_esi_rate=0,n.additional_esi_rate=0,n.total_esi_rate=0):(o==="employee_esi_rate"||o==="additional_esi_rate")&&(n.total_esi_rate=n.employee_esi_rate+n.additional_esi_rate),n})};u.useEffect(()=>{for(const b in c)b!=="id"&&c[b]===a[b]&&delete c[b];const o=Object.keys(c).filter(b=>b!=="id").length>0;j(o)},[_,c,a]);const s=async o=>{var b,p,n;o.preventDefault(),S(!0);try{const i=await axios.post(route("profile.update"),{ruleSet:"salary",..._});i.status===200?(T(i.data.user),S(!1),B.success(((b=i.data.messages)==null?void 0:b.length)>0?i.data.messages.join(" "):"Salary information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:C.glassCard.background,border:C.glassCard.border,color:C.palette.text.primary}})):(S(!1),v(i.data.errors),B.error(i.data.error||"Failed to update salary information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:C.glassCard.background,border:C.glassCard.border,color:C.palette.text.primary}}))}catch(i){S(!1),B.error(((n=(p=i.response)==null?void 0:p.data)==null?void 0:n.message)||"An unexpected error occurred.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:C.glassCard.background,border:C.glassCard.border,color:C.palette.text.primary}}),console.error(i)}};return e.jsx(m,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:e.jsx(m,{item:!0,xs:12,md:12,sx:{display:"flex",flexDirection:"column"},children:e.jsxs(fe,{children:[e.jsx(_r,{title:"Salary & Statutory Information"}),e.jsxs("form",{onSubmit:s,children:[e.jsxs(ye,{children:[e.jsx(O,{sx:{fontWeight:"bold",m:2},children:"Salary Information"}),e.jsxs(m,{container:!0,spacing:3,children:[e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"salary-basis-label",children:"Salary basis"}),e.jsxs(H,{labelId:"salary-basis-label",value:c.salary_basis||_.salary_basis||"na",onChange:o=>h("salary_basis",o.target.value),error:!!r.salary_basis,helperText:r.salary_basis,label:"Salary basis",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:C.glassCard.background,border:C.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",disabled:!0,children:"Select salary basis type"}),e.jsx(D,{value:"Hourly",children:"Hourly"}),e.jsx(D,{value:"Daily",children:"Daily"}),e.jsx(D,{value:"Weekly",children:"Weekly"}),e.jsx(D,{value:"Monthly",children:"Monthly"})]})]})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsx(w,{label:"Salary amount",type:"number",fullWidth:!0,placeholder:"Type your salary amount",value:c.salary_amount||_.salary_amount||"",onChange:o=>h("salary_amount",o.target.value),InputProps:{startAdornment:e.jsx(jr,{position:"start",children:"$"})},error:!!r.salary_amount,helperText:r.salary_amount})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"payment-type-label",children:"Payment type"}),e.jsxs(H,{labelId:"payment-type-label",label:"Payment type",id:`gender-select-${a.id}`,value:c.payment_type||_.payment_type||"na",onChange:o=>h("payment_type",o.target.value),error:!!r.payment_type,helperText:r.payment_type,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:C.glassCard.background,border:C.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",disabled:!0,children:"Select payment type"}),e.jsx(D,{value:"Bank transfer",children:"Bank transfer"}),e.jsx(D,{value:"Check",children:"Check"}),e.jsx(D,{value:"Cash",children:"Cash"})]})]})})]}),e.jsx(Ge,{sx:{my:3}}),e.jsx(O,{sx:{fontWeight:"bold",m:2},children:"PF Information"}),e.jsxs(m,{container:!0,spacing:3,children:[e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"pf-contribution-label",children:"PF contribution"}),e.jsxs(H,{labelId:"pf-contribution-label",label:"PF contribution",id:`gender-select-${a.id}`,value:c.pf_contribution!==void 0?c.pf_contribution:_.pf_contribution!==void 0?_.pf_contribution:"na",onChange:o=>h("pf_contribution",o.target.value),error:!!r.pf_contribution,helperText:r.pf_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:C.glassCard.background,border:C.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",disabled:!0,children:"Select PF contribution"}),e.jsx(D,{value:1,children:"Yes"}),e.jsx(D,{value:0,children:"No"})]})]})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsx(w,{disabled:!(c.pf_contribution||_.pf_contribution),InputLabelProps:{shrink:!0},label:"PF No.",fullWidth:!0,type:"text",placeholder:"Enter PF No.",value:c.pf_no||_.pf_no,onChange:o=>h("pf_no",o.target.value),error:!!r.pf_no,helperText:r.pf_no})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"employee-pf-rate-label",children:"Employee PF rate"}),e.jsxs(H,{disabled:!(c.pf_contribution||_.pf_contribution),labelId:"employee-pf-rate-label",label:"Employee PF rate",value:c.employee_pf_rate||_.employee_pf_rate||"na",onChange:o=>h("employee_pf_rate",o.target.value),error:!!r.employee_pf_rate,helperText:r.employee_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:C.glassCard.background,border:C.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",disabled:!0,children:"Select pf rate"}),[...Array(11).keys()].map(o=>e.jsxs(D,{value:o,children:[o,"%"]},o))]})]})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"additional-rate-label",children:"Additional rate"}),e.jsxs(H,{disabled:!(c.pf_contribution||_.pf_contribution),labelId:"additional-rate-label",label:"Additional rate",id:`gender-select-${a.id}`,value:c.additional_pf_rate||_.additional_pf_rate||"na",onChange:o=>h("additional_pf_rate",o.target.value),error:!!r.additional_pf_rate,helperText:r.additional_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:C.glassCard.background,border:C.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(o=>e.jsxs(D,{value:o,children:[o,"%"]},o))]})]})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsx(w,{disabled:!(c.pf_contribution||_.pf_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:c.total_pf_rate||_.total_pf_rate?`${c.total_pf_rate||_.total_pf_rate}%`:"",InputProps:{readOnly:!0},error:!!r.total_pf_rate,helperText:r.total_pf_rate})})]}),e.jsx(Ge,{sx:{my:3}}),e.jsx(O,{sx:{fontWeight:"bold",m:2},children:"ESI Information"}),e.jsxs(m,{container:!0,spacing:3,children:[e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"esi-contribution-label",children:"ESI contribution"}),e.jsxs(H,{labelId:"esi-contribution-label",label:"ESI contribution",value:c.esi_contribution!==void 0?c.esi_contribution:_.esi_contribution!==void 0?_.esi_contribution:"na",onChange:o=>h("esi_contribution",o.target.value),error:!!r.esi_contribution,helperText:r.esi_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:C.glassCard.background,border:C.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",disabled:!0,children:"Select ESI contribution"}),e.jsx(D,{value:1,children:"Yes"}),e.jsx(D,{value:0,children:"No"})]})]})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsx(w,{disabled:!(c.esi_contribution||_.esi_contribution),InputLabelProps:{shrink:!0},label:"ESI No.",fullWidth:!0,type:"text",placeholder:"Enter ESI No.",value:c.esi_no||_.esi_no,onChange:o=>h("esi_no",o.target.value),error:!!r.esi_no,helperText:r.esi_no})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"esi-contribution-label",children:"Employee ESI rate"}),e.jsxs(H,{disabled:!(c.esi_contribution||_.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:c.employee_esi_rate||_.employee_esi_rate||"na",onChange:o=>h("employee_esi_rate",o.target.value),error:!!r.employee_esi_rate,helperText:r.employee_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:C.glassCard.background,border:C.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",disabled:!0,children:"Select esi rate"}),[...Array(11).keys()].map(o=>e.jsxs(D,{value:o,children:[o,"%"]},o))]})]})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(z,{id:"esi-contribution-label",children:"Additional rate"}),e.jsxs(H,{disabled:!(c.esi_contribution||_.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:c.additional_esi_rate||_.additional_esi_rate||"na",onChange:o=>h("additional_esi_rate",o.target.value),error:!!r.additional_esi_rate,helperText:r.additional_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:C.glassCard.background,border:C.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(D,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(o=>e.jsxs(D,{value:o,children:[o,"%"]},o))]})]})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsx(w,{disabled:!(c.esi_contribution||_.esi_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:c.total_esi_rate||_.total_esi_rate?`${c.total_esi_rate||_.total_esi_rate}%`:"",InputProps:{readOnly:!0},error:!!r.total_esi_rate,helperText:r.total_esi_rate})})]})]}),e.jsx(yr,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsx(re,{disabled:!x,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:l,children:"Submit"})})]})]})})})},Ur=({title:a,allUsers:T,report_to:_,departments:N,designations:c})=>{var Re,Ae,We,Le;const{auth:P}=Me().props,x=Q(),j=qe(x.breakpoints.down("sm"));qe(x.breakpoints.down("md"));const[r,v]=u.useState(Me().props.user),[l,S]=u.useState("overview"),[C,h]=u.useState(!1),[s,o]=u.useState({profile:!1,personal:!1,emergency:!1,bank:!1,family:!1,education:!1,experience:!1,salary:!1}),[b,p]=u.useState({search:"",section:"all",completionStatus:"all",showEmpty:!0}),[n,i]=u.useState(!1),[t,g]=u.useState({completion_percentage:0,total_sections:8,completed_sections:0,last_updated:null,profile_views:0}),E=((Re=P.permissions)==null?void 0:Re.includes("profile.own.update"))||((Ae=P.permissions)==null?void 0:Ae.includes("profile.update"))||P.user.id===r.id,F=((We=P.permissions)==null?void 0:We.includes("profile.own.view"))||((Le=P.permissions)==null?void 0:Le.includes("profile.view"))||P.user.id===r.id,I=u.useCallback(k=>{o(W=>({...W,[k]:!0}))},[]),d=u.useCallback(k=>{o(W=>({...W,[k]:!1}))},[]),R=u.useCallback((k,W)=>{p(ke=>({...ke,[k]:W}))},[]),y=u.useCallback(()=>{const k=[r.name&&r.email,r.phone&&r.address,r.birthday&&r.gender,r.department&&r.designation,r.emergency_contact_primary_name,r.bank_name||r.bank_account_no,r.educations&&r.educations.length>0,r.experiences&&r.experiences.length>0],W=k.filter(Boolean).length,ke=Math.round(W/k.length*100);return g(Ze=>({...Ze,completion_percentage:ke,completed_sections:W,total_sections:k.length})),{completed:W,total:k.length,percentage:ke}},[r]),V=u.useCallback(async()=>{try{const k=await er.get(route("profile.stats",{user:r.id}));k.data.stats&&g(W=>({...W,...k.data.stats}))}catch(k){console.error("Error fetching profile stats:",k),y()}},[r.id,y]);u.useEffect(()=>{y(),V()},[y,V]);const f=u.useCallback(k=>{k&&v(k),y(),V(),B.success("Profile updated successfully")},[y,V]),L=u.useMemo(()=>[{title:"Profile Completion",value:`${t.completion_percentage}%`,icon:e.jsx(Se,{}),color:t.completion_percentage>=80?"text-green-400":t.completion_percentage>=50?"text-orange-400":"text-red-400",iconBg:t.completion_percentage>=80?"bg-green-500/20":t.completion_percentage>=50?"bg-orange-500/20":"bg-red-500/20",description:`${t.completed_sections}/${t.total_sections} sections completed`},{title:"Last Updated",value:t.last_updated?vr(t.last_updated).fromNow():"Never",icon:e.jsx(tr,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Profile last modified"},{title:"Profile Views",value:t.profile_views||0,icon:e.jsx(Cr,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Times profile viewed"},{title:"Account Status",value:r.active?"Active":"Inactive",icon:r.active?e.jsx(Se,{}):e.jsx(_e,{}),color:r.active?"text-green-400":"text-red-400",iconBg:r.active?"bg-green-500/20":"bg-red-500/20",description:"Current account status"}],[t,r.active]),$=u.useMemo(()=>{const k=[];return E&&k.push({label:j?"Edit":"Edit Profile",icon:e.jsx(kr,{className:"w-4 h-4"}),onPress:()=>I("profile"),color:"primary",variant:"solid"}),k.push({label:j?"":"Export",isIconOnly:j,icon:e.jsx(Ke,{className:"w-4 h-4"}),color:"default",variant:"bordered"}),k},[E,j,I]),M=u.useCallback(k=>{switch(k){case"personal":return!r.passport_no&&!r.nationality&&!r.religion&&!r.marital_status;case"emergency":return!r.emergency_contact_primary_name&&!r.emergency_contact_secondary_name;case"bank":return!r.bank_name&&!r.bank_account_no&&!r.ifsc_code&&!r.pan_no;case"family":return!r.family_member_name&&!r.family_member_relationship;case"education":return!r.educations||r.educations.length===0;case"experience":return!r.experiences||r.experiences.length===0;default:return!1}},[r]),G=u.useCallback(k=>{switch(k){case"personal":return!!(r.passport_no&&r.nationality&&r.religion&&r.marital_status);case"emergency":return!!(r.emergency_contact_primary_name&&r.emergency_contact_primary_phone);case"bank":return!!(r.bank_name&&r.bank_account_no);case"family":return!!(r.family_member_name&&r.family_member_relationship);case"education":return!!(r.educations&&r.educations.length>0);case"experience":return!!(r.experiences&&r.experiences.length>0);default:return!1}},[r]);if(!F)return e.jsxs(Be,{children:[e.jsx(Oe,{title:a}),e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx(be,{className:"bg-white/10 backdrop-blur-md border-white/20 max-w-md",children:e.jsxs(ge,{className:"p-8 text-center",children:[e.jsx(_e,{className:"w-16 h-16 text-warning-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-default-500",children:"You don't have permission to view this profile."})]})})})]});const ae=()=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ce,{title:"Personal Information",icon:e.jsx(se,{}),onEdit:()=>I("personal"),canEdit:E,isEmpty:M("personal"),isCompleted:G("personal"),children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(A,{label:"Passport No.",value:r.passport_no,icon:e.jsx(se,{})}),e.jsx(A,{label:"Passport Expiry",value:r.passport_exp_date,type:"date",icon:e.jsx(Ie,{})}),e.jsx(A,{label:"NID No.",value:r.nid,icon:e.jsx(se,{})}),e.jsx(A,{label:"Nationality",value:r.nationality,icon:e.jsx(Nr,{})}),e.jsx(A,{label:"Religion",value:r.religion,icon:e.jsx(de,{})}),e.jsx(A,{label:"Marital Status",value:r.marital_status,type:"chip",icon:e.jsx(we,{})}),e.jsx(A,{label:"Spouse Employment",value:r.employment_of_spouse,icon:e.jsx(xe,{})}),e.jsx(A,{label:"Children",value:r.number_of_children,icon:e.jsx(Ee,{}),showDivider:!1})]})}),e.jsx(ce,{title:"Emergency Contacts",icon:e.jsx(pe,{}),onEdit:()=>I("emergency"),canEdit:E,isEmpty:M("emergency"),isCompleted:G("emergency"),children:e.jsxs("div",{className:"space-y-4",children:[r.emergency_contact_primary_name&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-semibold text-foreground mb-2",children:"Primary Contact"}),e.jsxs("div",{className:"space-y-1 pl-4 border-l-2 border-primary-500",children:[e.jsx(A,{label:"Name",value:r.emergency_contact_primary_name,icon:e.jsx(de,{})}),e.jsx(A,{label:"Relationship",value:r.emergency_contact_primary_relationship,icon:e.jsx(we,{})}),e.jsx(A,{label:"Phone",value:r.emergency_contact_primary_phone,type:"phone",icon:e.jsx(pe,{}),showDivider:!1})]})]}),r.emergency_contact_secondary_name&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-semibold text-foreground mb-2",children:"Secondary Contact"}),e.jsxs("div",{className:"space-y-1 pl-4 border-l-2 border-secondary-500",children:[e.jsx(A,{label:"Name",value:r.emergency_contact_secondary_name,icon:e.jsx(de,{})}),e.jsx(A,{label:"Relationship",value:r.emergency_contact_secondary_relationship,icon:e.jsx(we,{})}),e.jsx(A,{label:"Phone",value:r.emergency_contact_secondary_phone,type:"phone",icon:e.jsx(pe,{}),showDivider:!1})]})]})]})}),e.jsx(ce,{title:"Banking Information",icon:e.jsx(ze,{}),onEdit:()=>I("bank"),canEdit:E,isEmpty:M("bank"),isCompleted:G("bank"),children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(A,{label:"Bank Name",value:r.bank_name,icon:e.jsx(or,{})}),e.jsx(A,{label:"Account Number",value:r.bank_account_no,icon:e.jsx(se,{})}),e.jsx(A,{label:"IFSC Code",value:r.ifsc_code,icon:e.jsx(se,{})}),e.jsx(A,{label:"PAN Number",value:r.pan_no,icon:e.jsx(se,{}),showDivider:!1})]})}),e.jsx(ce,{title:"Family Information",icon:e.jsx(Ee,{}),onEdit:()=>I("family"),canEdit:E,isEmpty:M("family"),isCompleted:G("family"),children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(A,{label:"Member Name",value:r.family_member_name,icon:e.jsx(de,{})}),e.jsx(A,{label:"Relationship",value:r.family_member_relationship,icon:e.jsx(we,{})}),e.jsx(A,{label:"Date of Birth",value:r.family_member_dob,type:"date",icon:e.jsx(Ie,{})}),e.jsx(A,{label:"Phone",value:r.family_member_phone,type:"phone",icon:e.jsx(pe,{}),showDivider:!1})]})}),e.jsx(ce,{title:"Education History",icon:e.jsx(He,{}),onEdit:()=>I("education"),canEdit:E,isEmpty:M("education"),isCompleted:G("education"),className:"lg:col-span-2",children:r.educations&&r.educations.length>0?e.jsx("div",{className:"space-y-4",children:r.educations.map((k,W)=>e.jsxs(U.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:W*.1},className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h5",{className:"font-semibold text-foreground mb-2",children:k.institution}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-default-500",children:"Degree:"}),e.jsx("p",{className:"font-medium",children:k.degree||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-default-500",children:"Start Date:"}),e.jsx("p",{className:"font-medium",children:k.starting_date?new Date(k.starting_date).getFullYear():"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-default-500",children:"End Date:"}),e.jsx("p",{className:"font-medium",children:k.complete_date?new Date(k.complete_date).getFullYear():"N/A"})]})]})]},k.id||W))}):null}),e.jsx(ce,{title:"Work Experience",icon:e.jsx(xe,{}),onEdit:()=>I("experience"),canEdit:E,isEmpty:M("experience"),isCompleted:G("experience"),className:"lg:col-span-2",children:r.experiences&&r.experiences.length>0?e.jsx("div",{className:"space-y-4",children:r.experiences.map((k,W)=>e.jsxs(U.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:W*.1},className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h5",{className:"font-semibold text-foreground mb-1",children:k.job_position}),e.jsx("p",{className:"text-primary-400 font-medium mb-2",children:k.company_name}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-default-500",children:"Duration:"}),e.jsxs("p",{className:"font-medium",children:[k.period_from?new Date(k.period_from).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"N/A"," ","- ",k.period_to?new Date(k.period_to).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Present"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-default-500",children:"Location:"}),e.jsx("p",{className:"font-medium",children:k.location||"N/A"})]})]}),k.description&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-default-500 text-sm",children:"Description:"}),e.jsx("p",{className:"text-sm mt-1",children:k.description})]})]},W))}):null})]}),J=()=>e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"p-8 bg-white/5 rounded-lg border border-white/10 max-w-md mx-auto",children:[e.jsx(xe,{className:"w-16 h-16 text-default-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Projects Coming Soon"}),e.jsx("p",{className:"text-default-500 text-sm",children:"Project management integration will be available in a future update."})]})}),Ce=()=>e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"p-8 bg-white/5 rounded-lg border border-white/10 max-w-md mx-auto",children:[e.jsx(De,{className:"w-16 h-16 text-default-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Salary Information"}),e.jsx("p",{className:"text-default-500 text-sm mb-4",children:"Access detailed salary and compensation information."}),E&&e.jsx(Y,{color:"primary",variant:"bordered",onPress:()=>I("salary"),startContent:e.jsx(De,{className:"w-4 h-4"}),children:"View Salary Details"})]})}),te=()=>e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"p-8 bg-white/5 rounded-lg border border-white/10 max-w-md mx-auto",children:[e.jsx(Sr,{className:"w-16 h-16 text-default-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Assets Coming Soon"}),e.jsx("p",{className:"text-default-500 text-sm",children:"Asset management and tracking will be available in a future update."})]})}),Pe=()=>e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"p-8 bg-white/5 rounded-lg border border-white/10 max-w-md mx-auto",children:[e.jsx(Ke,{className:"w-16 h-16 text-default-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Documents Coming Soon"}),e.jsx("p",{className:"text-default-500 text-sm",children:"Document management and storage will be available in a future update."})]})});return e.jsxs(Be,{children:[e.jsx(Oe,{title:r.name}),e.jsxs(Ne,{children:[s.profile&&e.jsx(Z,{isOpen:s.profile,onClose:()=>d("profile"),title:"Edit Profile",subtitle:"Update your basic profile information",icon:e.jsx(de,{}),showFooter:!1,children:e.jsx(Ir,{user:r,allUsers:T,departments:N,designations:c,open:s.profile,setUser:v,closeModal:()=>d("profile"),onSuccess:f})}),s.personal&&e.jsx(Z,{isOpen:s.personal,onClose:()=>d("personal"),title:"Personal Information",subtitle:"Update your personal details and identification",icon:e.jsx(se,{}),showFooter:!1,children:e.jsx(Br,{user:r,open:s.personal,setUser:v,closeModal:()=>d("personal"),onSuccess:f})}),s.emergency&&e.jsx(Z,{isOpen:s.emergency,onClose:()=>d("emergency"),title:"Emergency Contacts",subtitle:"Manage your emergency contact information",icon:e.jsx(pe,{}),showFooter:!1,children:e.jsx(Tr,{user:r,open:s.emergency,setUser:v,closeModal:()=>d("emergency"),onSuccess:f})}),s.bank&&e.jsx(Z,{isOpen:s.bank,onClose:()=>d("bank"),title:"Banking Information",subtitle:"Update your banking and financial details",icon:e.jsx(ze,{}),showFooter:!1,children:e.jsx($r,{user:r,open:s.bank,setUser:v,closeModal:()=>d("bank"),onSuccess:f})}),s.family&&e.jsx(Z,{isOpen:s.family,onClose:()=>d("family"),title:"Family Information",subtitle:"Add or update family member details",icon:e.jsx(Ee,{}),showFooter:!1,children:e.jsx(Rr,{user:r,open:s.family,setUser:v,closeModal:()=>d("family"),onSuccess:f})}),s.education&&e.jsx(Z,{isOpen:s.education,onClose:()=>d("education"),title:"Education History",subtitle:"Manage your educational background",icon:e.jsx(He,{}),showFooter:!1,children:e.jsx(Ar,{user:r,open:s.education,setUser:v,closeModal:()=>d("education"),onSuccess:f})}),s.experience&&e.jsx(Z,{isOpen:s.experience,onClose:()=>d("experience"),title:"Work Experience",subtitle:"Update your professional experience",icon:e.jsx(xe,{}),showFooter:!1,children:e.jsx(Wr,{user:r,open:s.experience,setUser:v,closeModal:()=>d("experience"),onSuccess:f})}),s.salary&&e.jsx(Z,{isOpen:s.salary,onClose:()=>d("salary"),title:"Salary Information",subtitle:"Review salary and compensation details",icon:e.jsx(De,{}),showFooter:!1,children:e.jsx(Lr,{user:r,setUser:v})})]}),e.jsx(nr,{title:`${r.name}'s Profile`,subtitle:"Comprehensive employee profile management with advanced features",icon:e.jsx(de,{className:"w-8 h-8"}),variant:"default",actionButtons:$}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(ir,{stats:L})}),e.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(Dr,{user:r,departments:N,designations:c,onEditClick:()=>I("profile"),profileStats:t,canEdit:E})}),e.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Fr,{label:"Search Profile Sections",variant:"bordered",placeholder:"Search sections, fields, or content...",value:b.search,onValueChange:k=>R("search",k),startContent:e.jsx(sr,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:j?"sm":"md"})}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(Pr,{variant:"bordered",className:"bg-white/5",children:e.jsxs(Y,{isIconOnly:j,color:n?"primary":"default",onPress:()=>i(!n),className:n?"bg-purple-500/20":"bg-white/5",children:[e.jsx(wr,{className:"w-4 h-4"}),!j&&e.jsx("span",{className:"ml-1",children:"Filters"})]})})})]}),e.jsx(Ne,{children:n&&e.jsx(U.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsx(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:e.jsxs(ge,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(Ve,{label:"Profile Section",variant:"bordered",selectedKeys:b.section!=="all"?[b.section]:[],onSelectionChange:k=>{const W=Array.from(k)[0]||"all";R("section",W)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e.jsx(K,{value:"all",children:"All Sections"},"all"),e.jsx(K,{value:"basic",children:"Basic Information"},"basic"),e.jsx(K,{value:"personal",children:"Personal Details"},"personal"),e.jsx(K,{value:"work",children:"Work Information"},"work"),e.jsx(K,{value:"emergency",children:"Emergency Contacts"},"emergency"),e.jsx(K,{value:"bank",children:"Banking Details"},"bank"),e.jsx(K,{value:"education",children:"Education"},"education"),e.jsx(K,{value:"experience",children:"Experience"},"experience")]}),e.jsxs(Ve,{label:"Completion Status",variant:"bordered",selectedKeys:b.completionStatus!=="all"?[b.completionStatus]:[],onSelectionChange:k=>{const W=Array.from(k)[0]||"all";R("completionStatus",W)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e.jsx(K,{value:"all",children:"All Status"},"all"),e.jsx(K,{value:"completed",children:"Completed"},"completed"),e.jsx(K,{value:"incomplete",children:"Incomplete"},"incomplete"),e.jsx(K,{value:"empty",children:"Empty"},"empty")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-default-600",children:"Show Empty:"}),e.jsx(Y,{size:"sm",variant:b.showEmpty?"solid":"bordered",color:b.showEmpty?"primary":"default",onPress:()=>R("showEmpty",!b.showEmpty),children:b.showEmpty?"Yes":"No"})]})]}),(b.search||b.section!=="all"||b.completionStatus!=="all")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[b.search&&e.jsxs(ee,{variant:"flat",color:"primary",size:"sm",onClose:()=>R("search",""),children:["Search: ",b.search]}),b.section!=="all"&&e.jsxs(ee,{variant:"flat",color:"secondary",size:"sm",onClose:()=>R("section","all"),children:["Section: ",b.section]}),b.completionStatus!=="all"&&e.jsxs(ee,{variant:"flat",color:"warning",size:"sm",onClose:()=>R("completionStatus","all"),children:["Status: ",b.completionStatus]})]})]})})})}),e.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:e.jsxs(ge,{className:"p-0",children:[e.jsxs(Er,{selectedKey:l,onSelectionChange:S,variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-4 border-b border-white/10",cursor:"w-full bg-primary-500",tab:"max-w-fit px-4 h-12",tabContent:"group-data-[selected=true]:text-primary-foreground text-default-600 font-medium"},children:[e.jsx(ue,{title:"Overview"},"overview"),e.jsx(ue,{title:"Projects"},"projects"),e.jsx(ue,{title:"Salary & Benefits"},"salary"),e.jsx(ue,{title:"Assets"},"assets"),e.jsx(ue,{title:"Documents"},"documents")]}),e.jsx("div",{className:"p-6",children:e.jsxs(Ne,{mode:"wait",children:[l==="overview"&&e.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:ae()},"overview"),l==="projects"&&e.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:J()},"projects"),l==="salary"&&e.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Ce()},"salary"),l==="assets"&&e.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:te()},"assets"),l==="documents"&&e.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Pe()},"documents")]})})]})})})]})]})};Ur.layout=a=>e.jsx(Be,{children:a});export{Ur as default};
