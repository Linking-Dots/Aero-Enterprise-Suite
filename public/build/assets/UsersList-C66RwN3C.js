import{r as _,j as t,s as Ve,d as ee,t as Lr,F as ve,a as be,bX as _a,bY as wa,bZ as vn,Q as bn,c as se,b as ie,S as Dr}from"./app-D-ze4LIL.js";import{y as ft,e as Ie,c as yn,C as ht,D as pt,E as xt,H as te,G as jn,x as _n,s as ye,w as Ge,f as wn,l as Ne,I as Nn,A as Fn}from"./Dashboard-CUy_nAbp.js";import{S as Tn}from"./StatsCards-VJ2Wj256.js";import{c as le,t as gt,F as Na,B as z,b as Fa}from"./react-toastify.esm-DFN4BHMz.js";import{F as Cn}from"./HashtagIcon-B5gJcv2Y.js";import{F as Ke}from"./UserIcon-CFc3VIUV.js";import{F as vt}from"./EnvelopeIcon-CZTluUSy.js";import{F as Pe,a as Ta}from"./DeviceTabletIcon-DyfavhdD.js";import{F as Ca}from"./CheckCircleIcon-BWL4OIVa.js";import{F as Se}from"./ShieldCheckIcon-CxKfWDuc.js";import{F as bt}from"./EllipsisVerticalIcon-CBv94wGv.js";import{F as Ia}from"./PencilIcon-C0n620BO.js";import{F as Xe}from"./LockOpenIcon-DYrsMrZh.js";import{F as Ze}from"./LockClosedIcon-DuJ_kSiJ.js";import{t as In,a as Pn,b as Sn,c as $n}from"./chunk-F3UDT23P-BnEOxEdL.js";import{t as En,a as Rn}from"./chunk-YRZGWF2W-BMiyaWVL.js";import{p as Pa}from"./chunk-EAPQ7RWQ-Bn6Js6CE.js";import{u as Sa}from"./chunk-S574QCAN-DkKGZm1x.js";import{F as An}from"./XCircleIcon-DNGRLeyA.js";import{F as On}from"./TrophyIcon-83mh7hbt.js";import{F as ot}from"./UserPlusIcon-vr_MHJh1.js";import{F as Ur}from"./ChartBarIcon-t38ZJuBA.js";import{m as Ln}from"./proxy-DHDD2l0J.js";import{F as Dn}from"./DocumentArrowDownIcon-Cy5LgDtS.js";import{F as Un}from"./ChartPieIcon-95DCDEA0.js";import{F as Mn}from"./TableCellsIcon-DDwR091U.js";import{c as Bn}from"./chunk-D5XJWRAV-DR1DH8Yr.js";import{s as q}from"./chunk-TLYTI3QM-DE6tZQwU.js";import{i as kn}from"./chunk-SSA7SXE4-C_DXIyAP.js";import{b as zn}from"./chunk-57V4RE7B-BxOBVrez.js";import{s as Gn}from"./chunk-TQNYOUFX-Dov8wJiy.js";import"./KeyIcon-D43C8Hxf.js";import"./logo-Pwvcz7fP.js";import"./ExclamationTriangleIcon-DnxCj3XK.js";import"./features-animation-C0XQ_bXc.js";import"./create-visual-element-BYMyABGG.js";import"./chunk-XJ2YRSUP-I41LKsyT.js";import"./useToggleState-CYuU6fDq.js";function Wn({title:e,titleId:r,...a},n){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},a),e?_.createElement("title",{id:r},e):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Mr=_.forwardRef(Wn),me=()=>"var(--borderRadius, 12px)",Hn=({allUsers:e,roles:r,isMobile:a,isTablet:n,setUsers:o,pagination:d,onPageChange:c,onRowsPerPageChange:f,totalUsers:h=0,onEdit:y,loading:w=!1,updateUserOptimized:j,deleteUserOptimized:N,toggleUserStatusOptimized:R,updateUserRolesOptimized:$,toggleSingleDeviceLogin:A,resetUserDevice:E,deviceActions:S={}})=>{const[m,B]=_.useState({}),L=(s,g="w-5 h-5")=>{const P=(s==null?void 0:s.toLowerCase())||"";return P.includes("mobile")||P.includes("android")||P.includes("iphone")?t.jsx(Pe,{className:`${g} text-primary`}):P.includes("tablet")||P.includes("ipad")?t.jsx(Ta,{className:`${g} text-secondary`}):t.jsx(Fa,{className:`${g} text-default-500`})},I=s=>{const g=(s==null?void 0:s.toLowerCase())||"";return g.includes("mobile")||g.includes("android")||g.includes("iphone")?"Mobile Device":g.includes("tablet")||g.includes("ipad")?"Tablet":"Desktop"},v=(s,g,P)=>{B(l=>({...l,[`${s}-${g}`]:P}))},T=(s,g)=>m[`${s}-${g}`]||!1;async function u(s,g){v(s,"role",!0);const P=new Promise(async(l,H)=>{var V;try{const W=await axios.post(route("user.updateRole",{id:s}),{roles:g});W.status===200&&($&&$(s,g),l([W.data.message||"Role updated successfully"]))}catch(W){((V=W.response)==null?void 0:V.status)===422?H(W.response.data.errors||["Failed to update user role."]):H(["An unexpected error occurred. Please try again later."])}finally{v(s,"role",!1)}});return z.promise(P,{pending:"Updating employee role...",success:{render({data:l}){return l.join(", ")}},error:{render({data:l}){return Array.isArray(l)?l.join(", "):l}}}),P}const C=_.useMemo(()=>{const s=[{name:"#",uid:"sl"},{name:"USER",uid:"user"},{name:"EMAIL",uid:"email"},{name:"DEPARTMENT",uid:"department"},{name:"DEVICE STATUS",uid:"device_status"},{name:"STATUS",uid:"status"},{name:"ROLES",uid:"roles"},{name:"ACTIONS",uid:"actions"}];if(!a&&!n)s.splice(3,0,{name:"PHONE",uid:"phone"});else if(a)s.splice(s.findIndex(g=>g.uid==="department"),1),s.splice(s.findIndex(g=>g.uid==="device_status"),1);else if(n){const g=s.findIndex(P=>P.uid==="device_status");if(g>-1){const P=s.splice(g,1)[0];s.splice(2,0,P)}}return s},[a,n]),O=async(s,g)=>{if(!T(s,"status")){v(s,"status",!0);try{R?(R(s,!g),z.success(`User status ${g?"deactivated":"activated"} successfully`)):o&&(o(P=>P.map(l=>l.id===s?{...l,active:!g}:l)),z.success(`User status ${g?"deactivated":"activated"} successfully`))}catch(P){console.error("Error toggling user status:",P),z.error("Failed to update user status")}finally{v(s,"status",!1)}}},b=(s,g,P)=>{var H;const l=s[g];switch(g){case"sl":const Me=(d!=null&&d.currentPage&&(d!=null&&d.perPage)?Number((d.currentPage-1)*d.perPage):0)+(typeof P=="number"?P:0)+1;return t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"flex items-center justify-center w-8 h-8 border shadow-sm",style:{background:"var(--theme-content2, #F4F4F5)",borderColor:"var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 8px)",color:"var(--theme-foreground, #000000)"},children:t.jsx("span",{className:"text-sm font-bold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:Me})})});case"user":return t.jsx(Sa,{className:"w-fit max-w-full",avatarProps:{radius:me(),size:"sm",src:(s==null?void 0:s.profile_image_url)||(s==null?void 0:s.profile_image),showFallback:!0,name:(s==null?void 0:s.name)||"Unnamed User",isBordered:!0,style:{borderColor:"var(--theme-primary, #3B82F6)",borderWidth:"2px"}},name:t.jsx("span",{className:"text-sm font-semibold whitespace-nowrap text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:(s==null?void 0:s.name)||"Unnamed User"}),description:t.jsxs("span",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["ID: ",s==null?void 0:s.id]})});case"email":return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:t.jsx(vt,{className:"w-3.5 h-3.5"})}),t.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s.email})]});case"phone":return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:t.jsx(ft,{className:"w-3.5 h-3.5"})}),t.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s.phone||"N/A"})]});case"department":return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:t.jsx(Ie,{className:"w-3.5 h-3.5"})}),t.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:(s==null?void 0:s.department)||"N/A"})]});case"device_status":const ne=T(s.id,"deviceToggle");return t.jsx("div",{className:"flex items-center space-x-2",children:s.single_device_login?t.jsxs(t.Fragment,{children:[t.jsx(le,{size:"sm",variant:"flat",color:s.active_device?"warning":"success",startContent:ne?t.jsx("div",{className:"animate-spin",children:t.jsx(ve,{className:"w-3 h-3"})}):s.active_device?t.jsx(Ze,{className:"w-3 h-3"}):t.jsx(Xe,{className:"w-3 h-3"}),children:ne?"Loading...":s.active_device?"Locked":"Free"}),s.active_device&&!ne&&t.jsx(gt,{content:t.jsxs("div",{className:"backdrop-blur-md border rounded-lg p-4 shadow-2xl max-w-sm",style:{background:"color-mix(in srgb, var(--theme-content1) 20%, transparent)",borderColor:"var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)"},children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[L(s.active_device.user_agent,"w-5 h-5"),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-foreground text-sm",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s.active_device.device_name||"Unknown Device"}),t.jsx("div",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:I(s.active_device.user_agent)})]})]}),t.jsx("div",{className:"space-y-2 text-xs",children:t.jsx("div",{className:"pt-2 mt-2 border-t",style:{borderColor:"color-mix(in srgb, var(--theme-divider) 20%, transparent)"},children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Na,{className:"w-3 h-3 text-success"}),t.jsx("span",{className:"text-success text-xs font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s.active_device.is_active?"Currently Active":"Inactive"})]})})})]}),placement:"top",classNames:{content:"p-0 bg-transparent shadow-none border-none"},children:t.jsx("div",{className:"flex items-center p-1 rounded-sm hover:bg-content1/10 transition-colors cursor-default",children:L(s.active_device.user_agent,"w-4 h-4")})})]}):t.jsx(le,{size:"sm",variant:"flat",color:"default",startContent:ne?t.jsx("div",{className:"animate-spin",children:t.jsx(ve,{className:"w-3 h-3"})}):t.jsx(Se,{className:"w-3 h-3"}),children:ne?"Loading...":"Disabled"})});case"status":return t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.active,onChange:()=>O(s.id,s.active),disabled:T(s.id,"status")}),t.jsx("div",{className:"w-11 h-6 peer-focus:outline-hidden peer-focus:ring-4 peer-focus:ring-opacity-30 rounded-full peer transition-all duration-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all",style:{backgroundColor:s.active?"var(--theme-success, #10B981)":"var(--theme-danger, #EF4444)"}}),T(s.id,"status")&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(Ve,{size:"sm",color:"default"})})]}),t.jsx("span",{className:"text-xs font-medium",style:{color:s.active?"var(--theme-success, #10B981)":"var(--theme-danger, #EF4444)",fontFamily:'var(--fontFamily, "Inter")'},children:s.active?"Active":"Inactive"})]});case"roles":const Be=((H=s.roles)==null?void 0:H.map(k=>typeof k=="object"&&k!==null?k.name:k))||[],ke=new Set(Be),ue=Array.from(ke).join(", ")||"No Roles";return t.jsx("div",{className:"flex items-center",children:t.jsxs(ht,{isDisabled:T(s.id,"role"),className:"max-w-[220px]",children:[t.jsx(pt,{children:t.jsx(ee,{className:"capitalize",variant:"solid",size:"sm",radius:me(),startContent:T(s.id,"role")?t.jsx(Ve,{size:"sm"}):null,style:{background:"var(--theme-primary, #3B82F6)",color:"white",fontFamily:'var(--fontFamily, "Inter")',borderRadius:me()},children:ue})}),t.jsx(xt,{disallowEmptySelection:!1,"aria-label":"Role selection",closeOnSelect:!1,selectedKeys:ke,selectionMode:"multiple",variant:"flat",onSelectionChange:k=>{const we=Array.from(k);u(s.id,we)},children:(r||[]).map(k=>t.jsx(te,{children:typeof k=="object"&&k!==null?k.name:k},typeof k=="object"&&k!==null?k.name:k))})]})});case"actions":return t.jsx("div",{className:"flex justify-center items-center",children:t.jsxs(ht,{children:[t.jsx(pt,{children:t.jsx(ee,{isIconOnly:!0,size:"sm",variant:"solid",radius:me(),style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)",fontFamily:'var(--fontFamily, "Inter")',borderRadius:me()},className:"hover:opacity-80 transition-opacity",children:t.jsx(bt,{className:"w-4 h-4"})})}),t.jsxs(xt,{style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-divider, #E5E7EB)",borderRadius:me()},children:[t.jsx(te,{textValue:"View Profile",href:route("profile",{user:s.id}),as:Lr,className:"text-blue-500",startContent:t.jsx(Ke,{className:"w-4 h-4"}),children:"View Profile"}),t.jsx(te,{textValue:"Edit User",onPress:()=>{y&&y(s)},className:"text-amber-500",startContent:t.jsx(Ia,{className:"w-4 h-4"}),children:"Edit"}),t.jsx(te,{textValue:"Device Toggle",onPress:()=>{A&&!T(s.id,"deviceToggle")&&(v(s.id,"deviceToggle",!0),A(s.id,!s.single_device_login).finally(()=>{v(s.id,"deviceToggle",!1)}))},isDisabled:S[s.id]||T(s.id,"deviceToggle"),startContent:T(s.id,"deviceToggle")?t.jsx("div",{className:"animate-spin",children:t.jsx(ve,{className:"w-4 h-4"})}):s.single_device_login?t.jsx(Xe,{className:"w-4 h-4"}):t.jsx(Ze,{className:"w-4 h-4"}),className:s.single_device_login?"text-orange-500":"text-green-500",children:T(s.id,"deviceToggle")?"Processing...":s.single_device_login?"Disable Device Lock":"Enable Device Lock"}),s.single_device_login&&s.active_device&&t.jsx(te,{textValue:"Reset Device",onPress:()=>{E&&!T(s.id,"deviceReset")&&(v(s.id,"deviceReset",!0),E(s.id).finally(()=>{v(s.id,"deviceReset",!1)}))},isDisabled:S[s.id]||T(s.id,"deviceReset"),startContent:T(s.id,"deviceReset")?t.jsx("div",{className:"animate-spin",children:t.jsx(ve,{className:"w-4 h-4"})}):t.jsx(ve,{className:"w-4 h-4"}),className:"text-red-500",children:T(s.id,"deviceReset")?"Resetting...":"Reset Device"}),t.jsx(te,{textValue:"View Devices",href:route("admin.users.devices",{userId:s.id}),as:Lr,startContent:t.jsx(Pe,{className:"w-4 h-4"}),className:"text-blue-500",children:"View Device History"})]})]})});default:return l}},p=()=>!e||!h||w?null:t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-6 py-4 border-t",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:"var(--theme-content2, #F4F4F5)",borderRadius:"0 0 var(--borderRadius, 12px) var(--borderRadius, 12px)"},children:[t.jsxs("span",{className:"text-sm text-default-600 mb-3 sm:mb-0 font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["Showing"," ",t.jsx("span",{className:"font-semibold text-default-900",children:(d.currentPage-1)*d.perPage+1})," ","to"," ",t.jsx("span",{className:"font-semibold text-default-900",children:Math.min(d.currentPage*d.perPage,h)})," ","of"," ",t.jsx("span",{className:"font-semibold text-default-900",children:h})," ","users"]}),t.jsx(Pa,{total:Math.ceil(h/d.perPage),initialPage:d.currentPage,page:d.currentPage,onChange:c,size:a?"sm":"md",variant:"flat",showControls:!0,radius:me(),style:{fontFamily:'var(--fontFamily, "Inter")'},classNames:{wrapper:"gap-1",item:"bg-default-100 hover:bg-default-200 text-default-700 font-medium border border-default-200",cursor:"bg-primary text-primary-foreground font-semibold shadow-md",prev:"bg-default-100 hover:bg-default-200 text-default-700 border border-default-200",next:"bg-default-100 hover:bg-default-200 text-default-700 border border-default-200"}})]});return t.jsxs("div",{className:"w-full flex flex-col border rounded-lg shadow-lg",style:{maxHeight:"calc(100vh - 240px)",borderColor:"var(--theme-divider, #E4E4E7)",background:"var(--theme-content1, #FFFFFF)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[t.jsx("div",{className:"flex-1 overflow-auto",style:{scrollbarWidth:"thin",scrollbarColor:"var(--theme-divider, #E4E4E7) transparent"},children:t.jsxs(In,{removeWrapper:!0,selectionMode:"none",isCompact:a,classNames:{base:"min-w-[900px]",wrapper:"p-0 shadow-none",th:"text-default-600 border-b font-semibold text-xs sticky top-0 z-30",td:"border-b py-4 px-3",table:"border-collapse w-full",thead:"sticky top-0 z-30",tbody:"",tr:"hover:bg-default-50 transition-colors duration-150",emptyWrapper:"text-center h-32",loadingWrapper:"h-32"},style:{"--table-border-color":"var(--theme-divider, #E4E4E7)","--table-header-bg":"var(--theme-content2, #F4F4F5)","--table-row-hover":"var(--theme-default-50, #F9FAFB)"},children:[t.jsx(En,{columns:C,children:s=>t.jsx(Rn,{align:s.uid==="actions"||s.uid==="sl"?"center":"start",width:s.uid==="user"?280:s.uid==="email"?240:s.uid==="phone"?140:s.uid==="department"||s.uid==="device_status"?160:s.uid==="status"?120:s.uid==="roles"?180:s.uid==="actions"?120:void 0,style:{background:"var(--table-header-bg)",borderColor:"var(--table-border-color)",fontFamily:'var(--fontFamily, "Inter")',fontSize:"0.75rem",fontWeight:"600"},children:t.jsxs("div",{className:"flex items-center gap-2 py-1",children:[s.uid==="sl"&&t.jsx(Cn,{className:"w-3 h-3 text-default-400"}),s.uid==="user"&&t.jsx(Ke,{className:"w-3 h-3 text-default-400"}),s.uid==="email"&&t.jsx(vt,{className:"w-3 h-3 text-default-400"}),s.uid==="phone"&&t.jsx(ft,{className:"w-3 h-3 text-default-400"}),s.uid==="department"&&t.jsx(Ie,{className:"w-3 h-3 text-default-400"}),s.uid==="device_status"&&t.jsx(Pe,{className:"w-3 h-3 text-default-400"}),s.uid==="status"&&t.jsx(Ca,{className:"w-3 h-3 text-default-400"}),s.uid==="roles"&&t.jsx(Se,{className:"w-3 h-3 text-default-400"}),s.uid==="actions"&&t.jsx(bt,{className:"w-3 h-3 text-default-400"}),t.jsx("span",{children:s.name})]})},s.uid)}),t.jsx(Pn,{items:e||[],emptyContent:t.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[t.jsx(yn,{className:"w-12 h-12 text-default-300 mb-3"}),t.jsx("p",{className:"text-default-500 font-medium",children:"No users found"}),t.jsx("p",{className:"text-default-400 text-sm",children:"Try adjusting your search or filters"})]}),loadingContent:t.jsx("div",{className:"flex justify-center items-center py-8",children:t.jsx(Ve,{size:"lg",color:"primary"})}),isLoading:w,children:(s,g)=>{const P=e?e.findIndex(l=>l.id===s.id):g;return t.jsx(Sn,{className:"group",style:{background:"var(--theme-content1, #FFFFFF)"},children:l=>t.jsx($n,{style:{borderColor:"var(--table-border-color)",fontFamily:'var(--fontFamily, "Inter")',background:"inherit"},children:b(s,l,P)})},s.id)}})]})}),p()]})};var $a=typeof global=="object"&&global&&global.Object===Object&&global,Vn=typeof self=="object"&&self&&self.Object===Object&&self,Q=$a||Vn||Function("return this")(),X=Q.Symbol,Ea=Object.prototype,qn=Ea.hasOwnProperty,Kn=Ea.toString,Fe=X?X.toStringTag:void 0;function Xn(e){var r=qn.call(e,Fe),a=e[Fe];try{e[Fe]=void 0;var n=!0}catch{}var o=Kn.call(e);return n&&(r?e[Fe]=a:delete e[Fe]),o}var Zn=Object.prototype,Yn=Zn.toString;function Jn(e){return Yn.call(e)}var Qn="[object Null]",es="[object Undefined]",Br=X?X.toStringTag:void 0;function he(e){return e==null?e===void 0?es:Qn:Br&&Br in Object(e)?Xn(e):Jn(e)}function ae(e){return e!=null&&typeof e=="object"}var ts="[object Symbol]";function at(e){return typeof e=="symbol"||ae(e)&&he(e)==ts}function Ra(e,r){for(var a=-1,n=e==null?0:e.length,o=Array(n);++a<n;)o[a]=r(e[a],a,e);return o}var J=Array.isArray,kr=X?X.prototype:void 0,zr=kr?kr.toString:void 0;function Aa(e){if(typeof e=="string")return e;if(J(e))return Ra(e,Aa)+"";if(at(e))return zr?zr.call(e):"";var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}var rs=/\s/;function as(e){for(var r=e.length;r--&&rs.test(e.charAt(r)););return r}var ns=/^\s+/;function ss(e){return e&&e.slice(0,as(e)+1).replace(ns,"")}function K(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Gr=NaN,is=/^[-+]0x[0-9a-f]+$/i,ls=/^0b[01]+$/i,os=/^0o[0-7]+$/i,ds=parseInt;function Wr(e){if(typeof e=="number")return e;if(at(e))return Gr;if(K(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=K(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=ss(e);var a=ls.test(e);return a||os.test(e)?ds(e.slice(2),a?2:8):is.test(e)?Gr:+e}function Oa(e){return e}var cs="[object AsyncFunction]",us="[object Function]",ms="[object GeneratorFunction]",fs="[object Proxy]";function St(e){if(!K(e))return!1;var r=he(e);return r==us||r==ms||r==cs||r==fs}var dt=Q["__core-js_shared__"],Hr=function(){var e=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function hs(e){return!!Hr&&Hr in e}var ps=Function.prototype,xs=ps.toString;function pe(e){if(e!=null){try{return xs.call(e)}catch{}try{return e+""}catch{}}return""}var gs=/[\\^$.*+?()[\]{}|]/g,vs=/^\[object .+?Constructor\]$/,bs=Function.prototype,ys=Object.prototype,js=bs.toString,_s=ys.hasOwnProperty,ws=RegExp("^"+js.call(_s).replace(gs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ns(e){if(!K(e)||hs(e))return!1;var r=St(e)?ws:vs;return r.test(pe(e))}function Fs(e,r){return e==null?void 0:e[r]}function xe(e,r){var a=Fs(e,r);return Ns(a)?a:void 0}var yt=xe(Q,"WeakMap"),Vr=Object.create,Ts=function(){function e(){}return function(r){if(!K(r))return{};if(Vr)return Vr(r);e.prototype=r;var a=new e;return e.prototype=void 0,a}}();function Cs(e,r,a){switch(a.length){case 0:return e.call(r);case 1:return e.call(r,a[0]);case 2:return e.call(r,a[0],a[1]);case 3:return e.call(r,a[0],a[1],a[2])}return e.apply(r,a)}function La(e,r){var a=-1,n=e.length;for(r||(r=Array(n));++a<n;)r[a]=e[a];return r}var Is=800,Ps=16,Ss=Date.now;function $s(e){var r=0,a=0;return function(){var n=Ss(),o=Ps-(n-a);if(a=n,o>0){if(++r>=Is)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}function Es(e){return function(){return e}}var Ye=function(){try{var e=xe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Rs=Ye?function(e,r){return Ye(e,"toString",{configurable:!0,enumerable:!1,value:Es(r),writable:!0})}:Oa,Da=$s(Rs);function As(e,r){for(var a=-1,n=e==null?0:e.length;++a<n&&r(e[a],a,e)!==!1;);return e}var Os=9007199254740991,Ls=/^(?:0|[1-9]\d*)$/;function $t(e,r){var a=typeof e;return r=r??Os,!!r&&(a=="number"||a!="symbol"&&Ls.test(e))&&e>-1&&e%1==0&&e<r}function Et(e,r,a){r=="__proto__"&&Ye?Ye(e,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[r]=a}function De(e,r){return e===r||e!==e&&r!==r}var Ds=Object.prototype,Us=Ds.hasOwnProperty;function Rt(e,r,a){var n=e[r];(!(Us.call(e,r)&&De(n,a))||a===void 0&&!(r in e))&&Et(e,r,a)}function _e(e,r,a,n){var o=!a;a||(a={});for(var d=-1,c=r.length;++d<c;){var f=r[d],h=void 0;h===void 0&&(h=e[f]),o?Et(a,f,h):Rt(a,f,h)}return a}var qr=Math.max;function Ua(e,r,a){return r=qr(r===void 0?e.length-1:r,0),function(){for(var n=arguments,o=-1,d=qr(n.length-r,0),c=Array(d);++o<d;)c[o]=n[r+o];o=-1;for(var f=Array(r+1);++o<r;)f[o]=n[o];return f[r]=a(c),Cs(e,this,f)}}function Ms(e,r){return Da(Ua(e,r,Oa),e+"")}var Bs=9007199254740991;function Ma(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Bs}function nt(e){return e!=null&&Ma(e.length)&&!St(e)}function ks(e,r,a){if(!K(a))return!1;var n=typeof r;return(n=="number"?nt(a)&&$t(r,a.length):n=="string"&&r in a)?De(a[r],e):!1}function zs(e){return Ms(function(r,a){var n=-1,o=a.length,d=o>1?a[o-1]:void 0,c=o>2?a[2]:void 0;for(d=e.length>3&&typeof d=="function"?(o--,d):void 0,c&&ks(a[0],a[1],c)&&(d=o<3?void 0:d,o=1),r=Object(r);++n<o;){var f=a[n];f&&e(r,f,n,d)}return r})}var Gs=Object.prototype;function At(e){var r=e&&e.constructor,a=typeof r=="function"&&r.prototype||Gs;return e===a}function Ws(e,r){for(var a=-1,n=Array(e);++a<e;)n[a]=r(a);return n}var Hs="[object Arguments]";function Kr(e){return ae(e)&&he(e)==Hs}var Ba=Object.prototype,Vs=Ba.hasOwnProperty,qs=Ba.propertyIsEnumerable,Je=Kr(function(){return arguments}())?Kr:function(e){return ae(e)&&Vs.call(e,"callee")&&!qs.call(e,"callee")};function Ks(){return!1}var ka=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xr=ka&&typeof module=="object"&&module&&!module.nodeType&&module,Xs=Xr&&Xr.exports===ka,Zr=Xs?Q.Buffer:void 0,Zs=Zr?Zr.isBuffer:void 0,Re=Zs||Ks,Ys="[object Arguments]",Js="[object Array]",Qs="[object Boolean]",ei="[object Date]",ti="[object Error]",ri="[object Function]",ai="[object Map]",ni="[object Number]",si="[object Object]",ii="[object RegExp]",li="[object Set]",oi="[object String]",di="[object WeakMap]",ci="[object ArrayBuffer]",ui="[object DataView]",mi="[object Float32Array]",fi="[object Float64Array]",hi="[object Int8Array]",pi="[object Int16Array]",xi="[object Int32Array]",gi="[object Uint8Array]",vi="[object Uint8ClampedArray]",bi="[object Uint16Array]",yi="[object Uint32Array]",M={};M[mi]=M[fi]=M[hi]=M[pi]=M[xi]=M[gi]=M[vi]=M[bi]=M[yi]=!0;M[Ys]=M[Js]=M[ci]=M[Qs]=M[ui]=M[ei]=M[ti]=M[ri]=M[ai]=M[ni]=M[si]=M[ii]=M[li]=M[oi]=M[di]=!1;function ji(e){return ae(e)&&Ma(e.length)&&!!M[he(e)]}function Ot(e){return function(r){return e(r)}}var za=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$e=za&&typeof module=="object"&&module&&!module.nodeType&&module,_i=$e&&$e.exports===za,ct=_i&&$a.process,je=function(){try{var e=$e&&$e.require&&$e.require("util").types;return e||ct&&ct.binding&&ct.binding("util")}catch{}}(),Yr=je&&je.isTypedArray,Lt=Yr?Ot(Yr):ji,wi=Object.prototype,Ni=wi.hasOwnProperty;function Ga(e,r){var a=J(e),n=!a&&Je(e),o=!a&&!n&&Re(e),d=!a&&!n&&!o&&Lt(e),c=a||n||o||d,f=c?Ws(e.length,String):[],h=f.length;for(var y in e)(r||Ni.call(e,y))&&!(c&&(y=="length"||o&&(y=="offset"||y=="parent")||d&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||$t(y,h)))&&f.push(y);return f}function Wa(e,r){return function(a){return e(r(a))}}var Fi=Wa(Object.keys,Object),Ti=Object.prototype,Ci=Ti.hasOwnProperty;function Ii(e){if(!At(e))return Fi(e);var r=[];for(var a in Object(e))Ci.call(e,a)&&a!="constructor"&&r.push(a);return r}function Dt(e){return nt(e)?Ga(e):Ii(e)}function Pi(e){var r=[];if(e!=null)for(var a in Object(e))r.push(a);return r}var Si=Object.prototype,$i=Si.hasOwnProperty;function Ei(e){if(!K(e))return Pi(e);var r=At(e),a=[];for(var n in e)n=="constructor"&&(r||!$i.call(e,n))||a.push(n);return a}function Ue(e){return nt(e)?Ga(e,!0):Ei(e)}var Ri=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ai=/^\w*$/;function Oi(e,r){if(J(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||at(e)?!0:Ai.test(e)||!Ri.test(e)||r!=null&&e in Object(r)}var Ae=xe(Object,"create");function Li(){this.__data__=Ae?Ae(null):{},this.size=0}function Di(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var Ui="__lodash_hash_undefined__",Mi=Object.prototype,Bi=Mi.hasOwnProperty;function ki(e){var r=this.__data__;if(Ae){var a=r[e];return a===Ui?void 0:a}return Bi.call(r,e)?r[e]:void 0}var zi=Object.prototype,Gi=zi.hasOwnProperty;function Wi(e){var r=this.__data__;return Ae?r[e]!==void 0:Gi.call(r,e)}var Hi="__lodash_hash_undefined__";function Vi(e,r){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Ae&&r===void 0?Hi:r,this}function fe(e){var r=-1,a=e==null?0:e.length;for(this.clear();++r<a;){var n=e[r];this.set(n[0],n[1])}}fe.prototype.clear=Li;fe.prototype.delete=Di;fe.prototype.get=ki;fe.prototype.has=Wi;fe.prototype.set=Vi;function qi(){this.__data__=[],this.size=0}function st(e,r){for(var a=e.length;a--;)if(De(e[a][0],r))return a;return-1}var Ki=Array.prototype,Xi=Ki.splice;function Zi(e){var r=this.__data__,a=st(r,e);if(a<0)return!1;var n=r.length-1;return a==n?r.pop():Xi.call(r,a,1),--this.size,!0}function Yi(e){var r=this.__data__,a=st(r,e);return a<0?void 0:r[a][1]}function Ji(e){return st(this.__data__,e)>-1}function Qi(e,r){var a=this.__data__,n=st(a,e);return n<0?(++this.size,a.push([e,r])):a[n][1]=r,this}function de(e){var r=-1,a=e==null?0:e.length;for(this.clear();++r<a;){var n=e[r];this.set(n[0],n[1])}}de.prototype.clear=qi;de.prototype.delete=Zi;de.prototype.get=Yi;de.prototype.has=Ji;de.prototype.set=Qi;var Oe=xe(Q,"Map");function el(){this.size=0,this.__data__={hash:new fe,map:new(Oe||de),string:new fe}}function tl(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function it(e,r){var a=e.__data__;return tl(r)?a[typeof r=="string"?"string":"hash"]:a.map}function rl(e){var r=it(this,e).delete(e);return this.size-=r?1:0,r}function al(e){return it(this,e).get(e)}function nl(e){return it(this,e).has(e)}function sl(e,r){var a=it(this,e),n=a.size;return a.set(e,r),this.size+=a.size==n?0:1,this}function ce(e){var r=-1,a=e==null?0:e.length;for(this.clear();++r<a;){var n=e[r];this.set(n[0],n[1])}}ce.prototype.clear=el;ce.prototype.delete=rl;ce.prototype.get=al;ce.prototype.has=nl;ce.prototype.set=sl;var il="Expected a function";function Ut(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(il);var a=function(){var n=arguments,o=r?r.apply(this,n):n[0],d=a.cache;if(d.has(o))return d.get(o);var c=e.apply(this,n);return a.cache=d.set(o,c)||d,c};return a.cache=new(Ut.Cache||ce),a}Ut.Cache=ce;var ll=500;function ol(e){var r=Ut(e,function(n){return a.size===ll&&a.clear(),n}),a=r.cache;return r}var dl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cl=/\\(\\)?/g,ul=ol(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(dl,function(a,n,o,d){r.push(o?d.replace(cl,"$1"):n||a)}),r});function ml(e){return e==null?"":Aa(e)}function lt(e,r){return J(e)?e:Oi(e,r)?[e]:ul(ml(e))}function Mt(e){if(typeof e=="string"||at(e))return e;var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}function Ha(e,r){r=lt(r,e);for(var a=0,n=r.length;e!=null&&a<n;)e=e[Mt(r[a++])];return a&&a==n?e:void 0}function Qe(e,r,a){var n=e==null?void 0:Ha(e,r);return n===void 0?a:n}function Bt(e,r){for(var a=-1,n=r.length,o=e.length;++a<n;)e[o+a]=r[a];return e}var Jr=X?X.isConcatSpreadable:void 0;function fl(e){return J(e)||Je(e)||!!(Jr&&e&&e[Jr])}function hl(e,r,a,n,o){var d=-1,c=e.length;for(a||(a=fl),o||(o=[]);++d<c;){var f=e[d];a(f)?Bt(o,f):o[o.length]=f}return o}function pl(e){var r=e==null?0:e.length;return r?hl(e):[]}function xl(e){return Da(Ua(e,void 0,pl),e+"")}var kt=Wa(Object.getPrototypeOf,Object),gl="[object Object]",vl=Function.prototype,bl=Object.prototype,Va=vl.toString,yl=bl.hasOwnProperty,jl=Va.call(Object);function qa(e){if(!ae(e)||he(e)!=gl)return!1;var r=kt(e);if(r===null)return!0;var a=yl.call(r,"constructor")&&r.constructor;return typeof a=="function"&&a instanceof a&&Va.call(a)==jl}function _l(e,r,a){var n=-1,o=e.length;r<0&&(r=-r>o?0:o+r),a=a>o?o:a,a<0&&(a+=o),o=r>a?0:a-r>>>0,r>>>=0;for(var d=Array(o);++n<o;)d[n]=e[n+r];return d}function wl(){this.__data__=new de,this.size=0}function Nl(e){var r=this.__data__,a=r.delete(e);return this.size=r.size,a}function Fl(e){return this.__data__.get(e)}function Tl(e){return this.__data__.has(e)}var Cl=200;function Il(e,r){var a=this.__data__;if(a instanceof de){var n=a.__data__;if(!Oe||n.length<Cl-1)return n.push([e,r]),this.size=++a.size,this;a=this.__data__=new ce(n)}return a.set(e,r),this.size=a.size,this}function re(e){var r=this.__data__=new de(e);this.size=r.size}re.prototype.clear=wl;re.prototype.delete=Nl;re.prototype.get=Fl;re.prototype.has=Tl;re.prototype.set=Il;function Pl(e,r){return e&&_e(r,Dt(r),e)}function Sl(e,r){return e&&_e(r,Ue(r),e)}var Ka=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Qr=Ka&&typeof module=="object"&&module&&!module.nodeType&&module,$l=Qr&&Qr.exports===Ka,ea=$l?Q.Buffer:void 0,ta=ea?ea.allocUnsafe:void 0;function Xa(e,r){if(r)return e.slice();var a=e.length,n=ta?ta(a):new e.constructor(a);return e.copy(n),n}function El(e,r){for(var a=-1,n=e==null?0:e.length,o=0,d=[];++a<n;){var c=e[a];r(c,a,e)&&(d[o++]=c)}return d}function Za(){return[]}var Rl=Object.prototype,Al=Rl.propertyIsEnumerable,ra=Object.getOwnPropertySymbols,zt=ra?function(e){return e==null?[]:(e=Object(e),El(ra(e),function(r){return Al.call(e,r)}))}:Za;function Ol(e,r){return _e(e,zt(e),r)}var Ll=Object.getOwnPropertySymbols,Ya=Ll?function(e){for(var r=[];e;)Bt(r,zt(e)),e=kt(e);return r}:Za;function Dl(e,r){return _e(e,Ya(e),r)}function Ja(e,r,a){var n=r(e);return J(e)?n:Bt(n,a(e))}function jt(e){return Ja(e,Dt,zt)}function Qa(e){return Ja(e,Ue,Ya)}var _t=xe(Q,"DataView"),wt=xe(Q,"Promise"),Nt=xe(Q,"Set"),aa="[object Map]",Ul="[object Object]",na="[object Promise]",sa="[object Set]",ia="[object WeakMap]",la="[object DataView]",Ml=pe(_t),Bl=pe(Oe),kl=pe(wt),zl=pe(Nt),Gl=pe(yt),Y=he;(_t&&Y(new _t(new ArrayBuffer(1)))!=la||Oe&&Y(new Oe)!=aa||wt&&Y(wt.resolve())!=na||Nt&&Y(new Nt)!=sa||yt&&Y(new yt)!=ia)&&(Y=function(e){var r=he(e),a=r==Ul?e.constructor:void 0,n=a?pe(a):"";if(n)switch(n){case Ml:return la;case Bl:return aa;case kl:return na;case zl:return sa;case Gl:return ia}return r});var Wl=Object.prototype,Hl=Wl.hasOwnProperty;function Vl(e){var r=e.length,a=new e.constructor(r);return r&&typeof e[0]=="string"&&Hl.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var et=Q.Uint8Array;function Gt(e){var r=new e.constructor(e.byteLength);return new et(r).set(new et(e)),r}function ql(e,r){var a=r?Gt(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}var Kl=/\w*$/;function Xl(e){var r=new e.constructor(e.source,Kl.exec(e));return r.lastIndex=e.lastIndex,r}var oa=X?X.prototype:void 0,da=oa?oa.valueOf:void 0;function Zl(e){return da?Object(da.call(e)):{}}function en(e,r){var a=r?Gt(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var Yl="[object Boolean]",Jl="[object Date]",Ql="[object Map]",eo="[object Number]",to="[object RegExp]",ro="[object Set]",ao="[object String]",no="[object Symbol]",so="[object ArrayBuffer]",io="[object DataView]",lo="[object Float32Array]",oo="[object Float64Array]",co="[object Int8Array]",uo="[object Int16Array]",mo="[object Int32Array]",fo="[object Uint8Array]",ho="[object Uint8ClampedArray]",po="[object Uint16Array]",xo="[object Uint32Array]";function go(e,r,a){var n=e.constructor;switch(r){case so:return Gt(e);case Yl:case Jl:return new n(+e);case io:return ql(e,a);case lo:case oo:case co:case uo:case mo:case fo:case ho:case po:case xo:return en(e,a);case Ql:return new n;case eo:case ao:return new n(e);case to:return Xl(e);case ro:return new n;case no:return Zl(e)}}function tn(e){return typeof e.constructor=="function"&&!At(e)?Ts(kt(e)):{}}var vo="[object Map]";function bo(e){return ae(e)&&Y(e)==vo}var ca=je&&je.isMap,yo=ca?Ot(ca):bo,jo="[object Set]";function _o(e){return ae(e)&&Y(e)==jo}var ua=je&&je.isSet,wo=ua?Ot(ua):_o,No=1,Fo=2,To=4,rn="[object Arguments]",Co="[object Array]",Io="[object Boolean]",Po="[object Date]",So="[object Error]",an="[object Function]",$o="[object GeneratorFunction]",Eo="[object Map]",Ro="[object Number]",nn="[object Object]",Ao="[object RegExp]",Oo="[object Set]",Lo="[object String]",Do="[object Symbol]",Uo="[object WeakMap]",Mo="[object ArrayBuffer]",Bo="[object DataView]",ko="[object Float32Array]",zo="[object Float64Array]",Go="[object Int8Array]",Wo="[object Int16Array]",Ho="[object Int32Array]",Vo="[object Uint8Array]",qo="[object Uint8ClampedArray]",Ko="[object Uint16Array]",Xo="[object Uint32Array]",U={};U[rn]=U[Co]=U[Mo]=U[Bo]=U[Io]=U[Po]=U[ko]=U[zo]=U[Go]=U[Wo]=U[Ho]=U[Eo]=U[Ro]=U[nn]=U[Ao]=U[Oo]=U[Lo]=U[Do]=U[Vo]=U[qo]=U[Ko]=U[Xo]=!0;U[So]=U[an]=U[Uo]=!1;function Ee(e,r,a,n,o,d){var c,f=r&No,h=r&Fo,y=r&To;if(a&&(c=o?a(e,n,o,d):a(e)),c!==void 0)return c;if(!K(e))return e;var w=J(e);if(w){if(c=Vl(e),!f)return La(e,c)}else{var j=Y(e),N=j==an||j==$o;if(Re(e))return Xa(e,f);if(j==nn||j==rn||N&&!o){if(c=h||N?{}:tn(e),!f)return h?Dl(e,Sl(c,e)):Ol(e,Pl(c,e))}else{if(!U[j])return o?e:{};c=go(e,j,f)}}d||(d=new re);var R=d.get(e);if(R)return R;d.set(e,c),wo(e)?e.forEach(function(E){c.add(Ee(E,r,a,E,e,d))}):yo(e)&&e.forEach(function(E,S){c.set(S,Ee(E,r,a,S,e,d))});var $=y?h?Qa:jt:h?Ue:Dt,A=w?void 0:$(e);return As(A||e,function(E,S){A&&(S=E,E=e[S]),Rt(c,S,Ee(E,r,a,S,e,d))}),c}var Zo=1,Yo=4;function We(e){return Ee(e,Zo|Yo)}var Jo="__lodash_hash_undefined__";function Qo(e){return this.__data__.set(e,Jo),this}function ed(e){return this.__data__.has(e)}function tt(e){var r=-1,a=e==null?0:e.length;for(this.__data__=new ce;++r<a;)this.add(e[r])}tt.prototype.add=tt.prototype.push=Qo;tt.prototype.has=ed;function td(e,r){for(var a=-1,n=e==null?0:e.length;++a<n;)if(r(e[a],a,e))return!0;return!1}function rd(e,r){return e.has(r)}var ad=1,nd=2;function sn(e,r,a,n,o,d){var c=a&ad,f=e.length,h=r.length;if(f!=h&&!(c&&h>f))return!1;var y=d.get(e),w=d.get(r);if(y&&w)return y==r&&w==e;var j=-1,N=!0,R=a&nd?new tt:void 0;for(d.set(e,r),d.set(r,e);++j<f;){var $=e[j],A=r[j];if(n)var E=c?n(A,$,j,r,e,d):n($,A,j,e,r,d);if(E!==void 0){if(E)continue;N=!1;break}if(R){if(!td(r,function(S,m){if(!rd(R,m)&&($===S||o($,S,a,n,d)))return R.push(m)})){N=!1;break}}else if(!($===A||o($,A,a,n,d))){N=!1;break}}return d.delete(e),d.delete(r),N}function sd(e){var r=-1,a=Array(e.size);return e.forEach(function(n,o){a[++r]=[o,n]}),a}function id(e){var r=-1,a=Array(e.size);return e.forEach(function(n){a[++r]=n}),a}var ld=1,od=2,dd="[object Boolean]",cd="[object Date]",ud="[object Error]",md="[object Map]",fd="[object Number]",hd="[object RegExp]",pd="[object Set]",xd="[object String]",gd="[object Symbol]",vd="[object ArrayBuffer]",bd="[object DataView]",ma=X?X.prototype:void 0,ut=ma?ma.valueOf:void 0;function yd(e,r,a,n,o,d,c){switch(a){case bd:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case vd:return!(e.byteLength!=r.byteLength||!d(new et(e),new et(r)));case dd:case cd:case fd:return De(+e,+r);case ud:return e.name==r.name&&e.message==r.message;case hd:case xd:return e==r+"";case md:var f=sd;case pd:var h=n&ld;if(f||(f=id),e.size!=r.size&&!h)return!1;var y=c.get(e);if(y)return y==r;n|=od,c.set(e,r);var w=sn(f(e),f(r),n,o,d,c);return c.delete(e),w;case gd:if(ut)return ut.call(e)==ut.call(r)}return!1}var jd=1,_d=Object.prototype,wd=_d.hasOwnProperty;function Nd(e,r,a,n,o,d){var c=a&jd,f=jt(e),h=f.length,y=jt(r),w=y.length;if(h!=w&&!c)return!1;for(var j=h;j--;){var N=f[j];if(!(c?N in r:wd.call(r,N)))return!1}var R=d.get(e),$=d.get(r);if(R&&$)return R==r&&$==e;var A=!0;d.set(e,r),d.set(r,e);for(var E=c;++j<h;){N=f[j];var S=e[N],m=r[N];if(n)var B=c?n(m,S,N,r,e,d):n(S,m,N,e,r,d);if(!(B===void 0?S===m||o(S,m,a,n,d):B)){A=!1;break}E||(E=N=="constructor")}if(A&&!E){var L=e.constructor,I=r.constructor;L!=I&&"constructor"in e&&"constructor"in r&&!(typeof L=="function"&&L instanceof L&&typeof I=="function"&&I instanceof I)&&(A=!1)}return d.delete(e),d.delete(r),A}var Fd=1,fa="[object Arguments]",ha="[object Array]",He="[object Object]",Td=Object.prototype,pa=Td.hasOwnProperty;function Cd(e,r,a,n,o,d){var c=J(e),f=J(r),h=c?ha:Y(e),y=f?ha:Y(r);h=h==fa?He:h,y=y==fa?He:y;var w=h==He,j=y==He,N=h==y;if(N&&Re(e)){if(!Re(r))return!1;c=!0,w=!1}if(N&&!w)return d||(d=new re),c||Lt(e)?sn(e,r,a,n,o,d):yd(e,r,h,a,n,o,d);if(!(a&Fd)){var R=w&&pa.call(e,"__wrapped__"),$=j&&pa.call(r,"__wrapped__");if(R||$){var A=R?e.value():e,E=$?r.value():r;return d||(d=new re),o(A,E,a,n,d)}}return N?(d||(d=new re),Nd(e,r,a,n,o,d)):!1}function ln(e,r,a,n,o){return e===r?!0:e==null||r==null||!ae(e)&&!ae(r)?e!==e&&r!==r:Cd(e,r,a,n,ln,o)}function Id(e){return function(r,a,n){for(var o=-1,d=Object(r),c=n(r),f=c.length;f--;){var h=c[++o];if(a(d[h],h,d)===!1)break}return r}}var Pd=Id(),mt=function(){return Q.Date.now()},Sd="Expected a function",$d=Math.max,Ed=Math.min;function Rd(e,r,a){var n,o,d,c,f,h,y=0,w=!1,j=!1,N=!0;if(typeof e!="function")throw new TypeError(Sd);r=Wr(r)||0,K(a)&&(w=!0,j="maxWait"in a,d=j?$d(Wr(a.maxWait)||0,r):d,N="trailing"in a?!0:N);function R(v){var T=n,u=o;return n=o=void 0,y=v,c=e.apply(u,T),c}function $(v){return y=v,f=setTimeout(S,r),w?R(v):c}function A(v){var T=v-h,u=v-y,C=r-T;return j?Ed(C,d-u):C}function E(v){var T=v-h,u=v-y;return h===void 0||T>=r||T<0||j&&u>=d}function S(){var v=mt();if(E(v))return m(v);f=setTimeout(S,A(v))}function m(v){return f=void 0,N&&n?R(v):(n=o=void 0,c)}function B(){f!==void 0&&clearTimeout(f),y=0,n=h=o=f=void 0}function L(){return f===void 0?c:m(mt())}function I(){var v=mt(),T=E(v);if(n=arguments,o=this,h=v,T){if(f===void 0)return $(h);if(j)return clearTimeout(f),f=setTimeout(S,r),R(h)}return f===void 0&&(f=setTimeout(S,r)),c}return I.cancel=B,I.flush=L,I}function Ft(e,r,a){(a!==void 0&&!De(e[r],a)||a===void 0&&!(r in e))&&Et(e,r,a)}function Ad(e){return ae(e)&&nt(e)}function Tt(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}function Od(e){return _e(e,Ue(e))}function Ld(e,r,a,n,o,d,c){var f=Tt(e,a),h=Tt(r,a),y=c.get(h);if(y){Ft(e,a,y);return}var w=d?d(f,h,a+"",e,r,c):void 0,j=w===void 0;if(j){var N=J(h),R=!N&&Re(h),$=!N&&!R&&Lt(h);w=h,N||R||$?J(f)?w=f:Ad(f)?w=La(f):R?(j=!1,w=Xa(h,!0)):$?(j=!1,w=en(h,!0)):w=[]:qa(h)||Je(h)?(w=f,Je(f)?w=Od(f):(!K(f)||St(f))&&(w=tn(h))):j=!1}j&&(c.set(h,w),o(w,h,n,d,c),c.delete(h)),Ft(e,a,w)}function on(e,r,a,n,o){e!==r&&Pd(r,function(d,c){if(o||(o=new re),K(d))Ld(e,r,c,a,on,n,o);else{var f=n?n(Tt(e,c),d,c+"",e,r,o):void 0;f===void 0&&(f=d),Ft(e,c,f)}},Ue)}function Dd(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}function Ud(e,r){return r.length<2?e:Ha(e,_l(r,0,-1))}function Md(e,r){return ln(e,r)}var Ct=zs(function(e,r,a){on(e,r,a)});function Bd(e,r){return r=lt(r,e),e=Ud(e,r),e==null||delete e[Mt(Dd(r))]}function kd(e){return qa(e)?void 0:e}var zd=1,Gd=2,Wd=4,xa=xl(function(e,r){var a={};if(e==null)return a;var n=!1;r=Ra(r,function(d){return d=lt(d,e),n||(n=d.length>1),d}),_e(e,Qa(e),a),n&&(a=Ee(a,zd|Gd|Wd,kd));for(var o=r.length;o--;)Bd(a,r[o]);return a});function Hd(e,r,a,n){if(!K(e))return e;r=lt(r,e);for(var o=-1,d=r.length,c=d-1,f=e;f!=null&&++o<d;){var h=Mt(r[o]),y=a;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(o!=c){var w=f[h];y=void 0,y===void 0&&(y=K(w)?w:$t(r[o+1])?[]:{})}Rt(f,h,y),f=f[h]}return e}function It(e,r,a){return e==null?e:Hd(e,r,a)}let Le=be.create(),dn=(e,r)=>`${e.method}:${e.baseURL??r.defaults.baseURL??""}${e.url}`,cn=e=>e.status===204&&e.headers["precognition-success"]==="true";const rt={},oe={get:(e,r={},a={})=>Ce(Te("get",e,r,a)),post:(e,r={},a={})=>Ce(Te("post",e,r,a)),patch:(e,r={},a={})=>Ce(Te("patch",e,r,a)),put:(e,r={},a={})=>Ce(Te("put",e,r,a)),delete:(e,r={},a={})=>Ce(Te("delete",e,r,a)),use(e){return Le=e,oe},axios(){return Le},fingerprintRequestsUsing(e){return dn=e===null?()=>null:e,oe},determineSuccessUsing(e){return cn=e,oe}},Te=(e,r,a,n)=>({url:r,method:e,...n,...["get","delete"].includes(e)?{params:Ct({},a,n==null?void 0:n.params)}:{data:Ct({},a,n==null?void 0:n.data)}}),Ce=(e={})=>{const r=[Vd,Kd,Xd].reduce((a,n)=>n(a),e);return(r.onBefore??(()=>!0))()===!1?Promise.resolve(null):((r.onStart??(()=>null))(),Le.request(r).then(async a=>{r.precognitive&&ga(a);const n=a.status;let o=a;return r.precognitive&&r.onPrecognitionSuccess&&cn(o)&&(o=await Promise.resolve(r.onPrecognitionSuccess(o)??o)),r.onSuccess&&qd(n)&&(o=await Promise.resolve(r.onSuccess(o)??o)),(va(r,n)??(c=>c))(o)??o},a=>Zd(a)?Promise.reject(a):(r.precognitive&&ga(a.response),(va(r,a.response.status)??((o,d)=>Promise.reject(d)))(a.response,a))).finally(r.onFinish??(()=>null)))},Vd=e=>{const r=e.only??e.validate;return{...e,timeout:e.timeout??Le.defaults.timeout??3e4,precognitive:e.precognitive!==!1,fingerprint:typeof e.fingerprint>"u"?dn(e,Le):e.fingerprint,headers:{...e.headers,"Content-Type":Yd(e),...e.precognitive!==!1?{Precognition:!0}:{},...r?{"Precognition-Validate-Only":Array.from(r).join()}:{}}}},qd=e=>e>=200&&e<300,Kd=e=>{var r;return typeof e.fingerprint!="string"||((r=rt[e.fingerprint])==null||r.abort(),delete rt[e.fingerprint]),e},Xd=e=>typeof e.fingerprint!="string"||e.signal||e.cancelToken||!e.precognitive?e:(rt[e.fingerprint]=new AbortController,{...e,signal:rt[e.fingerprint].signal}),ga=e=>{var r;if(((r=e.headers)==null?void 0:r.precognition)!=="true")throw Error("Did not receive a Precognition response. Ensure you have the Precognition middleware in place for the route.")},Zd=e=>{var r;return!wa(e)||typeof((r=e.response)==null?void 0:r.status)!="number"||_a(e)},va=(e,r)=>({401:e.onUnauthorized,403:e.onForbidden,404:e.onNotFound,409:e.onConflict,422:e.onValidationError,423:e.onLocked})[r],Yd=e=>{var r,a,n;return((r=e.headers)==null?void 0:r["Content-Type"])??((a=e.headers)==null?void 0:a["Content-type"])??((n=e.headers)==null?void 0:n["content-type"])??(un(e.data)?"multipart/form-data":"application/json")},un=e=>Wt(e)||typeof e=="object"&&e!==null&&Object.values(e).some(r=>un(r)),Wt=e=>typeof File<"u"&&e instanceof File||e instanceof Blob||typeof FileList<"u"&&e instanceof FileList&&e.length>0,ba=e=>typeof e=="string"?e:e(),ya=e=>typeof e=="string"?e.toLowerCase():e(),Jd=(e,r={})=>{const a={errorsChanged:[],touchedChanged:[],validatingChanged:[],validatedChanged:[]};let n=!1,o=!1;const d=b=>b!==o?(o=b,a.validatingChanged):[];let c=[];const f=b=>{const p=[...new Set(b)];return c.length!==p.length||!p.every(s=>c.includes(s))?(c=p,a.validatedChanged):[]},h=()=>c.filter(b=>typeof j[b]>"u");let y=[];const w=b=>{const p=[...new Set(b)];return y.length!==p.length||!p.every(s=>y.includes(s))?(y=p,a.touchedChanged):[]};let j={};const N=b=>{const p=ec(b);return Md(j,p)?[]:(j=p,a.errorsChanged)},R=b=>{const p={...j};return delete p[qe(b)],N(p)},$=()=>Object.keys(j).length>0;let A=1500;const E=b=>{A=b,v.cancel(),v=I()};let S=r,m=null,B=[],L=null;const I=()=>Rd(b=>{e({get:(p,s={},g={})=>oe.get(p,C(s),T(g,b,s)),post:(p,s={},g={})=>oe.post(p,C(s),T(g,b,s)),patch:(p,s={},g={})=>oe.patch(p,C(s),T(g,b,s)),put:(p,s={},g={})=>oe.put(p,C(s),T(g,b,s)),delete:(p,s={},g={})=>oe.delete(p,C(s),T(g,b,s))}).catch(p=>{var s;return _a(p)||wa(p)&&((s=p.response)==null?void 0:s.status)===422?null:Promise.reject(p)})},A,{leading:!0,trailing:!0});let v=I();const T=(b,p,s={})=>{const g={...b,...p},P=Array.from(g.only??g.validate??y);return{...p,...vn(b,p),only:P,timeout:g.timeout??5e3,onValidationError:(l,H)=>([...f([...c,...P]),...N(Ct(xa({...j},P),l.data.errors))].forEach(V=>V()),g.onValidationError?g.onValidationError(l,H):Promise.reject(H)),onSuccess:l=>(f([...c,...P]).forEach(H=>H()),g.onSuccess?g.onSuccess(l):l),onPrecognitionSuccess:l=>([...f([...c,...P]),...N(xa({...j},P))].forEach(H=>H()),g.onPrecognitionSuccess?g.onPrecognitionSuccess(l):l),onBefore:()=>g.onBeforeValidation&&g.onBeforeValidation({data:s,touched:y},{data:S,touched:B})===!1||(g.onBefore||(()=>!0))()===!1?!1:(L=y,m=s,!0),onStart:()=>{d(!0).forEach(l=>l()),(g.onStart??(()=>null))()},onFinish:()=>{d(!1).forEach(l=>l()),B=L,S=m,L=m=null,(g.onFinish??(()=>null))()}}},u=(b,p,s)=>{if(typeof b>"u"){const g=Array.from((s==null?void 0:s.only)??(s==null?void 0:s.validate)??[]);w([...y,...g]).forEach(P=>P()),v(s??{});return}if(Wt(p)&&!n){console.warn('Precognition file validation is not active. Call the "validateFiles" function on your form to enable it.');return}b=qe(b),Qe(S,b)!==p&&(w([b,...y]).forEach(g=>g()),v(s??{}))},C=b=>n===!1?Pt(b):b,O={touched:()=>y,validate(b,p,s){return typeof b=="object"&&!("target"in b)&&(s=b,b=p=void 0),u(b,p,s),O},touch(b){const p=Array.isArray(b)?b:[qe(b)];return w([...y,...p]).forEach(s=>s()),O},validating:()=>o,valid:h,errors:()=>j,hasErrors:$,setErrors(b){return N(b).forEach(p=>p()),O},forgetError(b){return R(b).forEach(p=>p()),O},reset(...b){if(b.length===0)w([]).forEach(p=>p());else{const p=[...y];b.forEach(s=>{p.includes(s)&&p.splice(p.indexOf(s),1),It(S,s,Qe(r,s))}),w(p).forEach(s=>s())}return O},setTimeout(b){return E(b),O},on(b,p){return a[b].push(p),O},validateFiles(){return n=!0,O}};return O},Qd=e=>Object.keys(e).reduce((r,a)=>({...r,[a]:Array.isArray(e[a])?e[a][0]:e[a]}),{}),ec=e=>Object.keys(e).reduce((r,a)=>({...r,[a]:typeof e[a]=="string"?[e[a]]:e[a]}),{}),qe=e=>typeof e!="string"?e.target.name:e,Pt=e=>{const r={...e};return Object.keys(r).forEach(a=>{const n=r[a];if(n!==null){if(Wt(n)){delete r[a];return}if(Array.isArray(n)){r[a]=Object.values(Pt({...n}));return}if(typeof n=="object"){r[a]=Pt(r[a]);return}}}),r},tc=(e,r,a,n={})=>{const o=_.useRef(null);o.current===null&&(o.current=We(a));const d=_.useRef(null);d.current===null&&(d.current=Object.keys(o));const c=_.useRef(o.current),[f,h]=_.useState([]),[y,w]=_.useState([]),[j,N]=_.useState(!1),[R,$]=_.useState(!1),[A,E]=_.useState({}),[S,m]=_.useState(!1),[B,L]=_.useState(()=>We(o.current)),I=_.useRef(null);I.current===null&&(I.current=Jd(u=>u[ya(e)](ba(r),c.current,n),a).on("validatingChanged",()=>{N(I.current.validating())}).on("validatedChanged",()=>{h(I.current.valid())}).on("touchedChanged",()=>{w(I.current.touched())}).on("errorsChanged",()=>{m(I.current.hasErrors()),E(Qd(I.current.errors())),h(I.current.valid())}));const v=u=>({...u,precognitive:!1,onStart:()=>{$(!0),(u.onStart??(()=>null))()},onFinish:()=>{$(!1),(u.onFinish??(()=>null))()},onValidationError:(C,O)=>(I.current.setErrors(C.data.errors),u.onValidationError?u.onValidationError(C):Promise.reject(O))}),T={data:B,setData(u,C){if(typeof u=="object")c.current=u,L(u);else{const O=We(c.current);c.current=It(O,u,C),L(c.current)}return T},touched(u){return typeof u=="string"?y.includes(u):y.length>0},touch(u){return I.current.touch(u),T},validate(u,C){return typeof u=="object"&&!("target"in u)&&(C=u,u=void 0),typeof u>"u"?I.current.validate(C):(u=qe(u),I.current.validate(u,Qe(c.current,u),C)),T},validating:j,valid(u){return f.includes(u)},invalid(u){return typeof A[u]<"u"},errors:A,hasErrors:S,setErrors(u){return I.current.setErrors(u),T},forgetError(u){return I.current.forgetError(u),T},reset(...u){const C=We(o.current);return u.length===0?(c.current=C,L(C)):(u.forEach(O=>It(c.current,O,Qe(C,O))),L(c.current)),I.current.reset(...u),T},setValidationTimeout(u){return I.current.setTimeout(u),T},processing:R,async submit(u={}){return oe[ya(e)](ba(r),c.current,v(u))},validateFiles(){return I.current.validateFiles(),T},validator(){return I.current}};return T},ja=({user:e,allUsers:r,departments:a,designations:n,setUsers:o,open:d,closeModal:c,editMode:f=!1})=>{const[h,y]=_.useState(!1),[w,j]=_.useState(!1),[N,R]=_.useState((e==null?void 0:e.profile_image_url)||(e==null?void 0:e.profile_image)||null),[$,A]=_.useState(null),[E,S]=_.useState(r),m=tc(f?"put":"post",f?route("users.update",{user:e.id}):route("users.store"),{id:(e==null?void 0:e.id)||"",name:(e==null?void 0:e.name)||"",user_name:(e==null?void 0:e.user_name)||"",gender:(e==null?void 0:e.gender)||"",birthday:(e==null?void 0:e.birthday)||"",date_of_joining:(e==null?void 0:e.date_of_joining)||"",address:(e==null?void 0:e.address)||"",employee_id:(e==null?void 0:e.employee_id)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||"",department_id:(e==null?void 0:e.department_id)||"",designation_id:(e==null?void 0:e.designation_id)||"",report_to:(e==null?void 0:e.report_to)||"",password:"",password_confirmation:"",roles:(e==null?void 0:e.roles)||[],profile_image:null});_.useEffect(()=>{(e!=null&&e.profile_image_url||e!=null&&e.profile_image)&&R(e.profile_image_url||e.profile_image)},[e]);const B=async u=>{if(u.preventDefault(),$){const C=$.type;if(!["image/jpeg","image/jpg","image/png"].includes(C)){z.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}});return}m.setData("profile_image",$)}try{await m.submit({onSuccess:C=>{var O;o&&o(f?b=>b.map(p=>p.id===C.data.user.id?C.data.user:p):b=>[...b,C.data.user]),z.success(((O=C.data.messages)==null?void 0:O.length)>0?C.data.messages.join(" "):`User ${f?"updated":"added"} successfully`,{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}}),c()},onError:C=>{L(C)}})}catch(C){L(C)}},L=u=>{u.response?u.response.status===422?z.error(u.response.data.message||`Failed to ${f?"update":"add"} user.`,{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}}):z.error("An unexpected error occurred. Please try again later.",{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}}):u.request?z.error("No response received from the server. Please check your internet connection.",{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}}):z.error("An error occurred while setting up the request.",{icon:"",style:{backdropFilter:"blur(16px) saturate(200%)",background:theme.glassCard.background,border:theme.glassCard.border,color:theme.palette.text.primary}})},I=u=>{const C=u.target.files[0];if(C){const O=URL.createObjectURL(C);R(O),A(C)}},v=(u,C)=>{m.setData(u,C),m.touched(u)&&m.validate(u)},T=()=>{y(!h)};return t.jsxs(jn,{open:d,onClose:c,fullWidth:!0,maxWidth:"md",sx:{"& .MuiPaper-root":{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:theme.glassCard.background,border:theme.glassCard.border,borderRadius:"16px",color:theme.palette.text.primary,boxShadow:theme.glassCard.boxShadow}},children:[t.jsx(DialogTitle,{sx:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",pb:2},children:t.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[t.jsx(Typography,{variant:"h6",component:"div",sx:{fontWeight:600},children:f?"Edit User":"Add New User"}),t.jsx(IconButton,{"aria-label":"close",onClick:c,sx:{color:theme.palette.grey[500],"&:hover":{color:theme.palette.primary.main}},children:t.jsx(ClearIcon,{})})]})}),t.jsx(DialogContent,{sx:{pt:3},children:t.jsx("form",{onSubmit:B,children:t.jsxs(Grid,{container:!0,spacing:3,children:[t.jsx(Grid,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",mb:2},children:t.jsxs(Box,{onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),sx:{position:"relative"},children:[t.jsx(_n,{src:N,alt:"Profile",sx:{width:120,height:120,border:"4px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",filter:w?"brightness(70%)":"brightness(100%)",transition:"all 0.3s ease"}}),t.jsxs(Box,{component:"label",htmlFor:"icon-button-file",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:w?1:0,transition:"opacity 0.3s ease",cursor:"pointer"},children:[t.jsx("input",{accept:"image/*",id:"icon-button-file",type:"file",style:{display:"none"},onChange:I}),t.jsx(PhotoCamera,{sx:{color:"white",fontSize:32}})]})]})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Full Name",value:m.data.name,onChange:u=>v("name",u.target.value),onBlur:()=>m.validate("name"),error:m.invalid("name"),helperText:m.errors.name,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}},required:!0})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Username",value:m.data.user_name,onChange:u=>v("user_name",u.target.value),onBlur:()=>m.validate("user_name"),error:m.invalid("user_name"),helperText:m.errors.user_name,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}},required:!0})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Email",type:"email",value:m.data.email,onChange:u=>v("email",u.target.value),onBlur:()=>m.validate("email"),error:m.invalid("email"),helperText:m.errors.email,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}},required:!0})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Phone",value:m.data.phone,onChange:u=>v("phone",u.target.value),onBlur:()=>m.validate("phone"),error:m.invalid("phone"),helperText:m.errors.phone,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}}})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsxs(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t.jsx(InputLabel,{id:"department-label",sx:{color:theme.palette.text.secondary},children:"Department"}),t.jsxs(ye,{labelId:"department-label",value:m.data.department_id,onChange:u=>v("department_id",u.target.value),onBlur:()=>m.validate("department_id"),label:"Department",error:m.invalid("department_id"),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[t.jsx(MenuItem,{value:"",children:t.jsx("em",{children:"None"})}),a==null?void 0:a.map(u=>t.jsx(MenuItem,{value:u.id,children:u.name},u.id))]}),m.invalid("department_id")&&t.jsx(FormHelperText,{error:!0,children:m.errors.department_id})]})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsxs(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t.jsx(InputLabel,{id:"designation-label",sx:{color:theme.palette.text.secondary},children:"Designation"}),t.jsxs(ye,{labelId:"designation-label",value:m.data.designation_id,onChange:u=>v("designation_id",u.target.value),onBlur:()=>m.validate("designation_id"),label:"Designation",error:m.invalid("designation_id"),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[t.jsx(MenuItem,{value:"",children:t.jsx("em",{children:"None"})}),n==null?void 0:n.map(u=>t.jsx(MenuItem,{value:u.id,children:u.name},u.id))]}),m.invalid("designation_id")&&t.jsx(FormHelperText,{error:!0,children:m.errors.designation_id})]})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsxs(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t.jsx(InputLabel,{id:"gender-label",sx:{color:theme.palette.text.secondary},children:"Gender"}),t.jsxs(ye,{labelId:"gender-label",value:m.data.gender,onChange:u=>v("gender",u.target.value),onBlur:()=>m.validate("gender"),label:"Gender",error:m.invalid("gender"),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[t.jsx(MenuItem,{value:"",children:t.jsx("em",{children:"Select Gender"})}),t.jsx(MenuItem,{value:"male",children:"Male"}),t.jsx(MenuItem,{value:"female",children:"Female"}),t.jsx(MenuItem,{value:"other",children:"Other"})]}),m.invalid("gender")&&t.jsx(FormHelperText,{error:!0,children:m.errors.gender})]})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Employee ID",value:m.data.employee_id,onChange:u=>v("employee_id",u.target.value),onBlur:()=>m.validate("employee_id"),error:m.invalid("employee_id"),helperText:m.errors.employee_id,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}}})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Date of Birth",type:"date",value:m.data.birthday,onChange:u=>v("birthday",u.target.value),onBlur:()=>m.validate("birthday"),error:m.invalid("birthday"),helperText:m.errors.birthday,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{shrink:!0,sx:{color:theme.palette.text.secondary}}})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Date of Joining",type:"date",value:m.data.date_of_joining,onChange:u=>v("date_of_joining",u.target.value),onBlur:()=>m.validate("date_of_joining"),error:m.invalid("date_of_joining"),helperText:m.errors.date_of_joining,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{shrink:!0,sx:{color:theme.palette.text.secondary}}})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsxs(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t.jsx(InputLabel,{id:"report-to-label",sx:{color:theme.palette.text.secondary},children:"Reports To"}),t.jsxs(ye,{labelId:"report-to-label",value:m.data.report_to,onChange:u=>v("report_to",u.target.value),onBlur:()=>m.validate("report_to"),label:"Reports To",error:m.invalid("report_to"),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[t.jsx(MenuItem,{value:"",children:t.jsx("em",{children:"None"})}),E==null?void 0:E.filter(u=>u.id!==m.data.id).map(u=>t.jsx(MenuItem,{value:u.id,children:u.name},u.id))]}),m.invalid("report_to")&&t.jsx(FormHelperText,{error:!0,children:m.errors.report_to})]})}),t.jsx(Grid,{item:!0,xs:12,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Address",multiline:!0,rows:3,value:m.data.address,onChange:u=>v("address",u.target.value),onBlur:()=>m.validate("address"),error:m.invalid("address"),helperText:m.errors.address,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}}})})}),!f&&t.jsxs(t.Fragment,{children:[t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Password",type:h?"text":"password",value:m.data.password,onChange:u=>v("password",u.target.value),onBlur:()=>m.validate("password"),error:m.invalid("password"),helperText:m.errors.password,required:!f,InputProps:{endAdornment:t.jsx(IconButton,{"aria-label":"toggle password visibility",onClick:T,edge:"end",children:h?t.jsx(VisibilityOff,{}):t.jsx(Visibility,{})}),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}}})})}),t.jsx(Grid,{item:!0,xs:12,md:6,children:t.jsx(FormControl,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:t.jsx(TextField,{label:"Confirm Password",type:h?"text":"password",value:m.data.password_confirmation,onChange:u=>v("password_confirmation",u.target.value),onBlur:()=>m.validate("password_confirmation"),error:m.invalid("password_confirmation"),helperText:m.errors.password_confirmation||(m.data.password!==m.data.password_confirmation&&m.data.password_confirmation?"Passwords do not match":""),required:!f,InputProps:{endAdornment:t.jsx(IconButton,{"aria-label":"toggle password visibility",onClick:T,edge:"end",children:h?t.jsx(VisibilityOff,{}):t.jsx(Visibility,{})}),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:theme.palette.text.secondary}}})})})]})]})})}),t.jsxs(DialogActions,{sx:{justifyContent:"space-between",p:3,borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[t.jsx(ee,{onClick:c,variant:"bordered",color:"default",size:"lg",className:"bg-white/5 hover:bg-white/10 border border-white/10",disabled:m.processing,children:"Cancel"}),t.jsx(LoadingButton,{onClick:B,loading:m.processing,loadingPosition:"start",startIcon:t.jsx(PasswordIcon,{}),variant:"contained",disabled:!m.isDirty||m.processing,sx:{background:"linear-gradient(45deg, #3a7bd5 0%, #2456bd 100%)",boxShadow:"0 4px 20px 0 rgba(58, 123, 213, 0.4)","&:hover":{background:"linear-gradient(45deg, #2456bd 0%, #1a3c8a 100%)"}},children:f?"Update User":"Add User"})]})]})},Z=()=>{var n;if(typeof window>"u")return"lg";const r=((n=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:n.trim())||"12px",a=parseInt(r);return a===0?"none":a<=4?"sm":a<=8?"md":a<=12?"lg":"xl"},rc=({title:e,roles:r})=>{var Xt,Zt,Yt,Jt,Qt,er,tr,rr,ar,nr,sr,ir,lr,or,dr,cr,ur,mr,fr,hr,pr,xr,gr,vr,br,yr,jr,_r,wr,Nr,Fr,Tr,Cr,Ir;const[a,n]=_.useState(!1),[o,d]=_.useState(!1),[c,f]=_.useState(!1),[h,y]=_.useState(!1);_.useEffect(()=>{const i=()=>{n(window.innerWidth<640),d(window.innerWidth<768),f(window.innerWidth>=1025),y(window.innerWidth>=641&&window.innerWidth<=1024)};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const[w,j]=_.useState([]),[N,R]=_.useState(!0),[$,A]=_.useState(null),[E,S]=_.useState(0),[m,B]=_.useState(1),[L,I]=_.useState(null),[v,T]=_.useState({search:"",role:"all",status:"all",department:"all"}),[u,C]=_.useState(!1),[O,b]=_.useState("table"),[p,s]=_.useState({currentPage:1,perPage:10,total:w.length}),[g,P]=_.useState({}),[l,H]=_.useState({overview:{total_users:0,active_users:0,inactive_users:0,deleted_users:0,total_roles:0,total_departments:0},distribution:{by_role:[],by_department:[],by_status:[]},activity:{recent_registrations:{new_users_30_days:0,new_users_90_days:0,new_users_year:0,recently_active:0},user_growth_rate:0,current_month_registrations:0},security:{access_metrics:{users_with_roles:0,users_without_roles:0,admin_users:0,regular_users:0},role_distribution:[]},health:{status_ratio:{active_percentage:0,inactive_percentage:0,deleted_percentage:0},system_metrics:{user_activation_rate:0,role_coverage:0,department_coverage:0}},quick_metrics:{total_users:0,active_ratio:0,role_diversity:0,department_diversity:0,recent_activity:0,system_health_score:0}}),V=_.useMemo(()=>({data:w,total:E,current_page:p.currentPage,per_page:p.perPage,last_page:m}),[w,E,p.currentPage,p.perPage,m]),W=_.useCallback(async()=>{try{const{data:i}=await be.get(route("users.stats"));i.stats&&H(i.stats)}catch(i){console.error("Error fetching user stats:",i)}},[]),Me=_.useCallback(async()=>{R(!0);try{const i=await be.get(route("users.paginate"),{params:{page:p.currentPage,perPage:p.perPage,search:v.search||void 0,role:v.role!=="all"?v.role:void 0,status:v.status!=="all"?v.status:void 0,department:v.department!=="all"?v.department:void 0}});if(i.status===200){const{users:x}=i.data;x.data&&Array.isArray(x.data)?(j(x.data),S(x.total||x.data.length),B(x.last_page||1)):Array.isArray(x)?(j(x),S(x.length),B(1)):(console.error("Unexpected users data format:",x),j([]),S(0),B(1))}}catch(i){console.error("Error fetching users:",i),z.error("Failed to load users data"),j([])}finally{R(!1)}},[v,p.currentPage,p.perPage]);_.useEffect(()=>{Me()},[Me]),_.useEffect(()=>{W();const i=setInterval(W,6e4);return()=>clearInterval(i)},[W]);const ne=(i,x)=>{T(F=>({...F,[i]:x})),s(F=>({...F,currentPage:1}))},Be=i=>{s(x=>({...x,currentPage:i})),window.scrollTo({top:0,behavior:"smooth"})},ke=i=>{s(x=>({...x,currentPage:1,perPage:i}))},ue=_.useCallback((i,x=null)=>{I(i),A(x)},[]),k=_.useCallback(()=>{I(null),A(null)},[]),we=_.useCallback(i=>{j(i)},[]),mn=_.useCallback(i=>{j(x=>x.map(F=>F.id===i.id?{...F,...i}:F))},[]),fn=_.useCallback(i=>{j(x=>x.filter(F=>F.id!==i)),W()},[W]),Ht=_.useCallback((i,x)=>{j(F=>F.map(D=>D.id===i?{...D,active:x}:D)),W()},[W]),hn=_.useCallback((i,x)=>{j(F=>F.map(D=>D.id===i?{...D,roles:x}:D)),W()},[W]),Vt=_.useCallback(async(i,x)=>{var F,D;P(G=>({...G,[i]:!0}));try{const G=await be.post(route("admin.users.devices.toggle",{userId:i}));G.data.success&&(j(ze=>ze.map(ge=>ge.id===i?{...ge,single_device_login_enabled:G.data.single_device_login_enabled}:ge)),z.success(G.data.message))}catch(G){console.error("Error toggling single device login:",G),z.error(((D=(F=G.response)==null?void 0:F.data)==null?void 0:D.message)||"Failed to toggle single device login")}finally{P(G=>({...G,[i]:!1}))}},[]),qt=_.useCallback(async i=>{P(x=>({...x,[i]:!0}));try{const x=await be.post(route("admin.users.devices.reset",{userId:i}),{reason:"Admin reset via user management"});x.data.success&&(j(F=>F.map(D=>D.id===i?{...D,active_device:null}:D)),z.success(x.data.message||"User devices have been reset"))}catch(x){console.error("Error resetting user devices:",x),z.error("Failed to reset user devices")}finally{P(x=>({...x,[i]:!1}))}},[]);_.useCallback(async i=>{try{const x=await be.get(route("admin.users.devices",{userId:i}));if(x.data.success){const F=x.data.devices;if(F.length===0)z.info("User has no registered devices");else{const D=F.filter(G=>G.is_active).length;z.info(`User has ${F.length} device(s): ${D} active, ${F.length-D} inactive`)}}}catch(x){console.error("Error fetching user devices:",x),z.error("Failed to fetch device information")}},[]);const Kt=(i,x="w-4 h-4")=>{const F=(i==null?void 0:i.toLowerCase())||"";return F.includes("mobile")||F.includes("android")||F.includes("iphone")?t.jsx(Pe,{className:`${x} text-primary`}):F.includes("tablet")||F.includes("ipad")?t.jsx(Ta,{className:`${x} text-secondary`}):t.jsx(Fa,{className:`${x} text-default-500`})},pn=i=>{const x=(i==null?void 0:i.toLowerCase())||"";return x.includes("mobile")||x.includes("android")||x.includes("iphone")?"Mobile":x.includes("tablet")||x.includes("ipad")?"Tablet":"Desktop"},xn=({user:i,index:x})=>t.jsx(se,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 h-full min-h-[320px]",style:{background:`linear-gradient(135deg, 
          color-mix(in srgb, var(--theme-content1) 90%, transparent) 20%, 
          color-mix(in srgb, var(--theme-content2) 80%, transparent) 80%)`,borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-3 flex flex-col h-full",children:[t.jsxs("div",{className:"flex items-start gap-2 mb-3 pb-2 border-b border-white/10",children:[t.jsx(Sa,{avatarProps:{radius:"md",src:(i==null?void 0:i.profile_image_url)||(i==null?void 0:i.profile_image),size:"sm",fallback:t.jsx(Ke,{className:"w-4 h-4"}),style:{borderColor:"var(--theme-primary)",borderWidth:"2px"}},name:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-semibold text-foreground text-sm line-clamp-1",children:i.name}),t.jsxs("span",{className:"text-default-500 text-xs line-clamp-1",children:["ID: ",i.id]})]}),classNames:{wrapper:"flex-1 min-w-0",name:"text-sm font-semibold",description:"text-xs text-default-500"}}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(gt,{content:"Edit User",size:"sm",children:t.jsx(ee,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-primary min-w-6 w-6 h-6",onPress:()=>ue("edit",i),children:t.jsx(Ia,{className:"w-3 h-3"})})}),t.jsxs(ht,{placement:"bottom-end",children:[t.jsx(pt,{children:t.jsx(ee,{isIconOnly:!0,size:"sm",variant:"ghost",radius:Z(),isDisabled:g[i.id],className:"min-w-6 w-6 h-6",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)"},children:t.jsx(bt,{className:"w-3 h-3"})})}),t.jsxs(xt,{"aria-label":"Device management actions",variant:"bordered",className:"min-w-[180px]",style:{background:"color-mix(in srgb, var(--theme-content1) 95%, transparent)",backdropFilter:"blur(16px)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:[t.jsx(te,{startContent:i.single_device_login?t.jsx(Xe,{className:"w-3 h-3"}):t.jsx(Ze,{className:"w-3 h-3"}),onPress:()=>Vt(i.id,!i.single_device_login),isDisabled:g[i.id],className:"text-xs",children:i.single_device_login?"Disable Lock":"Enable Lock"},"toggle-device-lock"),i.single_device_login&&i.active_device&&t.jsx(te,{startContent:t.jsx(ve,{className:"w-3 h-3"}),onPress:()=>qt(i.id),isDisabled:g[i.id],className:"text-xs",children:"Reset Device"},"reset-device"),t.jsx(te,{startContent:t.jsx(Pe,{className:"w-3 h-3"}),onPress:()=>Dr.visit(route("admin.users.devices",{userId:i.id})),className:"text-xs",children:"Device History"},"view-devices"),t.jsx(te,{startContent:t.jsx(Ke,{className:"w-3 h-3"}),onPress:()=>Dr.visit(route("profile",{user:i.id})),className:"text-xs",children:"View Profile"},"view-profile")]})]})]})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx(vt,{className:"w-3 h-3 text-default-400 shrink-0"}),t.jsx("span",{className:"text-default-600 line-clamp-1 flex-1",children:i.email})]}),i.phone&&t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx(ft,{className:"w-3 h-3 text-default-400 shrink-0"}),t.jsx("span",{className:"text-default-600 line-clamp-1",children:i.phone})]}),(i.department||i.department_id)&&t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx(Ie,{className:"w-3 h-3 text-default-400 shrink-0"}),t.jsx("span",{className:"text-default-600 line-clamp-1",children:typeof i.department=="string"?i.department:"N/A"})]})]}),t.jsxs("div",{className:"mb-3 p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-content2) 40%, transparent)"},children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-xs font-medium text-default-700",children:"Device Status"}),i.single_device_login&&i.active_device&&t.jsx(gt,{content:t.jsxs("div",{className:"p-2 max-w-xs",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Kt(i.active_device.user_agent,"w-4 h-4"),t.jsx("span",{className:"font-medium text-xs",children:i.active_device.device_name||"Unknown Device"})]}),t.jsxs("div",{className:"text-xs text-default-500",children:[pn(i.active_device.user_agent)," ",i.active_device.is_active?" Active":" Inactive"]})]}),size:"sm",children:t.jsx("div",{className:"cursor-help",children:Kt(i.active_device.user_agent,"w-4 h-4")})})]}),t.jsx(le,{size:"sm",variant:"flat",color:i.single_device_login?i.active_device?"warning":"success":"default",startContent:i.single_device_login?i.active_device?t.jsx(Ze,{className:"w-3 h-3"}):t.jsx(Xe,{className:"w-3 h-3"}):t.jsx(Se,{className:"w-3 h-3"}),className:"text-xs",children:i.single_device_login?i.active_device?"Locked":"Free":"Disabled"})]}),t.jsxs("div",{className:"mt-auto space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs font-medium text-default-700",children:"Status"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Gn,{size:"sm",isSelected:i.active,onValueChange:F=>Ht(i.id,F),color:i.active?"success":"danger",classNames:{wrapper:"group-data-[selected=true]:bg-success",thumb:"group-data-[selected=true]:ml-4"}}),t.jsx("span",{className:`text-xs font-medium ${i.active?"text-success":"text-danger"}`,children:i.active?"Active":"Inactive"})]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-default-700 mb-1 block",children:"Roles"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.roles&&i.roles.length>0?i.roles.slice(0,3).map((F,D)=>{const G=typeof F=="object"&&F!==null?F.name:F;return t.jsx(le,{size:"sm",variant:"flat",color:"secondary",className:"text-xs h-5",children:G},D)}):t.jsx(le,{size:"sm",variant:"bordered",color:"default",className:"text-xs h-5",children:"No Roles"}),i.roles&&i.roles.length>3&&t.jsxs(le,{size:"sm",variant:"bordered",color:"primary",className:"text-xs h-5",children:["+",i.roles.length-3]})]})]})]})]})}),gn=_.useMemo(()=>{var i,x,F,D,G,ze,ge,Pr,Sr,$r,Er,Rr,Ar,Or;return[{title:"Total Users",value:((i=l==null?void 0:l.overview)==null?void 0:i.total_users)||0,icon:t.jsx(Ge,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All users"},{title:"Active Users",value:((x=l==null?void 0:l.overview)==null?void 0:x.active_users)||0,icon:t.jsx(Ca,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((D=(F=l==null?void 0:l.health)==null?void 0:F.status_ratio)==null?void 0:D.active_percentage)||0}% Active`},{title:"Inactive Users",value:((G=l==null?void 0:l.overview)==null?void 0:G.inactive_users)||0,icon:t.jsx(An,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:`${((ge=(ze=l==null?void 0:l.health)==null?void 0:ze.status_ratio)==null?void 0:ge.inactive_percentage)||0}% Inactive`},{title:"Total Roles",value:((Pr=l==null?void 0:l.overview)==null?void 0:Pr.total_roles)||0,icon:t.jsx(Se,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Role diversity"},{title:"Role Coverage",value:`${(($r=(Sr=l==null?void 0:l.health)==null?void 0:Sr.system_metrics)==null?void 0:$r.role_coverage)||0}%`,icon:t.jsx(On,{className:"w-5 h-5"}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Users with roles"},{title:"Recent Activity",value:((Rr=(Er=l==null?void 0:l.activity)==null?void 0:Er.recent_registrations)==null?void 0:Rr.recently_active)||0,icon:t.jsx(Na,{className:"w-5 h-5"}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Active last 7 days"},{title:"System Health",value:`${((Ar=l==null?void 0:l.quick_metrics)==null?void 0:Ar.system_health_score)||0}%`,icon:t.jsx(Mr,{className:"w-5 h-5"}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Overall health"},{title:"Departments",value:((Or=l==null?void 0:l.overview)==null?void 0:Or.total_departments)||0,icon:t.jsx(Ie,{className:"w-5 h-5"}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Department diversity"}]},[l]);return _.useMemo(()=>{const i=[];return i.push({label:a?"Add":"Add User",icon:t.jsx(ot,{className:"w-4 h-4"}),onPress:()=>ue("add"),className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}),i.push({label:a?"":"Export",isIconOnly:a,icon:t.jsx(Ur,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),i},[a,ue]),t.jsxs(t.Fragment,{children:[t.jsx(bn,{title:e||"Users Management"}),L==="add"&&t.jsx(ja,{user:null,open:L==="add",setUsers:we,closeModal:k,editMode:!1}),L==="edit"&&$&&t.jsx(ja,{user:$,open:L==="edit",setUsers:we,closeModal:k,editMode:!0}),t.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Users Management",children:t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"w-full",children:t.jsx(Ln.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:t.jsxs(se,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[t.jsx(Bn,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:t.jsx("div",{className:`${c?"p-6":h?"p-4":"p-3"} w-full`,children:t.jsx("div",{className:"flex flex-col space-y-4",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[N?t.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[t.jsx(q,{className:"w-12 h-12 rounded-xl"}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx(q,{className:"w-64 h-6 rounded mb-2"}),t.jsx(q,{className:"w-48 h-4 rounded"})]})]}):t.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[t.jsx("div",{className:`
                                ${c?"p-3":h?"p-2.5":"p-2"} 
                                rounded-xl flex items-center justify-center
                              `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsx(Ge,{className:`
                                  ${c?"w-8 h-8":h?"w-6 h-6":"w-5 h-5"}
                                `,style:{color:"var(--theme-primary)"}})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h4",{className:`
                                  ${c?"text-2xl":h?"text-xl":"text-lg"}
                                  font-bold text-foreground
                                  ${c?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Users Management"}),t.jsx("p",{className:`
                                  ${c?"text-sm":"text-xs"} 
                                  text-default-500
                                  ${c?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage user accounts, roles and permissions"})]})]}),N?t.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[t.jsx(q,{className:"w-24 h-8 rounded"}),t.jsx(q,{className:"w-20 h-8 rounded"})]}):t.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[t.jsx(ee,{size:a?"sm":"md",color:"primary",startContent:t.jsx(ot,{className:"w-4 h-4"}),onPress:()=>ue("add"),radius:Z(),style:{fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:a?"Add":"Add User"}),t.jsx(ee,{size:a?"sm":"md",variant:"bordered",startContent:t.jsx(Dn,{className:"w-4 h-4"}),radius:Z(),style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-primary) 30%, transparent)",color:"var(--theme-primary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:a?"Export":"Export Users"})]})]})})})}),t.jsxs(ie,{className:"p-6",children:[t.jsx(Tn,{stats:gn,className:"mb-6",isLoading:N}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6",children:N?t.jsx(t.Fragment,{children:Array.from({length:6}).map((i,x)=>t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-default) 10%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(q,{className:"w-9 h-9 rounded-lg"}),t.jsxs("div",{className:"flex-1",children:[t.jsx(q,{className:"w-24 h-4 rounded mb-1"}),t.jsx(q,{className:"w-32 h-3 rounded"})]})]}),t.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((F,D)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(q,{className:"w-20 h-3 rounded"}),t.jsx(q,{className:"w-12 h-3 rounded"})]},D))})]})},x))}):t.jsxs(t.Fragment,{children:[t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx(Un,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role Distribution"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User roles breakdown"})]})]}),t.jsx("div",{className:"space-y-3",children:((Zt=(Xt=l==null?void 0:l.distribution)==null?void 0:Xt.by_role)==null?void 0:Zt.length)>0?l.distribution.by_role.slice(0,4).map((i,x)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`color-mix(in srgb, var(--theme-primary) ${80-x*15}%, var(--theme-secondary) ${20+x*15}%)`}}),t.jsx("span",{className:"text-sm text-foreground truncate",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.count}),t.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",i.percentage,"%)"]})]})]},x)):t.jsx("div",{className:"text-center py-4",children:t.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No role data available"})})})]})}),t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-secondary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-secondary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx(Ge,{className:"w-5 h-5",style:{color:"var(--theme-secondary)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User Status"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Active vs inactive users"})]})]}),t.jsx("div",{className:"space-y-3",children:((Jt=(Yt=l==null?void 0:l.distribution)==null?void 0:Yt.by_status)==null?void 0:Jt.length)>0?l.distribution.by_status.map((i,x)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:i.name==="Active"?"var(--theme-success)":i.name==="Inactive"?"var(--theme-danger)":"var(--theme-default)"}}),t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.count}),t.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",i.percentage,"%)"]})]})]},x)):t.jsx("div",{className:"text-center py-4",children:t.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No status data available"})})})]})}),t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-warning) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-warning) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx(Ie,{className:"w-5 h-5",style:{color:"var(--theme-warning)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Departments"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Users by department"})]})]}),t.jsx("div",{className:"space-y-3",children:((er=(Qt=l==null?void 0:l.distribution)==null?void 0:Qt.by_department)==null?void 0:er.length)>0?l.distribution.by_department.slice(0,4).map((i,x)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`color-mix(in srgb, var(--theme-warning) ${80-x*15}%, var(--theme-primary) ${20+x*15}%)`}}),t.jsx("span",{className:"text-sm text-foreground truncate",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.count}),t.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",i.percentage,"%)"]})]})]},x)):t.jsx("div",{className:"text-center py-4",children:t.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No department data available"})})})]})}),t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-success) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-success) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx(Ur,{className:"w-5 h-5",style:{color:"var(--theme-success)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User Growth"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Registration trends"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"New (30 days)"}),t.jsx("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((rr=(tr=l==null?void 0:l.activity)==null?void 0:tr.recent_registrations)==null?void 0:rr.new_users_30_days)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"New (90 days)"}),t.jsx("span",{className:"text-sm font-medium text-primary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((nr=(ar=l==null?void 0:l.activity)==null?void 0:ar.recent_registrations)==null?void 0:nr.new_users_90_days)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Recently Active"}),t.jsx("span",{className:"text-sm font-medium text-secondary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((ir=(sr=l==null?void 0:l.activity)==null?void 0:sr.recent_registrations)==null?void 0:ir.recently_active)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Growth Rate"}),t.jsx(le,{size:"sm",color:(((lr=l==null?void 0:l.activity)==null?void 0:lr.user_growth_rate)||0)>0?"success":(((or=l==null?void 0:l.activity)==null?void 0:or.user_growth_rate)||0)<0?"danger":"default",variant:"flat",radius:Z(),children:t.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((dr=l==null?void 0:l.activity)==null?void 0:dr.user_growth_rate)||0,"%"]})})]})]})]})}),t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx(Se,{className:"w-5 h-5",style:{color:"var(--theme-danger)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Access Control"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role assignments"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"With Roles"}),t.jsx("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((ur=(cr=l==null?void 0:l.security)==null?void 0:cr.access_metrics)==null?void 0:ur.users_with_roles)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Without Roles"}),t.jsx("span",{className:"text-sm font-medium text-danger",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((fr=(mr=l==null?void 0:l.security)==null?void 0:mr.access_metrics)==null?void 0:fr.users_without_roles)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Admin Users"}),t.jsx("span",{className:"text-sm font-medium text-warning",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((pr=(hr=l==null?void 0:l.security)==null?void 0:hr.access_metrics)==null?void 0:pr.admin_users)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role Coverage"}),t.jsx(le,{size:"sm",color:(((gr=(xr=l==null?void 0:l.health)==null?void 0:xr.system_metrics)==null?void 0:gr.role_coverage)||0)>80?"success":(((br=(vr=l==null?void 0:l.health)==null?void 0:vr.system_metrics)==null?void 0:br.role_coverage)||0)>60?"warning":"danger",variant:"flat",radius:Z(),children:t.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((jr=(yr=l==null?void 0:l.health)==null?void 0:yr.system_metrics)==null?void 0:jr.role_coverage)||0,"%"]})})]})]})]})}),t.jsx(se,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-default) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsxs(ie,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-default) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:t.jsx(Mr,{className:"w-5 h-5",style:{color:"var(--theme-default)"}})}),t.jsxs("div",{children:[t.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"System Health"}),t.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Overall metrics"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Health Score"}),t.jsx(le,{size:"sm",color:(((_r=l==null?void 0:l.quick_metrics)==null?void 0:_r.system_health_score)||0)>80?"success":(((wr=l==null?void 0:l.quick_metrics)==null?void 0:wr.system_health_score)||0)>60?"warning":"danger",variant:"flat",radius:Z(),children:t.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((Nr=l==null?void 0:l.quick_metrics)==null?void 0:Nr.system_health_score)||0,"%"]})})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Activation Rate"}),t.jsxs("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((Tr=(Fr=l==null?void 0:l.health)==null?void 0:Fr.system_metrics)==null?void 0:Tr.user_activation_rate)||0,"%"]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Total Roles"}),t.jsx("span",{className:"text-sm font-medium text-primary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((Cr=l==null?void 0:l.overview)==null?void 0:Cr.total_roles)||0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Total Departments"}),t.jsx("span",{className:"text-sm font-medium text-warning",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((Ir=l==null?void 0:l.overview)==null?void 0:Ir.total_departments)||0})]})]})]})})]})}),t.jsx("div",{className:"mb-6",children:N?t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[t.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(q,{className:"w-24 h-4 rounded"}),t.jsx(q,{className:"w-full h-10 rounded-lg"})]})}),t.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(q,{className:"w-20 h-4 rounded"}),t.jsx(q,{className:"w-full h-10 rounded-lg"})]})})]}):t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-end",children:[t.jsx("div",{className:"flex-1",children:t.jsx(kn,{label:"Search Users",placeholder:"Search by name, email or phone...",value:v.search,onValueChange:i=>ne("search",i),variant:"bordered",size:a?"sm":"md",radius:Z(),startContent:t.jsx(wn,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"border-default-200 hover:border-default-300"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),t.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[t.jsxs(ye,{label:"Status",selectedKeys:v.status?[v.status]:[],onSelectionChange:i=>ne("status",Array.from(i)[0]),variant:"bordered",size:a?"sm":"md",radius:Z(),className:"w-32",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[t.jsx(Ne,{children:"All Status"},"all"),t.jsx(Ne,{children:"Active"},"active"),t.jsx(Ne,{children:"Inactive"},"inactive")]}),t.jsxs(ye,{label:"Role",selectedKeys:v.role?[v.role]:[],onSelectionChange:i=>ne("role",Array.from(i)[0]),variant:"bordered",size:a?"sm":"md",radius:Z(),className:"w-32",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[t.jsx(Ne,{children:"All Roles"},"all"),r==null?void 0:r.map((i,x)=>{const F=typeof i=="object"&&i!==null?i.name:i,D=typeof F=="string"?F.toLowerCase():String(F||`role-${x}`).toLowerCase();return t.jsx(Ne,{children:F||"Unknown Role"},D)})]}),t.jsxs(zn,{variant:"bordered",radius:Z(),children:[t.jsx(ee,{isIconOnly:!0,color:O==="table"?"primary":"default",onPress:()=>b("table"),size:a?"sm":"md",children:t.jsx(Mn,{className:"w-4 h-4"})}),t.jsx(ee,{isIconOnly:!0,color:O==="grid"?"primary":"default",onPress:()=>b("grid"),size:a?"sm":"md",children:t.jsx(Nn,{className:"w-4 h-4"})})]})]})]})}),t.jsx("div",{className:"overflow-hidden",children:N?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx(Ve,{size:"lg"})}):O==="table"?t.jsx(Hn,{allUsers:V.data,roles:r,setUsers:we,isMobile:a,isTablet:o,pagination:p,onPageChange:Be,onRowsPerPageChange:ke,totalUsers:V.total,loading:N,onEdit:i=>ue("edit",i),updateUserOptimized:mn,deleteUserOptimized:fn,toggleUserStatusOptimized:Ht,updateUserRolesOptimized:hn,toggleSingleDeviceLogin:Vt,resetUserDevice:qt,deviceActions:g}):t.jsxs("div",{children:[V.data&&V.data.length>0?t.jsx("div",{className:`grid gap-4 ${a?"grid-cols-1":o?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:V.data.map((i,x)=>t.jsx(xn,{user:i,index:x},i.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ge,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No users found"}),t.jsx("p",{className:"text-default-500 mb-4",children:"Try adjusting your search criteria or filters"}),t.jsx(ee,{color:"primary",startContent:t.jsx(ot,{className:"w-4 h-4"}),onPress:()=>ue("add"),children:"Add First User"})]}),V.data&&V.data.length>0&&t.jsx("div",{className:"flex justify-center mt-6 border-t pt-4",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:t.jsx(Pa,{total:Math.ceil(V.total/p.perPage),initialPage:p.currentPage,page:p.currentPage,onChange:Be,size:a?"sm":"md",variant:"bordered",showControls:!0,radius:Z(),style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})})]})]})})})})})]})};rc.layout=e=>t.jsx(Fn,{children:e});export{rc as default};
