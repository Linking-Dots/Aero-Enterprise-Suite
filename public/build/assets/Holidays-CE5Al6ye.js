import{r as i,R as ae,h as Ne,j as e,E as ie,y as le,Q as Re,b as W,a as Z}from"./app-CFOXYWdD.js";import{g as de,f as ze,j as Le,t as ce,d as I,c as De,s as ue,l as ee,m as he,k as pe,I as me,J as fe,B,A as Ee}from"./App-D44H3aE5.js";import{u as ke,m as ge,G as Oe}from"./logo-AMLCgbkx.js";import{P as Pe}from"./PageHeader-DIUdhN7v.js";import{S as Te}from"./StatsCards-GNCJc6Af.js";import{u as te}from"./index-CgyveMoZ.js";import{m as xe}from"./chunk-O5MCAK4F-b1RtXOOP.js";import{F as ye}from"./GlobeAltIcon-b2fU3EP6.js";import{F as Ae}from"./PencilIcon-BxC4n9WJ.js";import{F as Me}from"./TrashIcon-DmAagIVq.js";import{F as We}from"./CheckCircleIcon-WfVI_0Z3.js";import{F as Ie}from"./ExclamationTriangleIcon-Kx82ewut.js";import{F as Ye}from"./FunnelIcon-CAU2n7eZ.js";import{F as Be}from"./PlusIcon-xxvwdGLu.js";import{d as be}from"./chunk-URM6S66B-Cyd8Tbs4.js";import{c as $e,C as Ue,i as ve}from"./chunk-SSA7SXE4-B38lyIff.js";import{t as qe,a as Ge,b as Qe,c as Je}from"./chunk-F3UDT23P-DfyL8aGa.js";import{t as Ke}from"./chunk-YRZGWF2W-CVS3z9wo.js";import{t as Ve}from"./chunk-TSPNSPCL-CDimUInN.js";import"./EnvelopeIcon-DJsx2AYc.js";import"./UserIcon-B8KaJTnW.js";import"./ShieldCheckIcon-DfAiaKpT.js";import"./create-visual-element-DL7V4SzU.js";import"./chunk-D5XJWRAV-Bs0mRdwq.js";import"./index-CaGcrq76.js";import"./NumberFormatter-DNR9MAW-.js";import"./useHasTabbableChild-Bti5CcwH.js";function re(){return re=Object.assign?Object.assign.bind():function(o){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)({}).hasOwnProperty.call(a,n)&&(o[n]=a[n])}return o},re.apply(null,arguments)}function Xe(o,r){if(o==null)return{};var a={};for(var n in o)if({}.hasOwnProperty.call(o,n)){if(r.indexOf(n)!==-1)continue;a[n]=o[n]}return a}var Ze=i.useLayoutEffect,et=function(r){var a=ae.useRef(r);return Ze(function(){a.current=r}),a},je=function(r,a){if(typeof r=="function"){r(a);return}r.current=a},tt=function(r,a){var n=ae.useRef();return ae.useCallback(function(l){r.current=l,n.current&&je(n.current,null),n.current=a,a&&je(a,l)},[a])},we={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},at=function(r){Object.keys(we).forEach(function(a){r.style.setProperty(a,we[a],"important")})},Se=at,p=null,Ce=function(r,a){var n=r.scrollHeight;return a.sizingStyle.boxSizing==="border-box"?n+a.borderSize:n-a.paddingSize};function rt(o,r,a,n){a===void 0&&(a=1),n===void 0&&(n=1/0),p||(p=document.createElement("textarea"),p.setAttribute("tabindex","-1"),p.setAttribute("aria-hidden","true"),Se(p)),p.parentNode===null&&document.body.appendChild(p);var l=o.paddingSize,x=o.borderSize,u=o.sizingStyle,b=u.boxSizing;Object.keys(u).forEach(function(m){var _=m;p.style[_]=u[_]}),Se(p),p.value=r;var d=Ce(p,o);p.value=r,d=Ce(p,o),p.value="x";var y=p.scrollHeight-l,c=y*a;b==="border-box"&&(c=c+l+x),d=Math.max(c,d);var f=y*n;return b==="border-box"&&(f=f+l+x),d=Math.min(f,d),[d,y]}var _e=function(){},nt=function(r,a){return r.reduce(function(n,l){return n[l]=a[l],n},{})},ot=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],st=!!document.documentElement.currentStyle,it=function(r){var a=window.getComputedStyle(r);if(a===null)return null;var n=nt(ot,a),l=n.boxSizing;if(l==="")return null;st&&l==="border-box"&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var x=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),u=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:x,borderSize:u}},lt=it;function ne(o,r,a){var n=et(a);i.useLayoutEffect(function(){var l=function(u){return n.current(u)};if(o)return o.addEventListener(r,l),function(){return o.removeEventListener(r,l)}},[])}var dt=function(r,a){ne(document.body,"reset",function(n){r.current.form===n.target&&a(n)})},ct=function(r){ne(window,"resize",r)},ut=function(r){ne(document.fonts,"loadingdone",r)},ht=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],pt=function(r,a){var n=r.cacheMeasurements,l=r.maxRows,x=r.minRows,u=r.onChange,b=u===void 0?_e:u,d=r.onHeightChange,y=d===void 0?_e:d,c=Xe(r,ht),f=c.value!==void 0,m=i.useRef(null),_=tt(m,a),L=i.useRef(0),F=i.useRef(),S=function(){var g=m.current,R=n&&F.current?F.current:lt(g);if(R){F.current=R;var H=rt(R,g.value||g.placeholder||"x",x,l),v=H[0],h=H[1];L.current!==v&&(L.current=v,g.style.setProperty("height",v+"px","important"),y(v,{rowHeight:h}))}},D=function(g){f||S(),b(g)};return i.useLayoutEffect(S),dt(m,function(){if(!f){var N=m.current.value;requestAnimationFrame(function(){var g=m.current;g&&N!==g.value&&S()})}}),ct(S),ut(S),i.createElement("textarea",re({},c,{onChange:D,ref:_}))},mt=i.forwardRef(pt),He=Ne(({style:o,minRows:r=3,maxRows:a=8,cacheMeasurements:n=!1,disableAutosize:l=!1,onHeightChange:x,...u},b)=>{const{Component:d,label:y,description:c,startContent:f,endContent:m,hasHelper:_,shouldLabelBeOutside:L,shouldLabelBeInside:F,isInvalid:S,errorMessage:D,getBaseProps:N,getLabelProps:g,getInputProps:R,getInnerWrapperProps:H,getInputWrapperProps:v,getHelperWrapperProps:h,getDescriptionProps:E,getErrorMessageProps:C,isClearable:j,getClearButtonProps:T}=$e({...u,ref:b,isMultiline:!0}),[k,$]=i.useState(r>1),[A,U]=i.useState(!1),O=y?e.jsx("label",{...g(),children:y}):null,z=R(),q=(t,s)=>{if(r===1&&$(t>=s.rowHeight*2),a>r){const w=t>=a*s.rowHeight;U(w)}x==null||x(t,s)},P=l?e.jsx("textarea",{...z,style:ie(z.style,o??{})}):e.jsx(mt,{...z,cacheMeasurements:n,"data-hide-scroll":le(!A),maxRows:a,minRows:r,style:ie(z.style,o??{}),onHeightChange:q}),G=i.useMemo(()=>j?e.jsx("button",{...T(),children:e.jsx(Ue,{})}):null,[j,T]),Q=i.useMemo(()=>f||m?e.jsxs("div",{...H(),children:[f,P,m]}):e.jsx("div",{...H(),children:P}),[f,z,m,H]),Y=S&&D,J=Y||c;return e.jsxs(d,{...N(),children:[L?O:null,e.jsxs("div",{...v(),"data-has-multiple-rows":le(k),children:[F?O:null,Q,G]}),_&&J?e.jsx("div",{...h(),children:Y?e.jsx("div",{...C(),children:D}):e.jsx("div",{...E(),children:c})}):null]})});He.displayName="HeroUI.Textarea";var ft=He;const gt=({title:o,holidays:r,stats:a})=>{const{theme:n}=ke(),[l]=i.useState(window.innerWidth<640),[x]=i.useState(window.innerWidth<768),[u,b]=i.useState(r),[d,y]=i.useState(""),[c,f]=i.useState(new Date().getFullYear().toString()),[m,_]=i.useState(!1),{isOpen:L,onOpen:F,onClose:S}=te(),{isOpen:D,onOpen:N,onClose:g}=te(),{isOpen:R,onOpen:H,onClose:v}=te(),[h,E]=i.useState(null),[C,j]=i.useState({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1}),[T,k]=i.useState(!1),$=i.useMemo(()=>[{title:"Total Holidays",value:a.total_holidays,icon:e.jsx(ye,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All company holidays",trend:`${a.this_year_holidays} this year`},{title:"Upcoming",value:a.upcoming_holidays,icon:e.jsx(de,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Next holidays",trend:"Next 90 days"},{title:"This Month",value:a.this_month_holidays,icon:e.jsx(ze,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Current month",trend:"Ongoing & upcoming"},{title:"Working Days",value:365-a.total_holidays,icon:e.jsx(Le,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Business days",trend:`${Math.round((365-a.total_holidays)/365*100)}% of year`}],[a]),A=i.useMemo(()=>u.filter(t=>{const s=t.title.toLowerCase().includes(d.toLowerCase()),w=c==="all"||new Date(t.from_date).getFullYear().toString()===c;return s&&w}),[u,d,c]),U=i.useMemo(()=>[...new Set(u.map(s=>new Date(s.from_date).getFullYear()))].sort((s,w)=>w-s),[u]),O=[{key:"public",label:"Public Holiday",color:"primary"},{key:"religious",label:"Religious Holiday",color:"secondary"},{key:"national",label:"National Holiday",color:"success"},{key:"company",label:"Company Holiday",color:"warning"},{key:"optional",label:"Optional Holiday",color:"default"}],z=async()=>{k(!0);try{const t=h?await Z.put(route("holiday.update",h.id),C):await Z.post(route("holiday.store"),C);t.data.success&&(b(h?s=>s.map(w=>w.id===h.id?t.data.holiday:w):s=>[...s,t.data.holiday]),B.success(h?"Holiday updated successfully!":"Holiday created successfully!"),P())}catch{B.error("Failed to save holiday. Please try again.")}finally{k(!1)}},q=async()=>{if(h){k(!0);try{await Z.delete(route("holiday.destroy",h.id)),b(t=>t.filter(s=>s.id!==h.id)),B.success("Holiday deleted successfully!"),v(),E(null)}catch{B.error("Failed to delete holiday. Please try again.")}finally{k(!1)}}},P=()=>{S(),g(),E(null),j({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1})},G=t=>{E(t),j({title:t.title,from_date:t.from_date,to_date:t.to_date,description:t.description||"",type:t.type||"public",is_recurring:t.is_recurring||!1}),N()},Q=t=>{E(t),H()},Y=[{name:"Holiday",uid:"title"},{name:"Date",uid:"dates"},{name:"Duration",uid:"duration"},{name:"Type",uid:"type"},{name:"Status",uid:"status"},{name:"Actions",uid:"actions"}],J=i.useCallback((t,s)=>{const w=t[s],M=new Date(t.from_date),K=new Date(t.to_date),oe=Math.ceil((K-M)/(1e3*60*60*24))+1,V=M>new Date,X=M<=new Date&&K>=new Date;switch(s){case"title":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-bold text-small capitalize",children:t.title}),t.description&&e.jsx("p",{className:"text-bold text-tiny capitalize text-default-400",children:t.description})]});case"dates":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-small",children:M.toLocaleDateString("en-US",{month:"short",day:"numeric",year:M.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}),t.from_date!==t.to_date&&e.jsxs("span",{className:"text-tiny text-default-400",children:["to ",K.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]});case"duration":return e.jsxs(I,{size:"sm",variant:"flat",children:[oe," ",oe===1?"day":"days"]});case"type":const se=O.find(Fe=>Fe.key===t.type)||O[0];return e.jsx(I,{size:"sm",color:se.color,variant:"flat",children:se.label});case"status":return e.jsx(I,{size:"sm",color:X?"success":V?"warning":"default",variant:"flat",startContent:X?e.jsx(We,{className:"w-3 h-3"}):V?e.jsx(de,{className:"w-3 h-3"}):e.jsx(Ie,{className:"w-3 h-3"}),children:X?"Ongoing":V?"Upcoming":"Past"});case"actions":return e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx(ce,{content:"Edit holiday",children:e.jsx("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>G(t),children:e.jsx(Ae,{className:"w-4 h-4"})})}),e.jsx(ce,{color:"danger",content:"Delete holiday",children:e.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:()=>Q(t),children:e.jsx(Me,{className:"w-4 h-4"})})})]});default:return w}},[]);return e.jsxs(e.Fragment,{children:[e.jsx(Re,{title:o}),e.jsx("div",{className:"flex justify-center p-2",children:e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:e.jsx(Oe,{children:e.jsx(Pe,{title:"Company Holidays",subtitle:"Manage company-wide holidays and special occasions",icon:e.jsx(ye,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:l?"Add":"Add Holiday",icon:e.jsx(Be,{className:"w-4 h-4"}),onClick:F,className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}],children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(Te,{stats:$,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ve,{label:"Search Holidays",placeholder:"Search by holiday name...",value:d,onChange:t=>y(t.target.value),startContent:e.jsx(De,{className:"w-4 h-4 text-default-400"})})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(ue,{label:"Year",selectedKeys:[c],onSelectionChange:t=>f(Array.from(t)[0]),className:"w-32",children:[e.jsx(ee,{value:"all",children:"All Years"},"all"),U.map(t=>e.jsx(ee,{value:t.toString(),children:t},t.toString()))]}),e.jsxs(W,{isIconOnly:l,variant:"bordered",onPress:()=>_(!m),className:m?"bg-purple-500/20":"bg-white/5",children:[e.jsx(Ye,{className:"w-4 h-4"}),!l&&e.jsx("span",{className:"ml-1",children:"Filters"})]})]})]}),(d||c!==new Date().getFullYear().toString())&&e.jsxs(ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-4 flex flex-wrap gap-2",children:[d&&e.jsxs(I,{variant:"flat",color:"primary",size:"sm",onClose:()=>y(""),children:["Search: ",d]}),c!==new Date().getFullYear().toString()&&e.jsxs(I,{variant:"flat",color:"secondary",size:"sm",onClose:()=>f(new Date().getFullYear().toString()),children:["Year: ",c==="all"?"All Years":c]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Company Holidays",e.jsxs("span",{className:"text-sm text-default-500 ml-2",children:["(",A.length," ",A.length===1?"holiday":"holidays",")"]})]})}),e.jsxs(qe,{isStriped:!0,removeWrapper:!0,"aria-label":"Holidays table",classNames:{th:"bg-white/5 text-default-600 border-b border-white/10",td:"border-b border-white/5"},children:[e.jsx(Ke,{columns:Y,children:t=>e.jsx(Ve,{align:t.uid==="actions"?"center":"start",children:t.name},t.uid)}),e.jsx(Ge,{items:A,children:t=>e.jsx(Qe,{children:s=>e.jsx(Je,{children:J(t,s)})},t.id)})]})]})]})})})})}),e.jsx(he,{isOpen:L||D,onClose:P,size:"2xl",backdrop:"blur",classNames:{backdrop:"bg-linear-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20",base:"border-[#292f46] bg-linear-to-br from-white/10 to-white/5 backdrop-blur-md",header:"border-b border-[#292f46]",footer:"border-t border-[#292f46]"},children:e.jsxs(pe,{children:[e.jsx(me,{className:"flex flex-col gap-1",children:h?"Edit Holiday":"Add New Holiday"}),e.jsxs(fe,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ve,{label:"Holiday Title",placeholder:"Enter holiday name",value:C.title,onChange:t=>j(s=>({...s,title:t.target.value})),isRequired:!0}),e.jsx(ue,{label:"Holiday Type",selectedKeys:[C.type],onSelectionChange:t=>j(s=>({...s,type:Array.from(t)[0]})),children:O.map(t=>e.jsx(ee,{value:t.key,children:t.label},t.key))}),e.jsx(be,{label:"From Date",value:C.from_date,onChange:t=>j(s=>({...s,from_date:t})),isRequired:!0}),e.jsx(be,{label:"To Date",value:C.to_date,onChange:t=>j(s=>({...s,to_date:t})),isRequired:!0})]}),e.jsx(ft,{label:"Description (Optional)",placeholder:"Enter holiday description or additional notes",value:C.description,onChange:t=>j(s=>({...s,description:t.target.value})),rows:3})]}),e.jsxs(xe,{children:[e.jsx(W,{color:"danger",variant:"light",onPress:P,children:"Cancel"}),e.jsx(W,{color:"primary",onPress:z,isLoading:T,children:h?"Update Holiday":"Add Holiday"})]})]})}),e.jsx(he,{isOpen:R,onClose:v,size:"md",backdrop:"blur",children:e.jsxs(pe,{children:[e.jsx(me,{className:"flex flex-col gap-1",children:"Confirm Delete"}),e.jsxs(fe,{children:[e.jsxs("p",{children:['Are you sure you want to delete the holiday "',h==null?void 0:h.title,'"?']}),e.jsx("p",{className:"text-small text-danger",children:"This action cannot be undone."})]}),e.jsxs(xe,{children:[e.jsx(W,{color:"default",variant:"light",onPress:v,children:"Cancel"}),e.jsx(W,{color:"danger",onPress:q,isLoading:T,children:"Delete Holiday"})]})]})})]})};gt.layout=o=>e.jsx(Ee,{children:o});export{gt as default};
