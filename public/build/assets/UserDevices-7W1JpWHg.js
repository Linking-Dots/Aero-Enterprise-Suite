import{j as e,Q as R,t as A,d as E,c as p,b as M}from"./app-DyyunZfI.js";import{A as T}from"./Dashboard-eJcnLUU8.js";import{F as X}from"./ArrowLeftIcon-Clbht5me.js";import{F as $}from"./LockClosedIcon-B7Mkzc9K.js";import{F as O}from"./LockOpenIcon-CLskIG9t.js";import{F as v,a as Y}from"./DeviceTabletIcon-CwmaIUaP.js";import{F as U}from"./CheckCircleIcon-Btm8mRnI.js";import{F as z}from"./XCircleIcon-Bgpjgx-C.js";import{F as C}from"./ShieldCheckIcon-kgeUV64N.js";import{F as H}from"./ClockIcon-D7ADVzPp.js";import{t as y,a as L}from"./XMarkIcon-CsXY58VA.js";import{t as m,c as P,n as g,g as F,a as k,e as B,m as I,b as N}from"./en-US-D8UQXs-H.js";import{c as D}from"./chunk-IHOGUXIG-B8WOVLyW.js";import{c as Q}from"./chunk-D5XJWRAV-Drq72Bup.js";import{t as G,a as V,b as W,c as j}from"./chunk-F3UDT23P-DcQmi0GJ.js";import{t as q,a as _}from"./chunk-YRZGWF2W-D0s1RKY5.js";import"./react-toastify.esm-CYg29cdz.js";import"./MapPinIcon-BzuMXqkn.js";import"./EnvelopeIcon-CQykiiND.js";import"./UserGroupIcon-27E50qMZ.js";import"./UserIcon-BkD21Ack.js";import"./KeyIcon-Dltk5WDG.js";import"./index-CZqnmJ4-.js";import"./chunk-SSA7SXE4-BLP1fpPl.js";import"./chunk-Y2AYO5NJ-Cdo7__Ed.js";import"./logo-Pwvcz7fP.js";import"./proxy-DAD54e0o.js";import"./create-visual-element-202FNWgM.js";import"./MagnifyingGlassIcon-CnIa6Cul.js";import"./ExclamationTriangleIcon-BsmzlS1r.js";import"./features-animation-CECeEVLg.js";import"./chunk-XJ2YRSUP-DWcV61jD.js";import"./useToggleState-Ds9var53.js";function w(r,a){const t=+m(r)-+m(a);return t<0?-1:t>0?1:t}function J(r){return P(r,Date.now())}function K(r,a,t){const[l,s]=g(t==null?void 0:t.in,r,a),i=l.getFullYear()-s.getFullYear(),d=l.getMonth()-s.getMonth();return i*12+d}function Z(r){return a=>{const l=(r?Math[r]:Math.trunc)(a);return l===0?0:l}}function ee(r,a){return+m(r)-+m(a)}function se(r,a){const t=m(r,a==null?void 0:a.in);return t.setHours(23,59,59,999),t}function te(r,a){const t=m(r,a==null?void 0:a.in),l=t.getMonth();return t.setFullYear(t.getFullYear(),l+1,0),t.setHours(23,59,59,999),t}function ae(r,a){const t=m(r,a==null?void 0:a.in);return+se(t,a)==+te(t,a)}function re(r,a,t){const[l,s,i]=g(t==null?void 0:t.in,r,r,a),d=w(s,i),n=Math.abs(K(s,i));if(n<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-d*n);let o=w(s,i)===-d;ae(l)&&n===1&&w(l,i)===1&&(o=!1);const u=d*(n-+o);return u===0?0:u}function ne(r,a,t){const l=ee(r,a)/1e3;return Z(t==null?void 0:t.roundingMethod)(l)}function le(r,a,t){const l=k(),s=(t==null?void 0:t.locale)??l.locale??B,i=2520,d=w(r,a);if(isNaN(d))throw new RangeError("Invalid time value");const n=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:d}),[o,u]=g(t==null?void 0:t.in,...d>0?[a,r]:[r,a]),x=ne(u,o),S=(F(u)-F(o))/1e3,c=Math.round((x-S)/60);let h;if(c<2)return t!=null&&t.includeSeconds?x<5?s.formatDistance("lessThanXSeconds",5,n):x<10?s.formatDistance("lessThanXSeconds",10,n):x<20?s.formatDistance("lessThanXSeconds",20,n):x<40?s.formatDistance("halfAMinute",0,n):x<60?s.formatDistance("lessThanXMinutes",1,n):s.formatDistance("xMinutes",1,n):c===0?s.formatDistance("lessThanXMinutes",1,n):s.formatDistance("xMinutes",c,n);if(c<45)return s.formatDistance("xMinutes",c,n);if(c<90)return s.formatDistance("aboutXHours",1,n);if(c<I){const f=Math.round(c/60);return s.formatDistance("aboutXHours",f,n)}else{if(c<i)return s.formatDistance("xDays",1,n);if(c<N){const f=Math.round(c/I);return s.formatDistance("xDays",f,n)}else if(c<N*2)return h=Math.round(c/N),s.formatDistance("aboutXMonths",h,n)}if(h=re(u,o),h<12){const f=Math.round(c/N);return s.formatDistance("xMonths",f,n)}else{const f=h%12,b=Math.trunc(h/12);return f<3?s.formatDistance("aboutXYears",b,n):f<9?s.formatDistance("overXYears",b,n):s.formatDistance("almostXYears",b+1,n)}}function ce(r,a){return le(r,J(r),a)}const He=({user:r,devices:a})=>{const t=s=>{switch(s==null?void 0:s.toLowerCase()){case"mobile":return e.jsx(v,{className:"w-5 h-5"});case"tablet":return e.jsx(Y,{className:"w-5 h-5"});default:return e.jsx(L,{className:"w-5 h-5"})}},l=s=>{if(!s)return"Never";try{return ce(new Date(s),{addSuffix:!0})}catch{return s}};return e.jsxs(T,{children:[e.jsx(R,{title:`Device History - ${r.name}`}),e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx(A,{href:route("users"),children:e.jsx(E,{variant:"light",startContent:e.jsx(X,{className:"w-4 h-4"}),className:"mb-2",children:"Back to Users"})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Device History"}),e.jsxs("p",{className:"text-default-500 mt-1",children:[r.name," (",r.email,")"]})]}),e.jsx(D,{color:r.single_device_login_enabled?"success":"default",variant:"flat",startContent:r.single_device_login_enabled?e.jsx($,{className:"w-4 h-4"}):e.jsx(O,{className:"w-4 h-4"}),children:r.single_device_login_enabled?"Single Device Enforced":"Multiple Devices Allowed"})]}),e.jsxs(p,{children:[e.jsx(Q,{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Registered Devices"}),e.jsxs("p",{className:"text-sm text-default-500",children:[a.length," ",a.length===1?"device":"devices"," registered"]})]})}),e.jsx(M,{children:a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"w-12 h-12 mx-auto text-default-300 mb-3"}),e.jsx("p",{className:"text-default-500",children:"No devices registered yet"})]}):e.jsxs(G,{"aria-label":"User devices table",removeWrapper:!0,children:[e.jsxs(q,{children:[e.jsx(_,{children:"DEVICE"}),e.jsx(_,{children:"TYPE"}),e.jsx(_,{children:"IP ADDRESS"}),e.jsx(_,{children:"STATUS"}),e.jsx(_,{children:"LAST USED"}),e.jsx(_,{children:"REGISTERED"})]}),e.jsx(V,{children:a.map(s=>e.jsxs(W,{children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[t(s.device_type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.device_name}),e.jsxs("p",{className:"text-xs text-default-500",children:[s.browser," on ",s.platform]})]})]})}),e.jsx(j,{children:e.jsx(D,{size:"sm",variant:"flat",children:s.device_type||"Unknown"})}),e.jsx(j,{children:e.jsx("span",{className:"text-sm",children:s.ip_address})}),e.jsx(j,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{content:s.is_active?"Active":"Inactive",children:e.jsx(D,{size:"sm",color:s.is_active?"success":"default",variant:"flat",startContent:s.is_active?e.jsx(U,{className:"w-3 h-3"}):e.jsx(z,{className:"w-3 h-3"}),children:s.is_active?"Active":"Inactive"})}),s.is_trusted&&e.jsx(y,{content:"Trusted Device",children:e.jsx(D,{size:"sm",color:"primary",variant:"flat",startContent:e.jsx(C,{className:"w-3 h-3"}),children:"Trusted"})})]})}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-sm",children:l(s.last_used_at)})]})}),e.jsx(j,{children:e.jsx("span",{className:"text-sm text-default-500",children:l(s.created_at)})})]},s.id))})]})})]}),a.length>0&&e.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(s=>e.jsx(p,{className:"border-2 border-default-200",children:e.jsxs(M,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t(s.device_type),e.jsx("span",{className:"font-semibold",children:s.device_name})]}),s.is_active&&e.jsx(D,{size:"sm",color:"success",variant:"dot",children:"Active"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-500",children:"Device ID:"}),e.jsxs("span",{className:"font-mono text-xs",children:[s.device_id.substring(0,8),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-500",children:"IP Address:"}),e.jsx("span",{children:s.ip_address})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-500",children:"Browser:"}),e.jsx("span",{children:s.browser})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-500",children:"Platform:"}),e.jsx("span",{children:s.platform})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-500",children:"Last Used:"}),e.jsx("span",{children:l(s.last_used_at)})]})]})]})},s.id))})]})]})};export{He as default};
