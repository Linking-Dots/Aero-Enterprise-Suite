import{u as Qe,r as l,j as t,b as W,H as ge,c as re,d as le,f as Q,s as Xe}from"./app-LVThMHv6.js";import{h as Ze,F as Ue,A as et}from"./Dashboard-DBbCgV-n.js";import{S as tt}from"./StatsCards-Y5c7dy96.js";import{L as ye,D as at,B as st,a as rt,b as lt}from"./BulkDeleteModal-Euvqw5Zc.js";import{d as xe}from"./dayjs.min-CeqI8qNk.js";import{B as q}from"./react-toastify.esm-XSUbqWj4.js";import{F as nt}from"./ClockIcon-DtscKg2-.js";import{F as ot}from"./CheckCircleIcon-C0Nql-s2.js";import{F as it}from"./XCircleIcon-CCvBTS_2.js";import{F as X}from"./MapPinIcon-C447FcTQ.js";import{F as be}from"./ExclamationTriangleIcon-CbuBhWRQ.js";import{m as we}from"./proxy-CcHlyH9G.js";import{F as dt}from"./PresentationChartLineIcon-8MNJBsIL.js";import{F as ct}from"./PlusIcon-BeChrxvx.js";import{F as mt}from"./DocumentArrowDownIcon-Ca5dnrNI.js";import{F as ut}from"./MagnifyingGlassIcon-CKnM0M7D.js";import{F as pt}from"./AdjustmentsHorizontalIcon-Bms_Mjdi.js";import{F as ft}from"./ChartBarIcon-Dv3lSYxj.js";import{c as vt}from"./chunk-D5XJWRAV-kriH8qZu.js";import{i as je}from"./chunk-SSA7SXE4-BZRsjoCY.js";import{b as ht}from"./chunk-57V4RE7B-BT4b1sSI.js";import{s as ne,l as T}from"./chunk-Y2AYO5NJ-Dvw4KXqa.js";import{c as Z}from"./chunk-IHOGUXIG-_168abAb.js";import"./EnvelopeIcon-DtnMZwXJ.js";import"./UserGroupIcon-Do9jVOOs.js";import"./UserIcon-86B7TkEY.js";import"./ShieldCheckIcon-k6dvI0-q.js";import"./XMarkIcon-BOrBl2CU.js";import"./KeyIcon-B8-iyAa4.js";import"./index-BYMQF0fe.js";import"./logo-Pwvcz7fP.js";import"./MagnifyingGlassIcon-BZJE1KKS.js";import"./chunk-TLYTI3QM-DFSGgdJp.js";import"./index-B7mgmw7u.js";import"./index-CBOEUWAw.js";import"./chunk-XJ2YRSUP-M7U33Ktn.js";import"./useToggleState-Bj91Jdos.js";import"./chunk-QESP63UR-By7RHKxx.js";import"./chunk-O5MCAK4F-CsD6owuC.js";import"./TrashIcon-Bk9upnxi.js";import"./PencilIcon-DJ2WqisH.js";import"./EllipsisVerticalIcon-CJn2cOfP.js";import"./XCircleIcon-CzzoYcL7.js";import"./CheckCircleIcon-6IhkYdTJ.js";import"./ClockIcon-C8knLD0b.js";import"./ExclamationTriangleIcon-D9PNPtT3.js";import"./createLucideIcon-D8IEaQF3.js";import"./HeartIcon-C7yk30_r.js";import"./SunIcon-B4EIluP1.js";import"./chunk-F3UDT23P-Sug-Eqba.js";import"./chunk-S574QCAN-D5urRlRu.js";import"./chunk-JOT4BT4P-CyGFnfI1.js";import"./chunk-APIAPHLK-Ds0iDEOX.js";import"./chunk-YRZGWF2W-CBTrIlcC.js";import"./chunk-XVMALT6H-BqWV1iSD.js";import"./useProgressBar-CG8Iu-D0.js";import"./NumberFormatter-DNR9MAW-.js";import"./calendar-wTpuh0XC.js";import"./user-C4gDvlc_.js";import"./clock-BHm4FmXF.js";import"./InformationCircleIcon-BoIB_71_.js";import"./chunk-TQNYOUFX-DqhQ69G_.js";import"./create-visual-element-Dg9ZhQ6T.js";const gt=({title:V,allUsers:h})=>{var ue,pe,fe,ve,he;const{auth:E}=Qe().props,L=()=>{var n;if(typeof window>"u")return"lg";const s=((n=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:n.trim())||"12px",r=parseInt(s);return r===0?"none":r<=4?"sm":r<=8?"md":r<=16?"lg":"full"},[g,Fe]=l.useState(!1),[yt,_e]=l.useState(!1);l.useEffect(()=>{const e=()=>{Fe(window.innerWidth<640),_e(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const[ke,U]=l.useState(!1),[M,I]=l.useState([]),[m,f]=l.useState(),[_,p]=l.useState(0),[Ne,k]=l.useState(0),[H,oe]=l.useState(),[Ce,ie]=l.useState([]),[de,D]=l.useState(""),[z,Pe]=l.useState([]),[d,N]=l.useState({perPage:30,currentPage:1}),[xt,R]=l.useState(!1),[K,Se]=l.useState(!1),[a,Ae]=l.useState({employee:"",selectedMonth:xe().format("YYYY-MM"),status:[],leaveType:[],department:[]}),y=l.useCallback((e,s)=>{if(e==="year"){const r=Number(s);if(r<1900||r>new Date().getFullYear()){console.warn("Invalid year selected. Must be between 1900 and current year.");return}}Ae(r=>({...r,[e]:s})),N(r=>({...r,currentPage:1}))},[]),[P,Le]=l.useState({pending:0,approved:0,rejected:0,total:0,thisMonth:0,thisWeek:0,totalDaysUsed:0,totalDaysRemaining:0}),Me=l.useMemo(()=>[{title:"Total Leaves",value:P.total,icon:t.jsx(Ze,{}),color:"text-primary",iconBg:"bg-primary/20",description:"All leave requests"},{title:"Pending",value:P.pending,icon:t.jsx(nt,{}),color:"text-warning",iconBg:"bg-warning/20",description:"Awaiting approval"},{title:"Approved",value:P.approved,icon:t.jsx(ot,{}),color:"text-success",iconBg:"bg-success/20",description:"Approved requests"},{title:"Rejected",value:P.rejected,icon:t.jsx(it,{}),color:"text-danger",iconBg:"bg-danger/20",description:"Rejected requests"},{title:"This Month",value:P.thisMonth,icon:t.jsx(Ue,{}),color:"text-secondary",iconBg:"bg-secondary/20",description:"Current month"},{title:"This Week",value:P.thisWeek,icon:t.jsx(X,{}),color:"text-primary",iconBg:"bg-primary/20",description:"Current week"}],[P]),B=((ue=E.permissions)==null?void 0:ue.includes("leaves.view"))||!1,$=((pe=E.permissions)==null?void 0:pe.includes("leaves.approve"))||!1,ce=((fe=E.permissions)==null?void 0:fe.includes("leaves.create"))||!1,Re=((ve=E.permissions)==null?void 0:ve.includes("leaves.update"))||!1,Te=((he=E.permissions)==null?void 0:he.includes("leaves.delete"))||!1,Ee=l.useMemo(()=>{const e=[{key:"all",label:"All Types",value:"all"}];if(!M.leaveTypes)return e;const s=M.leaveTypes.map(r=>({key:r.type.toLowerCase(),label:r.type,value:r.type.toLowerCase()}));return[...e,...s]},[M.leaveTypes]),Ie=l.useCallback(e=>{O(s=>({...s,[e]:!0}))},[]),De=l.useCallback((e,s)=>{oe({id:e}),O(r=>({...r,[s]:!0}))},[]);l.useCallback(e=>{y("employee",e.target.value.toLowerCase())},[y]);const ee=l.useCallback(e=>{y("selectedMonth",e.target.value)},[y]),ze=l.useCallback(e=>{N(s=>({...s,currentPage:e}))},[]),Be=l.useCallback(e=>{N(s=>({...s,perPage:e,currentPage:1}))},[]),x=l.useCallback(async(e=null,s=null)=>{var o,c,v,u,b;U(!0);const r=e||d.currentPage,n=s||d.perPage;try{const F=await W.get(route("leaves.paginate"),{params:{page:r,perPage:n,employee:a.employee,month:a.selectedMonth,status:Array.isArray(a.status)&&a.status.length>0?a.status:void 0,leave_type:Array.isArray(a.leaveType)&&a.leaveType.length>0?a.leaveType:void 0,department:Array.isArray(a.department)&&a.department.length>0?a.department:void 0,admin_view:!0,view_all:!0}});if(F.status===200){const{leaves:i,leavesData:C,departments:ae}=F.data;i!=null&&i.data&&Array.isArray(i.data)?(f(i.data),p(i.total||i.data.length),k(i.last_page||1),e&&e!==d.currentPage&&N(se=>({...se,currentPage:e})),s&&s!==d.perPage&&N(se=>({...se,perPage:s}))):Array.isArray(i)?(f(i),p(i.length),k(1)):(console.error("Unexpected leaves data format:",i),f([]),p(0),k(1)),I(C),Pe(ae||[]),D("")}}catch(F){if(console.error("Error fetching leaves data:",F.response),((o=F.response)==null?void 0:o.status)===404){const{leavesData:i}=F.response.data||{};I(i||[]),D(((v=(c=F.response)==null?void 0:c.data)==null?void 0:v.message)||"No leaves found for the selected criteria.")}else D(((b=(u=F.response)==null?void 0:u.data)==null?void 0:b.message)||"Error retrieving leaves data. Please try again.");f([]),p(0),k(1)}finally{U(!1)}},[a,d.currentPage,d.perPage]),S=l.useCallback(async()=>{var e,s,r;try{const n=await W.get(route("leaves.stats"),{params:{month:a.selectedMonth,admin_view:!0,view_all:!0}});if(n.status===200){const{stats:o}=n.data;Le(o)}}catch(n){console.error("Error fetching leaves data:",n.response),((e=n.response)==null?void 0:e.status)===404?D(((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.message)||"No leaves found for the selected criteria."):D("Error retrieving leaves data. Please try again."),U(!1)}},[a]),$e=l.useCallback(async e=>{if($)try{if((await W.post(route("leaves.bulk-approve"),{leave_ids:e})).status===200){x();const r=Promise.resolve();q.promise(r,{success:"Selected leaves approved successfully"})}}catch(s){console.error("Error bulk approving leaves:",s);const r=Promise.reject(s);q.promise(r,{error:"Failed to approve selected leaves"})}},[$,x]),Oe=l.useCallback(async e=>{if($)try{if((await W.post(route("leaves.bulk-reject"),{leave_ids:e})).status===200){x();const r=Promise.resolve();q.promise(r,{success:"Selected leaves rejected successfully"})}}catch(s){console.error("Error bulk rejecting leaves:",s);const r=Promise.reject(s);q.promise(r,{error:"Failed to reject selected leaves"})}},[$,x]),Ye=l.useCallback(e=>{ie(e),O(s=>({...s,bulk_delete:!0}))},[]);if(!B)return t.jsxs(t.Fragment,{children:[t.jsx(ge,{title:V}),t.jsx("div",{className:"flex justify-center p-4",children:t.jsx(re,{className:"w-full max-w-md",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                                var(--theme-content1, #FAFAFA) 20%, 
                                var(--theme-content2, #F4F4F5) 10%, 
                                var(--theme-content3, #F1F3F4) 20%)`},children:t.jsxs(le,{className:"p-8 text-center",children:[t.jsx(be,{className:"w-16 h-16 text-warning mx-auto mb-4"}),t.jsx("h6",{className:"text-lg font-semibold mb-2",children:"Access Denied"}),t.jsx("p",{className:"text-sm text-default-500",children:"You don't have permission to view leave management."})]})})})]});const[w,O]=l.useState({add_leave:!1,edit_leave:!1,delete_leave:!1,bulk_leave:!1,bulk_delete:!1}),We=l.useRef(null),me=l.useCallback(e=>{O(s=>({...s,[e]:!0}))},[]),Y=l.useCallback(e=>{O(s=>({...s,[e]:!1})),e==="bulk_delete"&&ie([])},[]),G=l.useCallback(e=>[...e].sort((s,r)=>new Date(r.from_date)-new Date(s.from_date)),[]),A=l.useCallback((e,s=null)=>{p(e);const r=Math.max(1,Math.ceil(e/d.perPage));k(r),d.currentPage>r&&N(n=>({...n,currentPage:r}))},[d.perPage,d.currentPage]),J=l.useCallback(e=>{const s=xe(e.from_date).format("YYYY-MM");if(a.selectedMonth&&s!==a.selectedMonth)return!1;if(a.employee){const r=h==null?void 0:h.find(o=>String(o.id)===String(e.user_id)),n=a.employee.trim().toLowerCase();if(r){if(String(r.id)!==n&&!(r.name&&r.name.trim().toLowerCase().includes(n)))return!1}else if(String(a.employee)!==String(e.user_id))return!1}if(Array.isArray(a.status)&&a.status.length>0&&!a.status.some(n=>String(e.status).toLowerCase()===String(n).toLowerCase())||Array.isArray(a.leaveType)&&a.leaveType.length>0&&!a.leaveType.some(n=>String(e.leave_type).toLowerCase()===String(n).toLowerCase()))return!1;if(Array.isArray(a.department)&&a.department.length>0){const r=h==null?void 0:h.find(o=>String(o.id)===String(e.user_id));if(!r||!a.department.some(o=>String(r.department_id)===String(o)))return!1}return!0},[a,h]),qe=l.useMemo(()=>m||[],[m]),te=l.useCallback(async()=>{if(m&&m.length<d.perPage&&_>m.length){const e=Math.min(d.perPage-m.length,_-m.length);if(e<=0)return;R(!0);try{const s=await W.get(route("leaves.paginate"),{params:{page:d.currentPage+1,perPage:e,employee:a.employee,month:a.selectedMonth,status:Array.isArray(a.status)&&a.status.length>0?a.status:void 0,leave_type:Array.isArray(a.leaveType)&&a.leaveType.length>0?a.leaveType:void 0,department:Array.isArray(a.department)&&a.department.length>0?a.department:void 0,admin_view:!0,view_all:!0}});s.status===200&&s.data.leaves.data&&f(r=>{const n=s.data.leaves.data.filter(J),o=[...r,...n];return G(o)})}catch(s){const r=Promise.reject(s);q.promise(r,{error:"Error fetching additional items."}),console.error(`Error fetching additional items from page ${d.currentPage+1}:`,s)}finally{R(!1)}}},[d.currentPage,d.perPage,m,a,G,J]),j=l.useCallback((e,s)=>{if(!s||!s.success){console.error(`Invalid ${e} response data:`,s);return}S(),s.leavesData&&I(s.leavesData);const r=d.perPage,n=d.currentPage;switch(e){case"bulk_delete":{const o=s.deleted_leaves||[],c=s.deleted_count||o.length;if(c===0)return;const v=o.map(i=>i.id),u=Math.max(0,_-c),b=m.filter(i=>!v.includes(i.id)).length;if(c>5||b===0||n>1&&b<r/2){const i=Math.ceil(u/r);let C=n;b===0&&u>0?C=Math.max(1,n-1):n>i&&i>0&&(C=i),N(ae=>({...ae,currentPage:C})),x(C,r)}else R(!0),f(i=>i.filter(C=>!v.includes(C.id))),p(u),A(u),R(!1),te();break}case"single_delete":{const o=s.deleted_leave_id;if(!o)return;const c=Math.max(0,_-1);if(m.filter(u=>u.id!==o).length===0&&c>0&&n>1){const u=n-1;N(b=>({...b,currentPage:u})),x(u,r)}else R(!0),f(u=>u.filter(b=>b.id!==o)),p(c),A(c),R(!1),te();break}case"bulk_add":{const o=s.added_count||1,c=_+o;p(c),A(c),x(n,r);break}case"single_add":{const o=s.added_count||1,c=_+o,v=s.leave;if(v&&J(v))if(m.length<r){const b=G([...m,v]);f(b),p(c),A(c)}else p(c),A(c),x(n,r);else p(c),A(c);break}case"edit":{const o=s.updated_leave||s.leave;o&&f(c=>c.map(v=>v.id===o.id?o:v));break}}},[d.perPage,d.currentPage,_,m,S,A,x,te,J,G]),Ve=l.useCallback(e=>{j("single_add",{success:!0,added_count:1,leave:e})},[j]),He=l.useCallback(e=>{j("edit",{success:!0,updated_leave:e})},[j]),Ke=l.useCallback(e=>{var o;if(!e||!e.success){console.error("Invalid bulk response data:",e);return}const s=e.created_leaves||[],r=((o=e.summary)==null?void 0:o.successful)||s.length,n={...e,added_count:r};j("bulk_add",n)},[j]),Ge=l.useCallback(e=>{j("single_delete",{success:!0,deleted_leave_id:e})},[j]),Je=l.useCallback(e=>{j("bulk_delete",e)},[j]);return l.useEffect(()=>{B&&x()},[x,B,d.currentPage,a.employee,a.selectedMonth,a.status,a.leaveType,a.department]),l.useEffect(()=>{B&&S()},[x,B]),t.jsxs(t.Fragment,{children:[t.jsx(ge,{title:V}),w.add_leave&&t.jsx(ye,{open:w.add_leave,closeModal:()=>Y("add_leave"),leavesData:M,setLeavesData:I,currentLeave:null,allUsers:h,departments:z,setTotalRows:p,setLastPage:k,setLeaves:f,handleMonthChange:ee,employee:a.employee,selectedMonth:a.selectedMonth,addLeaveOptimized:Ve,fetchLeavesStats:S}),w.edit_leave&&t.jsx(ye,{open:w.edit_leave,closeModal:()=>Y("edit_leave"),leavesData:M,setLeavesData:I,currentLeave:H,allUsers:h,departments:z,setTotalRows:p,setLastPage:k,setLeaves:f,handleMonthChange:ee,employee:a.employee,selectedMonth:a.selectedMonth,updateLeaveOptimized:He,fetchLeavesStats:S}),w.delete_leave&&t.jsx(at,{open:w.delete_leave,closeModal:()=>Y("delete_leave"),leaveId:H==null?void 0:H.id,setLeaves:f,setTotalRows:p,setLastPage:k,deleteLeaveOptimized:Ge,fetchLeavesStats:S}),w.bulk_leave&&t.jsx(st,{open:w.bulk_leave,onClose:()=>Y("bulk_leave"),onSuccess:e=>{Ke(e)},allUsers:h,departments:z,leavesData:M,isAdmin:!0}),w.bulk_delete&&t.jsx(rt,{open:w.bulk_delete,onClose:()=>Y("bulk_delete"),onSuccess:e=>{Je(e)},selectedLeaves:Ce,allUsers:h}),t.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Leave Management",children:t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"w-full",children:t.jsx(we.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:t.jsxs(re,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[t.jsx(vt,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:t.jsx("div",{className:`${g?"p-4":"p-6"} w-full`,children:t.jsx("div",{className:"flex flex-col space-y-4",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[t.jsx("div",{className:`
                                                            ${g?"p-2":"p-3"} 
                                                            rounded-xl flex items-center justify-center
                                                        `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsx(dt,{className:`
                                                                ${g?"w-6 h-6":"w-8 h-8"}
                                                            `,style:{color:"var(--theme-primary)"}})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h4",{className:`
                                                                ${g?"text-xl":"text-2xl"}
                                                                font-bold text-foreground
                                                                ${g?"truncate":""}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Leave Management"}),t.jsx("p",{className:`
                                                                ${g?"text-xs":"text-sm"} 
                                                                text-default-500
                                                                ${g?"truncate":""}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage employee leave requests and approvals"})]})]}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[ce&&t.jsx(Q,{color:"primary",variant:"shadow",startContent:t.jsx(ct,{className:"w-4 h-4"}),onPress:()=>me("add_leave"),size:g?"sm":"md",className:"font-semibold",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Add Leave"}),ce&&t.jsx(Q,{color:"secondary",variant:"flat",startContent:t.jsx(X,{className:"w-4 h-4"}),onPress:()=>me("bulk_leave"),size:g?"sm":"md",className:"font-semibold",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Bulk Add"}),t.jsx(Q,{color:"default",variant:"bordered",startContent:t.jsx(mt,{className:"w-4 h-4"}),size:g?"sm":"md",className:"font-semibold",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Export"})]})]})})})}),t.jsxs(le,{className:"p-6",children:[t.jsx(tt,{stats:Me,className:"mb-6"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[t.jsx("div",{className:"flex-1",children:t.jsx(je,{label:"Search Employee",placeholder:"Search by name or ID...",value:a.employee,onChange:e=>y("employee",e.target.value),startContent:t.jsx(ut,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:L(),className:"w-full",classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Search employees"})}),t.jsx("div",{className:"flex gap-2 items-end",children:t.jsx(ht,{variant:"bordered",radius:L(),className:"bg-white/5",children:t.jsxs(Q,{isIconOnly:g,color:K?"primary":"default",onPress:()=>Se(!K),className:K?"bg-purple-500/20":"bg-white/5",children:[t.jsx(pt,{className:"w-4 h-4"}),!g&&t.jsx("span",{className:"ml-1",children:"Filters"})]})})})]}),K&&t.jsx(we.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:t.jsxs("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs(ne,{label:"Leave Status",placeholder:"Select status...",selectionMode:"multiple",selectedKeys:new Set(a.status),onSelectionChange:e=>y("status",Array.from(e)),variant:"bordered",size:"sm",radius:L(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Filter by leave status",children:[t.jsx(T,{value:"pending",children:"Pending"},"pending"),t.jsx(T,{value:"approved",children:"Approved"},"approved"),t.jsx(T,{value:"rejected",children:"Rejected"},"rejected"),t.jsx(T,{value:"new",children:"New"},"new")]}),t.jsx(ne,{label:"Leave Type",placeholder:"Select leave types",selectionMode:"multiple",selectedKeys:new Set(a.leaveType),onSelectionChange:e=>y("leaveType",Array.from(e)),variant:"bordered",size:"sm",radius:L(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Filter by leave type",children:Ee.map(e=>t.jsx(T,{value:e.value,children:e.label},e.value))}),t.jsx(ne,{label:"Department",placeholder:"Select departments",selectionMode:"multiple",selectedKeys:new Set(a.department),onSelectionChange:e=>y("department",Array.from(e)),variant:"bordered",size:"sm",radius:L(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Filter by department",children:z.map(e=>t.jsx(T,{value:e.id,children:e.name},e.id))}),t.jsx(je,{label:"Month/Year",type:"month",value:a.selectedMonth,onChange:ee,startContent:t.jsx(X,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:L(),className:"w-full",classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Select month and year for filtering"})]}),(a.employee||Array.isArray(a.status)&&a.status.length>0||Array.isArray(a.leaveType)&&a.leaveType.length>0||Array.isArray(a.department)&&a.department.length>0)&&t.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[a.employee&&t.jsxs(Z,{variant:"flat",color:"primary",size:"sm",onClose:()=>y("employee",""),children:["Employee: ",a.employee]}),Array.isArray(a.status)&&a.status.map(e=>t.jsxs(Z,{variant:"flat",color:"secondary",size:"sm",onClose:()=>y("status",a.status.filter(s=>s!==e)),children:["Status: ",e]},e)),Array.isArray(a.leaveType)&&a.leaveType.map(e=>t.jsxs(Z,{variant:"flat",color:"warning",size:"sm",onClose:()=>y("leaveType",a.leaveType.filter(s=>s!==e)),children:["Type: ",e]},e)),Array.isArray(a.department)&&a.department.map(e=>{const s=z.find(r=>String(r.id)===String(e));return t.jsxs(Z,{variant:"flat",color:"success",size:"sm",onClose:()=>y("department",a.department.filter(r=>r!==e)),children:["Department: ",(s==null?void 0:s.name)||`ID: ${e}`]},e)})]})]})}),t.jsxs("div",{className:"min-h-96",children:[t.jsxs("div",{className:"mb-4 flex items-center gap-2 font-semibold text-lg",children:[t.jsx(ft,{className:"w-5 h-5"}),"Leave Requests Management"]}),ke?t.jsx(re,{className:"bg-white/10 backdrop-blur-md border-white/20",children:t.jsxs(le,{className:"text-center py-12",children:[t.jsx(Xe,{size:"lg"}),t.jsx("p",{className:"mt-4 text-default-500",children:"Loading leave data..."})]})}):m&&m.length>0?t.jsx("div",{className:"overflow-hidden rounded-lg",children:t.jsx(lt,{ref:We,totalRows:_,lastPage:Ne,setCurrentPage:ze,setPerPage:Be,perPage:d.perPage,currentPage:d.currentPage,handleClickOpen:De,setCurrentLeave:oe,openModal:Ie,leaves:qe,allUsers:h,setLeaves:f,employee:a.employee,selectedMonth:a.selectedMonth,isAdminView:!0,onBulkApprove:$e,onBulkReject:Oe,canApproveLeaves:$,canEditLeaves:Re,canDeleteLeaves:Te,fetchLeavesStats:S,onBulkDelete:Ye})}):de?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(be,{className:"w-16 h-16 text-warning mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Data Found"}),t.jsx("p",{className:"text-default-500",children:de})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(X,{className:"w-16 h-16 text-default-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Leave Records Found"}),t.jsx("p",{className:"text-default-500",children:"No leave records found for the selected criteria."})]})]})]})]})})})})})]})};gt.layout=V=>t.jsx(et,{children:V});export{gt as default};
