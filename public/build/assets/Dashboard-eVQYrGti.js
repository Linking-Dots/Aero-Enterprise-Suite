import{l as qe,r,n as Ie,ar as Ke,k as Je,j as e,R as le,a as Xe,c as V,i as Ae,d as ve,s as we,f as re,u as Me,b as ie,t as Ye,v as Qe,F as et,H as tt}from"./app-C5K_9KK-.js";import{T as rt}from"./TimeSheetTable-tPmmcl7R.js";import{I as at,J as st,K as nt,w as Oe,p as xe,F as je,L as ot,M as it,h as Ne,N as lt,P as ct,k as dt,c as Se,e as Pe,f as Te,g as Re,A as ut}from"./Dashboard-CWk23WvD.js";import{S as mt}from"./StatsCards-Bt5nVeRP.js";import{M as ht,T as pt,u as We,L as Z}from"./leaflet-BYgUPEI7.js";import"./leaflet-routing-machine-DKdscgaJ.js";import{m as K}from"./proxy-Dc_g5Wt_.js";import{c as Ce}from"./createLucideIcon-IK3RBg2F.js";import{U as ft}from"./users-CTxMixJ8.js";import{M as xt}from"./map-pin-Bu7eUIzH.js";import{c as _e}from"./chunk-D5XJWRAV-DIgVQent.js";import{d as ee}from"./dayjs.min-BNU-CQGU.js";import{i as gt}from"./isBetween-CFum1mEn.js";import{F as he}from"./ExclamationTriangleIcon-jgvpCu-s.js";import{F as ae}from"./ClockIcon-Cm9yGH9I.js";import{F as Ue}from"./UserGroupIcon-KdPJnRG1.js";import{F as vt}from"./SunIcon-Dl6w3u7V.js";import{F as Fe}from"./InformationCircleIcon-D4p3zlAK.js";import{F as Le}from"./UserIcon-CA8VtYlK.js";import{F as yt}from"./XCircleIcon-Bg8gSL12.js";import{F as ge}from"./CheckCircleIcon-k9cVNu7a.js";import{s as ke}from"./chunk-TLYTI3QM-CVNUbvtX.js";import{c as oe}from"./chunk-IHOGUXIG-DEoiLfba.js";import{F as bt}from"./ClipboardDocumentListIcon-t4dYFR7k.js";import{B as X}from"./react-toastify.esm-CinaYzkz.js";import{a as ue,F as wt}from"./MapPinIcon-BMpdw9KS.js";import{F as jt}from"./WifiIcon-Bjd-pPk4.js";import{F as Nt}from"./ShieldCheckIcon-B4rPsFTo.js";import{t as be,F as Ft}from"./XMarkIcon-DEsRQaY4.js";import{m as Ee}from"./chunk-O5MCAK4F-DrdSvyMv.js";import"./PageHeader-UdoiH0rh.js";import"./MagnifyingGlassIcon-B7v60_ow.js";import"./UserPlusIcon-B6sGc7xo.js";import"./chunk-SSA7SXE4-Drwqh7w1.js";import"./DocumentArrowDownIcon-7KYggIqc.js";import"./chunk-JOT4BT4P-Bwuc40dV.js";import"./chunk-Y2AYO5NJ-DNW0zTNL.js";import"./chunk-F3UDT23P-CbHioAJf.js";import"./chunk-XJ2YRSUP-BvSqgxMu.js";import"./useToggleState-CE-9rKhV.js";import"./chunk-YRZGWF2W-Btn_9_b8.js";import"./chunk-APIAPHLK-CNDba45j.js";import"./chunk-S574QCAN-DFJ_UH_c.js";import"./EnvelopeIcon-Bf-B5eT0.js";import"./KeyIcon-2ogj-0zO.js";import"./index-CKXAUfcI.js";import"./logo-Pwvcz7fP.js";import"./create-visual-element-D7J1mfUn.js";function kt(s={}){const{as:t,ref:m,max:c=5,total:o,size:f,color:d,radius:h,children:y,isBordered:A,isDisabled:_,isGrid:I,renderCount:P,className:T,classNames:R,...k}=s,x=qe(m),n=t||"div",l=r.useMemo(()=>({size:f,color:d,radius:h,isGrid:I,isBordered:A,isDisabled:_}),[f,d,h,I,A,_]),u=r.useMemo(()=>at({className:T,isGrid:I}),[T,I]),g=st(y),j=c?g.slice(0,c):g,b=o||(c!=null?g.length-c:-1),S=j.map((p,w)=>{const E=w===0,$=w===j.length-1,C={className:Ie(E?"ms-0":I?"":"-ms-2",$&&b<1?"hover:-translate-x-0":"")};return r.cloneElement(p,Ke(C))});return{Component:n,context:l,remainingCount:b,clones:S,renderCount:P,getAvatarGroupProps:()=>({ref:x,className:u.base({class:Ie(R==null?void 0:R.base,T)}),role:"group",...k}),getAvatarGroupCountProps:()=>({className:u.count({class:R==null?void 0:R.count})})}}var ze=Je((s,t)=>{const{Component:m,clones:c,context:o,remainingCount:f,getAvatarGroupCountProps:d,getAvatarGroupProps:h,renderCount:y=A=>e.jsx(Oe,{...d(),name:`+${A}`})}=kt({...s,ref:t});return e.jsx(m,{...h(),children:e.jsxs(nt,{value:o,children:[c,f>0&&y(f)]})})});ze.displayName="HeroUI.AvatarGroup";var Ct=ze;function _t({title:s,titleId:t,...m},c){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":t},m),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"}))}const It=r.forwardRef(_t);function St({title:s,titleId:t,...m},c){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":t},m),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const $e=r.forwardRef(St);function Pt({title:s,titleId:t,...m},c){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":t},m),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const Tt=r.forwardRef(Pt);function Rt({title:s,titleId:t,...m},c){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":t},m),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const Lt=r.forwardRef(Rt);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$t=Ce("clock-4",Et);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],De=Ce("map",Dt);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Mt=Ce("refresh-cw",At);L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(s){var t=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",t),this.link.href="#",this._map=s,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),t},_click:function(s){L.DomEvent.stopPropagation(s),L.DomEvent.preventDefault(s),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}});L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(s){var t=this.getContainer();this.isFullscreen()?s&&s.pseudoFullscreen?this._disablePseudoFullscreen(t):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(t):s&&s.pseudoFullscreen?this._enablePseudoFullscreen(t):t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.msRequestFullscreen?t.msRequestFullscreen():this._enablePseudoFullscreen(t)},_enablePseudoFullscreen:function(s){L.DomUtil.addClass(s,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(s){L.DomUtil.removeClass(s,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(s){this._isFullscreen=s;var t=this.getContainer();s?L.DomUtil.addClass(t,"leaflet-fullscreen-on"):L.DomUtil.removeClass(t,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(s){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;t===this.getContainer()&&!this._isFullscreen?(this._setFullscreen(!0),this.fire("fullscreenchange")):t!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange"))}});L.Map.mergeOptions({fullscreenControl:!1});L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl));var s;if("onfullscreenchange"in document?s="fullscreenchange":"onmozfullscreenchange"in document?s="mozfullscreenchange":"onwebkitfullscreenchange"in document?s="webkitfullscreenchange":"onmsfullscreenchange"in document&&(s="MSFullscreenChange"),s){var t=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,s,t)}),this.on("unload",function(){L.DomEvent.off(document,s,t)})}});L.control.fullscreen=function(s){return new L.Control.Fullscreen(s)};const Y=(s,t)=>{if(s.startsWith("var("))return`color-mix(in srgb, ${s} ${t*100}%, transparent)`;if(s.startsWith("#")){const m=s.replace("#",""),c=parseInt(m.substr(0,2),16),o=parseInt(m.substr(2,2),16),f=parseInt(m.substr(4,2),16);return`rgba(${c}, ${o}, ${f}, ${t})`}return s.replace(/[\d.]+\)$/g,`${t})`)},Ot=()=>{var c;const t=((c=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:c.trim())||"12px",m=parseInt(t);return m===0?"none":m<=4?"sm":m<=8?"md":m<=16?"lg":"full"},q={DEFAULT_ZOOM:12,MIN_ZOOM:8,MAX_ZOOM:19,POSITION_THRESHOLD:1e-4,OFFSET_MULTIPLIER:1e-4,MARKER_SIZE:[40,40],POPUP_MAX_WIDTH:300},me={primary:{lat:23.879132,lng:90.502617},route:{start:{lat:23.987057,lng:90.361908,name:"Route Start"},end:{lat:23.690618,lng:90.546729,name:"Route End"}}},He=le.memo(({startLocation:s,endLocation:t,theme:m})=>{const c=We();return r.useEffect(()=>{var f;if(!c||!s||!t)return;const o=Z.Routing.control({waypoints:[Z.latLng(s.lat,s.lng),Z.latLng(t.lat,t.lng)],routeWhileDragging:!1,addWaypoints:!1,createMarker:()=>null,lineOptions:{styles:[{color:((f=m==null?void 0:m.customColors)==null?void 0:f.primary)||"var(--theme-primary, #3b82f6)",weight:4,opacity:.8}]},show:!1}).addTo(c);return()=>{c&&o&&c.removeControl(o)}},[c,s,t,m]),null});He.displayName="RoutingMachine";const Ge=le.memo(({selectedDate:s,onUsersLoad:t,theme:m,lastUpdate:c,users:o,setUsers:f,setLoading:d,setError:h})=>{const y=We(),A=r.useRef([]),_=r.useCallback(async()=>{if(!s){d(!1),f([]),t==null||t([]);return}d(!0),h(null);try{const n=route("getUserLocationsForDate",{date:s,_t:Date.now()}),u=(await axios.get(n)).data;if(!u.success||!Array.isArray(u.locations))throw new Error("Unexpected response format from server.");const g=u.locations;JSON.stringify(g)!==JSON.stringify(A.current)&&(f(g),A.current=g),t==null||t(g)}catch(n){let l="Error fetching user locations.";n.response?(l+=` Server error (${n.response.status}): ${n.response.statusText}`,typeof n.response.data=="object"&&(l+=`
Details: ${JSON.stringify(n.response.data)}`)):n.request?l+=" No response received from server.":n.message&&(l+=` ${n.message}`),console.error(l,n),h(l),f([]),t==null||t([])}finally{d(!1)}},[s,t,c]);r.useEffect(()=>{_()},[_]);const I=r.useCallback((n,l)=>{const u=q.OFFSET_MULTIPLIER*l;return{lat:n.lat+u,lng:n.lng+u}},[]),P=r.useCallback((n,l)=>Math.abs(n.lat-l.lat)<q.POSITION_THRESHOLD&&Math.abs(n.lng-l.lng)<q.POSITION_THRESHOLD,[]),T=r.useCallback(n=>{if(!n)return null;if(typeof n=="object"&&n.lat&&n.lng){const l=parseFloat(n.lat),u=parseFloat(n.lng);return isNaN(l)||isNaN(u)?null:{lat:l,lng:u}}if(typeof n=="string")try{const l=JSON.parse(n);if(l.lat&&l.lng){const u=parseFloat(l.lat),g=parseFloat(l.lng);return isNaN(u)||isNaN(g)?null:{lat:u,lng:g}}}catch{const u=n.split(",");if(u.length>=2){const g=parseFloat(u[0].trim()),j=parseFloat(u[1].trim());return isNaN(g)||isNaN(j)?null:{lat:g,lng:j}}}return null},[]),R=r.useCallback(n=>{if(!n)return"Not recorded";try{let l;return n.includes("T")?l=new Date(n):l=new Date(`${s}T${n}`),isNaN(l.getTime())?"Invalid time":l.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(l){return console.warn("Error formatting time:",l),n}},[s]),k=r.useCallback((n,l="default")=>{var w,E,$,C;const u="var(--theme-primary, #3b82f6)",g="var(--theme-secondary, #8b5cf6)",j="var(--theme-success, #17C964)",b="var(--theme-danger, #ef4444)";let S,N,M="";l==="punchin"?(S=`${j}, #059669`,N=Y(j,.4),M='<span style="position: absolute; top: -4px; right: -4px; font-size: 10px;">‚ñ∂</span>'):l==="punchout"?(S=`${b}, #dc2626`,N=Y(b,.4),M='<span style="position: absolute; top: -4px; right: -4px; font-size: 10px;">‚óº</span>'):(S=`${u}, ${g}`,N=Y(u,.4));const p=`
            <div style="
                position: relative;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background: linear-gradient(135deg, ${S});
                border: 3px solid white;
                box-shadow: 0 4px 12px ${N};
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: bold;
                font-size: 14px;
                backdrop-filter: blur(10px);
            ">
                ${n.profile_image_url||n.profile_image?`<img src="${n.profile_image_url||n.profile_image}" style="width: 34px; height: 34px; border-radius: 50%; object-fit: cover;" onerror="this.style.display='none'; this.parentElement.innerHTML='${((E=(w=n.name)==null?void 0:w.charAt(0))==null?void 0:E.toUpperCase())||"?"}';" />`:((C=($=n.name)==null?void 0:$.charAt(0))==null?void 0:C.toUpperCase())||"?"}
                ${M}
            </div>
        `;return Z.divIcon({html:p,className:"user-marker-icon",iconSize:q.MARKER_SIZE,iconAnchor:[20,20],popupAnchor:[0,-20]})},[]),x=r.useCallback((n,l="combined")=>{var W,z,B,te;const u=n.punchout_time?"var(--theme-success, #17C964)":"var(--theme-warning, #F5A524)",g="var(--theme-primary, #3b82f6)",j="var(--theme-secondary, #8b5cf6)",b="var(--theme-success, #17C964)",S="var(--theme-danger, #ef4444)",N="var(--theme-content1, #ffffff)",M="var(--theme-foreground, #1f2937)",p="var(--theme-content3, #6b7280)";let w=null,E="";l==="punchin"&&n.punchin_photo_url?(w=n.punchin_photo_url,E="Check In Photo"):l==="punchout"&&n.punchout_photo_url&&(w=n.punchout_photo_url,E="Check Out Photo");const $=w?`
            <div style="margin-top: 12px; margin-bottom: 12px;">
                <div style="color: ${p}; font-size: 11px; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px;">
                    ${E}
                </div>
                <img 
                    src="${w}" 
                    style="
                        width: 100%; 
                        max-height: 150px; 
                        object-fit: cover; 
                        border-radius: 8px;
                        border: 1px solid ${Y(g,.2)};
                    " 
                    onerror="this.style.display='none';"
                />
            </div>
        `:"";let C="",O=g;l==="punchin"?(C=`
                <div style="
                    display: inline-block;
                    padding: 2px 6px;
                    background: ${Y(b,.1)};
                    color: ${b};
                    border-radius: 4px;
                    font-size: 10px;
                    font-weight: 600;
                    margin-left: 8px;
                    border: 1px solid ${Y(b,.2)};
                ">CHECK IN</div>
            `,O=b):l==="punchout"&&(C=`
                <div style="
                    display: inline-block;
                    padding: 2px 6px;
                    background: ${Y(S,.1)};
                    color: ${S};
                    border-radius: 4px;
                    font-size: 10px;
                    font-weight: 600;
                    margin-left: 8px;
                    border: 1px solid ${Y(S,.2)};
                ">CHECK OUT</div>
            `,O=S);let G="";return l==="punchin"?G=`
                <div style="display: flex; align-items: center;">
                    <span style="color: ${b}; margin-right: 8px;">üìç</span>
                    <span style="color: ${p}; font-size: 13px;">
                        Time: ${R(n.punchin_time)}
                    </span>
                </div>
            `:l==="punchout"?G=`
                <div style="display: flex; align-items: center;">
                    <span style="color: ${S}; margin-right: 8px;">üìç</span>
                    <span style="color: ${p}; font-size: 13px;">
                        Time: ${R(n.punchout_time)}
                    </span>
                </div>
            `:G=`
                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                    <span style="color: ${b}; margin-right: 8px;">üìç</span>
                    <span style="color: ${p}; font-size: 13px;">
                        Check In: ${R(n.punchin_time)}
                    </span>
                </div>
                <div style="display: flex; align-items: center;">
                    <span style="color: ${S}; margin-right: 8px;">üìç</span>
                    <span style="color: ${p}; font-size: 13px;">
                        Check Out: ${R(n.punchout_time)}
                    </span>
                </div>
            `,`
            <div style="
                min-width: 250px;
                padding: 16px;
                background: linear-gradient(135deg, ${Y(N,.95)}, ${Y(O,.05)});
                border-radius: 12px;
                border: 1px solid ${Y(O,.2)};
                backdrop-filter: blur(20px);
                font-family: var(--fontFamily, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);
            ">
                <div style="display: flex; align-items: center; margin-bottom: 12px;">
                    <div style="
                        width: 32px;
                        height: 32px;
                        border-radius: 50%;
                        background: linear-gradient(135deg, ${l==="punchin"?b:l==="punchout"?S:g}, ${j});
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: white;
                        font-weight: bold;
                        margin-right: 12px;
                    ">
                        ${n.profile_image_url||n.profile_image?`<img src="${n.profile_image_url||n.profile_image}" style="width: 30px; height: 30px; border-radius: 50%; object-fit: cover;" onerror="this.style.display='none'; this.parentElement.innerHTML='${((z=(W=n.name)==null?void 0:W.charAt(0))==null?void 0:z.toUpperCase())||"?"}';" />`:((te=(B=n.name)==null?void 0:B.charAt(0))==null?void 0:te.toUpperCase())||"?"}
                    </div>
                    <div style="flex: 1;">
                        <div style="display: flex; align-items: center;">
                            <span style="font-weight: 600; color: ${M}; font-size: 16px;">
                                ${n.name||"Unknown User"}
                            </span>
                            ${C}
                        </div>
                        <div style="color: ${p}; font-size: 12px;">
                            ${n.designation||"No designation"}
                        </div>
                    </div>
                </div>
                ${l==="combined"?`
                <div style="
                    display: inline-block;
                    padding: 4px 8px;
                    background: ${Y(u,.1)};
                    color: ${u};
                    border-radius: 6px;
                    font-size: 12px;
                    font-weight: 600;
                    margin-bottom: 12px;
                    border: 1px solid ${Y(u,.2)};
                ">
                    ${n.punchout_time?"‚úì Completed":"‚è± Active"}
                </div>`:""}
                ${$}
                <div style="space-y: 8px;">
                    ${G}
                </div>
            </div>
        `},[R]);return r.useEffect(()=>{if(!y||!o.length)return;y.eachLayer(u=>{(u instanceof Z.Marker&&u.options.userData||u instanceof Z.Polyline&&u.options.userRoute)&&y.removeLayer(u)});const n=[],l=u=>{let g={...u},j=0;const b=10;for(;j<b&&n.some(N=>P(g,N));)g=I(u,j+1),j++;return n.push(g),g};o.forEach(u=>{const g=u.cycles||[];if(g.length>0)g.forEach((j,b)=>{const S=T(j.punchin_location),N=T(j.punchout_location);if(!S&&!N)return;const M=S&&N&&j.is_complete,p={...u,punchin_time:j.punchin_time,punchout_time:j.punchout_time,punchin_photo_url:j.punchin_photo_url,punchout_photo_url:j.punchout_photo_url};if(M){const w=l(S),E=l(N),$=Z.marker([w.lat,w.lng],{icon:k(u,"punchin"),userData:!0});$.bindPopup(x(p,"punchin"),{maxWidth:q.POPUP_MAX_WIDTH,className:"custom-popup"}),$.addTo(y);const C=Z.marker([E.lat,E.lng],{icon:k(u,"punchout"),userData:!0});C.bindPopup(x(p,"punchout"),{maxWidth:q.POPUP_MAX_WIDTH,className:"custom-popup"}),C.addTo(y),Z.polyline([[w.lat,w.lng],[E.lat,E.lng]],{color:"var(--theme-primary, #3b82f6)",weight:3,opacity:.7,dashArray:"10, 10",userRoute:!0}).addTo(y)}else{const E=l(S||N),$=S?"punchin":"punchout",C=Z.marker([E.lat,E.lng],{icon:k(u,$),userData:!0});C.bindPopup(x(p,$),{maxWidth:q.POPUP_MAX_WIDTH,className:"custom-popup"}),C.addTo(y)}});else{const j=T(u.punchin_location),b=T(u.punchout_location);if(!j&&!b)return;if(j&&b&&u.punchout_time){const N=l(j),M=l(b),p=Z.marker([N.lat,N.lng],{icon:k(u,"punchin"),userData:!0});p.bindPopup(x(u,"punchin"),{maxWidth:q.POPUP_MAX_WIDTH,className:"custom-popup"}),p.addTo(y);const w=Z.marker([M.lat,M.lng],{icon:k(u,"punchout"),userData:!0});w.bindPopup(x(u,"punchout"),{maxWidth:q.POPUP_MAX_WIDTH,className:"custom-popup"}),w.addTo(y),Z.polyline([[N.lat,N.lng],[M.lat,M.lng]],{color:"var(--theme-primary, #3b82f6)",weight:3,opacity:.7,dashArray:"10, 10",userRoute:!0}).addTo(y)}else{const M=l(j||b),p=j?"punchin":"punchout",w=Z.marker([M.lat,M.lng],{icon:k(u,p),userData:!0});w.bindPopup(x(u,p),{maxWidth:q.POPUP_MAX_WIDTH,className:"custom-popup"}),w.addTo(y)}}})},[y,o,m,T,P,I,k,x]),null});Ge.displayName="UserMarkers";const Wt=s=>r.useMemo(()=>{const t=s.reduce((d,h)=>{const y=h.user_id;return d[y]||(d[y]=[]),d[y].push(h),d},{}),m=Object.keys(t),c=m.length;let o=0,f=0;return m.forEach(d=>{const h=t[d];h.sort((_,I)=>_.punchin_time?I.punchin_time?_.punchin_time.localeCompare(I.punchin_time):-1:1);const y=h[h.length-1];h.some(_=>_.punchin_time)&&(y.punchout_time?f++:o++)}),{checkedIn:o,completed:f,total:c}},[s]),Ut=le.memo(({updateMap:s,selectedDate:t})=>{const{themeSettings:m}=Xe(),c=xe("(min-width: 1025px)"),o=xe("(min-width: 641px) and (max-width: 1024px)"),[f,d]=r.useState([]),[h,y]=r.useState(!0),[A,_]=r.useState(null),[I,P]=r.useState(!1),[T,R]=r.useState(null),[k,x]=r.useState(!0),[n,l]=r.useState(0),u=window.innerWidth<640,[g,j]=r.useState(new Date),b=r.useRef([]),S=r.useRef(null),N=r.useCallback(async()=>{y(!0);try{const C=route("getUserLocationsForDate",{date:t,_t:Date.now()});if(!t){d([]),b.current=[],l(z=>z+1),j(new Date),R(new Date);return}const O=await fetch(C);if(!O.ok)throw new Error(`HTTP ${O.status}: Failed to refresh user locations`);const G=await O.json(),W=Array.isArray(G.locations)?G.locations:[];d(W),b.current=W,l(z=>z+1),j(new Date),R(new Date)}catch(C){console.error("Error refreshing map:",C),d([]),b.current=[]}finally{y(!1)}},[t]),M=r.useMemo(()=>{if(!t)return"Invalid Date";try{return new Date(t).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid Date"}},[t]),p=Wt(f),w=r.useCallback(async()=>{if(!t){y(!1);return}try{const C=route("check-user-locations-updates",{date:t.split("T")[0]}),O=await fetch(C);if(!O.ok)throw new Error(`HTTP ${O.status}: Failed to check for updates`);const G=await O.json();G.success&&G.last_updated!==S.current&&G.last_updated&&(S.current=G.last_updated,N(),R(new Date)),j(new Date)}catch(C){console.error("Error checking for updates:",C),y(!1)}},[t,N]);r.useEffect(()=>{if(!k)return;w();const C=setInterval(w,5e3);return()=>clearInterval(C)},[k,w]),r.useEffect(()=>{f.length===0&&h&&I&&y(!1)},[f,h,I]),r.useEffect(()=>{if(h){const C=setTimeout(()=>{h&&(console.log("Loading timeout reached, forcing loading to false"),y(!1))},1e4);return()=>clearTimeout(C)}},[h]);const E=r.useMemo(()=>g?g.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):null,[g]),$=r.useCallback(C=>{const O=Array.isArray(C)?C:[];JSON.stringify(O)!==JSON.stringify(b.current)&&(d(O),b.current=O),P(!0),y(!1)},[]);return e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"w-full max-w-full",children:e.jsxs(V,{className:"w-full transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                            var(--theme-content1, #FAFAFA) 20%, 
                            var(--theme-content2, #F4F4F5) 10%, 
                            var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(_e,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${c?"p-6":o?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                                ${c?"p-3":o?"p-2.5":"p-2"} 
                                                rounded-xl flex items-center justify-center
                                            `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(De,{className:`
                                                    ${c?"w-8 h-8":o?"w-6 h-6":"w-5 h-5"}
                                                `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                                    ${c?"text-2xl":o?"text-xl":"text-lg"}
                                                    font-bold text-foreground
                                                    ${c?"":"truncate"}
                                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Team Locations"}),e.jsx("p",{className:`
                                                    ${c?"text-sm":"text-xs"} 
                                                    text-default-500
                                                    ${c?"":"truncate"}
                                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:M})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:E&&e.jsxs("span",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["Updated: ",E]})})]})})})}),e.jsx(Ae,{style:{borderColor:"var(--theme-divider, #E4E4E7)"}}),e.jsxs(ve,{className:"p-0",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx("div",{className:"p-6",children:e.jsx(mt,{className:"mb-6",stats:[{title:"Total",value:p.total,icon:e.jsx(ft,{className:"w-5 h-5"}),color:"text-primary",description:"Total users tracked",iconBg:"bg-primary/20",valueColor:"text-primary",customStyle:{color:"var(--theme-primary)"}},{title:"Active",value:p.checkedIn,icon:e.jsx($t,{className:"w-5 h-5"}),color:"text-warning",description:"Currently working",iconBg:"bg-warning/20",valueColor:"text-warning",customStyle:{color:"var(--theme-warning)"}},{title:"Completed",value:p.completed,icon:e.jsx(xt,{className:"w-5 h-5"}),color:"text-success",description:"Finished workday",iconBg:"bg-success/20",valueColor:"text-success",customStyle:{color:"var(--theme-success)"}}],compact:u})}),e.jsx("div",{className:"p-6 pt-0",children:f.length>0?e.jsxs("div",{className:"relative h-[70vh] rounded-2xl overflow-hidden border-2 shadow-2xl",style:{borderColor:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[h&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center backdrop-blur-xl z-50",style:{background:"color-mix(in srgb, var(--theme-content1) 80%, transparent)",fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"text-center",children:[e.jsx(we,{size:"lg",color:"primary"}),e.jsx("p",{className:"mt-4 text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Loading locations..."})]})}),e.jsxs(ht,{center:[me.primary.lat,me.primary.lng],zoom:q.DEFAULT_ZOOM,minZoom:q.MIN_ZOOM,maxZoom:q.MAX_ZOOM,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,doubleClickZoom:!0,dragging:!0,touchZoom:!0,fullscreenControl:!0,attributionControl:!1,zoomControl:!1,children:[e.jsx(pt,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:q.MAX_ZOOM,attribution:'¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.jsx(He,{startLocation:me.route.start,endLocation:me.route.end,theme:m}),e.jsx(Ge,{users:f,setUsers:d,setLoading:y,setError:_,lastUpdate:T,selectedDate:t,onUsersLoad:$,theme:m})]},`${s}-${n}`)]}):h?e.jsx("div",{className:"h-[70vh] rounded-2xl flex items-center justify-center border-2 shadow-2xl backdrop-blur-xl",style:{borderColor:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",background:"color-mix(in srgb, var(--theme-content1) 80%, transparent)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"text-center",children:[e.jsx(we,{size:"lg",color:"primary"}),e.jsx("p",{className:"mt-4 text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Loading locations..."})]})}):e.jsxs("div",{className:"h-[70vh] rounded-2xl flex flex-col items-center justify-center backdrop-blur-xl border-2 shadow-2xl p-12",style:{background:"color-mix(in srgb, var(--theme-content1) 80%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(De,{className:"w-16 h-16 text-default-300 mb-6"}),e.jsx("h3",{className:"text-xl font-semibold mb-4",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No Location Data Available"}),e.jsxs("p",{className:"text-default-500 mb-6 max-w-md text-center",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["No team location data found for ",M,".",t&&new Date(t)>new Date?" This date is in the future.":" Try selecting a different date or refreshing the data."]}),e.jsx(re,{variant:"bordered",color:"primary",size:"md",radius:Ot(),onPress:N,startContent:e.jsx(Mt,{className:"w-4 h-4"}),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Refresh Data"})]})})]})]})})})});ee.extend(gt);const pe=()=>{var c;if(typeof window>"u")return"lg";const t=((c=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:c.trim())||"12px",m=parseInt(t);return m===0?"none":m<=4?"sm":m<=8?"md":m<=16?"lg":"full"},fe=()=>({background:`linear-gradient(135deg, 
        var(--theme-content1, #FAFAFA) 20%, 
        var(--theme-content2, #F4F4F5) 10%, 
        var(--theme-content3, #F1F3F4) 20%)`,borderColor:"transparent",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",transition:"all 0.2s ease-in-out",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"}),zt=({title:s,items:t,users:m,icon:c,color:o})=>{var k;const[f,d]=r.useState(null),[h,y]=r.useState(null),A=(x,n)=>{d(x.currentTarget),y(n)},_=()=>{d(null),y(null)},I=!!f,P=I?"leave-details-popover":void 0,T=x=>{switch(x==null?void 0:x.toLowerCase()){case"approved":return e.jsx(ge,{className:"w-4 h-4 text-success"});case"rejected":return e.jsx(yt,{className:"w-4 h-4 text-danger"});default:return e.jsx(ae,{className:"w-4 h-4 text-warning"})}},R=x=>{switch(x==null?void 0:x.toLowerCase()){case"approved":return"success";case"rejected":return"danger";default:return"warning"}};return e.jsxs(V,{className:"h-full flex flex-col",radius:pe(),style:fe(),onMouseEnter:x=>{x.currentTarget.style.border=`var(--borderWidth, 2px) solid color-mix(in srgb, ${o} 50%, transparent)`,x.currentTarget.style.borderRadius="var(--borderRadius, 12px)",x.currentTarget.style.transform="scale(calc(var(--scale, 1) * 1.02))"},onMouseLeave:x=>{x.currentTarget.style.border="var(--borderWidth, 2px) solid transparent",x.currentTarget.style.transform="scale(var(--scale, 1))"},children:[e.jsx(_e,{className:"pb-2 p-4",style:{background:"transparent"},children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("div",{className:"p-2 rounded-xl flex items-center justify-center min-w-[48px] min-h-[48px] flex-shrink-0",style:{backgroundColor:`color-mix(in srgb, ${o} 15%, transparent)`,borderRadius:"var(--borderRadius, 12px)",border:`var(--borderWidth, 1px) solid color-mix(in srgb, ${o} 25%, transparent)`},children:e.jsx(c,{className:"w-6 h-6 stroke-2",style:{color:o},"aria-hidden":"true"})}),e.jsx("h2",{className:"text-lg font-bold text-foreground flex-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s})]})}),e.jsx(ve,{className:"flex-1 overflow-auto pt-0 p-4",style:{fontFamily:'var(--fontFamily, "Inter")'},children:t.map((x,n)=>e.jsxs(le.Fragment,{children:[e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,duration:.3},className:"flex justify-between items-center py-2",children:[e.jsxs("div",{className:"flex flex-col flex-1 mr-2",children:[e.jsx("p",{className:"text-sm leading-normal text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:x.text}),x.leaves&&x.leaves.length>0&&e.jsxs("p",{className:"text-xs text-default-500 flex items-center gap-1 mt-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(Ue,{className:"w-3 h-3"}),x.leaves.length," employee",x.leaves.length>1?"s":""]})]}),x.leaves&&(()=>{const l=x.leaves.filter(u=>u.leave_type===x.type);return l.length>0&&e.jsx("div",{className:"flex gap-1 flex-shrink-0",children:e.jsx(Ct,{max:4,isBordered:!0,size:"sm",children:l.map((u,g)=>{const j=m.find(b=>String(b.id)===String(u.user_id));return j&&e.jsx(Oe,{src:j.profile_image_url,name:`${j.name} - on leave`,onClick:b=>A(b,u),className:"cursor-pointer hover:scale-110 transition-transform",fallback:e.jsx(Le,{className:"w-4 h-4"})},g)})})})})()]}),n<t.length-1&&e.jsx(Ae,{style:{borderColor:"var(--theme-divider, #E4E4E7)"}})]},n))}),e.jsx(ot,{id:P,open:I,anchorEl:f,onClose:_,placement:"bottom-start",style:{borderColor:"var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:e.jsx(it,{style:{background:"var(--theme-content1, #FAFAFA)",borderColor:"var(--theme-divider, #E4E4E7)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',minWidth:"300px",padding:"16px"},children:h&&e.jsxs("section",{"aria-labelledby":"leave-details-title",children:[e.jsxs("h3",{id:"leave-details-title",className:"text-lg font-semibold flex items-center gap-2 mb-3",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(Ne,{className:"w-5 h-5 text-primary"}),"Leave Details"]}),e.jsxs("div",{id:"leave-details-content",className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-default-500 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee:"}),e.jsx("div",{className:"text-sm font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((k=m.find(x=>String(x.id)===String(h.user_id)))==null?void 0:k.name)||"Unknown"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(je,{className:"w-4 h-4 text-default-500 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Duration:"}),e.jsx("div",{className:"text-sm font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:h.from_date!==h.to_date?`${new Date(h.from_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})} - ${new Date(h.to_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`:new Date(h.from_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-default-500 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Reason:"}),e.jsx("div",{className:"text-sm font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:h.reason||"No reason provided"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[T(h.status),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Status:"}),e.jsx(oe,{label:h.status||"Pending",variant:"flat",color:R(h.status),size:"sm",className:"ml-2"})]})]})]})]})})})]})},Ht=()=>{const{auth:s}=Me().props,t=xe("(min-width: 1025px)"),m=xe("(min-width: 641px) and (max-width: 1024px)"),[c,o]=r.useState(!0),[f,d]=r.useState(null),[h,y]=r.useState([]),[A,_]=r.useState([]),[I,P]=r.useState([]),[T,R]=r.useState(null);r.useEffect(()=>{let p=!0;const w=new AbortController;return(async()=>{try{o(!0),d(null);const $=await ie.get(route("updates"),{signal:w.signal,timeout:1e4});p&&$.data&&(y($.data.users||[]),_($.data.todayLeaves||[]),P($.data.upcomingLeaves||[]),R($.data.upcomingHoliday||null))}catch($){p&&!w.signal.aborted&&(console.error("Failed to fetch updates:",$),d($.message),y([]),_([]),P([]),R(null))}finally{p&&o(!1)}})(),()=>{p=!1,w.abort()}},[]);const k=(p,w)=>{let E=w;const $=W=>w.some(B=>String(B.user_id)===String(s.user.id)&&B.leave_type===W)?(E=w.filter(B=>String(B.user_id)!==String(s.user.id)),`You ${p==="today"?"are":"will be"} on ${W} leave.`):null,C=w.reduce((W,z)=>{const B=$(z.leave_type);return B&&!W.some(te=>te.type===z.leave_type)&&W.push({text:B,type:z.leave_type}),W},[]),O=E.reduce((W,z)=>(W[z.leave_type]=(W[z.leave_type]||0)+1,W),{}),G=Object.entries(O).map(([W,z])=>({text:`${z} person${z>1?"s":""} ${p==="today"?"is":"will be"} on ${W} leave`,type:W,leaves:E.filter(B=>B.leave_type===W)}));return[...C,...G]},x=ee(),n=x.add(1,"day"),l=n.add(7,"day"),u=A.filter(p=>ee(x).isBetween(ee(p.from_date),ee(p.to_date),"day","[]")),g=I.filter(p=>ee(n).isBetween(ee(p.from_date),ee(p.to_date),"day","[]")),j=I.filter(p=>(ee(p.from_date).isBetween(n,l,"day","[]")||ee(p.to_date).isBetween(n,l,"day","[]"))&&!/week/i.test(p.leave_type)),b=k("today",u),S=k("tomorrow",g),N=k("nextSevenDays",j);b.length===0&&b.push({text:"No one is away today."}),S.length===0&&S.push({text:"No one is away tomorrow."}),N.length===0&&N.push({text:"No one is going to be away in the next seven days."});const M=[{title:"Today",items:b,icon:je,color:"#3b82f6"},{title:"Tomorrow",items:S,icon:ae,color:"#10b981"},{title:"Next Seven Days",items:N,icon:Ue,color:"#f59e0b"}];return c?e.jsx("section",{"aria-label":"Employee updates loading",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3",children:[1,2,3].map((p,w)=>e.jsx("div",{children:e.jsxs(V,{className:"w-full h-full",radius:pe(),style:fe(),children:[e.jsx(ke,{className:"rounded-lg mb-2",isLoaded:!1,children:e.jsx("div",{className:"h-6 w-2/3 rounded-lg bg-secondary"})}),e.jsx(ke,{className:"rounded-lg",isLoaded:!1,children:e.jsx("div",{className:"h-32 w-full rounded-lg bg-secondary-200"})})]})},w))})}):f?e.jsx("div",{className:`${t?"p-6":m?"p-4":"p-3"} flex items-center justify-center min-h-[200px]`,children:e.jsx(V,{radius:pe(),style:{...fe(),borderColor:"color-mix(in srgb, var(--theme-danger) 50%, transparent)",background:`linear-gradient(135deg, 
                            color-mix(in srgb, var(--theme-danger) 5%, var(--theme-content1)) 20%, 
                            color-mix(in srgb, var(--theme-danger) 3%, var(--theme-content2)) 10%, 
                            color-mix(in srgb, var(--theme-danger) 2%, var(--theme-content3)) 20%)`},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(he,{className:"w-5 h-5",style:{color:"var(--theme-danger)"}}),e.jsxs("p",{className:"text-base",style:{color:"var(--theme-danger)",fontFamily:'var(--fontFamily, "Inter")'},children:["Failed to load updates: ",f]})]})})}):e.jsxs("section",{className:"p-4","aria-label":"Employee Updates Dashboard",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 items-stretch",children:M.map((p,w)=>e.jsx("div",{className:"flex",children:e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:w*.1,duration:.3},className:"w-full",children:e.jsx("div",{className:"flex flex-col flex-grow w-full",children:e.jsx(zt,{title:p.title,items:p.items,users:h,icon:p.icon,color:p.color})})})},p.title))}),T&&e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:e.jsx("div",{className:"mt-4",children:e.jsxs(V,{radius:pe(),style:fe(),onMouseEnter:p=>{p.currentTarget.style.border="var(--borderWidth, 2px) solid color-mix(in srgb, var(--theme-warning) 50%, transparent)",p.currentTarget.style.borderRadius="var(--borderRadius, 12px)",p.currentTarget.style.transform="scale(calc(var(--scale, 1) * 1.02))"},onMouseLeave:p=>{p.currentTarget.style.border="var(--borderWidth, 2px) solid transparent",p.currentTarget.style.transform="scale(var(--scale, 1))"},children:[e.jsx(_e,{className:"pb-2 p-4",style:{background:"transparent"},children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("div",{className:"p-2 rounded-xl flex items-center justify-center min-w-[48px] min-h-[48px] flex-shrink-0",style:{backgroundColor:"color-mix(in srgb, var(--theme-warning) 15%, transparent)",borderRadius:"var(--borderRadius, 12px)",border:"var(--borderWidth, 1px) solid color-mix(in srgb, var(--theme-warning) 25%, transparent)"},children:e.jsx(vt,{className:"w-6 h-6 stroke-2",style:{color:"var(--theme-warning)"},"aria-hidden":"true"})}),e.jsx("h2",{className:"text-lg font-bold text-foreground flex-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Upcoming Holiday"})]})}),e.jsx(ve,{className:"pt-0 p-4",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-foreground flex items-center gap-1 mt-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(Fe,{className:"w-4 h-4"}),T.title]}),e.jsxs("p",{className:"text-sm text-default-500 flex items-center gap-1 mt-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(je,{className:"w-4 h-4"}),new Date(T.from_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})," - ",new Date(T.to_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),e.jsxs("p",{className:"text-sm text-default-500 flex items-center gap-1 mt-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(It,{className:"w-4 h-4"}),T.description]})]})})})]})})})]})},Gt=({title:s,value:t,icon:m,color:c,isLoaded:o,testId:f})=>e.jsx(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"h-full w-full",children:e.jsx(V,{className:"h-full w-full transition-all duration-200 cursor-pointer shadow-lg",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},onMouseEnter:d=>{d.currentTarget.style.border=`var(--borderWidth, 2px) solid color-mix(in srgb, ${c} 50%, transparent)`,d.currentTarget.style.borderRadius="var(--borderRadius, 12px)",d.currentTarget.style.transform="scale(calc(var(--scale, 1) * 1.02))"},onMouseLeave:d=>{d.currentTarget.style.border="var(--borderWidth, 2px) solid transparent",d.currentTarget.style.transform="scale(var(--scale, 1))"},children:e.jsx("div",{className:"p-4 h-full w-full flex flex-col",children:e.jsx(ke,{className:"rounded-lg",isLoaded:o,"data-testid":f,style:{borderRadius:"var(--borderRadius, 8px)"},children:e.jsxs("div",{className:"flex flex-col gap-2 h-full",role:"region","aria-label":`${s} statistics`,style:{fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-xs font-medium text-default-500 leading-tight flex-1 mr-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s}),e.jsx("div",{className:"flex items-center justify-center min-w-[40px] sm:min-w-[48px] min-h-[40px] sm:min-h-[48px] flex-shrink-0",style:{backgroundColor:`color-mix(in srgb, ${c} 15%, transparent)`,borderRadius:"var(--borderRadius, 12px)",border:`var(--borderWidth, 1px) solid color-mix(in srgb, ${c} 25%, transparent)`},children:e.jsx(m,{className:"w-6 h-6 stroke-2",style:{color:c},"aria-hidden":"true"})})]}),e.jsx("div",{className:"mt-auto",children:e.jsx("div",{className:"text-2xl font-bold text-foreground leading-none","aria-live":"polite",style:{fontFamily:'var(--fontFamily, "Inter")'},children:typeof t=="number"?t.toLocaleString():t})})]})})})})}),Vt=()=>{const[s,t]=r.useState({total:0,completed:0,pending:0,rfi_submissions:0}),[m,c]=r.useState(!0),[o,f]=r.useState(null);r.useEffect(()=>{let h=!0;const y=new AbortController;return(async()=>{var _;try{c(!0),f(null);const I=await ie.get(route("stats"),{signal:y.signal,timeout:1e4});if(h&&((_=I.data)!=null&&_.statistics))t(I.data.statistics);else throw new Error("Invalid response structure")}catch(I){h&&!y.signal.aborted&&(console.error("Failed to fetch statistics:",I),f(I.message),t({total:0,completed:0,pending:0,rfi_submissions:0}))}finally{h&&c(!1)}})(),()=>{h=!1,y.abort()}},[]);const d=[{id:"total-daily-works",title:"Total Daily Works",value:s.total,icon:bt,color:"var(--theme-primary, #006FEE)",testId:"stat-total-works"},{id:"completed-daily-works",title:"Completed Daily Works",value:s.completed,icon:ge,color:"var(--theme-success, #17C964)",testId:"stat-completed-works"},{id:"pending-daily-works",title:"Pending Daily Works",value:s.pending,icon:ae,color:"var(--theme-warning, #F5A524)",testId:"stat-pending-works"},{id:"rfi-submissions",title:"RFI Submissions",value:s.rfi_submissions,icon:Ne,color:"var(--theme-secondary, #7C3AED)",testId:"stat-rfi-submissions"}];return o?e.jsx("div",{className:"flex flex-col w-full h-full p-4",children:e.jsx("div",{className:"flex-grow h-full flex items-center justify-center",children:e.jsx(V,{className:"p-4 transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-danger, #F31260) 10%, transparent)",borderColor:"color-mix(in srgb, var(--theme-danger, #F31260) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:e.jsxs("p",{className:"text-base",style:{color:"var(--theme-danger, #F31260)"},children:["Failed to load statistics: ",o]})})})}):e.jsx("div",{className:"flex flex-col w-full h-full p-4",children:e.jsx("section",{className:"h-full w-full","aria-label":"Statistics Dashboard",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 h-full max-w-full",children:d.map((h,y)=>e.jsx("div",{className:"w-full",children:e.jsx(Gt,{title:h.title,value:h.value,icon:h.icon,color:h.color,isLoaded:!m,testId:h.testId})},h.id))})})})},Bt=(s,t)=>{let m;return function(...o){const f=()=>{clearTimeout(m),s(...o)};clearTimeout(m),m=setTimeout(f,t)}},Zt=()=>{const[s,t]=r.useState({isMobile:!1,isTablet:!1,isDesktop:!1}),m=r.useCallback(()=>{const c=window.innerWidth,o={isMobile:c<=768,isTablet:c>768&&c<=1024,isDesktop:c>1024};t(f=>JSON.stringify(f)!==JSON.stringify(o)?o:f)},[]);return r.useEffect(()=>{m();const c=Bt(m,150);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[m]),s},U={CHECKING:"checking",ACTIVE:"active",DENIED:"denied",INACTIVE:"inactive"},Ve=le.memo(()=>{var te;const{auth:s}=Me().props,t=s.user,{isMobile:m,isTablet:c}=Zt(),[o,f]=r.useState({currentStatus:null,todayPunches:[],totalWorkTime:"00:00:00",realtimeWorkTime:"00:00:00",userOnLeave:null,loading:!1,lastRefresh:null}),[d,h]=r.useState({status:U.CHECKING,coordinates:null,error:null,lastUpdate:null}),[y,A]=r.useState({sessionDialogOpen:!1,expandedSections:{punches:!1,stats:!1,validation:!1}}),[_,I]=r.useState({currentTime:new Date,connectionStatus:{network:!0,device:!0},sessionInfo:{ip:"Unknown",accuracy:"N/A",timestamp:null}}),[P,T]=r.useState({isOpen:!1,capturedPhoto:null,isCapturing:!1,stream:null,pendingPunchData:null}),R=r.useRef(null),k=r.useRef(null),x=r.useMemo(()=>{const a=t==null?void 0:t.attendance_type;if(!(a!=null&&a.slug))return!1;const i=a.slug.replace(/_\d+$/,"");return["geo_polygon","route_waypoint"].includes(i)},[t==null?void 0:t.attendance_type]),n=r.useCallback(()=>new Promise((a,i)=>{if(!navigator.geolocation){i(new Error("Geolocation is not supported by this browser"));return}const v={enableHighAccuracy:!0,timeout:15e3,maximumAge:3e4};navigator.geolocation.getCurrentPosition(F=>{const H={latitude:F.coords.latitude,longitude:F.coords.longitude,accuracy:F.coords.accuracy,timestamp:new Date(F.timestamp)};a(H)},F=>{let H="Location unavailable";switch(F.code){case 1:H="Location access denied. Please allow location permission in your browser settings.";break;case 2:H="Location unavailable. Please ensure GPS is enabled.";break;case 3:H="Location request timed out. Please try again.";break;default:H="Unable to retrieve location. Please try again."}i(new Error(H))},v)}),[]),l=r.useCallback(async()=>{h(a=>({...a,status:U.CHECKING,error:null}));try{const a=await n();h({status:U.ACTIVE,coordinates:a,error:null,lastUpdate:new Date})}catch(a){const i=a.message.includes("denied")||a.message.includes("Permission");h({status:i?U.DENIED:U.INACTIVE,coordinates:null,error:a.message,lastUpdate:new Date})}},[n]),u=r.useCallback(async()=>{if(d.status===U.DENIED)try{h(i=>({...i,status:U.CHECKING,error:null}));const a=await n();h({status:U.ACTIVE,coordinates:a,error:null,lastUpdate:new Date}),X.success("Location access granted successfully!",{style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-success)",color:"var(--theme-success-foreground)"}})}catch{h(i=>({...i,status:U.DENIED,error:"Location access still denied. Please check your browser settings."})),X.error("Please enable location in your browser settings manually.",{style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-danger)",color:"var(--theme-danger-foreground)"}})}},[d.status,n]),g=r.useMemo(()=>{if(o.userOnLeave)return{color:"warning",text:"On Leave",action:"On Leave",icon:e.jsx(he,{className:"w-4 h-4"})};switch(o.currentStatus){case"punched_in":return{color:"success",text:"Checked In",action:"Check Out",icon:e.jsx(Tt,{className:"w-4 h-4"})};case"punched_out":return{color:"primary",text:"Checked Out",action:"Check In",icon:e.jsx(Lt,{className:"w-4 h-4"})};default:return{color:"primary",text:"Ready to Check In",action:"Check In",icon:e.jsx(ae,{className:"w-4 h-4"})}}},[o.currentStatus,o.userOnLeave]),j=r.useMemo(()=>({sessionsToday:o.todayPunches.length,averageSessionTime:o.todayPunches.length>0?Math.round(parseFloat(o.realtimeWorkTime.split(":")[0])/o.todayPunches.length*100)/100:0,productivity:Math.min(100,parseFloat(o.realtimeWorkTime.split(":")[0])/8*100)}),[o.todayPunches,o.realtimeWorkTime]),b=r.useMemo(()=>{var a;switch(d.status){case U.CHECKING:return{color:"default",variant:"flat",text:"Checking",clickable:!1,tooltip:"Checking location permissions..."};case U.ACTIVE:return{color:"success",variant:"flat",text:"GPS",clickable:!1,tooltip:`Location: Active (¬±${Math.round(((a=d.coordinates)==null?void 0:a.accuracy)||0)}m)`};case U.DENIED:return{color:"danger",variant:"bordered",text:"GPS",clickable:!0,tooltip:"Location access denied. Click to retry."};case U.INACTIVE:return{color:"warning",variant:"bordered",text:"GPS",clickable:!0,tooltip:"Location unavailable. Click to retry."};default:return{color:"default",variant:"flat",text:"GPS",clickable:!1,tooltip:"Location status unknown"}}},[d.status,(te=d.coordinates)==null?void 0:te.accuracy]),S=r.useCallback(()=>{const a=new Date;let i=0,v=!1;if(o.todayPunches.forEach(D=>{if(D.punchin_time){let se;try{if(se=new Date(D.punchin_time),isNaN(se.getTime())||typeof D.punchin_time=="string"&&D.punchin_time.includes(":")&&!D.punchin_time.includes("T")){const J=new Date,[de,ne,ye]=D.punchin_time.split(":");se=new Date(J.getFullYear(),J.getMonth(),J.getDate(),parseInt(de),parseInt(ne),parseInt(ye||0))}}catch{console.warn("Invalid punch in time format:",D.punchin_time);return}if(isNaN(se.getTime()))return;if(D.punchout_time){let J;try{if(J=new Date(D.punchout_time),isNaN(J.getTime())||typeof D.punchout_time=="string"&&D.punchout_time.includes(":")&&!D.punchout_time.includes("T")){const ne=new Date,[ye,Be,Ze]=D.punchout_time.split(":");J=new Date(ne.getFullYear(),ne.getMonth(),ne.getDate(),parseInt(ye),parseInt(Be),parseInt(Ze||0))}}catch{console.warn("Invalid punch out time format:",D.punchout_time);return}if(isNaN(J.getTime()))return;const de=Math.floor((J-se)/1e3);de>0&&(i+=de)}else{v=!0;const J=Math.floor((a-se)/1e3);J>0&&(i+=J)}}}),!v&&o.totalWorkTime&&o.totalWorkTime!=="00:00:00"){f(D=>({...D,realtimeWorkTime:o.totalWorkTime}));return}(isNaN(i)||i<0)&&(i=0);const F=Math.floor(i/3600),H=Math.floor(i%3600/60),Q=i%60,ce=`${F.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`;f(D=>({...D,realtimeWorkTime:ce}))},[o.todayPunches,o.totalWorkTime]),N=r.useCallback(async()=>{try{const i=(await ie.get(route("attendance.current-user-punch"),{params:{t:Date.now()}})).data;f(v=>({...v,todayPunches:i.punches||[],totalWorkTime:i.total_production_time||"00:00:00",realtimeWorkTime:i.total_production_time||"00:00:00",userOnLeave:i.isUserOnLeave,lastRefresh:new Date,currentStatus:i.punches&&i.punches.length>0?i.punches[i.punches.length-1].punchout_time?"punched_out":"punched_in":"not_punched"}))}catch(a){console.error("Error fetching current status:",a),X.error("Failed to fetch attendance status")}},[]),M=r.useCallback(()=>{const a=document.createElement("canvas"),i=a.getContext("2d");return i.textBaseline="top",i.font="14px Arial",i.fillText("Device fingerprint",2,2),{userAgent:navigator.userAgent,screen:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,canvasFingerprint:a.toDataURL(),timestamp:Date.now()}},[]),p=r.useCallback(async()=>{try{const a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});R.current&&(R.current.srcObject=a,await R.current.play()),T(i=>({...i,stream:a,isCapturing:!1}))}catch(a){console.error("Camera access error:",a),X.error("Unable to access camera. Please check permissions."),T(i=>({...i,isOpen:!1}))}},[]),w=r.useCallback(()=>{P.stream&&P.stream.getTracks().forEach(a=>a.stop()),T(a=>({...a,stream:null,isOpen:!1,capturedPhoto:null}))},[P.stream]),E=r.useCallback(async()=>{if(!(!R.current||!k.current)){T(a=>({...a,isCapturing:!0}));try{const a=R.current,i=k.current,v=i.getContext("2d");i.width=a.videoWidth,i.height=a.videoHeight,v.drawImage(a,0,0);const F=d.coordinates;if(F){const Q=`üìç ${F.latitude.toFixed(6)}, ${F.longitude.toFixed(6)} | ${new Date().toLocaleString()}`;v.fillStyle="rgba(0, 0, 0, 0.7)",v.fillRect(0,i.height-40,i.width,40),v.fillStyle="#ffffff",v.font="bold 16px Arial",v.textBaseline="middle",v.fillText(Q,10,i.height-20)}const H=i.toDataURL("image/jpeg",.85);T(Q=>({...Q,capturedPhoto:H,isCapturing:!1})),X.success("Photo captured successfully!")}catch(a){console.error("Photo capture error:",a),X.error("Failed to capture photo. Please try again."),T(i=>({...i,isCapturing:!1}))}}},[d.coordinates]),$=r.useCallback(()=>{T(a=>({...a,capturedPhoto:null}))},[]),C=r.useCallback(async()=>{var a,i;if(!P.capturedPhoto||!P.pendingPunchData){X.error("Please capture a photo first.");return}f(v=>({...v,loading:!0})),w();try{const v={...P.pendingPunchData,photo:P.capturedPhoto},F=await ie.post(route("attendance.punch"),v);F.data.status==="success"?(A(H=>({...H,sessionDialogOpen:!0})),setTimeout(()=>{N()},500)):X.error(F.data.message)}catch(v){console.error("Punch operation failed:",v);const F=((i=(a=v.response)==null?void 0:a.data)==null?void 0:i.message)||"Unable to record attendance. Please try again.";X.error(F)}finally{f(v=>({...v,loading:!1})),T(v=>({...v,pendingPunchData:null,capturedPhoto:null}))}},[P.capturedPhoto,P.pendingPunchData,w,N]),O=r.useCallback(async a=>{T(i=>({...i,isOpen:!0,pendingPunchData:a,capturedPhoto:null})),setTimeout(()=>p(),300)},[p]),G=r.useCallback(async()=>{var a,i;if(o.userOnLeave){X.warning("You are on leave today. Cannot punch in/out.");return}if(d.status!==U.ACTIVE){X.error("Location access required for attendance. Please enable GPS and try again.");return}f(v=>({...v,loading:!0}));try{const v=await n(),F=M();let H="Unknown";try{H=(await ie.get(route("getClientIp"))).data.ip}catch(D){console.warn("Could not fetch IP address:",D)}I(D=>({...D,sessionInfo:{ip:H,accuracy:v.accuracy?`${Math.round(v.accuracy)}m`:"N/A",timestamp:new Date().toLocaleString()}}));const Q={lat:v.latitude,lng:v.longitude,accuracy:v.accuracy,ip:H,wifi_ssid:"Unknown",device_fingerprint:JSON.stringify(F),user_agent:navigator.userAgent,timestamp:new Date().toISOString()};if(x){f(D=>({...D,loading:!1})),O(Q);return}const ce=await ie.post(route("attendance.punch"),Q);ce.data.status==="success"?(A(D=>({...D,sessionDialogOpen:!0})),setTimeout(()=>{N()},500)):X.error(ce.data.message)}catch(v){console.error("Punch operation failed:",v);const F=((i=(a=v.response)==null?void 0:a.data)==null?void 0:i.message)||"Unable to record attendance. Please try again.";X.error(F,{style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-danger)",color:"var(--theme-danger-foreground)"}})}finally{f(v=>({...v,loading:!1}))}},[o.userOnLeave,d.status,n,M,N,x,O]),W=r.useCallback(()=>{b.clickable&&(d.status===U.DENIED?u():d.status===U.INACTIVE&&l())},[b.clickable,d.status,u,l]),z=r.useCallback(a=>{if(!a)return"--:--";try{let i;if(typeof a=="string"&&a.includes(":")&&!a.includes("T")){const v=new Date,[F,H,Q]=a.split(":");i=new Date(v.getFullYear(),v.getMonth(),v.getDate(),parseInt(F),parseInt(H),parseInt(Q||0))}else i=new Date(a);return isNaN(i.getTime())?"--:--":i.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"})}catch{return"--:--"}},[]),B=r.useCallback(a=>{var i,v;if(!a)return"Location not available";try{if(typeof a=="object"&&a.lat&&a.lng)return(i=a.address)!=null&&i.trim()?a.address.substring(0,30):`${a.lat.toFixed(4)}, ${a.lng.toFixed(4)}`;if(typeof a=="string")try{const F=JSON.parse(a);if(F.lat&&F.lng)return(v=F.address)!=null&&v.trim()?F.address.substring(0,30):`${F.lat.toFixed(4)}, ${F.lng.toFixed(4)}`}catch{return a.substring(0,30)}return"Location not available"}catch{return"Location not available"}},[]);return r.useEffect(()=>{const a=setInterval(()=>{I(i=>({...i,currentTime:new Date})),o.currentStatus==="punched_in"&&o.todayPunches.length>0&&S()},1e3);return()=>clearInterval(a)},[o.currentStatus,o.todayPunches.length,S]),r.useEffect(()=>{N(),l();const a=()=>{I(F=>({...F,connectionStatus:{...F.connectionStatus,network:!0}})),N()},i=()=>{I(F=>({...F,connectionStatus:{...F.connectionStatus,network:!1}}))},v=()=>{N(),l()};return window.addEventListener("online",a),window.addEventListener("offline",i),window.addEventListener("focus",v),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i),window.removeEventListener("focus",v)}},[N,l]),r.useEffect(()=>{const a=setInterval(()=>{N()},3e4);return()=>clearInterval(a)},[N]),e.jsxs("div",{className:"flex flex-col w-full h-full p-4",children:[e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col h-full",children:e.jsx(V,{className:"flex flex-col h-full backdrop-blur-md",style:{background:`linear-gradient(to bottom right, 
                            var(--theme-content1, #FAFAFA) 20%, 
                            var(--theme-content2, #F4F4F5) 10%, 
                            var(--theme-content3, #F1F3F4) 20%)`,borderColor:"var(--theme-divider, #E4E4E7)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')",opacity:o.loading?"var(--disabledOpacity, 0.5)":"1"},children:e.jsxs(ve,{className:"flex flex-col flex-1 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx(lt,{content:"",color:g.color,placement:"bottom-right",shape:"circle",className:"border-2 border-white",children:e.jsx(ct,{src:(t==null?void 0:t.profile_image_url)||(t==null?void 0:t.profile_image),name:t==null?void 0:t.name,className:"w-12 h-12"})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm truncate notranslate",style:{color:"var(--theme-foreground)"},"data-name":"true",children:t==null?void 0:t.name}),e.jsxs("p",{className:"text-xs notranslate",style:{color:"var(--theme-foreground-600)"},"data-no-translate":"true",children:["ID: ",(t==null?void 0:t.employee_id)||(t==null?void 0:t.id)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-light leading-none",style:{background:"linear-gradient(135deg, var(--theme-primary), var(--theme-secondary))",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:_.currentTime.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}),e.jsx("div",{className:"text-xs",style:{color:"var(--theme-foreground-600)"},children:_.currentTime.toLocaleDateString("en-US",{weekday:"short",day:"numeric"})})]})]}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(oe,{color:g.color,variant:"flat",startContent:g.icon,className:"px-4 py-2 font-semibold text-sm",style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:g.text})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs(V,{className:"p-3 text-center",style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:[e.jsx(ae,{className:"w-5 h-5 mx-auto mb-1",style:{color:"var(--theme-primary)"}}),e.jsx("div",{className:"text-sm font-bold font-mono tracking-wide",style:{color:"var(--theme-primary)"},children:o.realtimeWorkTime}),e.jsx("div",{className:"text-xs",style:{color:"var(--theme-foreground-600)"},children:"Hours Today"})]}),e.jsxs(V,{className:"p-3 text-center",style:{background:"color-mix(in srgb, var(--theme-secondary) 10%, transparent)",borderColor:"color-mix(in srgb, var(--theme-secondary) 20%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:[e.jsx(dt,{className:"w-5 h-5 mx-auto mb-1",style:{color:"var(--theme-secondary)"}}),e.jsx("div",{className:"text-sm font-bold",style:{color:"var(--theme-secondary)"},children:j.sessionsToday}),e.jsx("div",{className:"text-xs",style:{color:"var(--theme-foreground-600)"},children:"Sessions"})]})]}),e.jsx(re,{color:g.color,variant:"shadow",size:"lg",fullWidth:!0,onPress:G,isDisabled:o.loading||o.userOnLeave||d.status!==U.ACTIVE,isLoading:o.loading,startContent:!o.loading&&g.icon,className:"mb-4 font-semibold",style:{background:o.userOnLeave||d.status!==U.ACTIVE?"var(--theme-default, #71717A)":g.color==="primary"?"linear-gradient(135deg, var(--theme-primary, #006FEE), var(--theme-primary-600, #005BC4))":g.color==="success"?"linear-gradient(135deg, var(--theme-success, #17C964), var(--theme-success-600, #12A150))":g.color==="warning"?"linear-gradient(135deg, var(--theme-warning, #F5A524), var(--theme-warning-600, #C4841D))":"linear-gradient(135deg, var(--theme-primary, #006FEE), var(--theme-primary-600, #005BC4))",color:"white",borderRadius:"var(--borderRadius, 8px)",borderWidth:"var(--borderWidth, 2px)",fontFamily:"var(--fontFamily, 'Inter')",opacity:o.loading||o.userOnLeave||d.status!==U.ACTIVE?"var(--disabledOpacity, 0.5)":"1"},children:o.loading?"Processing...":g.action}),e.jsxs("div",{className:"flex justify-center gap-2 mb-4",children:[e.jsx(be,{content:b.tooltip,children:e.jsx(oe,{size:"sm",variant:b.variant,color:b.color,startContent:d.status===U.CHECKING?e.jsx(we,{size:"sm",className:"w-3 h-3"}):e.jsx(ue,{className:"w-3 h-3"}),className:`text-xs transition-all ${b.clickable?"cursor-pointer hover:scale-105":""}`,style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},onClick:b.clickable?W:void 0,children:b.text})}),e.jsx(be,{content:`Network: ${_.connectionStatus.network?"Online":"Offline"}`,children:e.jsx(oe,{size:"sm",variant:"flat",color:_.connectionStatus.network?"success":"default",startContent:e.jsx(jt,{className:"w-3 h-3"}),className:"text-xs",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:"Net"})}),e.jsx(be,{content:"Device Security",children:e.jsx(oe,{size:"sm",variant:"flat",color:"success",startContent:e.jsx(Nt,{className:"w-3 h-3"}),className:"text-xs",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:"Secure"})})]}),d.error&&d.status!==U.ACTIVE&&e.jsx(V,{className:"p-3 mb-4",style:{background:"color-mix(in srgb, var(--theme-danger) 10%, transparent)",borderColor:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",borderWidth:"var(--borderWidth, 1px)",borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(he,{className:"w-4 h-4 mt-0.5 flex-shrink-0",style:{color:"var(--theme-danger)"}}),e.jsx("div",{className:"text-xs",style:{color:"var(--theme-danger-foreground)"},children:d.error})]})}),o.userOnLeave&&e.jsx(V,{className:"p-3 mb-4",style:{background:"color-mix(in srgb, var(--theme-warning) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-warning) 30%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5",style:{color:"var(--theme-warning)"}}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-sm",style:{color:"var(--theme-warning-foreground)"},children:["On ",o.userOnLeave.leave_type," Leave"]}),e.jsxs("div",{className:"text-xs",style:{color:"var(--theme-warning-foreground-600)"},children:[new Date(o.userOnLeave.from_date).toLocaleDateString()," - ",new Date(o.userOnLeave.to_date).toLocaleDateString()]})]})]})}),e.jsx("div",{className:"border-t border-divider",children:e.jsx(Ye,{children:e.jsx(Qe,{"aria-label":"Today's Activity",startContent:e.jsx(wt,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}}),title:e.jsx("span",{className:"font-semibold text-sm",style:{color:"var(--theme-foreground)"},children:"Today's Activity"}),subtitle:e.jsxs("span",{className:"text-xs",style:{color:"var(--theme-foreground-600)"},children:[j.sessionsToday," sessions ‚Ä¢ ",o.realtimeWorkTime]}),children:e.jsx("div",{className:"space-y-2",children:o.todayPunches.length>0?o.todayPunches.map((a,i)=>e.jsx(V,{className:"p-3",style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-success",style:{backgroundColor:"var(--theme-success)"}}),e.jsx("span",{className:"text-xs font-semibold",style:{color:"var(--theme-success)"},children:"Check In"})]}),e.jsxs("div",{className:"pl-4 space-y-1",children:[e.jsx("div",{className:"text-sm font-mono font-medium",style:{color:"var(--theme-foreground)"},children:z(a.punchin_time)}),e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx(ue,{className:"w-3 h-3 mt-0.5 flex-shrink-0",style:{color:"var(--theme-foreground-500)"}}),e.jsx("span",{className:"text-xs leading-tight",style:{color:"var(--theme-foreground-600)"},children:B(a.punchin_location)})]})]})]}),a.punchout_time?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"var(--theme-primary)"}}),e.jsx("span",{className:"text-xs font-semibold",style:{color:"var(--theme-primary)"},children:"Check Out"})]}),e.jsxs("div",{className:"pl-4 space-y-1",children:[e.jsx("div",{className:"text-sm font-mono font-medium",style:{color:"var(--theme-foreground)"},children:z(a.punchout_time)}),e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx(ue,{className:"w-3 h-3 mt-0.5 flex-shrink-0",style:{color:"var(--theme-foreground-500)"}}),e.jsx("span",{className:"text-xs leading-tight",style:{color:"var(--theme-foreground-600)"},children:B(a.punchout_location)})]})]})]}):e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full border-2",style:{borderColor:"var(--theme-warning)"}}),e.jsx("span",{className:"text-xs font-semibold",style:{color:"var(--theme-warning)"},children:"Active Session"})]}),e.jsxs("div",{className:"pl-4 space-y-1",children:[e.jsx("div",{className:"text-sm font-mono font-medium",style:{color:"var(--theme-warning)"},children:"--:--"}),e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx(ae,{className:"w-3 h-3 mt-0.5 flex-shrink-0",style:{color:"var(--theme-warning)"}}),e.jsx("span",{className:"text-xs leading-tight",style:{color:"var(--theme-warning-600)"},children:"In progress"})]})]})]})]})}),a.duration&&e.jsx(oe,{size:"sm",color:"primary",variant:"flat",className:"text-xs",children:a.duration})]})},i)):e.jsxs(V,{className:"p-4 text-center",style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:[e.jsx(Fe,{className:"w-8 h-8 mx-auto mb-2",style:{color:"var(--theme-primary)"}}),e.jsx("div",{className:"text-sm",style:{color:"var(--theme-foreground-600)"},children:"No activity recorded today"})]})})},"activity")})})]})})}),e.jsx(Se,{isOpen:y.sessionDialogOpen,onOpenChange:a=>A(i=>({...i,sessionDialogOpen:a})),size:"sm",backdrop:"blur",classNames:{backdrop:"backdrop-blur-md",base:"border border-default-200",header:"border-b-[1px] border-divider",footer:"border-t-[1px] border-divider"},style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:e.jsx(Pe,{children:a=>e.jsxs(e.Fragment,{children:[e.jsxs(Te,{className:"flex flex-col gap-1 text-center",children:[e.jsx(ge,{className:"w-8 h-8 mx-auto mb-2",style:{color:"var(--theme-success)"}}),e.jsx("h3",{className:"font-bold text-lg",children:"Attendance Recorded"}),e.jsx("p",{className:"text-sm font-normal opacity-70",children:"Your attendance has been successfully captured"})]}),e.jsxs(Re,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(V,{className:"p-3 text-center",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:[e.jsx(Ft,{className:"w-6 h-6 mx-auto mb-2",style:{color:"var(--theme-primary)"}}),e.jsx("div",{className:"text-sm font-semibold",style:{color:"var(--theme-primary)"},children:_.sessionInfo.ip}),e.jsx("div",{className:"text-xs",style:{color:"var(--theme-foreground-600)"},children:"IP Address"})]}),e.jsxs(V,{className:"p-3 text-center",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:[e.jsx(ue,{className:"w-6 h-6 mx-auto mb-2",style:{color:"var(--theme-success)"}}),e.jsx("div",{className:"text-sm font-semibold",style:{color:"var(--theme-success)"},children:_.sessionInfo.accuracy}),e.jsx("div",{className:"text-xs",style:{color:"var(--theme-foreground-600)"},children:"GPS Accuracy"})]})]}),e.jsx(V,{className:"p-3 mt-4",style:{background:"color-mix(in srgb, var(--theme-success) 10%, transparent)",borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsxs("span",{children:["Recorded at: ",_.sessionInfo.timestamp]})]})})]}),e.jsx(Ee,{children:e.jsx(re,{color:"primary",variant:"shadow",fullWidth:!0,onPress:a,className:"font-semibold",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:"var(--fontFamily, 'Inter')"},children:"Continue"})})]})})}),e.jsx(Se,{isOpen:P.isOpen,onClose:w,size:"lg",classNames:{backdrop:"bg-black/80",base:"bg-content1"},style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:"var(--fontFamily, 'Inter')"},children:e.jsxs(Pe,{children:[e.jsxs(Te,{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:"Capture Attendance Photo"})]}),e.jsx("p",{className:"text-sm text-default-500 font-normal",children:"Take a photo for verification. Location coordinates will be added automatically."})]}),e.jsxs(Re,{className:"p-4",children:[e.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-black",children:[P.capturedPhoto?e.jsx("img",{src:P.capturedPhoto,alt:"Captured",className:"w-full h-auto max-h-[400px] object-contain"}):e.jsx("video",{ref:R,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto max-h-[400px] object-contain"}),e.jsx("canvas",{ref:k,className:"hidden"}),d.coordinates&&e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 text-white text-xs",style:{background:"rgba(0,0,0,0.7)"},children:["üìç ",d.coordinates.latitude.toFixed(6),", ",d.coordinates.longitude.toFixed(6)]})]}),e.jsx("div",{className:"mt-3 p-3 rounded-lg text-sm",style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-primary"}),P.capturedPhoto?"Review your photo. You can retake if needed.":"Position yourself clearly in the frame and capture the photo."]})})]}),e.jsxs(Ee,{className:"flex gap-2",children:[e.jsx(re,{color:"danger",variant:"light",onPress:w,style:{fontFamily:"var(--fontFamily, 'Inter')"},children:"Cancel"}),P.capturedPhoto?e.jsxs(e.Fragment,{children:[e.jsx(re,{color:"secondary",variant:"flat",onPress:$,startContent:e.jsx(et,{className:"w-4 h-4"}),style:{fontFamily:"var(--fontFamily, 'Inter')"},children:"Retake"}),e.jsxs(re,{color:"success",variant:"shadow",onPress:C,isLoading:o.loading,startContent:!o.loading&&e.jsx(ge,{className:"w-4 h-4"}),style:{fontFamily:"var(--fontFamily, 'Inter')"},children:["Confirm & ",g.action]})]}):e.jsx(re,{color:"primary",variant:"shadow",onPress:E,isLoading:P.isCapturing,isDisabled:!P.stream,startContent:!P.isCapturing&&e.jsx($e,{className:"w-4 h-4"}),style:{fontFamily:"var(--fontFamily, 'Inter')"},children:"Capture Photo"})]})]})})]})});Ve.displayName="PunchStatusCard";function qt({auth:s}){const[t,m]=r.useState(!1),[c,o]=r.useState(!1),[f,d]=r.useState(new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Dhaka",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date)),h={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.6,staggerChildren:.1,ease:"easeOut"}}},y={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:"easeOut"}}},A={hidden:{opacity:0,y:30,scale:.9},visible:k=>({opacity:1,y:0,scale:1,transition:{duration:.6,delay:k*.15,ease:"easeOut"}})},_=k=>s.permissions&&s.permissions.includes(k),I=k=>k.some(x=>_(x)),P=k=>k.every(x=>_(x)),T=()=>{m(k=>!k),o(k=>!k)},R=k=>{const x=k.target.value;d(new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Dhaka",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(x))),o(n=>!n),m(n=>!n)};return e.jsxs(e.Fragment,{children:[e.jsx(tt,{title:"Dashboard"}),e.jsx(K.div,{variants:h,initial:"hidden",animate:"visible",children:e.jsxs("div",{className:"w-full",children:[e.jsx(K.div,{variants:y,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[P(["attendance.own.punch","attendance.own.view"])&&e.jsx("div",{className:"h-full",children:e.jsx(K.div,{variants:A,custom:0,whileHover:{scale:1.01,transition:{duration:.2}},className:"h-full",children:e.jsx(Ve,{handlePunchSuccess:T})},"punch-status-card")},"punch-status-grid"),_("core.dashboard.view")&&e.jsx("div",{className:"h-full",children:e.jsx(K.div,{variants:A,custom:1,whileHover:{scale:1.01,transition:{duration:.2}},className:"h-full",children:e.jsx(Vt,{})},"statistics-card")},"statistics-grid")]})},"main-grid"),I(["attendance.view","employees.view"])&&e.jsxs(K.div,{variants:h,initial:"hidden",animate:"visible",children:[e.jsx(K.div,{variants:A,custom:2,children:e.jsx(rt,{selectedDate:f,handleDateChange:R,updateTimeSheet:c})},"timesheet-section"),e.jsx(K.div,{variants:A,custom:3,children:e.jsx(Ut,{selectedDate:f,updateMap:t})},"user-locations-section")]}),_("core.updates.view")&&e.jsx(K.div,{variants:A,custom:4,initial:"hidden",animate:"visible",children:e.jsx(Ht,{})},"updates-section")]})})]})}qt.layout=s=>e.jsx(ut,{children:s});export{qt as default};
