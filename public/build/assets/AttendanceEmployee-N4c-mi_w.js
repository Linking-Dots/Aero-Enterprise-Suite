import{R as $,f as W,g as E,r as a,a as C,j as e,H as I,d as x,e as f}from"./app-DVP_m8h7.js";import{g,h as d,e as y,A as T}from"./App-pkq0eXyk.js";import{S as L}from"./StatsCards-BxBddKNK.js";import{T as B}from"./TimeSheetTable-x6hMAF3S.js";import{F as H}from"./CheckCircleIcon-BkiSCmd_.js";import{F as _}from"./XCircleIcon-Cpn7u5Q-.js";import{F as P}from"./ExclamationTriangleIcon-D2qoBr5-.js";import{F as Y}from"./ChartBarIcon-CenWUbeF.js";import{F as z}from"./UserIcon-SndiMFUs.js";import{m as V}from"./proxy-BomxYwOG.js";import{F as O}from"./PresentationChartLineIcon-Cm0rjYsM.js";import{i as U}from"./chunk-SSA7SXE4-C5QhRsCJ.js";import"./react-toastify.esm-11ySLd55.js";import"./EnvelopeIcon-CCl31SqK.js";import"./ShieldCheckIcon-CAzrY1qb.js";import"./KeyIcon-ClouCyVq.js";import"./logo-D1JCVLgz.js";import"./features-animation-DPmZMQ5S.js";import"./create-visual-element-DRYypj6G.js";import"./dayjs.min-Y9dspzXh.js";import"./PageHeader-BUuKVLC7.js";import"./UserPlusIcon-eYl6hwUP.js";import"./DocumentArrowDownIcon-BwWTOcN6.js";import"./chunk-JOT4BT4P-C5Izt6LX.js";import"./chunk-TLYTI3QM-D0ZS13cM.js";import"./chunk-F3UDT23P-bTe2Vr3o.js";import"./chunk-XJ2YRSUP-ot1Ib-Dn.js";import"./useToggleState-DUQRr0AO.js";import"./index-Jgrs7YXA.js";import"./chunk-YRZGWF2W-OOeD0y1O.js";import"./chunk-TSPNSPCL-apcFqiC2.js";import"./chunk-EAPQ7RWQ-BA9qruv0.js";import"./chunk-S574QCAN-dtvn5DCJ.js";const q=$.memo(({title:c,totalWorkingDays:G,presentDays:J,absentDays:K,lateArrivals:Q})=>{const{auth:X}=W().props,{isDark:Z}=E(),[ee,v]=a.useState(!1),[te,b]=a.useState(!1),[o,w]=a.useState(!1),[l,F]=a.useState(!1);a.useEffect(()=>{const t=()=>{v(window.innerWidth<640),b(window.innerWidth<768),w(window.innerWidth>=1025),F(window.innerWidth>=641&&window.innerWidth<=1024)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const j=()=>{var p;if(typeof window>"u")return"lg";const i=((p=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:p.trim())||"12px",r=parseInt(i);return r===0?"none":r<=4?"sm":r<=8?"md":r<=16?"lg":"full"},[m,S]=a.useState(new Date),[D,u]=a.useState(!1),[ae,re]=a.useState(!1),[n,N]=a.useState({currentMonth:new Date().toISOString().slice(0,7)}),[s,M]=a.useState({totalWorkingDays:0,totalDaysInMonth:0,holidaysCount:0,weekendsCount:0,presentDays:0,absentDays:0,lateArrivals:0,attendancePercentage:0,averageWorkHours:0,overtimeHours:0,totalWorkHours:0,totalLeaveDays:0,leaveBreakdown:{},month:"",generated_at:null}),R=t=>{const i=t.target.value;S(new Date(i)),u(r=>!r)},A=a.useCallback((t,i)=>{N(r=>({...r,[t]:i})),u(r=>!r)},[]),h=a.useCallback(async()=>{try{const t=await C.get(route("attendance.myMonthlyStats"),{params:{currentYear:n.currentMonth?new Date(n.currentMonth).getFullYear():new Date().getFullYear(),currentMonth:n.currentMonth?String(new Date(n.currentMonth).getMonth()+1).padStart(2,"0"):String(new Date().getMonth()+1).padStart(2,"0")}});t.data.success&&M(t.data.data)}catch(t){console.error("Failed to fetch monthly stats:",t)}},[n.currentMonth]);a.useEffect(()=>{h()},[h]);const k=[{title:"Working Days",value:s.totalWorkingDays,icon:e.jsx(g,{}),color:"text-primary",iconBg:"bg-primary/20",description:`Total for ${s.month||"this month"}`},{title:"Present Days",value:s.presentDays,icon:e.jsx(H,{}),color:"text-success",iconBg:"bg-success/20",description:"Days attended this month"},{title:"Absent Days",value:s.absentDays,icon:e.jsx(_,{}),color:"text-danger",iconBg:"bg-danger/20",description:"Days missed this month"},{title:"Late Arrivals",value:s.lateArrivals,icon:e.jsx(P,{}),color:"text-warning",iconBg:"bg-warning/20",description:"Times late this month"},{title:"Attendance Rate",value:`${s.attendancePercentage}%`,icon:e.jsx(Y,{}),color:"text-success",iconBg:"bg-success/20",description:"Your monthly performance"},{title:"Avg Work Hours",value:`${s.averageWorkHours}h`,icon:e.jsx(d,{}),color:"text-primary",iconBg:"bg-primary/20",description:"Daily average this month"},{title:"Overtime",value:`${s.overtimeHours}h`,icon:e.jsx(d,{}),color:"text-secondary",iconBg:"bg-secondary/20",description:"Extra hours this month"},{title:"Leave Days",value:s.totalLeaveDays,icon:e.jsx(z,{}),color:"text-warning",iconBg:"bg-warning/20",description:"Leaves taken this month"}];return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:c||"My Attendance"}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"My Attendance Management",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(V.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(x,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(y,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${o?"p-6":l?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                                            ${o?"p-3":l?"p-2.5":"p-2"} 
                                                            rounded-xl flex items-center justify-center
                                                        `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(O,{className:`
                                                                ${o?"w-8 h-8":l?"w-6 h-6":"w-5 h-5"}
                                                            `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                                                ${o?"text-2xl":l?"text-xl":"text-lg"}
                                                                font-bold text-foreground
                                                                ${o?"":"truncate"}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"My Attendance"}),e.jsx("p",{className:`
                                                                ${o?"text-sm":"text-xs"} 
                                                                text-default-500
                                                                ${o?"":"truncate"}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"View your attendance records and timesheet details"})]})]})})})})}),e.jsxs(f,{className:"p-6",children:[e.jsx(L,{stats:k,className:"mb-6"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsx(U,{label:"Month/Year",type:"month",value:n.currentMonth,onChange:t=>A("currentMonth",t.target.value),variant:"bordered",size:"sm",radius:j(),startContent:e.jsx(g,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Select month and year for attendance"})})})}),e.jsxs(x,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                                                var(--theme-content1, #FAFAFA) 20%, 
                                                var(--theme-content2, #F4F4F5) 10%, 
                                                var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(y,{className:"border-b pb-2",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)"},children:e.jsx(d,{className:"w-6 h-6",style:{color:"var(--theme-primary)"}})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"My Attendance Records"})]})}),e.jsx(f,{children:e.jsx("div",{className:"max-h-[84vh] overflow-y-auto",children:e.jsx(B,{selectedDate:m,handleDateChange:R,updateTimeSheet:D,externalFilterData:n},`${m}-${n.currentMonth}`)})})]})]})]})})})})})]})});q.layout=c=>e.jsx(T,{children:c});export{q as default};
