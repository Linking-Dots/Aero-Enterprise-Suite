import{r as j,J as A,u as D,j as e,Q as z,d as L,b as v,s as f}from"./app-BKviuaq4.js";import{B as _}from"./react-toastify.esm-D1wkWoxc.js";import{e as I,s as k,l as m,A as Y}from"./App-bWaIDeMl.js";import{G}from"./logo-NelKEGxq.js";import{m as K}from"./proxy-C-Dyuo4b.js";import{F as Q}from"./PlusIcon-DCYXLE_p.js";import{i as y}from"./chunk-SSA7SXE4-DJb6g2q8.js";import{t as R,b as w,c as i,a as U}from"./chunk-F3UDT23P-DQvsp_AR.js";import{t as $}from"./chunk-YRZGWF2W-Bu6AyDY9.js";import{r as T}from"./chunk-IRK6BJWJ-CpTxAEm_.js";import"./EnvelopeIcon-dMmSMKng.js";import"./UserIcon-9UImPXWy.js";import"./ShieldCheckIcon-DFIjpe0y.js";import"./KeyIcon-pm5aDH1r.js";import"./features-animation-LoACrkjm.js";import"./create-visual-element-D348Q6so.js";import"./CheckCircleIcon-D--loFGL.js";import"./ExclamationTriangleIcon-CAe_YbIh.js";import"./chunk-XJ2YRSUP-Dvh7f2ra.js";import"./useToggleState-CqFN5XPj.js";import"./index-D-1-jIXv.js";const B=({title:h})=>{const g={type:"",days:"",eligibility:"",carry_forward:"",earned_leave:"",special_conditions:""},[c,b]=j.useState(A().props.leaveTypes),[t,x]=j.useState(g),[F,N]=j.useState(!1);D();const p=r=>{const{name:a,value:s}=r.target;x({...t,[a]:s})},C=async()=>{const r=new Promise(async(a,s)=>{var l,n;try{const d=await axios.post("/add-leave-type",t);d.status===201?(b([...c,{...t,id:d.data.id}]),x(g),a(["Leave type added successfully."])):s(["Failed to add leave type. Please try again."])}catch(d){console.error(d),s([((n=(l=d.response)==null?void 0:l.data)==null?void 0:n.message)||"Failed to add leave type. Please try again."])}});_.promise(r,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(f,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Adding leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white"}},success:{render({data:a}){return e.jsx(e.Fragment,{children:a.map((s,l)=>e.jsx("div",{children:s},l))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white"}},error:{render({data:a}){return e.jsx(e.Fragment,{children:a})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white"}}})},S=async r=>{const a=c.find(s=>s.id===r);x(a),N(!0)},P=()=>{const r=new Promise(async(a,s)=>{var l,n;try{const d=await axios.put(`/update-leave-type/${t.id}`,t);if(d.status===200){const o=c.map(u=>u.id===t.id?{...t,id:d.data.id}:u);b(o),x(g),N(!1),a(["Leave type updated successfully."])}else s(["Failed to update leave type. Please try again."])}catch(d){console.error(d),s([((n=(l=d.response)==null?void 0:l.data)==null?void 0:n.message)||"Failed to update leave type. Please try again."])}});_.promise(r,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(f,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white"}},success:{render({data:a}){return e.jsx(e.Fragment,{children:a.map((s,l)=>e.jsx("div",{children:s},l))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white"}},error:{render({data:a}){return e.jsx(e.Fragment,{children:a})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white"}}})},E=async r=>{const a=new Promise(async(s,l)=>{var n,d;try{const o=await axios.delete(`/delete-leave-type/${r}`);o.status===200?(b(c.filter(u=>u.id!==r)),s([o.data.message||"Leave type deleted successfully."])):l(["Failed to delete leave type. Please try again."])}catch(o){console.error(o),l([((d=(n=o.response)==null?void 0:n.data)==null?void 0:d.message)||"Failed to delete leave type. Please try again."])}});_.promise(a,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(f,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white"}},success:{render({data:s}){return e.jsx(e.Fragment,{children:s.map((l,n)=>e.jsx("div",{children:l},n))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white"}},error:{render({data:s}){return e.jsx(e.Fragment,{children:s})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white"}}})};return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:h}),e.jsx("div",{className:"flex justify-center p-2",children:e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:e.jsxs(G,{children:[e.jsx(I,{className:"p-6",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Leave Settings"})}),e.jsx(L,{className:"px-6 pb-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-center",children:[e.jsx("div",{children:e.jsx(y,{label:"Leave Type",name:"type",value:t.type,onChange:p})}),e.jsx("div",{children:e.jsx(y,{label:"Number of Days",name:"days",type:"number",value:t.days,onChange:p})}),e.jsx("div",{children:e.jsxs(k,{label:"Carry Forward",name:"carry_forward",selectedKeys:t.carry_forward?[String(t.carry_forward)]:[],onSelectionChange:r=>{const a=Array.from(r)[0];p({target:{name:"carry_forward",value:a==="true"}})},children:[e.jsx(m,{value:"true",children:"Yes"},"true"),e.jsx(m,{value:"false",children:"No"},"false")]})}),e.jsx("div",{children:e.jsxs(k,{label:"Earned Leave",name:"earned_leave",selectedKeys:t.earned_leave?[String(t.earned_leave)]:[],onSelectionChange:r=>{const a=Array.from(r)[0];p({target:{name:"earned_leave",value:a==="true"}})},children:[e.jsx(m,{value:"true",children:"Yes"},"true"),e.jsx(m,{value:"false",children:"No"},"false")]})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx(y,{label:"Eligibility Criteria",name:"eligibility",value:t.eligibility,onChange:p})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx(y,{label:"Special Conditions",name:"special_conditions",value:t.special_conditions,onChange:p})}),e.jsx("div",{className:"col-span-full flex justify-center",children:e.jsx(v,{variant:"bordered",color:"primary",onPress:F?P:C,startContent:e.jsx(Q,{className:"w-4 h-4"}),children:F?"Update Leave Type":"Add Leave Type"})})]})}),e.jsx(L,{children:e.jsx("div",{className:"overflow-auto max-h-[84vh]",children:e.jsxs(R,{"aria-label":"Leave types table",children:[e.jsx($,{children:e.jsxs(w,{children:[e.jsx(i,{children:"Type"}),e.jsx(i,{children:"Days"}),e.jsx(i,{children:"Eligibility"}),e.jsx(i,{children:"Carry Forward"}),e.jsx(i,{children:"Earned Leave"}),e.jsx(i,{children:"Special Conditions"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(U,{children:c.length>0?c.map(r=>e.jsxs(w,{children:[e.jsx(i,{children:r.type}),e.jsx(i,{children:r.days}),e.jsx(i,{children:r.eligibility}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{isSelected:!0,color:r.carry_forward?"success":"danger",isDisabled:!0}),e.jsx("span",{className:r.carry_forward?"text-success":"text-danger",children:r.carry_forward?"Yes":"No"})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{isSelected:!0,color:r.earned_leave?"success":"danger",isDisabled:!0}),e.jsx("span",{className:r.earned_leave?"text-success":"text-danger",children:r.earned_leave?"Yes":"No"})]})}),e.jsx(i,{children:r.special_conditions?r.special_conditions:"N/A"}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{variant:"bordered",color:"primary",size:"sm",onPress:()=>S(r.id),children:"Edit"}),e.jsx(v,{variant:"bordered",color:"danger",size:"sm",onPress:()=>E(r.id),children:"Delete"})]})})]},r.id)):e.jsx(w,{children:e.jsx(i,{colSpan:7,className:"text-center",children:"No leave types available."})})})]})})})]})})})]})};B.layout=h=>e.jsx(Y,{children:h});export{B as default};
