import{j as r,m as En,n as In,o as Cn,q as $n,r as Rn,v as Pn,k as Ke,p as Ca,w as vt,x as xt,b as ae,y as gt,z as oe,h as le,L as yt,S as $a,A as An,B as On,C as Dn,D as Ln,i as re,s as Se,l as ee,a6 as Mn,f as Ra,E as Un,a as me,d as zn,J,e as fe,g as Bn}from"./vendor-heroui-CinxWHhv.js";import{r as y,t as Br,Q as Vn,S as Vr}from"./vendor-inertia-sUfCHI_5.js";import{c as bt,d as Re,j as kn,P as kr,r as Ge,o as Wn,A as Gn}from"./Dashboard-DXCYt20F.js";import{S as Hn}from"./StatsCards-PeDFJi3-.js";import{s as Y}from"./toastUtils-BVg-E_WQ.js";import{F as qn}from"./HashtagIcon-265IgP8i.js";import{F as Ze}from"./UserIcon-CgrjQ1A2.js";import{F as jt}from"./EnvelopeIcon-CFKoTD3N.js";import{F as Pe,a as Pa}from"./DeviceTabletIcon-DNbnJcjv.js";import{F as Aa}from"./CheckCircleIcon-BAvoXTNq.js";import{F as Ae}from"./ShieldCheckIcon-Ck-ae4AP.js";import{F as _t}from"./EllipsisVerticalIcon-CqOfKM9J.js";import{F as Kn}from"./UserGroupIcon-CSQScwVa.js";import{F as Oa}from"./PencilIcon-BsmkHcSS.js";import{b as Ne}from"./app-D8yAEoaT.js";import{F as Je}from"./LockOpenIcon-CPnI893K.js";import{F as Ye}from"./LockClosedIcon-kY0qk8nI.js";import{F as Da}from"./ClockIcon-BKLni_N9.js";import{b as La}from"./XMarkIcon-twQGc8di.js";import{a as Fe,i as Ma,b as Ua,m as Xn}from"./vendor-utils-CrJAVL9K.js";import{U as Zn}from"./user-CD9nOF0M.js";import{C as Jn}from"./camera-Dwb5Er8t.js";import{c as Pt}from"./createLucideIcon-DJAbkOCz.js";import{F as Yn}from"./XCircleIcon-BzKw4V53.js";import{F as Qn}from"./TrophyIcon-BzzGBhFz.js";import{F as mt}from"./UserPlusIcon-DxLlp7sC.js";import{F as Wr}from"./ChartBarIcon-BGC3fra6.js";import{e as es}from"./vendor-framer-B7qqn1b6.js";import{F as ts}from"./DocumentArrowDownIcon-DCm9Iy1y.js";import{F as rs}from"./ChartPieIcon-BPLv2dAX.js";import{F as as}from"./MagnifyingGlassIcon-BJyUDYwI.js";import{F as ns}from"./TableCellsIcon-Dw93jRLu.js";import"./vendor-react-FouZbkAE.js";import"./MapPinIcon-DDwLGyCW.js";import"./KeyIcon-BIi5nz4o.js";import"./logo-DFaNDj_M.js";import"./ExclamationTriangleIcon-BarRaUA8.js";function ss({title:e,titleId:t,...a},s){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Gr=y.forwardRef(ss);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Hr=Pt("eye-off",is);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qr=Pt("eye",ls);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ds=Pt("lock",os),we=()=>"var(--borderRadius, 12px)",cs=({allUsers:e,roles:t,isMobile:a,isTablet:s,setUsers:l,pagination:d,onPageChange:m,onRowsPerPageChange:p,totalUsers:u=0,onEdit:g,loading:N=!1,updateUserOptimized:T,deleteUserOptimized:F,toggleUserStatusOptimized:U,updateUserRolesOptimized:M,toggleSingleDeviceLogin:D,resetUserDevice:C,deviceActions:R={}})=>{const[G,L]=y.useState({}),W=(n,x="w-5 h-5")=>{const A=(n==null?void 0:n.toLowerCase())||"";return A.includes("mobile")||A.includes("android")||A.includes("iphone")?r.jsx(Pe,{className:`${x} text-primary`}):A.includes("tablet")||A.includes("ipad")?r.jsx(Pa,{className:`${x} text-secondary`}):r.jsx(La,{className:`${x} text-default-500`})},$=n=>{const x=(n==null?void 0:n.toLowerCase())||"";return x.includes("mobile")||x.includes("android")||x.includes("iphone")?"Mobile Device":x.includes("tablet")||x.includes("ipad")?"Tablet":"Desktop"},I=(n,x,A)=>{L(P=>({...P,[`${n}-${x}`]:A}))},E=(n,x)=>G[`${n}-${x}`]||!1;async function b(n,x){I(n,"role",!0);const A=new Promise(async(P,w)=>{var f;try{const _=await axios.post(route("user.updateRole",{id:n}),{roles:x});_.status===200&&(M&&M(n,x),P([_.data.message||"Role updated successfully"]))}catch(_){((f=_.response)==null?void 0:f.status)===422?w(_.response.data.errors||["Failed to update user role."]):w(["An unexpected error occurred. Please try again later."])}finally{I(n,"role",!1)}});return Y.promise(A,{loading:"Updating employee role...",success:P=>P.join(", "),error:P=>Array.isArray(P)?P.join(", "):P}),A}const z=y.useMemo(()=>{const n=[{name:"#",uid:"sl"},{name:"USER",uid:"user"},{name:"EMAIL",uid:"email"},{name:"DEPARTMENT",uid:"department"},{name:"DEVICE STATUS",uid:"device_status"},{name:"STATUS",uid:"status"},{name:"ROLES",uid:"roles"},{name:"ACTIONS",uid:"actions"}];if(!a&&!s)n.splice(3,0,{name:"PHONE",uid:"phone"});else if(a)n.splice(n.findIndex(x=>x.uid==="department"),1),n.splice(n.findIndex(x=>x.uid==="device_status"),1);else if(s){const x=n.findIndex(A=>A.uid==="device_status");if(x>-1){const A=n.splice(x,1)[0];n.splice(2,0,A)}}return n},[a,s]),o=async(n,x)=>{if(!E(n,"status")){I(n,"status",!0);try{U?(U(n,!x),Y.success(`User status ${x?"deactivated":"activated"} successfully`)):l&&(l(A=>A.map(P=>P.id===n?{...P,active:!x}:P)),Y.success(`User status ${x?"deactivated":"activated"} successfully`))}catch(A){console.error("Error toggling user status:",A),Y.error("Failed to update user status")}finally{I(n,"status",!1)}}},v=(n,x,A)=>{var w,f;const P=n[x];switch(x){case"sl":const c=(d!=null&&d.currentPage&&(d!=null&&d.perPage)?Number((d.currentPage-1)*d.perPage):0)+(typeof A=="number"?A:0)+1;return r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("div",{className:"flex items-center justify-center w-8 h-8 border shadow-sm",style:{background:"var(--theme-content2, #F4F4F5)",borderColor:"var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 8px)",color:"var(--theme-foreground, #000000)"},children:r.jsx("span",{className:"text-sm font-bold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:c})})});case"user":return r.jsx($a,{className:"w-fit max-w-full",avatarProps:{src:(n==null?void 0:n.profile_image_url)||(n==null?void 0:n.profile_image),name:(n==null?void 0:n.name)||"Unnamed User",size:"sm",...kn({name:(n==null?void 0:n.name)||"Unnamed User",size:"sm"})},name:r.jsx("span",{className:"text-sm font-semibold whitespace-nowrap text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:(n==null?void 0:n.name)||"Unnamed User"}),description:r.jsxs("span",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["ID: ",n==null?void 0:n.id]})});case"email":return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:r.jsx(jt,{className:"w-3.5 h-3.5"})}),r.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:n.email})]});case"phone":return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:r.jsx(bt,{className:"w-3.5 h-3.5"})}),r.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:n.phone||"N/A"})]});case"department":return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:r.jsx(Re,{className:"w-3.5 h-3.5"})}),r.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((w=n==null?void 0:n.department)==null?void 0:w.name)||"N/A"})]});case"device_status":const H=E(n.id,"deviceToggle");return r.jsx("div",{className:"flex items-center space-x-2",children:n.single_device_login?r.jsxs(r.Fragment,{children:[r.jsx(le,{size:"sm",variant:"flat",color:n.active_device?"warning":"success",startContent:H?r.jsx("div",{className:"animate-spin",children:r.jsx(Ne,{className:"w-3 h-3"})}):n.active_device?r.jsx(Ye,{className:"w-3 h-3"}):r.jsx(Je,{className:"w-3 h-3"}),children:H?"Loading...":n.active_device?"Locked":"Free"}),n.active_device&&!H&&r.jsx(yt,{content:r.jsxs("div",{className:"backdrop-blur-md border rounded-lg p-4 shadow-2xl max-w-sm",style:{background:"color-mix(in srgb, var(--theme-content1) 20%, transparent)",borderColor:"var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)"},children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[W(n.active_device.user_agent,"w-5 h-5"),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-foreground text-sm",style:{fontFamily:'var(--fontFamily, "Inter")'},children:n.active_device.device_name||"Unknown Device"}),r.jsx("div",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:$(n.active_device.user_agent)})]})]}),r.jsx("div",{className:"space-y-2 text-xs",children:r.jsx("div",{className:"pt-2 mt-2 border-t",style:{borderColor:"color-mix(in srgb, var(--theme-divider) 20%, transparent)"},children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Da,{className:"w-3 h-3 text-success"}),r.jsx("span",{className:"text-success text-xs font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:n.active_device.is_active?"Currently Active":"Inactive"})]})})})]}),placement:"top",classNames:{content:"p-0 bg-transparent shadow-none border-none"},children:r.jsx("div",{className:"flex items-center p-1 rounded-sm hover:bg-content1/10 transition-colors cursor-default",children:W(n.active_device.user_agent,"w-4 h-4")})})]}):r.jsx(le,{size:"sm",variant:"flat",color:"default",startContent:H?r.jsx("div",{className:"animate-spin",children:r.jsx(Ne,{className:"w-3 h-3"})}):r.jsx(Ae,{className:"w-3 h-3"}),children:H?"Loading...":"Disabled"})});case"status":return r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.active,onChange:()=>o(n.id,n.active),disabled:E(n.id,"status")}),r.jsx("div",{className:"w-11 h-6 peer-focus:outline-hidden peer-focus:ring-4 peer-focus:ring-opacity-30 rounded-full peer transition-all duration-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all",style:{backgroundColor:n.active?"var(--theme-success, #10B981)":"var(--theme-danger, #EF4444)"}}),E(n.id,"status")&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx(Ke,{size:"sm",color:"default"})})]}),r.jsx("span",{className:"text-xs font-medium",style:{color:n.active?"var(--theme-success, #10B981)":"var(--theme-danger, #EF4444)",fontFamily:'var(--fontFamily, "Inter")'},children:n.active?"Active":"Inactive"})]});case"roles":const X=((f=n.roles)==null?void 0:f.map(q=>typeof q=="object"&&q!==null?q.name:q))||[],Z=new Set(X),ve=Array.from(Z).join(", ")||"No Roles";return r.jsx("div",{className:"flex items-center",children:r.jsxs(vt,{isDisabled:E(n.id,"role"),className:"max-w-[220px]",children:[r.jsx(xt,{children:r.jsx(ae,{className:"capitalize",variant:"solid",size:"sm",radius:we(),startContent:E(n.id,"role")?r.jsx(Ke,{size:"sm"}):null,style:{background:"var(--theme-primary, #3B82F6)",color:"white",fontFamily:'var(--fontFamily, "Inter")',borderRadius:we()},children:ve})}),r.jsx(gt,{disallowEmptySelection:!1,"aria-label":"Role selection",closeOnSelect:!1,selectedKeys:Z,selectionMode:"multiple",variant:"flat",onSelectionChange:q=>{const ke=Array.from(q);b(n.id,ke)},children:(t||[]).map(q=>r.jsx(oe,{children:typeof q=="object"&&q!==null?q.name:q},typeof q=="object"&&q!==null?q.name:q))})]})});case"actions":return r.jsx("div",{className:"flex justify-center items-center",children:r.jsxs(vt,{children:[r.jsx(xt,{children:r.jsx(ae,{isIconOnly:!0,size:"sm",variant:"solid",radius:we(),style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)",fontFamily:'var(--fontFamily, "Inter")',borderRadius:we()},className:"hover:opacity-80 transition-opacity",children:r.jsx(_t,{className:"w-4 h-4"})})}),r.jsxs(gt,{style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-divider, #E5E7EB)",borderRadius:we()},children:[r.jsx(oe,{textValue:"View Profile",href:route("profile",{user:n.id}),as:Br,className:"text-blue-500",startContent:r.jsx(Ze,{className:"w-4 h-4"}),children:"View Profile"}),r.jsx(oe,{textValue:"Edit User",onPress:()=>{g&&g(n)},className:"text-amber-500",startContent:r.jsx(Oa,{className:"w-4 h-4"}),children:"Edit"}),r.jsx(oe,{textValue:"Device Toggle",onPress:()=>{D&&!E(n.id,"deviceToggle")&&(I(n.id,"deviceToggle",!0),D(n.id,!n.single_device_login).finally(()=>{I(n.id,"deviceToggle",!1)}))},isDisabled:R[n.id]||E(n.id,"deviceToggle"),startContent:E(n.id,"deviceToggle")?r.jsx("div",{className:"animate-spin",children:r.jsx(Ne,{className:"w-4 h-4"})}):n.single_device_login?r.jsx(Je,{className:"w-4 h-4"}):r.jsx(Ye,{className:"w-4 h-4"}),className:n.single_device_login?"text-orange-500":"text-green-500",children:E(n.id,"deviceToggle")?"Processing...":n.single_device_login?"Disable Device Lock":"Enable Device Lock"}),n.single_device_login&&n.active_device&&r.jsx(oe,{textValue:"Reset Device",onPress:()=>{C&&!E(n.id,"deviceReset")&&(I(n.id,"deviceReset",!0),C(n.id).finally(()=>{I(n.id,"deviceReset",!1)}))},isDisabled:R[n.id]||E(n.id,"deviceReset"),startContent:E(n.id,"deviceReset")?r.jsx("div",{className:"animate-spin",children:r.jsx(Ne,{className:"w-4 h-4"})}):r.jsx(Ne,{className:"w-4 h-4"}),className:"text-red-500",children:E(n.id,"deviceReset")?"Resetting...":"Reset Device"}),r.jsx(oe,{textValue:"View Devices",href:route("admin.users.devices",{userId:n.id}),as:Br,startContent:r.jsx(Pe,{className:"w-4 h-4"}),className:"text-blue-500",children:"View Device History"})]})]})});default:return P}},j=()=>!e||!u||N?null:r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-6 py-4 border-t",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:"var(--theme-content2, #F4F4F5)",borderRadius:"0 0 var(--borderRadius, 12px) var(--borderRadius, 12px)"},children:[r.jsxs("span",{className:"text-sm text-default-600 mb-3 sm:mb-0 font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["Showing"," ",r.jsx("span",{className:"font-semibold text-default-900",children:(d.currentPage-1)*d.perPage+1})," ","to"," ",r.jsx("span",{className:"font-semibold text-default-900",children:Math.min(d.currentPage*d.perPage,u)})," ","of"," ",r.jsx("span",{className:"font-semibold text-default-900",children:u})," ","users"]}),r.jsx(Ca,{total:Math.ceil(u/d.perPage),initialPage:d.currentPage,page:d.currentPage,onChange:m,size:a?"sm":"md",variant:"flat",showControls:!0,radius:we(),style:{fontFamily:'var(--fontFamily, "Inter")'},classNames:{wrapper:"gap-1",item:"bg-default-100 hover:bg-default-200 text-default-700 font-medium border border-default-200",cursor:"bg-primary text-primary-foreground font-semibold shadow-md",prev:"bg-default-100 hover:bg-default-200 text-default-700 border border-default-200",next:"bg-default-100 hover:bg-default-200 text-default-700 border border-default-200"}})]});return r.jsxs("div",{className:"w-full flex flex-col border rounded-lg shadow-lg",style:{maxHeight:"calc(100vh - 240px)",borderColor:"var(--theme-divider, #E4E4E7)",background:"var(--theme-content1, #FFFFFF)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[r.jsx("div",{className:"flex-1 overflow-auto",style:{scrollbarWidth:"thin",scrollbarColor:"var(--theme-divider, #E4E4E7) transparent"},children:r.jsxs(En,{removeWrapper:!0,selectionMode:"none",isCompact:a,classNames:{base:"min-w-[900px]",wrapper:"p-0 shadow-none",th:"text-default-600 border-b font-semibold text-xs sticky top-0 z-30",td:"border-b py-4 px-3",table:"border-collapse w-full",thead:"sticky top-0 z-30",tbody:"",tr:"hover:bg-default-50 transition-colors duration-150",emptyWrapper:"text-center h-32",loadingWrapper:"h-32"},style:{"--table-border-color":"var(--theme-divider, #E4E4E7)","--table-header-bg":"var(--theme-content2, #F4F4F5)","--table-row-hover":"var(--theme-default-50, #F9FAFB)"},children:[r.jsx(In,{columns:z,children:n=>r.jsx(Cn,{align:n.uid==="actions"||n.uid==="sl"?"center":"start",width:n.uid==="user"?280:n.uid==="email"?240:n.uid==="phone"?140:n.uid==="department"||n.uid==="device_status"?160:n.uid==="status"?120:n.uid==="roles"?180:n.uid==="actions"?120:void 0,style:{background:"var(--table-header-bg)",borderColor:"var(--table-border-color)",fontFamily:'var(--fontFamily, "Inter")',fontSize:"0.75rem",fontWeight:"600"},children:r.jsxs("div",{className:"flex items-center gap-2 py-1",children:[n.uid==="sl"&&r.jsx(qn,{className:"w-3 h-3 text-default-400"}),n.uid==="user"&&r.jsx(Ze,{className:"w-3 h-3 text-default-400"}),n.uid==="email"&&r.jsx(jt,{className:"w-3 h-3 text-default-400"}),n.uid==="phone"&&r.jsx(bt,{className:"w-3 h-3 text-default-400"}),n.uid==="department"&&r.jsx(Re,{className:"w-3 h-3 text-default-400"}),n.uid==="device_status"&&r.jsx(Pe,{className:"w-3 h-3 text-default-400"}),n.uid==="status"&&r.jsx(Aa,{className:"w-3 h-3 text-default-400"}),n.uid==="roles"&&r.jsx(Ae,{className:"w-3 h-3 text-default-400"}),n.uid==="actions"&&r.jsx(_t,{className:"w-3 h-3 text-default-400"}),r.jsx("span",{children:n.name})]})},n.uid)}),r.jsx($n,{items:e||[],emptyContent:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx(Kn,{className:"w-12 h-12 text-default-300 mb-3"}),r.jsx("p",{className:"text-default-500 font-medium",children:"No users found"}),r.jsx("p",{className:"text-default-400 text-sm",children:"Try adjusting your search or filters"})]}),loadingContent:r.jsx("div",{className:"flex justify-center items-center py-8",children:r.jsx(Ke,{size:"lg",color:"primary"})}),isLoading:N,children:(n,x)=>{const A=e?e.findIndex(P=>P.id===n.id):x;return r.jsx(Rn,{className:"group",style:{background:"var(--theme-content1, #FFFFFF)"},children:P=>r.jsx(Pn,{style:{borderColor:"var(--table-border-color)",fontFamily:'var(--fontFamily, "Inter")',background:"inherit"},children:v(n,P,A)})},n.id)}})]})}),j()]})};var za=typeof global=="object"&&global&&global.Object===Object&&global,ms=typeof self=="object"&&self&&self.Object===Object&&self,ie=za||ms||Function("return this")(),te=ie.Symbol,Ba=Object.prototype,fs=Ba.hasOwnProperty,us=Ba.toString,Ie=te?te.toStringTag:void 0;function ps(e){var t=fs.call(e,Ie),a=e[Ie];try{e[Ie]=void 0;var s=!0}catch{}var l=us.call(e);return s&&(t?e[Ie]=a:delete e[Ie]),l}var hs=Object.prototype,vs=hs.toString;function xs(e){return vs.call(e)}var gs="[object Null]",ys="[object Undefined]",Kr=te?te.toStringTag:void 0;function ge(e){return e==null?e===void 0?ys:gs:Kr&&Kr in Object(e)?ps(e):xs(e)}function ce(e){return e!=null&&typeof e=="object"}var bs="[object Symbol]";function st(e){return typeof e=="symbol"||ce(e)&&ge(e)==bs}function Va(e,t){for(var a=-1,s=e==null?0:e.length,l=Array(s);++a<s;)l[a]=t(e[a],a,e);return l}var se=Array.isArray,Xr=te?te.prototype:void 0,Zr=Xr?Xr.toString:void 0;function ka(e){if(typeof e=="string")return e;if(se(e))return Va(e,ka)+"";if(st(e))return Zr?Zr.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var js=/\s/;function _s(e){for(var t=e.length;t--&&js.test(e.charAt(t)););return t}var ws=/^\s+/;function Ns(e){return e&&e.slice(0,_s(e)+1).replace(ws,"")}function Q(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Jr=NaN,Fs=/^[-+]0x[0-9a-f]+$/i,Ss=/^0b[01]+$/i,Ts=/^0o[0-7]+$/i,Es=parseInt;function Yr(e){if(typeof e=="number")return e;if(st(e))return Jr;if(Q(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Q(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ns(e);var a=Ss.test(e);return a||Ts.test(e)?Es(e.slice(2),a?2:8):Fs.test(e)?Jr:+e}function Wa(e){return e}var Is="[object AsyncFunction]",Cs="[object Function]",$s="[object GeneratorFunction]",Rs="[object Proxy]";function At(e){if(!Q(e))return!1;var t=ge(e);return t==Cs||t==$s||t==Is||t==Rs}var ft=ie["__core-js_shared__"],Qr=function(){var e=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ps(e){return!!Qr&&Qr in e}var As=Function.prototype,Os=As.toString;function ye(e){if(e!=null){try{return Os.call(e)}catch{}try{return e+""}catch{}}return""}var Ds=/[\\^$.*+?()[\]{}|]/g,Ls=/^\[object .+?Constructor\]$/,Ms=Function.prototype,Us=Object.prototype,zs=Ms.toString,Bs=Us.hasOwnProperty,Vs=RegExp("^"+zs.call(Bs).replace(Ds,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ks(e){if(!Q(e)||Ps(e))return!1;var t=At(e)?Vs:Ls;return t.test(ye(e))}function Ws(e,t){return e==null?void 0:e[t]}function be(e,t){var a=Ws(e,t);return ks(a)?a:void 0}var wt=be(ie,"WeakMap"),ea=Object.create,Gs=function(){function e(){}return function(t){if(!Q(t))return{};if(ea)return ea(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}();function Hs(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function Ga(e,t){var a=-1,s=e.length;for(t||(t=Array(s));++a<s;)t[a]=e[a];return t}var qs=800,Ks=16,Xs=Date.now;function Zs(e){var t=0,a=0;return function(){var s=Xs(),l=Ks-(s-a);if(a=s,l>0){if(++t>=qs)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Js(e){return function(){return e}}var Qe=function(){try{var e=be(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ys=Qe?function(e,t){return Qe(e,"toString",{configurable:!0,enumerable:!1,value:Js(t),writable:!0})}:Wa,Ha=Zs(Ys);function Qs(e,t){for(var a=-1,s=e==null?0:e.length;++a<s&&t(e[a],a,e)!==!1;);return e}var ei=9007199254740991,ti=/^(?:0|[1-9]\d*)$/;function Ot(e,t){var a=typeof e;return t=t??ei,!!t&&(a=="number"||a!="symbol"&&ti.test(e))&&e>-1&&e%1==0&&e<t}function Dt(e,t,a){t=="__proto__"&&Qe?Qe(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}function Be(e,t){return e===t||e!==e&&t!==t}var ri=Object.prototype,ai=ri.hasOwnProperty;function Lt(e,t,a){var s=e[t];(!(ai.call(e,t)&&Be(s,a))||a===void 0&&!(t in e))&&Dt(e,t,a)}function Ee(e,t,a,s){var l=!a;a||(a={});for(var d=-1,m=t.length;++d<m;){var p=t[d],u=void 0;u===void 0&&(u=e[p]),l?Dt(a,p,u):Lt(a,p,u)}return a}var ta=Math.max;function qa(e,t,a){return t=ta(t===void 0?e.length-1:t,0),function(){for(var s=arguments,l=-1,d=ta(s.length-t,0),m=Array(d);++l<d;)m[l]=s[t+l];l=-1;for(var p=Array(t+1);++l<t;)p[l]=s[l];return p[t]=a(m),Hs(e,this,p)}}function ni(e,t){return Ha(qa(e,t,Wa),e+"")}var si=9007199254740991;function Ka(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=si}function it(e){return e!=null&&Ka(e.length)&&!At(e)}function ii(e,t,a){if(!Q(a))return!1;var s=typeof t;return(s=="number"?it(a)&&Ot(t,a.length):s=="string"&&t in a)?Be(a[t],e):!1}function li(e){return ni(function(t,a){var s=-1,l=a.length,d=l>1?a[l-1]:void 0,m=l>2?a[2]:void 0;for(d=e.length>3&&typeof d=="function"?(l--,d):void 0,m&&ii(a[0],a[1],m)&&(d=l<3?void 0:d,l=1),t=Object(t);++s<l;){var p=a[s];p&&e(t,p,s,d)}return t})}var oi=Object.prototype;function Mt(e){var t=e&&e.constructor,a=typeof t=="function"&&t.prototype||oi;return e===a}function di(e,t){for(var a=-1,s=Array(e);++a<e;)s[a]=t(a);return s}var ci="[object Arguments]";function ra(e){return ce(e)&&ge(e)==ci}var Xa=Object.prototype,mi=Xa.hasOwnProperty,fi=Xa.propertyIsEnumerable,et=ra(function(){return arguments}())?ra:function(e){return ce(e)&&mi.call(e,"callee")&&!fi.call(e,"callee")};function ui(){return!1}var Za=typeof exports=="object"&&exports&&!exports.nodeType&&exports,aa=Za&&typeof module=="object"&&module&&!module.nodeType&&module,pi=aa&&aa.exports===Za,na=pi?ie.Buffer:void 0,hi=na?na.isBuffer:void 0,Le=hi||ui,vi="[object Arguments]",xi="[object Array]",gi="[object Boolean]",yi="[object Date]",bi="[object Error]",ji="[object Function]",_i="[object Map]",wi="[object Number]",Ni="[object Object]",Fi="[object RegExp]",Si="[object Set]",Ti="[object String]",Ei="[object WeakMap]",Ii="[object ArrayBuffer]",Ci="[object DataView]",$i="[object Float32Array]",Ri="[object Float64Array]",Pi="[object Int8Array]",Ai="[object Int16Array]",Oi="[object Int32Array]",Di="[object Uint8Array]",Li="[object Uint8ClampedArray]",Mi="[object Uint16Array]",Ui="[object Uint32Array]",k={};k[$i]=k[Ri]=k[Pi]=k[Ai]=k[Oi]=k[Di]=k[Li]=k[Mi]=k[Ui]=!0;k[vi]=k[xi]=k[Ii]=k[gi]=k[Ci]=k[yi]=k[bi]=k[ji]=k[_i]=k[wi]=k[Ni]=k[Fi]=k[Si]=k[Ti]=k[Ei]=!1;function zi(e){return ce(e)&&Ka(e.length)&&!!k[ge(e)]}function Ut(e){return function(t){return e(t)}}var Ja=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Oe=Ja&&typeof module=="object"&&module&&!module.nodeType&&module,Bi=Oe&&Oe.exports===Ja,ut=Bi&&za.process,Te=function(){try{var e=Oe&&Oe.require&&Oe.require("util").types;return e||ut&&ut.binding&&ut.binding("util")}catch{}}(),sa=Te&&Te.isTypedArray,zt=sa?Ut(sa):zi,Vi=Object.prototype,ki=Vi.hasOwnProperty;function Ya(e,t){var a=se(e),s=!a&&et(e),l=!a&&!s&&Le(e),d=!a&&!s&&!l&&zt(e),m=a||s||l||d,p=m?di(e.length,String):[],u=p.length;for(var g in e)(t||ki.call(e,g))&&!(m&&(g=="length"||l&&(g=="offset"||g=="parent")||d&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Ot(g,u)))&&p.push(g);return p}function Qa(e,t){return function(a){return e(t(a))}}var Wi=Qa(Object.keys,Object),Gi=Object.prototype,Hi=Gi.hasOwnProperty;function qi(e){if(!Mt(e))return Wi(e);var t=[];for(var a in Object(e))Hi.call(e,a)&&a!="constructor"&&t.push(a);return t}function Bt(e){return it(e)?Ya(e):qi(e)}function Ki(e){var t=[];if(e!=null)for(var a in Object(e))t.push(a);return t}var Xi=Object.prototype,Zi=Xi.hasOwnProperty;function Ji(e){if(!Q(e))return Ki(e);var t=Mt(e),a=[];for(var s in e)s=="constructor"&&(t||!Zi.call(e,s))||a.push(s);return a}function Ve(e){return it(e)?Ya(e,!0):Ji(e)}var Yi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qi=/^\w*$/;function el(e,t){if(se(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||st(e)?!0:Qi.test(e)||!Yi.test(e)||t!=null&&e in Object(t)}var Me=be(Object,"create");function tl(){this.__data__=Me?Me(null):{},this.size=0}function rl(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var al="__lodash_hash_undefined__",nl=Object.prototype,sl=nl.hasOwnProperty;function il(e){var t=this.__data__;if(Me){var a=t[e];return a===al?void 0:a}return sl.call(t,e)?t[e]:void 0}var ll=Object.prototype,ol=ll.hasOwnProperty;function dl(e){var t=this.__data__;return Me?t[e]!==void 0:ol.call(t,e)}var cl="__lodash_hash_undefined__";function ml(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Me&&t===void 0?cl:t,this}function xe(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var s=e[t];this.set(s[0],s[1])}}xe.prototype.clear=tl;xe.prototype.delete=rl;xe.prototype.get=il;xe.prototype.has=dl;xe.prototype.set=ml;function fl(){this.__data__=[],this.size=0}function lt(e,t){for(var a=e.length;a--;)if(Be(e[a][0],t))return a;return-1}var ul=Array.prototype,pl=ul.splice;function hl(e){var t=this.__data__,a=lt(t,e);if(a<0)return!1;var s=t.length-1;return a==s?t.pop():pl.call(t,a,1),--this.size,!0}function vl(e){var t=this.__data__,a=lt(t,e);return a<0?void 0:t[a][1]}function xl(e){return lt(this.__data__,e)>-1}function gl(e,t){var a=this.__data__,s=lt(a,e);return s<0?(++this.size,a.push([e,t])):a[s][1]=t,this}function pe(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var s=e[t];this.set(s[0],s[1])}}pe.prototype.clear=fl;pe.prototype.delete=hl;pe.prototype.get=vl;pe.prototype.has=xl;pe.prototype.set=gl;var Ue=be(ie,"Map");function yl(){this.size=0,this.__data__={hash:new xe,map:new(Ue||pe),string:new xe}}function bl(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ot(e,t){var a=e.__data__;return bl(t)?a[typeof t=="string"?"string":"hash"]:a.map}function jl(e){var t=ot(this,e).delete(e);return this.size-=t?1:0,t}function _l(e){return ot(this,e).get(e)}function wl(e){return ot(this,e).has(e)}function Nl(e,t){var a=ot(this,e),s=a.size;return a.set(e,t),this.size+=a.size==s?0:1,this}function he(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var s=e[t];this.set(s[0],s[1])}}he.prototype.clear=yl;he.prototype.delete=jl;he.prototype.get=_l;he.prototype.has=wl;he.prototype.set=Nl;var Fl="Expected a function";function Vt(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Fl);var a=function(){var s=arguments,l=t?t.apply(this,s):s[0],d=a.cache;if(d.has(l))return d.get(l);var m=e.apply(this,s);return a.cache=d.set(l,m)||d,m};return a.cache=new(Vt.Cache||he),a}Vt.Cache=he;var Sl=500;function Tl(e){var t=Vt(e,function(s){return a.size===Sl&&a.clear(),s}),a=t.cache;return t}var El=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Il=/\\(\\)?/g,Cl=Tl(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(El,function(a,s,l,d){t.push(l?d.replace(Il,"$1"):s||a)}),t});function $l(e){return e==null?"":ka(e)}function dt(e,t){return se(e)?e:el(e,t)?[e]:Cl($l(e))}function kt(e){if(typeof e=="string"||st(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function en(e,t){t=dt(t,e);for(var a=0,s=t.length;e!=null&&a<s;)e=e[kt(t[a++])];return a&&a==s?e:void 0}function tt(e,t,a){var s=e==null?void 0:en(e,t);return s===void 0?a:s}function Wt(e,t){for(var a=-1,s=t.length,l=e.length;++a<s;)e[l+a]=t[a];return e}var ia=te?te.isConcatSpreadable:void 0;function Rl(e){return se(e)||et(e)||!!(ia&&e&&e[ia])}function Pl(e,t,a,s,l){var d=-1,m=e.length;for(a||(a=Rl),l||(l=[]);++d<m;){var p=e[d];a(p)?Wt(l,p):l[l.length]=p}return l}function Al(e){var t=e==null?0:e.length;return t?Pl(e):[]}function Ol(e){return Ha(qa(e,void 0,Al),e+"")}var Gt=Qa(Object.getPrototypeOf,Object),Dl="[object Object]",Ll=Function.prototype,Ml=Object.prototype,tn=Ll.toString,Ul=Ml.hasOwnProperty,zl=tn.call(Object);function rn(e){if(!ce(e)||ge(e)!=Dl)return!1;var t=Gt(e);if(t===null)return!0;var a=Ul.call(t,"constructor")&&t.constructor;return typeof a=="function"&&a instanceof a&&tn.call(a)==zl}function Bl(e,t,a){var s=-1,l=e.length;t<0&&(t=-t>l?0:l+t),a=a>l?l:a,a<0&&(a+=l),l=t>a?0:a-t>>>0,t>>>=0;for(var d=Array(l);++s<l;)d[s]=e[s+t];return d}function Vl(){this.__data__=new pe,this.size=0}function kl(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a}function Wl(e){return this.__data__.get(e)}function Gl(e){return this.__data__.has(e)}var Hl=200;function ql(e,t){var a=this.__data__;if(a instanceof pe){var s=a.__data__;if(!Ue||s.length<Hl-1)return s.push([e,t]),this.size=++a.size,this;a=this.__data__=new he(s)}return a.set(e,t),this.size=a.size,this}function de(e){var t=this.__data__=new pe(e);this.size=t.size}de.prototype.clear=Vl;de.prototype.delete=kl;de.prototype.get=Wl;de.prototype.has=Gl;de.prototype.set=ql;function Kl(e,t){return e&&Ee(t,Bt(t),e)}function Xl(e,t){return e&&Ee(t,Ve(t),e)}var an=typeof exports=="object"&&exports&&!exports.nodeType&&exports,la=an&&typeof module=="object"&&module&&!module.nodeType&&module,Zl=la&&la.exports===an,oa=Zl?ie.Buffer:void 0,da=oa?oa.allocUnsafe:void 0;function nn(e,t){if(t)return e.slice();var a=e.length,s=da?da(a):new e.constructor(a);return e.copy(s),s}function Jl(e,t){for(var a=-1,s=e==null?0:e.length,l=0,d=[];++a<s;){var m=e[a];t(m,a,e)&&(d[l++]=m)}return d}function sn(){return[]}var Yl=Object.prototype,Ql=Yl.propertyIsEnumerable,ca=Object.getOwnPropertySymbols,Ht=ca?function(e){return e==null?[]:(e=Object(e),Jl(ca(e),function(t){return Ql.call(e,t)}))}:sn;function eo(e,t){return Ee(e,Ht(e),t)}var to=Object.getOwnPropertySymbols,ln=to?function(e){for(var t=[];e;)Wt(t,Ht(e)),e=Gt(e);return t}:sn;function ro(e,t){return Ee(e,ln(e),t)}function on(e,t,a){var s=t(e);return se(e)?s:Wt(s,a(e))}function Nt(e){return on(e,Bt,Ht)}function dn(e){return on(e,Ve,ln)}var Ft=be(ie,"DataView"),St=be(ie,"Promise"),Tt=be(ie,"Set"),ma="[object Map]",ao="[object Object]",fa="[object Promise]",ua="[object Set]",pa="[object WeakMap]",ha="[object DataView]",no=ye(Ft),so=ye(Ue),io=ye(St),lo=ye(Tt),oo=ye(wt),ne=ge;(Ft&&ne(new Ft(new ArrayBuffer(1)))!=ha||Ue&&ne(new Ue)!=ma||St&&ne(St.resolve())!=fa||Tt&&ne(new Tt)!=ua||wt&&ne(new wt)!=pa)&&(ne=function(e){var t=ge(e),a=t==ao?e.constructor:void 0,s=a?ye(a):"";if(s)switch(s){case no:return ha;case so:return ma;case io:return fa;case lo:return ua;case oo:return pa}return t});var co=Object.prototype,mo=co.hasOwnProperty;function fo(e){var t=e.length,a=new e.constructor(t);return t&&typeof e[0]=="string"&&mo.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var rt=ie.Uint8Array;function qt(e){var t=new e.constructor(e.byteLength);return new rt(t).set(new rt(e)),t}function uo(e,t){var a=t?qt(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}var po=/\w*$/;function ho(e){var t=new e.constructor(e.source,po.exec(e));return t.lastIndex=e.lastIndex,t}var va=te?te.prototype:void 0,xa=va?va.valueOf:void 0;function vo(e){return xa?Object(xa.call(e)):{}}function cn(e,t){var a=t?qt(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var xo="[object Boolean]",go="[object Date]",yo="[object Map]",bo="[object Number]",jo="[object RegExp]",_o="[object Set]",wo="[object String]",No="[object Symbol]",Fo="[object ArrayBuffer]",So="[object DataView]",To="[object Float32Array]",Eo="[object Float64Array]",Io="[object Int8Array]",Co="[object Int16Array]",$o="[object Int32Array]",Ro="[object Uint8Array]",Po="[object Uint8ClampedArray]",Ao="[object Uint16Array]",Oo="[object Uint32Array]";function Do(e,t,a){var s=e.constructor;switch(t){case Fo:return qt(e);case xo:case go:return new s(+e);case So:return uo(e,a);case To:case Eo:case Io:case Co:case $o:case Ro:case Po:case Ao:case Oo:return cn(e,a);case yo:return new s;case bo:case wo:return new s(e);case jo:return ho(e);case _o:return new s;case No:return vo(e)}}function mn(e){return typeof e.constructor=="function"&&!Mt(e)?Gs(Gt(e)):{}}var Lo="[object Map]";function Mo(e){return ce(e)&&ne(e)==Lo}var ga=Te&&Te.isMap,Uo=ga?Ut(ga):Mo,zo="[object Set]";function Bo(e){return ce(e)&&ne(e)==zo}var ya=Te&&Te.isSet,Vo=ya?Ut(ya):Bo,ko=1,Wo=2,Go=4,fn="[object Arguments]",Ho="[object Array]",qo="[object Boolean]",Ko="[object Date]",Xo="[object Error]",un="[object Function]",Zo="[object GeneratorFunction]",Jo="[object Map]",Yo="[object Number]",pn="[object Object]",Qo="[object RegExp]",ed="[object Set]",td="[object String]",rd="[object Symbol]",ad="[object WeakMap]",nd="[object ArrayBuffer]",sd="[object DataView]",id="[object Float32Array]",ld="[object Float64Array]",od="[object Int8Array]",dd="[object Int16Array]",cd="[object Int32Array]",md="[object Uint8Array]",fd="[object Uint8ClampedArray]",ud="[object Uint16Array]",pd="[object Uint32Array]",V={};V[fn]=V[Ho]=V[nd]=V[sd]=V[qo]=V[Ko]=V[id]=V[ld]=V[od]=V[dd]=V[cd]=V[Jo]=V[Yo]=V[pn]=V[Qo]=V[ed]=V[td]=V[rd]=V[md]=V[fd]=V[ud]=V[pd]=!0;V[Xo]=V[un]=V[ad]=!1;function De(e,t,a,s,l,d){var m,p=t&ko,u=t&Wo,g=t&Go;if(a&&(m=l?a(e,s,l,d):a(e)),m!==void 0)return m;if(!Q(e))return e;var N=se(e);if(N){if(m=fo(e),!p)return Ga(e,m)}else{var T=ne(e),F=T==un||T==Zo;if(Le(e))return nn(e,p);if(T==pn||T==fn||F&&!l){if(m=u||F?{}:mn(e),!p)return u?ro(e,Xl(m,e)):eo(e,Kl(m,e))}else{if(!V[T])return l?e:{};m=Do(e,T,p)}}d||(d=new de);var U=d.get(e);if(U)return U;d.set(e,m),Vo(e)?e.forEach(function(C){m.add(De(C,t,a,C,e,d))}):Uo(e)&&e.forEach(function(C,R){m.set(R,De(C,t,a,R,e,d))});var M=g?u?dn:Nt:u?Ve:Bt,D=N?void 0:M(e);return Qs(D||e,function(C,R){D&&(R=C,C=e[R]),Lt(m,R,De(C,t,a,R,e,d))}),m}var hd=1,vd=4;function He(e){return De(e,hd|vd)}var xd="__lodash_hash_undefined__";function gd(e){return this.__data__.set(e,xd),this}function yd(e){return this.__data__.has(e)}function at(e){var t=-1,a=e==null?0:e.length;for(this.__data__=new he;++t<a;)this.add(e[t])}at.prototype.add=at.prototype.push=gd;at.prototype.has=yd;function bd(e,t){for(var a=-1,s=e==null?0:e.length;++a<s;)if(t(e[a],a,e))return!0;return!1}function jd(e,t){return e.has(t)}var _d=1,wd=2;function hn(e,t,a,s,l,d){var m=a&_d,p=e.length,u=t.length;if(p!=u&&!(m&&u>p))return!1;var g=d.get(e),N=d.get(t);if(g&&N)return g==t&&N==e;var T=-1,F=!0,U=a&wd?new at:void 0;for(d.set(e,t),d.set(t,e);++T<p;){var M=e[T],D=t[T];if(s)var C=m?s(D,M,T,t,e,d):s(M,D,T,e,t,d);if(C!==void 0){if(C)continue;F=!1;break}if(U){if(!bd(t,function(R,G){if(!jd(U,G)&&(M===R||l(M,R,a,s,d)))return U.push(G)})){F=!1;break}}else if(!(M===D||l(M,D,a,s,d))){F=!1;break}}return d.delete(e),d.delete(t),F}function Nd(e){var t=-1,a=Array(e.size);return e.forEach(function(s,l){a[++t]=[l,s]}),a}function Fd(e){var t=-1,a=Array(e.size);return e.forEach(function(s){a[++t]=s}),a}var Sd=1,Td=2,Ed="[object Boolean]",Id="[object Date]",Cd="[object Error]",$d="[object Map]",Rd="[object Number]",Pd="[object RegExp]",Ad="[object Set]",Od="[object String]",Dd="[object Symbol]",Ld="[object ArrayBuffer]",Md="[object DataView]",ba=te?te.prototype:void 0,pt=ba?ba.valueOf:void 0;function Ud(e,t,a,s,l,d,m){switch(a){case Md:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ld:return!(e.byteLength!=t.byteLength||!d(new rt(e),new rt(t)));case Ed:case Id:case Rd:return Be(+e,+t);case Cd:return e.name==t.name&&e.message==t.message;case Pd:case Od:return e==t+"";case $d:var p=Nd;case Ad:var u=s&Sd;if(p||(p=Fd),e.size!=t.size&&!u)return!1;var g=m.get(e);if(g)return g==t;s|=Td,m.set(e,t);var N=hn(p(e),p(t),s,l,d,m);return m.delete(e),N;case Dd:if(pt)return pt.call(e)==pt.call(t)}return!1}var zd=1,Bd=Object.prototype,Vd=Bd.hasOwnProperty;function kd(e,t,a,s,l,d){var m=a&zd,p=Nt(e),u=p.length,g=Nt(t),N=g.length;if(u!=N&&!m)return!1;for(var T=u;T--;){var F=p[T];if(!(m?F in t:Vd.call(t,F)))return!1}var U=d.get(e),M=d.get(t);if(U&&M)return U==t&&M==e;var D=!0;d.set(e,t),d.set(t,e);for(var C=m;++T<u;){F=p[T];var R=e[F],G=t[F];if(s)var L=m?s(G,R,F,t,e,d):s(R,G,F,e,t,d);if(!(L===void 0?R===G||l(R,G,a,s,d):L)){D=!1;break}C||(C=F=="constructor")}if(D&&!C){var W=e.constructor,$=t.constructor;W!=$&&"constructor"in e&&"constructor"in t&&!(typeof W=="function"&&W instanceof W&&typeof $=="function"&&$ instanceof $)&&(D=!1)}return d.delete(e),d.delete(t),D}var Wd=1,ja="[object Arguments]",_a="[object Array]",qe="[object Object]",Gd=Object.prototype,wa=Gd.hasOwnProperty;function Hd(e,t,a,s,l,d){var m=se(e),p=se(t),u=m?_a:ne(e),g=p?_a:ne(t);u=u==ja?qe:u,g=g==ja?qe:g;var N=u==qe,T=g==qe,F=u==g;if(F&&Le(e)){if(!Le(t))return!1;m=!0,N=!1}if(F&&!N)return d||(d=new de),m||zt(e)?hn(e,t,a,s,l,d):Ud(e,t,u,a,s,l,d);if(!(a&Wd)){var U=N&&wa.call(e,"__wrapped__"),M=T&&wa.call(t,"__wrapped__");if(U||M){var D=U?e.value():e,C=M?t.value():t;return d||(d=new de),l(D,C,a,s,d)}}return F?(d||(d=new de),kd(e,t,a,s,l,d)):!1}function vn(e,t,a,s,l){return e===t?!0:e==null||t==null||!ce(e)&&!ce(t)?e!==e&&t!==t:Hd(e,t,a,s,vn,l)}function qd(e){return function(t,a,s){for(var l=-1,d=Object(t),m=s(t),p=m.length;p--;){var u=m[++l];if(a(d[u],u,d)===!1)break}return t}}var Kd=qd(),ht=function(){return ie.Date.now()},Xd="Expected a function",Zd=Math.max,Jd=Math.min;function Yd(e,t,a){var s,l,d,m,p,u,g=0,N=!1,T=!1,F=!0;if(typeof e!="function")throw new TypeError(Xd);t=Yr(t)||0,Q(a)&&(N=!0,T="maxWait"in a,d=T?Zd(Yr(a.maxWait)||0,t):d,F="trailing"in a?!0:F);function U(I){var E=s,b=l;return s=l=void 0,g=I,m=e.apply(b,E),m}function M(I){return g=I,p=setTimeout(R,t),N?U(I):m}function D(I){var E=I-u,b=I-g,z=t-E;return T?Jd(z,d-b):z}function C(I){var E=I-u,b=I-g;return u===void 0||E>=t||E<0||T&&b>=d}function R(){var I=ht();if(C(I))return G(I);p=setTimeout(R,D(I))}function G(I){return p=void 0,F&&s?U(I):(s=l=void 0,m)}function L(){p!==void 0&&clearTimeout(p),g=0,s=u=l=p=void 0}function W(){return p===void 0?m:G(ht())}function $(){var I=ht(),E=C(I);if(s=arguments,l=this,u=I,E){if(p===void 0)return M(u);if(T)return clearTimeout(p),p=setTimeout(R,t),U(u)}return p===void 0&&(p=setTimeout(R,t)),m}return $.cancel=L,$.flush=W,$}function Et(e,t,a){(a!==void 0&&!Be(e[t],a)||a===void 0&&!(t in e))&&Dt(e,t,a)}function Qd(e){return ce(e)&&it(e)}function It(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function ec(e){return Ee(e,Ve(e))}function tc(e,t,a,s,l,d,m){var p=It(e,a),u=It(t,a),g=m.get(u);if(g){Et(e,a,g);return}var N=d?d(p,u,a+"",e,t,m):void 0,T=N===void 0;if(T){var F=se(u),U=!F&&Le(u),M=!F&&!U&&zt(u);N=u,F||U||M?se(p)?N=p:Qd(p)?N=Ga(p):U?(T=!1,N=nn(u,!0)):M?(T=!1,N=cn(u,!0)):N=[]:rn(u)||et(u)?(N=p,et(p)?N=ec(p):(!Q(p)||At(p))&&(N=mn(u))):T=!1}T&&(m.set(u,N),l(N,u,s,d,m),m.delete(u)),Et(e,a,N)}function xn(e,t,a,s,l){e!==t&&Kd(t,function(d,m){if(l||(l=new de),Q(d))tc(e,t,m,a,xn,s,l);else{var p=s?s(It(e,m),d,m+"",e,t,l):void 0;p===void 0&&(p=d),Et(e,m,p)}},Ve)}function rc(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function ac(e,t){return t.length<2?e:en(e,Bl(t,0,-1))}function nc(e,t){return vn(e,t)}var Ct=li(function(e,t,a){xn(e,t,a)});function sc(e,t){return t=dt(t,e),e=ac(e,t),e==null||delete e[kt(rc(t))]}function ic(e){return rn(e)?void 0:e}var lc=1,oc=2,dc=4,Na=Ol(function(e,t){var a={};if(e==null)return a;var s=!1;t=Va(t,function(d){return d=dt(d,e),s||(s=d.length>1),d}),Ee(e,dn(e),a),s&&(a=De(a,lc|oc|dc,ic));for(var l=t.length;l--;)sc(a,t[l]);return a});function cc(e,t,a,s){if(!Q(e))return e;t=dt(t,e);for(var l=-1,d=t.length,m=d-1,p=e;p!=null&&++l<d;){var u=kt(t[l]),g=a;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(l!=m){var N=p[u];g=void 0,g===void 0&&(g=Q(N)?N:Ot(t[l+1])?[]:{})}Lt(p,u,g),p=p[u]}return e}function $t(e,t,a){return e==null?e:cc(e,t,a)}let ze=Fe.create(),gn=(e,t)=>`${e.method}:${e.baseURL??t.defaults.baseURL??""}${e.url}`,yn=e=>e.status===204&&e.headers["precognition-success"]==="true";const nt={},ue={get:(e,t={},a={})=>$e(Ce("get",e,t,a)),post:(e,t={},a={})=>$e(Ce("post",e,t,a)),patch:(e,t={},a={})=>$e(Ce("patch",e,t,a)),put:(e,t={},a={})=>$e(Ce("put",e,t,a)),delete:(e,t={},a={})=>$e(Ce("delete",e,t,a)),use(e){return ze=e,ue},axios(){return ze},fingerprintRequestsUsing(e){return gn=e===null?()=>null:e,ue},determineSuccessUsing(e){return yn=e,ue}},Ce=(e,t,a,s)=>({url:t,method:e,...s,...["get","delete"].includes(e)?{params:Ct({},a,s==null?void 0:s.params)}:{data:Ct({},a,s==null?void 0:s.data)}}),$e=(e={})=>{const t=[mc,uc,pc].reduce((a,s)=>s(a),e);return(t.onBefore??(()=>!0))()===!1?Promise.resolve(null):((t.onStart??(()=>null))(),ze.request(t).then(async a=>{t.precognitive&&Fa(a);const s=a.status;let l=a;return t.precognitive&&t.onPrecognitionSuccess&&yn(l)&&(l=await Promise.resolve(t.onPrecognitionSuccess(l)??l)),t.onSuccess&&fc(s)&&(l=await Promise.resolve(t.onSuccess(l)??l)),(Sa(t,s)??(m=>m))(l)??l},a=>hc(a)?Promise.reject(a):(t.precognitive&&Fa(a.response),(Sa(t,a.response.status)??((l,d)=>Promise.reject(d)))(a.response,a))).finally(t.onFinish??(()=>null)))},mc=e=>{const t=e.only??e.validate;return{...e,timeout:e.timeout??ze.defaults.timeout??3e4,precognitive:e.precognitive!==!1,fingerprint:typeof e.fingerprint>"u"?gn(e,ze):e.fingerprint,headers:{...e.headers,"Content-Type":vc(e),...e.precognitive!==!1?{Precognition:!0}:{},...t?{"Precognition-Validate-Only":Array.from(t).join()}:{}}}},fc=e=>e>=200&&e<300,uc=e=>{var t;return typeof e.fingerprint!="string"||((t=nt[e.fingerprint])==null||t.abort(),delete nt[e.fingerprint]),e},pc=e=>typeof e.fingerprint!="string"||e.signal||e.cancelToken||!e.precognitive?e:(nt[e.fingerprint]=new AbortController,{...e,signal:nt[e.fingerprint].signal}),Fa=e=>{var t;if(((t=e.headers)==null?void 0:t.precognition)!=="true")throw Error("Did not receive a Precognition response. Ensure you have the Precognition middleware in place for the route.")},hc=e=>{var t;return!Ua(e)||typeof((t=e.response)==null?void 0:t.status)!="number"||Ma(e)},Sa=(e,t)=>({401:e.onUnauthorized,403:e.onForbidden,404:e.onNotFound,409:e.onConflict,422:e.onValidationError,423:e.onLocked})[t],vc=e=>{var t,a,s;return((t=e.headers)==null?void 0:t["Content-Type"])??((a=e.headers)==null?void 0:a["Content-type"])??((s=e.headers)==null?void 0:s["content-type"])??(bn(e.data)?"multipart/form-data":"application/json")},bn=e=>Kt(e)||typeof e=="object"&&e!==null&&Object.values(e).some(t=>bn(t)),Kt=e=>typeof File<"u"&&e instanceof File||e instanceof Blob||typeof FileList<"u"&&e instanceof FileList&&e.length>0,Ta=e=>typeof e=="string"?e:e(),Ea=e=>typeof e=="string"?e.toLowerCase():e(),xc=(e,t={})=>{const a={errorsChanged:[],touchedChanged:[],validatingChanged:[],validatedChanged:[]};let s=!1,l=!1;const d=v=>v!==l?(l=v,a.validatingChanged):[];let m=[];const p=v=>{const j=[...new Set(v)];return m.length!==j.length||!j.every(n=>m.includes(n))?(m=j,a.validatedChanged):[]},u=()=>m.filter(v=>typeof T[v]>"u");let g=[];const N=v=>{const j=[...new Set(v)];return g.length!==j.length||!j.every(n=>g.includes(n))?(g=j,a.touchedChanged):[]};let T={};const F=v=>{const j=yc(v);return nc(T,j)?[]:(T=j,a.errorsChanged)},U=v=>{const j={...T};return delete j[Xe(v)],F(j)},M=()=>Object.keys(T).length>0;let D=1500;const C=v=>{D=v,I.cancel(),I=$()};let R=t,G=null,L=[],W=null;const $=()=>Yd(v=>{e({get:(j,n={},x={})=>ue.get(j,z(n),E(x,v,n)),post:(j,n={},x={})=>ue.post(j,z(n),E(x,v,n)),patch:(j,n={},x={})=>ue.patch(j,z(n),E(x,v,n)),put:(j,n={},x={})=>ue.put(j,z(n),E(x,v,n)),delete:(j,n={},x={})=>ue.delete(j,z(n),E(x,v,n))}).catch(j=>{var n;return Ma(j)||Ua(j)&&((n=j.response)==null?void 0:n.status)===422?null:Promise.reject(j)})},D,{leading:!0,trailing:!0});let I=$();const E=(v,j,n={})=>{const x={...v,...j},A=Array.from(x.only??x.validate??g);return{...j,...Xn(v,j),only:A,timeout:x.timeout??5e3,onValidationError:(P,w)=>([...p([...m,...A]),...F(Ct(Na({...T},A),P.data.errors))].forEach(f=>f()),x.onValidationError?x.onValidationError(P,w):Promise.reject(w)),onSuccess:P=>(p([...m,...A]).forEach(w=>w()),x.onSuccess?x.onSuccess(P):P),onPrecognitionSuccess:P=>([...p([...m,...A]),...F(Na({...T},A))].forEach(w=>w()),x.onPrecognitionSuccess?x.onPrecognitionSuccess(P):P),onBefore:()=>x.onBeforeValidation&&x.onBeforeValidation({data:n,touched:g},{data:R,touched:L})===!1||(x.onBefore||(()=>!0))()===!1?!1:(W=g,G=n,!0),onStart:()=>{d(!0).forEach(P=>P()),(x.onStart??(()=>null))()},onFinish:()=>{d(!1).forEach(P=>P()),L=W,R=G,W=G=null,(x.onFinish??(()=>null))()}}},b=(v,j,n)=>{if(typeof v>"u"){const x=Array.from((n==null?void 0:n.only)??(n==null?void 0:n.validate)??[]);N([...g,...x]).forEach(A=>A()),I(n??{});return}if(Kt(j)&&!s){console.warn('Precognition file validation is not active. Call the "validateFiles" function on your form to enable it.');return}v=Xe(v),tt(R,v)!==j&&(N([v,...g]).forEach(x=>x()),I(n??{}))},z=v=>s===!1?Rt(v):v,o={touched:()=>g,validate(v,j,n){return typeof v=="object"&&!("target"in v)&&(n=v,v=j=void 0),b(v,j,n),o},touch(v){const j=Array.isArray(v)?v:[Xe(v)];return N([...g,...j]).forEach(n=>n()),o},validating:()=>l,valid:u,errors:()=>T,hasErrors:M,setErrors(v){return F(v).forEach(j=>j()),o},forgetError(v){return U(v).forEach(j=>j()),o},reset(...v){if(v.length===0)N([]).forEach(j=>j());else{const j=[...g];v.forEach(n=>{j.includes(n)&&j.splice(j.indexOf(n),1),$t(R,n,tt(t,n))}),N(j).forEach(n=>n())}return o},setTimeout(v){return C(v),o},on(v,j){return a[v].push(j),o},validateFiles(){return s=!0,o}};return o},gc=e=>Object.keys(e).reduce((t,a)=>({...t,[a]:Array.isArray(e[a])?e[a][0]:e[a]}),{}),yc=e=>Object.keys(e).reduce((t,a)=>({...t,[a]:typeof e[a]=="string"?[e[a]]:e[a]}),{}),Xe=e=>typeof e!="string"?e.target.name:e,Rt=e=>{const t={...e};return Object.keys(t).forEach(a=>{const s=t[a];if(s!==null){if(Kt(s)){delete t[a];return}if(Array.isArray(s)){t[a]=Object.values(Rt({...s}));return}if(typeof s=="object"){t[a]=Rt(t[a]);return}}}),t},bc=(e,t,a,s={})=>{const l=y.useRef(null);l.current===null&&(l.current=He(a));const d=y.useRef(null);d.current===null&&(d.current=Object.keys(l));const m=y.useRef(l.current),[p,u]=y.useState([]),[g,N]=y.useState([]),[T,F]=y.useState(!1),[U,M]=y.useState(!1),[D,C]=y.useState({}),[R,G]=y.useState(!1),[L,W]=y.useState(()=>He(l.current)),$=y.useRef(null);$.current===null&&($.current=xc(b=>b[Ea(e)](Ta(t),m.current,s),a).on("validatingChanged",()=>{F($.current.validating())}).on("validatedChanged",()=>{u($.current.valid())}).on("touchedChanged",()=>{N($.current.touched())}).on("errorsChanged",()=>{G($.current.hasErrors()),C(gc($.current.errors())),u($.current.valid())}));const I=b=>({...b,precognitive:!1,onStart:()=>{M(!0),(b.onStart??(()=>null))()},onFinish:()=>{M(!1),(b.onFinish??(()=>null))()},onValidationError:(z,o)=>($.current.setErrors(z.data.errors),b.onValidationError?b.onValidationError(z):Promise.reject(o))}),E={data:L,setData(b,z){if(typeof b=="object")m.current=b,W(b);else{const o=He(m.current);m.current=$t(o,b,z),W(m.current)}return E},touched(b){return typeof b=="string"?g.includes(b):g.length>0},touch(b){return $.current.touch(b),E},validate(b,z){return typeof b=="object"&&!("target"in b)&&(z=b,b=void 0),typeof b>"u"?$.current.validate(z):(b=Xe(b),$.current.validate(b,tt(m.current,b),z)),E},validating:T,valid(b){return p.includes(b)},invalid(b){return typeof D[b]<"u"},errors:D,hasErrors:R,setErrors(b){return $.current.setErrors(b),E},forgetError(b){return $.current.forgetError(b),E},reset(...b){const z=He(l.current);return b.length===0?(m.current=z,W(z)):(b.forEach(o=>$t(m.current,o,tt(z,o))),W(m.current)),$.current.reset(...b),E},setValidationTimeout(b){return $.current.setTimeout(b),E},processing:U,async submit(b={}){return ue[Ea(e)](Ta(t),m.current,I(b))},validateFiles(){return $.current.validateFiles(),E},validator(){return $.current}};return E},Ia=({user:e,allUsers:t,departments:a,designations:s,roles:l,setUsers:d,open:m,closeModal:p,editMode:u=!1})=>{var P;const[g,N]=y.useState(!1),[T,F]=y.useState(!1),[U,M]=y.useState((e==null?void 0:e.profile_image_url)||(e==null?void 0:e.profile_image)||null),[D,C]=y.useState(null),[R,G]=y.useState(t),[L,W]=y.useState("lg"),[$,I]=y.useState(s||[]),[E,b]=y.useState(t||[]),z=()=>{var O;if(typeof window>"u")return"lg";const f=((O=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:O.trim())||"12px",_=parseInt(f);return _===0?"none":_<=4?"sm":_<=8?"md":_<=16?"lg":"full"};y.useEffect(()=>{typeof window<"u"&&W(z())},[]);const o=bc(u?"put":"post",u&&(e!=null&&e.id)?route("users.update",{user:e.id}):route("users.store"),{id:(e==null?void 0:e.id)||"",name:(e==null?void 0:e.name)||"",user_name:(e==null?void 0:e.user_name)||"",gender:(e==null?void 0:e.gender)||"",birthday:(e==null?void 0:e.birthday)||"",date_of_joining:(e==null?void 0:e.date_of_joining)||"",address:(e==null?void 0:e.address)||"",employee_id:(e==null?void 0:e.employee_id)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||"",department_id:(e==null?void 0:e.department_id)||"",designation_id:(e==null?void 0:e.designation_id)||"",report_to:(e==null?void 0:e.report_to)||"",password:"",password_confirmation:"",roles:((P=e==null?void 0:e.roles)==null?void 0:P.map(w=>typeof w=="object"?w.name:w))||[],single_device_login_enabled:(e==null?void 0:e.single_device_login_enabled)||(e==null?void 0:e.single_device_login)||!1,profile_image:null});y.useEffect(()=>{if(o.data.department_id){const w=(s==null?void 0:s.filter(f=>String(f.department_id)===String(o.data.department_id)))||[];I(w),o.data.designation_id&&(w.some(_=>String(_.id)===String(o.data.designation_id))||n("designation_id",""))}else I(s||[])},[o.data.department_id,s]),y.useEffect(()=>{if(o.data.department_id&&o.data.designation_id){const w=s==null?void 0:s.find(_=>String(_.id)===String(o.data.designation_id));if(!w){b([]),n("report_to","");return}if(w.hierarchy_level===1){b([]),n("report_to","");return}const f=(t==null?void 0:t.filter(_=>{var ve;const O=_.department_id||((ve=_.department)==null?void 0:ve.id),c=String(O)===String(o.data.department_id),H=s==null?void 0:s.find(q=>String(q.id)===String(_.designation_id)),X=H&&H.hierarchy_level<w.hierarchy_level,Z=!u||!o.data.id||_.id!==o.data.id;return c&&X&&Z}))||[];b(f),o.data.report_to&&(f.some(O=>String(O.id)===String(o.data.report_to))||n("report_to",""))}else if(o.data.department_id){const w=(t==null?void 0:t.filter(f=>{var H;const _=f.department_id||((H=f.department)==null?void 0:H.id),O=String(_)===String(o.data.department_id),c=!u||!o.data.id||f.id!==o.data.id;return O&&c}))||[];b(w)}else{const w=(t==null?void 0:t.filter(f=>!u||!o.data.id||f.id!==o.data.id))||[];b(w)}},[o.data.department_id,o.data.designation_id,t,o.data.id,u,s]),y.useEffect(()=>{(e!=null&&e.profile_image_url||e!=null&&e.profile_image)&&M(e.profile_image_url||e.profile_image)},[e]);const v=async()=>{if(D){const f=D.type;if(!["image/jpeg","image/jpg","image/png"].includes(f)){Y.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:""});return}o.setData("profile_image",D)}const w=new Promise(async(f,_)=>{try{await o.submit({preserveScroll:!0,transform:O=>({...O,single_device_login_enabled:O.single_device_login_enabled?1:0}),onSuccess:O=>{d&&d(u?c=>c.map(H=>H.id===O.data.user.id?O.data.user:H):c=>[...c,O.data.user]),p(),f([O.data.message||`User ${u?"updated":"created"} successfully`])},onError:O=>{const c=Object.values(O).flat();c.length>0?_(c.join(", ")):_(`Failed to ${u?"update":"create"} user. Please check the form for errors.`)}})}catch(O){if(console.error("Form submission error:",O),O.response)if(O.response.status===422){const c=O.response.data.errors||{},H=Object.values(c).flat();_(H.length>0?H.join(", "):"Validation failed. Please check the form.")}else O.response.status===500?_(O.response.data.message||"Server error occurred. Please try again later."):_(`HTTP Error ${O.response.status}: ${O.response.data.message||"An unexpected error occurred."}`);else O.request?_("No response received from the server. Please check your internet connection."):_("An error occurred while setting up the request.")}});Y.promise(w,{pending:`${u?"Updating":"Creating"} user...`,success:{render({data:f}){return f.join(", ")}},error:{render({data:f}){return f}}})},j=w=>{const f=w.target.files[0];if(f){const _=URL.createObjectURL(f);M(_),C(f)}},n=(w,f)=>{o.setData(w,f),o.touched(w)&&o.validate(w)},x=()=>{N(!g)},A=()=>{var w,f,_,O,c;if(u)return o.isDirty&&!o.processing;{const H=((w=o.data.name)==null?void 0:w.trim())&&((f=o.data.user_name)==null?void 0:f.trim())&&((_=o.data.email)==null?void 0:_.trim())&&((O=o.data.password)==null?void 0:O.trim())&&((c=o.data.password_confirmation)==null?void 0:c.trim()),X=o.data.password===o.data.password_confirmation;return H&&X&&!o.processing}};return r.jsx(An,{isOpen:m,onClose:p,size:"3xl",radius:L,scrollBehavior:"inside",classNames:{base:"backdrop-blur-md max-h-[95vh] my-2",backdrop:"bg-black/50 backdrop-blur-sm",header:"border-b border-divider flex-shrink-0",body:"overflow-y-auto max-h-[calc(95vh-160px)]",footer:"border-t border-divider flex-shrink-0",closeButton:"hover:bg-white/5 active:bg-white/10"},style:{border:"var(--borderWidth, 2px) solid var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:r.jsx(On,{children:w=>r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"flex flex-col gap-1 py-4",style:{borderColor:"var(--theme-divider, #E4E4E7)",fontFamily:'var(--fontFamily, "Inter")'},children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zn,{className:"w-5 h-5 sm:w-6 sm:h-6",style:{color:"var(--theme-primary)"}}),r.jsxs("div",{children:[r.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:u?"Edit User":"Add New User"}),r.jsx("p",{className:"text-sm text-default-500 mt-0.5",style:{fontFamily:'var(--fontFamily, "Inter")'},children:u?"Update user information":"Create a new user account"})]})]})}),r.jsx(Ln,{className:"py-4 px-4 sm:py-6 sm:px-6 overflow-y-auto",style:{fontFamily:'var(--fontFamily, "Inter")'},children:r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsxs("div",{className:"relative group cursor-pointer",onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),children:[r.jsx(kr,{src:U,name:o.data.name,size:"xl",className:"w-32 h-32 text-2xl transition-all duration-300",style:{border:"4px solid var(--theme-divider, #E4E4E7)",filter:T?"brightness(70%)":"brightness(100%)"}}),r.jsxs("label",{htmlFor:"icon-button-file",className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-opacity duration-300",style:{opacity:T?1:0},children:[r.jsx("input",{accept:"image/*",id:"icon-button-file",type:"file",className:"hidden",onChange:j}),r.jsx(Jn,{className:"w-8 h-8 text-white"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(re,{label:"Full Name",placeholder:"Enter full name",value:o.data.name,onChange:f=>n("name",f.target.value),onBlur:()=>o.validate("name"),isInvalid:o.invalid("name"),errorMessage:o.errors.name,isRequired:!0,variant:"bordered",size:"sm",radius:L,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),r.jsx(re,{label:"Username",placeholder:"Enter username",value:o.data.user_name,onChange:f=>n("user_name",f.target.value),onBlur:()=>o.validate("user_name"),isInvalid:o.invalid("user_name"),errorMessage:o.errors.user_name,isRequired:!0,variant:"bordered",size:"sm",radius:L,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),r.jsx(re,{label:"Email",type:"email",placeholder:"Enter email address",value:o.data.email,onChange:f=>n("email",f.target.value),onBlur:()=>o.validate("email"),isInvalid:o.invalid("email"),errorMessage:o.errors.email,isRequired:!0,variant:"bordered",size:"sm",radius:L,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),r.jsx(re,{label:"Phone",placeholder:"Enter phone number",value:o.data.phone,onChange:f=>n("phone",f.target.value),onBlur:()=>o.validate("phone"),isInvalid:o.invalid("phone"),errorMessage:o.errors.phone,variant:"bordered",size:"sm",radius:L,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),r.jsx(Se,{label:"Department",placeholder:"Select department",selectedKeys:o.data.department_id?new Set([String(o.data.department_id)]):new Set,onSelectionChange:f=>{const _=Array.from(f)[0];n("department_id",_||"")},onClose:()=>o.validate("department_id"),isInvalid:o.invalid("department_id"),errorMessage:o.errors.department_id,variant:"bordered",size:"sm",radius:L,classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:a==null?void 0:a.map(f=>r.jsx(ee,{value:f.id,children:f.name},f.id))}),r.jsx(Se,{label:"Designation",placeholder:"Select designation",selectedKeys:o.data.designation_id?new Set([String(o.data.designation_id)]):new Set,onSelectionChange:f=>{const _=Array.from(f)[0];n("designation_id",_||"")},onClose:()=>o.validate("designation_id"),isInvalid:o.invalid("designation_id"),errorMessage:o.errors.designation_id,isDisabled:!o.data.department_id||$.length===0,variant:"bordered",size:"sm",radius:L,classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:$==null?void 0:$.map(f=>r.jsx(ee,{value:f.id,children:f.title||f.name},f.id))}),r.jsxs(Se,{label:"Gender",placeholder:"Select gender",selectedKeys:o.data.gender?new Set([o.data.gender]):new Set,onSelectionChange:f=>{const _=Array.from(f)[0];n("gender",_||"")},onClose:()=>o.validate("gender"),isInvalid:o.invalid("gender"),errorMessage:o.errors.gender,variant:"bordered",size:"sm",radius:L,classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[r.jsx(ee,{value:"male",children:"Male"},"male"),r.jsx(ee,{value:"female",children:"Female"},"female"),r.jsx(ee,{value:"other",children:"Other"},"other")]}),r.jsx(re,{label:"Employee ID",placeholder:"Enter employee ID",value:o.data.employee_id,onChange:f=>n("employee_id",f.target.value),onBlur:()=>o.validate("employee_id"),isInvalid:o.invalid("employee_id"),errorMessage:o.errors.employee_id,variant:"bordered",size:"sm",radius:L,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),r.jsx(re,{label:"Date of Birth",type:"date",value:o.data.birthday,onChange:f=>n("birthday",f.target.value),onBlur:()=>o.validate("birthday"),isInvalid:o.invalid("birthday"),errorMessage:o.errors.birthday,variant:"bordered",size:"sm",radius:L,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),r.jsx(re,{label:"Date of Joining",type:"date",value:o.data.date_of_joining,onChange:f=>n("date_of_joining",f.target.value),onBlur:()=>o.validate("date_of_joining"),isInvalid:o.invalid("date_of_joining"),errorMessage:o.errors.date_of_joining,variant:"bordered",size:"sm",radius:L,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(Mn,{label:"Reports To",placeholder:o.data.department_id?o.data.designation_id?E.length===0?"No supervisor needed (Top-level position)":"Search for a supervisor...":"Select designation first":"Select department first",selectedKey:o.data.report_to?String(o.data.report_to):null,onSelectionChange:f=>{n("report_to",f||"")},isInvalid:o.invalid("report_to"),errorMessage:o.errors.report_to,isDisabled:!o.data.department_id||!o.data.designation_id||E.length===0,variant:"bordered",size:"sm",radius:L,classNames:{base:"w-full"},style:{fontFamily:'var(--fontFamily, "Inter")'},allowsCustomValue:!1,items:E||[],children:f=>r.jsx(ee,{textValue:f.name,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(kr,{src:f.profile_image_url||f.profile_image,name:f.name,size:"sm",className:"flex-shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-small font-medium",children:f.name}),f.email&&r.jsx("span",{className:"text-tiny text-default-400",children:f.email})]})]})},f.id)}),o.data.designation_id&&E.length===0&&r.jsx("p",{className:"text-xs text-default-400 px-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"This designation is at the top of the hierarchy and doesn't require a supervisor."})]})]}),r.jsx(re,{label:"Address",placeholder:"Enter address",value:o.data.address,onChange:f=>n("address",f.target.value),onBlur:()=>o.validate("address"),isInvalid:o.invalid("address"),errorMessage:o.errors.address,variant:"bordered",size:"sm",radius:L,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),r.jsx("div",{className:"col-span-full",children:r.jsx(Se,{label:"Roles",placeholder:"Select user roles",selectionMode:"multiple",selectedKeys:new Set(o.data.roles),onSelectionChange:f=>{const _=Array.from(f);n("roles",_)},onClose:()=>o.validate("roles"),isInvalid:o.invalid("roles"),errorMessage:o.errors.roles,variant:"bordered",size:"sm",radius:L,classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},renderValue:f=>r.jsx("div",{className:"flex flex-wrap gap-1",children:f.map(_=>r.jsx(le,{size:"sm",color:"secondary",variant:"flat",children:_.textValue},_.key))}),children:l==null?void 0:l.map(f=>{const _=typeof f=="object"?f.name:f;return r.jsx(ee,{value:_,textValue:_,children:_},_)})})}),r.jsx("div",{className:"col-span-full",children:r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)"},children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ds,{className:"w-4 h-4",style:{color:"var(--theme-primary)"}}),r.jsx("span",{className:"text-sm font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Single Device Login"})]}),r.jsx("p",{className:"text-xs text-default-500 mt-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Restrict user to login from only one device at a time"})]}),r.jsx(Ra,{isSelected:o.data.single_device_login_enabled,onValueChange:f=>n("single_device_login_enabled",f),color:o.data.single_device_login_enabled?"warning":"default",size:"sm"})]})}),!u&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(re,{label:"Password",type:g?"text":"password",placeholder:"Enter password",value:o.data.password,onChange:f=>n("password",f.target.value),onBlur:()=>o.validate("password"),isInvalid:o.invalid("password"),errorMessage:o.errors.password,isRequired:!u,variant:"bordered",size:"sm",radius:L,endContent:r.jsx("button",{className:"focus:outline-none",type:"button",onClick:x,children:g?r.jsx(Hr,{className:"w-4 h-4 text-default-400"}):r.jsx(qr,{className:"w-4 h-4 text-default-400"})}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),r.jsx(re,{label:"Confirm Password",type:g?"text":"password",placeholder:"Confirm password",value:o.data.password_confirmation,onChange:f=>n("password_confirmation",f.target.value),onBlur:()=>o.validate("password_confirmation"),isInvalid:o.invalid("password_confirmation")||o.data.password!==o.data.password_confirmation&&o.data.password_confirmation,errorMessage:o.errors.password_confirmation||(o.data.password!==o.data.password_confirmation&&o.data.password_confirmation?"Passwords do not match":""),isRequired:!u,variant:"bordered",size:"sm",radius:L,endContent:r.jsx("button",{className:"focus:outline-none",type:"button",onClick:x,children:g?r.jsx(Hr,{className:"w-4 h-4 text-default-400"}):r.jsx(qr,{className:"w-4 h-4 text-default-400"})}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})]})]})}),r.jsxs(Un,{className:"flex justify-between px-4 sm:px-6 py-3 sm:py-4",style:{borderColor:"var(--theme-divider, #E4E4E7)",fontFamily:'var(--fontFamily, "Inter")'},children:[r.jsx(ae,{variant:"light",onPress:p,isDisabled:o.processing,radius:L,style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),r.jsx(ae,{variant:"solid",color:"primary",onPress:v,isLoading:o.processing,isDisabled:!A(),radius:L,style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:u?"Update User":"Add User"})]})]})})})},jc=({title:e,roles:t,departments:a,designations:s})=>{var er,tr,rr,ar,nr,sr,ir,lr,or,dr,cr,mr,fr,ur,pr,hr,vr,xr,gr,yr,br,jr,_r,wr,Nr,Fr,Sr,Tr,Er,Ir,Cr,$r,Rr,Pr;const[l,d]=y.useState(!1),[m,p]=y.useState(!1),[u,g]=y.useState(!1),[N,T]=y.useState(!1),[F,U]=y.useState("lg"),M=()=>{var B;if(typeof window>"u")return"lg";const h=((B=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:B.trim())||"12px",S=parseInt(h);return S===0?"none":S<=4?"sm":S<=8?"md":S<=12?"lg":"xl"};y.useEffect(()=>{typeof window<"u"&&U(M())},[]),y.useEffect(()=>{const i=()=>{d(window.innerWidth<640),p(window.innerWidth<768),g(window.innerWidth>=1025),T(window.innerWidth>=641&&window.innerWidth<=1024)};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const[D,C]=y.useState([]),[R,G]=y.useState(!0),[L,W]=y.useState(null),[$,I]=y.useState(0),[E,b]=y.useState(1),[z,o]=y.useState(null),[v,j]=y.useState({search:"",role:"all",status:"all",department:"all"}),[n,x]=y.useState(!1),[A,P]=y.useState("table"),[w,f]=y.useState({currentPage:1,perPage:10,total:D.length}),[_,O]=y.useState({}),[c,H]=y.useState({overview:{total_users:0,active_users:0,inactive_users:0,deleted_users:0,total_roles:0,total_departments:0},distribution:{by_role:[],by_department:[],by_status:[]},activity:{recent_registrations:{new_users_30_days:0,new_users_90_days:0,new_users_year:0,recently_active:0},user_growth_rate:0,current_month_registrations:0},security:{access_metrics:{users_with_roles:0,users_without_roles:0,admin_users:0,regular_users:0},role_distribution:[]},health:{status_ratio:{active_percentage:0,inactive_percentage:0,deleted_percentage:0},system_metrics:{user_activation_rate:0,role_coverage:0,department_coverage:0}},quick_metrics:{total_users:0,active_ratio:0,role_diversity:0,department_diversity:0,recent_activity:0,system_health_score:0}}),X=y.useMemo(()=>({data:D,total:$,current_page:w.currentPage,per_page:w.perPage,last_page:E}),[D,$,w.currentPage,w.perPage,E]),Z=y.useCallback(async()=>{try{const{data:i}=await Fe.get(route("users.stats"));i.stats&&H(i.stats)}catch(i){console.error("Error fetching user stats:",i)}},[]),ve=y.useCallback(async()=>{G(!0);try{const i=await Fe.get(route("users.paginate"),{params:{page:w.currentPage,perPage:w.perPage,search:v.search||void 0,role:v.role!=="all"?v.role:void 0,status:v.status!=="all"?v.status:void 0,department:v.department!=="all"?v.department:void 0}});if(i.status===200){const{users:h}=i.data;h.data&&Array.isArray(h.data)?(C(h.data),h.meta?(I(h.meta.total||0),b(h.meta.last_page||1)):(I(h.total||h.data.length),b(h.last_page||1))):Array.isArray(h)?(C(h),I(h.length),b(1)):(console.error("Unexpected users data format:",h),C([]),I(0),b(1))}}catch(i){console.error("Error fetching users:",i),Y.error("Failed to load users data"),C([])}finally{G(!1)}},[v,w.currentPage,w.perPage]);y.useEffect(()=>{ve()},[ve]),y.useEffect(()=>{Z();const i=setInterval(Z,6e4);return()=>clearInterval(i)},[Z]);const q=(i,h)=>{j(S=>({...S,[i]:h})),f(S=>({...S,currentPage:1}))},ke=i=>{f(h=>({...h,currentPage:i})),window.scrollTo({top:0,behavior:"smooth"})},jn=i=>{f(h=>({...h,currentPage:1,perPage:i}))},je=y.useCallback((i,h=null)=>{o(i),W(h)},[]),Xt=y.useCallback(()=>{o(null),W(null)},[]),ct=y.useCallback(i=>{C(i)},[]),_n=y.useCallback(i=>{C(h=>h.map(S=>S.id===i.id?{...S,...i}:S))},[]),wn=y.useCallback(i=>{C(h=>h.filter(S=>S.id!==i)),Z()},[Z]),Zt=y.useCallback((i,h)=>{C(S=>S.map(B=>B.id===i?{...B,active:h}:B)),Z()},[Z]),Nn=y.useCallback((i,h)=>{C(S=>S.map(B=>B.id===i?{...B,roles:h}:B)),Z()},[Z]),Jt=y.useCallback(async(i,h)=>{var S,B;O(K=>({...K,[i]:!0}));try{const K=await Fe.post(route("admin.users.devices.toggle",{userId:i}));K.data.success&&(C(We=>We.map(_e=>_e.id===i?{..._e,single_device_login_enabled:K.data.single_device_login_enabled}:_e)),Y.success(K.data.message))}catch(K){console.error("Error toggling single device login:",K),Y.error(((B=(S=K.response)==null?void 0:S.data)==null?void 0:B.message)||"Failed to toggle single device login")}finally{O(K=>({...K,[i]:!1}))}},[]),Yt=y.useCallback(async i=>{O(h=>({...h,[i]:!0}));try{const h=await Fe.post(route("admin.users.devices.reset",{userId:i}),{reason:"Admin reset via user management"});h.data.success&&(C(S=>S.map(B=>B.id===i?{...B,active_device:null}:B)),Y.success(h.data.message||"User devices have been reset"))}catch(h){console.error("Error resetting user devices:",h),Y.error("Failed to reset user devices")}finally{O(h=>({...h,[i]:!1}))}},[]);y.useCallback(async i=>{try{const h=await Fe.get(route("admin.users.devices",{userId:i}));if(h.data.success){const S=h.data.devices;if(S.length===0)Y.info("User has no registered devices");else{const B=S.filter(K=>K.is_active).length;Y.info(`User has ${S.length} device(s): ${B} active, ${S.length-B} inactive`)}}}catch(h){console.error("Error fetching user devices:",h),Y.error("Failed to fetch device information")}},[]);const Qt=(i,h="w-4 h-4")=>{const S=(i==null?void 0:i.toLowerCase())||"";return S.includes("mobile")||S.includes("android")||S.includes("iphone")?r.jsx(Pe,{className:`${h} text-primary`}):S.includes("tablet")||S.includes("ipad")?r.jsx(Pa,{className:`${h} text-secondary`}):r.jsx(La,{className:`${h} text-default-500`})},Fn=i=>{const h=(i==null?void 0:i.toLowerCase())||"";return h.includes("mobile")||h.includes("android")||h.includes("iphone")?"Mobile":h.includes("tablet")||h.includes("ipad")?"Tablet":"Desktop"},Sn=({user:i,index:h})=>r.jsx(me,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 h-full min-h-[320px]",style:{background:`linear-gradient(135deg, 
          color-mix(in srgb, var(--theme-content1) 90%, transparent) 20%, 
          color-mix(in srgb, var(--theme-content2) 80%, transparent) 80%)`,borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:r.jsxs(fe,{className:"p-3 flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-start gap-2 mb-3 pb-2 border-b border-white/10",children:[r.jsx($a,{avatarProps:{radius:"md",src:(i==null?void 0:i.profile_image_url)||(i==null?void 0:i.profile_image),size:"sm",fallback:r.jsx(Ze,{className:"w-4 h-4"}),style:{borderColor:"var(--theme-primary)",borderWidth:"2px"}},name:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-semibold text-foreground text-sm line-clamp-1",children:i.name}),r.jsxs("span",{className:"text-default-500 text-xs line-clamp-1",children:["ID: ",i.id]})]}),classNames:{wrapper:"flex-1 min-w-0",name:"text-sm font-semibold",description:"text-xs text-default-500"}}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(yt,{content:"Edit User",size:"sm",children:r.jsx(ae,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-primary min-w-6 w-6 h-6",onPress:()=>je("edit",i),children:r.jsx(Oa,{className:"w-3 h-3"})})}),r.jsxs(vt,{placement:"bottom-end",children:[r.jsx(xt,{children:r.jsx(ae,{isIconOnly:!0,size:"sm",variant:"ghost",radius:F,isDisabled:_[i.id],className:"min-w-6 w-6 h-6",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)"},children:r.jsx(_t,{className:"w-3 h-3"})})}),r.jsxs(gt,{"aria-label":"Device management actions",variant:"bordered",className:"min-w-[180px]",style:{background:"color-mix(in srgb, var(--theme-content1) 95%, transparent)",backdropFilter:"blur(16px)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:[r.jsx(oe,{startContent:i.single_device_login?r.jsx(Je,{className:"w-3 h-3"}):r.jsx(Ye,{className:"w-3 h-3"}),onPress:()=>Jt(i.id,!i.single_device_login),isDisabled:_[i.id],className:"text-xs",children:i.single_device_login?"Disable Lock":"Enable Lock"},"toggle-device-lock"),i.single_device_login&&i.active_device&&r.jsx(oe,{startContent:r.jsx(Ne,{className:"w-3 h-3"}),onPress:()=>Yt(i.id),isDisabled:_[i.id],className:"text-xs",children:"Reset Device"},"reset-device"),r.jsx(oe,{startContent:r.jsx(Pe,{className:"w-3 h-3"}),onPress:()=>Vr.visit(route("admin.users.devices",{userId:i.id})),className:"text-xs",children:"Device History"},"view-devices"),r.jsx(oe,{startContent:r.jsx(Ze,{className:"w-3 h-3"}),onPress:()=>Vr.visit(route("profile",{user:i.id})),className:"text-xs",children:"View Profile"},"view-profile")]})]})]})]}),r.jsxs("div",{className:"space-y-2 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(jt,{className:"w-3 h-3 text-default-400 shrink-0"}),r.jsx("span",{className:"text-default-600 line-clamp-1 flex-1",children:i.email})]}),i.phone&&r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(bt,{className:"w-3 h-3 text-default-400 shrink-0"}),r.jsx("span",{className:"text-default-600 line-clamp-1",children:i.phone})]}),(i.department||i.department_id)&&r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(Re,{className:"w-3 h-3 text-default-400 shrink-0"}),r.jsx("span",{className:"text-default-600 line-clamp-1",children:typeof i.department=="string"?i.department:"N/A"})]})]}),r.jsxs("div",{className:"mb-3 p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-content2) 40%, transparent)"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-xs font-medium text-default-700",children:"Device Status"}),i.single_device_login&&i.active_device&&r.jsx(yt,{content:r.jsxs("div",{className:"p-2 max-w-xs",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Qt(i.active_device.user_agent,"w-4 h-4"),r.jsx("span",{className:"font-medium text-xs",children:i.active_device.device_name||"Unknown Device"})]}),r.jsxs("div",{className:"text-xs text-default-500",children:[Fn(i.active_device.user_agent)," ",i.active_device.is_active?" Active":" Inactive"]})]}),size:"sm",children:r.jsx("div",{className:"cursor-help",children:Qt(i.active_device.user_agent,"w-4 h-4")})})]}),r.jsx(le,{size:"sm",variant:"flat",color:i.single_device_login?i.active_device?"warning":"success":"default",startContent:i.single_device_login?i.active_device?r.jsx(Ye,{className:"w-3 h-3"}):r.jsx(Je,{className:"w-3 h-3"}):r.jsx(Ae,{className:"w-3 h-3"}),className:"text-xs",children:i.single_device_login?i.active_device?"Locked":"Free":"Disabled"})]}),r.jsxs("div",{className:"mt-auto space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-medium text-default-700",children:"Status"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ra,{size:"sm",isSelected:i.active,onValueChange:S=>Zt(i.id,S),color:i.active?"success":"danger",classNames:{wrapper:"group-data-[selected=true]:bg-success",thumb:"group-data-[selected=true]:ml-4"}}),r.jsx("span",{className:`text-xs font-medium ${i.active?"text-success":"text-danger"}`,children:i.active?"Active":"Inactive"})]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-medium text-default-700 mb-1 block",children:"Roles"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.roles&&i.roles.length>0?i.roles.slice(0,3).map((S,B)=>{const K=typeof S=="object"&&S!==null?S.name:S;return r.jsx(le,{size:"sm",variant:"flat",color:"secondary",className:"text-xs h-5",children:K},B)}):r.jsx(le,{size:"sm",variant:"bordered",color:"default",className:"text-xs h-5",children:"No Roles"}),i.roles&&i.roles.length>3&&r.jsxs(le,{size:"sm",variant:"bordered",color:"primary",className:"text-xs h-5",children:["+",i.roles.length-3]})]})]})]})]})}),Tn=y.useMemo(()=>{var i,h,S,B,K,We,_e,Ar,Or,Dr,Lr,Mr,Ur,zr;return[{title:"Total Users",value:((i=c==null?void 0:c.overview)==null?void 0:i.total_users)||0,icon:r.jsx(Ge,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All users"},{title:"Active Users",value:((h=c==null?void 0:c.overview)==null?void 0:h.active_users)||0,icon:r.jsx(Aa,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((B=(S=c==null?void 0:c.health)==null?void 0:S.status_ratio)==null?void 0:B.active_percentage)||0}% Active`},{title:"Inactive Users",value:((K=c==null?void 0:c.overview)==null?void 0:K.inactive_users)||0,icon:r.jsx(Yn,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:`${((_e=(We=c==null?void 0:c.health)==null?void 0:We.status_ratio)==null?void 0:_e.inactive_percentage)||0}% Inactive`},{title:"Total Roles",value:((Ar=c==null?void 0:c.overview)==null?void 0:Ar.total_roles)||0,icon:r.jsx(Ae,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Role diversity"},{title:"Role Coverage",value:`${((Dr=(Or=c==null?void 0:c.health)==null?void 0:Or.system_metrics)==null?void 0:Dr.role_coverage)||0}%`,icon:r.jsx(Qn,{className:"w-5 h-5"}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Users with roles"},{title:"Recent Activity",value:((Mr=(Lr=c==null?void 0:c.activity)==null?void 0:Lr.recent_registrations)==null?void 0:Mr.recently_active)||0,icon:r.jsx(Da,{className:"w-5 h-5"}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Active last 7 days"},{title:"System Health",value:`${((Ur=c==null?void 0:c.quick_metrics)==null?void 0:Ur.system_health_score)||0}%`,icon:r.jsx(Gr,{className:"w-5 h-5"}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Overall health"},{title:"Departments",value:((zr=c==null?void 0:c.overview)==null?void 0:zr.total_departments)||0,icon:r.jsx(Re,{className:"w-5 h-5"}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Department diversity"}]},[c]);return y.useMemo(()=>{const i=[];return i.push({label:l?"Add":"Add User",icon:r.jsx(mt,{className:"w-4 h-4"}),onPress:()=>je("add"),className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}),i.push({label:l?"":"Export",isIconOnly:l,icon:r.jsx(Wr,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),i},[l,je]),r.jsxs(r.Fragment,{children:[r.jsx(Vn,{title:e||"Users Management"}),z==="add"&&r.jsx(Ia,{user:null,allUsers:D,departments:a,designations:s,roles:t,open:z==="add",setUsers:ct,closeModal:Xt,editMode:!1}),z==="edit"&&L&&r.jsx(Ia,{user:L,allUsers:D,departments:a,designations:s,roles:t,open:z==="edit",setUsers:ct,closeModal:Xt,editMode:!0}),r.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Users Management",children:r.jsx("div",{className:"space-y-4",children:r.jsx("div",{className:"w-full",children:r.jsx(es.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:r.jsxs(me,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[r.jsx(zn,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:r.jsx("div",{className:`${u?"p-6":N?"p-4":"p-3"} w-full`,children:r.jsx("div",{className:"flex flex-col space-y-4",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[R?r.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[r.jsx(J,{className:"w-12 h-12 rounded-xl"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx(J,{className:"w-64 h-6 rounded mb-2"}),r.jsx(J,{className:"w-48 h-4 rounded"})]})]}):r.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[r.jsx("div",{className:`
                                ${u?"p-3":N?"p-2.5":"p-2"} 
                                rounded-xl flex items-center justify-center
                              `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:r.jsx(Ge,{className:`
                                  ${u?"w-8 h-8":N?"w-6 h-6":"w-5 h-5"}
                                `,style:{color:"var(--theme-primary)"}})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h4",{className:`
                                  ${u?"text-2xl":N?"text-xl":"text-lg"}
                                  font-bold text-foreground
                                  ${u?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Users Management"}),r.jsx("p",{className:`
                                  ${u?"text-sm":"text-xs"} 
                                  text-default-500
                                  ${u?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage user accounts, roles and permissions"})]})]}),R?r.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[r.jsx(J,{className:"w-24 h-8 rounded"}),r.jsx(J,{className:"w-20 h-8 rounded"})]}):r.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[r.jsx(ae,{size:l?"sm":"md",color:"primary",startContent:r.jsx(mt,{className:"w-4 h-4"}),onPress:()=>je("add"),radius:F,style:{fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:l?"Add":"Add User"}),r.jsx(ae,{size:l?"sm":"md",variant:"bordered",startContent:r.jsx(ts,{className:"w-4 h-4"}),radius:F,style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-primary) 30%, transparent)",color:"var(--theme-primary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:l?"Export":"Export Users"})]})]})})})}),r.jsxs(fe,{className:"p-6",children:[r.jsx(Hn,{stats:Tn,className:"mb-6",isLoading:R}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6",children:R?r.jsx(r.Fragment,{children:Array.from({length:6}).map((i,h)=>r.jsx(me,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-default) 10%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:r.jsxs(fe,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(J,{className:"w-9 h-9 rounded-lg"}),r.jsxs("div",{className:"flex-1",children:[r.jsx(J,{className:"w-24 h-4 rounded mb-1"}),r.jsx(J,{className:"w-32 h-3 rounded"})]})]}),r.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((S,B)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(J,{className:"w-20 h-3 rounded"}),r.jsx(J,{className:"w-12 h-3 rounded"})]},B))})]})},h))}):r.jsxs(r.Fragment,{children:[r.jsx(me,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:r.jsxs(fe,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:r.jsx(rs,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}})}),r.jsxs("div",{children:[r.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role Distribution"}),r.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User roles breakdown"})]})]}),r.jsx("div",{className:"space-y-3",children:((tr=(er=c==null?void 0:c.distribution)==null?void 0:er.by_role)==null?void 0:tr.length)>0?c.distribution.by_role.slice(0,4).map((i,h)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`color-mix(in srgb, var(--theme-primary) ${80-h*15}%, var(--theme-secondary) ${20+h*15}%)`}}),r.jsx("span",{className:"text-sm text-foreground truncate",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.count}),r.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",i.percentage,"%)"]})]})]},h)):r.jsx("div",{className:"text-center py-4",children:r.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No role data available"})})})]})}),r.jsx(me,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-secondary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:r.jsxs(fe,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-secondary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:r.jsx(Ge,{className:"w-5 h-5",style:{color:"var(--theme-secondary)"}})}),r.jsxs("div",{children:[r.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User Status"}),r.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Active vs inactive users"})]})]}),r.jsx("div",{className:"space-y-3",children:((ar=(rr=c==null?void 0:c.distribution)==null?void 0:rr.by_status)==null?void 0:ar.length)>0?c.distribution.by_status.map((i,h)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:i.name==="Active"?"var(--theme-success)":i.name==="Inactive"?"var(--theme-danger)":"var(--theme-default)"}}),r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.count}),r.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",i.percentage,"%)"]})]})]},h)):r.jsx("div",{className:"text-center py-4",children:r.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No status data available"})})})]})}),r.jsx(me,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-warning) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:r.jsxs(fe,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-warning) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:r.jsx(Re,{className:"w-5 h-5",style:{color:"var(--theme-warning)"}})}),r.jsxs("div",{children:[r.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Departments"}),r.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Users by department"})]})]}),r.jsx("div",{className:"space-y-3",children:((sr=(nr=c==null?void 0:c.distribution)==null?void 0:nr.by_department)==null?void 0:sr.length)>0?c.distribution.by_department.slice(0,4).map((i,h)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`color-mix(in srgb, var(--theme-warning) ${80-h*15}%, var(--theme-primary) ${20+h*15}%)`}}),r.jsx("span",{className:"text-sm text-foreground truncate",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:i.count}),r.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",i.percentage,"%)"]})]})]},h)):r.jsx("div",{className:"text-center py-4",children:r.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No department data available"})})})]})}),r.jsx(me,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-success) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:r.jsxs(fe,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-success) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:r.jsx(Wr,{className:"w-5 h-5",style:{color:"var(--theme-success)"}})}),r.jsxs("div",{children:[r.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User Growth"}),r.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Registration trends"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"New (30 days)"}),r.jsx("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((lr=(ir=c==null?void 0:c.activity)==null?void 0:ir.recent_registrations)==null?void 0:lr.new_users_30_days)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"New (90 days)"}),r.jsx("span",{className:"text-sm font-medium text-primary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((dr=(or=c==null?void 0:c.activity)==null?void 0:or.recent_registrations)==null?void 0:dr.new_users_90_days)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Recently Active"}),r.jsx("span",{className:"text-sm font-medium text-secondary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((mr=(cr=c==null?void 0:c.activity)==null?void 0:cr.recent_registrations)==null?void 0:mr.recently_active)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Growth Rate"}),r.jsx(le,{size:"sm",color:(((fr=c==null?void 0:c.activity)==null?void 0:fr.user_growth_rate)||0)>0?"success":(((ur=c==null?void 0:c.activity)==null?void 0:ur.user_growth_rate)||0)<0?"danger":"default",variant:"flat",radius:F,children:r.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((pr=c==null?void 0:c.activity)==null?void 0:pr.user_growth_rate)||0,"%"]})})]})]})]})}),r.jsx(me,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:r.jsxs(fe,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:r.jsx(Ae,{className:"w-5 h-5",style:{color:"var(--theme-danger)"}})}),r.jsxs("div",{children:[r.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Access Control"}),r.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role assignments"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"With Roles"}),r.jsx("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((vr=(hr=c==null?void 0:c.security)==null?void 0:hr.access_metrics)==null?void 0:vr.users_with_roles)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Without Roles"}),r.jsx("span",{className:"text-sm font-medium text-danger",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((gr=(xr=c==null?void 0:c.security)==null?void 0:xr.access_metrics)==null?void 0:gr.users_without_roles)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Admin Users"}),r.jsx("span",{className:"text-sm font-medium text-warning",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((br=(yr=c==null?void 0:c.security)==null?void 0:yr.access_metrics)==null?void 0:br.admin_users)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role Coverage"}),r.jsx(le,{size:"sm",color:(((_r=(jr=c==null?void 0:c.health)==null?void 0:jr.system_metrics)==null?void 0:_r.role_coverage)||0)>80?"success":(((Nr=(wr=c==null?void 0:c.health)==null?void 0:wr.system_metrics)==null?void 0:Nr.role_coverage)||0)>60?"warning":"danger",variant:"flat",radius:F,children:r.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((Sr=(Fr=c==null?void 0:c.health)==null?void 0:Fr.system_metrics)==null?void 0:Sr.role_coverage)||0,"%"]})})]})]})]})}),r.jsx(me,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-default) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:r.jsxs(fe,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-default) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:r.jsx(Gr,{className:"w-5 h-5",style:{color:"var(--theme-default)"}})}),r.jsxs("div",{children:[r.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"System Health"}),r.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Overall metrics"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Health Score"}),r.jsx(le,{size:"sm",color:(((Tr=c==null?void 0:c.quick_metrics)==null?void 0:Tr.system_health_score)||0)>80?"success":(((Er=c==null?void 0:c.quick_metrics)==null?void 0:Er.system_health_score)||0)>60?"warning":"danger",variant:"flat",radius:F,children:r.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((Ir=c==null?void 0:c.quick_metrics)==null?void 0:Ir.system_health_score)||0,"%"]})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Activation Rate"}),r.jsxs("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[(($r=(Cr=c==null?void 0:c.health)==null?void 0:Cr.system_metrics)==null?void 0:$r.user_activation_rate)||0,"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Total Roles"}),r.jsx("span",{className:"text-sm font-medium text-primary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((Rr=c==null?void 0:c.overview)==null?void 0:Rr.total_roles)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Total Departments"}),r.jsx("span",{className:"text-sm font-medium text-warning",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((Pr=c==null?void 0:c.overview)==null?void 0:Pr.total_departments)||0})]})]})]})})]})}),r.jsx("div",{className:"mb-6",children:R?r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[r.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(J,{className:"w-24 h-4 rounded"}),r.jsx(J,{className:"w-full h-10 rounded-lg"})]})}),r.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(J,{className:"w-20 h-4 rounded"}),r.jsx(J,{className:"w-full h-10 rounded-lg"})]})})]}):r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-end",children:[r.jsx("div",{className:"flex-1",children:r.jsx(re,{label:"Search Users",placeholder:"Search by name, email or phone...",value:v.search,onValueChange:i=>q("search",i),variant:"bordered",size:l?"sm":"md",radius:F,startContent:r.jsx(as,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"border-default-200 hover:border-default-300"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),r.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[r.jsxs(Se,{label:"Status",selectedKeys:v.status?[v.status]:[],onSelectionChange:i=>q("status",Array.from(i)[0]),variant:"bordered",size:l?"sm":"md",radius:F,className:"w-32",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[r.jsx(ee,{children:"All Status"},"all"),r.jsx(ee,{children:"Active"},"active"),r.jsx(ee,{children:"Inactive"},"inactive")]}),r.jsxs(Se,{label:"Role",selectedKeys:v.role?[v.role]:[],onSelectionChange:i=>q("role",Array.from(i)[0]),variant:"bordered",size:l?"sm":"md",radius:F,className:"w-32",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[r.jsx(ee,{children:"All Roles"},"all"),t==null?void 0:t.map((i,h)=>{const S=typeof i=="object"&&i!==null?i.name:i,B=typeof S=="string"?S.toLowerCase():String(S||`role-${h}`).toLowerCase();return r.jsx(ee,{children:S||"Unknown Role"},B)})]}),r.jsxs(Bn,{variant:"bordered",radius:F,children:[r.jsx(ae,{isIconOnly:!0,color:A==="table"?"primary":"default",onPress:()=>P("table"),size:l?"sm":"md",children:r.jsx(ns,{className:"w-4 h-4"})}),r.jsx(ae,{isIconOnly:!0,color:A==="grid"?"primary":"default",onPress:()=>P("grid"),size:l?"sm":"md",children:r.jsx(Wn,{className:"w-4 h-4"})})]})]})]})}),r.jsx("div",{className:"overflow-hidden",children:R?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(Ke,{size:"lg"})}):A==="table"?r.jsx(cs,{allUsers:X.data,roles:t,setUsers:ct,isMobile:l,isTablet:m,pagination:w,onPageChange:ke,onRowsPerPageChange:jn,totalUsers:X.total,loading:R,onEdit:i=>je("edit",i),updateUserOptimized:_n,deleteUserOptimized:wn,toggleUserStatusOptimized:Zt,updateUserRolesOptimized:Nn,toggleSingleDeviceLogin:Jt,resetUserDevice:Yt,deviceActions:_}):r.jsxs("div",{children:[X.data&&X.data.length>0?r.jsx("div",{className:`grid gap-4 ${l?"grid-cols-1":m?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:X.data.map((i,h)=>r.jsx(Sn,{user:i,index:h},i.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ge,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No users found"}),r.jsx("p",{className:"text-default-500 mb-4",children:"Try adjusting your search criteria or filters"}),r.jsx(ae,{color:"primary",startContent:r.jsx(mt,{className:"w-4 h-4"}),onPress:()=>je("add"),children:"Add First User"})]}),X.data&&X.data.length>0&&r.jsx("div",{className:"flex justify-center mt-6 border-t pt-4",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:r.jsx(Ca,{total:Math.ceil(X.total/w.perPage),initialPage:w.currentPage,page:w.currentPage,onChange:ke,size:l?"sm":"md",variant:"bordered",showControls:!0,radius:F,style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})})]})]})})})})})]})};jc.layout=e=>r.jsx(Gn,{children:e});export{jc as default};
