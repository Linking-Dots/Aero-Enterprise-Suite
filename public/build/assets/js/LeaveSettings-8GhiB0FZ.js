import{J as G,a as s,j as e,Q as Y,b as p}from"./app-BoXK1TSh.js";import{r as f}from"./react-core-DDvupgOx.js";import{B as k,A as D}from"./App-BiIQbKJB.js";import{G as j}from"./logo-DdNQuM_p.js";import{u as H,G as Q,C as U,e as P,h as c,i as h,j as I,I as S,k as E,M as x,s as T,v as $,w as z,x as J,y as w,z as i,E as q,T as N,R as A,B as K,f as L}from"./mui-libraries-DeLqYkpc.js";import"./ui-libraries-CxFzkmxb.js";import"./utilities-DT6SRl8s.js";import"./EnvelopeIcon-D6nUSkik.js";import"./UserIcon-D16nn9o_.js";import"./ShieldCheckIcon-C7bFKizx.js";import"./ExclamationTriangleIcon-C_gcLnRy.js";const O=({title:m})=>{const v={type:"",days:"",eligibility:"",carry_forward:"",earned_leave:"",special_conditions:""},[u,C]=f.useState(G().props.leaveTypes),[n,b]=f.useState(v),[F,_]=f.useState(!1),r=H(),y=a=>{const{name:d,value:l}=a.target;b({...n,[d]:l})},M=async()=>{const a=new Promise(async(d,l)=>{try{const t=await axios.post("/add-leave-type",n);t.status===201?(C([...u,{...n,id:t.data.id}]),b(v),d(["Leave type added successfully."])):l(["Failed to add leave type. Please try again."])}catch(t){console.error(t),l([t.response?.data?.message||"Failed to add leave type. Please try again."])}});k.promise(a,{pending:{render(){return s("div",{style:{display:"flex",alignItems:"center"},children:[e(L,{}),e("span",{style:{marginLeft:"8px"},children:"Adding leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:d}){return e(p,{children:d.map((l,t)=>e("div",{children:l},t))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:d}){return e(p,{children:d})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})},R=async a=>{const d=u.find(l=>l.id===a);b(d),_(!0)},W=()=>{const a=new Promise(async(d,l)=>{try{const t=await axios.put(`/update-leave-type/${n.id}`,n);if(t.status===200){const o=u.map(g=>g.id===n.id?{...n,id:t.data.id}:g);C(o),b(v),_(!1),d(["Leave type updated successfully."])}else l(["Failed to update leave type. Please try again."])}catch(t){console.error(t),l([t.response?.data?.message||"Failed to update leave type. Please try again."])}});k.promise(a,{pending:{render(){return s("div",{style:{display:"flex",alignItems:"center"},children:[e(L,{}),e("span",{style:{marginLeft:"8px"},children:"Updating leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:d}){return e(p,{children:d.map((l,t)=>e("div",{children:l},t))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:d}){return e(p,{children:d})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})},B=async a=>{const d=new Promise(async(l,t)=>{try{const o=await axios.delete(`/delete-leave-type/${a}`);o.status===200?(C(u.filter(g=>g.id!==a)),l([o.data.message||"Leave type deleted successfully."])):t(["Failed to delete leave type. Please try again."])}catch(o){console.error(o),t([o.response?.data?.message||"Failed to delete leave type. Please try again."])}});k.promise(d,{pending:{render(){return s("div",{style:{display:"flex",alignItems:"center"},children:[e(L,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:l}){return e(p,{children:l.map((t,o)=>e("div",{children:t},o))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:l}){return e(p,{children:l})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})};return s(p,{children:[e(Y,{title:m}),e(K,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Q,{in:!0,children:s(j,{children:[e(U,{title:"Leave Settings",sx:{padding:"24px"}}),e(P,{children:s(c,{container:!0,spacing:1,alignItems:"center",children:[e(c,{item:!0,xs:6,sm:3,md:3,children:e(h,{fullWidth:!0,label:"Leave Type",name:"type",value:n.type,onChange:y})}),e(c,{item:!0,xs:6,sm:3,md:3,children:e(h,{fullWidth:!0,label:"Number of Days",name:"days",type:"number",value:n.days,onChange:y})}),e(c,{item:!0,xs:6,sm:3,md:3,children:s(I,{fullWidth:!0,children:[e(S,{id:"carry-forward-label",children:"Carry Forward"}),s(E,{variant:"outlined",labelId:"carry-forward-label",label:"Carry Forward",name:"carry_forward",value:n.carry_forward,onChange:y,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(x,{value:!0,children:"Yes"}),e(x,{value:!1,children:"No"})]})]})}),e(c,{item:!0,xs:6,sm:3,md:3,children:s(I,{fullWidth:!0,children:[e(S,{id:"earned-leave-label",children:"Earned Leave"}),s(E,{variant:"outlined",labelId:"earned-leave-label",label:"Earned Leave",name:"earned_leave",value:n.earned_leave,onChange:y,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(x,{value:!0,children:"Yes"}),e(x,{value:!1,children:"No"})]})]})}),e(c,{item:!0,xs:12,sm:6,md:6,children:e(h,{fullWidth:!0,label:"Eligibility Criteria",name:"eligibility",value:n.eligibility,onChange:y})}),e(c,{item:!0,xs:12,sm:6,md:6,children:e(h,{fullWidth:!0,label:"Special Conditions",name:"special_conditions",value:n.special_conditions,onChange:y})}),e(c,{item:!0,xs:12,sm:12,md:12,sx:{display:"flex",justifyContent:"center"},children:e(T,{sx:{height:"100%"},variant:"outlined",color:"primary",onClick:F?W:M,children:F?"Update Leave Type":"Add Leave Type"})})]})}),e(P,{children:e($,{style:{maxHeight:"84vh",overflowY:"auto"},children:s(z,{children:[e(J,{children:s(w,{children:[e(i,{children:"Type"}),e(i,{children:"Days"}),e(i,{children:"Eligibility"}),e(i,{children:"Carry Forward"}),e(i,{children:"Earned Leave"}),e(i,{children:"Special Conditions"}),e(i,{children:"Actions"})]})}),e(q,{children:u.length>0?u.map(a=>s(w,{children:[e(i,{children:a.type}),e(i,{children:a.days}),e(i,{children:a.eligibility}),e(i,{children:s(N,{children:[e(A,{checked:!0,sx:{color:a.carry_forward?"green":"red","&.Mui-checked":{color:a.carry_forward?"green":"red"}},disabled:!0}),a.carry_forward?"Yes":"No"]})}),e(i,{children:s(N,{children:[e(A,{checked:!0,sx:{color:a.earned_leave?"green":"red","&.Mui-checked":{color:a.earned_leave?"green":"red"}},disabled:!0}),a.earned_leave?"Yes":"No"]})}),e(i,{children:a.special_conditions?a.special_conditions:"N/A"}),s(i,{children:[e(T,{variant:"outlined",color:"primary",onClick:()=>R(a.id),sx:{marginRight:1},children:"Edit"}),e(T,{variant:"outlined",color:"secondary",onClick:()=>B(a.id),children:"Delete"})]})]},a.id)):e(w,{children:e(i,{colSpan:7,align:"center",children:"No leave types available."})})})]})})})]})})})]})};O.layout=m=>e(D,{children:m});export{O as default};
