import{a as t,j as e,H as k,b as y,F as W}from"./app-BQYsVGy2.js";import{r as s,j as T}from"./react-core-ZDN6GY9H.js";import{A as z}from"./App-C7wyKuEA.js";import{G as V}from"./logo-D4s_-5rU.js";import{g as j,u as $,a as G,f as C,G as H,d as O,o as U,s as i,F as p,A as B,l as b}from"./mui-libraries-BtmIKYJi.js";import{F as _}from"./ChartBarIcon-RXU87FdU.js";import{D as Q}from"./Download-l_RGniCd.js";import{C as F}from"./CheckCircle-BKUK-TM_.js";import{F as Z}from"./DocumentArrowDownIcon-D43xmnkF.js";import{W as q}from"./Warning-CLxC-1BN.js";import"./ui-libraries-CP3AhJpb.js";import"./utilities-DyZVG5is.js";import"./EnvelopeIcon-B_JLNrsu.js";import"./UserIcon-Vw3xDLqJ.js";import"./ShieldCheckIcon-DfDaQsK0.js";import"./ExclamationTriangleIcon-BAHPm542.js";function K({title:d,titleId:c,...g},u){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":c},g),d?s.createElement("title",{id:c},d):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const X=s.forwardRef(K),S=j(T.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"}),"Speed"),J=j(T.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),Y=({auth:d,title:c="Performance Dashboard"})=>{const g=$();G(g.breakpoints.down("md"));const[u,P]=s.useState(!0),[L,x]=s.useState(!1),[o,R]=s.useState(null),[I,v]=s.useState([]),[ee,re]=s.useState("24h"),m=async()=>{try{x(!0);const a=await fetch("/storage/app/performance/baseline.json");let l=null;a.ok&&(l=await a.json());const r=await fetch("/storage/app/performance/comparison.json");let n=null;r.ok&&(n=await r.json());const w=await fetch("/storage/app/reports/performance-export.json");let N=null;w.ok&&(N=await w.json()),R({baseline:l,comparison:n,report:N,lastUpdated:new Date});const h=[];l&&(l.overall.performanceScore<70&&h.push({type:"error",message:`Performance score is below threshold: ${l.overall.performanceScore}/100`}),l.overall.totalIssues>0&&h.push({type:"warning",message:`${l.overall.totalIssues} performance issues detected`})),n&&n.summary.regressions.length>0&&h.push({type:"error",message:`${n.summary.regressions.length} performance regressions detected`}),v(h)}catch(a){console.error("Failed to fetch performance data:",a),v([{type:"error",message:"Failed to load performance data. Please check if performance monitoring is running."}])}finally{x(!1),P(!1)}};s.useEffect(()=>{m();const a=setInterval(m,300*1e3);return()=>clearInterval(a)},[]);const D=async()=>{try{(await fetch("/api/performance/generate-report",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).ok&&await m()}catch(a){console.error("Failed to generate report:",a)}},f=()=>{const a=document.createElement("a");a.href="/storage/app/reports/performance-export.json",a.download=`glass-erp-performance-${new Date().toISOString().split("T")[0]}.json`,a.click()},A=({score:a,size:l=120})=>{const r=n=>n>=90?"#10b981":n>=70?"#f59e0b":"#ef4444";return t("div",{className:"relative inline-flex",children:[e(C,{variant:"determinate",value:a,size:l,thickness:4,sx:{color:r(a)}}),t("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[e("div",{className:"text-3xl font-bold",style:{color:r(a)},children:a}),e("div",{className:"text-xs text-gray-400",children:"/100"})]})]})},E=({vitals:a})=>{if(!a)return null;const l=[{name:"FCP",value:a.FCP,unit:"ms",threshold:1800,label:"First Contentful Paint"},{name:"LCP",value:a.LCP,unit:"ms",threshold:2500,label:"Largest Contentful Paint"},{name:"FID",value:a.FID,unit:"ms",threshold:100,label:"First Input Delay"},{name:"INP",value:a.INP||0,unit:"ms",threshold:200,label:"Interaction to Next Paint"},{name:"CLS",value:a.CLS,unit:"",threshold:.1,label:"Cumulative Layout Shift"},{name:"TTFB",value:a.TTFB,unit:"ms",threshold:800,label:"Time to First Byte"}];return e("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:l.map(r=>t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 text-center",children:[e("div",{className:"text-sm font-medium text-gray-400 mb-2",children:r.name}),t("div",{className:`text-2xl font-bold mb-1 ${r.value<=r.threshold?"text-green-400":"text-red-400"}`,children:[r.name==="CLS"?r.value.toFixed(3):Math.round(r.value),e("span",{className:"text-xs ml-1",children:r.unit})]}),e("div",{className:"text-xs text-gray-400 mb-2",children:r.label}),e(b,{size:"small",label:r.value<=r.threshold?"Good":"Needs Work",color:r.value<=r.threshold?"success":"error"})]},r.name))})},M=({features:a})=>a?e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(a).map(([l,r])=>t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4",children:[t("div",{className:"flex justify-between items-center mb-3",children:[e("div",{className:"text-lg font-semibold text-white",children:l}),e(b,{size:"small",label:r.priority,color:r.priority==="high"?"error":r.priority==="medium"?"warning":"default"})]}),t("div",{className:`text-3xl font-bold mb-2 ${r.averageLoadTime<=r.target?"text-green-400":"text-orange-400"}`,children:[Math.round(r.averageLoadTime),"ms"]}),t("div",{className:"text-sm text-gray-400 mb-3",children:["Target: ",r.target,"ms | Routes: ",Object.keys(r.routes).length]}),e(b,{size:"small",icon:r.averageLoadTime<=r.target?e(F,{}):e(q,{}),label:r.averageLoadTime<=r.target?"Meeting Target":"Exceeds Target",color:r.averageLoadTime<=r.target?"success":"warning"})]},l))}):null;return u?t(y,{children:[e(k,{title:c}),e("div",{className:"min-h-screen flex items-center justify-center",children:e(C,{size:60})})]}):t(y,{children:[e(k,{title:c}),e("div",{className:"min-h-screen p-2 sm:p-4 md:p-6",children:e("div",{className:"mx-auto max-w-7xl",children:e(H,{in:!0,timeout:800,children:e("div",{children:t(V,{children:[t("div",{className:"relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20"}),e("div",{className:"relative px-6 py-8",children:t("div",{className:"flex flex-col gap-6",children:[t("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t("div",{className:"flex items-center gap-4",children:[e("div",{className:"p-3 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-2xl backdrop-blur-sm border border-white/10",children:e(_,{className:"w-8 h-8 text-blue-400"})}),t("div",{children:[e("h1",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"ðŸš€ Performance Monitor"}),e("p",{className:"text-gray-400 mt-1 text-sm md:text-base",children:"Real-time performance monitoring and optimization insights"})]})]}),t("div",{className:"flex gap-2 flex-wrap",children:[e(O,{title:"Refresh Data",children:e(U,{onClick:m,disabled:L,className:"text-blue-400 hover:bg-blue-500/10",children:e(W,{className:"w-5 h-5"})})}),e(i,{variant:"outlined",startIcon:e(J,{}),onClick:D,size:"small",className:"border-blue-400/50 text-blue-400 hover:bg-blue-500/10",children:"Generate Report"}),e(i,{variant:"outlined",startIcon:e(Q,{}),onClick:f,size:"small",className:"border-purple-400/50 text-purple-400 hover:bg-purple-500/10",children:"Export"})]})]}),e(p,{in:!0,timeout:1e3,children:t("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-blue-500/20 rounded-lg group-hover:bg-blue-500/30 transition-colors",children:e(S,{className:"w-5 h-5 text-blue-400"})}),t("div",{children:[e("div",{className:"text-xl font-bold text-blue-400",children:o?.baseline?.overall?.performanceScore||0}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Performance Score"})]})]})}),e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-green-500/20 rounded-lg group-hover:bg-green-500/30 transition-colors",children:e(F,{className:"w-5 h-5 text-green-400"})}),t("div",{children:[e("div",{className:"text-xl font-bold text-green-400",children:o?.baseline?.overall?.totalIssues||0}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Issues Detected"})]})]})}),e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-purple-500/20 rounded-lg group-hover:bg-purple-500/30 transition-colors",children:e(X,{className:"w-5 h-5 text-purple-400"})}),t("div",{children:[e("div",{className:"text-xl font-bold text-purple-400",children:o?.comparison?.summary?.regressions?.length||0}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Regressions"})]})]})}),e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-orange-500/20 rounded-lg group-hover:bg-orange-500/30 transition-colors",children:e(Z,{className:"w-5 h-5 text-orange-400"})}),t("div",{children:[e("div",{className:"text-lg font-bold text-orange-400",children:o?.lastUpdated?.toLocaleTimeString()||"Never"}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Last Updated"})]})]})})]})})]})})]}),t("div",{className:"px-6 pb-6",children:[I.map((a,l)=>e(B,{severity:a.type,className:"mb-4",children:a.message},l)),e(p,{in:!0,timeout:1200,children:t("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[e("div",{className:"lg:col-span-1",children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 text-center",children:[e("div",{className:"text-lg font-semibold text-white mb-4",children:"Overall Performance"}),e(A,{score:o?.baseline?.overall?.performanceScore||0}),t("div",{className:"text-xs text-gray-400 mt-4",children:["Last Updated: ",o?.lastUpdated?.toLocaleTimeString()]})]})}),e("div",{className:"lg:col-span-3",children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:[e("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ“Š Core Web Vitals"}),e(E,{vitals:o?.baseline?.overall?.coreWebVitals})]})})]})}),e(p,{in:!0,timeout:1400,children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 mb-6",children:[e("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ“¦ Feature Module Performance"}),e(M,{features:o?.baseline?.features})]})}),e(p,{in:!0,timeout:1600,children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:[e("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ”§ Quick Actions"}),t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e(i,{fullWidth:!0,variant:"outlined",startIcon:e(S,{}),onClick:()=>window.open("/storage/app/reports/performance-dashboard.html","_blank"),className:"border-blue-400/50 text-blue-400 hover:bg-blue-500/10",children:"View Full Dashboard"}),e(i,{fullWidth:!0,variant:"outlined",onClick:()=>window.open("/storage/app/reports/technical-report.md","_blank"),className:"border-green-400/50 text-green-400 hover:bg-green-500/10",children:"Technical Report"}),e(i,{fullWidth:!0,variant:"outlined",onClick:()=>window.open("/storage/app/reports/executive-summary.md","_blank"),className:"border-purple-400/50 text-purple-400 hover:bg-purple-500/10",children:"Executive Summary"}),e(i,{fullWidth:!0,variant:"outlined",onClick:f,className:"border-orange-400/50 text-orange-400 hover:bg-orange-500/10",children:"Download Data"})]})]})})]})]})})})})})]})};Y.layout=d=>e(z,{children:d});export{Y as default};
