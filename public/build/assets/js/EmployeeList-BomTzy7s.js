import{j as e,A as tt,B as rt,C as st,D as at,h as le,E as nt,b as S,K as lt,a as Ee,e as Te,k as ae,m as it,n as ot,o as ct,q as dt,r as mt,v as ht,p as Qe,w as Fe,x as Ce,y as Se,z as je,W as xt,s as Ae,l as ye,S as pt,d as Oe,i as gt,g as ut}from"./vendor-heroui-CinxWHhv.js";import{r as n,t as ft,Q as bt,S as Ze}from"./vendor-inertia-sUfCHI_5.js";import{P as _e,d as we,v as Ne,G as vt,j as jt,c as Le,r as Re,o as yt,A as wt}from"./Dashboard-BupouD6D.js";import{S as Nt}from"./StatsCards-CHv7cWUw.js";import{s as H}from"./toastUtils-BVg-E_WQ.js";import{a as ne}from"./vendor-utils-CrJAVL9K.js";import{F as Me}from"./ExclamationTriangleIcon-BarRaUA8.js";import{F as ze}from"./TrashIcon-Dnjv_I7q.js";import{F as Ge}from"./PhotoIcon-D-cYh0Dc.js";import{a as He}from"./XMarkIcon-twQGc8di.js";import{F as Xe}from"./CheckCircleIcon-BAvoXTNq.js";import{F as _t}from"./WifiIcon-CqOWPiHe.js";import{a as kt}from"./MapPinIcon-DDwLGyCW.js";import{F as Je}from"./UserIcon-CgrjQ1A2.js";import{F as De}from"./EllipsisVerticalIcon-CqOfKM9J.js";import{F as et}from"./PencilIcon-BsmkHcSS.js";import{F as Ie}from"./ClockIcon-BKLni_N9.js";import{F as Ue}from"./EnvelopeIcon-CFKoTD3N.js";import{F as Pt}from"./HashtagIcon-265IgP8i.js";import{F as Ft}from"./TrophyIcon-BzzGBhFz.js";import{F as qe}from"./UserPlusIcon-DxLlp7sC.js";import{F as Ct}from"./ChartBarIcon-BGC3fra6.js";import{e as Ke}from"./vendor-framer-B7qqn1b6.js";import{F as St}from"./MagnifyingGlassIcon-BJyUDYwI.js";import{F as Rt}from"./TableCellsIcon-Dw93jRLu.js";import{F as Dt}from"./FunnelIcon-DZ8SUaNX.js";import"./vendor-react-FouZbkAE.js";import"./app-DXzcJ9TB.js";import"./UserGroupIcon-CSQScwVa.js";import"./ShieldCheckIcon-Ck-ae4AP.js";import"./KeyIcon-BIi5nz4o.js";import"./logo-DFaNDj_M.js";function Et({title:R,titleId:v,...a},y){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:y,"aria-labelledby":v},a),R?n.createElement("title",{id:v},R):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}const Tt=n.forwardRef(Et);function At({title:R,titleId:v,...a},y){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:y,"aria-labelledby":v},a),R?n.createElement("title",{id:v},R):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const Mt=n.forwardRef(At),It=({open:R,onClose:v,employee:a,onConfirm:y,loading:_=!1})=>{if(!a)return null;const $=a.active_projects_count>0||a.pending_leaves_count>0||a.active_trainings_count>0;return e.jsx(tt,{isOpen:R,onClose:v,size:"2xl",classNames:{backdrop:"bg-black/50 backdrop-blur-sm",base:"border border-white/20 bg-white/90 backdrop-blur-md",header:"border-b border-danger/30 bg-gradient-to-r from-danger-50/50 to-danger-100/30",body:"py-0",footer:"border-t border-white/10 bg-white/5"},children:e.jsxs(rt,{children:[e.jsx(st,{className:"flex items-center gap-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-danger",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-danger/20 to-danger/10 flex items-center justify-center border border-danger/30",children:e.jsx(Me,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Delete Employee"})]})}),e.jsxs(at,{children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 backdrop-blur-2xl border border-white/10 mb-6 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx(_e,{src:a.profile_image_url||a.profile_image,name:a.name,size:"lg",className:"ring-2 ring-white/20 shadow-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:a.name}),e.jsx("p",{className:"text-sm text-default-500",children:a.email}),a.employee_id&&e.jsxs("span",{className:"inline-block mt-1 px-3 py-1 text-xs rounded-lg bg-white/10 border border-white/10",children:["ID: ",a.employee_id]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(we,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Department"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.department_name||"Not assigned"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Designation"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.designation_name||"Not assigned"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 rounded-2xl bg-danger-50/50 backdrop-blur-2xl border border-danger/30",children:e.jsxs("div",{className:"flex items-center gap-3 text-danger",children:[e.jsx(Me,{className:"w-5 h-5"}),e.jsx("p",{className:"text-sm font-medium",children:"This action will permanently delete the employee record and cannot be undone."})]})}),$&&e.jsxs("div",{className:"p-6 rounded-2xl bg-warning-50/50 backdrop-blur-2xl border border-warning/30 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-warning/20 flex items-center justify-center",children:e.jsx(Me,{className:"w-4 h-4 text-warning"})}),e.jsx("h4",{className:"text-sm font-semibold text-warning",children:"Employee Has Active Data"})]}),e.jsx("p",{className:"text-sm text-default-500 mb-4",children:"This employee has the following active records that will also be affected:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.active_projects_count>0&&e.jsxs(le,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[a.active_projects_count," Active Projects"]}),a.pending_leaves_count>0&&e.jsxs(le,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[a.pending_leaves_count," Pending Leaves"]}),a.active_trainings_count>0&&e.jsxs(le,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[a.active_trainings_count," Active Trainings"]})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 border border-white/10 mb-4",children:[e.jsxs("p",{className:"text-sm mb-2 font-medium",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-danger font-semibold",children:a.name}),"?"]}),e.jsx("p",{className:"text-xs text-default-500",children:"Type the employee's name below to confirm this permanent deletion:"})]})]}),e.jsxs(nt,{className:"flex justify-between px-6 py-6 bg-white/5",children:[e.jsx(S,{variant:"light",onPress:v,isDisabled:_,className:"hover:bg-white/10",children:"Cancel"}),e.jsx(S,{color:"danger",variant:"solid",onPress:y,isLoading:_,startContent:!_&&e.jsx(ze,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-danger to-danger-600 hover:from-danger-600 hover:to-danger-700 shadow-lg",children:_?"Deleting...":"Delete Employee"})]})]})})},Ye=window.axios,$t=({isOpen:R,onClose:v,employee:a,onImageUpdate:y})=>{const _=n.useRef(null),[$,A]=n.useState(null),[Y,h]=n.useState(null),[z,Z]=n.useState(!1),[ke,W]=n.useState(0),[k,D]=n.useState(""),ge=2*1024*1024,ue=["image/jpeg","image/jpg","image/png","image/webp"],Q=100,J=2e3,ee=(a==null?void 0:a.profile_image_url)||null,$e=ee&&ee!==null,fe=L=>{const P=L.target.files[0];if(!P)return;if(D(""),!ue.includes(P.type)){D("Invalid file type. Please select a JPEG, PNG, or WebP image.");return}if(P.size>ge){D(`File too large. Maximum size is ${ge/1024/1024}MB.`);return}const M=URL.createObjectURL(P),d=new Image;d.onload=()=>{if(d.width<Q||d.height<Q){D(`Image dimensions too small. Minimum size is ${Q}x${Q} pixels.`),URL.revokeObjectURL(M);return}if(d.width>J||d.height>J){D(`Image dimensions too large. Maximum size is ${J}x${J} pixels.`),URL.revokeObjectURL(M);return}A(P),h(M)},d.onerror=()=>{D("Invalid image file."),URL.revokeObjectURL(M)},d.src=M},g=async()=>{var M,d,f,w,b,X,q,K,ie,oe,ce,de,te,me,he,xe,G,pe;if(!$||!a){console.error("[ProfileUpload] Missing file or employee:",{selectedFile:$,employee:a});return}Z(!0),W(0),D("");const L=new FormData;L.append("profile_image",$),L.append("user_id",a.id);const P=(M=document.querySelector('meta[name="csrf-token"]'))==null?void 0:M.getAttribute("content");console.log("[ProfileUpload] Starting upload:",{fileName:$.name,fileSize:$.size,fileType:$.type,userId:a.id,csrfToken:P?"present":"missing",route:route("profile.image.upload")});try{const m=await Ye.post(route("profile.image.upload"),L,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":P},onUploadProgress:N=>{const C=Math.round(N.loaded*100/N.total);W(C),console.log("[ProfileUpload] Progress:",C+"%")}});if(console.log("[ProfileUpload] Response:",m.data),m.data.success){if(H.success(m.data.message||"Profile picture updated successfully!"),y){const N=m.data.profile_image_url;console.log("[ProfileUpload] Calling onImageUpdate with:",{employeeId:a.id,newImageUrl:N}),y(a.id,N)}E()}else throw new Error(m.data.message||"Upload failed")}catch(m){console.error("[ProfileUpload] Error details:",{message:m.message,status:(d=m.response)==null?void 0:d.status,statusText:(f=m.response)==null?void 0:f.statusText,responseData:(w=m.response)==null?void 0:w.data,errors:(X=(b=m.response)==null?void 0:b.data)==null?void 0:X.errors,headers:(q=m.response)==null?void 0:q.headers});let N="Failed to upload profile picture",C="";if(((K=m.response)==null?void 0:K.status)===419)N="Session expired (CSRF token mismatch). Please refresh the page.",C="CSRF Token Error";else if(((ie=m.response)==null?void 0:ie.status)===413)N="File too large. Please choose a smaller image.",C="File Size Error";else if(((oe=m.response)==null?void 0:oe.status)===422){const re=(ce=m.response.data)==null?void 0:ce.errors;re?N=Object.values(re).flat().join(", ")||m.response.data.message||"Validation failed":N=m.response.data.message||"Validation failed",C="Validation Error"}else((de=m.response)==null?void 0:de.status)===403?(N=((te=m.response.data)==null?void 0:te.message)||"Unauthorized to upload profile image",C="Authorization Error"):((me=m.response)==null?void 0:me.status)===500?(N=((he=m.response.data)==null?void 0:he.message)||"Server error during upload",C="Server Error: "+(((xe=m.response.data)==null?void 0:xe.exception)||"Unknown")):(pe=(G=m.response)==null?void 0:G.data)!=null&&pe.message?(N=m.response.data.message,C=`HTTP ${m.response.status}`):m.message&&(N=m.message,C="Network/Client Error");console.error(`[ProfileUpload] ${C}:`,N),D(`${N}${C?` (${C})`:""}`),H.error(N)}finally{Z(!1),W(0)}},V=async()=>{var P,M,d;if(!a)return;Z(!0),D("");const L=(P=document.querySelector('meta[name="csrf-token"]'))==null?void 0:P.getAttribute("content");try{const f=await Ye.delete(route("profile.image.remove"),{data:{user_id:a.id},headers:{"X-CSRF-TOKEN":L}});if(f.data.success){if(H.success(f.data.message||"Profile picture removed successfully!"),y){const w=f.data.profile_image_url;y(a.id,w)}E()}else throw new Error(f.data.message||"Remove failed")}catch(f){console.error("Remove error:",f);const w=((d=(M=f.response)==null?void 0:M.data)==null?void 0:d.message)||f.message||"Failed to remove profile picture";D(w),H.error(w)}finally{Z(!1)}},E=()=>{z||(A(null),h(null),D(""),W(0),Y&&URL.revokeObjectURL(Y),v())};return a?e.jsx(vt,{open:R,closeModal:E,maxWidth:"md",fullWidth:!0,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ge,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Update Profile Picture"}),e.jsx("p",{className:"text-sm text-gray-500",children:(a==null?void 0:a.name)||"Employee"})]})]}),e.jsx(S,{isIconOnly:!0,variant:"light",onPress:E,className:"text-gray-400 hover:text-gray-600",children:e.jsx(He,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(_e,{src:Y||ee||void 0,name:(a==null?void 0:a.name)||"Employee",size:"lg",className:"w-24 h-24",showBorder:!0})}),k&&e.jsx(le,{color:"danger",variant:"flat",startContent:e.jsx(Me,{className:"w-4 h-4"}),className:"mb-4 w-full",children:k}),z&&e.jsx("div",{className:"mb-4",children:e.jsx(lt,{value:ke,color:"primary",size:"sm",label:"Uploading...",showValueLabel:!0,className:"w-full"})}),e.jsx(Ee,{className:"mb-4",children:e.jsxs(Te,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("input",{ref:_,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:fe,className:"hidden",disabled:z}),e.jsx(S,{onPress:()=>{var L;return(L=_.current)==null?void 0:L.click()},startContent:e.jsx(Ge,{className:"w-5 h-5"}),variant:"flat",color:"primary",disabled:z,className:"mb-3",children:"Choose New Picture"}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Supported formats: JPEG, PNG, WebP"}),e.jsx("p",{children:"Maximum size: 2MB"}),e.jsx("p",{children:"Minimum dimensions: 100x100px"}),e.jsx("p",{children:"Maximum dimensions: 2000x2000px"})]})]}),$&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:$.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[($.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(S,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>{A(null),h(null),D("")},disabled:z,children:e.jsx(He,{className:"w-4 h-4"})})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[$e&&e.jsx(S,{onPress:V,startContent:e.jsx(ze,{className:"w-4 h-4"}),color:"danger",variant:"flat",disabled:z,children:"Remove Picture"}),e.jsx(S,{onPress:E,variant:"flat",disabled:z,children:"Cancel"}),e.jsx(S,{onPress:g,color:"primary",disabled:!$||z,isLoading:z,children:z?"Uploading...":"Update Picture"})]})]})}):null},Lt=({allUsers:R,allManagers:v=[],departments:a,designations:y,attendanceTypes:_,setUsers:$,isMobile:A,isTablet:Y,pagination:h,onPageChange:z,onRowsPerPageChange:Z,totalUsers:ke=0,loading:W=!1,updateEmployeeOptimized:k,deleteEmployeeOptimized:D})=>{const[ge,ue]=n.useState(!1),[Q,J]=n.useState(null),[ee,$e]=n.useState({}),[fe,g]=n.useState(!1),[V,E]=n.useState(null),[L,P]=n.useState(!1),[M,d]=n.useState({isOpen:!1,employee:null}),f=()=>{var i;if(typeof window>"u")return"lg";const s=((i=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:i.trim())||"12px",c=parseInt(s);return c===0?"none":c<=4?"sm":c<=8?"md":c<=16?"lg":"full"},w=t=>t?t.replace(/_\d+$/,""):"",b=t=>{const s=t==null?void 0:t.config;if(!s)return!1;switch(w(t.slug)){case"geo_polygon":return s.polygon&&s.polygon.length>=3||s.polygons&&s.polygons.some(i=>{var p;return((p=i.points)==null?void 0:p.length)>=3});case"wifi_ip":return s.allowed_ips&&s.allowed_ips.length>0||s.allowed_ranges&&s.allowed_ranges.length>0||s.ip_locations&&s.ip_locations.some(i=>{var p,u;return((p=i.allowed_ips)==null?void 0:p.length)>0||((u=i.allowed_ranges)==null?void 0:u.length)>0});case"route_waypoint":return s.waypoints&&s.waypoints.length>=2||s.routes&&s.routes.some(i=>{var p;return((p=i.waypoints)==null?void 0:p.length)>=2});case"qr_code":return s.code||s.qr_codes&&s.qr_codes.length>0;default:return!1}},X={geo_polygon:{title:"Geo Polygon",icon:kt,color:"warning"},wifi_ip:{title:"WiFi/IP",icon:_t,color:"secondary"},route_waypoint:{title:"Route Waypoint",icon:Tt,color:"primary"},qr_code:{title:"QR Code",icon:Mt,color:"success"}},q=n.useMemo(()=>{if(!_)return[];const t={};return _.forEach(s=>{if(!s.is_active||!b(s))return;const c=w(s.slug);X[c]&&(t[c]||(t[c]={...X[c],slug:c,types:[]}),t[c].types.push(s))}),Object.values(t).filter(s=>s.types.length>0)},[_]),K=async(t,s)=>{const c=new Promise(async(i,p)=>{try{if((await ne.post(route("user.updateDepartment",{id:t}),{department:s})).status===200){const x=a.find(j=>j.id===parseInt(s))||null;k==null||k(t,{department_id:s,department_name:(x==null?void 0:x.name)||null,designation_id:null,designation_name:null}),i("Department updated successfully")}}catch(u){console.error("Error updating department:",u),p("Failed to update department")}});H.promise(c,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(ae,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating department..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},ie=async(t,s)=>{const c=new Promise(async(i,p)=>{try{if((await ne.post(route("user.updateDesignation",{id:t}),{designation_id:s})).status===200){const x=y.find(j=>j.id===parseInt(s))||null;k==null||k(t,{designation_id:s,designation_name:(x==null?void 0:x.title)||null}),i("Designation updated successfully")}}catch(u){console.error("Error updating designation:",u),p("Failed to update designation")}});H.promise(c,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(ae,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating designation..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},oe=async(t,s)=>{const c=new Promise(async(i,p)=>{try{if((await ne.post(route("user.updateAttendanceType",{id:t}),{attendance_type_id:s})).status===200){const x=_.find(j=>j.id===parseInt(s))||null;k&&k(t,{attendance_type_id:s,attendance_type_name:(x==null?void 0:x.name)||null}),i("Attendance type updated successfully")}}catch(u){console.error("Error updating attendance type:",u),p("Failed to update attendance type")}});H.promise(c,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(ae,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating attendance type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},ce=t=>{E(t),g(!0)},de=async()=>{if(!V)return;P(!0);const t=new Promise(async(s,c)=>{var i,p,u,x;try{(await ne.delete(route("user.delete",{id:V.id}))).status===200&&(D&&D(V.id),g(!1),E(null),s("Employee deleted successfully"))}catch(j){console.error("Error deleting employee:",j);let B="Failed to delete employee";((i=j.response)==null?void 0:i.status)===403?B="You do not have permission to delete this employee":((p=j.response)==null?void 0:p.status)===404?B="Employee not found or already deleted":(x=(u=j.response)==null?void 0:u.data)!=null&&x.error&&(B=j.response.data.error),c(B)}finally{P(!1)}});H.promise(t,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(ae,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting employee..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:s}){return e.jsx("div",{children:s})},icon:"âœ…",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:s}){return e.jsx("div",{children:s})},icon:"âŒ",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},te=()=>{g(!1),E(null)},me=t=>{d({isOpen:!0,employee:t})},he=()=>{d({isOpen:!1,employee:null})},xe=(t,s)=>{k&&k(t,{profile_image_url:s})},G=n.useRef({}),pe=n.useCallback((t,s)=>{G.current[t]&&clearTimeout(G.current[t]),G.current[t]=setTimeout(async()=>{const c=ne.post(route("users.updateReportTo",{id:t}),{report_to:s||null});H.promise(c,{loading:"Updating manager assignment...",success:i=>{var p,u;return k&&k(t,{report_to:s||null,reports_to:((p=i.data.user)==null?void 0:p.reports_to)||null}),((u=i.data)==null?void 0:u.message)||"Manager assigned successfully!"},error:i=>{var p,u;return((u=(p=i.response)==null?void 0:p.data)==null?void 0:u.error)||"Failed to update manager"}})},500)},[k]),m=n.useCallback((t,s=null)=>{if(!v||v.length===0)return[];const c=t==null?void 0:t.department_id,i=(t==null?void 0:t.designation_hierarchy_level)??999,u=!v.filter(x=>String(x.department_id)===String(c)&&x.id!==t.id).some(x=>(x.designation_hierarchy_level??999)<i);return v.filter(x=>{if(x.id===t.id)return!1;if(s&&x.id===s)return!0;const j=x.department_id,B=x.designation_hierarchy_level??999,U=String(j)===String(c);return B>=i?!1:!!(U||u)})},[v]),N=n.useMemo(()=>{const t=[{name:"#",uid:"sl",width:60},{name:"EMPLOYEE",uid:"employee",width:"auto",minWidth:200},{name:"DEPARTMENT",uid:"department",width:180},{name:"DESIGNATION",uid:"designation",width:180},{name:"REPORT TO",uid:"report_to",width:200},{name:"ACTIONS",uid:"actions",width:80}];if(A||t.splice(2,0,{name:"CONTACT",uid:"contact",width:220}),!A&&!Y&&t.splice(t.length-2,0,{name:"ATTENDANCE TYPE",uid:"attendance_type",width:180}),A){const s=t.findIndex(c=>c.uid==="report_to");s>-1&&t.splice(s,1)}return t},[A,Y]),C=(t,s,c)=>{const i=t[s],x=(h!=null&&h.currentPage&&(h!=null&&h.perPage)?Number((h.currentPage-1)*h.perPage):0)+(typeof c=="number"?c:0)+1;switch(s){case"sl":return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e.jsx("span",{className:"text-sm font-semibold text-foreground",children:x})})});case"employee":return e.jsxs("div",{className:"min-w-max",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{src:(t==null?void 0:t.profile_image_url)||(t==null?void 0:t.profile_image),name:t==null?void 0:t.name,size:A?"sm":"md",onClick:()=>me(t)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"font-semibold text-foreground text-left whitespace-nowrap",children:t==null?void 0:t.name}),!A&&e.jsxs("p",{className:"text-default-500 text-left text-xs whitespace-nowrap",children:["ID: ",(t==null?void 0:t.employee_id)||"N/A"]})]})]}),A&&e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(Pt,{className:"w-3 h-3"}),(t==null?void 0:t.employee_id)||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(Le,{className:"w-3 h-3"}),t==null?void 0:t.phone]})]})]});case"contact":return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ue,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Le,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:t==null?void 0:t.phone})]})]});case"department":return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(Fe,{children:[e.jsx(Ce,{children:e.jsx(S,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e.jsx(we,{className:"w-4 h-4"}),endContent:e.jsx(De,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:t.department_name||"Select Department"})})}),e.jsx(Se,{"aria-label":"Department options",children:a==null?void 0:a.map(o=>e.jsx(je,{onPress:()=>K(t.id,o.id),children:o.name},o.id.toString()))})]})});case"designation":const j=t.department_id,B=(y==null?void 0:y.filter(o=>o.department_id===parseInt(j)))||[];return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(Fe,{isDisabled:!j,children:[e.jsx(Ce,{children:e.jsx(S,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[150px] transition-all duration-300 ${j?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,isDisabled:!j,startContent:e.jsx(Ne,{className:"w-4 h-4"}),endContent:j&&e.jsx(De,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:j?t.designation_name||"Select Designation":"Select Department First"})})}),e.jsx(Se,{"aria-label":"Designation options",children:B.map(o=>e.jsx(je,{onPress:()=>ie(t.id,o.id),children:o.title},o.id.toString()))})]})});case"report_to":const U=t.reports_to,be=!!U,se=t.report_to,Pe=m(t,se),r=[];Pe.sort((o,F)=>(o.designation_hierarchy_level??999)-(F.designation_hierarchy_level??999)).forEach(o=>{r.push({id:o.id,name:o.name,profile_image_url:o.profile_image_url,designation_name:o.designation_name||"",description:o.designation_name||"",isCurrent:se&&o.id===se})}),be&&!r.some(o=>o.id===U.id)&&r.unshift({id:U.id,name:U.name,profile_image_url:U.profile_image_url,designation_name:U.designation_name||"",description:U.designation_name||"Current manager",isCurrent:!0});const l=se,I=l&&r.some(o=>o.id===l);return e.jsx("div",{className:"flex flex-col gap-2 min-w-[180px]",children:e.jsx(Ae,{size:"sm",variant:"bordered",placeholder:"Select manager",isDisabled:r.length===0,selectedKeys:I?[String(l)]:[],onSelectionChange:o=>{const F=Array.from(o)[0],O=F?parseInt(F,10):null;O!==t.report_to&&pe(t.id,O)},classNames:{trigger:"min-h-unit-10 h-unit-10 backdrop-blur-md border-white/20 bg-white/10 hover:bg-white/15",value:"text-small"},renderValue:o=>o.length===0||!be?e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm",children:"Select manager"})}):o.map(F=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{src:U.profile_image_url,size:"sm",className:"w-6 h-6 flex-shrink-0",name:U.name,showBorder:!0}),e.jsx("span",{className:"text-sm font-medium truncate",children:U.name})]},F.key)),children:r.length===0?e.jsx(ye,{isDisabled:!0,textValue:"No eligible managers",children:e.jsx("span",{className:"text-default-400",children:"No eligible managers in department"})},"no-managers"):r.map(o=>e.jsx(ye,{textValue:o.name,children:e.jsx(pt,{name:o.name,description:o.description,avatarProps:{src:o.profile_image_url,size:"sm",name:o.name,...jt({name:o.name,size:"sm"})}})},String(o.id)))})});case"attendance_type":const T=q.length>0;return e.jsx("div",{className:"flex flex-col gap-2 min-w-[180px]",children:e.jsxs(Fe,{isDisabled:!T,children:[e.jsx(Ce,{children:e.jsx(S,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[180px] transition-all duration-300 ${T?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,startContent:e.jsx(Ie,{className:"w-4 h-4"}),endContent:T&&e.jsx(De,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{className:"truncate",children:T?t.attendance_type_name||"Select Type":"No Types Configured"})})}),e.jsx(Se,{"aria-label":"Attendance Type options",className:"min-w-[200px]",children:q.map((o,F)=>(o.icon,e.jsx(xt,{title:o.title,showDivider:F<q.length-1,classNames:{heading:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-default-500 px-2 py-1"},children:o.types.map(O=>{var ve;return e.jsx(je,{onPress:()=>oe(t.id,O.id),startContent:e.jsx("span",{className:"text-base",children:O.icon||"ðŸ“"}),description:((ve=O.description)==null?void 0:ve.substring(0,30))||null,children:O.name},O.id.toString())})},o.slug)))})]})});case"actions":return e.jsx("div",{className:"relative flex justify-center items-center",children:e.jsxs(Fe,{children:[e.jsx(Ce,{children:e.jsx(S,{isIconOnly:!0,variant:"light",className:"text-default-400 hover:text-foreground transition-all duration-300",children:e.jsx(De,{className:"w-5 h-5"})})}),e.jsxs(Se,{"aria-label":"Employee Actions",children:[e.jsx(je,{startContent:e.jsx(et,{className:"w-4 h-4"}),href:route("profile",{user:t.id}),as:ft,children:"Edit Profile"},"edit"),e.jsx(je,{className:"text-danger",color:"danger",startContent:e.jsx(ze,{className:"w-4 h-4"}),onPress:()=>ce(t),children:"Delete"},"delete")]})]})});default:return i}},re=()=>!h||W?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2",style:{borderTop:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",backdropFilter:"blur(16px)"},children:[e.jsxs("span",{className:"text-xs mb-3 sm:mb-0 opacity-70",style:{color:"var(--theme-foreground)"},children:["Showing ",(h.currentPage-1)*h.perPage+1," to ",Math.min(h.currentPage*h.perPage,h.total)," of ",h.total," employees"]}),e.jsx(Qe,{total:Math.ceil(h.total/h.perPage),initialPage:h.currentPage,page:h.currentPage,onChange:z,size:A?"sm":"md",variant:"bordered",showControls:!0,style:{"--pagination-item-bg":"color-mix(in srgb, var(--theme-content2) 50%, transparent)","--pagination-item-border":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}})]});return e.jsxs("div",{className:"w-full overflow-hidden flex flex-col relative",style:{maxHeight:"calc(100vh - 200px)",background:"color-mix(in srgb, var(--theme-content1) 85%, transparent)",backdropFilter:"blur(16px)",border:"1px solid color-mix(in srgb, var(--theme-content2) 50%, transparent)",borderRadius:f()},children:[W&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50",style:{background:"color-mix(in srgb, var(--theme-content1) 20%, transparent)",backdropFilter:"blur(8px)",borderRadius:f()},children:e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:f(),backdropFilter:"blur(16px)"},children:[e.jsx(ae,{size:"lg",color:"primary"}),e.jsx("span",{className:"text-sm",style:{color:"var(--theme-foreground)"},children:"Loading employees..."})]})}),e.jsx("div",{className:"overflow-auto grow",children:e.jsxs(it,{"aria-label":"Employees table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"backdrop-blur-md font-medium text-xs sticky top-0 z-10 whitespace-nowrap",td:"py-3 whitespace-nowrap",table:"border-collapse table-auto",thead:"",tr:"hover:opacity-80 transition-all duration-200"},style:{"--table-header-bg":"color-mix(in srgb, var(--theme-content2) 60%, transparent)","--table-row-hover":"color-mix(in srgb, var(--theme-content2) 30%, transparent)","--table-border":"color-mix(in srgb, var(--theme-content3) 30%, transparent)"},isHeaderSticky:!0,isCompact:A,children:[e.jsx(ot,{columns:N,children:t=>e.jsx(ct,{align:t.uid==="actions"||t.uid==="sl"?"center":"start",width:t.width,minWidth:t.minWidth,className:`backdrop-blur-md ${t.uid==="employee"?"whitespace-nowrap":""}`,style:{backgroundColor:"color-mix(in srgb, var(--theme-content2) 60%, transparent)",color:"var(--theme-foreground)",borderBottom:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)"},children:t.name},t.uid)}),e.jsx(dt,{items:R||[],emptyContent:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Je,{className:"w-12 h-12 mb-4 opacity-40",style:{color:"var(--theme-foreground)"}}),e.jsx("h6",{className:"text-lg font-semibold mb-2",style:{color:"var(--theme-foreground)"},children:"No employees found"}),e.jsx("p",{className:"text-sm opacity-70",style:{color:"var(--theme-foreground)"},children:"Try adjusting your search or filter criteria"})]}),loadingContent:e.jsx(ae,{}),isLoading:W,children:(t,s)=>{const c=R?R.findIndex(i=>i.id===t.id):s;return e.jsx(mt,{className:"transition-all duration-200",style:{color:"var(--theme-foreground)",borderBottom:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)"},children:i=>e.jsx(ht,{className:"transition-all duration-300",children:e.jsx("div",{className:"transition-all duration-200",children:C(t,i,c)})})},t.id)}})]})}),re(),e.jsx(It,{open:fe,onClose:te,employee:V,onConfirm:de,loading:L}),e.jsx($t,{isOpen:M.isOpen,onClose:he,employee:M.employee,onImageUpdate:xe})]})},Ut=({title:R,departments:v,designations:a,attendanceTypes:y})=>{var N,C,re,t,s,c,i,p,u,x,j,B,U,be,se,Pe;const[_,$]=n.useState(!1),[A,Y]=n.useState(!1),[h,z]=n.useState(!1),[Z,ke]=n.useState(!1);n.useEffect(()=>{const r=()=>{$(window.innerWidth<640),Y(window.innerWidth<768),z(window.innerWidth>=1025),ke(window.innerWidth>=641&&window.innerWidth<=1024)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const[W,k]=n.useState([]),[D,ge]=n.useState([]),[ue,Q]=n.useState(!0),[J,ee]=n.useState(0),[$e,fe]=n.useState(1),[g,V]=n.useState({search:"",department:"all",designation:"all",attendanceType:"all"}),[E,L]=n.useState("table"),[P,M]=n.useState(!1),[d,f]=n.useState({currentPage:1,perPage:10,total:0}),w=()=>{var T;if(typeof window>"u")return"lg";const l=((T=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:T.trim())||"12px",I=parseInt(l);return I===0?"none":I<=4?"sm":I<=8?"md":I<=16?"lg":"full"},[b,X]=n.useState({overview:{total_employees:0,active_employees:0,inactive_employees:0,total_departments:0,total_designations:0,total_attendance_types:0},distribution:{by_department:[],by_designation:[],by_attendance_type:[]},hiring_trends:{recent_hires:{last_30_days:0,last_90_days:0,last_year:0},monthly_growth_rate:0,current_month_hires:0},workforce_health:{status_ratio:{active_percentage:0,inactive_percentage:0,retention_rate:0},retention_rate:0,turnover_rate:0},quick_metrics:{headcount:0,active_ratio:0,department_diversity:0,role_diversity:0,recent_activity:0}}),q=n.useCallback(async()=>{Q(!0);try{const{data:r}=await ne.get(route("employees.paginate"),{params:{page:d.currentPage,perPage:d.perPage,search:g.search,department:g.department,designation:g.designation,attendanceType:g.attendanceType}});k(r.employees.data),ee(r.employees.total),fe(r.employees.last_page),f(l=>({...l,total:r.employees.total})),r.allManagers&&ge(r.allManagers),r.stats&&X(r.stats)}catch(r){console.error("Error fetching employees:",r),H.error("Failed to load employees. Please try again.")}finally{Q(!1)}},[d.currentPage,d.perPage,g]),K=n.useCallback(async()=>{try{const{data:r}=await ne.get(route("employees.stats"));r.stats&&X(r.stats)}catch(r){console.error("Error fetching employee stats:",r)}},[]);n.useEffect(()=>{q(),K()},[q,K]);const ie=n.useCallback(r=>{V(l=>({...l,search:r})),f(l=>({...l,currentPage:1}))},[]),oe=n.useCallback(r=>{V(l=>({...l,department:r,designation:r!=="all"?"all":l.designation})),f(l=>({...l,currentPage:1}))},[]),ce=n.useCallback(r=>{V(l=>({...l,designation:r})),f(l=>({...l,currentPage:1}))},[]),de=n.useCallback(r=>{V(l=>({...l,attendanceType:r})),f(l=>({...l,currentPage:1}))},[]),te=n.useCallback(r=>{f(l=>({...l,currentPage:r}))},[]),me=n.useCallback(r=>{f(l=>({...l,perPage:r,currentPage:1}))},[]),he=n.useCallback((r,l)=>{k(I=>I.map(T=>T.id===r?{...T,...l}:T))},[]),xe=n.useCallback(r=>{k(l=>l.filter(I=>I.id!==r)),ee(l=>l-1),f(l=>({...l,total:l.total-1})),K()},[K]),G=n.useMemo(()=>g.department==="all"?a:a.filter(r=>r.department_id===parseInt(g.department)),[a,g.department]),pe=n.useMemo(()=>{var r,l,I,T,o,F,O,ve,We,Ve,Be;return[{title:"Total Employees",value:((r=b.overview)==null?void 0:r.total_employees)||0,icon:e.jsx(Re,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Headcount"},{title:"Active Employees",value:((l=b.overview)==null?void 0:l.active_employees)||0,icon:e.jsx(Xe,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((T=(I=b.workforce_health)==null?void 0:I.status_ratio)==null?void 0:T.active_percentage)||0}% Active`},{title:"Departments",value:((o=b.overview)==null?void 0:o.total_departments)||0,icon:e.jsx(we,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Department Diversity"},{title:"Designations",value:((F=b.overview)==null?void 0:F.total_designations)||0,icon:e.jsx(Ne,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Role Diversity"},{title:"Retention Rate",value:`${((O=b.workforce_health)==null?void 0:O.retention_rate)||0}%`,icon:e.jsx(Ft,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Employee Retention"},{title:"Recent Hires",value:((We=(ve=b.hiring_trends)==null?void 0:ve.recent_hires)==null?void 0:We.last_30_days)||0,icon:e.jsx(qe,{}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 Days"},{title:"Growth Rate",value:`${((Ve=b.hiring_trends)==null?void 0:Ve.monthly_growth_rate)||0}%`,icon:e.jsx(Ct,{}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Monthly Growth"},{title:"Attendance Types",value:((Be=b.overview)==null?void 0:Be.total_attendance_types)||0,icon:e.jsx(Ie,{}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Available Types"}]},[b]),m=({user:r,index:l})=>{const I=v==null?void 0:v.find(F=>F.id===r.department_id),T=a==null?void 0:a.find(F=>F.id===r.designation_id),o=y==null?void 0:y.find(F=>F.id===r.attendance_type_id);return e.jsx(Ee,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>Ze.visit(route("profile",{user:r.id})),children:e.jsxs(Te,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(_e,{src:(r==null?void 0:r.profile_image_url)||(r==null?void 0:r.profile_image),name:r==null?void 0:r.name,size:"md",fallback:e.jsx(Je,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-semibold text-foreground text-left text-sm",children:r==null?void 0:r.name}),e.jsxs("span",{className:"text-default-500 text-left text-xs",children:["ID: ",(r==null?void 0:r.employee_id)||"N/A"]})]}),e.jsx("div",{className:"flex-1 min-w-0 flex justify-end",children:e.jsx(S,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:F=>{F.stopPropagation(),Ze.visit(route("profile",{user:r.id}))},children:e.jsx(et,{className:"w-4 h-4"})})})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-3",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ue,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs truncate",children:r==null?void 0:r.email})]}),(r==null?void 0:r.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Le,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs",children:r==null?void 0:r.phone})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[I&&e.jsx(le,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e.jsx(we,{className:"w-3 h-3"}),children:I.name}),T&&e.jsx(le,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e.jsx(Ne,{className:"w-3 h-3"}),children:T.title}),o&&e.jsx(le,{size:"sm",variant:"bordered",className:"text-xs",startContent:e.jsx(Ie,{className:"w-3 h-3"}),children:o.name})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(bt,{title:R||"Employee Directory"}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Employee Directory Management",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(Ee,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(Oe,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${h?"p-6":Z?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                              ${h?"p-3":Z?"p-2.5":"p-2"} 
                              rounded-xl flex items-center justify-center
                            `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(Re,{className:`
                                ${h?"w-8 h-8":Z?"w-6 h-6":"w-5 h-5"}
                              `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                ${h?"text-2xl":Z?"text-xl":"text-lg"}
                                font-bold text-foreground
                                ${h?"":"truncate"}
                              `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Directory"}),e.jsx("p",{className:`
                                ${h?"text-sm":"text-xs"} 
                                text-default-500
                                ${h?"":"truncate"}
                              `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage employee information and organizational structure"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(S,{className:"text-white font-medium",style:{background:"linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary) 80%, var(--theme-secondary)))",borderRadius:w()},startContent:e.jsx(qe,{className:"w-4 h-4"}),children:_?"Add":"Add Employee"})})]})})})}),e.jsxs(Te,{className:"p-6",children:[e.jsx(Nt,{stats:pe,className:"mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"p-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:w(),backdropFilter:"blur(16px)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--theme-foreground)"},children:"Department Distribution"}),e.jsx("div",{className:"space-y-3",children:(C=(N=b.distribution)==null?void 0:N.by_department)==null?void 0:C.slice(0,5).map((r,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 rounded-full overflow-hidden",style:{background:"color-mix(in srgb, var(--theme-content3) 40%, transparent)"},children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${r.percentage}%`,background:"linear-gradient(90deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary) 80%, var(--theme-secondary)))"}})}),e.jsx("span",{className:"text-xs w-8 opacity-70",style:{color:"var(--theme-foreground)"},children:r.count})]})]},l))})]}),e.jsxs("div",{className:"p-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:w(),backdropFilter:"blur(16px)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--theme-foreground)"},children:"Hiring Trends"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:"Last 30 Days"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--theme-foreground)"},children:((t=(re=b.hiring_trends)==null?void 0:re.recent_hires)==null?void 0:t.last_30_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:"Last 90 Days"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--theme-foreground)"},children:((c=(s=b.hiring_trends)==null?void 0:s.recent_hires)==null?void 0:c.last_90_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"This Year"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((p=(i=b.hiring_trends)==null?void 0:i.recent_hires)==null?void 0:p.last_year)||0})]}),e.jsx("div",{className:"pt-2 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Monthly Growth"}),e.jsxs("span",{className:`text-sm font-medium ${(((u=b.hiring_trends)==null?void 0:u.monthly_growth_rate)||0)>=0?"text-green-400":"text-red-400"}`,children:[((x=b.hiring_trends)==null?void 0:x.monthly_growth_rate)||0,"%"]})]})})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Workforce Health"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Retention Rate"}),e.jsxs("span",{className:"text-sm font-medium text-green-400",children:[((j=b.workforce_health)==null?void 0:j.retention_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Turnover Rate"}),e.jsxs("span",{className:"text-sm font-medium text-orange-400",children:[((B=b.workforce_health)==null?void 0:B.turnover_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Active Employees"}),e.jsxs("span",{className:"text-sm font-medium text-blue-400",children:[((be=(U=b.workforce_health)==null?void 0:U.status_ratio)==null?void 0:be.active_percentage)||0,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Attendance Types"}),e.jsx("div",{className:"space-y-3",children:(Pe=(se=b.distribution)==null?void 0:se.by_attendance_type)==null?void 0:Pe.map((r,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-linear-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${r.percentage}%`}})}),e.jsx("span",{className:"text-xs text-default-500 w-8",children:r.count})]})]},l))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsx(gt,{label:"Search Employees",placeholder:"Search by name, email, or employee ID...",value:g.search,onChange:r=>ie(r.target.value),startContent:e.jsx(St,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:w(),classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Search employees"})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(ut,{variant:"bordered",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:w()},children:[e.jsxs(S,{isIconOnly:_,color:E==="table"?"primary":"default",onPress:()=>L("table"),style:{background:E==="table"?"var(--theme-primary)":"transparent",color:E==="table"?"white":"var(--theme-foreground)"},children:[e.jsx(Rt,{className:"w-4 h-4"}),!_&&e.jsx("span",{className:"ml-1",children:"Table"})]}),e.jsxs(S,{isIconOnly:_,color:E==="grid"?"primary":"default",onPress:()=>L("grid"),style:{background:E==="grid"?"var(--theme-primary)":"transparent",color:E==="grid"?"white":"var(--theme-foreground)"},children:[e.jsx(yt,{className:"w-4 h-4"}),!_&&e.jsx("span",{className:"ml-1",children:"Grid"})]})]}),e.jsx(S,{isIconOnly:!0,variant:"bordered",onPress:()=>M(!P),style:{background:P?"color-mix(in srgb, var(--theme-primary) 20%, transparent)":"color-mix(in srgb, var(--theme-content2) 30%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",color:P?"var(--theme-primary)":"var(--theme-foreground)",borderRadius:w()},children:e.jsx(Dt,{className:"w-4 h-4"})})]})]}),P&&e.jsx(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-4",children:e.jsxs("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:w(),backdropFilter:"blur(16px)"},children:[e.jsx(Ae,{label:"Department",placeholder:"All Departments",selectedKeys:g.department!=="all"?[g.department]:[],onSelectionChange:r=>{const l=Array.from(r)[0];oe(l||"all")},variant:"bordered",size:"sm",radius:w(),startContent:e.jsx(we,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:v==null?void 0:v.map(r=>e.jsx(ye,{textValue:r.name,children:r.name},String(r.id)))}),e.jsx(Ae,{label:"Designation",placeholder:"All Designations",selectedKeys:g.designation!=="all"?[g.designation]:[],onSelectionChange:r=>{const l=Array.from(r)[0];ce(l||"all")},variant:"bordered",size:"sm",radius:w(),isDisabled:g.department==="all",startContent:e.jsx(Ne,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:G==null?void 0:G.map(r=>e.jsx(ye,{textValue:r.title,children:r.title},String(r.id)))}),e.jsx(Ae,{label:"Attendance Type",placeholder:"All Attendance Types",selectedKeys:g.attendanceType!=="all"?[g.attendanceType]:[],onSelectionChange:r=>{const l=Array.from(r)[0];de(l||"all")},variant:"bordered",size:"sm",radius:w(),startContent:e.jsx(Ie,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:y==null?void 0:y.map(r=>e.jsx(ye,{textValue:r.name,children:r.name},String(r.id)))}),e.jsx("div",{className:"flex items-end",children:e.jsx(S,{variant:"flat",size:"sm",className:"w-full",onPress:()=>{V({search:"",department:"all",designation:"all",attendanceType:"all"}),f(r=>({...r,currentPage:1}))},isDisabled:g.search===""&&g.department==="all"&&g.designation==="all"&&g.attendanceType==="all",style:{background:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",color:"var(--theme-danger)",borderRadius:w()},children:"Clear Filters"})})]})})]}),e.jsxs(Ee,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                      var(--theme-content1, #FAFAFA) 20%, 
                      var(--theme-content2, #F4F4F5) 10%, 
                      var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(Oe,{className:"border-b pb-2",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)"},children:e.jsx(Re,{className:"w-6 h-6",style:{color:"var(--theme-primary)"}})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Directory"})]})}),e.jsx(Te,{children:e.jsx("div",{className:"max-h-[84vh] overflow-y-auto",children:ue?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ae,{size:"lg",color:"primary"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading employees data..."})]}):E==="table"?e.jsx(Lt,{allUsers:W,allManagers:D,departments:v,designations:a,attendanceTypes:y,setUsers:k,isMobile:_,isTablet:A,pagination:d,onPageChange:te,onRowsPerPageChange:me,totalUsers:J,loading:ue,updateEmployeeOptimized:he,deleteEmployeeOptimized:xe}):e.jsxs("div",{className:"p-4",children:[W.length>0?e.jsx("div",{className:`grid gap-4 ${_?"grid-cols-1":A?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:W.map((r,l)=>e.jsx(m,{user:r,index:l},r.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Re,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e.jsx("p",{className:"text-base text-default-500",children:"No employees found"}),e.jsx("p",{className:"text-sm text-default-500",children:"Try adjusting your search or filters"})]}),W.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2",style:{borderTop:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",backdropFilter:"blur(16px)"},children:[e.jsxs("span",{className:"text-xs mb-3 sm:mb-0 opacity-70",style:{color:"var(--theme-foreground)"},children:["Showing ",(d.currentPage-1)*d.perPage+1," to ",Math.min(d.currentPage*d.perPage,d.total)," of ",d.total," employees"]}),e.jsx(Qe,{total:Math.ceil(d.total/d.perPage),initialPage:d.currentPage,page:d.currentPage,onChange:te,size:_?"sm":"md",variant:"bordered",showControls:!0,style:{"--pagination-item-bg":"color-mix(in srgb, var(--theme-content2) 50%, transparent)","--pagination-item-border":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}})]})]})})})]})]})]})})})})})]})};Ut.layout=R=>e.jsx(wt,{children:R});export{Ut as default};
