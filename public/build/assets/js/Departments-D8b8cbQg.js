import{J as we,j as e,a,b as J,Q as Oe}from"./app-DjI6bQiW.js";import{r as d}from"./react-core-DDvupgOx.js";import{G as je}from"./logo-DSXS0XYv.js";import{P as Le}from"./PageHeader-LtALPHHB.js";import{S as Ye}from"./StatsCards-XKPYcq1T.js";import{m as B,f as Ne,b as ee,h as ye,n as _e,B as P,F as We,c as Ge,o as qe,A as He}from"./App-DqZqZbID.js";import{d as ne}from"./dayjs.min-WGrXCzEl.js";import{N as Qe}from"./NoDataMessage-CsBccBi1.js";import{F as me}from"./EyeIcon-B0n7aNqt.js";import{F as ae}from"./PencilIcon-Dhfhztfv.js";import{F as he}from"./TrashIcon-D8Us3Tf_.js";import{F as Ve}from"./EllipsisVerticalIcon-BX6PWMxg.js";import{F as te}from"./CheckCircleIcon-CJUGb5Jf.js";import{F as re}from"./XCircleIcon-DJR5_Dv7.js";import{F as De}from"./MapPinIcon-C7XkNQ6g.js";import{F as Ue}from"./UserIcon-D16nn9o_.js";import{m as Je,n as Ke,o as Xe,q as Ze,v as ea,N as aa,k as ta,G as Ce,t as K,b as T,O as ra,P as sa,Q as X,S as la,f as I,L as ue,i as na,D as ia,s as pe,l as M,e as oa,g as da}from"./ui-libraries-CxFzkmxb.js";import{a as O}from"./utilities-DT6SRl8s.js";import{G as ca}from"./GlassDialog-Bt6xcnNg.js";import{u as Pe,a as se,p as Fe,T as D,o as Se,t as Y,h as y,i as z,j as fe,I as ge,k as be,M as L,m as Z,a3 as ma,a4 as ha,q as ke,r as Ie,s as W,B as le,A as xe,f as Te,D as ua,G as pa,F as fa}from"./mui-libraries-CyFs7uQU.js";import{F as ga}from"./ExclamationTriangleIcon-C_gcLnRy.js";import{F as ba}from"./PlusIcon-AKF5lePL.js";import{F as xa}from"./DocumentArrowDownIcon-Cq-JO3FQ.js";import{F as va}from"./TableCellsIcon-C2_Qfojp.js";import{F as wa}from"./AdjustmentsHorizontalIcon-DKS_UuIh.js";import"./EnvelopeIcon-D6nUSkik.js";import"./ShieldCheckIcon-C7bFKizx.js";const Na=({departments:h,onEdit:u,onDelete:C,onView:l,loading:f,isMobile:c,isTablet:x,pagination:m,onPageChange:n,onRowsPerPageChange:v,canEditDepartment:s=!1,canDeleteDepartment:F=!1})=>{const{auth:S}=we().props,p=s||S.permissions?.includes("departments.update")||!1,g=F||S.permissions?.includes("departments.delete")||!1,w=d.useMemo(()=>[{name:"DEPARTMENT",uid:"name"},{name:"CODE",uid:"code",hide:c},{name:"MANAGER",uid:"manager"},{name:"EMPLOYEES",uid:"employees"},{name:"LOCATION",uid:"location",hide:c},{name:"STATUS",uid:"status"},{name:"ESTABLISHED",uid:"established",hide:c||x},{name:"ACTIONS",uid:"actions"}].filter(_=>!_.hide),[c,x]),i=(r,_)=>{switch(_){case"name":return e(ue,{avatarProps:{radius:"lg",fallback:e(ye,{className:"w-8 h-4"}),size:c?"sm":"md"},name:r.name,description:r.parent?r.parent.name:"Top-level department",classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}});case"code":return e("div",{children:r.code?e(I,{size:"sm",variant:"flat",color:"primary",className:"text-xs",children:r.code}):e("span",{className:"text-default-400 text-xs",children:"-"})});case"manager":return e("div",{className:"flex items-start ",children:r.manager?a(J,{children:[e(ue,{avatarProps:{radius:"lg",src:r.manager?.profile_image_url||r.manager?.profile_image,size:"md",fallback:e(Ue,{className:"w-5 h-5"})},classNames:{name:"font-semibold text-foreground text-sm",description:"text-default-500 text-xs"}}),a("div",{className:"flex flex-col",children:[e("span",{className:"text-sm",children:r.manager.name}),!c&&r.manager.email&&e("span",{className:"text-xs text-default-400",children:r.manager.email})]})]}):e("span",{className:"text-default-400 text-xs",children:"Not assigned"})});case"employees":return a("div",{className:"flex items-center gap-2",children:[e(ee,{className:"w-4 h-4 text-default-400"}),e("span",{children:r.employee_count||0})]});case"location":return e("div",{className:"flex items-center gap-2",children:r.location?a(J,{children:[e(De,{className:"w-4 h-4 text-default-400"}),e("span",{children:r.location})]}):e("span",{className:"text-default-400 text-xs",children:"-"})});case"status":return e(I,{size:"sm",variant:r.is_active?"solid":"bordered",color:r.is_active?"success":"danger",startContent:r.is_active?e(te,{className:"w-3 h-3"}):e(re,{className:"w-3 h-3"}),children:r.is_active?"Active":"Inactive"});case"established":return a("div",{className:"flex items-center gap-2",children:[e(Ne,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-sm",children:r.established_date?ne(r.established_date).format("MMM D, YYYY"):e("span",{className:"text-default-400 text-xs",children:"-"})})]});case"actions":return e("div",{className:"flex justify-end items-center",children:c?a(la,{children:[e(ra,{children:e(T,{isIconOnly:!0,size:"sm",variant:"light",children:e(Ve,{className:"w-4 h-4"})})}),a(sa,{"aria-label":"Department actions",children:[e(X,{startContent:e(me,{className:"w-4 h-4"}),onPress:()=>l(r),children:"View Details"},"view"),p&&e(X,{startContent:e(ae,{className:"w-4 h-4"}),onPress:()=>u(r),children:"Edit Department"},"edit"),g&&e(X,{className:"text-danger",color:"danger",startContent:e(he,{className:"w-4 h-4"}),isDisabled:r.employee_count>0,onPress:()=>C(r),children:"Delete Department"},"delete")]})]}):a(J,{children:[e(K,{content:"View Department",children:e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:()=>l(r),children:e(me,{className:"w-4 h-4"})})}),p&&e(K,{content:"Edit Department",children:e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-blue-500",onPress:()=>u(r),children:e(ae,{className:"w-4 h-4"})})}),g&&e(K,{content:r.employee_count>0?"Cannot delete department with employees":"Delete Department",children:e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-danger",isDisabled:r.employee_count>0,onPress:()=>C(r),children:e(he,{className:"w-4 h-4"})})})]})});default:return e("span",{children:r[_]})}},o=()=>!h||!h.data||f?null:a("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10",children:[a("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(m.currentPage-1)*m.perPage+1," to ",Math.min(m.currentPage*m.perPage,h.total)," of ",h.total," departments"]}),e(Ce,{total:Math.ceil(h.total/m.perPage),initialPage:m.currentPage,page:m.currentPage,onChange:n,size:c?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]});return!f&&(!h||!h.data||h.data.length===0)?e("div",{className:"w-full",children:e(Qe,{message:"No departments found",icon:e(B,{className:"w-12 h-12 text-default-300"}),description:"Try adjusting your search or filters"})}):e("div",{className:"w-full",children:a(ta,{"aria-label":"Departments table",removeWrapper:!0,classNames:{base:"bg-transparent",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs",td:"border-b border-white/5 py-3"},bottomContent:o(),children:[e(Je,{columns:w,children:r=>e(Ke,{children:r.name},r.uid)}),e(Xe,{items:h.data||[],emptyContent:!f&&"No departments found",loadingContent:e(aa,{}),isLoading:f,children:r=>e(Ze,{children:_=>e(ea,{children:i(r,_)})},r.id)})]})})},ve=({open:h,onClose:u,onSuccess:C,department:l=null,managers:f=[],parentDepartments:c=[]})=>{const x=Pe(),m=se(x.breakpoints.down("md")),[n,v]=d.useState(!1),[s,F]=d.useState({}),S={name:"",code:"",description:"",parent_id:null,manager_id:null,location:"",is_active:!0,established_date:""},[p,g]=d.useState(S);d.useEffect(()=>{g(l?{name:l.name||"",code:l.code||"",description:l.description||"",parent_id:l.parent_id||null,manager_id:l.manager_id||null,location:l.location||"",is_active:l.is_active??!0,established_date:l.established_date?ne(l.established_date).format("YYYY-MM-DD"):""}:S),F({})},[l,h]);const w=o=>{const{name:r,value:_,type:k,checked:j}=o.target;g(N=>({...N,[r]:k==="checkbox"?j:_})),s[r]&&F(N=>({...N,[r]:null}))},i=async()=>{v(!0),F({});try{const o={...p,established_date:p.established_date||null};let r;l?.id?(r=await O.put(`/departments/${l.id}`,o),P.success("Department updated successfully")):(r=await O.post("/departments",o),P.success("Department created successfully")),C(r.data.department),u()}catch(o){if(console.error("Error saving department:",o),o.response?.data?.errors){F(o.response.data.errors);const r=Object.values(o.response.data.errors)[0];r&&P.error(r[0])}else P.error("An error occurred while saving the department")}finally{v(!1)}};return a(ca,{open:h,onClose:n?void 0:u,maxWidth:"md",fullWidth:!0,fullScreen:m,"aria-labelledby":"department-form-dialog",children:[a(Fe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[e(D,{variant:"h6",component:"div",children:l?"Edit Department":"Create New Department"}),e(Se,{edge:"end",color:"inherit",onClick:u,disabled:n,"aria-label":"close",children:e(_e,{className:"w-5 h-5"})})]}),e(Y,{}),e(ke,{sx:{pt:2},children:a(y,{container:!0,spacing:3,children:[e(y,{item:!0,xs:12,children:e(D,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Basic Information"})}),e(y,{item:!0,xs:12,md:6,children:e(z,{name:"name",label:"Department Name",fullWidth:!0,required:!0,value:p.name,onChange:w,error:!!s.name,helperText:s.name?.[0]||"",disabled:n})}),e(y,{item:!0,xs:12,md:6,children:e(z,{name:"code",label:"Department Code",fullWidth:!0,value:p.code||"",onChange:w,error:!!s.code,helperText:s.code?.[0]||"Unique identifier (e.g., HR001, FIN002)",disabled:n})}),e(y,{item:!0,xs:12,children:e(z,{name:"description",label:"Description",fullWidth:!0,multiline:!0,rows:3,value:p.description||"",onChange:w,error:!!s.description,helperText:s.description?.[0]||"",disabled:n})}),e(y,{item:!0,xs:12,sx:{mt:2},children:e(D,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Organizational Information"})}),e(y,{item:!0,xs:12,md:6,children:a(fe,{fullWidth:!0,error:!!s.parent_id,children:[e(ge,{id:"parent-department-label",children:"Parent Department"}),a(be,{labelId:"parent-department-label",name:"parent_id",value:p.parent_id||"",onChange:w,label:"Parent Department",disabled:n,children:[e(L,{value:"",children:e("em",{children:"None (Top-Level Department)"})}),c.map(o=>l?.id!==o.id&&e(L,{value:o.id,children:o.name},o.id))]}),s.parent_id&&e(Z,{children:s.parent_id[0]})]})}),e(y,{item:!0,xs:12,md:6,children:a(fe,{fullWidth:!0,error:!!s.manager_id,children:[e(ge,{id:"manager-label",children:"Department Manager"}),a(be,{labelId:"manager-label",name:"manager_id",value:p.manager_id||"",onChange:w,label:"Department Manager",disabled:n,children:[e(L,{value:"",children:e("em",{children:"Not Assigned"})}),f.map(o=>e(L,{value:o.id,children:o.name},o.id))]}),s.manager_id&&e(Z,{children:s.manager_id[0]})]})}),e(y,{item:!0,xs:12,md:6,children:e(z,{name:"location",label:"Location",fullWidth:!0,value:p.location||"",onChange:w,error:!!s.location,helperText:s.location?.[0]||"Physical location of the department",disabled:n})}),e(y,{item:!0,xs:12,md:6,children:e(z,{name:"established_date",label:"Established Date",type:"date",fullWidth:!0,value:p.established_date||"",onChange:w,error:!!s.established_date,helperText:s.established_date?.[0]||"",disabled:n,InputLabelProps:{shrink:!0}})}),a(y,{item:!0,xs:12,children:[e(ma,{control:e(ha,{checked:p.is_active,onChange:w,name:"is_active",color:"success",disabled:n}),label:"Department is active"}),s.is_active&&e(Z,{error:!0,children:s.is_active[0]})]})]})}),e(Y,{}),a(Ie,{sx:{px:3,py:2},children:[e(W,{onClick:u,disabled:n,color:"inherit",children:"Cancel"}),e(W,{onClick:i,variant:"contained",color:"primary",disabled:n,children:n?"Saving...":l?"Update Department":"Create Department"})]})]})},ya=({open:h,onClose:u,onSuccess:C,department:l})=>{const[f,c]=d.useState(!1),[x,m]=d.useState(null),n=async()=>{if(l){c(!0),m(null);try{await O.delete(`/departments/${l.id}`),P.success("Department deleted successfully"),C(),u()}catch(v){if(console.error("Error deleting department:",v),v.response?.data?.message)m(v.response.data.message),P.error(v.response.data.message);else if(v.response?.data?.errors){const s=Object.values(v.response.data.errors)[0];m(s),P.error(s)}else m("An error occurred while deleting the department"),P.error("An error occurred while deleting the department")}finally{c(!1)}}};return l?a(ua,{open:h,onClose:f?void 0:u,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"delete-department-dialog",children:[a(Fe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(D,{variant:"h6",children:"Delete Department"}),e(Se,{edge:"end",color:"inherit",onClick:u,disabled:f,"aria-label":"close",children:e(_e,{className:"w-5 h-5"})})]}),e(Y,{}),e(ke,{children:a(le,{sx:{display:"flex",flexDirection:"column",gap:2},children:[a(le,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(ga,{className:"w-8 h-8 text-yellow-500"}),a(D,{variant:"body1",children:["Are you sure you want to delete the department ",e("strong",{children:l.name}),"?"]})]}),l.employee_count>0&&a(xe,{severity:"warning",sx:{mt:2},children:["This department has ",l.employee_count," employees assigned to it. You cannot delete a department with active employees. Please reassign these employees to other departments first."]}),x&&e(xe,{severity:"error",sx:{mt:2},children:x}),e(D,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"This action cannot be undone. All associated data will be permanently removed."})]})}),e(Y,{}),a(Ie,{sx:{px:3,py:2},children:[e(W,{onClick:u,disabled:f,color:"inherit",children:"Cancel"}),e(W,{onClick:n,variant:"contained",color:"error",disabled:f||l.employee_count>0,startIcon:f&&e(Te,{size:20,color:"inherit"}),children:f?"Deleting...":"Delete Department"})]})]}):null},Ja=({title:h,departments:u,managers:C,parentDepartments:l,stats:f,filters:c})=>{const{auth:x}=we().props,m=Pe(),n=se(m.breakpoints.down("sm")),v=se(m.breakpoints.down("md")),[s,F]=d.useState(u||{data:[]}),[S,p]=d.useState(!1),[g,w]=d.useState({type:null,department:null}),[i,o]=d.useState({search:c?.search||"",status:c?.status||"all",parentDepartment:c?.parentDepartment||"all"}),[r,_]=d.useState(!1),[k,j]=d.useState("table"),[N,G]=d.useState({currentPage:u?.current_page||1,perPage:u?.per_page||10}),[$,Ae]=d.useState(f||{total:0,active:0,inactive:0,parent_departments:0}),ie=x.permissions?.includes("departments.create")||!1,q=x.permissions?.includes("departments.update")||!1,H=x.permissions?.includes("departments.delete")||!1,Ee=q||x.permissions?.includes("departments.update")||!1;H||x.permissions?.includes("departments.delete");const Q=d.useCallback(async()=>{p(!0);try{const t=await O.get(route("api.departments"),{params:{page:N.currentPage,per_page:N.perPage,search:i.search,status:i.status,parent_department:i.parentDepartment}});F(t.data.departments)}catch(t){console.error("Error fetching departments:",t),P.error("Failed to load departments data")}finally{p(!1)}},[N.currentPage,N.perPage,i.search,i.status,i.parentDepartment]),V=d.useCallback(async()=>{try{const t=await O.get(route("departments.stats"));if(t.status===200){const{stats:b}=t.data;Ae(b)}}catch(t){console.error("Error fetching department stats:",t)}},[]);d.useEffect(()=>{Q(),V()},[Q,V]);const A=(t,b)=>{o(R=>({...R,[t]:b})),G(R=>({...R,currentPage:1}))},oe=t=>{G(b=>({...b,currentPage:t})),window.scrollTo({top:0,behavior:"smooth"})},Re=t=>{G({currentPage:1,perPage:t})},E=(t,b=null)=>{w({type:t,department:b})},U=()=>{w({type:null,department:null})},de=()=>{Q(),V()},Me=({department:t,index:b})=>{const R=t.manager,ce=t.parent;return e(da,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>E("view_department",t),children:a(oa,{className:"p-4 flex flex-col h-full",children:[a("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e("div",{className:"flex justify-center items-center h-10 w-10 rounded-lg bg-primary/20 text-primary flex-shrink-0",children:e(ye,{className:"w-5 h-5"})}),e("div",{className:"flex-1 min-w-0",children:a("div",{className:"flex items-start justify-between",children:[a("div",{children:[e("h3",{className:"font-semibold text-foreground text-sm line-clamp-1",children:t.name}),e("p",{className:"text-default-500 text-xs",children:t.code||"No Code"})]}),Ee&&e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground ml-2",onPress:Be=>{Be.stopPropagation(),E("edit_department",t)},children:e(ae,{className:"w-4 h-4"})})]})})]}),a("div",{className:"flex-1 flex flex-col gap-3",children:[t.location&&a("div",{className:"flex items-center gap-2 text-sm",children:[e(De,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs line-clamp-1",children:t.location})]}),t.established_date&&a("div",{className:"flex items-center gap-2 text-sm",children:[e(Ne,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs",children:ne(t.established_date).format("MMM D, YYYY")})]}),a("div",{className:"flex items-center gap-2 text-sm",children:[e(ee,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),a("span",{className:"text-default-600 text-xs",children:[t.employee_count||0," ",t.employee_count===1?"Employee":"Employees"]})]})]}),a("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[e(I,{size:"sm",variant:t.is_active?"solid":"bordered",color:t.is_active?"success":"danger",className:"text-xs",startContent:t.is_active?e(te,{className:"w-3 h-3"}):e(re,{className:"w-3 h-3"}),children:t.is_active?"Active":"Inactive"}),ce&&e(I,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e(B,{className:"w-3 h-3"}),children:ce.name}),R&&e(I,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e(ee,{className:"w-3 h-3"}),children:R.name})]})]})})},$e=d.useMemo(()=>[{title:"Total Departments",value:$?.total||0,icon:e(B,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All departments"},{title:"Active",value:$?.active||0,icon:e(te,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Active departments"},{title:"Inactive",value:$?.inactive||0,icon:e(re,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Inactive departments"},{title:"Parent Departments",value:$?.parent_departments||0,icon:e(We,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Top-level departments"}],[$]),ze=d.useMemo(()=>{const t=[];return ie&&t.push({label:n?"Add":"Add Department",icon:e(ba,{className:"w-4 h-4"}),onPress:()=>E("add_department"),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}),t.push({label:n?"":"Export",isIconOnly:n,icon:e(xa,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),t},[ie,n]);return a(He,{children:[e(Oe,{title:h}),e(le,{sx:{display:"flex",justifyContent:"center",p:2},children:e(pa,{in:!0,timeout:800,children:e(je,{children:e(Le,{title:"Department Management",subtitle:"Manage company departments, hierarchies, and organizational structure",icon:e(B,{className:"w-8 h-8"}),variant:"default",actionButtons:ze,children:a("div",{className:"p-4 sm:p-6",children:[e(Ye,{stats:$e,className:"mb-6"}),a("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(na,{label:"Search Departments",variant:"bordered",placeholder:"Search by name, code, or location...",value:i.search,onValueChange:t=>A("search",t),startContent:e(Ge,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:n?"sm":"md"})}),a("div",{className:"flex gap-2 items-end",children:[a(ia,{variant:"bordered",className:"bg-white/5",children:[a(T,{isIconOnly:n,color:k==="table"?"primary":"default",onPress:()=>j("table"),className:k==="table"?"bg-blue-500/20":"",children:[e(va,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Table"})]}),a(T,{isIconOnly:n,color:k==="grid"?"primary":"default",onPress:()=>j("grid"),className:k==="grid"?"bg-blue-500/20":"",children:[e(qe,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Grid"})]})]}),a(T,{isIconOnly:n,variant:"bordered",onPress:()=>_(!r),className:r?"bg-purple-500/20":"bg-white/5",children:[e(wa,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),r&&e(fa,{in:!0,timeout:300,children:a("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[a("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[a(pe,{label:"Status",variant:"bordered",selectedKeys:i.status!=="all"?[i.status]:[],onSelectionChange:t=>{const b=Array.from(t)[0]||"all";A("status",b)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(M,{value:"all",children:"All Statuses"},"all"),e(M,{value:"active",children:"Active Only"},"active"),e(M,{value:"inactive",children:"Inactive Only"},"inactive")]}),a(pe,{label:"Parent Department",variant:"bordered",selectedKeys:i.parentDepartment!=="all"?[i.parentDepartment]:[],onSelectionChange:t=>{const b=Array.from(t)[0]||"all";A("parentDepartment",b)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(M,{value:"all",children:"All Parent Departments"},"all"),e(M,{value:"none",children:"Top-Level Departments"},"none"),l?.map(t=>e(M,{value:t.id.toString(),children:t.name},t.id.toString()))]})]}),(i.search||i.status!=="all"||i.parentDepartment!=="all")&&a("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[i.search&&a(I,{variant:"flat",color:"primary",size:"sm",onClose:()=>A("search",""),children:["Search: ",i.search]}),i.status!=="all"&&a(I,{variant:"flat",color:"secondary",size:"sm",onClose:()=>A("status","all"),children:["Status: ",i.status==="active"?"Active":"Inactive"]}),i.parentDepartment!=="all"&&a(I,{variant:"flat",color:"warning",size:"sm",onClose:()=>A("parentDepartment","all"),children:["Parent: ",i.parentDepartment==="none"?"None (Top-Level)":l?.find(t=>t.id===parseInt(i.parentDepartment))?.name]})]})]})}),a("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:a(D,{variant:"h6",className:"font-semibold text-foreground",children:[k==="table"?"Department Table":"Department Grid",a("span",{className:"text-sm text-default-500 ml-2",children:["(",s.total||0," ",s.total===1?"department":"departments",")"]})]})}),S?a("div",{className:"text-center py-8",children:[e(Te,{size:40}),e(D,{className:"mt-4",color:"textSecondary",children:"Loading departments data..."})]}):k==="table"?e(Na,{departments:s,loading:S,onEdit:q?t=>E("edit_department",t):void 0,onDelete:H?t=>E("delete_department",t):void 0,onView:t=>E("view_department",t),isMobile:n,isTablet:v,pagination:N,onPageChange:oe,onRowsPerPageChange:Re,canEditDepartment:q,canDeleteDepartment:H}):a("div",{className:"p-4",children:[s.data&&s.data.length>0?e("div",{className:`grid gap-4 ${n?"grid-cols-1":v?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:s.data.map((t,b)=>e(Me,{department:t,index:b},t.id))}):a("div",{className:"text-center py-8",children:[e(B,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(D,{variant:"body1",color:"textSecondary",children:"No departments found"}),e(D,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),s.data&&s.data.length>0&&e("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e(Ce,{total:Math.ceil(s.total/N.perPage),initialPage:N.currentPage,page:N.currentPage,onChange:oe,size:n?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})}),(g.type==="add_department"||g.type==="edit_department")&&e(ve,{open:!0,onClose:U,onSuccess:de,department:g.type==="edit_department"?g.department:null,managers:C,parentDepartments:l}),g.type==="delete_department"&&e(ya,{open:!0,onClose:U,onSuccess:de,department:g.department}),g.type==="view_department"&&e(ve,{open:!0,onClose:U,onSuccess:()=>{},department:g.department,managers:C,parentDepartments:l,readOnly:!0})]})};export{Ja as default};
