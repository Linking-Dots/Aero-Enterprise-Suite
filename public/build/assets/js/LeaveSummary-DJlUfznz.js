import{j as e,d as ce,a as t,Q as oe,b as V}from"./app-TEQL7K6j.js";import{r as s}from"./react-core-DDvupgOx.js";import{G as de}from"./logo-DKpGKT0o.js";import{P as me}from"./PageHeader-BYfEhsuK.js";import{S as he}from"./StatsCards-CU-OCYJs.js";import{F as T,e as pe,h as v,G as B,c as ue,f as ge,A as be}from"./App-ra0ZMKdn.js";import{u as fe,a as ve,G as we,F as Ne,T as w,B as xe}from"./mui-libraries-DeLqYkpc.js";import{F as ye}from"./CheckCircleIcon-CJUGb5Jf.js";import{F as _e}from"./AdjustmentsHorizontalIcon-DKS_UuIh.js";import{F as M}from"./PresentationChartLineIcon-B_Z8Hogu.js";import{F as Se}from"./DocumentArrowDownIcon-Cq-JO3FQ.js";import{p as Fe,f as N,i as Ce,D as Ae,b as $,s as x,l as i,E as De,F as Y,k as G,m as j,n as l,o as z,q as U,v as d,G as Pe,g as J,e as I}from"./ui-libraries-CxFzkmxb.js";import"./utilities-DT6SRl8s.js";import"./EnvelopeIcon-D6nUSkik.js";import"./UserIcon-D16nn9o_.js";import"./ShieldCheckIcon-C7bFKizx.js";import"./ExclamationTriangleIcon-C_gcLnRy.js";const Ee=({title:y,summaryData:O})=>{const K=fe(),u=ve(K.breakpoints.down("sm")),{users:ke=[],departments:Q=[],leave_types:Re=[],columns:Le=[],data:_=[],department_summary:C=[],stats:m={},year:A=new Date().getFullYear(),filters:H={}}=O||{},[q,D]=s.useState(!1),[c,P]=s.useState(H),[g,W]=s.useState(!1),[E,X]=s.useState("employee"),[o,S]=s.useState(""),[F,k]=s.useState(1),[h,Z]=s.useState(15),p=s.useMemo(()=>{let a=_;return o&&(a=a.filter(r=>r.employee_name?.toLowerCase().includes(o.toLowerCase())||r.department?.toLowerCase().includes(o.toLowerCase()))),a},[_,o]),ee=s.useMemo(()=>{const a=(F-1)*h,r=a+h;return p.slice(a,r)},[p,F,h]),R=Math.ceil(p.length/h),ae=s.useMemo(()=>[{title:"Total Employees",value:m.total_employees||0,icon:e(T,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Active employees"},{title:"Approved Leaves",value:m.total_approved_leaves||0,icon:e(ye,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Total approved days"},{title:"Pending Leaves",value:m.total_pending_leaves||0,icon:e(pe,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Awaiting approval"},{title:"Departments",value:m.departments_count||0,icon:e(v,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Active departments"}],[m]),b=s.useCallback((a,r)=>{const n={...c,[a]:r};P(n),L(n)},[c]),L=s.useCallback(a=>{D(!0),ce.Inertia.get(route("leave-summary"),a,{preserveState:!0,replace:!0,onFinish:()=>D(!1)})},[]),te=s.useCallback(()=>{const a={year:new Date().getFullYear()};P(a),S(""),L(a)},[]),re=[{label:"Export Data",icon:e(Se,{className:"w-4 h-4"}),onPress:()=>{console.log("Export functionality")},className:B.primaryButton},{label:"Current Year",icon:e(ge,{className:"w-4 h-4"}),onPress:()=>b("year",new Date().getFullYear()),className:B.secondaryButton}],le=s.useCallback((a,r)=>{const n=a[r];switch(r){case"employee_name":return t("div",{className:"flex flex-col",children:[e("p",{className:"text-bold text-sm text-foreground",children:a.employee_name}),e("p",{className:"text-tiny text-default-400",children:a.department}),a.designation&&e("p",{className:"text-tiny text-default-500",children:a.designation})]});case"total_approved":case"total_pending":case"total_rejected":const ne={total_approved:"success",total_pending:"warning",total_rejected:"danger"};return n>0?e(N,{size:"sm",variant:"flat",color:ne[r],className:"min-w-12",children:n}):"";case"usage_percentage":const f=n||0,ie=f>80?"danger":f>60?"warning":"success";return t("div",{className:"flex flex-col items-center gap-1",children:[e(Fe,{size:"sm",value:f,color:ie,className:"w-16"}),t("span",{className:"text-tiny",children:[f,"%"]})]});case"total_balance":return e("div",{className:"text-center",children:e("span",{className:n<5?"text-danger":"text-foreground",children:n})});default:return n!=null&&n!==""?n:""}},[]),se=s.useMemo(()=>{const a=new Date().getFullYear();return Array.from({length:10},(r,n)=>a-n)},[]);return t(V,{children:[e(oe,{title:y}),e(xe,{sx:{display:"flex",justifyContent:"center",p:2},children:e(we,{in:!0,children:e(de,{children:e(me,{title:"Leave Summary",subtitle:"Comprehensive employee leave analytics and reporting",icon:e(M,{className:"w-8 h-8"}),variant:"gradient",actionButtons:re,children:t("div",{className:"p-6",children:[e(he,{stats:ae,className:"mb-6"}),t("div",{className:"flex flex-col gap-4 mb-6",children:[t("div",{className:"flex flex-col sm:flex-row gap-4",children:[e("div",{className:"flex-1",children:e(Ce,{isClearable:!0,label:"Search Employees",variant:"bordered",placeholder:"Search by name or department...",startContent:e(ue,{className:"w-4 h-4"}),value:o,onClear:()=>S(""),onValueChange:S,classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:u?"sm":"md"})}),e("div",{className:"flex gap-2 items-end",children:e(Ae,{variant:"bordered",className:"bg-white/5",children:t($,{isIconOnly:u,color:g?"primary":"default",onPress:()=>W(!g),className:g?"bg-purple-500/20":"bg-white/5",children:[e(_e,{className:"w-4 h-4"}),!u&&e("span",{className:"ml-1",children:"Filters"})]})})})]}),g&&e(Ne,{in:!0,timeout:300,children:e("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e(x,{label:"Year",variant:"bordered",selectedKeys:[String(c.year||A)],onSelectionChange:a=>{const r=Array.from(a)[0];r&&b("year",parseInt(r))},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:se.map(a=>e(i,{value:a,textValue:String(a),children:a},a))}),t(x,{label:"Department",variant:"bordered",selectedKeys:c.department_id?[String(c.department_id)]:[],onSelectionChange:a=>{const r=Array.from(a)[0];b("department_id",r||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e(i,{value:"",textValue:"All Departments",children:"All Departments"},""),Q.map(a=>e(i,{value:a.id,textValue:a.name,children:a.name},a.id))]}),t(x,{label:"Leave Status",variant:"bordered",selectedKeys:c.status?[c.status]:[],onSelectionChange:a=>{const r=Array.from(a)[0];b("status",r||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e(i,{value:"",textValue:"All Status",children:"All Status"},""),e(i,{value:"Approved",textValue:"Approved",children:"Approved"},"Approved"),e(i,{value:"Pending",textValue:"Pending",children:"Pending"},"Pending"),e(i,{value:"Declined",textValue:"Declined",children:"Declined"},"Declined")]}),e("div",{className:"flex gap-2 items-end",children:e($,{color:"primary",variant:"flat",onPress:te,size:u?"sm":"md",children:"Clear Filters"})})]})})})]}),e("div",{className:"mb-6",children:t(De,{selectedKey:E,onSelectionChange:X,variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-primary",tab:"max-w-fit px-0 h-12"},children:[e(Y,{title:t("div",{className:"flex items-center space-x-2",children:[e(T,{className:"w-4 h-4"}),e("span",{children:"Employee Summary"})]})},"employee"),e(Y,{title:t("div",{className:"flex items-center space-x-2",children:[e(v,{className:"w-4 h-4"}),e("span",{children:"Department Summary"})]})},"department")]})}),E==="employee"?t("div",{className:"space-y-4",children:[t("div",{className:"flex justify-between items-center",children:[t("span",{className:"text-default-400 text-small",children:["Total ",p.length," employees",o&&` (filtered from ${_.length})`]}),t("div",{className:"flex gap-2 items-center",children:[e("span",{className:"text-tiny text-default-400",children:"Rows per page:"}),t(x,{size:"sm",selectedKeys:[String(h)],onSelectionChange:a=>{const r=Number(Array.from(a)[0]);Z(r),k(1)},className:"w-20",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:[e(i,{value:"10",textValue:"10",children:"10"},"10"),e(i,{value:"15",textValue:"15",children:"15"},"15"),e(i,{value:"25",textValue:"25",children:"25"},"25"),e(i,{value:"50",textValue:"50",children:"50"},"50")]})]})]}),p.length>0?t(V,{children:[t(G,{"aria-label":"Employee leave summary table",isHeaderSticky:!0,classNames:{wrapper:"max-h-[600px] bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground border-b border-white/10",td:"border-b border-white/5"},children:[t(j,{children:[e(l,{children:"Employee"},"employee_name"),e(l,{align:"center",children:"JAN"},"JAN"),e(l,{align:"center",children:"FEB"},"FEB"),e(l,{align:"center",children:"MAR"},"MAR"),e(l,{align:"center",children:"APR"},"APR"),e(l,{align:"center",children:"MAY"},"MAY"),e(l,{align:"center",children:"JUN"},"JUN"),e(l,{align:"center",children:"JUL"},"JUL"),e(l,{align:"center",children:"AUG"},"AUG"),e(l,{align:"center",children:"SEP"},"SEP"),e(l,{align:"center",children:"OCT"},"OCT"),e(l,{align:"center",children:"NOV"},"NOV"),e(l,{align:"center",children:"DEC"},"DEC"),e(l,{align:"center",children:"Approved"},"total_approved"),e(l,{align:"center",children:"Pending"},"total_pending"),e(l,{align:"center",children:"Balance"},"total_balance"),e(l,{align:"center",children:"Usage"},"usage_percentage")]}),e(z,{items:ee,isLoading:q,children:a=>e(U,{children:r=>e(d,{children:le(a,r)})},a.id)})]}),R>1&&e("div",{className:"flex justify-center mt-4",children:e(Pe,{total:R,page:F,onChange:k,showControls:!0,showShadow:!0,color:"primary"})})]}):e(J,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(I,{className:"text-center py-12",children:[e(M,{className:"w-16 h-16 mx-auto mb-4 text-default-300"}),e(w,{variant:"h6",className:"mb-2 text-white",children:"No Leave Data Found"}),e(w,{variant:"body2",className:"text-gray-400",children:o?`No employees found matching "${o}"`:`No leave summary data available for ${c.year||A}.`})]})})]}):t("div",{className:"space-y-4",children:[e(w,{variant:"h6",className:"mb-4 text-white",children:"Department-wise Leave Summary"}),C.length>0?t(G,{"aria-label":"Department leave summary table",classNames:{wrapper:"bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground",td:"border-b border-white/5"},children:[t(j,{children:[e(l,{children:"Department"}),e(l,{align:"center",children:"Employees"}),e(l,{align:"center",children:"Total Leaves"}),e(l,{align:"center",children:"Approved"}),e(l,{align:"center",children:"Pending"}),e(l,{align:"center",children:"Avg per Employee"})]}),e(z,{children:C.map((a,r)=>t(U,{children:[e(d,{children:t("div",{className:"flex items-center gap-2",children:[e(v,{className:"w-4 h-4 text-default-400"}),e("span",{className:"font-medium",children:a.department})]})}),e(d,{className:"text-center",children:e(N,{size:"sm",variant:"flat",color:"default",children:a.employee_count})}),e(d,{className:"text-center",children:a.total_leaves}),e(d,{className:"text-center",children:e(N,{size:"sm",variant:"flat",color:"success",children:a.total_approved})}),e(d,{className:"text-center",children:e(N,{size:"sm",variant:"flat",color:"warning",children:a.total_pending})}),e(d,{className:"text-center",children:a.avg_leaves_per_employee})]},r))})]}):e(J,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(I,{className:"text-center py-8",children:[e(v,{className:"w-12 h-12 mx-auto mb-4 text-default-300"}),e(w,{variant:"body1",className:"text-white",children:"No department data available"})]})})]})]})})})})})]})};Ee.layout=y=>e(be,{children:y});export{Ee as default};
