import{J as xe,j as e,a as t,b as ce,Q as Be}from"./app-6tTxwSdx.js";import{r as d,v as Oe,w as je,x as Le,y as Ye,z as We,Q as Ge,q as qe,K as we,t as K,f as T,S as He,T as Ve,U as J,V as Qe,k as I,P as Ue,i as Ke,H as Je,s as me,l as M,h as Xe,m as Ze}from"./ui-vendor-Dsk9T4EG.js";import{G as ea}from"./logo-D6ASq7aG.js";import{P as aa}from"./PageHeader-DQpNPb28.js";import{S as ta}from"./StatsCards-C-2QQYus.js";import{p as B,f as Ne,b as Z,h as ye,q as _e,B as P,F as ra,c as sa,m as la,A as na}from"./App-DOWrEKYW.js";import{d as le}from"./dayjs.min-DnBP_R1A.js";import{N as ia}from"./NoDataMessage-Zlaia7Vn.js";import{F as he}from"./EyeIcon-3Q7uvJxO.js";import{F as ee}from"./PencilIcon-CvdIwuPx.js";import{F as ue}from"./TrashIcon-Chc7uTQF.js";import{F as oa}from"./EllipsisVerticalIcon-BVqep5c4.js";import{F as ae}from"./CheckCircleIcon-CMpNM2Dn.js";import{F as te}from"./XCircleIcon-DKf26g1q.js";import{F as De}from"./MapPinIcon-g-Wj4yks.js";import{a as O}from"./utils-vendor-DT6SRl8s.js";import{G as da}from"./GlassDialog-D9etPuD9.js";import{u as Ce,a as re,p as Pe,T as D,o as Se,t as Y,h as y,i as $,j as pe,I as fe,k as be,M as L,m as X,a3 as ca,a4 as ma,q as Fe,r as ke,s as W,B as se,A as ge,f as Ie,D as ha,G as ua,F as pa}from"./mui-vendor-gNRFXRd0.js";import{F as fa}from"./ExclamationTriangleIcon-DqkpuoTl.js";import{F as ba}from"./PlusIcon-DGUKUTGX.js";import{F as ga}from"./DocumentArrowDownIcon-DTgLcOSd.js";import{F as va}from"./TableCellsIcon-BiPTUWCf.js";import{F as xa}from"./AdjustmentsHorizontalIcon-Dyf1eZD8.js";import"./react-vendor-D8ObPovc.js";import"./animation-vendor-Bzjg6Woq.js";import"./EnvelopeIcon-DpPbvj-t.js";import"./UserIcon-15ugNx-V.js";import"./ShieldCheckIcon-BADfOQX9.js";const wa=({departments:h,onEdit:u,onDelete:C,onView:l,loading:f,isMobile:c,isTablet:v,pagination:m,onPageChange:n,onRowsPerPageChange:x,canEditDepartment:s=!1,canDeleteDepartment:S=!1})=>{const{auth:F}=xe().props,p=s||F.permissions?.includes("departments.update")||!1,b=S||F.permissions?.includes("departments.delete")||!1,w=d.useMemo(()=>[{name:"DEPARTMENT",uid:"name"},{name:"CODE",uid:"code",hide:c},{name:"MANAGER",uid:"manager"},{name:"EMPLOYEES",uid:"employees"},{name:"LOCATION",uid:"location",hide:c},{name:"STATUS",uid:"status"},{name:"ESTABLISHED",uid:"established",hide:c||v},{name:"ACTIONS",uid:"actions"}].filter(_=>!_.hide),[c,v]),i=(r,_)=>{switch(_){case"name":return e(Ue,{avatarProps:{radius:"lg",fallback:e(ye,{className:"w-4 h-4"}),size:c?"sm":"md"},name:r.name,description:r.parent?r.parent.name:"Top-level department",classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}});case"code":return e("div",{children:r.code?e(I,{size:"sm",variant:"flat",color:"primary",className:"text-xs",children:r.code}):e("span",{className:"text-default-400 text-xs",children:"-"})});case"manager":return e("div",{children:r.manager?t("div",{className:"flex flex-col",children:[e("span",{className:"text-sm",children:r.manager.name}),!c&&r.manager.email&&e("span",{className:"text-xs text-default-400",children:r.manager.email})]}):e("span",{className:"text-default-400 text-xs",children:"Not assigned"})});case"employees":return t("div",{className:"flex items-center gap-2",children:[e(Z,{className:"w-4 h-4 text-default-400"}),e("span",{children:r.employee_count||0})]});case"location":return e("div",{className:"flex items-center gap-2",children:r.location?t(ce,{children:[e(De,{className:"w-4 h-4 text-default-400"}),e("span",{children:r.location})]}):e("span",{className:"text-default-400 text-xs",children:"-"})});case"status":return e(I,{size:"sm",variant:r.is_active?"solid":"bordered",color:r.is_active?"success":"danger",startContent:r.is_active?e(ae,{className:"w-3 h-3"}):e(te,{className:"w-3 h-3"}),children:r.is_active?"Active":"Inactive"});case"established":return t("div",{className:"flex items-center gap-2",children:[e(Ne,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-sm",children:r.established_date?le(r.established_date).format("MMM D, YYYY"):e("span",{className:"text-default-400 text-xs",children:"-"})})]});case"actions":return e("div",{className:"flex justify-end items-center",children:c?t(Qe,{children:[e(He,{children:e(T,{isIconOnly:!0,size:"sm",variant:"light",children:e(oa,{className:"w-4 h-4"})})}),t(Ve,{"aria-label":"Department actions",children:[e(J,{startContent:e(he,{className:"w-4 h-4"}),onPress:()=>l(r),children:"View Details"},"view"),p&&e(J,{startContent:e(ee,{className:"w-4 h-4"}),onPress:()=>u(r),children:"Edit Department"},"edit"),b&&e(J,{className:"text-danger",color:"danger",startContent:e(ue,{className:"w-4 h-4"}),isDisabled:r.employee_count>0,onPress:()=>C(r),children:"Delete Department"},"delete")]})]}):t(ce,{children:[e(K,{content:"View Department",children:e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:()=>l(r),children:e(he,{className:"w-4 h-4"})})}),p&&e(K,{content:"Edit Department",children:e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-blue-500",onPress:()=>u(r),children:e(ee,{className:"w-4 h-4"})})}),b&&e(K,{content:r.employee_count>0?"Cannot delete department with employees":"Delete Department",children:e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-danger",isDisabled:r.employee_count>0,onPress:()=>C(r),children:e(ue,{className:"w-4 h-4"})})})]})});default:return e("span",{children:r[_]})}},o=()=>!h||!h.data||f?null:t("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10",children:[t("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(m.currentPage-1)*m.perPage+1," to ",Math.min(m.currentPage*m.perPage,h.total)," of ",h.total," departments"]}),e(we,{total:Math.ceil(h.total/m.perPage),initialPage:m.currentPage,page:m.currentPage,onChange:n,size:c?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]});return!f&&(!h||!h.data||h.data.length===0)?e("div",{className:"w-full",children:e(ia,{message:"No departments found",icon:e(B,{className:"w-12 h-12 text-default-300"}),description:"Try adjusting your search or filters"})}):e("div",{className:"w-full",children:t(qe,{"aria-label":"Departments table",removeWrapper:!0,classNames:{base:"bg-transparent",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs",td:"border-b border-white/5 py-3"},bottomContent:o(),children:[e(Oe,{columns:w,children:r=>e(je,{children:r.name},r.uid)}),e(Le,{items:h.data||[],emptyContent:!f&&"No departments found",loadingContent:e(Ge,{}),isLoading:f,children:r=>e(Ye,{children:_=>e(We,{children:i(r,_)})},r.id)})]})})},ve=({open:h,onClose:u,onSuccess:C,department:l=null,managers:f=[],parentDepartments:c=[]})=>{const v=Ce(),m=re(v.breakpoints.down("md")),[n,x]=d.useState(!1),[s,S]=d.useState({}),F={name:"",code:"",description:"",parent_id:null,manager_id:null,location:"",is_active:!0,established_date:""},[p,b]=d.useState(F);d.useEffect(()=>{b(l?{name:l.name||"",code:l.code||"",description:l.description||"",parent_id:l.parent_id||null,manager_id:l.manager_id||null,location:l.location||"",is_active:l.is_active??!0,established_date:l.established_date?le(l.established_date).format("YYYY-MM-DD"):""}:F),S({})},[l,h]);const w=o=>{const{name:r,value:_,type:k,checked:j}=o.target;b(N=>({...N,[r]:k==="checkbox"?j:_})),s[r]&&S(N=>({...N,[r]:null}))},i=async()=>{x(!0),S({});try{const o={...p,established_date:p.established_date||null};let r;l?.id?(r=await O.put(`/departments/${l.id}`,o),P.success("Department updated successfully")):(r=await O.post("/departments",o),P.success("Department created successfully")),C(r.data.department),u()}catch(o){if(console.error("Error saving department:",o),o.response?.data?.errors){S(o.response.data.errors);const r=Object.values(o.response.data.errors)[0];r&&P.error(r[0])}else P.error("An error occurred while saving the department")}finally{x(!1)}};return t(da,{open:h,onClose:n?void 0:u,maxWidth:"md",fullWidth:!0,fullScreen:m,"aria-labelledby":"department-form-dialog",children:[t(Pe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[e(D,{variant:"h6",component:"div",children:l?"Edit Department":"Create New Department"}),e(Se,{edge:"end",color:"inherit",onClick:u,disabled:n,"aria-label":"close",children:e(_e,{className:"w-5 h-5"})})]}),e(Y,{}),e(Fe,{sx:{pt:2},children:t(y,{container:!0,spacing:3,children:[e(y,{item:!0,xs:12,children:e(D,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Basic Information"})}),e(y,{item:!0,xs:12,md:6,children:e($,{name:"name",label:"Department Name",fullWidth:!0,required:!0,value:p.name,onChange:w,error:!!s.name,helperText:s.name?.[0]||"",disabled:n})}),e(y,{item:!0,xs:12,md:6,children:e($,{name:"code",label:"Department Code",fullWidth:!0,value:p.code||"",onChange:w,error:!!s.code,helperText:s.code?.[0]||"Unique identifier (e.g., HR001, FIN002)",disabled:n})}),e(y,{item:!0,xs:12,children:e($,{name:"description",label:"Description",fullWidth:!0,multiline:!0,rows:3,value:p.description||"",onChange:w,error:!!s.description,helperText:s.description?.[0]||"",disabled:n})}),e(y,{item:!0,xs:12,sx:{mt:2},children:e(D,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Organizational Information"})}),e(y,{item:!0,xs:12,md:6,children:t(pe,{fullWidth:!0,error:!!s.parent_id,children:[e(fe,{id:"parent-department-label",children:"Parent Department"}),t(be,{labelId:"parent-department-label",name:"parent_id",value:p.parent_id||"",onChange:w,label:"Parent Department",disabled:n,children:[e(L,{value:"",children:e("em",{children:"None (Top-Level Department)"})}),c.map(o=>l?.id!==o.id&&e(L,{value:o.id,children:o.name},o.id))]}),s.parent_id&&e(X,{children:s.parent_id[0]})]})}),e(y,{item:!0,xs:12,md:6,children:t(pe,{fullWidth:!0,error:!!s.manager_id,children:[e(fe,{id:"manager-label",children:"Department Manager"}),t(be,{labelId:"manager-label",name:"manager_id",value:p.manager_id||"",onChange:w,label:"Department Manager",disabled:n,children:[e(L,{value:"",children:e("em",{children:"Not Assigned"})}),f.map(o=>e(L,{value:o.id,children:o.name},o.id))]}),s.manager_id&&e(X,{children:s.manager_id[0]})]})}),e(y,{item:!0,xs:12,md:6,children:e($,{name:"location",label:"Location",fullWidth:!0,value:p.location||"",onChange:w,error:!!s.location,helperText:s.location?.[0]||"Physical location of the department",disabled:n})}),e(y,{item:!0,xs:12,md:6,children:e($,{name:"established_date",label:"Established Date",type:"date",fullWidth:!0,value:p.established_date||"",onChange:w,error:!!s.established_date,helperText:s.established_date?.[0]||"",disabled:n,InputLabelProps:{shrink:!0}})}),t(y,{item:!0,xs:12,children:[e(ca,{control:e(ma,{checked:p.is_active,onChange:w,name:"is_active",color:"success",disabled:n}),label:"Department is active"}),s.is_active&&e(X,{error:!0,children:s.is_active[0]})]})]})}),e(Y,{}),t(ke,{sx:{px:3,py:2},children:[e(W,{onClick:u,disabled:n,color:"inherit",children:"Cancel"}),e(W,{onClick:i,variant:"contained",color:"primary",disabled:n,children:n?"Saving...":l?"Update Department":"Create Department"})]})]})},Na=({open:h,onClose:u,onSuccess:C,department:l})=>{const[f,c]=d.useState(!1),[v,m]=d.useState(null),n=async()=>{if(l){c(!0),m(null);try{await O.delete(`/departments/${l.id}`),P.success("Department deleted successfully"),C(),u()}catch(x){if(console.error("Error deleting department:",x),x.response?.data?.message)m(x.response.data.message),P.error(x.response.data.message);else if(x.response?.data?.errors){const s=Object.values(x.response.data.errors)[0];m(s),P.error(s)}else m("An error occurred while deleting the department"),P.error("An error occurred while deleting the department")}finally{c(!1)}}};return l?t(ha,{open:h,onClose:f?void 0:u,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"delete-department-dialog",children:[t(Pe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(D,{variant:"h6",children:"Delete Department"}),e(Se,{edge:"end",color:"inherit",onClick:u,disabled:f,"aria-label":"close",children:e(_e,{className:"w-5 h-5"})})]}),e(Y,{}),e(Fe,{children:t(se,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t(se,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(fa,{className:"w-8 h-8 text-yellow-500"}),t(D,{variant:"body1",children:["Are you sure you want to delete the department ",e("strong",{children:l.name}),"?"]})]}),l.employee_count>0&&t(ge,{severity:"warning",sx:{mt:2},children:["This department has ",l.employee_count," employees assigned to it. You cannot delete a department with active employees. Please reassign these employees to other departments first."]}),v&&e(ge,{severity:"error",sx:{mt:2},children:v}),e(D,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"This action cannot be undone. All associated data will be permanently removed."})]})}),e(Y,{}),t(ke,{sx:{px:3,py:2},children:[e(W,{onClick:u,disabled:f,color:"inherit",children:"Cancel"}),e(W,{onClick:n,variant:"contained",color:"error",disabled:f||l.employee_count>0,startIcon:f&&e(Ie,{size:20,color:"inherit"}),children:f?"Deleting...":"Delete Department"})]})]}):null},Ka=({title:h,departments:u,managers:C,parentDepartments:l,stats:f,filters:c})=>{const{auth:v}=xe().props,m=Ce(),n=re(m.breakpoints.down("sm")),x=re(m.breakpoints.down("md")),[s,S]=d.useState(u||{data:[]}),[F,p]=d.useState(!1),[b,w]=d.useState({type:null,department:null}),[i,o]=d.useState({search:c?.search||"",status:c?.status||"all",parentDepartment:c?.parentDepartment||"all"}),[r,_]=d.useState(!1),[k,j]=d.useState("table"),[N,G]=d.useState({currentPage:u?.current_page||1,perPage:u?.per_page||10}),[z,Te]=d.useState(f||{total:0,active:0,inactive:0,parent_departments:0}),ne=v.permissions?.includes("departments.create")||!1,q=v.permissions?.includes("departments.update")||!1,H=v.permissions?.includes("departments.delete")||!1,Ae=q||v.permissions?.includes("departments.update")||!1;H||v.permissions?.includes("departments.delete");const V=d.useCallback(async()=>{p(!0);try{const a=await O.get(route("api.departments"),{params:{page:N.currentPage,per_page:N.perPage,search:i.search,status:i.status,parent_department:i.parentDepartment}});S(a.data.departments)}catch(a){console.error("Error fetching departments:",a),P.error("Failed to load departments data")}finally{p(!1)}},[N.currentPage,N.perPage,i.search,i.status,i.parentDepartment]),Q=d.useCallback(async()=>{try{const a=await O.get(route("departments.stats"));if(a.status===200){const{stats:g}=a.data;Te(g)}}catch(a){console.error("Error fetching department stats:",a)}},[]);d.useEffect(()=>{V(),Q()},[V,Q]);const A=(a,g)=>{o(R=>({...R,[a]:g})),G(R=>({...R,currentPage:1}))},ie=a=>{G(g=>({...g,currentPage:a})),window.scrollTo({top:0,behavior:"smooth"})},Ee=a=>{G({currentPage:1,perPage:a})},E=(a,g=null)=>{w({type:a,department:g})},U=()=>{w({type:null,department:null})},oe=()=>{V(),Q()},Re=({department:a,index:g})=>{const R=a.manager,de=a.parent;return e(Ze,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>E("view_department",a),children:t(Xe,{className:"p-4 flex flex-col h-full",children:[t("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e("div",{className:"flex justify-center items-center h-10 w-10 rounded-lg bg-primary/20 text-primary flex-shrink-0",children:e(ye,{className:"w-5 h-5"})}),e("div",{className:"flex-1 min-w-0",children:t("div",{className:"flex items-start justify-between",children:[t("div",{children:[e("h3",{className:"font-semibold text-foreground text-sm line-clamp-1",children:a.name}),e("p",{className:"text-default-500 text-xs",children:a.code||"No Code"})]}),Ae&&e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground ml-2",onPress:$e=>{$e.stopPropagation(),E("edit_department",a)},children:e(ee,{className:"w-4 h-4"})})]})})]}),t("div",{className:"flex-1 flex flex-col gap-3",children:[a.location&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(De,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs line-clamp-1",children:a.location})]}),a.established_date&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(Ne,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs",children:le(a.established_date).format("MMM D, YYYY")})]}),t("div",{className:"flex items-center gap-2 text-sm",children:[e(Z,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),t("span",{className:"text-default-600 text-xs",children:[a.employee_count||0," ",a.employee_count===1?"Employee":"Employees"]})]})]}),t("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[e(I,{size:"sm",variant:a.is_active?"solid":"bordered",color:a.is_active?"success":"danger",className:"text-xs",startContent:a.is_active?e(ae,{className:"w-3 h-3"}):e(te,{className:"w-3 h-3"}),children:a.is_active?"Active":"Inactive"}),de&&e(I,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e(B,{className:"w-3 h-3"}),children:de.name}),R&&e(I,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e(Z,{className:"w-3 h-3"}),children:R.name})]})]})})},Me=d.useMemo(()=>[{title:"Total Departments",value:z?.total||0,icon:e(B,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All departments"},{title:"Active",value:z?.active||0,icon:e(ae,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Active departments"},{title:"Inactive",value:z?.inactive||0,icon:e(te,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Inactive departments"},{title:"Parent Departments",value:z?.parent_departments||0,icon:e(ra,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Top-level departments"}],[z]),ze=d.useMemo(()=>{const a=[];return ne&&a.push({label:n?"Add":"Add Department",icon:e(ba,{className:"w-4 h-4"}),onPress:()=>E("add_department"),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}),a.push({label:n?"":"Export",isIconOnly:n,icon:e(ga,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),a},[ne,n]);return t(na,{children:[e(Be,{title:h}),e(se,{sx:{display:"flex",justifyContent:"center",p:2},children:e(ua,{in:!0,timeout:800,children:e(ea,{children:e(aa,{title:"Department Management",subtitle:"Manage company departments, hierarchies, and organizational structure",icon:e(B,{className:"w-8 h-8"}),variant:"default",actionButtons:ze,children:t("div",{className:"p-4 sm:p-6",children:[e(ta,{stats:Me,className:"mb-6"}),t("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(Ke,{label:"Search Departments",variant:"bordered",placeholder:"Search by name, code, or location...",value:i.search,onValueChange:a=>A("search",a),startContent:e(sa,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:n?"sm":"md"})}),t("div",{className:"flex gap-2 items-end",children:[t(Je,{variant:"bordered",className:"bg-white/5",children:[t(T,{isIconOnly:n,color:k==="table"?"primary":"default",onPress:()=>j("table"),className:k==="table"?"bg-blue-500/20":"",children:[e(va,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Table"})]}),t(T,{isIconOnly:n,color:k==="grid"?"primary":"default",onPress:()=>j("grid"),className:k==="grid"?"bg-blue-500/20":"",children:[e(la,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Grid"})]})]}),t(T,{isIconOnly:n,variant:"bordered",onPress:()=>_(!r),className:r?"bg-purple-500/20":"bg-white/5",children:[e(xa,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),r&&e(pa,{in:!0,timeout:300,children:t("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t(me,{label:"Status",variant:"bordered",selectedKeys:i.status!=="all"?[i.status]:[],onSelectionChange:a=>{const g=Array.from(a)[0]||"all";A("status",g)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(M,{value:"all",children:"All Statuses"},"all"),e(M,{value:"active",children:"Active Only"},"active"),e(M,{value:"inactive",children:"Inactive Only"},"inactive")]}),t(me,{label:"Parent Department",variant:"bordered",selectedKeys:i.parentDepartment!=="all"?[i.parentDepartment]:[],onSelectionChange:a=>{const g=Array.from(a)[0]||"all";A("parentDepartment",g)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(M,{value:"all",children:"All Parent Departments"},"all"),e(M,{value:"none",children:"Top-Level Departments"},"none"),l?.map(a=>e(M,{value:a.id.toString(),children:a.name},a.id.toString()))]})]}),(i.search||i.status!=="all"||i.parentDepartment!=="all")&&t("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[i.search&&t(I,{variant:"flat",color:"primary",size:"sm",onClose:()=>A("search",""),children:["Search: ",i.search]}),i.status!=="all"&&t(I,{variant:"flat",color:"secondary",size:"sm",onClose:()=>A("status","all"),children:["Status: ",i.status==="active"?"Active":"Inactive"]}),i.parentDepartment!=="all"&&t(I,{variant:"flat",color:"warning",size:"sm",onClose:()=>A("parentDepartment","all"),children:["Parent: ",i.parentDepartment==="none"?"None (Top-Level)":l?.find(a=>a.id===parseInt(i.parentDepartment))?.name]})]})]})}),t("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:t(D,{variant:"h6",className:"font-semibold text-foreground",children:[k==="table"?"Department Table":"Department Grid",t("span",{className:"text-sm text-default-500 ml-2",children:["(",s.total||0," ",s.total===1?"department":"departments",")"]})]})}),F?t("div",{className:"text-center py-8",children:[e(Ie,{size:40}),e(D,{className:"mt-4",color:"textSecondary",children:"Loading departments data..."})]}):k==="table"?e(wa,{departments:s,loading:F,onEdit:q?a=>E("edit_department",a):void 0,onDelete:H?a=>E("delete_department",a):void 0,onView:a=>E("view_department",a),isMobile:n,isTablet:x,pagination:N,onPageChange:ie,onRowsPerPageChange:Ee,canEditDepartment:q,canDeleteDepartment:H}):t("div",{className:"p-4",children:[s.data&&s.data.length>0?e("div",{className:`grid gap-4 ${n?"grid-cols-1":x?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:s.data.map((a,g)=>e(Re,{department:a,index:g},a.id))}):t("div",{className:"text-center py-8",children:[e(B,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(D,{variant:"body1",color:"textSecondary",children:"No departments found"}),e(D,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),s.data&&s.data.length>0&&e("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e(we,{total:Math.ceil(s.total/N.perPage),initialPage:N.currentPage,page:N.currentPage,onChange:ie,size:n?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})}),(b.type==="add_department"||b.type==="edit_department")&&e(ve,{open:!0,onClose:U,onSuccess:oe,department:b.type==="edit_department"?b.department:null,managers:C,parentDepartments:l}),b.type==="delete_department"&&e(Na,{open:!0,onClose:U,onSuccess:oe,department:b.department}),b.type==="view_department"&&e(ve,{open:!0,onClose:U,onSuccess:()=>{},department:b.department,managers:C,parentDepartments:l,readOnly:!0})]})};export{Ka as default};
