import{a as r,j as e,b as q,J as Ne,Q as Fe}from"./app-CDzGJ23-.js";import{r as h,n as Le,g as je,R as _e}from"./react-core-DDvupgOx.js";import{Z as Me,u as te,p as se,T as E,o as O,h as t,B as Z,a6 as Se,i as F,j as z,I as J,k as H,M as T,m as be,q as de,r as ce,f as he,e as K,s as Be,C as le,ad as Ge,t as me,n as Ue,a as Pe,G as Oe,F as qe,a8 as oe,a9 as R,ab as k,b as ze,c as ye}from"./mui-libraries-BOatgvFC.js";import{r as Je,B as $,d as He,u as Ke,h as Xe,e as Re,p as Ye,i as Ze,g as Ie,v as Qe,w as Ve,x as er,y as rr,A as Te,c as tr}from"./App-COhLqSvb.js";import{G as X}from"./logo-C4hkafYE.js";import{P as ar}from"./PageHeader-DVunJ7Y_.js";import{S as nr}from"./StatsCards-bMKFHHsB.js";import{C as fe}from"./Clear-DSXgJxXA.js";import{G as pe}from"./GlassDialog-DMfdU0Bm.js";import{P as ir}from"./PhotoCamera-Dep8VK6X.js";import{L as ae}from"./LoadingButton-LikDKcYc.js";import{C as ve}from"./Clear-BqPlB7eX.js";import{A as Ae}from"./Add-Cum4k_-G.js";import{T as or,f as V,Q as lr,N as sr,b as xe,O as dr,P as cr,d as pr,p as ur,e as $e,U as mr,g as hr,i as gr,D as br,s as De,l as Y}from"./ui-libraries-D1L3zk6d.js";import{F as xr}from"./EllipsisVerticalIcon-BX6PWMxg.js";import{F as We}from"./UserIcon-D16nn9o_.js";import{F as Ce}from"./ExclamationTriangleIcon-C_gcLnRy.js";import{a as fr}from"./ShieldCheckIcon-C7bFKizx.js";import{F as _r,a as yr}from"./UserPlusIcon-B6CWJ_n8.js";import{F as vr}from"./XCircleIcon-DJR5_Dv7.js";import{F as we}from"./CheckCircleIcon-CJUGb5Jf.js";import{F as Cr}from"./EyeIcon-B0n7aNqt.js";import{F as kr}from"./PencilIcon-Dhfhztfv.js";import{F as Sr}from"./TrashIcon-D8Us3Tf_.js";import{a as wr}from"./utilities-DT6SRl8s.js";import{d as Nr}from"./dayjs.min-WGrXCzEl.js";import{F as Fr}from"./ChartBarIcon-Yugn57JF.js";import{F as Pr}from"./DocumentArrowDownIcon-Cq-JO3FQ.js";import{F as Ir}from"./AdjustmentsHorizontalIcon-DKS_UuIh.js";import"./EnvelopeIcon-D6nUSkik.js";function Dr({title:n,titleId:W,...y},D){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:D,"aria-labelledby":W},y),n?h.createElement("title",{id:W},n):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"}))}const Er=h.forwardRef(Dr);function Br({title:n,titleId:W,...y},D){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:D,"aria-labelledby":W},y),n?h.createElement("title",{id:W},n):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Rr=h.forwardRef(Br);var ge={},Ee;function Tr(){if(Ee)return ge;Ee=1;var n=Me();Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0;var W=n(Je()),y=Le();return ge.default=(0,W.default)((0,y.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),ge}var Ar=Tr();const ue=je(Ar),$r=({user:n,allUsers:W,departments:y,designations:D,setUser:g,open:L,closeModal:v})=>{const[S,a]=h.useState({id:n.id,name:n.name||"",gender:n.gender||"",birthday:n.birthday||"",date_of_joining:n.date_of_joining||"",address:n.address||"",employee_id:n.employee_id||"",phone:n.phone||"",email:n.email||"",department:n.department||"",designation:n.designation||"",report_to:n.report_to||""}),[w,c]=h.useState({id:n.id}),[A,I]=h.useState(!1),[x,s]=h.useState({}),[o,f]=h.useState(!1),[u,i]=h.useState(!1),[m,l]=h.useState(null),[_,N]=h.useState(D),[P,B]=h.useState(W),p=te(),j=C=>{const M=C.target.files[0];if(M){const U=URL.createObjectURL(M);l(U);const ee=new Promise(async(ne,ie)=>{try{const b=new FormData;if(b.append("id",n.id),M){const ke=M.type;if(["image/jpeg","image/jpg","image/png"].includes(ke))b.append("profile_image",M);else{console.error("Invalid file type. Only JPEG and PNG are allowed."),ie("Invalid file type");return}}const G=await fetch(route("profile.update"),{method:"POST",headers:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:b}),re=await G.json();G.ok?(g(re.user),f(!1),ne([...re.messages])):(f(!1),s(re.errors),ie(re.error||"Failed to update profile image."),console.error(re.errors))}catch(b){f(!1),console.error(b),ie(b.message||"An unexpected error occurred.")}});$.promise(ee,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(he,{}),e("span",{style:{marginLeft:"8px"},children:"Updating profile image..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,color:p.palette.text.primary}},success:{render({data:ne}){return e(q,{children:ne.map((ie,b)=>e("div",{children:ie},b))})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,color:p.palette.text.primary}},error:{render({data:ne}){return e(q,{children:ne})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,color:p.palette.text.primary}}})}},d=(C,M)=>{a(U=>{const ee={...U,[C]:M};return M===""&&delete ee[C],ee}),c(U=>{const ee={...U,[C]:M};return M===""&&delete ee[C],ee})};return h.useEffect(()=>{n.department!==S.department&&(S.designation=null,S.report_to=null),N(D.filter(U=>U.department_id===(w.department||S.department))),B(W.filter(U=>U.department===(w.department||S.department)));const C={...w};for(const U in C)U!=="id"&&C[U]===n[U]&&delete C[U];const M=Object.keys(C).length>1;I(M)},[S,w]),r(pe,{open:L,onClose:v,children:[r(se,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(E,{children:"Profile Information"}),e(O,{variant:"outlined",color:"primary",onClick:v,sx:{position:"absolute",top:8,right:16},children:e(fe,{})})]}),r("form",{onSubmit:async C=>{C.preventDefault(),f(!0);try{const M=await axios.post(route("profile.update"),{ruleSet:"profile",...S});M.status===200&&(g(M.data.user),$.success(M.data.messages?.length>0?M.data.messages.join(" "):"Profile information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,color:p.palette.text.primary}}),v())}catch(M){f(!1),M.response?(M.response.status===422?(s(M.response.data.errors||{}),$.error(M.response.data.error||"Failed to update profile information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,color:p.palette.text.primary}})):$.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,color:p.palette.text.primary}}),console.error(M.response.data)):M.request?($.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,color:p.palette.text.primary}}),console.error(M.request)):($.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,color:p.palette.text.primary}}),console.error("Error",M.message))}finally{f(!1)}},children:[e(de,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,display:"flex",alignItems:"center",justifyContent:"center",children:r(Z,{position:"relative",display:"inline-block",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[e(Se,{alt:w.name||S.name,src:m||n.profile_image,sx:{width:100,height:100}}),u&&e(q,{children:e(Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:"rgba(0, 0, 0, 0.5)",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"},children:e(O,{color:"primary",component:"span",children:e(ir,{})})})}),e("input",{accept:"image/*",style:{display:"none"},id:"upload-button",type:"file",onChange:j}),e("label",{htmlFor:"upload-button",children:e(Z,{sx:{position:"absolute",width:"100%",height:"100%",top:0,left:0,borderRadius:"50%",cursor:"pointer"}})})]})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Name",fullWidth:!0,value:w.name||S.name||"",onChange:C=>d("name",C.target.value),error:!!x.name,helperText:x.name})}),e(t,{item:!0,xs:12,md:6,children:r(z,{fullWidth:!0,children:[e(J,{id:"gender-label",children:"Gender"}),r(H,{labelId:"gender-label",value:w.gender||S.gender||"na",onChange:C=>d("gender",C.target.value),error:!!x.gender,label:"Gender",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{disabled:!0,value:"na",children:"Select Gender"}),e(T,{value:"Male",children:"Male"}),e(T,{value:"Female",children:"Female"})]}),e(be,{children:x.gender})]})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Birth Date",type:"date",fullWidth:!0,value:w.birthday||S.birthday||"",onChange:C=>d("birthday",C.target.value),InputLabelProps:{shrink:!0},error:!!x.birthday,helperText:x.birthday})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Joining Date",type:"date",fullWidth:!0,value:w.date_of_joining||S.date_of_joining||"",onChange:C=>d("date_of_joining",C.target.value),InputLabelProps:{shrink:!0},error:!!x.date_of_joining,helperText:x.date_of_joining})}),e(t,{item:!0,xs:12,children:e(F,{label:"Address",fullWidth:!0,value:w.address||S.address,onChange:C=>d("address",C.target.value),error:!!x.address,helperText:x.address})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Employee ID",fullWidth:!0,value:w.employee_id||S.employee_id||"",onChange:C=>d("employee_id",C.target.value),error:!!x.employee_id,helperText:x.employee_id})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Phone Number",fullWidth:!0,value:w.phone||S.phone,onChange:C=>d("phone",C.target.value),error:!!x.phone,helperText:x.phone})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Email Adress",fullWidth:!0,value:w.email||S.email,onChange:C=>d("email",C.target.value),error:!!x.email,helperText:x.email})}),e(t,{item:!0,xs:12,md:6,children:r(z,{fullWidth:!0,children:[e(J,{id:"department",children:"Department"}),r(H,{labelId:"department",onChange:C=>d("department",C.target.value),error:!!x.department,id:`department-select-${n.id}`,value:w.department||S.department||"na",label:"Department",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",disabled:!0,children:"Select Department"}),y.map(C=>e(T,{value:C.id,children:C.name},C.id))]}),e(be,{children:x.department})]})}),e(t,{item:!0,xs:12,md:6,children:r(z,{fullWidth:!0,children:[e(J,{id:"designation",children:"Designation"}),r(H,{labelId:"designation",onChange:C=>d("designation",C.target.value),label:"Designation",error:!!x.designation,id:`designation-select-${n.id}`,value:w.designation||S.designation||"na",disabled:!n.department,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",disabled:!0,children:"Select Designation"}),_.map(C=>e(T,{value:C.id,children:C.title},C.id))]}),e(be,{children:x.designation})]})}),e(t,{item:!0,xs:12,md:6,children:r(z,{fullWidth:!0,children:[e(J,{id:"report_to",children:"Reports To"}),r(H,{labelId:"report_to",value:w.report_to||S.report_to,onChange:C=>d("report_to",C.target.value),label:"Reports To",error:!!x.report_to,disabled:n.report_to==="na",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:p.glassCard.background,border:p.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",children:"--"}),P.map(C=>e(T,{value:C.id,children:C.name},C.id))]}),e(be,{children:x.report_to})]})})]})}),e(ce,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ae,{disabled:!A,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:o,children:"Submit"})})]})]})},Wr=({user:n,setUser:W,open:y,closeModal:D})=>{const[g,L]=h.useState({id:n.id,passport_no:n.passport_no||"",passport_exp_date:n.passport_exp_date||"",nationality:n.nationality||"",religion:n.religion||"",marital_status:n.marital_status||"",employment_of_spouse:n.employment_of_spouse||"",number_of_children:n.number_of_children||"",nid:n.nid||""}),[v,S]=h.useState({id:n.id}),[a,w]=h.useState(!1),[c,A]=h.useState({}),[I,x]=h.useState(!1),s=te(),o=(u,i)=>{L(m=>{const l={...m,[u]:i};return i===""&&delete l[u],u==="marital_status"&&i==="Single"&&(l.employment_of_spouse="",l.number_of_children=""),l}),S(m=>{const l={...m,[u]:i};return i===""&&delete l[u],u==="marital_status"&&i==="Single"&&(l.employment_of_spouse=null,l.number_of_children=null),l})};return h.useEffect(()=>{for(const i in v)i!=="id"&&v[i]===n[i]&&delete v[i];const u=Object.keys(v).filter(i=>i!=="id").length>0;w(u)},[g,v,n]),r(pe,{open:y,onClose:D,children:[r(se,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(E,{children:"Personal Information"}),e(O,{variant:"outlined",color:"primary",onClick:D,sx:{position:"absolute",top:8,right:16},children:e(fe,{})})]}),r("form",{onSubmit:async u=>{u.preventDefault(),x(!0);try{const i=await axios.post(route("profile.update"),{ruleSet:"personal",...g});i.status===200&&(W(i.data.user),$.success(i.data.messages?.length>0?i.data.messages.join(" "):"Personal information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),D())}catch(i){x(!1),i.response?(i.response.status===422?(A(i.response.data.errors||{}),$.error(i.response.data.error||"Failed to update personal information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}})):$.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.response.data)):i.request?($.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.request)):($.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error("Error",i.message))}finally{x(!1)}},children:[e(de,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Passport No",fullWidth:!0,value:v.passport_no||g.passport_no||"",onChange:u=>o("passport_no",u.target.value),error:!!c.passport_no,helperText:c.passport_no})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Passport Expiry Date",fullWidth:!0,type:"date",value:v.passport_exp_date||g.passport_exp_date||"",onChange:u=>o("passport_exp_date",u.target.value),InputLabelProps:{shrink:!0},error:!!c.passport_exp_date,helperText:c.passport_exp_date})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"NID No",fullWidth:!0,value:v.nid||g.nid||"",onChange:u=>o("nid",u.target.value),error:!!c.nid,helperText:c.nid})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Nationality",fullWidth:!0,value:v.nationality||g.nationality||"",onChange:u=>o("nationality",u.target.value),error:!!c.nationality,helperText:c.nationality})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Religion",fullWidth:!0,value:v.religion||g.religion||"",onChange:u=>o("religion",u.target.value),error:!!c.religion,helperText:c.religion})}),e(t,{item:!0,xs:12,md:6,children:r(z,{fullWidth:!0,children:[e(J,{id:"marital-status-label",children:"Marital status"}),r(H,{labelId:"marital-status-label",value:v.marital_status||g.marital_status||"na",onChange:u=>o("marital_status",u.target.value),label:"Marital status",error:!!c.marital_status,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",children:"-"}),e(T,{value:"Single",children:"Single"}),e(T,{value:"Married",children:"Married"})]}),e(be,{children:c.marital_status})]})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Employment of spouse",fullWidth:!0,value:v.marital_status==="Single"?"":v.employment_of_spouse||g.employment_of_spouse,onChange:u=>o("employment_of_spouse",u.target.value),error:!!c.employment_of_spouse,helperText:c.employment_of_spouse,disabled:v.marital_status==="Single"||g.marital_status==="Single"})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"No. of children",fullWidth:!0,type:"number",value:v.marital_status==="Single"?"":v.number_of_children||g.number_of_children,onChange:u=>o("number_of_children",u.target.value),error:!!c.number_of_children,helperText:c.number_of_children,disabled:v.marital_status==="Single"||g.marital_status==="Single"})})]})}),e(ce,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ae,{disabled:!a,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:I,children:"Submit"})})]})]})},Lr=({user:n,setUser:W,open:y,closeModal:D})=>{const[g,L]=h.useState({id:n.id,emergency_contact_primary_name:n.emergency_contact_primary_name||"",emergency_contact_primary_relationship:n.emergency_contact_primary_relationship||"",emergency_contact_primary_phone:n.emergency_contact_primary_phone||"",emergency_contact_secondary_name:n.emergency_contact_secondary_name||"",emergency_contact_secondary_relationship:n.emergency_contact_secondary_relationship||"",emergency_contact_secondary_phone:n.emergency_contact_secondary_phone||""}),[v,S]=h.useState({id:n.id}),[a,w]=h.useState(!1),[c,A]=h.useState({}),[I,x]=h.useState(!1),s=te(),o=(u,i)=>{L(m=>{const l={...m,[u]:i};return i===""&&delete l[u],l}),S(m=>{const l={...m,[u]:i};return i===""&&delete l[u],l})};return h.useEffect(()=>{for(const i in v)i!=="id"&&v[i]===n[i]&&delete v[i];const u=Object.keys(v).filter(i=>i!=="id").length>0;w(u)},[g,v,n]),r(pe,{open:y,onClose:D,children:[r(se,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(E,{children:"Personal Information"}),e(O,{variant:"outlined",color:"primary",onClick:D,sx:{position:"absolute",top:8,right:16},children:e(fe,{})})]}),r("form",{onSubmit:async u=>{u.preventDefault(),x(!0);try{const i=await axios.post(route("profile.update"),{ruleSet:"emergency",...g});i.status===200&&(W(i.data.user),$.success(i.data.messages?.length>0?i.data.messages.join(" "):"Emergency contact updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),D())}catch(i){x(!1),i.response?(i.response.status===422?(A(i.response.data.errors||{}),$.error(i.response.data.error||"Failed to update emergency contact.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}})):$.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.response.data)):i.request?($.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.request)):($.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error("Error",i.message))}finally{x(!1)}},children:[e(de,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,children:e(X,{children:r(K,{children:[e(E,{variant:"h5",gutterBottom:!0,children:"Primary Contact"}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Name",required:!0,fullWidth:!0,value:v.emergency_contact_primary_name||g.emergency_contact_primary_name||"",onChange:u=>o("emergency_contact_primary_name",u.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Relationship",required:!0,fullWidth:!0,value:v.emergency_contact_primary_relationship||g.emergency_contact_primary_relationship||"",onChange:u=>o("emergency_contact_primary_relationship",u.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Phone",required:!0,fullWidth:!0,value:v.emergency_contact_primary_phone||g.emergency_contact_primary_phone||"",onChange:u=>o("emergency_contact_primary_phone",u.target.value),error:!!c.bank_name,helperText:c.bank_name})})]})]})})}),e(t,{item:!0,xs:12,children:e(X,{children:r(K,{children:[e(E,{variant:"h5",gutterBottom:!0,children:"Secondary Contact"}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Name",fullWidth:!0,value:v.emergency_contact_secondary_name||g.emergency_contact_secondary_name||"",onChange:u=>o("emergency_contact_secondary_name",u.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Relationship",fullWidth:!0,value:v.emergency_contact_secondary_relationship||g.emergency_contact_secondary_relationship||"",onChange:u=>o("emergency_contact_secondary_relationship",u.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Phone",fullWidth:!0,value:v.emergency_contact_secondary_phone||g.emergency_contact_secondary_phone||"",onChange:u=>o("emergency_contact_secondary_phone",u.target.value),error:!!c.bank_name,helperText:c.bank_name})})]})]})})})]})}),e(ce,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ae,{disabled:!a,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:I,children:"Submit"})})]})]})},jr=({user:n,setUser:W,open:y,closeModal:D})=>{const[g,L]=h.useState({id:n.id,bank_name:n.bank_name||"",bank_account_no:n.bank_account_no||"",ifsc_code:n.ifsc_code||"",pan_no:n.pan_no||""}),[v,S]=h.useState({id:n.id}),[a,w]=h.useState(!1),[c,A]=h.useState({}),[I,x]=h.useState(!1),s=te(),o=(u,i)=>{L(m=>{const l={...m,[u]:i};return i===""&&delete l[u],l}),S(m=>{const l={...m,[u]:i};return i===""&&delete l[u],l})};return h.useEffect(()=>{for(const i in v)i!=="id"&&v[i]===n[i]&&delete v[i];const u=Object.keys(v).filter(i=>i!=="id").length>0;w(u)},[g,v,n]),r(pe,{open:y,onClose:D,children:[r(se,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(E,{children:"Bank Information"}),e(O,{variant:"outlined",color:"primary",onClick:D,sx:{position:"absolute",top:8,right:16},children:e(fe,{})})]}),r("form",{onSubmit:async u=>{u.preventDefault(),x(!0);try{const i=await axios.post(route("profile.update"),{ruleSet:"bank",...g});i.status===200&&(W(i.data.user),A({}),$.success(i.data.messages?.length>0?i.data.messages.join(" "):"Bank information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),D())}catch(i){x(!1),i.response?(i.response.status===422?(A(i.response.data.errors||{}),$.error(i.response.data.error||"Failed to update bank information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}})):$.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.response.data)):i.request?($.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error(i.request)):($.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}),console.error("Error",i.message))}finally{x(!1)}},children:[e(de,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,children:e(F,{label:"Bank Name",fullWidth:!0,value:v.bank_name||g.bank_name||"",onChange:u=>o("bank_name",u.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,children:e(F,{size:"small",label:"Bank Account No.",fullWidth:!0,value:v.bank_account_no||g.bank_account_no||"",onChange:u=>o("bank_account_no",u.target.value),error:!!c.bank_account_no,helperText:c.bank_account_no})}),e(t,{item:!0,xs:12,children:e(F,{label:"IFSC Code",fullWidth:!0,value:v.ifsc_code||g.ifsc_code||"",onChange:u=>o("ifsc_code",u.target.value),error:!!c.ifsc_code,helperText:c.ifsc_code})}),e(t,{item:!0,xs:12,children:e(F,{label:"PAN No.",fullWidth:!0,value:v.pan_no||g.pan_no||"",onChange:u=>o("pan_no",u.target.value),error:!!c.pan_no,helperText:c.pan_no})})]})}),e(ce,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ae,{disabled:!a,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:I,children:"Submit"})})]})]})},Mr=({user:n,open:W,closeModal:y,handleDelete:D,setUser:g})=>{const[L,v]=h.useState({id:n.id,family_member_name:n.family_member_name||"",family_member_relationship:n.family_member_relationship||"",family_member_dob:n.family_member_dob||"",family_member_phone:n.family_member_phone||""}),[S,a]=h.useState({id:n.id}),[w,c]=h.useState(!1),[A,I]=h.useState({}),[x,s]=h.useState(!1),o=te(),f=(i,m)=>{v(l=>{const _={...l,[i]:m};return m===""&&delete _[i],_}),a(l=>{const _={...l,[i]:m};return m===""&&delete _[i],_})};return h.useEffect(()=>{for(const m in S)m!=="id"&&S[m]===n[m]&&delete S[m];const i=Object.keys(S).filter(m=>m!=="id").length>0;c(i)},[L,S,n]),r(pe,{open:W,onClose:y,children:[r(se,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(E,{children:"Family Member"}),e(O,{variant:"outlined",color:"primary",onClick:y,sx:{position:"absolute",top:8,right:16},children:e(fe,{})})]}),r("form",{onSubmit:async i=>{i.preventDefault(),s(!0);try{const m=await axios.post(route("profile.update"),{ruleSet:"family",...L});m.status===200&&(g(m.data.user),$.success(m.data.messages?.length>0?m.data.messages.join(" "):"Family information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),y())}catch(m){s(!1),m.response?(m.response.status===422?(I(m.response.data.errors||{}),$.error(m.response.data.error||"Failed to update family information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}})):$.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),console.error(m.response.data)):m.request?($.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),console.error(m.request)):($.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),console.error("Error",m.message))}finally{s(!1)}},children:[e(de,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Name",fullWidth:!0,value:S.family_member_name||L.family_member_name||"",onChange:i=>f("family_member_name",i.target.value),error:!!A.family_member_name,helperText:A.family_member_name})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Relationship",fullWidth:!0,value:S.family_member_relationship||L.family_member_relationship||"",onChange:i=>f("family_member_relationship",i.target.value),error:!!A.family_member_relationship,helperText:A.family_member_relationship})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Date of Birth",fullWidth:!0,type:"date",value:S.family_member_dob||L.family_member_dob||"",onChange:i=>f("family_member_dob",i.target.value),InputLabelProps:{shrink:!0},error:!!A.family_member_dob,helperText:A.family_member_dob})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Phone",fullWidth:!0,value:S.family_member_phone||L.family_member_phone||"",onChange:i=>f("family_member_phone",i.target.value),error:!!A.family_member_phone,helperText:A.family_member_phone})})]})}),e(ce,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ae,{disabled:!w,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:x,children:"Submit"})})]})]})},Gr=({user:n,open:W,closeModal:y,setUser:D})=>{const[g,L]=h.useState({id:n.id}),[v,S]=h.useState(!1),[a,w]=h.useState(n.educations&&n.educations.length>0?n.educations:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),[c,A]=h.useState({}),[I,x]=h.useState(!1),s=te(),o=(m,l,_)=>{const N=[...a];N[m]={...N[m],[l]:_},w(N);const P=N.filter((p,j)=>{const d=n.educations[j]||{},Q=!d.id||p.institution!==d.institution||p.subject!==d.subject||p.degree!==d.degree||p.starting_date!==d.starting_date||p.complete_date!==d.complete_date||p.grade!==d.grade,C=d.id&&p.institution===d.institution&&p.subject===d.subject&&p.degree===d.degree&&p.starting_date===d.starting_date&&p.complete_date===d.complete_date&&p.grade===d.grade;return Q&&!C});L(p=>({...p,educations:[...P]}));const B=P.length>0;S(B)},f=async m=>{const l=a[m],_=a.filter((N,P)=>P!==m);if(w(_.length>0?_:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),l.id){const N=new Promise(async(P,B)=>{try{const p=await fetch("/education/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:l.id,user_id:n.id})}),j=await p.json();p.ok?(L(d=>({...d,educations:j.educations})),D(d=>({...d,educations:j.educations})),P(j.message||"Education record deleted successfully.")):(A(j.errors),console.error(j.errors),B(j.error||"Failed to delete education record."))}catch(p){B(p)}});$.promise(N,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(he,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting education record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},success:{render({data:P}){return e(q,{children:P})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},error:{render({data:P}){return e(q,{children:P})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}})}},u=async m=>{m.preventDefault(),x(!0);const l=new Promise(async(_,N)=>{try{const P=await fetch("/education/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({educations:a.map(p=>({...p,user_id:n.id}))})}),B=await P.json();P.ok?(D(p=>({...p,educations:B.educations})),x(!1),y(),_([...B.messages])):(x(!1),A(B.errors),console.error(B.errors),N(B.error||"Failed to update education records."))}catch(P){x(!1),N(P.message||"An unexpected error occurred while updating education records.")}});$.promise(l,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(he,{}),e("span",{style:{marginLeft:"8px"},children:"Updating education records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},success:{render({data:_}){return e(q,{children:_.map((N,P)=>e("div",{children:N},P))})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},error:{render({data:_}){return e(q,{children:_})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}})},i=async()=>{w([...a,{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}])};return r(pe,{open:W,onClose:y,maxWidth:"md",fullWidth:!0,children:[r(se,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(E,{children:"Education Information"}),e(O,{onClick:y,sx:{position:"absolute",top:8,right:16},children:e(ve,{})})]}),r("form",{onSubmit:u,children:[e(de,{children:r(Z,{children:[e(t,{container:!0,spacing:2,children:a.map((m,l)=>e(t,{item:!0,xs:12,children:e(X,{children:r(K,{children:[r(E,{variant:"h6",gutterBottom:!0,children:["Education #"+(l+1),e(O,{onClick:()=>f(l),sx:{position:"absolute",top:8,right:16},children:e(ve,{})})]}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Institution",fullWidth:!0,value:m.institution||"",onChange:_=>o(l,"institution",_.target.value),error:!!c[`educations.${l}.institution`],helperText:c[`educations.${l}.institution`]?c[`educations.${l}.institution`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Degree",fullWidth:!0,value:m.degree||"",onChange:_=>o(l,"degree",_.target.value),error:!!c[`educations.${l}.degree`],helperText:c[`educations.${l}.degree`]?c[`educations.${l}.degree`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Subject",fullWidth:!0,value:m.subject||"",onChange:_=>o(l,"subject",_.target.value),error:!!c[`educations.${l}.subject`],helperText:c[`educations.${l}.subject`]?c[`educations.${l}.subject`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Started in",type:"month",fullWidth:!0,InputLabelProps:{shrink:!0},value:m.starting_date||"",onChange:_=>o(l,"starting_date",_.target.value),error:!!c[`educations.${l}.starting_date`],helperText:c[`educations.${l}.starting_date`]?c[`educations.${l}.starting_date`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Completed in",type:"month",fullWidth:!0,InputLabelProps:{shrink:!0},value:m.complete_date||"",onChange:_=>o(l,"complete_date",_.target.value),error:!!c[`educations.${l}.complete_date`],helperText:c[`educations.${l}.complete_date`]?c[`educations.${l}.complete_date`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Grade",fullWidth:!0,value:m.grade||"",onChange:_=>o(l,"grade",_.target.value),error:!!c[`educations.${l}.grade`],helperText:c[`educations.${l}.grade`]?c[`educations.${l}.grade`][0]:""})})]})]})})},l))}),e(Z,{mt:2,children:r(Be,{size:"small",color:"error",sx:{mt:2},onClick:i,children:[e(Ae,{})," Add More"]})})]})}),e(ce,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ae,{disabled:!v,sx:{borderRadius:"50px",padding:"6px 16px"},size:"large",variant:"outlined",color:"primary",type:"submit",loading:I,children:"Submit"})})]})]})},Ur=({user:n,open:W,closeModal:y,setUser:D})=>{const[g,L]=h.useState({id:n.id}),[v,S]=h.useState(!1),[a,w]=h.useState(n.experiences.length>0?n.experiences:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),[c,A]=h.useState({}),[I,x]=h.useState(!1),s=te(),o=(m,l,_)=>{const N=[...a];N[m]={...N[m],[l]:_},w(N);const P=N.filter((p,j)=>{const d=n.experiences[j]||{},Q=!d.id||p.company_name!==d.company_name||p.location!==d.location||p.job_position!==d.job_position||p.period_from!==d.period_from||p.period_to!==d.period_to||p.description!==d.description,C=d.id&&p.company_name===d.company_name&&p.location===d.location&&p.job_position===d.job_position&&p.period_from===d.period_from&&p.period_to===d.period_to&&p.description===d.description;return Q&&!C});L(p=>({...p,experiences:[...P]}));const B=P.length>0;S(B)},f=async m=>{const l=a[m],_=a.filter((N,P)=>P!==m);if(w(_.length>0?_:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),l.id){const N=new Promise(async(P,B)=>{try{const p=await fetch("/experience/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:l.id,user_id:n.id})}),j=await p.json();p.ok?(L(d=>({...d,experiences:j.experiences})),D(d=>({...d,experiences:j.experiences})),P(j.message||"Experience record deleted successfully."),y()):(A([...j.errors]),B(j.error||"Failed to delete experience record."))}catch(p){B(p)}});$.promise(N,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(he,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting experience record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},success:{render({data:P}){return e(q,{children:P})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},error:{render({data:P}){return e(q,{children:P})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}})}},u=async m=>{m.preventDefault(),x(!0);const l=new Promise(async(_,N)=>{try{const P=await fetch("/experience/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({experiences:a.map(p=>({...p,user_id:n.id}))})}),B=await P.json();P.ok?(D(p=>({...p,experiences:B.experiences})),x(!1),y(),_([...B.messages])):(x(!1),A(B.errors),console.error(B.errors),N(B.error||"Failed to update experience records."))}catch(P){x(!1),N(P.message||"An unexpected error occurred while updating experience records.")}});$.promise(l,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(he,{}),e("span",{style:{marginLeft:"8px"},children:"Updating experience records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},success:{render({data:_}){return e(q,{children:_.map((N,P)=>e("div",{children:N},P))})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}},error:{render({data:_}){return e(q,{children:_})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:s.glassCard.background,border:s.glassCard.border,color:s.palette.text.primary}}})},i=async()=>{w([...a,{company:"",role:"",start_date:"",end_date:"",responsibilities:""}])};return r(pe,{open:W,onClose:y,maxWidth:"md",fullWidth:!0,children:[r(se,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(E,{children:"Experience Information"}),e(O,{onClick:y,sx:{position:"absolute",top:8,right:16},children:e(ve,{})})]}),r("form",{onSubmit:u,children:[e(de,{children:r(Z,{children:[e(t,{container:!0,spacing:2,children:a.map((m,l)=>e(t,{item:!0,xs:12,children:e(X,{children:r(K,{children:[r(E,{variant:"h6",gutterBottom:!0,children:["Experience #"+(l+1),e(O,{onClick:()=>f(l),sx:{position:"absolute",top:8,right:16},children:e(ve,{})})]}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Company",fullWidth:!0,value:m.company_name||"",onChange:_=>o(l,"company_name",_.target.value),error:!!c[`experiences.${l}.company_name`],helperText:c[`experiences.${l}.company_name`]?c[`experiences.${l}.company_name`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Location",fullWidth:!0,value:m.location||"",onChange:_=>o(l,"location",_.target.value),error:!!c[`experiences.${l}.location`],helperText:c[`experiences.${l}.location`]?c[`experiences.${l}.location`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Role",fullWidth:!0,value:m.job_position||"",onChange:_=>o(l,"job_position",_.target.value),error:!!c[`experiences.${l}.job_position`],helperText:c[`experiences.${l}.job_position`]?c[`experiences.${l}.job_position`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Started From",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:m.period_from||"",onChange:_=>o(l,"period_from",_.target.value),error:!!c[`experiences.${l}.period_from`],helperText:c[`experiences.${l}.period_from`]?c[`experiences.${l}.period_from`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(F,{label:"Ended On",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:m.period_to||"",onChange:_=>o(l,"period_to",_.target.value),error:!!c[`experiences.${l}.period_to`],helperText:c[`experiences.${l}.period_to`]?c[`experiences.${l}.period_to`][0]:""})}),e(t,{item:!0,xs:12,children:e(F,{label:"Responsibilities",fullWidth:!0,multiline:!0,rows:3,value:m.description||"",onChange:_=>o(l,"description",_.target.value),error:!!c[`experiences.${l}.description`],helperText:c[`experiences.${l}.description`]?c[`experiences.${l}.description`][0]:""})})]})]})})},l))}),r(Be,{size:"small",color:"error",sx:{mt:2},onClick:i,children:[e(Ae,{})," Add More"]})]})}),e(ce,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ae,{disabled:!v,sx:{borderRadius:"50px",padding:"6px 16px"},size:"large",variant:"outlined",color:"primary",type:"submit",loading:I,children:"Submit"})})]})]})},Or=({user:n,setUser:W})=>{const[y,D]=h.useState({id:n.id,salary_basis:n.salary_basis||"",salary_amount:n.salary_amount||"",payment_type:n.payment_type||"",pf_contribution:n.pf_contribution??!1,pf_no:n.pf_no||"",employee_pf_rate:n.employee_pf_rate||0,additional_pf_rate:n.additional_pf_rate||0,total_pf_rate:n.total_pf_rate||0,esi_contribution:n.esi_contribution??!1,esi_no:n.esi_no||"",employee_esi_rate:n.employee_esi_rate||0,additional_esi_rate:n.additional_esi_rate||0,total_esi_rate:n.total_esi_rate||0}),[g,L]=h.useState({id:n.id}),[v,S]=h.useState(!1),[a,w]=h.useState({}),[c,A]=h.useState(!1),I=te(),x=(o,f)=>{D(u=>{const i={...u,[o]:f};return f===""&&delete i[o],o==="pf_contribution"&&f===0?(i.pf_no="",i.employee_pf_rate=0,i.additional_pf_rate=0,i.total_pf_rate=0):(o==="employee_pf_rate"||o==="additional_pf_rate")&&(i.total_pf_rate=i.employee_pf_rate+i.additional_pf_rate),o==="esi_contribution"&&f===0?(i.esi_no="",i.employee_esi_rate=0,i.additional_esi_rate=0,i.total_esi_rate=0):(o==="employee_esi_rate"||o==="additional_esi_rate")&&(i.total_esi_rate=i.employee_esi_rate+i.additional_esi_rate),i}),L(u=>{const i={...u,[o]:f};return f===""&&delete i[o],o==="pf_contribution"&&f===0?(i.pf_no="",i.employee_pf_rate=0,i.additional_pf_rate=0,i.total_pf_rate=0):(o==="employee_pf_rate"||o==="additional_pf_rate")&&(i.total_pf_rate=i.employee_pf_rate+i.additional_pf_rate),o==="esi_contribution"&&f===0?(i.esi_no="",i.employee_esi_rate=0,i.additional_esi_rate=0,i.total_esi_rate=0):(o==="employee_esi_rate"||o==="additional_esi_rate")&&(i.total_esi_rate=i.employee_esi_rate+i.additional_esi_rate),i})};return h.useEffect(()=>{for(const f in g)f!=="id"&&g[f]===n[f]&&delete g[f];const o=Object.keys(g).filter(f=>f!=="id").length>0;S(o)},[y,g,n]),e(t,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:e(t,{item:!0,xs:12,md:12,sx:{display:"flex",flexDirection:"column"},children:r(X,{children:[e(le,{title:"Salary & Statutory Information"}),r("form",{onSubmit:async o=>{o.preventDefault(),A(!0);try{const f=await axios.post(route("profile.update"),{ruleSet:"salary",...y});f.status===200?(W(f.data.user),A(!1),$.success(f.data.messages?.length>0?f.data.messages.join(" "):"Salary information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:I.glassCard.background,border:I.glassCard.border,color:I.palette.text.primary}})):(A(!1),w(f.data.errors),$.error(f.data.error||"Failed to update salary information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:I.glassCard.background,border:I.glassCard.border,color:I.palette.text.primary}}))}catch(f){A(!1),$.error(f.response?.data?.message||"An unexpected error occurred.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:I.glassCard.background,border:I.glassCard.border,color:I.palette.text.primary}}),console.error(f)}},children:[r(K,{children:[e(E,{sx:{fontWeight:"bold",m:2},children:"Salary Information"}),r(t,{container:!0,spacing:3,children:[e(t,{item:!0,xs:12,md:4,children:r(z,{fullWidth:!0,children:[e(J,{id:"salary-basis-label",children:"Salary basis"}),r(H,{labelId:"salary-basis-label",value:g.salary_basis||y.salary_basis||"na",onChange:o=>x("salary_basis",o.target.value),error:!!a.salary_basis,helperText:a.salary_basis,label:"Salary basis",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:I.glassCard.background,border:I.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",disabled:!0,children:"Select salary basis type"}),e(T,{value:"Hourly",children:"Hourly"}),e(T,{value:"Daily",children:"Daily"}),e(T,{value:"Weekly",children:"Weekly"}),e(T,{value:"Monthly",children:"Monthly"})]})]})}),e(t,{item:!0,xs:12,md:4,children:e(F,{label:"Salary amount",type:"number",fullWidth:!0,placeholder:"Type your salary amount",value:g.salary_amount||y.salary_amount||"",onChange:o=>x("salary_amount",o.target.value),InputProps:{startAdornment:e(Ge,{position:"start",children:"$"})},error:!!a.salary_amount,helperText:a.salary_amount})}),e(t,{item:!0,xs:12,md:4,children:r(z,{fullWidth:!0,children:[e(J,{id:"payment-type-label",children:"Payment type"}),r(H,{labelId:"payment-type-label",label:"Payment type",id:`gender-select-${n.id}`,value:g.payment_type||y.payment_type||"na",onChange:o=>x("payment_type",o.target.value),error:!!a.payment_type,helperText:a.payment_type,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:I.glassCard.background,border:I.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",disabled:!0,children:"Select payment type"}),e(T,{value:"Bank transfer",children:"Bank transfer"}),e(T,{value:"Check",children:"Check"}),e(T,{value:"Cash",children:"Cash"})]})]})})]}),e(me,{sx:{my:3}}),e(E,{sx:{fontWeight:"bold",m:2},children:"PF Information"}),r(t,{container:!0,spacing:3,children:[e(t,{item:!0,xs:12,md:4,children:r(z,{fullWidth:!0,children:[e(J,{id:"pf-contribution-label",children:"PF contribution"}),r(H,{labelId:"pf-contribution-label",label:"PF contribution",id:`gender-select-${n.id}`,value:g.pf_contribution!==void 0?g.pf_contribution:y.pf_contribution!==void 0?y.pf_contribution:"na",onChange:o=>x("pf_contribution",o.target.value),error:!!a.pf_contribution,helperText:a.pf_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:I.glassCard.background,border:I.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",disabled:!0,children:"Select PF contribution"}),e(T,{value:1,children:"Yes"}),e(T,{value:0,children:"No"})]})]})}),e(t,{item:!0,xs:12,md:4,children:e(F,{disabled:!(g.pf_contribution||y.pf_contribution),InputLabelProps:{shrink:!0},label:"PF No.",fullWidth:!0,type:"text",placeholder:"Enter PF No.",value:g.pf_no||y.pf_no,onChange:o=>x("pf_no",o.target.value),error:!!a.pf_no,helperText:a.pf_no})}),e(t,{item:!0,xs:12,md:4,children:r(z,{fullWidth:!0,children:[e(J,{id:"employee-pf-rate-label",children:"Employee PF rate"}),r(H,{disabled:!(g.pf_contribution||y.pf_contribution),labelId:"employee-pf-rate-label",label:"Employee PF rate",value:g.employee_pf_rate||y.employee_pf_rate||"na",onChange:o=>x("employee_pf_rate",o.target.value),error:!!a.employee_pf_rate,helperText:a.employee_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:I.glassCard.background,border:I.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",disabled:!0,children:"Select pf rate"}),[...Array(11).keys()].map(o=>r(T,{value:o,children:[o,"%"]},o))]})]})}),e(t,{item:!0,xs:12,md:4,children:r(z,{fullWidth:!0,children:[e(J,{id:"additional-rate-label",children:"Additional rate"}),r(H,{disabled:!(g.pf_contribution||y.pf_contribution),labelId:"additional-rate-label",label:"Additional rate",id:`gender-select-${n.id}`,value:g.additional_pf_rate||y.additional_pf_rate||"na",onChange:o=>x("additional_pf_rate",o.target.value),error:!!a.additional_pf_rate,helperText:a.additional_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:I.glassCard.background,border:I.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(o=>r(T,{value:o,children:[o,"%"]},o))]})]})}),e(t,{item:!0,xs:12,md:4,children:e(F,{disabled:!(g.pf_contribution||y.pf_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:g.total_pf_rate||y.total_pf_rate?`${g.total_pf_rate||y.total_pf_rate}%`:"",InputProps:{readOnly:!0},error:!!a.total_pf_rate,helperText:a.total_pf_rate})})]}),e(me,{sx:{my:3}}),e(E,{sx:{fontWeight:"bold",m:2},children:"ESI Information"}),r(t,{container:!0,spacing:3,children:[e(t,{item:!0,xs:12,md:4,children:r(z,{fullWidth:!0,children:[e(J,{id:"esi-contribution-label",children:"ESI contribution"}),r(H,{labelId:"esi-contribution-label",label:"ESI contribution",value:g.esi_contribution!==void 0?g.esi_contribution:y.esi_contribution!==void 0?y.esi_contribution:"na",onChange:o=>x("esi_contribution",o.target.value),error:!!a.esi_contribution,helperText:a.esi_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:I.glassCard.background,border:I.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",disabled:!0,children:"Select ESI contribution"}),e(T,{value:1,children:"Yes"}),e(T,{value:0,children:"No"})]})]})}),e(t,{item:!0,xs:12,md:4,children:e(F,{disabled:!(g.esi_contribution||y.esi_contribution),InputLabelProps:{shrink:!0},label:"ESI No.",fullWidth:!0,type:"text",placeholder:"Enter ESI No.",value:g.esi_no||y.esi_no,onChange:o=>x("esi_no",o.target.value),error:!!a.esi_no,helperText:a.esi_no})}),e(t,{item:!0,xs:12,md:4,children:r(z,{fullWidth:!0,children:[e(J,{id:"esi-contribution-label",children:"Employee ESI rate"}),r(H,{disabled:!(g.esi_contribution||y.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:g.employee_esi_rate||y.employee_esi_rate||"na",onChange:o=>x("employee_esi_rate",o.target.value),error:!!a.employee_esi_rate,helperText:a.employee_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:I.glassCard.background,border:I.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",disabled:!0,children:"Select esi rate"}),[...Array(11).keys()].map(o=>r(T,{value:o,children:[o,"%"]},o))]})]})}),e(t,{item:!0,xs:12,md:4,children:r(z,{fullWidth:!0,children:[e(J,{id:"esi-contribution-label",children:"Additional rate"}),r(H,{disabled:!(g.esi_contribution||y.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:g.additional_esi_rate||y.additional_esi_rate||"na",onChange:o=>x("additional_esi_rate",o.target.value),error:!!a.additional_esi_rate,helperText:a.additional_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:I.glassCard.background,border:I.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(T,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(o=>r(T,{value:o,children:[o,"%"]},o))]})]})}),e(t,{item:!0,xs:12,md:4,children:e(F,{disabled:!(g.esi_contribution||y.esi_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:g.total_esi_rate||y.total_esi_rate?`${g.total_esi_rate||y.total_esi_rate}%`:"",InputProps:{readOnly:!0},error:!!a.total_esi_rate,helperText:a.total_esi_rate})})]})]}),e(Ue,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ae,{disabled:!v,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:c,children:"Submit"})})]})]})})})},qr=({project:n,isSelected:W=!1,onSelect:y,canView:D,getStatusColor:g,getStatusIcon:L,getPriorityColor:v,getHealthColor:S,getRiskColor:a,onQuickAction:w,formatCurrency:c,formatDate:A,userRole:I,className:x=""})=>{const s=()=>!n.total_tasks||n.total_tasks===0?n.progress||0:Math.round(n.completed_tasks/n.total_tasks*100),o=d=>{switch(d){case"good":return e(we,{className:"w-4 h-4 text-success"});case"at_risk":return e(Ce,{className:"w-4 h-4 text-warning"});case"critical":return e(vr,{className:"w-4 h-4 text-danger"});default:return e(Re,{className:"w-4 h-4 text-default-400"})}},f=d=>{switch(d?.toLowerCase()){case"agile":case"scrum":return e(Qe,{className:"w-4 h-4"});case"waterfall":return e(Ie,{className:"w-4 h-4"});case"prince2":return e(Ze,{className:"w-4 h-4"});case"kanban":return e(Rr,{className:"w-4 h-4"});default:return e(Ye,{className:"w-4 h-4"})}},u=()=>!n.budget_allocated||n.budget_allocated===0?0:n.budget_spent/n.budget_allocated*100,i=d=>d>=.95?"success":d>=.85?"warning":"danger",m=d=>d>=.95?"success":d>=.85?"warning":"danger",l=s(),_=u(),N=n.health_status||"unknown",P=n.spi||1,B=n.cpi||1,j=(()=>{const d=[];return D("view")&&d.push({key:"view",label:"View",icon:e(Cr,{className:"w-4 h-4"}),color:"primary"}),D("edit")&&d.push({key:"edit",label:"Edit",icon:e(kr,{className:"w-4 h-4"}),color:"default"}),D("view")&&d.push({key:"tasks",label:"Tasks",icon:e(Ie,{className:"w-4 h-4"}),color:"default"}),D("reports")&&d.push({key:"reports",label:"Reports",icon:e(Ve,{className:"w-4 h-4"}),color:"default"}),D("clone")&&d.push({key:"clone",label:"Clone",icon:e(er,{className:"w-4 h-4"}),color:"default"}),D("archive")&&d.push({key:"archive",label:"Archive",icon:e(rr,{className:"w-4 h-4"}),color:"warning"}),D("delete")&&d.push({key:"delete",label:"Delete",icon:e(Sr,{className:"w-4 h-4"}),color:"danger"}),d})();return r(hr,{className:`h-full transition-all duration-200 hover:shadow-lg ${W?"ring-2 ring-primary-500 bg-primary-50/50":""} ${x}`,children:[e(pr,{className:"pb-3",children:r("div",{className:"flex items-start justify-between w-full",children:[r("div",{className:"flex items-start space-x-3",children:[e(or,{isSelected:W,onValueChange:y,size:"sm",className:"mt-1"}),r("div",{className:"flex-1 min-w-0",children:[r("div",{className:"flex items-center space-x-2 mb-2",children:[r("div",{className:"flex items-center space-x-2",children:[e("span",{className:"text-lg",children:n.type==="digital"?"🏢":n.type==="enhancement"?"🚀":n.type==="analytics"?"📊":n.type==="integration"?"🌐":n.type==="security"?"🔒":n.type==="marketing"?"🎨":"📋"}),e("h3",{className:"font-semibold text-lg truncate",children:n.project_name})]}),o(N)]}),r("div",{className:"flex items-center space-x-2 text-sm text-default-500 mb-2",children:[r("span",{className:"font-mono",children:["ID: ",n.project_code]}),e("span",{children:"•"}),r(V,{size:"sm",color:v(n.priority),variant:"flat",startContent:e(Er,{className:"w-3 h-3"}),children:[n.priority?.charAt(0).toUpperCase()+n.priority?.slice(1)," Priority"]})]})]})]}),r(lr,{children:[e(sr,{children:e(xe,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-default-600",children:e(xr,{className:"w-4 h-4"})})}),e(dr,{"aria-label":"Project actions",onAction:d=>w(d,n),children:j.map(d=>e(cr,{startContent:d.icon,color:d.color,children:d.label},d.key))})]})]})}),e($e,{className:"pt-0 pb-3",children:r("div",{className:"space-y-3",children:[r("div",{className:"space-y-2",children:[r("div",{className:"flex items-center justify-between",children:[r(V,{size:"sm",color:g(n.status),variant:"flat",startContent:L(n.status),children:["Status: ",n.status?.replace("_"," ")]}),e("span",{className:"text-sm text-default-500",children:n.phase&&`(${n.phase})`})]}),r("div",{className:"space-y-1",children:[r("div",{className:"flex items-center justify-between text-sm",children:[e("span",{children:"Progress"}),r("span",{className:"font-medium",children:[l,"%"]})]}),e(ur,{value:l,color:l>=75?"success":l>=50?"warning":"danger",size:"sm",className:"w-full"})]})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[e(He,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Timeline: ",A(n.start_date)," - ",A(n.end_date)]})]}),r("div",{className:"space-y-1",children:[r("div",{className:"flex items-center justify-between text-sm",children:[r("div",{className:"flex items-center space-x-2",children:[e(Ke,{className:"w-4 h-4 text-default-400"}),e("span",{children:"Budget"})]}),r("span",{className:"text-default-600",children:[c(n.budget_spent||0)," / ",c(n.budget_allocated||0)]})]}),r("div",{className:"flex items-center justify-between text-xs text-default-500",children:[r("span",{children:["(",_.toFixed(0),"% used)"]}),e(V,{size:"sm",variant:"dot",color:_>100?"danger":_>90?"warning":"success",children:_>100?"Over budget":_>90?"High usage":"Good"})]})]}),r("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-default-600",children:"📊 SPI:"}),e(V,{size:"sm",variant:"flat",color:i(P),children:P.toFixed(2)})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-default-600",children:"💰 CPI:"}),e(V,{size:"sm",variant:"flat",color:m(B),children:B.toFixed(2)})]})]}),r("div",{className:"space-y-2",children:[r("div",{className:"flex items-center space-x-2 text-sm",children:[e(We,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Lead: ",n.project_leader?.name||"Unassigned"]}),r("span",{className:"text-default-500",children:["(",n.project_leader?.role||"PM",")"]})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[e(Xe,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Dept: ",n.department?.name||"General"]})]})]}),r("div",{className:"grid grid-cols-2 gap-2",children:[r("div",{className:"flex items-center space-x-2 text-sm",children:[e(Ce,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-default-600",children:"Risk:"}),e(V,{size:"sm",variant:"flat",color:a(n.risk_level),children:n.risk_level||"Low"})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[e(fr,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-default-600",children:"Health:"}),e(V,{size:"sm",variant:"flat",color:S(N),children:N==="good"?"✅ Good":N==="at_risk"?"🟡 At Risk":N==="critical"?"🔴 Critical":"⚪ Unknown"})]})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[f(n.methodology),r("span",{className:"text-default-600",children:["Methodology: ",n.methodology||"Standard"]})]}),n.next_milestone&&r("div",{className:"flex items-center space-x-2 text-sm",children:[e(_r,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Next: ",n.next_milestone]})]})]})}),e(mr,{className:"pt-2",children:r("div",{className:"w-full space-y-2",children:[e("div",{className:"flex flex-wrap gap-2",children:j.slice(0,3).map(d=>e(xe,{size:"sm",variant:"flat",color:d.color,startContent:d.icon,onPress:()=>w(d.key,n),className:"flex-1 min-w-0",children:d.label},d.key))}),j.length>3&&e("div",{className:"flex flex-wrap gap-2",children:j.slice(3,6).map(d=>e(xe,{size:"sm",variant:"light",color:d.color,startContent:d.icon,onPress:()=>w(d.key,n),className:"flex-1 min-w-0",children:d.label},d.key))}),r("div",{className:"text-xs text-default-500 text-center border-t border-default-200 pt-2",children:["Last updated: ",A(n.updated_at)]})]})})]})},zr=[{title:"Office Management",openTasks:1,completedTasks:9,description:"Lorem Ipsum is simply dummy text of the printing and typesetting industry...",deadline:"17 Apr 2019",leaders:[{name:"John Doe",avatar:"assets/img/profiles/avatar-02.jpg"},{name:"Richard Miles",avatar:"assets/img/profiles/avatar-09.jpg"},{name:"John Smith",avatar:"assets/img/profiles/avatar-10.jpg"},{name:"Mike Litorus",avatar:"assets/img/profiles/avatar-05.jpg"}],team:[{name:"John Doe",avatar:"assets/img/profiles/avatar-02.jpg"},{name:"Richard Miles",avatar:"assets/img/profiles/avatar-09.jpg"},{name:"John Smith",avatar:"assets/img/profiles/avatar-10.jpg"},{name:"Mike Litorus",avatar:"assets/img/profiles/avatar-05.jpg"}],progress:40}],Jr=({title:n,allUsers:W,report_to:y,departments:D,designations:g})=>{const{auth:L}=Ne().props,v=te(),S=Pe(v.breakpoints.down("sm"));Pe(v.breakpoints.down("md"));const[a,w]=h.useState(Ne().props.user),[c,A]=_e.useState(0),[I,x]=_e.useState(null),[s,o]=h.useState(!1),[f,u]=h.useState({profile:!1,personal:!1,emergency:!1,bank:!1,family:!1,education:!1,experience:!1,salary:!1}),[i,m]=h.useState({search:"",section:"all",completionStatus:"all"}),[l,_]=h.useState(!1),[N,P]=h.useState({completion_percentage:0,total_sections:8,completed_sections:0,last_updated:null,profile_views:0}),B=L.permissions?.includes("profile.own.update")||L.permissions?.includes("profile.update")||L.user.id===a.id,p=L.permissions?.includes("profile.own.view")||L.permissions?.includes("profile.view")||L.user.id===a.id,j=h.useCallback(b=>{u(G=>({...G,[b]:!0}))},[]),d=h.useCallback(b=>{u(G=>({...G,[b]:!1}))},[]),Q=h.useCallback((b,G)=>{m(re=>({...re,[b]:G}))},[]),C=h.useCallback(async()=>{try{const b=await wr.get(route("profile.stats",{user:a.id}));b.data.stats&&P(b.data.stats)}catch(b){console.error("Error fetching profile stats:",b)}},[a.id]),M=h.useCallback(()=>{const b=[a.name&&a.email,a.phone&&a.address,a.birthday&&a.gender,a.department&&a.designation,a.emergency_contact_primary_name,a.bank_name||a.bank_account_no,a.educations&&a.educations.length>0,a.experiences&&a.experiences.length>0],G=b.filter(Boolean).length,re=Math.round(G/b.length*100);P(ke=>({...ke,completion_percentage:re,completed_sections:G,total_sections:b.length}))},[a]);h.useEffect(()=>{M(),C()},[M,C]);const U=h.useCallback(()=>{M(),C(),$.success("Profile updated successfully")},[M,C]),ee=(b,G)=>{A(G)},ne=h.useMemo(()=>[{title:"Profile Completion",value:`${N.completion_percentage}%`,icon:e(we,{}),color:N.completion_percentage>=80?"text-green-400":N.completion_percentage>=50?"text-orange-400":"text-red-400",iconBg:N.completion_percentage>=80?"bg-green-500/20":N.completion_percentage>=50?"bg-orange-500/20":"bg-red-500/20",description:`${N.completed_sections}/${N.total_sections} sections completed`},{title:"Last Updated",value:N.last_updated?Nr(N.last_updated).fromNow():"Never",icon:e(Re,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Profile last modified"},{title:"Profile Views",value:N.profile_views||0,icon:e(Fr,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Times profile viewed"},{title:"Account Status",value:a.active?"Active":"Inactive",icon:a.active?e(we,{}):e(Ce,{}),color:a.active?"text-green-400":"text-red-400",iconBg:a.active?"bg-green-500/20":"bg-red-500/20",description:"Current account status"}],[N,a.active]),ie=h.useMemo(()=>{const b=[];return B&&b.push({label:S?"Edit":"Edit Profile",icon:e(yr,{className:"w-4 h-4"}),onPress:()=>j("profile"),color:"primary",variant:"solid"}),b.push({label:S?"":"Export",isIconOnly:S,icon:e(Pr,{className:"w-4 h-4"}),color:"default",variant:"bordered"}),b},[B,S]);return p?r(q,{children:[e(Fe,{title:a.name}),f.profile&&e($r,{user:a,allUsers:W,departments:D,designations:g,open:f.profile,setUser:w,closeModal:()=>d("profile"),onSuccess:U}),f.personal&&e(Wr,{user:a,open:f.personal,setUser:w,closeModal:()=>d("personal"),onSuccess:U}),f.emergency&&e(Lr,{user:a,open:f.emergency,setUser:w,closeModal:()=>d("emergency"),onSuccess:U}),f.bank&&e(jr,{user:a,open:f.bank,setUser:w,closeModal:()=>d("bank"),onSuccess:U}),f.family&&e(Mr,{user:a,open:f.family,setUser:w,closeModal:()=>d("family"),onSuccess:U}),f.education&&e(Gr,{user:a,open:f.education,setUser:w,closeModal:()=>d("education"),onSuccess:U}),f.experience&&e(Ur,{user:a,open:f.experience,setUser:w,closeModal:()=>d("experience"),onSuccess:U}),e(Z,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Oe,{in:!0,timeout:800,children:e(X,{children:e(ar,{title:`${a.name}'s Profile`,subtitle:"Manage personal information, work details, and account settings",icon:e(We,{className:"w-8 h-8"}),variant:"default",actionButtons:ie,children:r("div",{className:"p-4 sm:p-6",children:[e(nr,{stats:ne,className:"mb-6"}),r("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(gr,{label:"Search Profile Sections",variant:"bordered",placeholder:"Search sections, fields, or content...",value:i.search,onValueChange:b=>Q("search",b),startContent:e(tr,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:S?"sm":"md"})}),e("div",{className:"flex gap-2 items-end",children:e(br,{variant:"bordered",className:"bg-white/5",children:r(xe,{isIconOnly:S,color:l?"primary":"default",onPress:()=>_(!l),className:l?"bg-purple-500/20":"bg-white/5",children:[e(Ir,{className:"w-4 h-4"}),!S&&e("span",{className:"ml-1",children:"Filters"})]})})})]}),l&&e(qe,{in:!0,timeout:300,children:r("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[r("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r(De,{label:"Profile Section",variant:"bordered",selectedKeys:i.section!=="all"?[i.section]:[],onSelectionChange:b=>{const G=Array.from(b)[0]||"all";Q("section",G)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(Y,{value:"all",children:"All Sections"},"all"),e(Y,{value:"basic",children:"Basic Information"},"basic"),e(Y,{value:"personal",children:"Personal Details"},"personal"),e(Y,{value:"work",children:"Work Information"},"work"),e(Y,{value:"emergency",children:"Emergency Contacts"},"emergency"),e(Y,{value:"bank",children:"Banking Details"},"bank"),e(Y,{value:"education",children:"Education"},"education"),e(Y,{value:"experience",children:"Experience"},"experience")]}),r(De,{label:"Completion Status",variant:"bordered",selectedKeys:i.completionStatus!=="all"?[i.completionStatus]:[],onSelectionChange:b=>{const G=Array.from(b)[0]||"all";Q("completionStatus",G)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(Y,{value:"all",children:"All Status"},"all"),e(Y,{value:"completed",children:"Completed"},"completed"),e(Y,{value:"incomplete",children:"Incomplete"},"incomplete"),e(Y,{value:"empty",children:"Empty"},"empty")]})]}),(i.search||i.section!=="all"||i.completionStatus!=="all")&&r("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[i.search&&r(V,{variant:"flat",color:"primary",size:"sm",onClose:()=>Q("search",""),children:["Search: ",i.search]}),i.section!=="all"&&r(V,{variant:"flat",color:"secondary",size:"sm",onClose:()=>Q("section","all"),children:["Section: ",i.section]}),i.completionStatus!=="all"&&r(V,{variant:"flat",color:"warning",size:"sm",onClose:()=>Q("completionStatus","all"),children:["Status: ",i.completionStatus]})]})]})}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:r(E,{variant:"h6",className:"font-semibold text-foreground",children:["Profile Overview",r("span",{className:"text-sm text-default-500 ml-2",children:["(",N.completion_percentage,"% complete)"]})]})}),s?r("div",{className:"text-center py-8",children:[e(he,{size:40}),e(E,{className:"mt-4",color:"textSecondary",children:"Loading profile data..."})]}):r(q,{children:[e(K,{children:r(t,{container:!0,spacing:2,direction:"row",alignItems:"flex-start",children:[e(t,{item:!0,xs:12,md:5,children:r(t,{container:!0,spacing:2,direction:{xs:"column",md:"row"},alignItems:{xs:"center",md:"flex-start"},children:[e(t,{item:!0,children:e(Z,{sx:{display:"flex",alignItems:"center",mb:2},children:e(Se,{src:a.profile_image,alt:a.name,sx:{width:100,height:100,mr:2}})})}),e(t,{item:!0,xs:12,md:!0,children:r(Z,{direction:{xs:"column",md:"row"},alignItems:{xs:"center",md:"flex-start"},sx:{display:"flex",flexDirection:"column",mb:2},children:[e(E,{variant:"h5",children:a.name}),e(E,{variant:"subtitle1",color:"textSecondary",children:D.find(b=>b.id===a.department)?.name||"N/A"}),e(E,{variant:"body2",color:"textSecondary",children:g.find(b=>b.id===a.designation)?.title||"N/A"}),r(E,{variant:"body2",color:"textSecondary",children:["Employee ID : ",a.employee_id||"N/A"]}),r(E,{variant:"body2",color:"textSecondary",children:["Date of Join : ",a.date_of_joining||"N/A"]}),e(xe,{variant:"bordered",color:"primary",className:"mt-2",children:"Send Message"})]})})]})}),e(me,{orientation:"vertical",flexItem:!0,sx:{mx:2}}),e(t,{item:!0,xs:12,md:6,children:r(oe,{children:[e(R,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Phone:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.phone||"N/A"})})]})}),e(R,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Email:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.email||"N/A"})})]})}),e(R,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Birthday:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.birthday||"N/A"})})]})}),e(R,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Address:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.address||"N/A"})})]})}),e(R,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Gender:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.gender||"N/A"})})]})}),e(R,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Reports to:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:W.find(b=>b.id===a.report_to)?r(Z,{sx:{display:"flex",alignItems:"center"},children:[e(Se,{src:`/assets/images/users/${W.find(b=>b.id===a.report_to)?.user_name}.jpg`,alt:W.find(b=>b.id===a.report_to)?.name,sx:{width:24,height:24,mr:1}}),e(E,{color:"primary",children:W.find(b=>b.id===a.report_to)?.name})]}):"N/A"})})]})})]})})]})}),e(K,{sx:{paddingBottom:"0px !important"},children:r(ze,{value:c,onChange:ee,"aria-label":"User Profile Tabs",variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:[e(ye,{label:"Profile"}),e(ye,{label:"Projects"}),e(ye,{label:"Salary & Statutory"}),e(ye,{label:"Assets"})]})})]})]})]})})})})}),r(Z,{sx:{p:2},children:[c===0&&r(t,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:[e(t,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:r(X,{sx:{mb:2,flex:1},children:[e(le,{title:"Personal Information",sx:{padding:"24px"},action:B&&e(O,{variant:"outlined",color:"primary",onClick:()=>j("personal"),sx:{position:"absolute",top:16,right:16},children:e(ue,{})})}),e(K,{children:a.passport_no||a.passport_exp_date||a.nationality||a.religion||a.marital_status||a.employment_of_spouse||a.number_of_children?r(oe,{children:[a.passport_no&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Passport No.:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.passport_no||"N/A"})})]})}),a.passport_exp_date&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Passport Exp Date.:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.passport_exp_date||"N/A"})})]})}),a.nid&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• NID No.:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.nid||"N/A"})})]})}),a.nationality&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Nationality:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.nationality||"N/A"})})]})}),a.religion&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Religion:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.religion||"N/A"})})]})}),a.marital_status&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Marital Status:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.marital_status||"N/A"})})]})}),a.employment_of_spouse&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Employment of Spouse:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.employment_of_spouse||"N/A"})})]})}),a.number_of_children&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• No. of Children:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.number_of_children||"N/A"})})]})})]}):e(E,{children:"No personal information available"})})]})}),e(t,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:r(X,{sx:{mb:2,flex:1},children:[e(le,{title:"Emergency Contact",sx:{padding:"24px"},action:B&&e(O,{variant:"outlined",color:"primary",onClick:()=>j("emergency"),sx:{position:"absolute",top:16,right:16},children:e(ue,{})})}),e(K,{children:a.emergency_contact_primary_name||a.emergency_contact_secondary_name?r(oe,{children:[a.emergency_contact_primary_name&&r(q,{children:[e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Name:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_primary_name||"N/A"})})]})}),e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Relationship:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_primary_relationship||"N/A"})})]})}),e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Phone:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_primary_phone||"N/A"})})]})})]}),a.emergency_contact_secondary_name&&r(q,{children:[e(me,{sx:{my:2}}),e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Name:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_secondary_name||"N/A"})})]})}),e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Relationship:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_secondary_relationship||"N/A"})})]})}),e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Phone:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_secondary_phone||"N/A"})})]})})]})]}):e(E,{children:"No emergency contact information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(X,{variant:"outlined",sx:{mb:2},children:[e(le,{title:"Bank Information",sx:{padding:"24px"},action:B&&e(O,{variant:"outlined",color:"primary",onClick:()=>j("bank"),sx:{position:"absolute",top:16,right:16},children:e(ue,{})})}),e(K,{children:a.bank_name||a.bank_account_no||a.ifsc_code||a.pan_no?r(oe,{children:[a.bank_name&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Bank Name:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.bank_name})})]})}),a.bank_account_no&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Bank Account No.:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.bank_account_no})})]})}),a.ifsc_code&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• IFSC Code:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.ifsc_code})})]})}),a.pan_no&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• PAN No:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.pan_no})})]})})]}):e(E,{children:"No bank information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(X,{variant:"outlined",children:[e(le,{title:"Family Information",sx:{padding:"24px"},action:B&&e(O,{variant:"outlined",color:"primary",onClick:()=>j("family"),sx:{position:"absolute",top:16,right:16},children:e(ue,{})})}),e(K,{children:a.family_member_name||a.family_member_relationship||a.family_member_dob||a.family_member_phone?r(oe,{children:[a.family_member_name&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Name:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.family_member_name})})]})}),a.family_member_relationship&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Relationship:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.family_member_relationship})})]})}),a.family_member_dob&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Date of Birth:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.family_member_dob})})]})}),a.family_member_phone&&e(R,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"• Phone:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.family_member_phone})})]})})]}):e(E,{children:"No family member information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(X,{variant:"outlined",sx:{mb:2},children:[e(le,{title:"Education Information",sx:{padding:"24px"},action:B&&e(O,{variant:"outlined",color:"primary",onClick:()=>j("education"),sx:{position:"absolute",top:16,right:16},children:e(ue,{})})}),e(K,{children:a.educations&&a.educations.length>0?e(oe,{children:a.educations.map((b,G)=>r(_e.Fragment,{children:[e(R,{disableGutters:!0,children:r(E,{variant:"h6",children:["• ",b.institution]})}),e(R,{disableGutters:!0,children:e(E,{variant:"body1",children:b.degree||"N/A"})}),e(R,{disableGutters:!0,children:r(E,{variant:"body2",children:[b.starting_date?new Date(b.starting_date).getFullYear():"N/A"," -",b.complete_date?new Date(b.complete_date).getFullYear():"N/A"]})}),G<a.educations.length-1&&e(me,{sx:{my:1}})]},b.id))}):e(E,{children:"No education information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(X,{variant:"outlined",children:[e(le,{title:"Experience",sx:{padding:"24px"},action:B&&e(O,{variant:"outlined",color:"primary",onClick:()=>j("experience"),sx:{position:"absolute",top:16,right:16},children:e(ue,{})})}),e(K,{children:a.experiences&&a.experiences.length>0?e(oe,{children:a.experiences.map((b,G)=>r(_e.Fragment,{children:[e(R,{disableGutters:!0,children:r(E,{variant:"h6",children:["• ",b.job_position," at ",b.company_name]})}),e(R,{disableGutters:!0,children:r(E,{variant:"body1",children:[b.period_from?new Date(b.period_from).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"N/A"," "," - ",b.period_to?new Date(b.period_to).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Present"]})}),e(R,{disableGutters:!0,children:e(E,{variant:"body2",children:b.location})}),b.description&&e(R,{disableGutters:!0,children:e(E,{variant:"body2",children:b.description})}),G<a.experiences.length-1&&e(me,{sx:{my:1}})]},G))}):e(E,{children:"No experience information"})})]})})]}),c===1&&e(t,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:zr.map((b,G)=>e(t,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column"},children:e(qr,{project:b})},b.id||G))}),c===2&&e(Or,{user:a,setUser:w})]})]}):r(Te,{children:[e(Fe,{title:n}),e(Z,{sx:{display:"flex",justifyContent:"center",p:2},children:e(X,{children:r($e,{className:"p-8 text-center",children:[e(Ce,{className:"w-16 h-16 text-warning-500 mx-auto mb-4"}),e(E,{variant:"h6",className:"mb-2",children:"Access Denied"}),e(E,{variant:"body2",color:"textSecondary",children:"You don't have permission to view this profile."})]})})})]})};Jr.layout=n=>e(Te,{children:n});export{Jr as default};
