import{j as e,a as ne,d as xe,b as d,e as ie,i as u,s as le,l as z,h as C,k as Ss,A as V,B as W,C as K,D as Q,f as fe,E as Z,O as De,U as ge,w as je,x as ve,y as ye,z as N,L as Fs}from"./vendor-heroui-CinxWHhv.js";import{r,R as oe,Q as Ms}from"./vendor-inertia-sUfCHI_5.js";import{k as G,l as be,A as ks,m as Ue,n as Es,o as Rs}from"./Dashboard-BNivAvMY.js";import{S as Ps}from"./StatsCards-B_Jutffs.js";import{a as E}from"./vendor-utils-CrJAVL9K.js";import{s as g}from"./toastUtils-BVg-E_WQ.js";import{F as Fe}from"./DocumentIcon-08C5TBVc.js";import{F as Be}from"./ShieldCheckIcon-Ck-ae4AP.js";import{e as Ce,A as Te}from"./vendor-framer-B7qqn1b6.js";import{b as Is,d as Ve}from"./app-DQ9Go70J.js";import{F as we}from"./PlusIcon-BO1LbXgZ.js";import{F as We}from"./MagnifyingGlassIcon-BJyUDYwI.js";import{F as ce}from"./KeyIcon-BIi5nz4o.js";import{F as Ne}from"./EllipsisVerticalIcon-CqOfKM9J.js";import{F as _e}from"./PencilSquareIcon-DOHXhjaO.js";import{F as Se}from"./TrashIcon-Dnjv_I7q.js";import{F as Os}from"./XMarkIcon-twQGc8di.js";import"./vendor-react-FouZbkAE.js";import"./EnvelopeIcon-CFKoTD3N.js";import"./UserGroupIcon-CSQScwVa.js";import"./MapPinIcon-DDwLGyCW.js";import"./ClockIcon-BKLni_N9.js";import"./UserIcon-CgrjQ1A2.js";import"./logo-DFaNDj_M.js";import"./CheckCircleIcon-BAvoXTNq.js";import"./ExclamationTriangleIcon-BarRaUA8.js";function $s({title:o,titleId:n,...p},h){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:h,"aria-labelledby":n},p),o?r.createElement("title",{id:n},o):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 0 1-1.125-1.125v-3.75ZM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-8.25ZM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-2.25Z"}))}const As=r.forwardRef($s);function zs({title:o,titleId:n,...p},h){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:h,"aria-labelledby":n},p),o?r.createElement("title",{id:n},o):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75 2.25 12l4.179 2.25m0-4.5 5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0 4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0-5.571 3-5.571-3"}))}const Ls=r.forwardRef(zs),qs={page:e.jsx(Fe,{className:"w-4 h-4"}),section:e.jsx(As,{className:"w-4 h-4"}),widget:e.jsx(Rs,{className:"w-4 h-4"}),action:e.jsx(Es,{className:"w-4 h-4"}),api:e.jsx(Os,{className:"w-4 h-4"})},Ke={page:"primary",section:"secondary",widget:"success",action:"warning",api:"danger"},Ds={core_system:"primary",self_service:"secondary",human_resources:"success",project_management:"warning",document_management:"default",customer_relations:"primary",supply_chain:"secondary",retail_sales:"success",financial_management:"warning",system_administration:"danger"},Me={view:{label:"View",description:"Can view/read data"},create:{label:"Create",description:"Can create new records"},update:{label:"Edit",description:"Can modify existing records"},delete:{label:"Delete",description:"Can remove records"},import:{label:"Import",description:"Can import data from files"},export:{label:"Export",description:"Can export data to files"},approve:{label:"Approve",description:"Can approve requests"},assign:{label:"Assign",description:"Can assign to users"},manage:{label:"Manage",description:"Full management access"},operate:{label:"Operate",description:"Can operate/execute"},punch:{label:"Punch",description:"Can punch attendance"},change:{label:"Change",description:"Can change settings"},impersonate:{label:"Impersonate",description:"Can act as another user"},analytics:{label:"Analytics",description:"Can view analytics"},settings:{label:"Settings",description:"Can configure settings"},log:{label:"Log",description:"Can view logs"},schedule:{label:"Schedule",description:"Can manage schedules"},restore:{label:"Restore",description:"Can restore data"},own:{label:"Own",description:"Access to own records only"}},Qe=o=>o.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "),Us=o=>{const n=o.split(".");if(n.length>=2){const p=Qe(n[0]),h=n[1];if(n.length>=3&&h==="own"){const L=n[2];return`${(Me[L]||{label:L.charAt(0).toUpperCase()+L.slice(1)}).label} Own ${p}`}return`${(Me[h]||{label:h.charAt(0).toUpperCase()+h.slice(1)}).label} ${p}`}return o},Bs=o=>{var p;const n=o.split(".");if(n.length>=2){const h=n.length>=3&&n[1]==="own"?n[2]:n[1];return((p=Me[h])==null?void 0:p.description)||`Permission for ${o}`}return`Permission for ${o}`},Ts=o=>{const n={};o.forEach(y=>{const I=y.name.split(".")[0];n[I]||(n[I]={name:Qe(I),permissions:[]}),n[I].permissions.push({...y,displayName:Us(y.name),description:Bs(y.name)})});const p=Object.keys(n).sort(),h={};return p.forEach(y=>{h[y]=n[y]}),h},Vs=(o,n)=>{const[p,h]=r.useState(o);return r.useEffect(()=>{const y=setTimeout(()=>{h(o)},n);return()=>clearTimeout(y)},[o,n]),p},gt=o=>{var qe;const{modules:n=[],permissions:p=[],statistics:h={},categories:y={},componentTypes:L={},title:I="Module Permission Registry"}=o,[ke,Ze]=r.useState(n),[F,Ge]=r.useState(h),[O,b]=r.useState(!1),[Ee,He]=r.useState(""),[H,Je]=r.useState("all"),[U,Xe]=r.useState("all"),[Ye,es]=r.useState(new Set),[ss,ts]=r.useState(new Set),[as,J]=r.useState(!1),[rs,X]=r.useState(!1),[ns,Y]=r.useState(!1),[is,ee]=r.useState(!1),[ls,se]=r.useState(!1),[te,Re]=r.useState(null),[ae,Pe]=r.useState(null),[re,Ie]=r.useState(null),[os,cs]=r.useState(null),[ds,ms]=r.useState(null),[x,Oe]=r.useState(null),[w,us]=r.useState(null),[m,_]=r.useState({code:"",name:"",description:"",icon:"",category:"core_system",route_prefix:"",is_active:!0,priority:100}),[f,M]=r.useState({code:"",name:"",description:"",icon:"",route:"",is_active:!0,priority:100}),[j,R]=r.useState({code:"",name:"",description:"",type:"page",route:"",is_active:!0}),[S,k]=r.useState([]),B=Vs(Ee,300),de=r.useMemo(()=>ke.filter(s=>{var v;const t=!B||s.name.toLowerCase().includes(B.toLowerCase())||s.code.toLowerCase().includes(B.toLowerCase())||((v=s.description)==null?void 0:v.toLowerCase().includes(B.toLowerCase())),a=H==="all"||s.category===H,l=U==="all"||U==="active"&&s.is_active||U==="inactive"&&!s.is_active;return t&&a&&l}),[ke,B,H,U]);r.useMemo(()=>[{title:"Total Modules",value:F.total_modules||0,icon:e.jsx(G,{className:"w-6 h-6"}),color:"primary",description:"Top-level modules"},{title:"Sub-Modules",value:F.total_sub_modules||0,icon:e.jsx(be,{className:"w-6 h-6"}),color:"secondary",description:"Functional areas"},{title:"Components",value:F.total_components||0,icon:e.jsx(Fe,{className:"w-6 h-6"}),color:"success",description:"UI components"},{title:"Permission Rules",value:F.total_permission_requirements||0,icon:e.jsx(Be,{className:"w-6 h-6"}),color:"warning",description:"Access requirements"}],[F]);const $e=s=>{es(t=>{const a=new Set(t);return a.has(s)?a.delete(s):a.add(s),a})},Ae=s=>{ts(t=>{const a=new Set(t);return a.has(s)?a.delete(s):a.add(s),a})},q=async()=>{b(!0);try{const s=await E.get(route("modules.api.index"));Ze(s.data.modules||[]),Ge(s.data.statistics||{}),g.success("Data refreshed successfully")}catch(s){g.error("Failed to refresh data"),console.error("Refresh error:",s)}finally{b(!1)}},me=(s=null)=>{s?(Re(s),_({code:s.code,name:s.name,description:s.description||"",icon:s.icon||"",category:s.category||"core_system",route_prefix:s.route_prefix||"",is_active:s.is_active,priority:s.priority||100})):(Re(null),_({code:"",name:"",description:"",icon:"",category:"core_system",route_prefix:"",is_active:!0,priority:100})),J(!0)},ze=(s,t=null)=>{cs(s),t?(Pe(t),M({code:t.code,name:t.name,description:t.description||"",icon:t.icon||"",route:t.route||"",is_active:t.is_active,priority:t.priority||100})):(Pe(null),M({code:"",name:"",description:"",icon:"",route:"",is_active:!0,priority:100})),X(!0)},Le=(s,t=null)=>{ms(s),t?(Ie(t),R({code:t.code,name:t.name,description:t.description||"",type:t.type||"page",route:t.route||"",is_active:t.is_active})):(Ie(null),R({code:"",name:"",description:"",type:"page",route:"",is_active:!0})),Y(!0)},ue=s=>{us(s);const a=(s.permission_requirements||s.permissionRequirements||[]).map(l=>Number(l.permission_id));k(a),ee(!0)},ps=async()=>{var s,t;b(!0);try{te?(await E.put(route("modules.update",te.id),m),g.success("Module updated successfully")):(await E.post(route("modules.store"),m),g.success("Module created successfully")),J(!1),q()}catch(a){g.error(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save module")}finally{b(!1)}},hs=async()=>{var s,t;b(!0);try{ae?(await E.put(route("modules.sub-modules.update",ae.id),f),g.success("Sub-module updated successfully")):(await E.post(route("modules.sub-modules.store",os),f),g.success("Sub-module created successfully")),X(!1),q()}catch(a){g.error(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save sub-module")}finally{b(!1)}},xs=async()=>{var s,t;b(!0);try{re?(await E.put(route("modules.components.update",re.id),j),g.success("Component updated successfully")):(await E.post(route("modules.components.store",ds),j),g.success("Component created successfully")),Y(!1),q()}catch(a){g.error(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save component")}finally{b(!1)}},fs=async()=>{var s,t,a,l,v;b(!0);try{let i;w.type==="module"?i=route("modules.sync-permissions",w.id):w.type==="sub_module"?i=route("modules.sub-modules.sync-permissions",w.id):i=route("modules.components.sync-permissions",w.id);const c=S.map(A=>{const he=p.find(_s=>_s.id===A);return{permission:(he==null?void 0:he.name)||"",type:"required",group:null}}).filter(A=>A.permission),P=await E.post(i,{permissions:c});g.success("Permissions updated successfully"),ee(!1),q()}catch(i){console.error("Error saving permissions:",i),console.error("Error response:",(s=i.response)==null?void 0:s.data);const c=(a=(t=i.response)==null?void 0:t.data)!=null&&a.errors?Object.values(i.response.data.errors).flat().join(", "):((v=(l=i.response)==null?void 0:l.data)==null?void 0:v.message)||"Failed to save permissions";g.error(c)}finally{b(!1)}},pe=(s,t)=>{Oe({...s,type:t}),se(!0)},gs=async()=>{var s,t;if(x){b(!0);try{let a;x.type==="module"?a=route("modules.destroy",x.id):x.type==="sub_module"?a=route("modules.sub-modules.destroy",x.id):a=route("modules.components.destroy",x.id),await E.delete(a),g.success(`${x.type.replace("_"," ")} deleted successfully`),se(!1),Oe(null),q()}catch(a){g.error(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to delete")}finally{b(!1)}}},js=s=>{var v;const t=Ye.has(s.id),a=s.sub_modules||[],l=((v=s.permission_requirements)==null?void 0:v.length)||0;return e.jsx(ne,{className:"mb-3",children:e.jsxs(ie,{className:"p-0",children:[e.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer hover:bg-default-100 transition-colors ${s.is_active?"":"opacity-60"}`,onClick:()=>$e(s.id),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(d,{isIconOnly:!0,size:"sm",variant:"light",onClick:i=>{i.stopPropagation(),$e(s.id)},children:t?e.jsx(Ve,{className:"w-4 h-4"}):e.jsx(Ue,{className:"w-4 h-4"})}),e.jsx(G,{className:"w-6 h-6 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:s.name}),e.jsx(C,{size:"sm",variant:"flat",color:Ds[s.category]||"default",children:s.code}),!s.is_active&&e.jsx(C,{size:"sm",variant:"flat",color:"danger",children:"Inactive"})]}),e.jsx("p",{className:"text-sm text-default-500 mt-1",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{content:a.length,color:"primary",size:"sm",children:e.jsx(C,{size:"sm",variant:"bordered",children:"Sub-modules"})}),e.jsx(ge,{content:l,color:"warning",size:"sm",children:e.jsx(C,{size:"sm",variant:"bordered",children:"Permissions"})}),e.jsxs(je,{children:[e.jsx(ve,{children:e.jsx(d,{isIconOnly:!0,size:"sm",variant:"light",onClick:i=>i.stopPropagation(),children:e.jsx(Ne,{className:"w-5 h-5"})})}),e.jsxs(ye,{children:[e.jsx(N,{startContent:e.jsx(_e,{className:"w-4 h-4"}),onClick:()=>me(s),children:"Edit Module"},"edit"),e.jsx(N,{startContent:e.jsx(ce,{className:"w-4 h-4"}),onClick:()=>ue({...s,type:"module"}),children:"Manage Permissions"},"permissions"),e.jsx(N,{startContent:e.jsx(we,{className:"w-4 h-4"}),onClick:()=>ze(s.id),children:"Add Sub-Module"},"add-submodule"),e.jsx(N,{startContent:e.jsx(Se,{className:"w-4 h-4"}),color:"danger",className:"text-danger",onClick:()=>pe(s,"module"),children:"Delete Module"},"delete")]})]})]})]}),e.jsx(Te,{children:t&&a.length>0&&e.jsx(Ce.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"border-t border-default-200",children:e.jsx("div",{className:"pl-8 py-2",children:a.map(i=>vs(i,s.id))})})})]})},s.id)},vs=(s,t)=>{var v;const a=ss.has(s.id),l=s.components||[];return(v=s.permission_requirements)!=null&&v.length,e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg bg-default-50 hover:bg-default-100 cursor-pointer transition-colors ${s.is_active?"":"opacity-60"}`,onClick:()=>Ae(s.id),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(d,{isIconOnly:!0,size:"sm",variant:"light",onClick:i=>{i.stopPropagation(),Ae(s.id)},children:a?e.jsx(Ve,{className:"w-4 h-4"}):e.jsx(Ue,{className:"w-4 h-4"})}),e.jsx(be,{className:"w-5 h-5 text-secondary"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx(C,{size:"sm",variant:"flat",color:"secondary",children:s.code}),!s.is_active&&e.jsx(C,{size:"sm",variant:"flat",color:"danger",children:"Inactive"})]}),s.description&&e.jsx("p",{className:"text-xs text-default-400 mt-0.5",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{content:l.length,color:"success",size:"sm",children:e.jsx(C,{size:"sm",variant:"bordered",children:"Components"})}),e.jsxs(je,{children:[e.jsx(ve,{children:e.jsx(d,{isIconOnly:!0,size:"sm",variant:"light",onClick:i=>i.stopPropagation(),children:e.jsx(Ne,{className:"w-4 h-4"})})}),e.jsxs(ye,{children:[e.jsx(N,{startContent:e.jsx(_e,{className:"w-4 h-4"}),onClick:()=>ze(t,s),children:"Edit Sub-Module"},"edit"),e.jsx(N,{startContent:e.jsx(ce,{className:"w-4 h-4"}),onClick:()=>ue({...s,type:"sub_module"}),children:"Manage Permissions"},"permissions"),e.jsx(N,{startContent:e.jsx(we,{className:"w-4 h-4"}),onClick:()=>Le(s.id),children:"Add Component"},"add-component"),e.jsx(N,{startContent:e.jsx(Se,{className:"w-4 h-4"}),color:"danger",className:"text-danger",onClick:()=>pe(s,"sub_module"),children:"Delete Sub-Module"},"delete")]})]})]})]}),e.jsx(Te,{children:a&&l.length>0&&e.jsx(Ce.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"pl-10 mt-2",children:l.map(i=>ys(i,s.id))})})]},s.id)},ys=(s,t)=>{var l;const a=((l=s.permission_requirements)==null?void 0:l.length)||0;return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md bg-default-100 hover:bg-default-200 mb-1 transition-colors ${s.is_active?"":"opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(Fs,{content:s.type,children:e.jsx("span",{className:`text-${Ke[s.type]}`,children:qs[s.type]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:s.name}),e.jsx(C,{size:"sm",variant:"flat",color:Ke[s.type],children:s.type}),s.route&&e.jsx(C,{size:"sm",variant:"bordered",color:"default",children:s.route})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a>0&&e.jsxs(C,{size:"sm",variant:"flat",color:"warning",children:[a," perms"]}),e.jsxs(je,{children:[e.jsx(ve,{children:e.jsx(d,{isIconOnly:!0,size:"sm",variant:"light",children:e.jsx(Ne,{className:"w-4 h-4"})})}),e.jsxs(ye,{children:[e.jsx(N,{startContent:e.jsx(_e,{className:"w-4 h-4"}),onClick:()=>Le(t,s),children:"Edit Component"},"edit"),e.jsx(N,{startContent:e.jsx(ce,{className:"w-4 h-4"}),onClick:()=>ue({...s,type:"component"}),children:"Manage Permissions"},"permissions"),e.jsx(N,{startContent:e.jsx(Se,{className:"w-4 h-4"}),color:"danger",className:"text-danger",onClick:()=>pe(s,"component"),children:"Delete Component"},"delete")]})]})]})]},s.id)},D=()=>{var l;if(typeof window>"u")return"lg";const t=((l=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:l.trim())||"12px",a=parseInt(t);return a===0?"none":a<=4?"sm":a<=8?"md":a<=16?"lg":"full"},[$,bs]=oe.useState(!1),[Cs,ws]=oe.useState(!1),[T,Ns]=oe.useState(!1);return oe.useEffect(()=>{const s=()=>{bs(window.innerWidth<640),ws(window.innerWidth<768),Ns(window.innerWidth>=1025)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e.jsxs(ks,{children:[e.jsx(Ms,{title:I}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Module Permission Registry",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(Ce.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(ne,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(xe,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${T?"p-6":Cs?"p-4":$?"p-3":"p-4"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                                            ${T?"p-3":$?"p-2":"p-2.5"} 
                                                            rounded-xl flex items-center justify-center
                                                        `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(Ls,{className:`
                                                                ${T?"w-8 h-8":$?"w-5 h-5":"w-6 h-6"}
                                                            `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                                                ${T?"text-2xl":$?"text-lg":"text-xl"}
                                                                font-bold text-foreground
                                                                ${$?"truncate":""}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Module Permission Management"}),e.jsx("p",{className:`
                                                                ${T?"text-sm":"text-xs"} 
                                                                text-default-500
                                                                ${$?"truncate":""}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage module permissions and access control hierarchy"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{className:"font-medium",style:{background:"color-mix(in srgb, var(--theme-default) 15%, transparent)",color:"var(--theme-foreground)",borderRadius:D(),border:"1px solid color-mix(in srgb, var(--theme-default) 30%, transparent)"},startContent:e.jsx(Is,{className:"w-4 h-4"}),onPress:q,isLoading:O,children:"Refresh"}),e.jsx(d,{className:"text-white font-medium",style:{background:"linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary) 80%, var(--theme-secondary)))",borderRadius:D()},startContent:e.jsx(we,{className:"w-4 h-4"}),onPress:()=>me(),children:$?"Add":"Add Module"})]})]})})})}),e.jsxs(ie,{className:"p-6",children:[e.jsx(Ps,{stats:[{title:"Total Modules",value:F.total_modules||0,icon:e.jsx(G,{className:"w-6 h-6"}),color:"text-blue-500",iconBg:"bg-blue-500/20",description:"Top-level modules"},{title:"Sub-Modules",value:F.total_sub_modules||0,icon:e.jsx(be,{className:"w-6 h-6"}),color:"text-purple-500",iconBg:"bg-purple-500/20",description:"Functional areas"},{title:"Components",value:F.total_components||0,icon:e.jsx(Fe,{className:"w-6 h-6"}),color:"text-green-500",iconBg:"bg-green-500/20",description:"UI components"},{title:"Permission Rules",value:F.total_permission_requirements||0,icon:e.jsx(Be,{className:"w-6 h-6"}),color:"text-orange-500",iconBg:"bg-orange-500/20",description:"Access requirements"}],className:"mb-6"}),e.jsx("div",{className:"mb-6 p-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:D(),backdropFilter:"blur(16px)"},children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(u,{placeholder:"Search modules...",value:Ee,onChange:s=>He(s.target.value),startContent:e.jsx(We,{className:"w-4 h-4 text-default-400"}),className:"flex-1",variant:"bordered",radius:D(),classNames:{inputWrapper:"bg-white/50 dark:bg-default-50/10 backdrop-blur-md border-default-200/30",input:"text-foreground placeholder:text-default-400"}}),e.jsxs(le,{label:"Category",selectedKeys:[H],onChange:s=>Je(s.target.value),className:"w-full sm:w-48",variant:"bordered",radius:D(),classNames:{trigger:"bg-white/50 dark:bg-default-50/10 backdrop-blur-md border-default-200/30",value:"text-foreground"},children:[e.jsx(z,{value:"all",children:"All Categories"},"all"),Object.entries(y).map(([s,t])=>e.jsx(z,{value:s,children:t},s))]}),e.jsxs(le,{label:"Status",selectedKeys:[U],onChange:s=>Xe(s.target.value),className:"w-full sm:w-36",variant:"bordered",radius:D(),classNames:{trigger:"bg-white/50 dark:bg-default-50/10 backdrop-blur-md border-default-200/30",value:"text-foreground"},children:[e.jsx(z,{value:"all",children:"All"},"all"),e.jsx(z,{value:"active",children:"Active"},"active"),e.jsx(z,{value:"inactive",children:"Inactive"},"inactive")]})]})}),e.jsxs(ne,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                                                var(--theme-content1, #FAFAFA) 20%, 
                                                var(--theme-content2, #F4F4F5) 10%, 
                                                var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsxs(xe,{className:"flex justify-between items-center border-b pb-2",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)"},children:e.jsx(G,{className:"w-6 h-6",style:{color:"var(--theme-primary)"}})}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Module Hierarchy"})]}),e.jsxs(C,{variant:"flat",color:"default",children:[de.length," modules"]})]}),e.jsx(ie,{children:O?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(Ss,{size:"lg"})}):de.length===0?e.jsxs("div",{className:"text-center py-12 text-default-500",children:[e.jsx(G,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No modules found"}),e.jsx(d,{color:"primary",variant:"flat",className:"mt-4",onClick:()=>me(),children:"Create First Module"})]}):e.jsx("div",{className:"space-y-2",children:de.map(s=>js(s))})})]})]})]})})})})}),e.jsx(V,{isOpen:as,onClose:()=>J(!1),size:"2xl",children:e.jsxs(W,{children:[e.jsx(K,{children:te?"Edit Module":"Create New Module"}),e.jsx(Q,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(u,{label:"Code",placeholder:"MODULE_CODE",value:m.code,onChange:s=>_({...m,code:s.target.value.toUpperCase()}),isRequired:!0}),e.jsx(u,{label:"Name",placeholder:"Module Name",value:m.name,onChange:s=>_({...m,name:s.target.value}),isRequired:!0}),e.jsx(u,{label:"Icon",placeholder:"Icon class name",value:m.icon,onChange:s=>_({...m,icon:s.target.value}),className:"col-span-2"}),e.jsx(u,{label:"Route Prefix",placeholder:"/module-route",value:m.route_prefix,onChange:s=>_({...m,route_prefix:s.target.value})}),e.jsx(le,{label:"Category",selectedKeys:[m.category],onChange:s=>_({...m,category:s.target.value}),children:Object.entries(y).map(([s,t])=>e.jsx(z,{value:s,children:t},s))}),e.jsx(u,{label:"Priority",type:"number",value:m.priority,onChange:s=>_({...m,priority:parseInt(s.target.value)})}),e.jsx("div",{className:"flex items-center",children:e.jsx(fe,{isSelected:m.is_active,onValueChange:s=>_({...m,is_active:s}),children:"Active"})}),e.jsx(u,{label:"Description",placeholder:"Module description",value:m.description,onChange:s=>_({...m,description:s.target.value}),className:"col-span-2"})]})}),e.jsxs(Z,{children:[e.jsx(d,{variant:"flat",onClick:()=>J(!1),children:"Cancel"}),e.jsx(d,{color:"primary",onClick:ps,isLoading:O,children:te?"Update":"Create"})]})]})}),e.jsx(V,{isOpen:rs,onClose:()=>X(!1),size:"xl",children:e.jsxs(W,{children:[e.jsx(K,{children:ae?"Edit Sub-Module":"Create New Sub-Module"}),e.jsx(Q,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(u,{label:"Code",placeholder:"SUBMODULE_CODE",value:f.code,onChange:s=>M({...f,code:s.target.value.toUpperCase()}),isRequired:!0}),e.jsx(u,{label:"Name",placeholder:"Sub-Module Name",value:f.name,onChange:s=>M({...f,name:s.target.value}),isRequired:!0}),e.jsx(u,{label:"Icon",placeholder:"Icon class name",value:f.icon,onChange:s=>M({...f,icon:s.target.value})}),e.jsx(u,{label:"Route",placeholder:"Named route",value:f.route,onChange:s=>M({...f,route:s.target.value})}),e.jsx(u,{label:"Priority",type:"number",value:f.priority,onChange:s=>M({...f,priority:parseInt(s.target.value)})}),e.jsx("div",{className:"flex items-center",children:e.jsx(fe,{isSelected:f.is_active,onValueChange:s=>M({...f,is_active:s}),children:"Active"})}),e.jsx(u,{label:"Description",placeholder:"Sub-module description",value:f.description,onChange:s=>M({...f,description:s.target.value}),className:"col-span-2"})]})}),e.jsxs(Z,{children:[e.jsx(d,{variant:"flat",onClick:()=>X(!1),children:"Cancel"}),e.jsx(d,{color:"primary",onClick:hs,isLoading:O,children:ae?"Update":"Create"})]})]})}),e.jsx(V,{isOpen:ns,onClose:()=>Y(!1),size:"xl",children:e.jsxs(W,{children:[e.jsx(K,{children:re?"Edit Component":"Create New Component"}),e.jsx(Q,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(u,{label:"Code",placeholder:"COMPONENT_CODE",value:j.code,onChange:s=>R({...j,code:s.target.value.toUpperCase()}),isRequired:!0}),e.jsx(u,{label:"Name",placeholder:"Component Name",value:j.name,onChange:s=>R({...j,name:s.target.value}),isRequired:!0}),e.jsx(le,{label:"Type",selectedKeys:[j.type],onChange:s=>R({...j,type:s.target.value}),children:Object.entries(L).map(([s,t])=>e.jsx(z,{value:s,children:t},s))}),e.jsx(u,{label:"Route",placeholder:"Named route",value:j.route,onChange:s=>R({...j,route:s.target.value})}),e.jsx("div",{className:"flex items-center col-span-2",children:e.jsx(fe,{isSelected:j.is_active,onValueChange:s=>R({...j,is_active:s}),children:"Active"})}),e.jsx(u,{label:"Description",placeholder:"Component description",value:j.description,onChange:s=>R({...j,description:s.target.value}),className:"col-span-2"})]})}),e.jsxs(Z,{children:[e.jsx(d,{variant:"flat",onClick:()=>Y(!1),children:"Cancel"}),e.jsx(d,{color:"primary",onClick:xs,isLoading:O,children:re?"Update":"Create"})]})]})}),e.jsx(V,{isOpen:is,onClose:()=>ee(!1),size:"4xl",scrollBehavior:"inside",children:e.jsxs(W,{children:[e.jsx(K,{className:"flex flex-col gap-1",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-primary"}),"Manage Permissions - ",w==null?void 0:w.name]})}),e.jsxs(Q,{children:[e.jsxs("p",{className:"text-sm text-default-500 mb-4",children:["Select the permissions required to access this ",(qe=w==null?void 0:w.type)==null?void 0:qe.replace("_","-"),"."]}),e.jsxs("div",{className:"flex items-center justify-between mb-4 gap-4",children:[e.jsx(u,{placeholder:"Search permissions...",startContent:e.jsx(We,{className:"w-4 h-4 text-default-400"}),size:"sm",className:"max-w-xs",id:"permission-search",onValueChange:s=>{var t;(t=document.getElementById("permission-search"))==null||t.setAttribute("data-search",s.toLowerCase()),document.dispatchEvent(new CustomEvent("permission-search-change"))}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{size:"sm",variant:"flat",color:"primary",onPress:()=>k(p.map(s=>s.id)),children:"Select All"}),e.jsx(d,{size:"sm",variant:"flat",onPress:()=>k([]),children:"Clear All"})]})]}),e.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:Object.entries(Ts(p)).map(([s,t])=>{const a=t.permissions.map(c=>c.id),l=a.filter(c=>S.includes(c)).length,v=l===a.length,i=l>0&&l<a.length;return e.jsxs(ne,{className:"bg-default-50 dark:bg-default-100/10",children:[e.jsx(xe,{className:"py-2 px-4",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(De,{isSelected:v,isIndeterminate:i,onValueChange:c=>{k(c?P=>[...new Set([...P,...a])]:P=>P.filter(A=>!a.includes(A)))},size:"sm"}),e.jsx("span",{className:"font-semibold text-foreground",children:t.name})]}),e.jsxs(C,{size:"sm",variant:"flat",color:v?"success":i?"warning":"default",children:[l,"/",a.length]})]})}),e.jsx(ie,{className:"pt-0 pb-3 px-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:t.permissions.map(c=>e.jsxs("div",{className:`flex items-start gap-2 p-2 rounded-lg border transition-colors cursor-pointer ${S.includes(c.id)?"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800":"bg-default-100/50 dark:bg-default-50/10 border-transparent hover:border-default-300"}`,onClick:()=>{S.includes(c.id)?k(S.filter(P=>P!==c.id)):k([...S,c.id])},children:[e.jsx(De,{isSelected:S.includes(c.id),onValueChange:P=>{k(P?[...S,c.id]:S.filter(A=>A!==c.id))},size:"sm",className:"mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:c.displayName}),e.jsx("p",{className:"text-xs text-default-400 truncate",children:c.description})]})]},c.id))})})]},s)})})]}),e.jsxs(Z,{children:[e.jsx(d,{variant:"flat",onClick:()=>ee(!1),children:"Cancel"}),e.jsxs(d,{color:"primary",onClick:fs,isLoading:O,children:["Save Permissions (",S.length,")"]})]})]})}),e.jsx(V,{isOpen:ls,onClose:()=>se(!1),children:e.jsxs(W,{children:[e.jsx(K,{className:"text-danger",children:"Confirm Delete"}),e.jsxs(Q,{children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("strong",{children:x==null?void 0:x.name}),"?"]}),(x==null?void 0:x.type)==="module"&&e.jsx("p",{className:"text-sm text-warning mt-2",children:"This will also delete all sub-modules and components within this module."}),(x==null?void 0:x.type)==="sub_module"&&e.jsx("p",{className:"text-sm text-warning mt-2",children:"This will also delete all components within this sub-module."})]}),e.jsxs(Z,{children:[e.jsx(d,{variant:"flat",onClick:()=>se(!1),children:"Cancel"}),e.jsx(d,{color:"danger",onClick:gs,isLoading:O,children:"Delete"})]})]})})]})};export{gt as default};
