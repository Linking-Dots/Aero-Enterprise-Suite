import{a as t,j as e,t as Ye,b as Te,Q as et,S as he,F as tt}from"./app-iK4ccFYP.js";import{r as n,n as Ne,g as _e}from"./react-core-DDvupgOx.js";import{h as ce,q as Oe,B as P,r as Pe,b as pe,e as at,c as rt,o as st,A as lt}from"./App--E8cOTcz.js";import{G as it}from"./logo-D47JMLDj.js";import{P as nt}from"./PageHeader-BJuZnBzy.js";import{S as ot}from"./StatsCards-BveJq6Wu.js";import{u as Ce,Z as ke,B as me,T as _,o as ge,p as dt,h as C,a6 as ct,j as A,i as L,I as oe,M as E,m as de,q as mt,r as ut,a as Re,G as ht,F as pt,f as gt}from"./mui-libraries-CyFs7uQU.js";import{F as ze}from"./EllipsisVerticalIcon-BX6PWMxg.js";import{F as ve}from"./UserIcon-D16nn9o_.js";import{F as Me}from"./PencilIcon-Dhfhztfv.js";import{F as bt}from"./EnvelopeIcon-D6nUSkik.js";import{k as ft,m as vt,n as xt,o as wt,q as yt,v as Nt,N as be,G as qe,O as xe,b as J,P as we,Q as Y,S as ye,h as _t,L as Ve,s as X,g as G,e as Q,i as Pt,D as Ct,l as ae,f as K}from"./ui-libraries-CxFzkmxb.js";import{C as kt}from"./Clear-Dn6tl6Dm.js";import{G as Rt}from"./GlassDialog-CEoz5u2o.js";import{P as St}from"./PhotoCamera-D7_ohxA6.js";import{L as Ft}from"./LoadingButton-ZmUpomBU.js";import{a as re}from"./utilities-DT6SRl8s.js";import{F as Se}from"./CheckCircleIcon-CJUGb5Jf.js";import{F as Fe}from"./XCircleIcon-DJR5_Dv7.js";import{a as fe}from"./ShieldCheckIcon-C7bFKizx.js";import{F as jt}from"./TrophyIcon-B2aWmaK5.js";import{F as At}from"./UserPlusIcon-CWwrPPyK.js";import{F as je}from"./ChartBarIcon-Yugn57JF.js";import{F as It}from"./ChartPieIcon-CSN3abkn.js";import{F as Ut}from"./ExclamationTriangleIcon-C_gcLnRy.js";import{F as Dt}from"./TableCellsIcon-C2_Qfojp.js";import{F as $t}from"./AdjustmentsHorizontalIcon-DKS_UuIh.js";import{F as Lt,a as Et}from"./LockOpenIcon-CK6B9L1F.js";import{F as Tt}from"./LockClosedIcon-t8YZGfxe.js";function Ot({title:o,titleId:k,...y},b){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:b,"aria-labelledby":k},y),o?n.createElement("title",{id:k},o):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Ae=n.forwardRef(Ot),zt=({allUsers:o,roles:k,isMobile:y,isTablet:b,setUsers:T,pagination:N,onPageChange:w,onRowsPerPageChange:F,totalUsers:I=0,onEdit:B,loading:m=!1,updateUserOptimized:ee,deleteUserOptimized:d,toggleUserStatusOptimized:M,updateUserRolesOptimized:q})=>{const[U,W]=n.useState({});Ce();const u=(r,g,f)=>{W(i=>({...i,[`${r}-${g}`]:f}))},O=(r,g)=>U[`${r}-${g}`]||!1;async function V(r,g){u(r,"role",!0);const f=new Promise(async(i,v)=>{try{const x=await axios.post(route("user.updateRole",{id:r}),{roles:g});x.status===200&&(q&&q(r,g),i([x.data.message||"Role updated successfully"]))}catch(x){x.response?.status===422?v(x.response.data.errors||["Failed to update user role."]):v(["An unexpected error occurred. Please try again later."])}finally{u(r,"role",!1)}});return P.promise(f,{pending:"Updating employee role...",success:{render({data:i}){return i.join(", ")}},error:{render({data:i}){return Array.isArray(i)?i.join(", "):i}}}),f}const H=n.useMemo(()=>{const r=[{name:"#",uid:"sl"},{name:"USER",uid:"user"},{name:"EMAIL",uid:"email"},{name:"DEPARTMENT",uid:"department"},{name:"STATUS",uid:"status"},{name:"ROLES",uid:"roles"},{name:"ACTIONS",uid:"actions"}];return!y&&!b?r.splice(3,0,{name:"PHONE",uid:"phone"}):y&&r.splice(r.findIndex(g=>g.uid==="department"),1),r},[y,b]),$=async(r,g)=>{if(!O(r,"status")){u(r,"status",!0);try{M?(M(r,!g),P.success(`User status ${g?"deactivated":"activated"} successfully`)):T&&(T(f=>f.map(i=>i.id===r?{...i,active:!g}:i)),P.success(`User status ${g?"deactivated":"activated"} successfully`))}catch(f){console.error("Error toggling user status:",f),P.error("Failed to update user status")}finally{u(r,"status",!1)}}},Z=(r,g,f)=>{const i=r[g];switch(g){case"sl":const s=(N?.currentPage&&N?.perPage?Number((N.currentPage-1)*N.perPage):0)+(typeof f=="number"?f:0)+1;return e("div",{className:"flex items-center justify-center",children:e("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e("span",{className:"text-sm font-semibold text-foreground",children:s})})});case"user":return e(Ve,{className:"w-fit max-w-full",avatarProps:{radius:"lg",size:"sm",src:r?.profile_image_url||r?.profile_image,showFallback:!0,name:r?.name||"Unnamed User",isBordered:!0},name:e("span",{className:"text-sm font-medium whitespace-nowrap",children:r?.name||"Unnamed User"})});case"email":return t("div",{className:"flex items-center",children:[e(bt,{className:"w-4 h-4 text-default-400 mr-2"}),e("span",{className:"text-sm",children:r.email})]});case"phone":return t("div",{className:"flex items-center",children:[e(Oe,{className:"w-4 h-4 text-default-400 mr-2"}),e("span",{className:"text-sm",children:r.phone||"N/A"})]});case"department":return t("div",{className:"flex items-center",children:[e(ce,{className:"w-4 h-4 text-default-400 mr-2"}),e("span",{className:"text-sm",children:r?.department||"N/A"})]});case"status":return t("div",{className:"flex items-center justify-center",children:[e(_t,{size:"sm",color:r.active?"success":"danger",isSelected:r.active,isDisabled:O(r.id,"status"),startContent:O(r.id,"status")?e(be,{size:"sm"}):null,onChange:()=>$(r.id,r.active),classNames:{wrapper:"group-data-[selected=true]:bg-success-500 group-data-[selected=false]:bg-danger-500"}}),e("span",{className:"ml-2 text-xs",children:r.active?"Active":"Inactive"})]});case"roles":const R=r.roles?.map(p=>typeof p=="object"&&p!==null?p.name:p)||[],h=new Set(R),D=Array.from(h).join(", ")||"No Roles";return e("div",{className:"flex items-center",children:t(ye,{isDisabled:O(r.id,"role"),className:"max-w-[220px]",children:[e(xe,{children:e(J,{className:"capitalize",variant:"bordered",size:"sm",startContent:O(r.id,"role")?e(be,{size:"sm"}):null,children:D})}),e(we,{disallowEmptySelection:!1,"aria-label":"Multiple selection example",closeOnSelect:!1,selectedKeys:h,selectionMode:"multiple",variant:"flat",onSelectionChange:p=>{const z=Array.from(p);V(r.id,z)},children:(k||[]).map(p=>e(Y,{children:typeof p=="object"&&p!==null?p.name:p},typeof p=="object"&&p!==null?p.name:p))})]})});case"actions":return e("div",{className:"flex justify-center items-center",children:t(ye,{children:[e(xe,{children:e(J,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",children:e(ze,{className:"w-4 h-4"})})}),t(we,{"aria-label":"User Actions",children:[e(Y,{textValue:"View Profile",href:route("profile",{user:r.id}),as:Ye,className:"text-blue-500",startContent:e(ve,{className:"w-4 h-4"}),children:"View Profile"}),e(Y,{textValue:"Edit User",onPress:p=>{p.preventDefault(),B&&B(r)},className:"text-amber-500",startContent:e(Me,{className:"w-4 h-4"}),children:"Edit"})]})]})});default:return i}};return t("div",{className:"w-full overflow-hidden flex flex-col border border-white/10 rounded-lg",style:{maxHeight:"calc(100vh - 200px)"},children:[e("div",{className:"overflow-auto flex-grow",children:t(ft,{"aria-label":"Users table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs sticky top-0 z-10",td:"border-b border-white/5 py-3",table:"border-collapse",thead:"bg-white/5",tr:"hover:bg-white/5"},children:[e(vt,{columns:H,children:r=>e(xt,{align:r.uid==="actions"||r.uid==="sl"?"center":"start",width:r.uid==="sl"?60:void 0,children:r.name},r.uid)}),e(wt,{items:o||[],emptyContent:"No users found",loadingContent:e(be,{}),isLoading:m,children:(r,g)=>{const f=o?o.findIndex(i=>i.id===r.id):g;return e(yt,{children:i=>e(Nt,{children:Z(r,i,f)})},r.id)}})]})}),!o||!I||m?null:t("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10 bg-white/5 backdrop-blur-md",children:[t("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(N.currentPage-1)*N.perPage+1," to ",Math.min(N.currentPage*N.perPage,I)," of ",I," users"]}),e(qe,{total:Math.ceil(I/N.perPage),initialPage:N.currentPage,page:N.currentPage,onChange:w,size:y?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]})]})};var se={},Ie;function Mt(){if(Ie)return se;Ie=1;var o=ke();Object.defineProperty(se,"__esModule",{value:!0}),se.default=void 0;var k=o(Pe()),y=Ne();return se.default=(0,k.default)((0,y.jsx)("path",{d:"M2 17h20v2H2zm1.15-4.05L4 11.47l.85 1.48 1.3-.75-.85-1.48H7v-1.5H5.3l.85-1.47L4.85 7 4 8.47 3.15 7l-1.3.75.85 1.47H1v1.5h1.7l-.85 1.48zm6.7-.75 1.3.75.85-1.48.85 1.48 1.3-.75-.85-1.48H15v-1.5h-1.7l.85-1.47-1.3-.75L12 8.47 11.15 7l-1.3.75.85 1.47H9v1.5h1.7zM23 9.22h-1.7l.85-1.47-1.3-.75L20 8.47 19.15 7l-1.3.75.85 1.47H17v1.5h1.7l-.85 1.48 1.3.75.85-1.48.85 1.48 1.3-.75-.85-1.48H23z"}),"Password"),se}var qt=Mt();const Vt=_e(qt);var le={},Ue;function Bt(){if(Ue)return le;Ue=1;var o=ke();Object.defineProperty(le,"__esModule",{value:!0}),le.default=void 0;var k=o(Pe()),y=Ne();return le.default=(0,k.default)((0,y.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),le}var Wt=Bt();const De=_e(Wt);var ie={},$e;function Ht(){if($e)return ie;$e=1;var o=ke();Object.defineProperty(ie,"__esModule",{value:!0}),ie.default=void 0;var k=o(Pe()),y=Ne();return ie.default=(0,k.default)((0,y.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),ie}var Gt=Ht();const Le=_e(Gt),Ee=({user:o,allUsers:k,departments:y,designations:b,setUsers:T,open:N,closeModal:w,editMode:F=!1})=>{const[I,B]=n.useState(!1),[m,ee]=n.useState({id:o?.id||"",name:o?.name||"",user_name:o?.user_name||"",gender:o?.gender||"",birthday:o?.birthday||"",date_of_joining:o?.date_of_joining||"",address:o?.address||"",employee_id:o?.employee_id||"",phone:o?.phone||"",email:o?.email||"",department_id:o?.department_id||"",designation_id:o?.designation_id||"",report_to:o?.report_to||"",password:"",confirmPassword:"",roles:o?.roles||[]}),[d,M]=n.useState({}),[q,U]=n.useState(!1),[W,u]=n.useState(!1),[O,V]=n.useState(o?.profile_image_url||o?.profile_image||null),[H,$]=n.useState(null),[Z,j]=n.useState(k),r=Ce();n.useEffect(()=>{(o?.profile_image_url||o?.profile_image)&&V(o.profile_image_url||o.profile_image)},[o]);const g=async s=>{s.preventDefault(),U(!0);const R=new FormData;if(Object.keys(m).forEach(h=>{h==="roles"&&Array.isArray(m[h])?m[h].forEach((D,p)=>{R.append(`roles[${p}]`,D)}):m[h]!==null&&m[h]!==void 0&&R.append(h,m[h])}),H){const h=H.type;if(["image/jpeg","image/jpg","image/png"].includes(h))R.append("profile_image",H);else{P.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}),U(!1);return}}try{const h=F?route("updateUser",{id:o.id}):route("addUser"),D=F?"put":"post",p=await axios[D](h,R);p.status===200&&(T&&T(F?z=>z.map(te=>te.id===p.data.user.id?p.data.user:te):z=>[...z,p.data.user]),P.success(p.data.messages?.length>0?p.data.messages.join(" "):`User ${F?"updated":"added"} successfully`,{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}),w())}catch(h){U(!1),f(h)}finally{U(!1)}},f=s=>{s.response?s.response.status===422?(M(s.response.data.errors||{}),P.error(s.response.data.error||`Failed to ${F?"update":"add"} user.`,{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}})):P.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}):s.request?P.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}):P.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}})},i=s=>{const R=s.target.files[0];if(R){const h=URL.createObjectURL(R);V(h),$(R)}},v=(s,R)=>{ee(h=>({...h,[s]:R})),d[s]&&M(h=>{const D={...h};return delete D[s],D})},x=()=>{B(!I)};return t(Rt,{open:N,onClose:w,fullWidth:!0,maxWidth:"md",sx:{"& .MuiPaper-root":{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:r.glassCard.background,border:r.glassCard.border,borderRadius:"16px",color:r.palette.text.primary,boxShadow:r.glassCard.boxShadow}},children:[e(dt,{sx:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",pb:2},children:t(me,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e(_,{variant:"h6",component:"div",sx:{fontWeight:600},children:F?"Edit User":"Add New User"}),e(ge,{"aria-label":"close",onClick:w,sx:{color:r.palette.grey[500],"&:hover":{color:r.palette.primary.main}},children:e(kt,{})})]})}),e(mt,{sx:{pt:3},children:e("form",{onSubmit:g,children:t(C,{container:!0,spacing:3,children:[e(C,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",mb:2},children:t(me,{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),sx:{position:"relative"},children:[e(ct,{src:O,alt:"Profile",sx:{width:120,height:120,border:"4px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",filter:W?"brightness(70%)":"brightness(100%)",transition:"all 0.3s ease"}}),t(me,{component:"label",htmlFor:"icon-button-file",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:W?1:0,transition:"opacity 0.3s ease",cursor:"pointer"},children:[e("input",{accept:"image/*",id:"icon-button-file",type:"file",style:{display:"none"},onChange:i}),e(St,{sx:{color:"white",fontSize:32}})]})]})}),e(C,{item:!0,xs:12,md:6,children:e(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e(L,{label:"Full Name",value:m.name,onChange:s=>v("name",s.target.value),error:!!d.name,helperText:d.name,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}},required:!0})})}),e(C,{item:!0,xs:12,md:6,children:e(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e(L,{label:"Username",value:m.user_name,onChange:s=>v("user_name",s.target.value),error:!!d.user_name,helperText:d.user_name,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}},required:!0})})}),e(C,{item:!0,xs:12,md:6,children:e(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e(L,{label:"Email",type:"email",value:m.email,onChange:s=>v("email",s.target.value),error:!!d.email,helperText:d.email,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}},required:!0})})}),e(C,{item:!0,xs:12,md:6,children:e(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e(L,{label:"Phone",value:m.phone,onChange:s=>v("phone",s.target.value),error:!!d.phone,helperText:d.phone,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}}})})}),e(C,{item:!0,xs:12,md:6,children:t(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(oe,{id:"department-label",sx:{color:r.palette.text.secondary},children:"Department"}),t(X,{labelId:"department-label",value:m.department_id,onChange:s=>v("department_id",s.target.value),label:"Department",error:!!d.department_id,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(E,{value:"",children:e("em",{children:"None"})}),y?.map(s=>e(E,{value:s.id,children:s.name},s.id))]}),d.department_id&&e(de,{error:!0,children:d.department_id})]})}),e(C,{item:!0,xs:12,md:6,children:t(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(oe,{id:"designation-label",sx:{color:r.palette.text.secondary},children:"Designation"}),t(X,{labelId:"designation-label",value:m.designation_id,onChange:s=>v("designation_id",s.target.value),label:"Designation",error:!!d.designation_id,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(E,{value:"",children:e("em",{children:"None"})}),b?.map(s=>e(E,{value:s.id,children:s.name},s.id))]}),d.designation_id&&e(de,{error:!0,children:d.designation_id})]})}),e(C,{item:!0,xs:12,md:6,children:t(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(oe,{id:"gender-label",sx:{color:r.palette.text.secondary},children:"Gender"}),t(X,{labelId:"gender-label",value:m.gender,onChange:s=>v("gender",s.target.value),label:"Gender",error:!!d.gender,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(E,{value:"",children:e("em",{children:"Select Gender"})}),e(E,{value:"male",children:"Male"}),e(E,{value:"female",children:"Female"}),e(E,{value:"other",children:"Other"})]}),d.gender&&e(de,{error:!0,children:d.gender})]})}),e(C,{item:!0,xs:12,md:6,children:e(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e(L,{label:"Employee ID",value:m.employee_id,onChange:s=>v("employee_id",s.target.value),error:!!d.employee_id,helperText:d.employee_id,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}}})})}),e(C,{item:!0,xs:12,md:6,children:e(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e(L,{label:"Date of Birth",type:"date",value:m.birthday,onChange:s=>v("birthday",s.target.value),error:!!d.birthday,helperText:d.birthday,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{shrink:!0,sx:{color:r.palette.text.secondary}}})})}),e(C,{item:!0,xs:12,md:6,children:e(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e(L,{label:"Date of Joining",type:"date",value:m.date_of_joining,onChange:s=>v("date_of_joining",s.target.value),error:!!d.date_of_joining,helperText:d.date_of_joining,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{shrink:!0,sx:{color:r.palette.text.secondary}}})})}),e(C,{item:!0,xs:12,md:6,children:t(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(oe,{id:"report-to-label",sx:{color:r.palette.text.secondary},children:"Reports To"}),t(X,{labelId:"report-to-label",value:m.report_to,onChange:s=>v("report_to",s.target.value),label:"Reports To",error:!!d.report_to,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(E,{value:"",children:e("em",{children:"None"})}),Z?.filter(s=>s.id!==m.id).map(s=>e(E,{value:s.id,children:s.name},s.id))]}),d.report_to&&e(de,{error:!0,children:d.report_to})]})}),e(C,{item:!0,xs:12,children:e(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e(L,{label:"Address",multiline:!0,rows:3,value:m.address,onChange:s=>v("address",s.target.value),error:!!d.address,helperText:d.address,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}}})})}),!F&&t(Te,{children:[e(C,{item:!0,xs:12,md:6,children:e(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e(L,{label:"Password",type:I?"text":"password",value:m.password,onChange:s=>v("password",s.target.value),error:!!d.password,helperText:d.password,required:!F,InputProps:{endAdornment:e(ge,{"aria-label":"toggle password visibility",onClick:x,edge:"end",children:I?e(De,{}):e(Le,{})}),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}}})})}),e(C,{item:!0,xs:12,md:6,children:e(A,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e(L,{label:"Confirm Password",type:I?"text":"password",value:m.confirmPassword,onChange:s=>v("confirmPassword",s.target.value),error:!!d.confirmPassword,helperText:d.confirmPassword||(m.password!==m.confirmPassword&&m.confirmPassword?"Passwords do not match":""),required:!F,InputProps:{endAdornment:e(ge,{"aria-label":"toggle password visibility",onClick:x,edge:"end",children:I?e(De,{}):e(Le,{})}),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}}})})})]})]})})}),t(ut,{sx:{justifyContent:"space-between",p:3,borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[e(Button,{onClick:w,variant:"bordered",color:"default",size:"lg",className:"bg-white/5 hover:bg-white/10 border border-white/10",children:"Cancel"}),e(Ft,{onClick:g,loading:q,loadingPosition:"start",startIcon:e(Vt,{}),variant:"contained",sx:{background:"linear-gradient(45deg, #3a7bd5 0%, #2456bd 100%)",boxShadow:"0 4px 20px 0 rgba(58, 123, 213, 0.4)","&:hover":{background:"linear-gradient(45deg, #2456bd 0%, #1a3c8a 100%)"}},children:F?"Update User":"Add User"})]})]})},Qt=({title:o,roles:k})=>{const y=Ce(),b=Re(y.breakpoints.down("sm")),T=Re(y.breakpoints.down("md")),[N,w]=n.useState([]),[F,I]=n.useState(!0),[B,m]=n.useState(null),[ee,d]=n.useState(0),[M,q]=n.useState(1),[U,W]=n.useState(null),[u,O]=n.useState({search:"",role:"all",status:"all",department:"all"}),[V,H]=n.useState(!1),[$,Z]=n.useState("table"),[j,r]=n.useState({currentPage:1,perPage:10,total:N.length}),[g,f]=n.useState({}),[i,v]=n.useState({overview:{total_users:0,active_users:0,inactive_users:0,deleted_users:0,total_roles:0,total_departments:0},distribution:{by_role:[],by_department:[],by_status:[]},activity:{recent_registrations:{new_users_30_days:0,new_users_90_days:0,new_users_year:0,recently_active:0},user_growth_rate:0,current_month_registrations:0},security:{access_metrics:{users_with_roles:0,users_without_roles:0,admin_users:0,regular_users:0},role_distribution:[]},health:{status_ratio:{active_percentage:0,inactive_percentage:0,deleted_percentage:0},system_metrics:{user_activation_rate:0,role_coverage:0,department_coverage:0}},quick_metrics:{total_users:0,active_ratio:0,role_diversity:0,department_diversity:0,recent_activity:0,system_health_score:0}}),x=n.useMemo(()=>({data:N,total:ee,current_page:j.currentPage,per_page:j.perPage,last_page:M}),[N,ee,j.currentPage,j.perPage,M]),s=n.useCallback(async()=>{try{const{data:a}=await re.get(route("users.stats"));a.stats&&v(a.stats)}catch(a){console.error("Error fetching user stats:",a)}},[]),R=n.useCallback(async()=>{I(!0);try{const a=await re.get(route("users.paginate"),{params:{page:j.currentPage,perPage:j.perPage,search:u.search||void 0,role:u.role!=="all"?u.role:void 0,status:u.status!=="all"?u.status:void 0,department:u.department!=="all"?u.department:void 0}});if(a.status===200){const{users:l}=a.data;l.data&&Array.isArray(l.data)?(w(l.data),d(l.total||l.data.length),q(l.last_page||1)):Array.isArray(l)?(w(l),d(l.length),q(1)):(console.error("Unexpected users data format:",l),w([]),d(0),q(1))}}catch(a){console.error("Error fetching users:",a),P.error("Failed to load users data"),w([])}finally{I(!1)}},[u,j.currentPage,j.perPage]);n.useEffect(()=>{R()},[R]),n.useEffect(()=>{s();const a=setInterval(s,6e4);return()=>clearInterval(a)},[s]);const h=(a,l)=>{O(c=>({...c,[a]:l})),r(c=>({...c,currentPage:1}))},D=a=>{r(l=>({...l,currentPage:a})),window.scrollTo({top:0,behavior:"smooth"})},p=a=>{r(l=>({...l,currentPage:1,perPage:a}))},z=n.useCallback((a,l=null)=>{W(a),m(l)},[]),te=n.useCallback(()=>{W(null),m(null)},[]),ue=n.useCallback(a=>{w(a)},[]),Be=n.useCallback(a=>{w(l=>l.map(c=>c.id===a.id?{...c,...a}:c))},[]),We=n.useCallback(a=>{w(l=>l.filter(c=>c.id!==a)),s()},[s]),He=n.useCallback((a,l)=>{w(c=>c.map(S=>S.id===a?{...S,active:l}:S)),s()},[s]),Ge=n.useCallback((a,l)=>{w(c=>c.map(S=>S.id===a?{...S,roles:l}:S)),s()},[s]),Qe=n.useCallback(async(a,l)=>{f(c=>({...c,[a]:!0}));try{(await re.post(route("users.device.toggle"),{user_id:a,enabled:l})).status===200&&(w(S=>S.map(ne=>ne.id===a?{...ne,single_device_login:l,active_device:l?ne.active_device:null}:ne)),P.success(l?"Single device login enabled for user":"Single device login disabled for user"))}catch(c){console.error("Error toggling single device login:",c),P.error("Failed to update device settings")}finally{f(c=>({...c,[a]:!1}))}},[]),Je=n.useCallback(async a=>{f(l=>({...l,[a]:!0}));try{(await re.post(route("users.device.reset"),{user_id:a})).status===200&&(w(c=>c.map(S=>S.id===a?{...S,active_device:null}:S)),P.success("User device has been reset"))}catch(l){console.error("Error resetting user device:",l),P.error("Failed to reset user device")}finally{f(l=>({...l,[a]:!1}))}},[]);n.useCallback(async a=>{try{const l=await re.get(route("users.device.list",{user:a}));if(l.status===200){const c=l.data.devices;P.info(`User has ${c.length} device record(s)`)}}catch(l){console.error("Error fetching user devices:",l),P.error("Failed to fetch device information")}},[]);const Ze=({user:a,index:l})=>e(G,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>he.visit(route("profile",{user:a.id})),children:t(Q,{className:"p-4 flex flex-col h-full",children:[t("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e(Ve,{avatarProps:{radius:"lg",src:a?.profile_image_url||a?.profile_image,size:"md",fallback:e(ve,{className:"w-5 h-5"})},classNames:{name:"font-semibold text-foreground text-sm",description:"text-default-500 text-xs"}}),e("div",{className:"flex-1 min-w-0",children:t("div",{className:"flex items-start justify-between",children:[t("div",{children:[e("h3",{className:"font-semibold text-foreground text-sm line-clamp-1",children:a.name}),e("p",{className:"text-default-500 text-xs",children:a.email})]}),t("div",{className:"flex items-center gap-1",children:[e(J,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:c=>{c.stopPropagation(),he.visit(route("profile",{user:a.id}))},children:e(Me,{className:"w-4 h-4"})}),t(ye,{children:[e(xe,{children:e(J,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:c=>c.stopPropagation(),children:e(ze,{className:"w-4 h-4"})})}),t(we,{"aria-label":"Device Actions",children:[e(Y,{description:a.single_device_login?"Disable device restriction":"Enable device restriction",startContent:a.single_device_login?e(Lt,{className:"w-4 h-4"}):e(Tt,{className:"w-4 h-4"}),onPress:c=>{c.stopPropagation(),Qe(a.id,!a.single_device_login)},isDisabled:g[a.id],children:a.single_device_login?"Disable Device Lock":"Enable Device Lock"},"toggle-device"),a.single_device_login&&a.active_device&&e(Y,{description:"Allow login from new device",startContent:e(tt,{className:"w-4 h-4"}),color:"warning",onPress:c=>{c.stopPropagation(),Je(a.id)},isDisabled:g[a.id],children:"Reset Device"},"reset-device"),e(Y,{description:"View device history",startContent:e(Et,{className:"w-4 h-4"}),onPress:c=>{c.stopPropagation(),he.visit(route("users.device.show",{user:a.id}))},children:"View Devices"},"view-devices")]})]})]})]})})]}),t("div",{className:"flex-1 flex flex-col gap-3",children:[a.phone&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(Oe,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs line-clamp-1",children:a.phone})]}),(a.department||a.department_id)&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(ce,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs",children:typeof a.department=="string"?a.department:"N/A"})]})]}),t("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[e(K,{size:"sm",variant:a.active?"solid":"bordered",color:a.active?"success":"danger",className:"text-xs",startContent:a.active?e(Se,{className:"w-3 h-3"}):e(Fe,{className:"w-3 h-3"}),children:a.active?"Active":"Inactive"}),a.roles?.map((c,S)=>e(K,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e(ve,{className:"w-3 h-3"}),children:c},S)),a.single_device_login&&e(K,{size:"sm",variant:"flat",color:a.active_device?"warning":"default",className:"text-xs",startContent:e(fe,{className:"w-3 h-3"}),children:a.active_device?"Device Locked":"Device Free"})]})]})}),Ke=n.useMemo(()=>[{title:"Total Users",value:i?.overview?.total_users||0,icon:e(pe,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All users"},{title:"Active Users",value:i?.overview?.active_users||0,icon:e(Se,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${i?.health?.status_ratio?.active_percentage||0}% Active`},{title:"Inactive Users",value:i?.overview?.inactive_users||0,icon:e(Fe,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:`${i?.health?.status_ratio?.inactive_percentage||0}% Inactive`},{title:"Total Roles",value:i?.overview?.total_roles||0,icon:e(fe,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Role diversity"},{title:"Role Coverage",value:`${i?.health?.system_metrics?.role_coverage||0}%`,icon:e(jt,{className:"w-5 h-5"}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Users with roles"},{title:"Recent Activity",value:i?.activity?.recent_registrations?.recently_active||0,icon:e(at,{className:"w-5 h-5"}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Active last 7 days"},{title:"System Health",value:`${i?.quick_metrics?.system_health_score||0}%`,icon:e(Ae,{className:"w-5 h-5"}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Overall health"},{title:"Departments",value:i?.overview?.total_departments||0,icon:e(ce,{className:"w-5 h-5"}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Department diversity"}],[i]),Xe=n.useMemo(()=>{const a=[];return a.push({label:b?"Add":"Add User",icon:e(At,{className:"w-4 h-4"}),onPress:()=>z("add"),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}),a.push({label:b?"":"Export",isIconOnly:b,icon:e(je,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),a},[b,z]);return t(Te,{children:[e(et,{title:o}),U==="add"&&e(Ee,{user:null,open:U==="add",setUsers:ue,closeModal:te,editMode:!1}),U==="edit"&&B&&e(Ee,{user:B,open:U==="edit",setUsers:ue,closeModal:te,editMode:!0}),e(me,{sx:{display:"flex",justifyContent:"center",p:2},children:e(ht,{in:!0,children:e(it,{children:e(nt,{title:"Users Management",subtitle:"Manage users accounts and roles",icon:e(pe,{className:"w-8 h-8"}),actionButtons:Xe,children:t("div",{className:"p-4 sm:p-6",children:[e(ot,{stats:Ke,className:"mb-6"}),t("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6",children:[e(G,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(Q,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e(It,{className:"w-5 h-5 text-purple-400"})}),t("div",{children:[e(_,{variant:"h6",className:"font-semibold text-foreground",children:"Role Distribution"}),e(_,{variant:"caption",className:"text-default-500",children:"User roles breakdown"})]})]}),e("div",{className:"space-y-3",children:i?.distribution?.by_role?.slice(0,5).map((a,l)=>t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-purple-400 to-pink-400"}),e("span",{className:"text-sm text-foreground truncate",children:a.name})]}),t("div",{className:"text-right",children:[e("span",{className:"text-sm font-medium text-foreground",children:a.count}),t("span",{className:"text-xs text-default-500 ml-1",children:["(",a.percentage,"%)"]})]})]},l))})]})}),e(G,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(Q,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e(ce,{className:"w-5 h-5 text-blue-400"})}),t("div",{children:[e(_,{variant:"h6",className:"font-semibold text-foreground",children:"Department Distribution"}),e(_,{variant:"caption",className:"text-default-500",children:"Users by department"})]})]}),e("div",{className:"space-y-3",children:i?.distribution?.by_department?.slice(0,5).map((a,l)=>t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-blue-400 to-cyan-400"}),e("span",{className:"text-sm text-foreground truncate",children:a.name})]}),t("div",{className:"text-right",children:[e("span",{className:"text-sm font-medium text-foreground",children:a.count}),t("span",{className:"text-xs text-default-500 ml-1",children:["(",a.percentage,"%)"]})]})]},l))})]})}),e(G,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(Q,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-red-500/20 rounded-lg",children:e(fe,{className:"w-5 h-5 text-red-400"})}),t("div",{children:[e(_,{variant:"h6",className:"font-semibold text-foreground",children:"Security Metrics"}),e(_,{variant:"caption",className:"text-default-500",children:"Access control overview"})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Users with Roles"}),e("span",{className:"text-sm font-medium text-green-400",children:i?.security?.access_metrics?.users_with_roles||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Users without Roles"}),e("span",{className:"text-sm font-medium text-red-400",children:i?.security?.access_metrics?.users_without_roles||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Admin Users"}),e("span",{className:"text-sm font-medium text-orange-400",children:i?.security?.access_metrics?.admin_users||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Role Coverage"}),t("span",{className:"text-sm font-medium text-blue-400",children:[i?.health?.system_metrics?.role_coverage||0,"%"]})]})]})]})}),e(G,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(Q,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e(je,{className:"w-5 h-5 text-green-400"})}),t("div",{children:[e(_,{variant:"h6",className:"font-semibold text-foreground",children:"Activity Trends"}),e(_,{variant:"caption",className:"text-default-500",children:"Recent user activity"})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Recently Active"}),e("span",{className:"text-sm font-medium text-green-400",children:i?.activity?.recent_registrations?.recently_active||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"New (30 days)"}),e("span",{className:"text-sm font-medium text-blue-400",children:i?.activity?.recent_registrations?.new_users_30_days||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"New (90 days)"}),e("span",{className:"text-sm font-medium text-cyan-400",children:i?.activity?.recent_registrations?.new_users_90_days||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Growth Rate"}),t("span",{className:"text-sm font-medium text-purple-400",children:[i?.activity?.user_growth_rate||0,"%"]})]})]})]})}),e(G,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(Q,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-teal-500/20 rounded-lg",children:e(Ae,{className:"w-5 h-5 text-teal-400"})}),t("div",{children:[e(_,{variant:"h6",className:"font-semibold text-foreground",children:"System Health"}),e(_,{variant:"caption",className:"text-default-500",children:"Overall system metrics"})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Health Score"}),t("span",{className:"text-sm font-medium text-teal-400",children:[i?.quick_metrics?.system_health_score||0,"%"]})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Activation Rate"}),t("span",{className:"text-sm font-medium text-green-400",children:[i?.health?.system_metrics?.user_activation_rate||0,"%"]})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Dept. Coverage"}),t("span",{className:"text-sm font-medium text-blue-400",children:[i?.health?.system_metrics?.department_coverage||0,"%"]})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Total Departments"}),e("span",{className:"text-sm font-medium text-purple-400",children:i?.overview?.total_departments||0})]})]})]})}),e(G,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(Q,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:e(Ut,{className:"w-5 h-5 text-yellow-400"})}),t("div",{children:[e(_,{variant:"h6",className:"font-semibold text-foreground",children:"Status Breakdown"}),e(_,{variant:"caption",className:"text-default-500",children:"User status distribution"})]})]}),e("div",{className:"space-y-3",children:i?.distribution?.by_status?.map((a,l)=>t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-2",children:[e("div",{className:`w-3 h-3 rounded-full ${a.name==="Active"?"bg-green-400":a.name==="Inactive"?"bg-red-400":"bg-gray-400"}`}),e("span",{className:"text-sm text-foreground",children:a.name})]}),t("div",{className:"text-right",children:[e("span",{className:"text-sm font-medium text-foreground",children:a.count}),t("span",{className:"text-xs text-default-500 ml-1",children:["(",a.percentage,"%)"]})]})]},l))})]})})]}),t("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(Pt,{label:"Search Users",variant:"bordered",placeholder:"Search by name, email or phone...",value:u.search,onValueChange:a=>h("search",a),startContent:e(rt,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:b?"sm":"md"})}),t("div",{className:"flex gap-2 items-end",children:[t(Ct,{variant:"bordered",className:"bg-white/5",children:[t(J,{isIconOnly:b,color:$==="table"?"primary":"default",onPress:()=>Z("table"),className:$==="table"?"bg-blue-500/20":"",children:[e(Dt,{className:"w-4 h-4"}),!b&&e("span",{className:"ml-1",children:"Table"})]}),t(J,{isIconOnly:b,color:$==="grid"?"primary":"default",onPress:()=>Z("grid"),className:$==="grid"?"bg-blue-500/20":"",children:[e(st,{className:"w-4 h-4"}),!b&&e("span",{className:"ml-1",children:"Grid"})]})]}),t(J,{isIconOnly:b,variant:"bordered",onPress:()=>H(!V),className:V?"bg-purple-500/20":"bg-white/5",children:[e($t,{className:"w-4 h-4"}),!b&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),V&&e(pt,{in:!0,timeout:300,children:t("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t(X,{label:"Status",variant:"bordered",selectedKeys:u.status!=="all"?[u.status]:[],onSelectionChange:a=>{const l=Array.from(a)[0]||"all";h("status",l)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(ae,{value:"all",children:"All Statuses"},"all"),e(ae,{value:"active",children:"Active Only"},"active"),e(ae,{value:"inactive",children:"Inactive Only"},"inactive")]}),t(X,{label:"Role",variant:"bordered",selectedKeys:u.role!=="all"?[u.role]:[],onSelectionChange:a=>{const l=Array.from(a)[0]||"all";h("role",l)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(ae,{value:"all",children:"All Roles"},"all"),k?.map(a=>e(ae,{value:a.toLowerCase(),children:a},a.toLowerCase()))]})]}),(u.search||u.status!=="all"||u.role!=="all")&&t("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[u.search&&t(K,{variant:"flat",color:"primary",size:"sm",onClose:()=>h("search",""),children:["Search: ",u.search]}),u.status!=="all"&&t(K,{variant:"flat",color:"secondary",size:"sm",onClose:()=>h("status","all"),children:["Status: ",u.status==="active"?"Active":"Inactive"]}),u.role!=="all"&&t(K,{variant:"flat",color:"warning",size:"sm",onClose:()=>h("role","all"),children:["Role: ",u.role]})]})]})}),t("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:t(_,{variant:"h6",className:"font-semibold text-foreground",children:[$==="table"?"User Table":"User Grid",t("span",{className:"text-sm text-default-500 ml-2",children:["(",x.total||0," ",x.total===1?"user":"users",")"]})]})}),F?t("div",{className:"text-center py-8",children:[e(gt,{size:40}),e(_,{className:"mt-4",color:"textSecondary",children:"Loading users data..."})]}):$==="table"?e(zt,{allUsers:x.data,roles:k,setUsers:ue,isMobile:b,isTablet:T,pagination:j,onPageChange:D,onRowsPerPageChange:p,totalUsers:x.total,loading:F,onEdit:a=>z("edit",a),updateUserOptimized:Be,deleteUserOptimized:We,toggleUserStatusOptimized:He,updateUserRolesOptimized:Ge}):t("div",{className:"p-4",children:[x.data&&x.data.length>0?e("div",{className:`grid gap-4 ${b?"grid-cols-1":T?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:x.data.map((a,l)=>e(Ze,{user:a,index:l},a.id))}):t("div",{className:"text-center py-8",children:[e(pe,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(_,{variant:"body1",color:"textSecondary",children:"No users found"}),e(_,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),x.data&&x.data.length>0&&e("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e(qe,{total:Math.ceil(x.total/j.perPage),initialPage:j.currentPage,page:j.currentPage,onChange:D,size:b?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})})]})};Qt.layout=o=>e(lt,{children:o});export{Qt as default};
