import{j as e,u as ee,A as se,B as ae,C as te,D as re,i as b,s as ne,l as O,t as le,b as o,E as ie,O as _s,h as D,k as va,N as ya,a as De,d as Cs,e as Ee,m as wa,n as Na,o as ba,q as _a,r as Ca,v as Sa,p as Fa,J as Ss,F as Ra,w as ka,x as Aa,y as Pa,z as E}from"./vendor-heroui-CinxWHhv.js";import{r as l,J as $a,S as ce,Q as Ia}from"./vendor-inertia-sUfCHI_5.js";import{a as R}from"./vendor-utils-CrJAVL9K.js";import{s as g}from"./toastUtils-BVg-E_WQ.js";import{u as Te,F as U,a as Fs,P as Rs,f as za,A as Oa}from"./Dashboard-B3yKj8nV.js";import{S as Da}from"./StatsCards-ZYMGrFLI.js";import{g as q}from"./useThemeRadius-AM-qADuZ.js";import{F as ve,a as we,E as Ea,S as Ta}from"./ErrorBoundary-Bye01QxB.js";import{f as La,g as Le,A as Be,e as V}from"./vendor-framer-B7qqn1b6.js";import{b as Ps,d as Ma}from"./app-CFsHLWbk.js";import{F as Ka}from"./ExclamationTriangleIcon-BarRaUA8.js";import{F as k}from"./ClockIcon-BKLni_N9.js";import{F as ye}from"./CheckCircleIcon-BAvoXTNq.js";import{F as Ba}from"./DocumentIcon-08C5TBVc.js";import{F as Ua}from"./PhotoIcon-D-cYh0Dc.js";import{a as qa}from"./XMarkIcon-twQGc8di.js";import{a as oe,F as Va}from"./MapPinIcon-DDwLGyCW.js";import{F as Me}from"./MagnifyingGlassIcon-BJyUDYwI.js";import{F as $s}from"./CheckCircleIcon-CykloG3X.js";import{F as ks}from"./UserIcon-CgrjQ1A2.js";import{F as Ke}from"./PencilIcon-BsmkHcSS.js";import{F as Ne}from"./XCircleIcon-Cv262LQg.js";import{F as Ha}from"./ExclamationTriangleIcon-D3y6aOMr.js";import{F as Wa}from"./ClockIcon-Auj34PFH.js";import{F as Ya}from"./AdjustmentsHorizontalIcon-lemo7t2o.js";import{F as Qa}from"./PlusIcon-BO1LbXgZ.js";import{F as As}from"./TrashIcon-Dnjv_I7q.js";import{F as Ja}from"./EllipsisVerticalIcon-CqOfKM9J.js";import"./vendor-react-FouZbkAE.js";import"./EnvelopeIcon-CFKoTD3N.js";import"./UserGroupIcon-CSQScwVa.js";import"./ShieldCheckIcon-Ck-ae4AP.js";import"./KeyIcon-BIi5nz4o.js";import"./logo-DFaNDj_M.js";const Ga=({onRefresh:v,children:p,disabled:P=!1,threshold:f=80,className:Ue=""})=>{const[m,T]=l.useState(!1),[u,L]=l.useState(0),y=l.useRef(null),M=l.useRef(0),J=l.useRef(0),K=l.useRef(!0),_=La(0),qe=Le(_,[0,f],[0,360]),me=Le(_,[0,f/2,f],[0,.5,1]),he=Le(_,[0,f],[.5,1]),be=l.useCallback(B=>{if(P||m)return;const C=y.current;if(C&&C.scrollTop>0){K.current=!1;return}K.current=!0,M.current=B.touches[0].clientY},[P,m]),Ve=l.useCallback(B=>{if(P||m||!K.current)return;J.current=B.touches[0].clientY;const C=J.current-M.current;if(C>0){const G=Math.min(C*.4,f*1.5);L(G),_.set(G),G>10&&B.preventDefault()}},[P,m,f,_]),H=l.useCallback(async()=>{if(!(P||m||!K.current)){if(u>=f){T(!0);try{await(v==null?void 0:v())}finally{T(!1)}}L(0),_.set(0)}},[P,m,u,f,v,_]);return e.jsxs("div",{ref:y,className:`relative overflow-auto ${Ue}`,onTouchStart:be,onTouchMove:Ve,onTouchEnd:H,style:{touchAction:u>10?"none":"auto"},children:[e.jsx(Be,{children:(u>0||m)&&e.jsx(V.div,{className:"absolute left-0 right-0 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{top:Math.min(u,f)-40,height:40},children:e.jsx(V.div,{className:`
                                w-10 h-10 rounded-full flex items-center justify-center
                                ${m?"bg-primary/20 border-2 border-primary":u>=f?"bg-success/20 border-2 border-success":"bg-default-100 border-2 border-default-300"}
                            `,style:{scale:m?1:he,opacity:m?1:me},children:e.jsx(V.div,{animate:m?{rotate:360}:{},transition:m?{repeat:1/0,duration:1,ease:"linear"}:{},style:{rotate:m?void 0:qe},children:e.jsx(Ps,{className:`w-5 h-5 ${m?"text-primary":u>=f?"text-success":"text-default-500"}`})})})})}),e.jsx(V.div,{style:{y:m?f/2:_,transition:m?"transform 0.2s ease-out":void 0},children:p})]})},A={draft:{color:"default",icon:Wa,label:"Draft"},submitted:{color:"primary",icon:we,label:"Submitted"},under_review:{color:"warning",icon:Ha,label:"Under Review"},resolved:{color:"success",icon:$s,label:"Resolved"},rejected:{color:"danger",icon:Ne,label:"Rejected"}},de={design_conflict:{label:"Design Conflict",color:"danger"},site_mismatch:{label:"Site Mismatch",color:"warning"},material_change:{label:"Material Change",color:"secondary"},safety_concern:{label:"Safety Concern",color:"danger"},specification_error:{label:"Spec Error",color:"primary"},other:{label:"Other",color:"default"}},Xa=({objections:v,filters:p,statuses:P,categories:f,creators:Ue,statistics:m})=>{var hs,us,xs,fs,gs,ps,js,vs,ys,ws,Ns;const{auth:T}=$a().props,u=Te("(min-width: 1025px)"),L=Te("(min-width: 641px) and (max-width: 1024px)"),y=Te("(max-width: 640px)");(hs=T.roles)!=null&&hs.includes("Administrator")||(us=T.roles)!=null&&us.includes("Super Administrator")||(xs=T.roles)!=null&&xs.includes("Daily Work Manager"),(fs=T.roles)==null||fs.some(s=>["Super Administrator","Administrator","Project Manager","Consultant","HR Manager"].includes(s));const M=l.useRef(null),[J,K]=l.useState(!1),[_,qe]=l.useState(!1),[me,he]=l.useState(!1),[be,Ve]=l.useState(!1),[H,B]=l.useState((p==null?void 0:p.search)||""),[C,W]=l.useState((v==null?void 0:v.current_page)||1),[G,Is]=l.useState(new Set),[x,He]=l.useState(v);l.useEffect(()=>{He(v)},[v]);const[X,zs]=l.useState(!1),[j,We]=l.useState({status:(p==null?void 0:p.status)||"all",category:(p==null?void 0:p.category)||"all",creator:(p==null?void 0:p.creator)||""}),{isOpen:Os,onOpen:Ds,onClose:_e}=ee(),[Es,Ye]=l.useState(!1),[Ce,Se]=l.useState([]),[i,S]=l.useState({title:"",category:"other",chainage_from:"",chainage_to:"",specific_chainages:"",chainage_range_from:"",chainage_range_to:"",description:"",reason:"",status:"draft"}),Ts=s=>{const a=Array.from(s.target.files);Se(t=>[...t,...a]),s.target.value=""},Ls=s=>{Se(a=>a.filter((t,n)=>n!==s))},Qe=()=>{S({title:"",category:"other",chainage_from:"",chainage_to:"",specific_chainages:"",chainage_range_from:"",chainage_range_to:"",description:"",reason:"",status:"draft"}),Se([])},{isOpen:Ms,onOpen:Ks,onClose:Fe}=ee(),[r,Je]=l.useState(null),[ue,Re]=l.useState([]),[Y,xe]=l.useState([]),[Bs,Ge]=l.useState(!1),[ke,Xe]=l.useState(!1),[$,Ae]=l.useState(""),{isOpen:Us,onOpen:qs,onClose:Pe}=ee(),[Vs,Ze]=l.useState(!1),[Hs,Ws]=l.useState(null),[w,I]=l.useState({title:"",category:"other",chainage_from:"",chainage_to:"",specific_chainages:"",chainage_range_from:"",chainage_range_to:"",description:"",reason:""}),{isOpen:Ys,onOpen:Qs,onClose:$e}=ee(),[Js,es]=l.useState(!1),[h,Gs]=l.useState(null),[fe,Ie]=l.useState(""),{isOpen:Xs,onOpen:Zs,onClose:ss}=ee(),[Q,ea]=l.useState(null),[as,sa]=l.useState(m||null);l.useCallback(()=>(M.current&&M.current.abort(),M.current=new AbortController,M.current.signal),[]);const ts=l.useCallback(()=>{const s={};return H&&(s.search=H),j.status&&j.status!=="all"&&(s.status=j.status),j.category&&j.category!=="all"&&(s.category=j.category),j.creator&&(s.creator=j.creator),s.page=C,s},[H,j,C]),ge=l.useCallback(async(s=!0)=>{s&&he(!0);const a=ts();ce.get(route("objections.index"),a,{preserveState:!0,preserveScroll:!0,onFinish:()=>{he(!1),K(!1)}})},[ts]),pe=l.useCallback(()=>{W(1),ge()},[ge]),aa=l.useCallback(async()=>{J||!y||(K(!0),pe(),g.success("Data refreshed"))},[J,y,pe]),ze=l.useRef(null),ta=s=>{const a=s.target.value;B(a),W(1),ze.current&&clearTimeout(ze.current),ze.current=setTimeout(()=>{ge()},300)},rs=(s,a)=>{We(t=>({...t,[s]:a})),W(1)},ra=s=>{W(s)},na=s=>{Is(a=>{const t=new Set(a);return t.has(s)?t.delete(s):t.add(s),t})},ns=s=>{if(!s)return"N/A";try{return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return"Invalid date"}},la=s=>{const a=A[s]||A.draft,t=a.icon;return e.jsx(D,{size:"sm",variant:"flat",color:a.color,startContent:e.jsx(t,{className:"w-3 h-3"}),classNames:{base:"h-6",content:"text-xs font-medium"},children:a.label})},ls=s=>{const a=de[s]||de.other;return e.jsx(D,{size:"sm",variant:"flat",color:a.color,className:"text-xs",children:a.label})},ia=async()=>{var s,a;if(!i.title||!i.description||!i.reason){g.error("Please fill in all required fields");return}Ye(!0);try{const t=new FormData;t.append("title",i.title),t.append("category",i.category),t.append("description",i.description),t.append("reason",i.reason),t.append("status",i.status),i.specific_chainages&&t.append("specific_chainages",i.specific_chainages),i.chainage_range_from&&t.append("chainage_range_from",i.chainage_range_from),i.chainage_range_to&&t.append("chainage_range_to",i.chainage_range_to),!i.specific_chainages&&!i.chainage_range_from&&i.chainage_from&&t.append("chainage_from",i.chainage_from),!i.specific_chainages&&!i.chainage_range_to&&i.chainage_to&&t.append("chainage_to",i.chainage_to),Ce.forEach(c=>{t.append("files[]",c)});const n=await R.post(route("objections.store"),t,{headers:{"Content-Type":"multipart/form-data"}});g.success(n.data.message||"Objection created successfully"),_e(),Qe(),ce.reload({only:["objections","statistics"]})}catch(t){g.error(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.error)||"Failed to create objection")}finally{Ye(!1)}},F=async(s,a,t="")=>{Xe(!0);try{const n={};s&&(n.chainage_from=s),a&&(n.chainage_to=a),t&&(n.search=t);const c=await R.get(route("objections.suggestRfis"),{params:n});Re(c.data.rfis||[])}catch(n){console.error("Failed to suggest RFIs:",n),Re([])}finally{Xe(!1)}},is=()=>{var s,a,t;if(r){const n=r.chainage_summary||{},c=((s=n.specific)==null?void 0:s.join(", "))||"",d=((a=n.range)==null?void 0:a.split(" - ")[0])||r.chainage_from,N=((t=n.range)==null?void 0:t.split(" - ")[1])||r.chainage_to;$?F(null,null,$):c?F(c,null):F(d,N,$)}else $&&F(null,null,$)},je=s=>{var d,N,Z,bs;Je(s),xe(((d=s.daily_works)==null?void 0:d.map(ja=>String(ja.id)))||[]),Ae(""),Re([]);const a=s.chainage_summary||{},t=((N=a.specific)==null?void 0:N.join(", "))||"",n=((Z=a.range)==null?void 0:Z.split(" - ")[0])||s.chainage_from,c=((bs=a.range)==null?void 0:bs.split(" - ")[1])||s.chainage_to;t?F(t,null):n&&c?F(n,c):n&&F(n,null),Ks()},ca=async()=>{var s,a;if(!r||Y.length===0){g.error("Please select at least one RFI");return}Ge(!0);try{const t=await R.post(route("objections.attachRfis",r.id),{rfi_ids:Y.map(n=>parseInt(n))});g.success(t.data.message||"RFIs attached successfully"),Fe(),ce.reload({only:["objections"]})}catch(t){g.error(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.error)||"Failed to attach RFIs")}finally{Ge(!1)}},cs=s=>{Ws(s);const a=s.chainage_summary||{},t=a.specific_chainages||[],n=a.chainage_range||{};I({title:s.title||"",category:s.category||"other",chainage_from:s.chainage_from||n.from||"",chainage_to:s.chainage_to||n.to||"",specific_chainages:t.join(", ")||"",chainage_range_from:n.from||s.chainage_from||"",chainage_range_to:n.to||s.chainage_to||"",description:s.description||"",reason:s.reason||""}),qs()},oa=async()=>{var s,a;if(!w.title||!w.description||!w.reason){g.error("Please fill in all required fields");return}Ze(!0);try{const t=await R.put(route("objections.update",Hs.id),w);g.success(t.data.message||"Objection updated successfully"),Pe(),ce.reload({only:["objections","statistics"]})}catch(t){g.error(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.error)||"Failed to update objection")}finally{Ze(!1)}},z=(s,a)=>{Je(s),Gs(a),Ie(""),Qs()},da=async()=>{var s,a;if(!(!r||!h)){if(["resolve","reject"].includes(h)&&!fe.trim()){g.error("Please provide resolution notes");return}es(!0);try{let t;switch(h){case"submit":t=await R.post(route("objections.submit",r.id));break;case"review":t=await R.post(route("objections.review",r.id));break;case"resolve":t=await R.post(route("objections.resolve",r.id),{resolution_notes:fe});break;case"reject":t=await R.post(route("objections.reject",r.id),{resolution_notes:fe});break;default:throw new Error("Invalid action")}g.success(t.data.message||"Status updated successfully"),t.data.objection&&He(n=>({...n,data:n.data.map(c=>c.id===t.data.objection.id?t.data.objection:c)})),t.data.statistics&&sa(t.data.statistics),$e(),Ie("")}catch(t){g.error(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.error)||"Failed to update status")}finally{es(!1)}}},os=async s=>{var a,t;if(confirm("Are you sure you want to delete this objection?"))try{const n=await R.delete(route("objections.destroy",s.id));g.success(n.data.message||"Objection deleted successfully"),ce.reload({only:["objections","statistics"]})}catch(n){g.error(((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.error)||"Failed to delete objection")}},ds=s=>{switch(s){case"submit":return"Submit for Review";case"review":return"Start Review";case"resolve":return"Resolve Objection";case"reject":return"Reject Objection";default:return"Update Status"}},ms=s=>{ea(s),Zs()},Oe=s=>{var a;return((a=A[s])==null?void 0:a.label)||(s==null?void 0:s.replace("_"," ").replace(/\b\w/g,t=>t.toUpperCase()))||"Unknown"};l.useEffect(()=>{ge()},[j,C]);const ma=l.useMemo(()=>{const s=as||{},a=s.total||(x==null?void 0:x.total)||0,t=s.active||0,n=s.resolved||0,c=s.pending||0,d=a>0?Math.round(n/a*100):0;return[{title:"Total Objections",value:a.toLocaleString(),icon:e.jsx(U,{className:"w-5 h-5"}),color:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20",description:`${t} active`,trend:t>0?"down":"neutral"},{title:"Active Issues",value:t.toLocaleString(),icon:e.jsx(Ka,{className:"w-5 h-5"}),color:t>10?"text-red-600":"text-warning-600",bgColor:t>10?"bg-red-50 dark:bg-red-900/20":"bg-warning-50 dark:bg-warning-900/20",description:t>0?"Require attention":"All clear!",trend:t>10?"down":t>0?"neutral":"up"},{title:"Pending Review",value:c.toLocaleString(),icon:e.jsx(k,{className:"w-5 h-5"}),color:"text-orange-600",bgColor:"bg-orange-50 dark:bg-orange-900/20",description:c>0?"Awaiting action":"All caught up!",trend:c>5?"down":"neutral"},{title:"Resolution Rate",value:`${d}%`,icon:e.jsx(ye,{className:"w-5 h-5"}),color:d>=80?"text-green-600":d>=50?"text-yellow-600":"text-red-600",bgColor:d>=80?"bg-green-50 dark:bg-green-900/20":d>=50?"bg-yellow-50 dark:bg-yellow-900/20":"bg-red-50 dark:bg-red-900/20",description:`${n} resolved`,trend:d>=80?"up":d>=50?"neutral":"down"}]},[as,x]),ha=[{label:"New Objection",icon:e.jsx(Qa,{className:"w-4 h-4"}),color:"primary",variant:"solid",onPress:Ds}],ua=[{key:"title",label:"Title"},{key:"category",label:"Category"},{key:"chainage",label:"Chainage Range"},{key:"status",label:"Status"},{key:"affected_rfis",label:"Affected RFIs"},{key:"created_by",label:"Created By"},{key:"created_at",label:"Date"},{key:"actions",label:"Actions"}],xa=(s,a)=>{var t,n,c,d;switch(a){case"title":return e.jsxs("div",{className:"flex items-center gap-2 max-w-[200px]",children:[e.jsx(U,{className:`w-4 h-4 shrink-0 ${s.is_active?"text-warning animate-pulse":"text-success"}`}),e.jsx("span",{className:"font-medium text-sm truncate",title:s.title,children:s.title})]});case"category":return ls(s.category);case"chainage":return s.chainage_from&&s.chainage_to?e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(oe,{className:"w-3 h-3 text-default-400"}),e.jsxs("span",{children:[s.chainage_from," - ",s.chainage_to]})]}):e.jsx("span",{className:"text-xs text-default-400",children:"Not set"});case"status":return la(s.status);case"affected_rfis":return e.jsxs(o,{size:"sm",variant:"flat",color:s.daily_works_count>0?"primary":"default",startContent:e.jsx(ve,{className:"w-3 h-3"}),onPress:()=>je(s),children:[s.daily_works_count||0," RFI(s)"]});case"created_by":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{src:(t=s.created_by)==null?void 0:t.profile_image_url,name:((n=s.created_by)==null?void 0:n.name)||"Unknown",size:"sm",className:"w-6 h-6"}),e.jsx("span",{className:"text-xs truncate max-w-[100px]",children:((c=s.created_by)==null?void 0:c.name)||"Unknown"})]});case"created_at":return e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(za,{className:"w-3 h-3 text-default-400"}),e.jsx("span",{children:ns(s.created_at)})]});case"actions":return e.jsxs(ka,{children:[e.jsx(Aa,{children:e.jsx(o,{isIconOnly:!0,size:"sm",variant:"light",children:e.jsx(Ja,{className:"w-4 h-4"})})}),e.jsxs(Pa,{"aria-label":"Objection actions",children:[e.jsx(E,{startContent:e.jsx(ve,{className:"w-4 h-4"}),onPress:()=>je(s),children:"Manage RFIs"},"attach"),s.status==="draft"&&e.jsx(E,{startContent:e.jsx(Ke,{className:"w-4 h-4"}),onPress:()=>cs(s),children:"Edit"},"edit"),s.status==="draft"&&e.jsx(E,{startContent:e.jsx(we,{className:"w-4 h-4"}),color:"primary",onPress:()=>z(s,"submit"),children:"Submit for Review"},"submit"),s.status==="submitted"&&e.jsx(E,{startContent:e.jsx(k,{className:"w-4 h-4"}),color:"warning",onPress:()=>z(s,"review"),children:"Start Review"},"review"),(s.status==="submitted"||s.status==="under_review")&&e.jsx(E,{startContent:e.jsx(ye,{className:"w-4 h-4"}),color:"success",onPress:()=>z(s,"resolve"),children:"Resolve"},"resolve"),(s.status==="submitted"||s.status==="under_review")&&e.jsx(E,{startContent:e.jsx(Ne,{className:"w-4 h-4"}),color:"danger",onPress:()=>z(s,"reject"),children:"Reject"},"reject"),((d=s.status_logs)==null?void 0:d.length)>0&&e.jsx(E,{startContent:e.jsx(k,{className:"w-4 h-4"}),onPress:()=>ms(s),children:"View History"},"history"),s.status==="draft"&&e.jsx(E,{startContent:e.jsx(As,{className:"w-4 h-4"}),color:"danger",className:"text-danger",onPress:()=>os(s),children:"Delete"},"delete")]})]});default:return"-"}},fa=({objection:s,isExpanded:a,onToggle:t})=>{var c,d,N,Z;const n=A[s.status]||A.draft;return n.icon,e.jsxs(De,{radius:q(),className:`bg-content1 border shadow-sm ${s.is_active?"border-warning/60 bg-warning-50/30 dark:bg-warning-900/10":"border-divider/40"}`,children:[e.jsx(Cs,{className:"p-3 cursor-pointer select-none",onClick:t,children:e.jsxs("div",{className:"flex items-center justify-between w-full gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx(U,{className:`w-5 h-5 shrink-0 ${s.is_active?"text-warning animate-pulse":"text-success"}`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm text-foreground truncate",children:s.title}),e.jsx("p",{className:"text-xs text-default-500 truncate",children:s.chainage_from&&s.chainage_to?`${s.chainage_from} - ${s.chainage_to}`:"No chainage set"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx(D,{size:"sm",variant:"flat",color:n.color,className:"h-5 text-[10px]",children:n.label}),e.jsx("div",{className:`w-5 h-5 rounded-full bg-default-100 flex items-center justify-center transition-transform ${a?"rotate-180":""}`,children:e.jsx(Ma,{className:"w-3 h-3 text-default-500"})})]})]})}),e.jsx(Be,{children:a&&e.jsx(V.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:e.jsxs(Ee,{className:"px-3 pb-3 pt-0",children:[e.jsx(Ra,{className:"mb-3"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-400",children:"Category:"}),ls(s.category)]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-400",children:"Chainage:"}),s.chainage_from&&s.chainage_to?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"w-3 h-3 text-default-400"}),e.jsxs("span",{children:[s.chainage_from," - ",s.chainage_to]})]}):e.jsx("span",{className:"text-default-400",children:"Not set"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-400",children:"Affected RFIs:"}),e.jsxs(o,{size:"sm",variant:"flat",color:s.daily_works_count>0?"primary":"default",className:"h-6 min-h-6 text-[10px]",onPress:()=>je(s),children:[s.daily_works_count||0," RFI(s)"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-400",children:"Created By:"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Rs,{src:(c=s.created_by)==null?void 0:c.profile_image_url,name:(d=s.created_by)==null?void 0:d.name,size:"xs",className:"w-4 h-4"}),e.jsx("span",{children:((N=s.created_by)==null?void 0:N.name)||"Unknown"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-400",children:"Date:"}),e.jsx("span",{children:ns(s.created_at)})]}),s.description&&e.jsxs("div",{className:"pt-2",children:[e.jsx("span",{className:"text-default-400 block mb-1",children:"Description:"}),e.jsx("p",{className:"text-default-600 text-[11px] line-clamp-3 bg-default-100 p-2 rounded",children:s.description})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsx(o,{size:"sm",variant:"flat",color:"primary",startContent:e.jsx(ve,{className:"w-3 h-3"}),onPress:()=>je(s),children:"Manage RFIs"}),s.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{size:"sm",variant:"flat",color:"default",startContent:e.jsx(Ke,{className:"w-3 h-3"}),onPress:()=>cs(s),children:"Edit"}),e.jsx(o,{size:"sm",variant:"flat",color:"primary",startContent:e.jsx(we,{className:"w-3 h-3"}),onPress:()=>z(s,"submit"),children:"Submit"})]}),s.status==="submitted"&&e.jsx(o,{size:"sm",variant:"flat",color:"warning",startContent:e.jsx(k,{className:"w-3 h-3"}),onPress:()=>z(s,"review"),children:"Review"}),s.status==="under_review"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{size:"sm",variant:"flat",color:"success",startContent:e.jsx(ye,{className:"w-3 h-3"}),onPress:()=>z(s,"resolve"),children:"Resolve"}),e.jsx(o,{size:"sm",variant:"flat",color:"danger",startContent:e.jsx(Ne,{className:"w-3 h-3"}),onPress:()=>z(s,"reject"),children:"Reject"})]}),((Z=s.status_logs)==null?void 0:Z.length)>0&&e.jsx(o,{size:"sm",variant:"flat",color:"default",startContent:e.jsx(k,{className:"w-3 h-3"}),onPress:()=>ms(s),children:"History"}),s.status==="draft"&&e.jsx(o,{size:"sm",variant:"flat",color:"danger",startContent:e.jsx(As,{className:"w-3 h-3"}),onPress:()=>os(s),children:"Delete"})]})]})})})]})},ga=()=>e.jsx("div",{className:"space-y-2",children:[...Array(5)].map((s,a)=>e.jsx(Ss,{className:"h-12 w-full rounded-lg"},a))}),pa=()=>e.jsx("div",{className:"space-y-2",children:[...Array(5)].map((s,a)=>e.jsx(Ss,{className:"h-20 w-full rounded-lg"},a))});return e.jsxs(e.Fragment,{children:[e.jsx(Ia,{title:"Objections Management"}),e.jsx(se,{isOpen:Os,onClose:_e,size:"lg",scrollBehavior:"inside",shouldBlockScroll:!1,placement:"center",classNames:{base:"max-h-[90vh] m-4",wrapper:"items-center"},children:e.jsxs(ae,{children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-warning"}),"Create New Objection"]}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{label:"Title",placeholder:"Enter objection title",value:i.title,onValueChange:s=>S(a=>({...a,title:s})),isRequired:!0}),e.jsx(ne,{label:"Category",selectedKeys:[i.category],onSelectionChange:s=>{const a=Array.from(s)[0]||"other";S(t=>({...t,category:a}))},children:Object.entries(f||de).map(([s,a])=>e.jsx(O,{children:typeof a=="string"?a:a.label},s))}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium text-default-700",children:"Chainages (Optional)"}),e.jsx("p",{className:"text-xs text-default-400 mb-2",children:"Add specific chainages (comma-separated) and/or a range"}),e.jsx(b,{label:"Specific Chainages",placeholder:"e.g., K35+897, K36+987, K37+123",description:"Multiple chainages separated by commas",value:i.specific_chainages,onValueChange:s=>S(a=>({...a,specific_chainages:s}))}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(b,{label:"Range From",placeholder:"e.g., K36+580",value:i.chainage_range_from,onValueChange:s=>S(a=>({...a,chainage_range_from:s}))}),e.jsx(b,{label:"Range To",placeholder:"e.g., K37+540",value:i.chainage_range_to,onValueChange:s=>S(a=>({...a,chainage_range_to:s}))})]})]}),e.jsx(le,{label:"Description",placeholder:"Describe the objection in detail",value:i.description,onValueChange:s=>S(a=>({...a,description:s})),minRows:3,isRequired:!0}),e.jsx(le,{label:"Reason",placeholder:"Explain the reason for this objection",value:i.reason,onValueChange:s=>S(a=>({...a,reason:s})),minRows:2,isRequired:!0}),e.jsxs(ne,{label:"Status",selectedKeys:[i.status],onSelectionChange:s=>{const a=Array.from(s)[0]||"draft";S(t=>({...t,status:a}))},children:[e.jsx(O,{children:"Save as Draft"},"draft"),e.jsx(O,{children:"Submit Immediately"},"submitted")]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-default-700",children:"Supporting Documents (Optional)"}),e.jsx("p",{className:"text-xs text-default-400",children:"Upload images, PDFs, Word, or Excel files"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx",onChange:Ts,className:"hidden",id:"objection-file-upload"}),e.jsxs("label",{htmlFor:"objection-file-upload",className:"flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-default-300 rounded-lg cursor-pointer hover:border-primary hover:bg-default-50 transition-colors",children:[e.jsx(Ba,{className:"w-5 h-5 text-default-500"}),e.jsx("span",{className:"text-sm text-default-600",children:"Click to select files"})]}),Ce.length>0&&e.jsx("div",{className:"space-y-1 mt-2",children:Ce.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-default-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.type.startsWith("image/")?e.jsx(Ua,{className:"w-4 h-4 text-success shrink-0"}):e.jsx(Fs,{className:"w-4 h-4 text-primary shrink-0"}),e.jsx("span",{className:"text-xs truncate",children:s.name}),e.jsxs("span",{className:"text-xs text-default-400 shrink-0",children:["(",(s.size/1024).toFixed(1)," KB)"]})]}),e.jsx(o,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",onPress:()=>Ls(a),children:e.jsx(qa,{className:"w-4 h-4"})})]},a))})]})]})}),e.jsxs(ie,{children:[e.jsx(o,{variant:"light",onPress:()=>{_e(),Qe()},children:"Cancel"}),e.jsx(o,{color:"primary",onPress:ia,isLoading:Es,children:"Create Objection"})]})]})}),e.jsx(se,{isOpen:Ms,onClose:Fe,size:"3xl",scrollBehavior:"inside",shouldBlockScroll:!1,placement:"center",classNames:{base:"max-h-[90vh] m-4",wrapper:"items-center"},children:e.jsxs(ae,{children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5 text-primary"}),"Manage Affected RFIs",r&&e.jsxs("span",{className:"text-sm font-normal text-default-500",children:["- ",r.title]})]}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-4",children:[(r==null?void 0:r.chainage_from)&&(r==null?void 0:r.chainage_to)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-3 bg-default-100 rounded-lg",children:[e.jsx(oe,{className:"w-5 h-5 text-default-500"}),e.jsxs("span",{className:"text-sm",children:["Chainage Range: ",e.jsx("strong",{children:r.chainage_from})," - ",e.jsx("strong",{children:r.chainage_to})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{placeholder:"Search RFIs by number, location, or description...",value:$,onChange:s=>Ae(s.target.value),onKeyDown:s=>s.key==="Enter"&&is(),startContent:e.jsx(Me,{className:"w-4 h-4 text-default-400"}),size:"sm",className:"flex-1"}),e.jsx(o,{size:"sm",color:"primary",variant:"flat",isLoading:ke,onPress:is,children:"Search"}),(((ps=(gs=r==null?void 0:r.chainage_summary)==null?void 0:gs.specific)==null?void 0:ps.length)>0||((js=r==null?void 0:r.chainage_summary)==null?void 0:js.range)||(r==null?void 0:r.chainage_from)&&(r==null?void 0:r.chainage_to))&&e.jsx(o,{size:"sm",variant:"flat",isLoading:ke,onPress:()=>{var c,d,N;Ae("");const s=r.chainage_summary||{},a=((c=s.specific)==null?void 0:c.join(", "))||"",t=((d=s.range)==null?void 0:d.split(" - ")[0])||r.chainage_from,n=((N=s.range)==null?void 0:N.split(" - ")[1])||r.chainage_to;a?F(a,null):F(t,n)},children:e.jsx(Ps,{className:"w-4 h-4"})})]}),((vs=r==null?void 0:r.daily_works)==null?void 0:vs.length)>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4 text-success"}),e.jsxs("span",{className:"text-sm font-medium text-success",children:["Currently Attached (",r.daily_works.length,")"]})]}),e.jsx("div",{className:"grid gap-2 max-h-[150px] overflow-auto border border-success/30 rounded-lg p-2 bg-success-50/30 dark:bg-success-900/10",children:r.daily_works.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-2 border border-divider rounded-lg bg-content1",children:[e.jsx(_s,{value:String(s.id),isSelected:Y.includes(String(s.id)),onValueChange:a=>{xe(a?t=>[...t,String(s.id)]:t=>t.filter(n=>n!==String(s.id)))}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:s.number}),e.jsxs("div",{className:"text-xs text-default-500 flex items-center gap-2",children:[e.jsx(oe,{className:"w-3 h-3"}),s.location||"No location",s.type&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),s.type]})]})]}),e.jsx(D,{size:"sm",variant:"flat",color:"success",children:"Attached"})]},s.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4 text-default-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[$?"Search Results":"Suggested RFIs",ue.length>0&&` (${ue.length})`]})]}),ke?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(va,{})}):ue.length>0?e.jsx(ya,{value:Y,onValueChange:xe,children:e.jsx("div",{className:"grid gap-2 max-h-[300px] overflow-auto border border-divider rounded-lg p-2",children:ue.map(s=>{var t,n;const a=(t=r==null?void 0:r.daily_works)==null?void 0:t.some(c=>c.id===s.id);return e.jsxs("div",{className:`flex items-center gap-3 p-2 border rounded-lg hover:bg-default-100 ${a?"border-success/50 bg-success-50/20":"border-divider"}`,children:[e.jsx(_s,{value:String(s.id)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm",children:s.number}),a&&e.jsx(D,{size:"sm",variant:"flat",color:"success",className:"h-4 text-[10px]",children:"Attached"})]}),e.jsxs("div",{className:"text-xs text-default-500 flex items-center gap-2",children:[e.jsx(oe,{className:"w-3 h-3"}),s.location||"No location",s.type&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),s.type]}),((n=s.incharge_user)==null?void 0:n.name)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx(ks,{className:"w-3 h-3"}),s.incharge_user.name]})]}),s.description&&e.jsx("p",{className:"text-[10px] text-default-400 truncate mt-0.5",children:s.description})]})]},s.id)})})}):e.jsxs("div",{className:"text-center py-8 text-default-500 border border-dashed border-divider rounded-lg",children:[e.jsx(Fs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:$?"No RFIs found matching your search.":r!=null&&r.chainage_from&&(r!=null&&r.chainage_to)?"No RFIs found in the specified chainage range.":"Use the search box above to find RFIs."}),e.jsx("p",{className:"text-xs mt-1",children:"Try searching by RFI number, location, or description."})]})]})]})}),e.jsx(ie,{children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("span",{className:"text-sm text-default-500",children:[Y.length," RFI(s) selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"light",onPress:Fe,children:"Cancel"}),e.jsx(o,{color:"primary",onPress:ca,isLoading:Bs,isDisabled:Y.length===0,children:"Save Attachments"})]})]})})]})}),e.jsx(se,{isOpen:Us,onClose:Pe,size:"2xl",scrollBehavior:"inside",shouldBlockScroll:!1,placement:"center",classNames:{base:"max-h-[90vh] m-4",wrapper:"items-center"},children:e.jsxs(ae,{children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-primary"}),"Edit Objection"]}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{label:"Title",placeholder:"Enter objection title",value:w.title,onChange:s=>I(a=>({...a,title:s.target.value})),isRequired:!0}),e.jsx(ne,{label:"Category",placeholder:"Select category",selectedKeys:[w.category],onChange:s=>I(a=>({...a,category:s.target.value})),children:Object.entries(de).map(([s,a])=>e.jsx(O,{value:s,children:a.label},s))}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium text-default-700",children:"Chainages (Optional)"}),e.jsx("p",{className:"text-xs text-default-400 mb-2",children:"Add specific chainages (comma-separated) and/or a range"}),e.jsx(b,{label:"Specific Chainages",placeholder:"e.g., K35+897, K36+987, K37+123",description:"Multiple chainages separated by commas",value:w.specific_chainages,onChange:s=>I(a=>({...a,specific_chainages:s.target.value}))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{label:"Range From",placeholder:"e.g., K36+580",value:w.chainage_range_from,onChange:s=>I(a=>({...a,chainage_range_from:s.target.value}))}),e.jsx(b,{label:"Range To",placeholder:"e.g., K37+540",value:w.chainage_range_to,onChange:s=>I(a=>({...a,chainage_range_to:s.target.value}))})]})]}),e.jsx(le,{label:"Description",placeholder:"Describe the objection in detail",value:w.description,onChange:s=>I(a=>({...a,description:s.target.value})),minRows:3,isRequired:!0}),e.jsx(le,{label:"Reason",placeholder:"Explain the reason for raising this objection",value:w.reason,onChange:s=>I(a=>({...a,reason:s.target.value})),minRows:2,isRequired:!0})]})}),e.jsxs(ie,{children:[e.jsx(o,{variant:"light",onPress:Pe,children:"Cancel"}),e.jsx(o,{color:"primary",onPress:oa,isLoading:Vs,children:"Save Changes"})]})]})}),e.jsx(se,{isOpen:Ys,onClose:$e,size:"lg",placement:"bottom-center",classNames:{base:"max-h-[100dvh] sm:max-h-[90vh] m-0 sm:m-4 mb-0",wrapper:"items-end sm:items-center"},children:e.jsxs(ae,{children:[e.jsxs(te,{className:"flex items-center gap-2",children:[h==="submit"&&e.jsx(we,{className:"w-5 h-5 text-primary"}),h==="review"&&e.jsx(k,{className:"w-5 h-5 text-warning"}),h==="resolve"&&e.jsx(ye,{className:"w-5 h-5 text-success"}),h==="reject"&&e.jsx(Ne,{className:"w-5 h-5 text-danger"}),ds(h)]}),e.jsx(re,{children:r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-default-100 rounded-lg",children:[e.jsx("p",{className:"font-medium",children:r.title}),e.jsx("p",{className:"text-sm text-default-500 mt-1",children:r.description})]}),h==="submit"&&e.jsx("p",{className:"text-sm text-default-600",children:"Are you sure you want to submit this objection for review? Once submitted, you won't be able to edit it."}),h==="review"&&e.jsx("p",{className:"text-sm text-default-600",children:'This will mark the objection as "Under Review". You can then resolve or reject it after investigation.'}),(h==="resolve"||h==="reject")&&e.jsx(le,{label:h==="resolve"?"Resolution Notes":"Rejection Reason",placeholder:h==="resolve"?"Explain how the objection was resolved...":"Explain why the objection is being rejected...",value:fe,onChange:s=>Ie(s.target.value),minRows:3,isRequired:!0})]})}),e.jsxs(ie,{children:[e.jsx(o,{variant:"light",onPress:$e,children:"Cancel"}),e.jsx(o,{color:h==="reject"?"danger":h==="resolve"?"success":"primary",onPress:da,isLoading:Js,children:ds(h)})]})]})}),e.jsx(se,{isOpen:Xs,onClose:ss,size:"2xl",scrollBehavior:"inside",shouldBlockScroll:!1,placement:"center",classNames:{base:"max-h-[90vh] m-4",wrapper:"items-center"},children:e.jsxs(ae,{children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-primary"}),"Status History"]}),e.jsx(re,{children:Q&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-default-100 rounded-lg",children:[e.jsx("p",{className:"font-medium",children:Q.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-sm text-default-500",children:"Current Status:"}),e.jsx(D,{size:"sm",variant:"flat",color:((ys=A[Q.status])==null?void 0:ys.color)||"default",children:Oe(Q.status)})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-0 bottom-0 w-0.5 bg-default-200"}),((ws=Q.status_logs)==null?void 0:ws.length)>0?e.jsx("div",{className:"space-y-4",children:Q.status_logs.map((s,a)=>{var c,d;const t=A[s.to_status]||{},n=t.icon||k;return e.jsxs("div",{className:"relative flex gap-4 pl-8",children:[e.jsx("div",{className:`absolute left-0 w-6 h-6 rounded-full flex items-center justify-center ${t.bgColor||"bg-default-100"}`,children:e.jsx(n,{className:`w-3 h-3 ${t.textColor||"text-default-500"}`})}),e.jsx("div",{className:"flex-1 pb-4",children:e.jsxs("div",{className:"bg-content2 rounded-lg p-3 border border-divider/40",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[e.jsx(D,{size:"sm",variant:"flat",color:((c=A[s.from_status])==null?void 0:c.color)||"default",children:Oe(s.from_status)}),e.jsx("span",{className:"text-default-400",children:"→"}),e.jsx(D,{size:"sm",variant:"flat",color:t.color||"default",children:Oe(s.to_status)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-xs text-default-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ks,{className:"w-3 h-3"}),((d=s.changed_by)==null?void 0:d.name)||"System"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Va,{className:"w-3 h-3"}),new Date(s.changed_at).toLocaleString()]})]}),s.notes&&e.jsx("div",{className:"mt-2 pt-2 border-t border-divider/40",children:e.jsx("p",{className:"text-sm text-default-600",children:s.notes})})]})})]},s.id||a)})}):e.jsxs("div",{className:"text-center py-8 text-default-500",children:[e.jsx(k,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No status changes recorded yet."})]})]})]})}),e.jsx(ie,{children:e.jsx(o,{variant:"light",onPress:ss,children:"Close"})})]})}),e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full max-w-[2000px]",children:e.jsxs(De,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg,
                                var(--theme-content1, #FAFAFA) 20%,
                                var(--theme-content2, #F4F4F5) 10%,
                                var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(Cs,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg,
                                    color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%,
                                    color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${u?"p-6":L?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                                    ${u?"p-3":L?"p-2.5":"p-2"}
                                                    rounded-xl flex items-center justify-center
                                                `,style:{background:"color-mix(in srgb, var(--theme-warning) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-warning) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(U,{className:`
                                                        ${u?"w-8 h-8":L?"w-6 h-6":"w-5 h-5"}
                                                    `,style:{color:"var(--theme-warning)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                                        ${u?"text-2xl":L?"text-xl":"text-lg"}
                                                        font-bold text-foreground
                                                        ${u?"":"truncate"}
                                                    `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Objections Management"}),e.jsx("p",{className:`
                                                        ${u?"text-sm":"text-xs"}
                                                        text-default-500
                                                        ${u?"":"truncate"}
                                                    `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Track and manage RFI objections across projects"})]})]}),e.jsx("div",{className:"flex items-center gap-2 sm:gap-4 w-full lg:w-auto",children:e.jsx("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap justify-end w-full lg:w-auto",children:ha.map((s,a)=>e.jsx(o,{size:u?"md":"sm",variant:s.variant||"flat",color:s.color||"primary",startContent:!y&&s.icon,isIconOnly:y,onPress:s.onPress,className:`${s.className||""} font-medium ${y?"min-w-9 h-9":""}`,"aria-label":s.label,style:{fontFamily:'var(--fontFamily, "Inter")',borderRadius:"var(--borderRadius, 12px)"},children:y?s.icon:s.label},a))})})]})})})}),e.jsxs(Ee,{className:"pt-6",children:[e.jsx("div",{className:"relative",children:e.jsx(Da,{stats:ma,onRefresh:pe,isLoading:be})}),e.jsxs("div",{className:"mb-4 space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 items-stretch lg:items-center",children:[e.jsx(o,{size:"sm",variant:X?"solid":"bordered",color:X?"primary":"default",onPress:()=>zs(!X),radius:q(),className:`shrink-0 min-h-10 ${X?"":"border-divider/50"}`,startContent:e.jsx(Ya,{className:"w-4 h-4"}),style:{fontFamily:'var(--fontFamily, "Inter")'},children:y?"":"Filters"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(b,{type:"text",placeholder:"Search by title, description, or chainage...",value:H,onChange:ta,variant:"bordered",size:"sm",radius:q(),startContent:e.jsx(Me,{className:"w-4 h-4 text-default-400 shrink-0"}),classNames:{input:"text-foreground text-sm",inputWrapper:"min-h-10 bg-content2/50 border-divider/50 hover:border-divider"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]}),e.jsx(Be,{children:X&&e.jsx(V.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"p-3 rounded-lg border",style:{background:"var(--theme-content2, rgba(244, 244, 245, 0.8))",borderColor:"var(--theme-divider, rgba(228, 228, 231, 0.5))"},children:e.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[160px]",children:e.jsxs(ne,{label:"Status",placeholder:"All",selectedKeys:j.status?[j.status]:["all"],onSelectionChange:s=>{const a=Array.from(s)[0]||"all";rs("status",a)},variant:"bordered",size:"sm",radius:q(),classNames:{trigger:"min-h-10",value:"text-foreground text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(O,{value:"all",children:"All Statuses"},"all"),Object.entries(P||A).map(([s,a])=>e.jsx(O,{value:s,children:typeof a=="string"?a:a.label},s))]})}),e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[160px]",children:e.jsxs(ne,{label:"Category",placeholder:"All",selectedKeys:j.category?[j.category]:["all"],onSelectionChange:s=>{const a=Array.from(s)[0]||"all";rs("category",a)},variant:"bordered",size:"sm",radius:q(),classNames:{trigger:"min-h-10",value:"text-foreground text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(O,{value:"all",children:"All Categories"},"all"),Object.entries(f||de).map(([s,a])=>e.jsx(O,{value:s,children:typeof a=="string"?a:a.label},s))]})}),e.jsx(o,{size:"sm",variant:"flat",color:"danger",radius:q(),className:"min-h-10",onPress:()=>{We({status:"all",category:"all",creator:""}),B(""),W(1)},style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Clear"})]})})})})]}),e.jsx(De,{radius:q(),className:"bg-content2/50 backdrop-blur-md border border-divider/30",style:{fontFamily:'var(--fontFamily, "Inter")',borderRadius:"var(--borderRadius, 12px)",backgroundColor:"var(--theme-content2)",borderColor:"var(--theme-divider)"},children:e.jsx(Ee,{className:"p-4",children:e.jsxs(Ea,{fallbackTitle:"Unable to load objections",fallbackDescription:"There was an error loading the objections. Please try refreshing.",onRetry:pe,children:[me?y?pa():ga():y?e.jsx(Ga,{onRefresh:aa,disabled:me,children:e.jsx("div",{className:"flex flex-col gap-2",children:((Ns=x==null?void 0:x.data)==null?void 0:Ns.length)>0?x.data.map(s=>e.jsx(Ta,{children:e.jsx(fa,{objection:s,isExpanded:G.has(s.id),onToggle:()=>na(s.id)})},s.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),e.jsx("p",{className:"text-default-500 font-medium",children:"No objections found"}),e.jsx("p",{className:"text-default-400 text-sm mt-1",children:"Create your first objection to get started"})]})})}):e.jsxs(wa,{"aria-label":"Objections table",removeWrapper:!0,classNames:{base:"overflow-auto",table:"min-w-full",th:"bg-default-100 text-default-600 text-xs font-semibold uppercase",td:"py-3"},children:[e.jsx(Na,{columns:ua,children:s=>e.jsx(ba,{children:s.label},s.key)}),e.jsx(_a,{items:(x==null?void 0:x.data)||[],emptyContent:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),e.jsx("p",{className:"text-default-500 font-medium",children:"No objections found"}),e.jsx("p",{className:"text-default-400 text-sm mt-1",children:"Create your first objection to get started"})]}),children:s=>e.jsx(Ca,{className:s.is_active?"bg-warning-50/50 dark:bg-warning-900/10":"",children:a=>e.jsx(Sa,{children:xa(s,a)})},s.id)})]}),(x==null?void 0:x.last_page)>1&&e.jsx("div",{className:"flex justify-center mt-4 pt-4 border-t border-divider/30",children:e.jsx(Fa,{total:x.last_page,page:x.current_page,onChange:ra,size:y?"sm":"md",showControls:!0,showShadow:!0,color:"primary"})})]})})})]})]})})})]})};Xa.layout=v=>e.jsx(Oa,{children:v});export{Xa as default};
