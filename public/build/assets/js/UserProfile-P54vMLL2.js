import{j as e,a as me,d as we,U as We,h as J,b as A,K as Le,e as pe,F as ve,A as Y,B as X,C as Z,D as Q,i as S,s as U,l as K,E as ee,k as ue,g as Oe,H as Ue,I as le}from"./vendor-heroui-BNTwcCTa.js";import{r as m,R as Be,J as Ee,Q as Re}from"./vendor-inertia-sUfCHI_5.js";import{P as Ae,t as ge,b as ce,A as ze,p as Pe,c as Ge,v as qe,g as Ve,o as De}from"./Dashboard-DYWDEaG1.js";import{P as He}from"./PageHeader-Bvf_UnuP.js";import{S as Ke}from"./StatsCards-CPetdPRG.js";import{e as O,A as Fe}from"./vendor-framer-Bf5AFsoJ.js";import{F as _e}from"./CheckCircleIcon-BAvoXTNq.js";import{F as xe}from"./ExclamationTriangleIcon-BarRaUA8.js";import{F as Ne}from"./PencilIcon-BsmkHcSS.js";import{F as Je}from"./HashtagIcon-265IgP8i.js";import{F as Ie,a as Ye}from"./MapPinIcon-DDwLGyCW.js";import{F as Xe}from"./EnvelopeIcon-CFKoTD3N.js";import{a as Ze,F as Qe}from"./XMarkIcon-twQGc8di.js";import{s as R}from"./toastUtils-NefoP8kr.js";import{c as be}from"./createLucideIcon-DJAbkOCz.js";import{C as er}from"./camera-Dwb5Er8t.js";import{U as rr}from"./user-CD9nOF0M.js";import{G as he}from"./GlassCard-BGKsFeUY.js";import{U as ar}from"./users-8C1qTPe3.js";import{B as tr}from"./briefcase-Dr4haPmG.js";import{a as sr}from"./vendor-utils-CrJAVL9K.js";import{d as nr}from"./dayjs.min-BJ9zlrPD.js";import{F as ir}from"./ClockIcon-BKLni_N9.js";import{F as or}from"./ChartBarIcon-BGC3fra6.js";import{F as lr}from"./UserPlusIcon-DxLlp7sC.js";import{F as Me}from"./DocumentArrowDownIcon-DCm9Iy1y.js";import{F as de}from"./UserIcon-CgrjQ1A2.js";import{F as dr}from"./MagnifyingGlassIcon-BJyUDYwI.js";import{F as cr}from"./AdjustmentsHorizontalIcon-lemo7t2o.js";import{F as ye}from"./HeartIcon-DRLfg0vS.js";import{F as mr}from"./ShieldCheckIcon-Ck-ae4AP.js";import"./vendor-react-FouZbkAE.js";import"./app-Z_W2a0k6.js";import"./UserGroupIcon-CSQScwVa.js";import"./KeyIcon-BIi5nz4o.js";import"./logo-DFaNDj_M.js";function pr({title:a,titleId:D,...h},I){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:I,"aria-labelledby":D},h),a?m.createElement("title",{id:D},a):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const ne=m.forwardRef(pr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],xr=be("credit-card",ur);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],br=be("graduation-cap",hr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],yr=be("phone",fr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$e=be("plus",gr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ce=be("x",vr),_r=({user:a,departments:D=[],designations:h=[],onEditClick:I,profileStats:i={},canEdit:b=!1})=>{const[E,c]=m.useState(!1),f=D.find(g=>g.id===a.department_id||g.id===a.department),y=h.find(g=>g.id===a.designation_id||g.id===a.designation),t=()=>a.active?"success":"danger",l=()=>{const g=i.completion_percentage||0;return g>=80?"success":g>=50?"warning":"danger"};return e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(me,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-300",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[e.jsx(we,{className:"flex gap-4 pb-0",children:e.jsxs("div",{className:"flex gap-4 items-start w-full",children:[e.jsx("div",{className:"relative",children:e.jsx(We,{content:e.jsx("div",{className:`w-4 h-4 rounded-full ${a.active?"bg-success-500":"bg-danger-500"} border-2 border-background`}),placement:"bottom-right",className:"border-0",children:e.jsx(Ae,{src:a.profile_image_url||a.profile_image,name:a.name,size:"lg",className:"ring-2 ring-white/20 hover:ring-white/40 transition-all duration-300"})})}),e.jsxs("div",{className:"flex flex-col gap-2 flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:a.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[f&&e.jsx(J,{size:"sm",variant:"flat",color:"primary",startContent:e.jsx(ge,{className:"w-3 h-3"}),children:f.name}),y&&e.jsx(J,{size:"sm",variant:"flat",color:"secondary",children:y.title}),e.jsx(J,{size:"sm",variant:"flat",color:t(),startContent:a.active?e.jsx(_e,{className:"w-3 h-3"}):e.jsx(xe,{className:"w-3 h-3"}),children:a.active?"Active":"Inactive"})]})]}),b&&e.jsx(O.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(A,{color:"primary",variant:"bordered",size:"sm",startContent:e.jsx(Ne,{className:"w-4 h-4"}),onPress:I,className:"bg-white/10 hover:bg-white/20 border-white/20",children:"Edit Profile"})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Profile Completion"}),e.jsxs("span",{className:"text-sm font-semibold text-foreground",children:[i.completion_percentage||0,"%"]})]}),e.jsx(Le,{value:i.completion_percentage||0,color:l(),size:"sm",className:"max-w-full"}),e.jsxs("p",{className:"text-xs text-default-500 mt-1",children:[i.completed_sections||0," of ",i.total_sections||8," sections completed"]})]})]})]})}),e.jsxs(pe,{className:"pt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(Je,{className:"w-4 h-4 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Employee ID"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.employee_id||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(Ie,{className:"w-4 h-4 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Date of Joining"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.date_of_joining?new Date(a.date_of_joining).toLocaleDateString():"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(Xe,{className:"w-4 h-4 text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:a.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/20 rounded-lg",children:e.jsx(ce,{className:"w-4 h-4 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.phone||"N/A"})]})]})]}),a.address&&e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"mb-4"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-teal-500/20 rounded-lg",children:e.jsx(Ye,{className:"w-4 h-4 text-teal-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Address"}),e.jsx("p",{className:"text-sm text-foreground",children:a.address})]})]})]}),(i.profile_views||i.last_updated)&&e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"my-4"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-default-500",children:[i.profile_views&&e.jsxs("span",{children:["Views: ",i.profile_views]}),i.last_updated&&e.jsxs("span",{children:["Updated: ",new Date(i.last_updated).toLocaleDateString()]})]})]})]})]})})},ie=({title:a,icon:D,children:h,onEdit:I,canEdit:i=!1,isEmpty:b=!1,isCompleted:E=!1,className:c="",headerAction:f=null,...y})=>{const l=b?{color:"danger",icon:Ze,text:"Empty"}:E?{color:"success",icon:_e,text:"Complete"}:{color:"warning",icon:xe,text:"Incomplete"},g=l.icon;return e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{y:-2},className:c,children:e.jsxs(me,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-300 h-full",...y,children:[e.jsx(we,{className:"flex gap-3 pb-3",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[D&&e.jsx("div",{className:"p-2 bg-primary-500/20 rounded-lg",children:Be.cloneElement(D,{className:"w-5 h-5 text-primary-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-foreground",children:a}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx(J,{size:"sm",variant:"flat",color:l.color,startContent:e.jsx(g,{className:"w-3 h-3"}),children:l.text})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[f,i&&I&&e.jsx(O.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(A,{isIconOnly:!0,size:"sm",variant:"bordered",color:"primary",onPress:I,className:"bg-white/10 hover:bg-white/20 border-white/20",children:e.jsx(Ne,{className:"w-4 h-4"})})})]})]})}),e.jsx(pe,{className:"pt-0",children:b?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"p-4 bg-default-100/50 rounded-lg",children:[e.jsx(xe,{className:"w-8 h-8 text-default-400 mx-auto mb-2"}),e.jsx("p",{className:"text-default-500 text-sm",children:"No information available"}),i&&I&&e.jsx(A,{size:"sm",color:"primary",variant:"bordered",className:"mt-3",onPress:I,startContent:e.jsx(Ne,{className:"w-4 h-4"}),children:"Add Information"})]})}):h})]})})},z=({label:a,value:D,icon:h,type:I="text",className:i="",valueClassName:b="",labelClassName:E="",showDivider:c=!0})=>{const f=(t,l)=>{if(!t||t==="N/A")return"N/A";switch(l){case"date":return new Date(t).toLocaleDateString();case"email":return t;case"phone":return t;case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t);default:return t}},y=()=>!D||D==="N/A"?"text-default-400":"text-foreground";return e.jsxs("div",{className:`flex items-center justify-between py-3 ${c?"border-b border-white/10 last:border-b-0":""} ${i}`,children:[e.jsxs("div",{className:`flex items-center gap-2 text-sm text-default-600 ${E}`,children:[h&&Be.cloneElement(h,{className:"w-4 h-4"}),e.jsx("span",{children:a})]}),e.jsx("div",{className:`text-sm font-medium ${y()} text-right ${b}`,children:I==="chip"&&D&&D!=="N/A"?e.jsx(J,{size:"sm",variant:"flat",color:"primary",children:f(D,I)}):e.jsx("span",{children:f(D,I)})})]})},jr=({user:a,allUsers:D,departments:h,designations:I,setUser:i,open:b,closeModal:E})=>{const[c,f]=m.useState({id:a.id,name:a.name||"",gender:a.gender||"",birthday:a.birthday||"",date_of_joining:a.date_of_joining||"",address:a.address||"",employee_id:a.employee_id||"",phone:a.phone||"",email:a.email||"",department:a.department_id||a.department||"",designation:a.designation_id||a.designation||"",report_to:a.report_to_id||a.report_to||""}),[y,t]=m.useState({id:a.id}),[l,g]=m.useState(!1),[j,d]=m.useState({}),[u,w]=m.useState(!1),[n,o]=m.useState(!1),[s,r]=m.useState(null),[p,N]=m.useState(I),[C,P]=m.useState(D),_=x=>{const B=x.target.files[0];if(B){const M=B.type;if(!["image/jpeg","image/jpg","image/png"].includes(M)){R.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}});return}const $=URL.createObjectURL(B);r($);const re=new Promise(async(V,q)=>{var G,ae,T;try{const L=new FormData;L.append("id",a.id),L.append("profile_image",B),L.append("ruleSet","profile_image");const H=await axios.post(route("profile.update"),L,{headers:{"Content-Type":"multipart/form-data"}});H.data.user?(i(H.data.user),r(null),V(H.data.messages||["Profile image updated successfully"])):q("Failed to update profile image")}catch(L){if(r(null),((G=L.response)==null?void 0:G.status)===422){const H=L.response.data.errors,te=Object.values(H).flat();q(te.join(". "))}else(T=(ae=L.response)==null?void 0:ae.data)!=null&&T.error?q(L.response.data.error):q(L.message||"Failed to update profile image")}});R.promise(re,{pending:{render(){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{size:"sm"}),e.jsx("span",{children:"Uploading image..."})]})},icon:!1,style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-divider, #E4E4E7)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}},success:{render({data:V}){return Array.isArray(V)?V.join(". "):V},icon:"âœ…",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-success, #17C964)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}},error:{render({data:V}){return V||"Failed to update profile image"},icon:"âŒ",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}})}},k=(x,B)=>{f(M=>{const $={...M,[x]:B};return B===""&&delete $[x],x==="department"&&B!==M.department&&($.designation="",$.report_to=""),$}),t(M=>{const $={...M,[x]:B};return B===""&&delete $[x],x==="department"&&B!==c.department&&($.designation="",$.report_to=""),$})};m.useEffect(()=>{const x=y.department||c.department,B=y.designation||c.designation,M=x?parseInt(x):null,$=B?parseInt(B):null;N(I.filter(T=>{const L=parseInt(T.department_id);return M&&L===M}));const re=I.find(T=>parseInt(T.id)===$),V=re?parseInt(re.hierarchy_level):999,q=D.filter(T=>{const L=parseInt(T.department_id||T.department),H=parseInt(T.designation_id||T.designation),te=I.find(fe=>parseInt(fe.id)===H),oe=te?parseInt(te.hierarchy_level):999;return L===M&&oe<V&&oe>0||T.id===c.report_to||T.id===y.report_to});P(q);const G={...y};for(const T in G)T!=="id"&&G[T]===a[T]&&delete G[T];const ae=Object.keys(G).length>1;g(ae)},[c,y]);const F=async x=>{var B;x.preventDefault(),w(!0);try{const M=await axios.post(route("profile.update"),{ruleSet:"profile",...c});M.status===200&&(i(M.data.user),R.success(((B=M.data.messages)==null?void 0:B.length)>0?M.data.messages.join(" "):"Profile information updated successfully",{icon:"ðŸŸ¢",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-success, #17C964)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),E())}catch(M){w(!1),M.response?(M.response.status===422?(d(M.response.data.errors||{}),R.error(M.response.data.error||"Failed to update profile information.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})):R.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),console.error(M.response.data)):M.request?(R.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),console.error(M.request)):(R.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),console.error("Error",M.message))}finally{w(!1)}};return e.jsx(Y,{isOpen:b,onOpenChange:E,size:"5xl",scrollBehavior:"inside",backdrop:"blur",hideCloseButton:!0,classNames:{backdrop:"bg-black/30",base:"max-h-[90vh]",body:"p-0",header:"p-0",footer:"p-0"},children:e.jsxs(X,{style:{background:`linear-gradient(135deg, 
                        var(--theme-content1, #FAFAFA) 20%, 
                        var(--theme-content2, #F4F4F5) 10%, 
                        var(--theme-content3, #F1F3F4) 20%)`,borderColor:"var(--theme-divider, #E4E4E7)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:[e.jsx(Z,{className:"p-0",children:e.jsxs("div",{className:"flex items-center justify-between p-6 border-b w-full",style:{borderColor:"var(--theme-divider, #E4E4E7)",color:"var(--theme-foreground, #11181C)"},children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--theme-foreground, #11181C)",fontFamily:'var(--fontFamily, "Inter")'},children:"Profile Information"}),e.jsx(A,{isIconOnly:!0,variant:"light",onPress:E,style:{color:"var(--theme-foreground-600, #71717A)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(Ce,{size:20})})]})}),e.jsx(Q,{className:"p-0",children:e.jsxs("form",{onSubmit:F,children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-full flex items-center justify-center",children:e.jsxs("div",{className:"relative inline-block",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[e.jsx(Ae,{src:s||a.profile_image,name:y.name||c.name,size:"lg",className:"w-24 h-24"}),n&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full rounded-full flex justify-center items-center cursor-pointer",style:{background:"color-mix(in srgb, var(--theme-default, #71717A) 50%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(A,{isIconOnly:!0,variant:"light",className:"text-white",children:e.jsx(er,{size:20})})})}),e.jsx("input",{accept:"image/*",style:{display:"none"},id:"upload-button",type:"file",onChange:_}),e.jsx("label",{htmlFor:"upload-button",children:e.jsx("div",{className:"absolute w-full h-full top-0 left-0 rounded-full cursor-pointer"})})]})}),e.jsx("div",{children:e.jsx(S,{label:"Name",value:y.name||c.name||"",onChange:x=>k("name",x.target.value),isInvalid:!!j.name,errorMessage:j.name,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsxs(U,{label:"Gender",selectedKeys:y.gender||c.gender?[y.gender||c.gender]:[],onSelectionChange:x=>k("gender",Array.from(x)[0]),isInvalid:!!j.gender,errorMessage:j.gender,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(K,{value:"Male",children:"Male"},"Male"),e.jsx(K,{value:"Female",children:"Female"},"Female")]})}),e.jsx("div",{children:e.jsx(S,{label:"Birth Date",type:"date",value:y.birthday||c.birthday||"",onChange:x=>k("birthday",x.target.value),isInvalid:!!j.birthday,errorMessage:j.birthday,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Joining Date",type:"date",value:y.date_of_joining||c.date_of_joining||"",onChange:x=>k("date_of_joining",x.target.value),isInvalid:!!j.date_of_joining,errorMessage:j.date_of_joining,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-full",children:e.jsx(S,{label:"Address",value:y.address||c.address,onChange:x=>k("address",x.target.value),isInvalid:!!j.address,errorMessage:j.address,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Employee ID",value:y.employee_id||c.employee_id||"",onChange:x=>k("employee_id",x.target.value),isInvalid:!!j.employee_id,errorMessage:j.employee_id,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Phone Number",value:y.phone||c.phone,onChange:x=>k("phone",x.target.value),isInvalid:!!j.phone,errorMessage:j.phone,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Email Address",value:y.email||c.email,onChange:x=>k("email",x.target.value),isInvalid:!!j.email,errorMessage:j.email,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(U,{label:"Department",selectedKeys:y.department||c.department?[String(y.department||c.department)]:[],onSelectionChange:x=>k("department",Array.from(x)[0]),isInvalid:!!j.department,errorMessage:j.department,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:h.map(x=>e.jsx(K,{value:x.id,children:x.name},x.id))})}),e.jsx("div",{children:e.jsx(U,{label:"Designation",selectedKeys:y.designation||c.designation?[String(y.designation||c.designation)]:[],onSelectionChange:x=>k("designation",Array.from(x)[0]),isInvalid:!!j.designation,errorMessage:j.designation,isDisabled:!(y.department||c.department),variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:p.map(x=>e.jsx(K,{value:x.id,children:x.title},x.id))})}),e.jsx("div",{children:e.jsxs(U,{label:"Reports To",selectedKeys:y.report_to||c.report_to?[String(y.report_to||c.report_to)]:[],onSelectionChange:x=>k("report_to",Array.from(x)[0]),isInvalid:!!j.report_to,errorMessage:j.report_to,isDisabled:a.report_to==="na",variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(K,{value:"na",children:"--"},"na"),C.map(x=>e.jsx(K,{value:x.id,children:x.name},x.id))]})})]})}),e.jsx(ee,{className:"p-0",children:e.jsx("div",{className:"flex items-center justify-center p-6 border-t w-full",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsx(A,{isDisabled:!l,className:"rounded-full px-6",variant:"bordered",color:"primary",type:"submit",isLoading:u,style:{borderColor:"var(--theme-primary, #006FEE)",color:"var(--theme-primary, #006FEE)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})})})]})})]})})},Fr=({user:a,setUser:D,open:h,closeModal:I})=>{const i=()=>{var r;if(typeof window>"u")return"lg";const o=((r=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:r.trim())||"12px",s=parseInt(o);return s===0?"none":s<=4?"sm":s<=8?"md":s<=16?"lg":"full"},[b,E]=m.useState({id:a.id,passport_no:a.passport_no||"",passport_exp_date:a.passport_exp_date||"",nationality:a.nationality||"",religion:a.religion||"",marital_status:a.marital_status||"",employment_of_spouse:a.employment_of_spouse||"",number_of_children:a.number_of_children||"",nid:a.nid||""}),[c,f]=m.useState({id:a.id}),[y,t]=m.useState(!1),[l,g]=m.useState({}),[j,d]=m.useState(!1),u=(n,o)=>{E(s=>{const r={...s,[n]:o};return o===""&&delete r[n],n==="marital_status"&&o==="Single"&&(r.employment_of_spouse="",r.number_of_children=""),r}),f(s=>{const r={...s,[n]:o};return o===""&&delete r[n],n==="marital_status"&&o==="Single"&&(r.employment_of_spouse=null,r.number_of_children=null),r})};m.useEffect(()=>{for(const o in c)o!=="id"&&c[o]===a[o]&&delete c[o];const n=Object.keys(c).filter(o=>o!=="id").length>0;t(n)},[b,c,a]);const w=async n=>{var o;n.preventDefault(),d(!0);try{const s=await axios.post(route("profile.update"),{ruleSet:"personal",...b});s.status===200&&(D(s.data.user),R.success(((o=s.data.messages)==null?void 0:o.length)>0?s.data.messages.join(" "):"Personal information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),I())}catch(s){d(!1),s.response?(s.response.status===422?(g(s.response.data.errors||{}),R.error(s.response.data.error||"Failed to update personal information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):R.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(s.response.data)):s.request?(R.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(s.request)):(R.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error("Error",s.message))}finally{d(!1)}};return e.jsx(Y,{isOpen:h,onOpenChange:j?void 0:I,size:"2xl",radius:i(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(X,{children:[e.jsxs(Z,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(rr,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Personal Information"})]}),e.jsxs("form",{onSubmit:w,children:[e.jsx(Q,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(S,{label:"Passport No",value:c.passport_no||b.passport_no||"",onChange:n=>u("passport_no",n.target.value),isInvalid:!!l.passport_no,errorMessage:l.passport_no,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Passport Expiry Date",type:"date",value:c.passport_exp_date||b.passport_exp_date||"",onChange:n=>u("passport_exp_date",n.target.value),isInvalid:!!l.passport_exp_date,errorMessage:l.passport_exp_date,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"NID No",value:c.nid||b.nid||"",onChange:n=>u("nid",n.target.value),isInvalid:!!l.nid,errorMessage:l.nid,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Nationality",value:c.nationality||b.nationality||"",onChange:n=>u("nationality",n.target.value),isInvalid:!!l.nationality,errorMessage:l.nationality,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Religion",value:c.religion||b.religion||"",onChange:n=>u("religion",n.target.value),isInvalid:!!l.religion,errorMessage:l.religion,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsxs(U,{label:"Marital Status",selectedKeys:c.marital_status||b.marital_status?[c.marital_status||b.marital_status]:[],onSelectionChange:n=>u("marital_status",Array.from(n)[0]),isInvalid:!!l.marital_status,errorMessage:l.marital_status,variant:"bordered",size:"sm",radius:i(),classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(K,{value:"na",children:"-"},"na"),e.jsx(K,{value:"Single",children:"Single"},"Single"),e.jsx(K,{value:"Married",children:"Married"},"Married")]})}),e.jsx("div",{children:e.jsx(S,{label:"Employment of spouse",value:c.marital_status==="Single"?"":c.employment_of_spouse||b.employment_of_spouse,onChange:n=>u("employment_of_spouse",n.target.value),isInvalid:!!l.employment_of_spouse,errorMessage:l.employment_of_spouse,isDisabled:c.marital_status==="Single"||b.marital_status==="Single",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"No. of children",type:"number",value:c.marital_status==="Single"?"":c.number_of_children||b.number_of_children,onChange:n=>u("number_of_children",n.target.value),isInvalid:!!l.number_of_children,errorMessage:l.number_of_children,isDisabled:c.marital_status==="Single"||b.marital_status==="Single",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}),e.jsxs(ee,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(A,{onPress:I,isDisabled:j,variant:"light",radius:i(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(A,{isDisabled:!y,variant:"bordered",color:"primary",type:"submit",isLoading:j,radius:i(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},Nr=({user:a,setUser:D,open:h,closeModal:I})=>{const i=()=>{var r;if(typeof window>"u")return"lg";const o=((r=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:r.trim())||"12px",s=parseInt(o);return s===0?"none":s<=4?"sm":s<=8?"md":s<=16?"lg":"full"},[b,E]=m.useState({id:a.id,emergency_contact_primary_name:a.emergency_contact_primary_name||"",emergency_contact_primary_relationship:a.emergency_contact_primary_relationship||"",emergency_contact_primary_phone:a.emergency_contact_primary_phone||"",emergency_contact_secondary_name:a.emergency_contact_secondary_name||"",emergency_contact_secondary_relationship:a.emergency_contact_secondary_relationship||"",emergency_contact_secondary_phone:a.emergency_contact_secondary_phone||""}),[c,f]=m.useState({id:a.id}),[y,t]=m.useState(!1),[l,g]=m.useState({}),[j,d]=m.useState(!1),u=(n,o)=>{E(s=>{const r={...s,[n]:o};return o===""&&delete r[n],r}),f(s=>{const r={...s,[n]:o};return o===""&&delete r[n],r})};m.useEffect(()=>{for(const o in c)o!=="id"&&c[o]===a[o]&&delete c[o];const n=Object.keys(c).filter(o=>o!=="id").length>0;t(n)},[b,c,a]);const w=async n=>{var o;n.preventDefault(),d(!0);try{const s=await axios.post(route("profile.update"),{ruleSet:"emergency",...b});s.status===200&&(D(s.data.user),R.success(((o=s.data.messages)==null?void 0:o.length)>0?s.data.messages.join(" "):"Emergency contact updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),I())}catch(s){d(!1),s.response?(s.response.status===422?(g(s.response.data.errors||{}),R.error(s.response.data.error||"Failed to update emergency contact.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):R.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(s.response.data)):s.request?(R.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(s.request)):(R.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error("Error",s.message))}finally{d(!1)}};return e.jsx(Y,{isOpen:h,onOpenChange:j?void 0:I,size:"2xl",radius:i(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(X,{children:[e.jsxs(Z,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(yr,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Emergency Contact Information"})]}),e.jsxs("form",{onSubmit:w,children:[e.jsx(Q,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx(he,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Primary Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(S,{label:"Name",isRequired:!0,value:c.emergency_contact_primary_name||b.emergency_contact_primary_name||"",onChange:n=>u("emergency_contact_primary_name",n.target.value),isInvalid:!!l.emergency_contact_primary_name,errorMessage:l.emergency_contact_primary_name,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Relationship",isRequired:!0,value:c.emergency_contact_primary_relationship||b.emergency_contact_primary_relationship||"",onChange:n=>u("emergency_contact_primary_relationship",n.target.value),isInvalid:!!l.emergency_contact_primary_relationship,errorMessage:l.emergency_contact_primary_relationship,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Phone",isRequired:!0,value:c.emergency_contact_primary_phone||b.emergency_contact_primary_phone||"",onChange:n=>u("emergency_contact_primary_phone",n.target.value),isInvalid:!!l.emergency_contact_primary_phone,errorMessage:l.emergency_contact_primary_phone,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})}),e.jsx("div",{children:e.jsx(he,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Secondary Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(S,{label:"Name",value:c.emergency_contact_secondary_name||b.emergency_contact_secondary_name||"",onChange:n=>u("emergency_contact_secondary_name",n.target.value),isInvalid:!!l.emergency_contact_secondary_name,errorMessage:l.emergency_contact_secondary_name,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Relationship",value:c.emergency_contact_secondary_relationship||b.emergency_contact_secondary_relationship||"",onChange:n=>u("emergency_contact_secondary_relationship",n.target.value),isInvalid:!!l.emergency_contact_secondary_relationship,errorMessage:l.emergency_contact_secondary_relationship,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Phone",value:c.emergency_contact_secondary_phone||b.emergency_contact_secondary_phone||"",onChange:n=>u("emergency_contact_secondary_phone",n.target.value),isInvalid:!!l.emergency_contact_secondary_phone,errorMessage:l.emergency_contact_secondary_phone,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})})]})}),e.jsxs(ee,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(A,{onPress:I,isDisabled:j,variant:"light",radius:i(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(A,{isDisabled:!y,variant:"bordered",color:"primary",type:"submit",isLoading:j,radius:i(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},Ir=({user:a,setUser:D,open:h,closeModal:I})=>{const i=()=>{var r;if(typeof window>"u")return"lg";const o=((r=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:r.trim())||"12px",s=parseInt(o);return s===0?"none":s<=4?"sm":s<=8?"md":s<=16?"lg":"full"},[b,E]=m.useState({id:a.id,bank_name:a.bank_name||"",bank_account_no:a.bank_account_no||"",ifsc_code:a.ifsc_code||"",pan_no:a.pan_no||""}),[c,f]=m.useState({id:a.id}),[y,t]=m.useState(!1),[l,g]=m.useState({}),[j,d]=m.useState(!1),u=(n,o)=>{E(s=>{const r={...s,[n]:o};return o===""&&delete r[n],r}),f(s=>{const r={...s,[n]:o};return o===""&&delete r[n],r})};m.useEffect(()=>{for(const o in c)o!=="id"&&c[o]===a[o]&&delete c[o];const n=Object.keys(c).filter(o=>o!=="id").length>0;t(n)},[b,c,a]);const w=async n=>{var o;n.preventDefault(),d(!0);try{const s=await axios.post(route("profile.update"),{ruleSet:"bank",...b});s.status===200&&(D(s.data.user),g({}),R.success(((o=s.data.messages)==null?void 0:o.length)>0?s.data.messages.join(" "):"Bank information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),I())}catch(s){d(!1),s.response?(s.response.status===422?(g(s.response.data.errors||{}),R.error(s.response.data.error||"Failed to update bank information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):R.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(s.response.data)):s.request?(R.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(s.request)):(R.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error("Error",s.message))}finally{d(!1)}};return e.jsx(Y,{isOpen:h,onOpenChange:j?void 0:I,size:"2xl",radius:i(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(X,{children:[e.jsxs(Z,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(xr,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Bank Information"})]}),e.jsxs("form",{onSubmit:w,children:[e.jsx(Q,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx(S,{label:"Bank Name",value:c.bank_name||b.bank_name||"",onChange:n=>u("bank_name",n.target.value),isInvalid:!!l.bank_name,errorMessage:l.bank_name,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Bank Account No.",value:c.bank_account_no||b.bank_account_no||"",onChange:n=>u("bank_account_no",n.target.value),isInvalid:!!l.bank_account_no,errorMessage:l.bank_account_no,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"IFSC Code",value:c.ifsc_code||b.ifsc_code||"",onChange:n=>u("ifsc_code",n.target.value),isInvalid:!!l.ifsc_code,errorMessage:l.ifsc_code,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"PAN No.",value:c.pan_no||b.pan_no||"",onChange:n=>u("pan_no",n.target.value),isInvalid:!!l.pan_no,errorMessage:l.pan_no,variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}),e.jsxs(ee,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(A,{onPress:I,isDisabled:j,variant:"light",radius:i(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(A,{isDisabled:!y,variant:"bordered",color:"primary",type:"submit",isLoading:j,radius:i(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},wr=({user:a,open:D,closeModal:h,handleDelete:I,setUser:i})=>{const b=()=>{var p;if(typeof window>"u")return"lg";const s=((p=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:p.trim())||"12px",r=parseInt(s);return r===0?"none":r<=4?"sm":r<=8?"md":r<=16?"lg":"full"},[E,c]=m.useState({id:a.id,family_member_name:a.family_member_name||"",family_member_relationship:a.family_member_relationship||"",family_member_dob:a.family_member_dob||"",family_member_phone:a.family_member_phone||""}),[f,y]=m.useState({id:a.id}),[t,l]=m.useState(!1),[g,j]=m.useState({}),[d,u]=m.useState(!1),w=(o,s)=>{c(r=>{const p={...r,[o]:s};return s===""&&delete p[o],p}),y(r=>{const p={...r,[o]:s};return s===""&&delete p[o],p})};m.useEffect(()=>{for(const s in f)s!=="id"&&f[s]===a[s]&&delete f[s];const o=Object.keys(f).filter(s=>s!=="id").length>0;l(o)},[E,f,a]);const n=async o=>{var s;o.preventDefault(),u(!0);try{const r=await axios.post(route("profile.update"),{ruleSet:"family",...E});r.status===200&&(i(r.data.user),R.success(((s=r.data.messages)==null?void 0:s.length)>0?r.data.messages.join(" "):"Family information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),h())}catch(r){u(!1),r.response?(r.response.status===422?(j(r.response.data.errors||{}),R.error(r.response.data.error||"Failed to update family information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):R.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(r.response.data)):r.request?(R.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(r.request)):(R.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error("Error",r.message))}finally{u(!1)}};return e.jsx(Y,{isOpen:D,onOpenChange:d?void 0:h,size:"2xl",radius:b(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(X,{children:[e.jsxs(Z,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(ar,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Family Member"})]}),e.jsxs("form",{onSubmit:n,children:[e.jsx(Q,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Name",variant:"bordered",value:f.family_member_name||E.family_member_name||"",onChange:o=>w("family_member_name",o.target.value),isInvalid:!!g.family_member_name,errorMessage:g.family_member_name,size:"sm",radius:b(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Relationship",variant:"bordered",value:f.family_member_relationship||E.family_member_relationship||"",onChange:o=>w("family_member_relationship",o.target.value),isInvalid:!!g.family_member_relationship,errorMessage:g.family_member_relationship,size:"sm",radius:b(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Date of Birth",variant:"bordered",type:"date",value:f.family_member_dob||E.family_member_dob||"",onChange:o=>w("family_member_dob",o.target.value),isInvalid:!!g.family_member_dob,errorMessage:g.family_member_dob,size:"sm",radius:b(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Phone",variant:"bordered",value:f.family_member_phone||E.family_member_phone||"",onChange:o=>w("family_member_phone",o.target.value),isInvalid:!!g.family_member_phone,errorMessage:g.family_member_phone,size:"sm",radius:b(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}),e.jsxs(ee,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(A,{onPress:h,isDisabled:d,variant:"light",radius:b(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(A,{isDisabled:!t,variant:"bordered",color:"primary",type:"submit",isLoading:d,radius:b(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},Cr=({user:a,open:D,closeModal:h,setUser:I})=>{const i=()=>{var N;if(typeof window>"u")return"lg";const r=((N=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:N.trim())||"12px",p=parseInt(r);return p===0?"none":p<=4?"sm":p<=8?"md":p<=16?"lg":"full"},[b,E]=m.useState({id:a.id}),[c,f]=m.useState(!1),[y,t]=m.useState(a.educations&&a.educations.length>0?a.educations:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),[l,g]=m.useState({}),[j,d]=m.useState(!1),u=(s,r,p)=>{const N=[...y];N[s]={...N[s],[r]:p},t(N);const C=N.filter((_,k)=>{const F=a.educations[k]||{},x=!F.id||_.institution!==F.institution||_.subject!==F.subject||_.degree!==F.degree||_.starting_date!==F.starting_date||_.complete_date!==F.complete_date||_.grade!==F.grade,B=F.id&&_.institution===F.institution&&_.subject===F.subject&&_.degree===F.degree&&_.starting_date===F.starting_date&&_.complete_date===F.complete_date&&_.grade===F.grade;return x&&!B});E(_=>({..._,educations:[...C]}));const P=C.length>0;f(P)},w=async s=>{const r=y[s],p=y.filter((N,C)=>C!==s);if(t(p.length>0?p:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),r.id){const N=new Promise(async(C,P)=>{try{const _=await fetch("/education/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:r.id,user_id:a.id})}),k=await _.json();_.ok?(E(F=>({...F,educations:k.educations})),I(F=>({...F,educations:k.educations})),C(k.message||"Education record deleted successfully.")):(g(k.errors),console.error(k.errors),P(k.error||"Failed to delete education record."))}catch(_){P(_)}});R.promise(N,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Deleting education record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:C}){return e.jsx(e.Fragment,{children:C})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:C}){return e.jsx(e.Fragment,{children:C})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})}},n=async s=>{s.preventDefault(),d(!0);const r=new Promise(async(p,N)=>{try{const C=await fetch("/education/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({educations:y.map(_=>({..._,user_id:a.id}))})}),P=await C.json();C.ok?(I(_=>({..._,educations:P.educations})),d(!1),h(),p([...P.messages])):(d(!1),g(P.errors),console.error(P.errors),N(P.error||"Failed to update education records."))}catch(C){d(!1),N(C.message||"An unexpected error occurred while updating education records.")}});R.promise(r,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Updating education records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:p}){return e.jsx(e.Fragment,{children:p.map((N,C)=>e.jsx("div",{children:N},C))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:p}){return e.jsx(e.Fragment,{children:p})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},o=async()=>{t([...y,{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}])};return e.jsx(Y,{isOpen:D,onOpenChange:j?void 0:h,size:"3xl",radius:i(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(X,{children:[e.jsxs(Z,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(br,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Education Information"})]}),e.jsxs("form",{onSubmit:n,children:[e.jsx(Q,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"space-y-4",children:[y.map((s,r)=>e.jsx("div",{children:e.jsx(he,{children:e.jsxs("div",{className:"p-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["Education #",r+1]}),e.jsx(A,{isIconOnly:!0,variant:"light",onPress:()=>w(r),className:"text-red-500 hover:text-red-700",size:"sm",radius:i(),children:e.jsx(Ce,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(S,{label:"Institution",value:s.institution||"",onChange:p=>u(r,"institution",p.target.value),isInvalid:!!l[`educations.${r}.institution`],errorMessage:l[`educations.${r}.institution`]?l[`educations.${r}.institution`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Degree",value:s.degree||"",onChange:p=>u(r,"degree",p.target.value),isInvalid:!!l[`educations.${r}.degree`],errorMessage:l[`educations.${r}.degree`]?l[`educations.${r}.degree`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Subject",value:s.subject||"",onChange:p=>u(r,"subject",p.target.value),isInvalid:!!l[`educations.${r}.subject`],errorMessage:l[`educations.${r}.subject`]?l[`educations.${r}.subject`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Started in",type:"month",value:s.starting_date||"",onChange:p=>u(r,"starting_date",p.target.value),isInvalid:!!l[`educations.${r}.starting_date`],errorMessage:l[`educations.${r}.starting_date`]?l[`educations.${r}.starting_date`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Completed in",type:"month",value:s.complete_date||"",onChange:p=>u(r,"complete_date",p.target.value),isInvalid:!!l[`educations.${r}.complete_date`],errorMessage:l[`educations.${r}.complete_date`]?l[`educations.${r}.complete_date`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Grade",value:s.grade||"",onChange:p=>u(r,"grade",p.target.value),isInvalid:!!l[`educations.${r}.grade`],errorMessage:l[`educations.${r}.grade`]?l[`educations.${r}.grade`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})},r)),e.jsx("div",{className:"mt-4",children:e.jsx(A,{size:"sm",color:"danger",variant:"bordered",onPress:o,startContent:e.jsx($e,{size:16}),radius:i(),children:"Add More"})})]})}),e.jsxs(ee,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(A,{onPress:h,isDisabled:j,variant:"light",radius:i(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(A,{isDisabled:!c,variant:"bordered",color:"primary",type:"submit",isLoading:j,radius:i(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},Sr=({user:a,open:D,closeModal:h,setUser:I})=>{const i=()=>{var N;if(typeof window>"u")return"lg";const r=((N=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:N.trim())||"12px",p=parseInt(r);return p===0?"none":p<=4?"sm":p<=8?"md":p<=16?"lg":"full"},[b,E]=m.useState({id:a.id}),[c,f]=m.useState(!1),[y,t]=m.useState(a.experiences.length>0?a.experiences:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),[l,g]=m.useState({}),[j,d]=m.useState(!1),u=(s,r,p)=>{const N=[...y];N[s]={...N[s],[r]:p},t(N);const C=N.filter((_,k)=>{const F=a.experiences[k]||{},x=!F.id||_.company_name!==F.company_name||_.location!==F.location||_.job_position!==F.job_position||_.period_from!==F.period_from||_.period_to!==F.period_to||_.description!==F.description,B=F.id&&_.company_name===F.company_name&&_.location===F.location&&_.job_position===F.job_position&&_.period_from===F.period_from&&_.period_to===F.period_to&&_.description===F.description;return x&&!B});E(_=>({..._,experiences:[...C]}));const P=C.length>0;f(P)},w=async s=>{const r=y[s],p=y.filter((N,C)=>C!==s);if(t(p.length>0?p:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),r.id){const N=new Promise(async(C,P)=>{try{const _=await fetch("/experience/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:r.id,user_id:a.id})}),k=await _.json();_.ok?(E(F=>({...F,experiences:k.experiences})),I(F=>({...F,experiences:k.experiences})),C(k.message||"Experience record deleted successfully."),h()):(g([...k.errors]),P(k.error||"Failed to delete experience record."))}catch(_){P(_)}});R.promise(N,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Deleting experience record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:C}){return e.jsx(e.Fragment,{children:C})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:C}){return e.jsx(e.Fragment,{children:C})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})}},n=async s=>{s.preventDefault(),d(!0);const r=new Promise(async(p,N)=>{try{const C=await fetch("/experience/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({experiences:y.map(_=>({..._,user_id:a.id}))})}),P=await C.json();C.ok?(I(_=>({..._,experiences:P.experiences})),d(!1),h(),p([...P.messages])):(d(!1),g(P.errors),console.error(P.errors),N(P.error||"Failed to update experience records."))}catch(C){d(!1),N(C.message||"An unexpected error occurred while updating experience records.")}});R.promise(r,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Updating experience records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:p}){return e.jsx(e.Fragment,{children:p.map((N,C)=>e.jsx("div",{children:N},C))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:p}){return e.jsx(e.Fragment,{children:p})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},o=async()=>{t([...y,{company:"",role:"",start_date:"",end_date:"",responsibilities:""}])};return e.jsx(Y,{isOpen:D,onOpenChange:j?void 0:h,size:"3xl",radius:i(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(X,{children:[e.jsxs(Z,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(tr,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Experience Information"})]}),e.jsxs("form",{onSubmit:n,children:[e.jsx(Q,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"space-y-4",children:[y.map((s,r)=>e.jsx("div",{children:e.jsx(he,{children:e.jsxs("div",{className:"p-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["Experience #",r+1]}),e.jsx(A,{isIconOnly:!0,variant:"light",onPress:()=>w(r),className:"text-red-500 hover:text-red-700",size:"sm",radius:i(),children:e.jsx(Ce,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(S,{label:"Company",value:s.company_name||"",onChange:p=>u(r,"company_name",p.target.value),isInvalid:!!l[`experiences.${r}.company_name`],errorMessage:l[`experiences.${r}.company_name`]?l[`experiences.${r}.company_name`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Location",value:s.location||"",onChange:p=>u(r,"location",p.target.value),isInvalid:!!l[`experiences.${r}.location`],errorMessage:l[`experiences.${r}.location`]?l[`experiences.${r}.location`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Role",value:s.job_position||"",onChange:p=>u(r,"job_position",p.target.value),isInvalid:!!l[`experiences.${r}.job_position`],errorMessage:l[`experiences.${r}.job_position`]?l[`experiences.${r}.job_position`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Started From",type:"date",value:s.period_from||"",onChange:p=>u(r,"period_from",p.target.value),isInvalid:!!l[`experiences.${r}.period_from`],errorMessage:l[`experiences.${r}.period_from`]?l[`experiences.${r}.period_from`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(S,{label:"Ended On",type:"date",value:s.period_to||"",onChange:p=>u(r,"period_to",p.target.value),isInvalid:!!l[`experiences.${r}.period_to`],errorMessage:l[`experiences.${r}.period_to`]?l[`experiences.${r}.period_to`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-full",children:e.jsx(S,{label:"Responsibilities",value:s.description||"",onChange:p=>u(r,"description",p.target.value),isInvalid:!!l[`experiences.${r}.description`],errorMessage:l[`experiences.${r}.description`]?l[`experiences.${r}.description`][0]:"",variant:"bordered",size:"sm",radius:i(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})},r)),e.jsx(A,{size:"sm",color:"danger",variant:"bordered",onPress:o,startContent:e.jsx($e,{size:16}),radius:i(),children:"Add More"})]})}),e.jsxs(ee,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(A,{onPress:h,isDisabled:j,variant:"light",radius:i(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(A,{isDisabled:!c,variant:"bordered",color:"primary",type:"submit",isLoading:j,radius:i(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},kr=({user:a,setUser:D})=>{const[h,I]=m.useState({id:a.id,salary_basis:a.salary_basis||"",salary_amount:a.salary_amount||"",payment_type:a.payment_type||"",pf_contribution:a.pf_contribution??!1,pf_no:a.pf_no||"",employee_pf_rate:a.employee_pf_rate||0,additional_pf_rate:a.additional_pf_rate||0,total_pf_rate:a.total_pf_rate||0,esi_contribution:a.esi_contribution??!1,esi_no:a.esi_no||"",employee_esi_rate:a.employee_esi_rate||0,additional_esi_rate:a.additional_esi_rate||0,total_esi_rate:a.total_esi_rate||0}),[i,b]=m.useState({id:a.id}),[E,c]=m.useState(!1),[f,y]=m.useState({}),[t,l]=m.useState(!1),g=(d,u)=>{I(w=>{const n={...w,[d]:u};return u===""&&delete n[d],d==="pf_contribution"&&u===0?(n.pf_no="",n.employee_pf_rate=0,n.additional_pf_rate=0,n.total_pf_rate=0):(d==="employee_pf_rate"||d==="additional_pf_rate")&&(n.total_pf_rate=n.employee_pf_rate+n.additional_pf_rate),d==="esi_contribution"&&u===0?(n.esi_no="",n.employee_esi_rate=0,n.additional_esi_rate=0,n.total_esi_rate=0):(d==="employee_esi_rate"||d==="additional_esi_rate")&&(n.total_esi_rate=n.employee_esi_rate+n.additional_esi_rate),n}),b(w=>{const n={...w,[d]:u};return u===""&&delete n[d],d==="pf_contribution"&&u===0?(n.pf_no="",n.employee_pf_rate=0,n.additional_pf_rate=0,n.total_pf_rate=0):(d==="employee_pf_rate"||d==="additional_pf_rate")&&(n.total_pf_rate=n.employee_pf_rate+n.additional_pf_rate),d==="esi_contribution"&&u===0?(n.esi_no="",n.employee_esi_rate=0,n.additional_esi_rate=0,n.total_esi_rate=0):(d==="employee_esi_rate"||d==="additional_esi_rate")&&(n.total_esi_rate=n.employee_esi_rate+n.additional_esi_rate),n})};m.useEffect(()=>{for(const u in i)u!=="id"&&i[u]===a[u]&&delete i[u];const d=Object.keys(i).filter(u=>u!=="id").length>0;c(d)},[h,i,a]);const j=async d=>{var u,w,n;d.preventDefault(),l(!0);try{const o=await axios.post(route("profile.update"),{ruleSet:"salary",...h});o.status===200?(D(o.data.user),l(!1),R.success(((u=o.data.messages)==null?void 0:u.length)>0?o.data.messages.join(" "):"Salary information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):(l(!1),y(o.data.errors),R.error(o.data.error||"Failed to update salary information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}))}catch(o){l(!1),R.error(((n=(w=o.response)==null?void 0:w.data)==null?void 0:n.message)||"An unexpected error occurred.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(o)}};return e.jsx(Grid,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:e.jsx(Grid,{item:!0,xs:12,md:12,sx:{display:"flex",flexDirection:"column"},children:e.jsxs(he,{children:[e.jsx(we,{title:"Salary & Statutory Information"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs(CardContent,{children:[e.jsx(Typography,{sx:{fontWeight:"bold",m:2},children:"Salary Information"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"salary-basis-label",children:"Salary basis"}),e.jsxs(U,{labelId:"salary-basis-label",value:i.salary_basis||h.salary_basis||"na",onChange:d=>g("salary_basis",d.target.value),error:!!f.salary_basis,helperText:f.salary_basis,label:"Salary basis",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select salary basis type"}),e.jsx(MenuItem,{value:"Hourly",children:"Hourly"}),e.jsx(MenuItem,{value:"Daily",children:"Daily"}),e.jsx(MenuItem,{value:"Weekly",children:"Weekly"}),e.jsx(MenuItem,{value:"Monthly",children:"Monthly"})]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{label:"Salary amount",type:"number",fullWidth:!0,placeholder:"Type your salary amount",value:i.salary_amount||h.salary_amount||"",onChange:d=>g("salary_amount",d.target.value),InputProps:{startAdornment:e.jsx(InputAdornment,{position:"start",children:"$"})},error:!!f.salary_amount,helperText:f.salary_amount})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"payment-type-label",children:"Payment type"}),e.jsxs(U,{labelId:"payment-type-label",label:"Payment type",id:`gender-select-${a.id}`,value:i.payment_type||h.payment_type||"na",onChange:d=>g("payment_type",d.target.value),error:!!f.payment_type,helperText:f.payment_type,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select payment type"}),e.jsx(MenuItem,{value:"Bank transfer",children:"Bank transfer"}),e.jsx(MenuItem,{value:"Check",children:"Check"}),e.jsx(MenuItem,{value:"Cash",children:"Cash"})]})]})})]}),e.jsx(ve,{sx:{my:3}}),e.jsx(Typography,{sx:{fontWeight:"bold",m:2},children:"PF Information"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"pf-contribution-label",children:"PF contribution"}),e.jsxs(U,{labelId:"pf-contribution-label",label:"PF contribution",id:`gender-select-${a.id}`,value:i.pf_contribution!==void 0?i.pf_contribution:h.pf_contribution!==void 0?h.pf_contribution:"na",onChange:d=>g("pf_contribution",d.target.value),error:!!f.pf_contribution,helperText:f.pf_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select PF contribution"}),e.jsx(MenuItem,{value:1,children:"Yes"}),e.jsx(MenuItem,{value:0,children:"No"})]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(i.pf_contribution||h.pf_contribution),InputLabelProps:{shrink:!0},label:"PF No.",fullWidth:!0,type:"text",placeholder:"Enter PF No.",value:i.pf_no||h.pf_no,onChange:d=>g("pf_no",d.target.value),error:!!f.pf_no,helperText:f.pf_no})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"employee-pf-rate-label",children:"Employee PF rate"}),e.jsxs(U,{disabled:!(i.pf_contribution||h.pf_contribution),labelId:"employee-pf-rate-label",label:"Employee PF rate",value:i.employee_pf_rate||h.employee_pf_rate||"na",onChange:d=>g("employee_pf_rate",d.target.value),error:!!f.employee_pf_rate,helperText:f.employee_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select pf rate"}),[...Array(11).keys()].map(d=>e.jsxs(MenuItem,{value:d,children:[d,"%"]},d))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"additional-rate-label",children:"Additional rate"}),e.jsxs(U,{disabled:!(i.pf_contribution||h.pf_contribution),labelId:"additional-rate-label",label:"Additional rate",id:`gender-select-${a.id}`,value:i.additional_pf_rate||h.additional_pf_rate||"na",onChange:d=>g("additional_pf_rate",d.target.value),error:!!f.additional_pf_rate,helperText:f.additional_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(d=>e.jsxs(MenuItem,{value:d,children:[d,"%"]},d))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(i.pf_contribution||h.pf_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:i.total_pf_rate||h.total_pf_rate?`${i.total_pf_rate||h.total_pf_rate}%`:"",InputProps:{readOnly:!0},error:!!f.total_pf_rate,helperText:f.total_pf_rate})})]}),e.jsx(ve,{sx:{my:3}}),e.jsx(Typography,{sx:{fontWeight:"bold",m:2},children:"ESI Information"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"esi-contribution-label",children:"ESI contribution"}),e.jsxs(U,{labelId:"esi-contribution-label",label:"ESI contribution",value:i.esi_contribution!==void 0?i.esi_contribution:h.esi_contribution!==void 0?h.esi_contribution:"na",onChange:d=>g("esi_contribution",d.target.value),error:!!f.esi_contribution,helperText:f.esi_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select ESI contribution"}),e.jsx(MenuItem,{value:1,children:"Yes"}),e.jsx(MenuItem,{value:0,children:"No"})]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(i.esi_contribution||h.esi_contribution),InputLabelProps:{shrink:!0},label:"ESI No.",fullWidth:!0,type:"text",placeholder:"Enter ESI No.",value:i.esi_no||h.esi_no,onChange:d=>g("esi_no",d.target.value),error:!!f.esi_no,helperText:f.esi_no})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"esi-contribution-label",children:"Employee ESI rate"}),e.jsxs(U,{disabled:!(i.esi_contribution||h.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:i.employee_esi_rate||h.employee_esi_rate||"na",onChange:d=>g("employee_esi_rate",d.target.value),error:!!f.employee_esi_rate,helperText:f.employee_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select esi rate"}),[...Array(11).keys()].map(d=>e.jsxs(MenuItem,{value:d,children:[d,"%"]},d))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"esi-contribution-label",children:"Additional rate"}),e.jsxs(U,{disabled:!(i.esi_contribution||h.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:i.additional_esi_rate||h.additional_esi_rate||"na",onChange:d=>g("additional_esi_rate",d.target.value),error:!!f.additional_esi_rate,helperText:f.additional_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(d=>e.jsxs(MenuItem,{value:d,children:[d,"%"]},d))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(i.esi_contribution||h.esi_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:i.total_esi_rate||h.total_esi_rate?`${i.total_esi_rate||h.total_esi_rate}%`:"",InputProps:{readOnly:!0},error:!!f.total_esi_rate,helperText:f.total_esi_rate})})]})]}),e.jsx(CardActions,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsx(LoadingButton,{disabled:!E,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:t,children:"Submit"})})]})]})})})},Er=({title:a,allUsers:D,report_to:h,departments:I,designations:i})=>{var oe,fe,Se,ke;const{auth:b}=Ee().props,[E,c]=m.useState(!1),[f,y]=m.useState(!1);m.useEffect(()=>{const v=()=>{c(window.innerWidth<640),y(window.innerWidth<768)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const[t,l]=m.useState(Ee().props.user),[g,j]=m.useState("overview"),[d,u]=m.useState(!1),[w,n]=m.useState({profile:!1,personal:!1,emergency:!1,bank:!1,family:!1,education:!1,experience:!1,salary:!1}),[o,s]=m.useState({search:"",section:"all",completionStatus:"all",showEmpty:!0}),[r,p]=m.useState(!1),[N,C]=m.useState({completion_percentage:0,total_sections:8,completed_sections:0,last_updated:null,profile_views:0}),P=((oe=b.permissions)==null?void 0:oe.includes("profile.own.update"))||((fe=b.permissions)==null?void 0:fe.includes("profile.update"))||b.user.id===t.id,_=((Se=b.permissions)==null?void 0:Se.includes("profile.own.view"))||((ke=b.permissions)==null?void 0:ke.includes("profile.view"))||b.user.id===t.id,k=m.useCallback(v=>{n(W=>({...W,[v]:!0}))},[]),F=m.useCallback(v=>{n(W=>({...W,[v]:!1}))},[]),x=m.useCallback((v,W)=>{s(se=>({...se,[v]:W}))},[]),B=m.useCallback(()=>{const v=[t.name&&t.email,t.phone&&t.address,t.birthday&&t.gender,t.department&&t.designation,t.emergency_contact_primary_name,t.bank_name||t.bank_account_no,t.educations&&t.educations.length>0,t.experiences&&t.experiences.length>0],W=v.filter(Boolean).length,se=Math.round(W/v.length*100);return C(je=>({...je,completion_percentage:se,completed_sections:W,total_sections:v.length})),{completed:W,total:v.length,percentage:se}},[t]),M=m.useCallback(async()=>{try{const v=await sr.get(route("profile.stats",{user:t.id}));v.data.stats&&C(W=>({...W,...v.data.stats}))}catch{const{completed:W,total:se,percentage:je}=B();C(Te=>({...Te,completion_percentage:je,completed_sections:W,total_sections:se,profile_views:0,last_updated:null}))}},[t.id,B]);m.useEffect(()=>{B(),M()},[B,M]);const $=m.useCallback(v=>{v&&l(v),B(),M(),R.success("Profile updated successfully")},[B,M]),re=m.useMemo(()=>[{title:"Profile Completion",value:`${N.completion_percentage}%`,icon:e.jsx(_e,{}),color:N.completion_percentage>=80?"text-green-400":N.completion_percentage>=50?"text-orange-400":"text-red-400",iconBg:N.completion_percentage>=80?"bg-green-500/20":N.completion_percentage>=50?"bg-orange-500/20":"bg-red-500/20",description:`${N.completed_sections}/${N.total_sections} sections completed`},{title:"Last Updated",value:N.last_updated?nr(N.last_updated).fromNow():"Never",icon:e.jsx(ir,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Profile last modified"},{title:"Profile Views",value:N.profile_views||0,icon:e.jsx(or,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Times profile viewed"},{title:"Account Status",value:t.active?"Active":"Inactive",icon:t.active?e.jsx(_e,{}):e.jsx(xe,{}),color:t.active?"text-green-400":"text-red-400",iconBg:t.active?"bg-green-500/20":"bg-red-500/20",description:"Current account status"}],[N,t.active]),V=m.useMemo(()=>{const v=[];return P&&v.push({label:E?"Edit":"Edit Profile",icon:e.jsx(lr,{className:"w-4 h-4"}),onPress:()=>k("profile"),color:"primary",variant:"solid"}),v.push({label:E?"":"Export",isIconOnly:E,icon:e.jsx(Me,{className:"w-4 h-4"}),color:"default",variant:"bordered"}),v},[P,E,k]),q=m.useCallback(v=>{switch(v){case"personal":return!t.passport_no&&!t.nationality&&!t.religion&&!t.marital_status;case"emergency":return!t.emergency_contact_primary_name&&!t.emergency_contact_secondary_name;case"bank":return!t.bank_name&&!t.bank_account_no&&!t.ifsc_code&&!t.pan_no;case"family":return!t.family_member_name&&!t.family_member_relationship;case"education":return!t.educations||t.educations.length===0;case"experience":return!t.experiences||t.experiences.length===0;default:return!1}},[t]),G=m.useCallback(v=>{switch(v){case"personal":return!!(t.passport_no&&t.nationality&&t.religion&&t.marital_status);case"emergency":return!!(t.emergency_contact_primary_name&&t.emergency_contact_primary_phone);case"bank":return!!(t.bank_name&&t.bank_account_no);case"family":return!!(t.family_member_name&&t.family_member_relationship);case"education":return!!(t.educations&&t.educations.length>0);case"experience":return!!(t.experiences&&t.experiences.length>0);default:return!1}},[t]);if(!_)return e.jsxs(ze,{children:[e.jsx(Re,{title:a}),e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx(me,{className:"bg-white/10 backdrop-blur-md border-white/20 max-w-md",children:e.jsxs(pe,{className:"p-8 text-center",children:[e.jsx(xe,{className:"w-16 h-16 text-warning-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-default-500",children:"You don't have permission to view this profile."})]})})})]});const ae=()=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ie,{title:"Personal Information",icon:e.jsx(ne,{}),onEdit:()=>k("personal"),canEdit:P,isEmpty:q("personal"),isCompleted:G("personal"),children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(z,{label:"Passport No.",value:t.passport_no,icon:e.jsx(ne,{})}),e.jsx(z,{label:"Passport Expiry",value:t.passport_exp_date,type:"date",icon:e.jsx(Ie,{})}),e.jsx(z,{label:"NID No.",value:t.nid,icon:e.jsx(ne,{})}),e.jsx(z,{label:"Nationality",value:t.nationality,icon:e.jsx(Qe,{})}),e.jsx(z,{label:"Religion",value:t.religion,icon:e.jsx(de,{})}),e.jsx(z,{label:"Marital Status",value:t.marital_status,type:"chip",icon:e.jsx(ye,{})}),e.jsx(z,{label:"Spouse Employment",value:t.employment_of_spouse,icon:e.jsx(ge,{})}),e.jsx(z,{label:"Children",value:t.number_of_children,icon:e.jsx(Pe,{}),showDivider:!1})]})}),e.jsx(ie,{title:"Emergency Contacts",icon:e.jsx(ce,{}),onEdit:()=>k("emergency"),canEdit:P,isEmpty:q("emergency"),isCompleted:G("emergency"),children:e.jsxs("div",{className:"space-y-4",children:[t.emergency_contact_primary_name&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-semibold text-foreground mb-2",children:"Primary Contact"}),e.jsxs("div",{className:"space-y-1 pl-4 border-l-2 border-primary-500",children:[e.jsx(z,{label:"Name",value:t.emergency_contact_primary_name,icon:e.jsx(de,{})}),e.jsx(z,{label:"Relationship",value:t.emergency_contact_primary_relationship,icon:e.jsx(ye,{})}),e.jsx(z,{label:"Phone",value:t.emergency_contact_primary_phone,type:"phone",icon:e.jsx(ce,{}),showDivider:!1})]})]}),t.emergency_contact_secondary_name&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-semibold text-foreground mb-2",children:"Secondary Contact"}),e.jsxs("div",{className:"space-y-1 pl-4 border-l-2 border-secondary-500",children:[e.jsx(z,{label:"Name",value:t.emergency_contact_secondary_name,icon:e.jsx(de,{})}),e.jsx(z,{label:"Relationship",value:t.emergency_contact_secondary_relationship,icon:e.jsx(ye,{})}),e.jsx(z,{label:"Phone",value:t.emergency_contact_secondary_phone,type:"phone",icon:e.jsx(ce,{}),showDivider:!1})]})]})]})}),e.jsx(ie,{title:"Banking Information",icon:e.jsx(qe,{}),onEdit:()=>k("bank"),canEdit:P,isEmpty:q("bank"),isCompleted:G("bank"),children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(z,{label:"Bank Name",value:t.bank_name,icon:e.jsx(Ge,{})}),e.jsx(z,{label:"Account Number",value:t.bank_account_no,icon:e.jsx(ne,{})}),e.jsx(z,{label:"IFSC Code",value:t.ifsc_code,icon:e.jsx(ne,{})}),e.jsx(z,{label:"PAN Number",value:t.pan_no,icon:e.jsx(ne,{}),showDivider:!1})]})}),e.jsx(ie,{title:"Family Information",icon:e.jsx(Pe,{}),onEdit:()=>k("family"),canEdit:P,isEmpty:q("family"),isCompleted:G("family"),children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(z,{label:"Member Name",value:t.family_member_name,icon:e.jsx(de,{})}),e.jsx(z,{label:"Relationship",value:t.family_member_relationship,icon:e.jsx(ye,{})}),e.jsx(z,{label:"Date of Birth",value:t.family_member_dob,type:"date",icon:e.jsx(Ie,{})}),e.jsx(z,{label:"Phone",value:t.family_member_phone,type:"phone",icon:e.jsx(ce,{}),showDivider:!1})]})}),e.jsx(ie,{title:"Education History",icon:e.jsx(Ve,{}),onEdit:()=>k("education"),canEdit:P,isEmpty:q("education"),isCompleted:G("education"),className:"lg:col-span-2",children:t.educations&&t.educations.length>0?e.jsx("div",{className:"space-y-4",children:t.educations.map((v,W)=>e.jsxs(O.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:W*.1},className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h5",{className:"font-semibold text-foreground mb-2",children:v.institution}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-default-500",children:"Degree:"}),e.jsx("p",{className:"font-medium",children:v.degree||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-default-500",children:"Start Date:"}),e.jsx("p",{className:"font-medium",children:v.starting_date?new Date(v.starting_date).getFullYear():"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-default-500",children:"End Date:"}),e.jsx("p",{className:"font-medium",children:v.complete_date?new Date(v.complete_date).getFullYear():"N/A"})]})]})]},v.id||W))}):null}),e.jsx(ie,{title:"Work Experience",icon:e.jsx(ge,{}),onEdit:()=>k("experience"),canEdit:P,isEmpty:q("experience"),isCompleted:G("experience"),className:"lg:col-span-2",children:t.experiences&&t.experiences.length>0?e.jsx("div",{className:"space-y-4",children:t.experiences.map((v,W)=>e.jsxs(O.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:W*.1},className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h5",{className:"font-semibold text-foreground mb-1",children:v.job_position}),e.jsx("p",{className:"text-primary-400 font-medium mb-2",children:v.company_name}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-default-500",children:"Duration:"}),e.jsxs("p",{className:"font-medium",children:[v.period_from?new Date(v.period_from).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"N/A"," ","- ",v.period_to?new Date(v.period_to).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Present"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-default-500",children:"Location:"}),e.jsx("p",{className:"font-medium",children:v.location||"N/A"})]})]}),v.description&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-default-500 text-sm",children:"Description:"}),e.jsx("p",{className:"text-sm mt-1",children:v.description})]})]},W))}):null})]}),T=()=>e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"p-8 bg-white/5 rounded-lg border border-white/10 max-w-md mx-auto",children:[e.jsx(ge,{className:"w-16 h-16 text-default-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Projects Coming Soon"}),e.jsx("p",{className:"text-default-500 text-sm",children:"Project management integration will be available in a future update."})]})}),L=()=>e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"p-8 bg-white/5 rounded-lg border border-white/10 max-w-md mx-auto",children:[e.jsx(De,{className:"w-16 h-16 text-default-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Salary Information"}),e.jsx("p",{className:"text-default-500 text-sm mb-4",children:"Access detailed salary and compensation information."}),P&&e.jsx(A,{color:"primary",variant:"bordered",onPress:()=>k("salary"),startContent:e.jsx(De,{className:"w-4 h-4"}),children:"View Salary Details"})]})}),H=()=>e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"p-8 bg-white/5 rounded-lg border border-white/10 max-w-md mx-auto",children:[e.jsx(mr,{className:"w-16 h-16 text-default-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Assets Coming Soon"}),e.jsx("p",{className:"text-default-500 text-sm",children:"Asset management and tracking will be available in a future update."})]})}),te=()=>e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"p-8 bg-white/5 rounded-lg border border-white/10 max-w-md mx-auto",children:[e.jsx(Me,{className:"w-16 h-16 text-default-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Documents Coming Soon"}),e.jsx("p",{className:"text-default-500 text-sm",children:"Document management and storage will be available in a future update."})]})});return e.jsxs(e.Fragment,{children:[e.jsx(Re,{title:t.name}),e.jsxs(Fe,{children:[w.profile&&e.jsx(jr,{user:t,allUsers:D,departments:I,designations:i,open:w.profile,setUser:l,closeModal:()=>F("profile"),onSuccess:$}),w.personal&&e.jsx(Fr,{user:t,open:w.personal,setUser:l,closeModal:()=>F("personal"),onSuccess:$}),w.emergency&&e.jsx(Nr,{user:t,open:w.emergency,setUser:l,closeModal:()=>F("emergency"),onSuccess:$}),w.bank&&e.jsx(Ir,{user:t,open:w.bank,setUser:l,closeModal:()=>F("bank"),onSuccess:$}),w.family&&e.jsx(wr,{user:t,open:w.family,setUser:l,closeModal:()=>F("family"),onSuccess:$}),w.education&&e.jsx(Cr,{user:t,open:w.education,setUser:l,closeModal:()=>F("education"),onSuccess:$}),w.experience&&e.jsx(Sr,{user:t,open:w.experience,setUser:l,closeModal:()=>F("experience"),onSuccess:$}),w.salary&&e.jsx(kr,{user:t,setUser:l})]}),e.jsx(He,{title:`${t.name}'s Profile`,subtitle:"Comprehensive employee profile management with advanced features",icon:e.jsx(de,{className:"w-8 h-8"}),variant:"default",actionButtons:V}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(Ke,{stats:re})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(_r,{user:t,departments:I,designations:i,onEditClick:()=>k("profile"),profileStats:N,canEdit:P})}),e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(S,{label:"Search Profile Sections",placeholder:"Search sections, fields, or content...",value:o.search,onChange:v=>x("search",v.target.value),startContent:e.jsx(dr,{className:"w-4 h-4",style:{color:"var(--theme-foreground-400, #71717A)"}}),variant:"bordered",size:E?"sm":"md",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(Oe,{variant:"bordered",className:"bg-white/5",children:e.jsxs(A,{isIconOnly:E,color:r?"primary":"default",onPress:()=>p(!r),className:r?"bg-purple-500/20":"bg-white/5",children:[e.jsx(cr,{className:"w-4 h-4"}),!E&&e.jsx("span",{className:"ml-1",children:"Filters"})]})})})]}),e.jsx(Fe,{children:r&&e.jsx(O.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsx(me,{className:"bg-white/10 backdrop-blur-md border-white/20",children:e.jsxs(pe,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(FormControl,{fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(16px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:2,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)"},"&.Mui-focused":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},"& .MuiInputLabel-root":{color:"text.secondary"}},children:[e.jsx(InputLabel,{children:"Profile Section"}),e.jsxs(U,{value:o.section||"all",label:"Profile Section",onChange:v=>x("section",v.target.value),children:[e.jsx(MenuItem,{value:"all",children:"All Sections"}),e.jsx(MenuItem,{value:"basic",children:"Basic Information"}),e.jsx(MenuItem,{value:"personal",children:"Personal Details"}),e.jsx(MenuItem,{value:"work",children:"Work Information"}),e.jsx(MenuItem,{value:"emergency",children:"Emergency Contacts"}),e.jsx(MenuItem,{value:"bank",children:"Banking Details"}),e.jsx(MenuItem,{value:"education",children:"Education"}),e.jsx(MenuItem,{value:"experience",children:"Experience"})]})]}),e.jsxs(FormControl,{fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(16px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:2,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)"},"&.Mui-focused":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},"& .MuiInputLabel-root":{color:"text.secondary"}},children:[e.jsx(InputLabel,{children:"Completion Status"}),e.jsxs(U,{value:o.completionStatus||"all",label:"Completion Status",onChange:v=>x("completionStatus",v.target.value),children:[e.jsx(MenuItem,{value:"all",children:"All Status"}),e.jsx(MenuItem,{value:"completed",children:"Completed"}),e.jsx(MenuItem,{value:"incomplete",children:"Incomplete"}),e.jsx(MenuItem,{value:"empty",children:"Empty"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-default-600",children:"Show Empty:"}),e.jsx(A,{size:"sm",variant:o.showEmpty?"solid":"bordered",color:o.showEmpty?"primary":"default",onPress:()=>x("showEmpty",!o.showEmpty),children:o.showEmpty?"Yes":"No"})]})]}),(o.search||o.section!=="all"||o.completionStatus!=="all")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[o.search&&e.jsxs(J,{variant:"flat",color:"primary",size:"sm",onClose:()=>x("search",""),children:["Search: ",o.search]}),o.section!=="all"&&e.jsxs(J,{variant:"flat",color:"secondary",size:"sm",onClose:()=>x("section","all"),children:["Section: ",o.section]}),o.completionStatus!=="all"&&e.jsxs(J,{variant:"flat",color:"warning",size:"sm",onClose:()=>x("completionStatus","all"),children:["Status: ",o.completionStatus]})]})]})})})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx(me,{className:"bg-white/10 backdrop-blur-md border-white/20",children:e.jsxs(pe,{className:"p-0",children:[e.jsxs(Ue,{selectedKey:g,onSelectionChange:j,variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-4 border-b border-white/10",cursor:"w-full bg-primary-500",tab:"max-w-fit px-4 h-12",tabContent:"group-data-[selected=true]:text-primary-foreground text-default-600 font-medium"},children:[e.jsx(le,{title:"Overview"},"overview"),e.jsx(le,{title:"Projects"},"projects"),e.jsx(le,{title:"Salary & Benefits"},"salary"),e.jsx(le,{title:"Assets"},"assets"),e.jsx(le,{title:"Documents"},"documents")]}),e.jsx("div",{className:"p-6",children:e.jsxs(Fe,{mode:"wait",children:[g==="overview"&&e.jsx(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:ae()},"overview"),g==="projects"&&e.jsx(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:T()},"projects"),g==="salary"&&e.jsx(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:L()},"salary"),g==="assets"&&e.jsx(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:H()},"assets"),g==="documents"&&e.jsx(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:te()},"documents")]})})]})})})]})]})};Er.layout=a=>e.jsx(ze,{children:a});export{Er as default};
