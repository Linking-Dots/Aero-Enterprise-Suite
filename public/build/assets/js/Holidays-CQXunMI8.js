import{j as e,a,b as L,J as be,Q as fe}from"./app-jRIoZsur.js";import{r as o}from"./react-core-DDvupgOx.js";import{G as ye}from"./logo-_ooFL_hJ.js";import{P as xe}from"./PageHeader-IqaOrC4X.js";import{S as we}from"./StatsCards-vbkq440-.js";import{e as q,d as J,c as ve,B,f as te,G as Ce,A as _e}from"./App-CzeZjJmF.js";import{u as E,a as Z,F as Ne,T as f,p as se,B as x,o as De,h as _,i as W,j as ke,I as Fe,k as Se,M as He,l as Ae,a3 as ae,a4 as re,q as ne,r as de,a5 as Pe,s as le,f as Re,G as Ie}from"./mui-libraries-DfWBtzq_.js";import{i as Me,b as Te,d as X,f as z,a as ce}from"./utilities-DT6SRl8s.js";import{F as Y}from"./CheckCircleIcon-CJUGb5Jf.js";import{F as Ye}from"./EllipsisVerticalIcon-BX6PWMxg.js";import{F as $e}from"./EyeIcon-B0n7aNqt.js";import{F as Le}from"./PencilIcon-Dhfhztfv.js";import{F as We}from"./TrashIcon-D8Us3Tf_.js";import{F as je}from"./AdjustmentsHorizontalIcon-DKS_UuIh.js";import{N as Be,b as $,O as ze,P as Q,Q as Ee,f as T,i as Ve,D as Oe,s as j,l as R,G as Ge,e as Ue,g as Ke,m as Qe,n as qe,o as Je,q as Xe,v as Ze,k as et}from"./ui-libraries-D1L3zk6d.js";import{C as tt}from"./Clear-CyWtydWJ.js";import{G as ue}from"./GlassDialog-BqviK8DD.js";import{F as at}from"./InformationCircleIcon-BNRxDcw3.js";import{L as rt}from"./LoadingButton-DMq9soVC.js";import{F as lt}from"./ChartBarIcon-Yugn57JF.js";import{F as ot}from"./PlusIcon-AKF5lePL.js";import"./EnvelopeIcon-D6nUSkik.js";import"./UserIcon-D16nn9o_.js";import"./ShieldCheckIcon-C7bFKizx.js";function it({title:b,titleId:w,...I},N){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:N,"aria-labelledby":w},I),b?o.createElement("title",{id:w},b):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const oe=o.forwardRef(it),st=({holidaysData:b,onEdit:w,onDelete:I,onFilteredDataChange:N,isLoading:n=!1})=>{const k=E(),r=Z(k.breakpoints.down("sm")),[c,u]=o.useState(""),[d,v]=o.useState([]),[p,A]=o.useState([]),[h,C]=o.useState([new Date().getFullYear().toString()]),[F,S]=o.useState(1),[l,y]=o.useState(10),[i,P]=o.useState(!1),D={public:{label:"Public",color:"danger",icon:"ðŸ›ï¸"},religious:{label:"Religious",color:"secondary",icon:"ðŸ•Œ"},national:{label:"National",color:"primary",icon:"ðŸ‡§ðŸ‡©"},company:{label:"Company",color:"warning",icon:"ðŸ¢"},optional:{label:"Optional",color:"default",icon:"ðŸ“…"}},M=o.useCallback(t=>{const s=new Date,g=new Date(t.from_date),G=new Date(t.to_date);return Me(s,g)?{status:"upcoming",label:"Upcoming",color:"primary",icon:q}:Te(s,G)?{status:"past",label:"Past",color:"default",icon:Y}:{status:"ongoing",label:"Ongoing",color:"success",icon:Y}},[]),m=o.useMemo(()=>{let t=b;return c&&(t=t.filter(s=>s.title?.toLowerCase().includes(c.toLowerCase())||s.description?.toLowerCase().includes(c.toLowerCase()))),Array.isArray(d)&&d.length>0&&(t=t.filter(s=>d.includes(s.type))),Array.isArray(p)&&p.length>0&&(t=t.filter(s=>{const g=M(s);return p.includes(g.status)})),Array.isArray(h)&&h.length>0&&(t=t.filter(s=>{const g=new Date(s.from_date).getFullYear().toString();return h.includes(g)})),t},[b,c,d,p,h,M]);o.useEffect(()=>{N&&N(m)},[m,N]);const H=Math.ceil(m.length/l),V=o.useMemo(()=>{const t=(F-1)*l,s=t+l;return m.slice(t,s)},[F,m,l]),O=[{name:"Holiday",uid:"title",sortable:!0},{name:"Duration",uid:"duration",sortable:!0},{name:"Type",uid:"type",sortable:!0},{name:"Status",uid:"status",sortable:!0},{name:"Actions",uid:"actions"}],he=o.useCallback((t,s)=>{const g=t[s];switch(s){case"title":const G=X(new Date(t.to_date),new Date(t.from_date))+1;return a("div",{className:"flex flex-col",children:[e("p",{className:"text-bold text-sm capitalize text-foreground",children:t.title}),a("div",{className:"flex items-center gap-2 text-tiny text-default-400",children:[e(J,{className:"w-3 h-3"}),a("span",{children:[z(new Date(t.from_date),"MMM dd, yyyy"),G>1&&a(L,{children:[" - ",z(new Date(t.to_date),"MMM dd, yyyy")]})]})]}),t.description&&e("p",{className:"text-tiny text-default-500 mt-1 line-clamp-2",children:t.description})]});case"duration":const ee=X(new Date(t.to_date),new Date(t.from_date))+1;return e("div",{className:"flex flex-col items-center",children:a("span",{className:"text-bold text-sm text-foreground",children:[ee," ",ee===1?"day":"days"]})});case"type":const U=D[t.type]||D.company;return e(T,{className:"capitalize",color:U.color,size:"sm",variant:"flat",startContent:e("span",{className:"text-xs",children:U.icon}),children:U.label});case"status":const K=M(t),ge=K.icon;return e(T,{className:"capitalize",color:K.color,size:"sm",variant:"flat",startContent:e(ge,{className:"w-3 h-3"}),children:K.label});case"actions":return e("div",{className:"relative flex justify-end items-center gap-2",children:a(Ee,{children:[e(Be,{children:e($,{isIconOnly:!0,size:"sm",variant:"light",children:e(Ye,{className:"w-4 h-4"})})}),a(ze,{children:[e(Q,{startContent:e($e,{className:"w-4 h-4"}),children:"View Details"},"view"),e(Q,{startContent:e(Le,{className:"w-4 h-4"}),onPress:()=>w(t),children:"Edit Holiday"},"edit"),e(Q,{className:"text-danger",color:"danger",startContent:e(We,{className:"w-4 h-4"}),onPress:()=>I(t.id),children:"Delete Holiday"},"delete")]})]})});default:return g}},[M,w,I]),me=o.useMemo(()=>a("div",{className:"flex flex-col gap-4",children:[a("div",{className:"flex flex-col sm:flex-row gap-4",children:[e("div",{className:"flex-1",children:e(Ve,{isClearable:!0,label:"Search Holidays",variant:"bordered",placeholder:"Search by title or description...",startContent:e(ve,{className:"w-4 h-4"}),value:c,onClear:()=>u(""),onValueChange:u,classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:r?"sm":"md"})}),e("div",{className:"flex gap-2 items-end",children:e(Oe,{variant:"bordered",className:"bg-white/5",children:a($,{isIconOnly:r,color:i?"primary":"default",onPress:()=>P(!i),className:i?"bg-purple-500/20":"bg-white/5",children:[e(je,{className:"w-4 h-4"}),!r&&e("span",{className:"ml-1",children:"Filters"})]})})})]}),i&&e(Ne,{in:!0,timeout:300,children:a("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[a("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e(j,{label:"Holiday Type",selectionMode:"multiple",variant:"bordered",selectedKeys:new Set(d),onSelectionChange:t=>v(Array.from(t)),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:Object.entries(D).map(([t,s])=>e(R,{value:t,textValue:s.label,children:a("div",{className:"flex items-center gap-2",children:[e("span",{children:s.icon}),e("span",{children:s.label})]})},t))}),a(j,{label:"Holiday Status",selectionMode:"multiple",variant:"bordered",selectedKeys:new Set(p),onSelectionChange:t=>A(Array.from(t)),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e(R,{value:"upcoming",textValue:"Upcoming",children:a("div",{className:"flex items-center gap-2",children:[e(q,{className:"w-3 h-3"}),e("span",{children:"Upcoming"})]})},"upcoming"),e(R,{value:"ongoing",textValue:"Ongoing",children:a("div",{className:"flex items-center gap-2",children:[e(Y,{className:"w-3 h-3"}),e("span",{children:"Ongoing"})]})},"ongoing"),e(R,{value:"past",textValue:"Past",children:a("div",{className:"flex items-center gap-2",children:[e(Y,{className:"w-3 h-3"}),e("span",{children:"Past"})]})},"past")]}),e(j,{label:"Year",selectionMode:"multiple",variant:"bordered",selectedKeys:new Set(h),onSelectionChange:t=>C(Array.from(t)),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:Array.from({length:new Date().getFullYear()-2019+3},(t,s)=>{const g=(2020+s).toString();return e(R,{value:g,textValue:g,children:a("div",{className:"flex items-center gap-2",children:[e("span",{children:"ðŸ“…"}),e("span",{children:g})]})},g)})})]}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:a(j,{label:"Rows per page",variant:"bordered",selectedKeys:new Set([l.toString()]),onSelectionChange:t=>y(Number(Array.from(t)[0])),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e(R,{value:"5",textValue:"5",children:"5"},"5"),e(R,{value:"10",textValue:"10",children:"10"},"10"),e(R,{value:"15",textValue:"15",children:"15"},"15"),e(R,{value:"25",textValue:"25",children:"25"},"25")]})}),(c||Array.isArray(d)&&d.length>0||Array.isArray(p)&&p.length>0||Array.isArray(h)&&h.length>0)&&e("div",{className:"mt-4 pt-4 border-t border-white/10",children:a("div",{className:"flex flex-wrap gap-2",children:[c&&a(T,{size:"sm",variant:"flat",color:"primary",onClose:()=>u(""),children:["Search: ",c]}),Array.isArray(d)&&d.map(t=>a(T,{size:"sm",variant:"flat",color:"secondary",onClose:()=>v(s=>s.filter(g=>g!==t)),children:[D[t]?.icon," ",D[t]?.label]},t)),Array.isArray(p)&&p.map(t=>a(T,{size:"sm",variant:"flat",color:"warning",onClose:()=>A(s=>s.filter(g=>g!==t)),children:[t==="upcoming"&&"ðŸ•",t==="ongoing"&&"âœ…",t==="past"&&"ðŸ“‹",t.charAt(0).toUpperCase()+t.slice(1)]},t)),Array.isArray(h)&&h.map(t=>a(T,{size:"sm",variant:"flat",color:"secondary",onClose:()=>C(s=>s.filter(g=>g!==t)),children:["ðŸ“… ",t]},t))]})})]})}),e("div",{className:"flex justify-between items-center",children:a("span",{className:"text-default-400 text-small",children:["Total ",m.length," holidays",Array.isArray(d)&&d.length>0||Array.isArray(p)&&p.length>0||c?` (filtered from ${b.length})`:""]})})]}),[c,d,p,m.length,b.length,l,i,r]),pe=o.useMemo(()=>a("div",{className:"py-2 px-2 flex justify-between items-center",children:[e("span",{className:"w-[30%] text-small text-default-400",children:`${(F-1)*l+1}-${Math.min(F*l,m.length)} of ${m.length}`}),e(Ge,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:F,total:H,onChange:S}),a("div",{className:"hidden sm:flex w-[30%] justify-end gap-2",children:[e($,{isDisabled:H===1,size:"sm",variant:"flat",onPress:()=>S(1),children:"First"}),e($,{isDisabled:H===1,size:"sm",variant:"flat",onPress:()=>S(H),children:"Last"})]})]}),[F,H,m.length,l]);return b.length===0?e(Ke,{className:"bg-white/5 backdrop-blur-md border-white/10",children:a(Ue,{className:"text-center py-12",children:[e(J,{className:"w-16 h-16 mx-auto mb-4 text-default-300"}),e(f,{variant:"h6",className:"mb-2",children:"No Holidays Found"}),e(f,{variant:"body2",color:"textSecondary",children:"No company holidays have been configured yet."})]})}):e("div",{className:"space-y-4",children:a(et,{"aria-label":"Holiday management table",isHeaderSticky:!0,bottomContent:pe,bottomContentPlacement:"outside",classNames:{wrapper:"max-h-[382px] bg-white/5 backdrop-blur-md border-white/10"},selectedKeys:[],selectionMode:"none",sortDescriptor:{},topContent:me,topContentPlacement:"outside",children:[e(Qe,{columns:O,children:t=>e(qe,{align:t.uid==="actions"?"center":"start",allowsSorting:t.sortable,children:t.name},t.uid)}),e(Je,{emptyContent:"No holidays found",items:V,isLoading:n,loadingContent:e("div",{children:"Loading holidays..."}),children:t=>e(Xe,{children:s=>e(Ze,{children:he(t,s)})},t.id)})]})})},ie=({open:b,closeModal:w,holidaysData:I,setHolidaysData:N,currentHoliday:n})=>{const k=E();Z(k.breakpoints.down("sm"));const[r,c]=o.useState({title:"",description:"",from_date:"",to_date:"",type:"company",is_recurring:!1,is_active:!0}),[u,d]=o.useState({}),[v,p]=o.useState(!1),A=[{key:"public",label:"Public Holiday",icon:"ðŸ›ï¸",description:"Government declared public holiday"},{key:"religious",label:"Religious Holiday",icon:"ðŸ•Œ",description:"Religious observance"},{key:"national",label:"National Holiday",icon:"ðŸ‡§ðŸ‡©",description:"National celebration or commemoration"},{key:"company",label:"Company Holiday",icon:"ðŸ¢",description:"Company-specific holiday"},{key:"optional",label:"Optional Holiday",icon:"ðŸ“…",description:"Optional observance"}];o.useEffect(()=>{c(n?{title:n.title||"",description:n.description||"",from_date:n.from_date||"",to_date:n.to_date||"",type:n.type||"company",is_recurring:n.is_recurring||!1,is_active:n.is_active!==void 0?n.is_active:!0}:{title:"",description:"",from_date:"",to_date:"",type:"company",is_recurring:!1,is_active:!0}),d({})},[n,b]);const h=o.useMemo(()=>{if(r.from_date&&r.to_date){const l=new Date(r.from_date),y=new Date(r.to_date);return X(y,l)+1}return 1},[r.from_date,r.to_date]),C=(l,y)=>{c(i=>({...i,[l]:y})),u[l]&&d(i=>({...i,[l]:void 0})),l==="from_date"&&!r.to_date&&c(i=>({...i,to_date:y}))},F=async l=>{l.preventDefault(),p(!0),d({});try{const y={title:r.title,description:r.description,fromDate:r.from_date,toDate:r.to_date,type:r.type,is_recurring:r.is_recurring,is_active:r.is_active};n&&(y.id=n.id);const i=await ce.post(route("holidays-add"),y);i.status===200&&(N(i.data.holidays),B.success(i.data.message||"Holiday saved successfully!"),w())}catch(y){y.response?.status===422?(d(y.response.data.errors||{}),B.error("Please check the form for errors")):B.error(y.response?.data?.message||"Failed to save holiday")}finally{p(!1)}},S=A.find(l=>l.key===r.type);return a(ue,{open:b,onClose:w,fullWidth:!0,maxWidth:"md",children:[a(se,{sx:{display:"flex",alignItems:"center"},children:[a(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(J,{className:"w-6 h-6 text-primary"}),e(f,{variant:"h6",children:n?"Edit Holiday":"Add New Holiday"})]}),e(De,{onClick:w,sx:{position:"absolute",top:8,right:16},children:e(tt,{})})]}),a("form",{onSubmit:F,children:[e(ne,{sx:{maxHeight:"70vh",overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:"rgba(255,255,255,0.1)",borderRadius:"3px"},"&::-webkit-scrollbar-thumb":{background:"rgba(255,255,255,0.3)",borderRadius:"3px","&:hover":{background:"rgba(255,255,255,0.5)"}}},children:a(_,{container:!0,spacing:3,children:[e(_,{item:!0,xs:12,children:e(f,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Basic Information"})}),e(_,{item:!0,xs:12,children:e(W,{label:"Holiday Title",placeholder:"Enter holiday name",fullWidth:!0,value:r.title,onChange:l=>C("title",l.target.value),error:!!u.title,helperText:u.title,InputLabelProps:{shrink:!0}})}),e(_,{item:!0,xs:12,children:e(W,{label:"Description",placeholder:"Optional description or notes",fullWidth:!0,multiline:!0,rows:3,value:r.description,onChange:l=>C("description",l.target.value),error:!!u.description,helperText:u.description,InputLabelProps:{shrink:!0}})}),e(_,{item:!0,xs:12,children:e(f,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Holiday Type"})}),e(_,{item:!0,xs:12,md:6,children:a(ke,{fullWidth:!0,children:[e(Fe,{children:"Type"}),e(Se,{value:r.type,onChange:l=>C("type",l.target.value),label:"Type",error:!!u.type,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:k.glassCard.background,border:k.glassCard.border,borderRadius:2,boxShadow:k.glassCard.boxShadow}}},children:A.map(l=>e(He,{value:l.key,children:a(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[e("span",{children:l.icon}),a(x,{children:[e(f,{variant:"body2",sx:{fontWeight:500},children:l.label}),e(f,{variant:"caption",color:"text.secondary",children:l.description})]})]})},l.key))}),u.type&&e(f,{variant:"caption",color:"error",sx:{mt:.5},children:u.type})]})}),S&&e(_,{item:!0,xs:12,md:6,children:e(x,{sx:{p:2,backgroundColor:"rgba(255,255,255,0.05)",borderRadius:1,border:"1px solid rgba(255,255,255,0.1)"},children:a(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[e("span",{style:{fontSize:"1.5rem"},children:S.icon}),a(x,{children:[e(f,{variant:"body2",sx:{fontWeight:500},children:S.label}),e(f,{variant:"caption",color:"text.secondary",children:S.description})]})]})})}),e(_,{item:!0,xs:12,children:a(x,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e(f,{variant:"subtitle1",sx:{fontWeight:600},children:"Date Range"}),h>1&&e(Ae,{label:`${h} days`,size:"small",color:"primary",variant:"outlined"})]})}),e(_,{item:!0,xs:12,md:6,children:e(W,{type:"date",label:"From Date",fullWidth:!0,value:r.from_date,onChange:l=>C("from_date",l.target.value),error:!!u.fromDate,helperText:u.fromDate,InputLabelProps:{shrink:!0}})}),e(_,{item:!0,xs:12,md:6,children:e(W,{type:"date",label:"To Date",fullWidth:!0,value:r.to_date,onChange:l=>C("to_date",l.target.value),error:!!u.toDate,helperText:u.toDate,InputLabelProps:{shrink:!0}})}),r.from_date&&r.to_date&&e(_,{item:!0,xs:12,children:e(x,{sx:{p:2,backgroundColor:"rgba(255,255,255,0.05)",borderRadius:1,border:"1px solid rgba(255,255,255,0.1)"},children:a(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(at,{className:"w-4 h-4 text-primary"}),a(f,{variant:"body2",children:["Holiday period: ",z(new Date(r.from_date),"MMM dd, yyyy"),h>1&&a(L,{children:[" to ",z(new Date(r.to_date),"MMM dd, yyyy")]})," (",h," ",h===1?"day":"days",")"]})]})})}),e(_,{item:!0,xs:12,children:e(f,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Settings"})}),e(_,{item:!0,xs:12,md:6,children:a(x,{sx:{p:2,backgroundColor:"rgba(255,255,255,0.05)",borderRadius:1,border:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(q,{className:"w-5 h-5 text-default-400"}),a(x,{children:[e(f,{variant:"body2",sx:{fontWeight:500},children:"Recurring Holiday"}),e(f,{variant:"caption",color:"text.secondary",children:"Repeat this holiday annually"})]})]}),e(ae,{control:e(re,{checked:r.is_recurring,onChange:l=>C("is_recurring",l.target.checked),color:"primary"}),label:""})]})}),e(_,{item:!0,xs:12,md:6,children:a(x,{sx:{p:2,backgroundColor:"rgba(255,255,255,0.05)",borderRadius:1,border:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(oe,{className:"w-5 h-5 text-default-400"}),a(x,{children:[e(f,{variant:"body2",sx:{fontWeight:500},children:"Active Holiday"}),e(f,{variant:"caption",color:"text.secondary",children:"Include in holiday calculations"})]})]}),e(ae,{control:e(re,{checked:r.is_active,onChange:l=>C("is_active",l.target.checked),color:"success"}),label:""})]})})]})}),a(de,{sx:{padding:"16px 24px",justifyContent:"flex-end",gap:1},children:[e($,{color:"danger",variant:"light",onPress:w,disabled:v,children:"Cancel"}),e(rt,{type:"submit",variant:"contained",loading:v,startIcon:!v&&e(oe,{className:"w-4 h-4"}),sx:{borderRadius:"8px"},children:v?"Saving...":n?"Update Holiday":"Create Holiday"})]})]})]})},nt=({open:b,closeModal:w,holidayIdToDelete:I,setHolidaysData:N})=>{const n=E(),k=()=>{const r=new Promise(async(c,u)=>{try{const d=await ce.delete(route("holiday-delete"),{params:{id:I,route:route().current()}});d.status===200&&(N(d.data.holidays),c("Holiday deleted successfully"))}catch(d){console.error("Error deleting holiday:",d),u(d.response?.data?.error||"Failed to delete holiday")}finally{w()}});B.promise(r,{pending:{render(){return a("div",{style:{display:"flex",alignItems:"center"},children:[e(Re,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting holiday..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:n.glassCard.background,border:n.glassCard.border,color:n.palette.text.primary}},success:{render({data:c}){return e(L,{children:c})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:n.glassCard.background,border:n.glassCard.border,color:n.palette.text.primary}},error:{render({data:c}){return e(L,{children:c})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:n.glassCard.background,border:n.glassCard.border,color:n.palette.text.primary}}})};return a(ue,{open:b,onClose:w,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e(se,{id:"alert-dialog-title",children:"Confirm Deletion"}),e(ne,{children:e(Pe,{id:"alert-dialog-description",children:"Are you sure you want to delete this holiday? This action cannot be undone."})}),a(de,{children:[e(le,{variant:"outlined",onClick:w,sx:{color:n.palette.text.secondary,borderColor:"rgba(255, 255, 255, 0.2)","&:hover":{borderColor:"rgba(255, 255, 255, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:"Cancel"}),e(le,{onClick:k,color:"error",autoFocus:!0,children:"Delete"})]})]})},dt=({title:b,stats:w})=>{const{auth:I,holidays:N}=be().props,n=E();Z(n.breakpoints.down("sm"));const k=o.useMemo(()=>{const i=new Date().getFullYear();return N.filter(P=>new Date(P.from_date).getFullYear()===i)},[N]),[r,c]=o.useState({type:null,holidayId:null,currentHoliday:null}),[u,d]=o.useState(N),[v,p]=o.useState(k),A=o.useCallback((i,P=null,D=null)=>{c({type:i,holidayId:P,currentHoliday:D})},[]),h=o.useCallback(()=>{c({type:null,holidayId:null,currentHoliday:null})},[]),C=o.useCallback(i=>{d(i)},[]),F=o.useCallback(i=>{p(i)},[]);o.useEffect(()=>{const i=new Date().getFullYear(),P=u.filter(D=>new Date(D.from_date).getFullYear()===i);p(P)},[u]);const S=o.useMemo(()=>{const i=new Date().getFullYear(),P=v.filter(m=>new Date(m.from_date).getFullYear()===i),D=v.filter(m=>new Date(m.from_date)>new Date);v.filter(m=>{const H=new Date,V=new Date(m.from_date),O=new Date(m.to_date);return V<=H&&O>=H});const M=v.reduce((m,H)=>m+(H.duration||1),0);return[{title:"Total Holidays",value:v.length,icon:e(lt,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All filtered holidays"},{title:"This Year",value:P.length,icon:e(te,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Current year holidays"},{title:"Upcoming",value:D.length,icon:e(Y,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Future holidays"},{title:"Holiday Days",value:M,icon:e(Y,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Total days off in filtered data"}]},[v]),l=[{label:"Add Holiday",icon:e(ot,{className:"w-4 h-4"}),onPress:()=>A("add_holiday"),className:Ce.primaryButton}],y=o.useMemo(()=>({open:!!r.type,closeModal:h,setHolidaysData:C,holidaysData:u,currentHoliday:r.currentHoliday}),[r.type,h,C,u,r.currentHoliday]);return a(L,{children:[e(fe,{title:b}),r.type==="add_holiday"&&e(ie,{...y}),r.type==="edit_holiday"&&e(ie,{...y}),r.type==="delete_holiday"&&e(nt,{open:!0,holidayIdToDelete:r.holidayId,setHolidaysData:C,closeModal:h}),e(x,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Ie,{in:!0,children:e(ye,{children:e(xe,{title:"Company Holidays",subtitle:"Manage company holidays and observances throughout the year",icon:e(te,{className:"w-8 h-8"}),variant:"gradient",actionButtons:l,children:a("div",{className:"p-6",children:[e(we,{stats:S,className:"mb-6"}),e(st,{holidaysData:u,onEdit:i=>A("edit_holiday",null,i),onDelete:i=>A("delete_holiday",i),onFilteredDataChange:F})]})})})})})]})};dt.layout=b=>e(_e,{children:b});export{dt as default};
