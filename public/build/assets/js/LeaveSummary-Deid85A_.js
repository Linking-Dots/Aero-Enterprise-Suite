import{j as e,d as ce,a as t,Q as de,b as V}from"./app-6tTxwSdx.js";import{r as s,p as oe,k as v,i as me,H as he,f as T,s as w,l as i,I as pe,J as B,q as M,v as $,w as l,x as Y,y as z,z as o,K as ue,m as j,h as G}from"./ui-vendor-Dsk9T4EG.js";import{G as ge}from"./logo-D6ASq7aG.js";import{P as be}from"./PageHeader-DQpNPb28.js";import{S as fe}from"./StatsCards-C-2QQYus.js";import{F as J,e as ve,h as x,G as U,c as we,f as xe,A as Ne}from"./App-DOWrEKYW.js";import{u as ye,a as _e,G as Se,F as Ce,T as N,B as Fe}from"./mui-vendor-gNRFXRd0.js";import{F as Ae}from"./CheckCircleIcon-CMpNM2Dn.js";import{F as Pe}from"./AdjustmentsHorizontalIcon-Dyf1eZD8.js";import{F as I}from"./PresentationChartLineIcon-C6twwMYn.js";import{F as De}from"./DocumentArrowDownIcon-DTgLcOSd.js";import"./utils-vendor-DT6SRl8s.js";import"./react-vendor-D8ObPovc.js";import"./animation-vendor-Bzjg6Woq.js";import"./EnvelopeIcon-DpPbvj-t.js";import"./UserIcon-15ugNx-V.js";import"./ShieldCheckIcon-BADfOQX9.js";const Ee=({title:y,summaryData:O})=>{const K=ye(),u=_e(K.breakpoints.down("sm")),{users:ke=[],departments:H=[],leave_types:Re=[],columns:Le=[],data:_=[],department_summary:F=[],stats:m={},year:A=new Date().getFullYear(),filters:Q={}}=O||{},[q,P]=s.useState(!1),[c,D]=s.useState(Q),[g,W]=s.useState(!1),[E,X]=s.useState("employee"),[d,S]=s.useState(""),[C,k]=s.useState(1),[h,Z]=s.useState(15),p=s.useMemo(()=>{let a=_;return d&&(a=a.filter(r=>r.employee_name?.toLowerCase().includes(d.toLowerCase())||r.department?.toLowerCase().includes(d.toLowerCase()))),a},[_,d]),ee=s.useMemo(()=>{const a=(C-1)*h,r=a+h;return p.slice(a,r)},[p,C,h]),R=Math.ceil(p.length/h),ae=s.useMemo(()=>[{title:"Total Employees",value:m.total_employees||0,icon:e(J,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Active employees"},{title:"Approved Leaves",value:m.total_approved_leaves||0,icon:e(Ae,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Total approved days"},{title:"Pending Leaves",value:m.total_pending_leaves||0,icon:e(ve,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Awaiting approval"},{title:"Departments",value:m.departments_count||0,icon:e(x,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Active departments"}],[m]),b=s.useCallback((a,r)=>{const n={...c,[a]:r};D(n),L(n)},[c]),L=s.useCallback(a=>{P(!0),ce.Inertia.get(route("leave-summary"),a,{preserveState:!0,replace:!0,onFinish:()=>P(!1)})},[]),te=s.useCallback(()=>{const a={year:new Date().getFullYear()};D(a),S(""),L(a)},[]),re=[{label:"Export Data",icon:e(De,{className:"w-4 h-4"}),onPress:()=>{console.log("Export functionality")},className:U.primaryButton},{label:"Current Year",icon:e(xe,{className:"w-4 h-4"}),onPress:()=>b("year",new Date().getFullYear()),className:U.secondaryButton}],le=s.useCallback((a,r)=>{const n=a[r];switch(r){case"employee_name":return t("div",{className:"flex flex-col",children:[e("p",{className:"text-bold text-sm text-foreground",children:a.employee_name}),e("p",{className:"text-tiny text-default-400",children:a.department}),a.designation&&e("p",{className:"text-tiny text-default-500",children:a.designation})]});case"total_approved":case"total_pending":case"total_rejected":const ne={total_approved:"success",total_pending:"warning",total_rejected:"danger"};return n>0?e(v,{size:"sm",variant:"flat",color:ne[r],className:"min-w-12",children:n}):"";case"usage_percentage":const f=n||0,ie=f>80?"danger":f>60?"warning":"success";return t("div",{className:"flex flex-col items-center gap-1",children:[e(oe,{size:"sm",value:f,color:ie,className:"w-16"}),t("span",{className:"text-tiny",children:[f,"%"]})]});case"total_balance":return e("div",{className:"text-center",children:e("span",{className:n<5?"text-danger":"text-foreground",children:n})});default:return n!=null&&n!==""?n:""}},[]),se=s.useMemo(()=>{const a=new Date().getFullYear();return Array.from({length:10},(r,n)=>a-n)},[]);return t(V,{children:[e(de,{title:y}),e(Fe,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Se,{in:!0,children:e(ge,{children:e(be,{title:"Leave Summary",subtitle:"Comprehensive employee leave analytics and reporting",icon:e(I,{className:"w-8 h-8"}),variant:"gradient",actionButtons:re,children:t("div",{className:"p-6",children:[e(fe,{stats:ae,className:"mb-6"}),t("div",{className:"flex flex-col gap-4 mb-6",children:[t("div",{className:"flex flex-col sm:flex-row gap-4",children:[e("div",{className:"flex-1",children:e(me,{isClearable:!0,label:"Search Employees",variant:"bordered",placeholder:"Search by name or department...",startContent:e(we,{className:"w-4 h-4"}),value:d,onClear:()=>S(""),onValueChange:S,classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:u?"sm":"md"})}),e("div",{className:"flex gap-2 items-end",children:e(he,{variant:"bordered",className:"bg-white/5",children:t(T,{isIconOnly:u,color:g?"primary":"default",onPress:()=>W(!g),className:g?"bg-purple-500/20":"bg-white/5",children:[e(Pe,{className:"w-4 h-4"}),!u&&e("span",{className:"ml-1",children:"Filters"})]})})})]}),g&&e(Ce,{in:!0,timeout:300,children:e("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e(w,{label:"Year",variant:"bordered",selectedKeys:[String(c.year||A)],onSelectionChange:a=>{const r=Array.from(a)[0];r&&b("year",parseInt(r))},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:se.map(a=>e(i,{value:a,textValue:String(a),children:a},a))}),t(w,{label:"Department",variant:"bordered",selectedKeys:c.department_id?[String(c.department_id)]:[],onSelectionChange:a=>{const r=Array.from(a)[0];b("department_id",r||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e(i,{value:"",textValue:"All Departments",children:"All Departments"},""),H.map(a=>e(i,{value:a.id,textValue:a.name,children:a.name},a.id))]}),t(w,{label:"Leave Status",variant:"bordered",selectedKeys:c.status?[c.status]:[],onSelectionChange:a=>{const r=Array.from(a)[0];b("status",r||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e(i,{value:"",textValue:"All Status",children:"All Status"},""),e(i,{value:"Approved",textValue:"Approved",children:"Approved"},"Approved"),e(i,{value:"Pending",textValue:"Pending",children:"Pending"},"Pending"),e(i,{value:"Declined",textValue:"Declined",children:"Declined"},"Declined")]}),e("div",{className:"flex gap-2 items-end",children:e(T,{color:"primary",variant:"flat",onPress:te,size:u?"sm":"md",children:"Clear Filters"})})]})})})]}),e("div",{className:"mb-6",children:t(pe,{selectedKey:E,onSelectionChange:X,variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-primary",tab:"max-w-fit px-0 h-12"},children:[e(B,{title:t("div",{className:"flex items-center space-x-2",children:[e(J,{className:"w-4 h-4"}),e("span",{children:"Employee Summary"})]})},"employee"),e(B,{title:t("div",{className:"flex items-center space-x-2",children:[e(x,{className:"w-4 h-4"}),e("span",{children:"Department Summary"})]})},"department")]})}),E==="employee"?t("div",{className:"space-y-4",children:[t("div",{className:"flex justify-between items-center",children:[t("span",{className:"text-default-400 text-small",children:["Total ",p.length," employees",d&&` (filtered from ${_.length})`]}),t("div",{className:"flex gap-2 items-center",children:[e("span",{className:"text-tiny text-default-400",children:"Rows per page:"}),t(w,{size:"sm",selectedKeys:[String(h)],onSelectionChange:a=>{const r=Number(Array.from(a)[0]);Z(r),k(1)},className:"w-20",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:[e(i,{value:"10",textValue:"10",children:"10"},"10"),e(i,{value:"15",textValue:"15",children:"15"},"15"),e(i,{value:"25",textValue:"25",children:"25"},"25"),e(i,{value:"50",textValue:"50",children:"50"},"50")]})]})]}),p.length>0?t(V,{children:[t(M,{"aria-label":"Employee leave summary table",isHeaderSticky:!0,classNames:{wrapper:"max-h-[600px] bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground border-b border-white/10",td:"border-b border-white/5"},children:[t($,{children:[e(l,{children:"Employee"},"employee_name"),e(l,{align:"center",children:"JAN"},"JAN"),e(l,{align:"center",children:"FEB"},"FEB"),e(l,{align:"center",children:"MAR"},"MAR"),e(l,{align:"center",children:"APR"},"APR"),e(l,{align:"center",children:"MAY"},"MAY"),e(l,{align:"center",children:"JUN"},"JUN"),e(l,{align:"center",children:"JUL"},"JUL"),e(l,{align:"center",children:"AUG"},"AUG"),e(l,{align:"center",children:"SEP"},"SEP"),e(l,{align:"center",children:"OCT"},"OCT"),e(l,{align:"center",children:"NOV"},"NOV"),e(l,{align:"center",children:"DEC"},"DEC"),e(l,{align:"center",children:"Approved"},"total_approved"),e(l,{align:"center",children:"Pending"},"total_pending"),e(l,{align:"center",children:"Balance"},"total_balance"),e(l,{align:"center",children:"Usage"},"usage_percentage")]}),e(Y,{items:ee,isLoading:q,children:a=>e(z,{children:r=>e(o,{children:le(a,r)})},a.id)})]}),R>1&&e("div",{className:"flex justify-center mt-4",children:e(ue,{total:R,page:C,onChange:k,showControls:!0,showShadow:!0,color:"primary"})})]}):e(j,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(G,{className:"text-center py-12",children:[e(I,{className:"w-16 h-16 mx-auto mb-4 text-default-300"}),e(N,{variant:"h6",className:"mb-2 text-white",children:"No Leave Data Found"}),e(N,{variant:"body2",className:"text-gray-400",children:d?`No employees found matching "${d}"`:`No leave summary data available for ${c.year||A}.`})]})})]}):t("div",{className:"space-y-4",children:[e(N,{variant:"h6",className:"mb-4 text-white",children:"Department-wise Leave Summary"}),F.length>0?t(M,{"aria-label":"Department leave summary table",classNames:{wrapper:"bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground",td:"border-b border-white/5"},children:[t($,{children:[e(l,{children:"Department"}),e(l,{align:"center",children:"Employees"}),e(l,{align:"center",children:"Total Leaves"}),e(l,{align:"center",children:"Approved"}),e(l,{align:"center",children:"Pending"}),e(l,{align:"center",children:"Avg per Employee"})]}),e(Y,{children:F.map((a,r)=>t(z,{children:[e(o,{children:t("div",{className:"flex items-center gap-2",children:[e(x,{className:"w-4 h-4 text-default-400"}),e("span",{className:"font-medium",children:a.department})]})}),e(o,{className:"text-center",children:e(v,{size:"sm",variant:"flat",color:"default",children:a.employee_count})}),e(o,{className:"text-center",children:a.total_leaves}),e(o,{className:"text-center",children:e(v,{size:"sm",variant:"flat",color:"success",children:a.total_approved})}),e(o,{className:"text-center",children:e(v,{size:"sm",variant:"flat",color:"warning",children:a.total_pending})}),e(o,{className:"text-center",children:a.avg_leaves_per_employee})]},r))})]}):e(j,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(G,{className:"text-center py-8",children:[e(x,{className:"w-12 h-12 mx-auto mb-4 text-default-300"}),e(N,{variant:"body1",className:"text-white",children:"No department data available"})]})})]})]})})})})})]})};Ee.layout=y=>e(Ne,{children:y});export{Ee as default};
