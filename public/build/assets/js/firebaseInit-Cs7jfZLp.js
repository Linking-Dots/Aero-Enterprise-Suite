import{_ as f}from"./vendor-heroui-DDebgeAq.js";import{a as l}from"./vendor-utils-CrJAVL9K.js";import"./vendor-inertia-sUfCHI_5.js";import"./vendor-react-FouZbkAE.js";import"./vendor-framer-DVePAyWF.js";let s=!1;const g=async()=>{if(!s)try{const{onMessageListener:t,requestNotificationPermission:a}=await f(async()=>{const{onMessageListener:e,requestNotificationPermission:o}=await import("./firebase-config-4sQ5Zv9Z.js");return{onMessageListener:e,requestNotificationPermission:o}},[]),i=await a();if(i){localStorage.setItem("fcm_token",i);try{const e=await l.post(route("updateFcmToken"),{fcm_token:i});e.status===200&&console.log("FCM Token Updated:",e.data.fcm_token)}catch(e){console.error("Failed to update FCM token:",e)}}else console.warn("Notification permission denied or no token retrieved.");const r=t().then(e=>{console.log("Message received:",e);const{title:o,body:n,icon:c}=e.notification;Notification.permission==="granted"&&new Notification(o,{body:n,icon:c}),alert(`${o}: ${n}`)}).catch(e=>console.error("onMessageListener error:",e));return s=!0,()=>{r&&typeof r=="function"&&r()}}catch(t){console.error("Firebase initialization error:",t)}};export{g as initFirebase};
