import{aW as Po,aX as Oe,aY as nn,aZ as Nn,a_ as Do,a$ as _n,b0 as on,b1 as gt,b2 as $t,b3 as Bo,b4 as En,b5 as ko,b6 as Lo,b7 as Oo,b8 as Vo,b9 as Sn,ba as An,bb as zo,bc as Ko,bd as Mo,be as Uo,bf as Go,bg as Wo,bh as Ho,bi as qo,bj as Zo,bk as Tn,bl as Jo,bm as Yo,bn as Xo,bo as Qo,P as er,r as d,$ as tr,bp as In,bq as nr,br as or,a6 as rr,o as ar,bs as ft,bt as sr,ap as lr,bu as ir,bv as ur,J as rn,y as cr,z as dr,l as an,D as je,n as Be,B as mr,a2 as ht,E as xt,k as pr,j as n,f as xe,A as fr,s as tt,L as sn,F as ke,b as Le,bw as Rn,bx as Pn,by as jt,bz as ot,bA as hr,bB as xr,bC as et,H as vr,c as Ne,d as _e,h as ln}from"./app-BaORz15z.js";import{$ as br,R as yr,S as gr,j as Ct,k as Me,v as Ke,d as Ft,a as wt,b as Nt,m as Fe,w as _t,c as $r,e as jr,f as Cr,g as Fr,B as wr,A as Nr}from"./Dashboard-CN0tSHQO.js";import{S as _r}from"./StatsCards-lpfLycoc.js";import{a as Er,B as de}from"./react-toastify.esm-2i6MONFP.js";import{F as Sr}from"./HashtagIcon-DSMn_n4-.js";import{F as rt}from"./UserIcon-DLeUrrsS.js";import{F as Et}from"./EnvelopeIcon-CBFgDeRM.js";import{F as Ue,a as Dn}from"./DeviceTabletIcon-SsGeRzTR.js";import{F as Bn}from"./CheckCircleIcon-VwHmNzMj.js";import{F as Ge}from"./ShieldCheckIcon-BKbCKm70.js";import{F as St}from"./EllipsisVerticalIcon-DWSGvo3n.js";import{F as Ar}from"./UserGroupIcon-2DiflRMI.js";import{F as kn}from"./PencilIcon-De4DzaML.js";import{F as at}from"./LockOpenIcon-B-cR_VhH.js";import{F as st}from"./LockClosedIcon-D6SzxqKY.js";import{F as Ln}from"./ClockIcon-B7P77C_d.js";import{t as At,b as On}from"./XMarkIcon-BZHN_mnd.js";import{$ as vt,d as Tr,t as Ir,a as Rr,b as Pr,c as Dr}from"./chunk-F3UDT23P-CffyF1Xd.js";import{t as Br,a as kr}from"./chunk-YRZGWF2W-Diz_QFHZ.js";import{p as Vn}from"./chunk-APIAPHLK-M9Uv3F5Q.js";import{c as Ce}from"./chunk-IHOGUXIG-Dotqasbg.js";import{$ as Lr,b as Or,c as Vr,d as zr,e as Kr,f as Mr,g as Ur,a as Gr,h as Wr,C as Hr,s as Re,l as fe}from"./chunk-Y2AYO5NJ-CbXSogdl.js";import{u as Tt}from"./chunk-S574QCAN-D8gqrWqp.js";import{U as qr}from"./user-BDHx5xah.js";import{C as Zr}from"./camera-DljVz9Ak.js";import{e as Jr,l as Yr,j as Xr,m as un,a as Qr,F as ea,u as ta,i as ve}from"./chunk-SSA7SXE4-Dp19wAJ0.js";import{$ as na}from"./useFilter-FyqS4Xav.js";import{c as Bt}from"./createLucideIcon-D3OQ5J-R.js";import{s as zn}from"./chunk-TQNYOUFX-OWOh7Yim.js";import{m as oa}from"./chunk-O5MCAK4F-D5QTR3Y8.js";import{F as ra}from"./XCircleIcon-CvKfVUXt.js";import{F as aa}from"./TrophyIcon-CEuPZezL.js";import{F as bt}from"./UserPlusIcon-DHjcZE_J.js";import{F as cn}from"./ChartBarIcon-j5Zflt0r.js";import{m as sa}from"./proxy-CtNjgSaK.js";import{F as la}from"./DocumentArrowDownIcon-CrkPjnDZ.js";import{F as ia}from"./ChartPieIcon-Dr_ltj6p.js";import{F as ua}from"./MagnifyingGlassIcon-DnrZjf6W.js";import{F as ca}from"./TableCellsIcon-DaIm4P-i.js";import{c as da}from"./chunk-D5XJWRAV-tpUS_Ies.js";import{s as pe}from"./chunk-TLYTI3QM-RpnLg7F9.js";import{b as ma}from"./chunk-57V4RE7B-CskhP_CT.js";import"./MapPinIcon-B6yzYcXd.js";import"./KeyIcon-BLFyq4d_.js";import"./index-B-IOawQb.js";import"./logo-Pwvcz7fP.js";import"./ExclamationTriangleIcon-CNtupyr4.js";import"./chunk-XJ2YRSUP-CNHW9zUz.js";import"./useToggleState-_HJPk8OU.js";import"./create-visual-element-fgEnxW_6.js";var pa=/\s/;function fa(e){for(var t=e.length;t--&&pa.test(e.charAt(t)););return t}var ha=/^\s+/;function xa(e){return e&&e.slice(0,fa(e)+1).replace(ha,"")}var dn=NaN,va=/^[-+]0x[0-9a-f]+$/i,ba=/^0b[01]+$/i,ya=/^0o[0-7]+$/i,ga=parseInt;function mn(e){if(typeof e=="number")return e;if(Po(e))return dn;if(Oe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Oe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=xa(e);var r=ba.test(e);return r||ya.test(e)?ga(e.slice(2),r?2:8):va.test(e)?dn:+e}function Kn(e){return e}function $a(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var ja=800,Ca=16,Fa=Date.now;function wa(e){var t=0,r=0;return function(){var c=Fa(),u=Ca-(c-r);if(r=c,u>0){if(++t>=ja)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Na(e){return function(){return e}}var _a=nn?function(e,t){return nn(e,"toString",{configurable:!0,enumerable:!1,value:Na(t),writable:!0})}:Kn,Mn=wa(_a),pn=Math.max;function Un(e,t,r){return t=pn(t===void 0?e.length-1:t,0),function(){for(var c=arguments,u=-1,x=pn(c.length-t,0),p=Array(x);++u<x;)p[u]=c[t+u];u=-1;for(var $=Array(t+1);++u<t;)$[u]=c[u];return $[t]=r(p),$a(e,this,$)}}function Ea(e,t){return Mn(Un(e,t,Kn),e+"")}function Sa(e,t,r){if(!Oe(r))return!1;var c=typeof t;return(c=="number"?Nn(r)&&Do(t,r.length):c=="string"&&t in r)?_n(r[t],e):!1}function Aa(e){return Ea(function(t,r){var c=-1,u=r.length,x=u>1?r[u-1]:void 0,p=u>2?r[2]:void 0;for(x=e.length>3&&typeof x=="function"?(u--,x):void 0,p&&Sa(r[0],r[1],p)&&(x=u<3?void 0:x,u=1),t=Object(t);++c<u;){var $=r[c];$&&e(t,$,c,x)}return t})}var fn=on?on.isConcatSpreadable:void 0;function Ta(e){return gt(e)||$t(e)||!!(fn&&e&&e[fn])}function Ia(e,t,r,c,u){var x=-1,p=e.length;for(r||(r=Ta),u||(u=[]);++x<p;){var $=e[x];r($)?Bo(u,$):u[u.length]=$}return u}function Ra(e){var t=e==null?0:e.length;return t?Ia(e):[]}function Pa(e){return Mn(Un(e,void 0,Ra),e+"")}var Da="[object Object]",Ba=Function.prototype,ka=Object.prototype,Gn=Ba.toString,La=ka.hasOwnProperty,Oa=Gn.call(Object);function Wn(e){if(!En(e)||ko(e)!=Da)return!1;var t=Lo(e);if(t===null)return!0;var r=La.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Gn.call(r)==Oa}function Va(e,t,r){var c=-1,u=e.length;t<0&&(t=-t>u?0:u+t),r=r>u?u:r,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var x=Array(u);++c<u;)x[c]=e[c+t];return x}function za(e){return function(t,r,c){for(var u=-1,x=Object(t),p=c(t),$=p.length;$--;){var j=p[++u];if(r(x[j],j,x)===!1)break}return t}}var Ka=za(),yt=function(){return Oo.Date.now()},Ma="Expected a function",Ua=Math.max,Ga=Math.min;function Wa(e,t,r){var c,u,x,p,$,j,S=0,E=!1,L=!1,P=!0;if(typeof e!="function")throw new TypeError(Ma);t=mn(t)||0,Oe(r)&&(E=!0,L="maxWait"in r,x=L?Ua(mn(r.maxWait)||0,t):x,P="trailing"in r?!0:P);function Y(I){var V=c,v=u;return c=u=void 0,S=I,p=e.apply(v,V),p}function H(I){return S=I,$=setTimeout(N,t),E?Y(I):p}function O(I){var V=I-j,v=I-S,_=t-V;return L?Ga(_,x-v):_}function U(I){var V=I-j,v=I-S;return j===void 0||V>=t||V<0||L&&v>=x}function N(){var I=yt();if(U(I))return X(I);$=setTimeout(N,O(I))}function X(I){return $=void 0,P&&c?Y(I):(c=u=void 0,p)}function z(){$!==void 0&&clearTimeout($),S=0,c=j=u=$=void 0}function Q(){return $===void 0?p:X(yt())}function w(){var I=yt(),V=U(I);if(c=arguments,u=this,j=I,V){if($===void 0)return H(j);if(L)return clearTimeout($),$=setTimeout(N,t),Y(j)}return $===void 0&&($=setTimeout(N,t)),p}return w.cancel=z,w.flush=Q,w}function It(e,t,r){(r!==void 0&&!_n(e[t],r)||r===void 0&&!(t in e))&&Vo(e,t,r)}function Ha(e){return En(e)&&Nn(e)}function Rt(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function qa(e){return Sn(e,An(e))}function Za(e,t,r,c,u,x,p){var $=Rt(e,r),j=Rt(t,r),S=p.get(j);if(S){It(e,r,S);return}var E=x?x($,j,r+"",e,t,p):void 0,L=E===void 0;if(L){var P=gt(j),Y=!P&&zo(j),H=!P&&!Y&&Ko(j);E=j,P||Y||H?gt($)?E=$:Ha($)?E=Mo($):Y?(L=!1,E=Uo(j,!0)):H?(L=!1,E=Go(j,!0)):E=[]:Wn(j)||$t(j)?(E=$,$t($)?E=qa($):(!Oe($)||Wo($))&&(E=Ho(j))):L=!1}L&&(p.set(j,E),u(E,j,c,x,p),p.delete(j)),It(e,r,E)}function Hn(e,t,r,c,u){e!==t&&Ka(t,function(x,p){if(u||(u=new qo),Oe(x))Za(e,t,p,r,Hn,c,u);else{var $=c?c(Rt(e,p),x,p+"",e,t,u):void 0;$===void 0&&($=x),It(e,p,$)}},An)}function Ja(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function Ya(e,t){return t.length<2?e:Zo(e,Va(t,0,-1))}var Pt=Aa(function(e,t,r){Hn(e,t,r)});function Xa(e,t){return t=Tn(t,e),e=Ya(e,t),e==null||delete e[Jo(Ja(t))]}function Qa(e){return Wn(e)?void 0:e}var es=1,ts=2,ns=4,hn=Pa(function(e,t){var r={};if(e==null)return r;var c=!1;t=Yo(t,function(x){return x=Tn(x,e),c||(c=x.length>1),x}),Sn(e,Xo(e),r),c&&(r=Qo(r,es|ts|ns,Qa));for(var u=t.length;u--;)Xa(r,t[u]);return r}),xn=er({slots:{base:"group inline-flex flex-column w-full",listboxWrapper:"scroll-py-6 w-full",listbox:"",popoverContent:"w-full p-1 overflow-hidden",endContentWrapper:"relative flex h-full items-center -mr-2",clearButton:["text-medium","translate-x-1","cursor-text","opacity-0","pointer-events-none","text-default-500","group-data-[invalid=true]:text-danger","data-[visible=true]:opacity-100","data-[visible=true]:pointer-events-auto","data-[visible=true]:cursor-pointer","sm:data-[visible=true]:opacity-0","sm:data-[visible=true]:pointer-events-none","sm:group-data-[hover=true]:data-[visible=true]:opacity-100","sm:group-data-[hover=true]:data-[visible=true]:pointer-events-auto"],selectorButton:"text-medium"},variants:{isClearable:{true:{},false:{clearButton:"hidden"}},disableAnimation:{true:{selectorButton:"transition-none"},false:{selectorButton:"transition-transform duration-150 ease motion-reduce:transition-none"}},disableSelectorIconRotation:{true:{},false:{selectorButton:"data-[open=true]:rotate-180"}}},defaultVariants:{isClearable:!0,disableSelectorIconRotation:!1}});function os(e){var t;let{defaultFilter:r,menuTrigger:c="input",allowsEmptyCollection:u=!1,allowsCustomValue:x,shouldCloseOnBlur:p=!0}=e,[$,j]=d.useState(!1),[S,E]=d.useState(!1),[L,P]=d.useState(null),Y=W=>{e.onSelectionChange&&e.onSelectionChange(W),W===N&&(T(),h())};var H;let{collection:O,selectionManager:U,selectedKey:N,setSelectedKey:X,selectedItem:z,disabledKeys:Q}=br({...e,onSelectionChange:Y,items:(H=e.items)!==null&&H!==void 0?H:e.defaultItems}),[w,I]=tr(e.inputValue,vn(e.defaultInputValue,N,O)||"",e.onInputChange),[V]=d.useState(N),[v]=d.useState(w),_=O,a=d.useMemo(()=>e.items!=null||!r?O:rs(O,w,r),[O,w,r,e.items]),[b,C]=d.useState(a),y=d.useRef("focus"),G=Er({...e,onOpenChange:W=>{e.onOpenChange&&e.onOpenChange(W,W?y.current:void 0),U.setFocused(W),W||U.setFocusedKey(null)},isOpen:void 0,defaultOpen:void 0}),q=(W=null,J)=>{let ee=J==="manual"||J==="focus"&&c==="focus";(u||a.size>0||ee&&_.size>0||e.items)&&(ee&&!G.isOpen&&e.items===void 0&&j(!0),y.current=J,P(W),G.open())},o=(W=null,J)=>{let ee=J==="manual"||J==="focus"&&c==="focus";!(u||a.size>0||ee&&_.size>0||e.items)&&!G.isOpen||(ee&&!G.isOpen&&e.items===void 0&&j(!0),G.isOpen||(y.current=J),f(W))},s=d.useCallback(()=>{C($?_:a)},[$,_,a]),f=d.useCallback((W=null)=>{G.isOpen&&s(),P(W),G.toggle()},[G,s]),h=d.useCallback(()=>{G.isOpen&&(s(),G.close())},[G,s]),[i,M]=d.useState(w),T=()=>{var W,J;let ee=N!=null&&(J=(W=O.getItem(N))===null||W===void 0?void 0:W.textValue)!==null&&J!==void 0?J:"";M(ee),I(ee)};var R,se;let oe=d.useRef((se=(R=e.selectedKey)!==null&&R!==void 0?R:e.defaultSelectedKey)!==null&&se!==void 0?se:null);var re;let le=d.useRef(N!=null&&(re=(t=O.getItem(N))===null||t===void 0?void 0:t.textValue)!==null&&re!==void 0?re:"");d.useEffect(()=>{var W;S&&(a.size>0||u)&&!G.isOpen&&w!==i&&c!=="manual"&&q(null,"input"),!$&&!u&&G.isOpen&&a.size===0&&h(),N!=null&&N!==oe.current&&h(),w!==i&&(U.setFocusedKey(null),j(!1),w===""&&(e.inputValue===void 0||e.selectedKey===void 0)&&X(null)),N!==oe.current&&(e.inputValue===void 0||e.selectedKey===void 0)?T():i!==w&&M(w);var J;let ee=N!=null&&(J=(W=O.getItem(N))===null||W===void 0?void 0:W.textValue)!==null&&J!==void 0?J:"";!S&&N!=null&&e.inputValue===void 0&&N===oe.current&&le.current!==ee&&(M(ee),I(ee)),oe.current=N,le.current=ee});let ne=Jr({...e,value:d.useMemo(()=>({inputValue:w,selectedKey:N}),[w,N])}),he=()=>{x&&N==null?m():D()},m=()=>{oe.current=null,X(null),h()},D=()=>{if(e.selectedKey!==void 0&&e.inputValue!==void 0){var W,J;(W=e.onSelectionChange)===null||W===void 0||W.call(e,N);var ee;let ge=N!=null&&(ee=(J=O.getItem(N))===null||J===void 0?void 0:J.textValue)!==null&&ee!==void 0?ee:"";M(ge),h()}else T(),h()};const F=()=>{if(x){var W,J;const ee=N!=null&&(J=(W=O.getItem(N))===null||W===void 0?void 0:W.textValue)!==null&&J!==void 0?J:"";w===ee?D():m()}else D()};let te=()=>{G.isOpen&&U.focusedKey!=null?N===U.focusedKey?D():X(U.focusedKey):F()},ae=d.useRef(w),me=W=>{W?(ae.current=w,c==="focus"&&!e.isReadOnly&&q(null,"focus")):(p&&F(),w!==ae.current&&ne.commitValidation()),E(W)},be=d.useMemo(()=>G.isOpen?$?_:a:b,[G.isOpen,_,a,$,b]);var Se;let we=(Se=e.defaultSelectedKey)!==null&&Se!==void 0?Se:V;var Te;return{...ne,...G,focusStrategy:L,toggle:o,open:q,close:F,selectionManager:U,selectedKey:N,defaultSelectedKey:we,setSelectedKey:X,disabledKeys:Q,isFocused:S,setFocused:me,selectedItem:z,collection:be,inputValue:w,defaultInputValue:(Te=vn(e.defaultInputValue,we,O))!==null&&Te!==void 0?Te:v,setInputValue:I,commit:te,revert:he}}function rs(e,t,r){return new Lr(qn(e,e,t,r))}function qn(e,t,r,c){let u=[];for(let x of t)if(x.type==="section"&&x.hasChildNodes){let p=qn(e,In(x,e),r,c);[...p].some($=>$.type==="item")&&u.push({...x,childNodes:p})}else x.type==="item"&&c(x.textValue,r)?u.push({...x}):x.type!=="item"&&u.push({...x});return u}function vn(e,t,r){if(e==null){var c,u;if(t!=null)return(u=(c=r.getItem(t))===null||c===void 0?void 0:c.textValue)!==null&&u!==void 0?u:""}return e}var Zn={};Zn={buttonLabel:"عرض المقترحات",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} خيار`,other:()=>`${t.number(e.optionCount)} خيارات`})} متاحة.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`المجموعة المدخلة ${e.groupTitle}, مع ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} خيار`,other:()=>`${t.number(e.groupCount)} خيارات`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", محدد",other:""},e.isSelected)}`,listboxLabel:"مقترحات",selectedAnnouncement:e=>`${e.optionText}، محدد`};var Jn={};Jn={buttonLabel:"Покажи предложения",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} опция`,other:()=>`${t.number(e.optionCount)} опции`})} на разположение.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Въведена група ${e.groupTitle}, с ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} опция`,other:()=>`${t.number(e.groupCount)} опции`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", избрани",other:""},e.isSelected)}`,listboxLabel:"Предложения",selectedAnnouncement:e=>`${e.optionText}, избрани`};var Yn={};Yn={buttonLabel:"Zobrazit doporučení",countAnnouncement:(e,t)=>`K dispozici ${t.plural(e.optionCount,{one:()=>`je ${t.number(e.optionCount)} možnost`,other:()=>`jsou/je ${t.number(e.optionCount)} možnosti/-í`})}.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Zadaná skupina „${e.groupTitle}“ ${t.plural(e.groupCount,{one:()=>`s ${t.number(e.groupCount)} možností`,other:()=>`se ${t.number(e.groupCount)} možnostmi`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:" (vybráno)",other:""},e.isSelected)}`,listboxLabel:"Návrhy",selectedAnnouncement:e=>`${e.optionText}, vybráno`};var Xn={};Xn={buttonLabel:"Vis forslag",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} mulighed tilgængelig`,other:()=>`${t.number(e.optionCount)} muligheder tilgængelige`})}.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Angivet gruppe ${e.groupTitle}, med ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} mulighed`,other:()=>`${t.number(e.groupCount)} muligheder`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", valgt",other:""},e.isSelected)}`,listboxLabel:"Forslag",selectedAnnouncement:e=>`${e.optionText}, valgt`};var Qn={};Qn={buttonLabel:"Empfehlungen anzeigen",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} Option`,other:()=>`${t.number(e.optionCount)} Optionen`})} verfügbar.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Eingetretene Gruppe ${e.groupTitle}, mit ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} Option`,other:()=>`${t.number(e.groupCount)} Optionen`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", ausgewählt",other:""},e.isSelected)}`,listboxLabel:"Empfehlungen",selectedAnnouncement:e=>`${e.optionText}, ausgewählt`};var eo={};eo={buttonLabel:"Προβολή προτάσεων",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} επιλογή`,other:()=>`${t.number(e.optionCount)} επιλογές `})} διαθέσιμες.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Εισαγμένη ομάδα ${e.groupTitle}, με ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} επιλογή`,other:()=>`${t.number(e.groupCount)} επιλογές`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", επιλεγμένο",other:""},e.isSelected)}`,listboxLabel:"Προτάσεις",selectedAnnouncement:e=>`${e.optionText}, επιλέχθηκε`};var to={};to={focusAnnouncement:(e,t)=>`${t.select({true:()=>`Entered group ${e.groupTitle}, with ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} option`,other:()=>`${t.number(e.groupCount)} options`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", selected",other:""},e.isSelected)}`,countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} option`,other:()=>`${t.number(e.optionCount)} options`})} available.`,selectedAnnouncement:e=>`${e.optionText}, selected`,buttonLabel:"Show suggestions",listboxLabel:"Suggestions"};var no={};no={buttonLabel:"Mostrar sugerencias",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} opción`,other:()=>`${t.number(e.optionCount)} opciones`})} disponible(s).`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Se ha unido al grupo ${e.groupTitle}, con ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} opción`,other:()=>`${t.number(e.groupCount)} opciones`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", seleccionado",other:""},e.isSelected)}`,listboxLabel:"Sugerencias",selectedAnnouncement:e=>`${e.optionText}, seleccionado`};var oo={};oo={buttonLabel:"Kuva soovitused",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} valik`,other:()=>`${t.number(e.optionCount)} valikud`})} saadaval.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Sisestatud rühm ${e.groupTitle}, valikuga ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} valik`,other:()=>`${t.number(e.groupCount)} valikud`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", valitud",other:""},e.isSelected)}`,listboxLabel:"Soovitused",selectedAnnouncement:e=>`${e.optionText}, valitud`};var ro={};ro={buttonLabel:"Näytä ehdotukset",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} vaihtoehto`,other:()=>`${t.number(e.optionCount)} vaihtoehdot`})} saatavilla.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Mentiin ryhmään ${e.groupTitle}, ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} vaihtoehdon`,other:()=>`${t.number(e.groupCount)} vaihtoehdon`})} kanssa.`,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", valittu",other:""},e.isSelected)}`,listboxLabel:"Ehdotukset",selectedAnnouncement:e=>`${e.optionText}, valittu`};var ao={};ao={buttonLabel:"Afficher les suggestions",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} option`,other:()=>`${t.number(e.optionCount)} options`})} disponible(s).`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Groupe ${e.groupTitle} rejoint, avec ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} option`,other:()=>`${t.number(e.groupCount)} options`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", sélectionné(s)",other:""},e.isSelected)}`,listboxLabel:"Suggestions",selectedAnnouncement:e=>`${e.optionText}, sélectionné`};var so={};so={buttonLabel:"הצג הצעות",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`אפשרות ${t.number(e.optionCount)}`,other:()=>`${t.number(e.optionCount)} אפשרויות`})} במצב זמין.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`נכנס לקבוצה ${e.groupTitle}, עם ${t.plural(e.groupCount,{one:()=>`אפשרות ${t.number(e.groupCount)}`,other:()=>`${t.number(e.groupCount)} אפשרויות`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", נבחר",other:""},e.isSelected)}`,listboxLabel:"הצעות",selectedAnnouncement:e=>`${e.optionText}, נבחר`};var lo={};lo={buttonLabel:"Prikaži prijedloge",countAnnouncement:(e,t)=>`Dostupno još: ${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} opcija`,other:()=>`${t.number(e.optionCount)} opcije/a`})}.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Unesena skupina ${e.groupTitle}, s ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} opcijom`,other:()=>`${t.number(e.groupCount)} opcije/a`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", odabranih",other:""},e.isSelected)}`,listboxLabel:"Prijedlozi",selectedAnnouncement:e=>`${e.optionText}, odabrano`};var io={};io={buttonLabel:"Javaslatok megjelenítése",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} lehetőség`,other:()=>`${t.number(e.optionCount)} lehetőség`})} áll rendelkezésre.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Belépett a(z) ${e.groupTitle} csoportba, amely ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} lehetőséget`,other:()=>`${t.number(e.groupCount)} lehetőséget`})} tartalmaz. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", kijelölve",other:""},e.isSelected)}`,listboxLabel:"Javaslatok",selectedAnnouncement:e=>`${e.optionText}, kijelölve`};var uo={};uo={buttonLabel:"Mostra suggerimenti",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} opzione disponibile`,other:()=>`${t.number(e.optionCount)} opzioni disponibili`})}.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Ingresso nel gruppo ${e.groupTitle}, con ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} opzione`,other:()=>`${t.number(e.groupCount)} opzioni`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", selezionato",other:""},e.isSelected)}`,listboxLabel:"Suggerimenti",selectedAnnouncement:e=>`${e.optionText}, selezionato`};var co={};co={buttonLabel:"候補を表示",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} 個のオプション`,other:()=>`${t.number(e.optionCount)} 個のオプション`})}を利用できます。`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`入力されたグループ ${e.groupTitle}、${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} 個のオプション`,other:()=>`${t.number(e.groupCount)} 個のオプション`})}を含む。`,other:""},e.isGroupChange)}${e.optionText}${t.select({true:"、選択済み",other:""},e.isSelected)}`,listboxLabel:"候補",selectedAnnouncement:e=>`${e.optionText}、選択済み`};var mo={};mo={buttonLabel:"제안 사항 표시",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)}개 옵션`,other:()=>`${t.number(e.optionCount)}개 옵션`})}을 사용할 수 있습니다.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`입력한 그룹 ${e.groupTitle}, ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)}개 옵션`,other:()=>`${t.number(e.groupCount)}개 옵션`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", 선택됨",other:""},e.isSelected)}`,listboxLabel:"제안",selectedAnnouncement:e=>`${e.optionText}, 선택됨`};var po={};po={buttonLabel:"Rodyti pasiūlymus",countAnnouncement:(e,t)=>`Yra ${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} parinktis`,other:()=>`${t.number(e.optionCount)} parinktys (-ių)`})}.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Įvesta grupė ${e.groupTitle}, su ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} parinktimi`,other:()=>`${t.number(e.groupCount)} parinktimis (-ių)`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", pasirinkta",other:""},e.isSelected)}`,listboxLabel:"Pasiūlymai",selectedAnnouncement:e=>`${e.optionText}, pasirinkta`};var fo={};fo={buttonLabel:"Rādīt ieteikumus",countAnnouncement:(e,t)=>`Pieejamo opciju skaits: ${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} opcija`,other:()=>`${t.number(e.optionCount)} opcijas`})}.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Ievadīta grupa ${e.groupTitle}, ar ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} opciju`,other:()=>`${t.number(e.groupCount)} opcijām`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", atlasīta",other:""},e.isSelected)}`,listboxLabel:"Ieteikumi",selectedAnnouncement:e=>`${e.optionText}, atlasīta`};var ho={};ho={buttonLabel:"Vis forslag",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} alternativ`,other:()=>`${t.number(e.optionCount)} alternativer`})} finnes.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Angitt gruppe ${e.groupTitle}, med ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} alternativ`,other:()=>`${t.number(e.groupCount)} alternativer`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", valgt",other:""},e.isSelected)}`,listboxLabel:"Forslag",selectedAnnouncement:e=>`${e.optionText}, valgt`};var xo={};xo={buttonLabel:"Suggesties weergeven",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} optie`,other:()=>`${t.number(e.optionCount)} opties`})} beschikbaar.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Groep ${e.groupTitle} ingevoerd met ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} optie`,other:()=>`${t.number(e.groupCount)} opties`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", geselecteerd",other:""},e.isSelected)}`,listboxLabel:"Suggesties",selectedAnnouncement:e=>`${e.optionText}, geselecteerd`};var vo={};vo={buttonLabel:"Wyświetlaj sugestie",countAnnouncement:(e,t)=>`dostępna/dostępne(-nych) ${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} opcja`,other:()=>`${t.number(e.optionCount)} opcje(-i)`})}.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Dołączono do grupy ${e.groupTitle}, z ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} opcją`,other:()=>`${t.number(e.groupCount)} opcjami`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", wybrano",other:""},e.isSelected)}`,listboxLabel:"Sugestie",selectedAnnouncement:e=>`${e.optionText}, wybrano`};var bo={};bo={buttonLabel:"Mostrar sugestões",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} opção`,other:()=>`${t.number(e.optionCount)} opções`})} disponível.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Grupo inserido ${e.groupTitle}, com ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} opção`,other:()=>`${t.number(e.groupCount)} opções`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", selecionado",other:""},e.isSelected)}`,listboxLabel:"Sugestões",selectedAnnouncement:e=>`${e.optionText}, selecionado`};var yo={};yo={buttonLabel:"Apresentar sugestões",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} opção`,other:()=>`${t.number(e.optionCount)} opções`})} disponível.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Grupo introduzido ${e.groupTitle}, com ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} opção`,other:()=>`${t.number(e.groupCount)} opções`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", selecionado",other:""},e.isSelected)}`,listboxLabel:"Sugestões",selectedAnnouncement:e=>`${e.optionText}, selecionado`};var go={};go={buttonLabel:"Afișare sugestii",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} opțiune`,other:()=>`${t.number(e.optionCount)} opțiuni`})} disponibile.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Grup ${e.groupTitle} introdus, cu ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} opțiune`,other:()=>`${t.number(e.groupCount)} opțiuni`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", selectat",other:""},e.isSelected)}`,listboxLabel:"Sugestii",selectedAnnouncement:e=>`${e.optionText}, selectat`};var $o={};$o={buttonLabel:"Показать предложения",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} параметр`,other:()=>`${t.number(e.optionCount)} параметров`})} доступно.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Введенная группа ${e.groupTitle}, с ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} параметром`,other:()=>`${t.number(e.groupCount)} параметрами`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", выбранными",other:""},e.isSelected)}`,listboxLabel:"Предложения",selectedAnnouncement:e=>`${e.optionText}, выбрано`};var jo={};jo={buttonLabel:"Zobraziť návrhy",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} možnosť`,other:()=>`${t.number(e.optionCount)} možnosti/-í`})} k dispozícii.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Zadaná skupina ${e.groupTitle}, s ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} možnosťou`,other:()=>`${t.number(e.groupCount)} možnosťami`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", vybraté",other:""},e.isSelected)}`,listboxLabel:"Návrhy",selectedAnnouncement:e=>`${e.optionText}, vybraté`};var Co={};Co={buttonLabel:"Prikaži predloge",countAnnouncement:(e,t)=>`Na voljo je ${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} opcija`,other:()=>`${t.number(e.optionCount)} opcije`})}.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Vnesena skupina ${e.groupTitle}, z ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} opcija`,other:()=>`${t.number(e.groupCount)} opcije`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", izbrano",other:""},e.isSelected)}`,listboxLabel:"Predlogi",selectedAnnouncement:e=>`${e.optionText}, izbrano`};var Fo={};Fo={buttonLabel:"Prikaži predloge",countAnnouncement:(e,t)=>`Dostupno još: ${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} opcija`,other:()=>`${t.number(e.optionCount)} opcije/a`})}.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Unesena grupa ${e.groupTitle}, s ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} opcijom`,other:()=>`${t.number(e.groupCount)} optione/a`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", izabranih",other:""},e.isSelected)}`,listboxLabel:"Predlozi",selectedAnnouncement:e=>`${e.optionText}, izabrano`};var wo={};wo={buttonLabel:"Visa förslag",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} alternativ`,other:()=>`${t.number(e.optionCount)} alternativ`})} tillgängliga.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Ingick i gruppen ${e.groupTitle} med ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} alternativ`,other:()=>`${t.number(e.groupCount)} alternativ`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", valda",other:""},e.isSelected)}`,listboxLabel:"Förslag",selectedAnnouncement:e=>`${e.optionText}, valda`};var No={};No={buttonLabel:"Önerileri göster",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} seçenek`,other:()=>`${t.number(e.optionCount)} seçenekler`})} kullanılabilir.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Girilen grup ${e.groupTitle}, ile ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} seçenek`,other:()=>`${t.number(e.groupCount)} seçenekler`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", seçildi",other:""},e.isSelected)}`,listboxLabel:"Öneriler",selectedAnnouncement:e=>`${e.optionText}, seçildi`};var _o={};_o={buttonLabel:"Показати пропозиції",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} параметр`,other:()=>`${t.number(e.optionCount)} параметри(-ів)`})} доступно.`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`Введена група ${e.groupTitle}, з ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} параметр`,other:()=>`${t.number(e.groupCount)} параметри(-ів)`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", вибрано",other:""},e.isSelected)}`,listboxLabel:"Пропозиції",selectedAnnouncement:e=>`${e.optionText}, вибрано`};var Eo={};Eo={buttonLabel:"显示建议",countAnnouncement:(e,t)=>`有 ${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} 个选项`,other:()=>`${t.number(e.optionCount)} 个选项`})}可用。`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`进入了 ${e.groupTitle} 组，其中有 ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} 个选项`,other:()=>`${t.number(e.groupCount)} 个选项`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", 已选择",other:""},e.isSelected)}`,listboxLabel:"建议",selectedAnnouncement:e=>`${e.optionText}, 已选择`};var So={};So={buttonLabel:"顯示建議",countAnnouncement:(e,t)=>`${t.plural(e.optionCount,{one:()=>`${t.number(e.optionCount)} 選項`,other:()=>`${t.number(e.optionCount)} 選項`})} 可用。`,focusAnnouncement:(e,t)=>`${t.select({true:()=>`輸入的群組 ${e.groupTitle}, 有 ${t.plural(e.groupCount,{one:()=>`${t.number(e.groupCount)} 選項`,other:()=>`${t.number(e.groupCount)} 選項`})}. `,other:""},e.isGroupChange)}${e.optionText}${t.select({true:", 已選取",other:""},e.isSelected)}`,listboxLabel:"建議",selectedAnnouncement:e=>`${e.optionText}, 已選取`};var Ao={};Ao={"ar-AE":Zn,"bg-BG":Jn,"cs-CZ":Yn,"da-DK":Xn,"de-DE":Qn,"el-GR":eo,"en-US":to,"es-ES":no,"et-EE":oo,"fi-FI":ro,"fr-FR":ao,"he-IL":so,"hr-HR":lo,"hu-HU":io,"it-IT":uo,"ja-JP":co,"ko-KR":mo,"lt-LT":po,"lv-LV":fo,"nb-NO":ho,"nl-NL":xo,"pl-PL":vo,"pt-BR":bo,"pt-PT":yo,"ro-RO":go,"ru-RU":$o,"sk-SK":jo,"sl-SI":Co,"sr-SP":Fo,"sv-SE":wo,"tr-TR":No,"uk-UA":_o,"zh-CN":Eo,"zh-TW":So};function as(e){return e&&e.__esModule?e.default:e}function ss(e,t){let{buttonRef:r,popoverRef:c,inputRef:u,listBoxRef:x,keyboardDelegate:p,layoutDelegate:$,shouldFocusWrap:j,isReadOnly:S,isDisabled:E}=e,L=d.useRef(null);r=r??L;let P=Or(as(Ao),"@react-aria/combobox"),{menuTriggerProps:Y,menuProps:H}=Vr({type:"listbox",isDisabled:E||S},t,r);zr.set(t,{id:H.id});let{collection:O}=t,{disabledKeys:U}=t.selectionManager,N=d.useMemo(()=>p||new nr({collection:O,disabledKeys:U,ref:x,layoutDelegate:$}),[p,$,O,U,x]),{collectionProps:X}=or({selectionManager:t.selectionManager,keyboardDelegate:N,disallowTypeAhead:!0,disallowEmptySelection:!0,shouldFocusWrap:j,ref:u,isVirtualized:!0}),z=rr(),Q=m=>{if(!m.nativeEvent.isComposing)switch(m.key){case"Enter":case"Tab":if(t.isOpen&&m.key==="Enter"&&m.preventDefault(),t.isOpen&&x.current&&t.selectionManager.focusedKey!=null){let D=t.collection.getItem(t.selectionManager.focusedKey);if(D!=null&&D.props.href){let F=x.current.querySelector(`[data-key="${CSS.escape(t.selectionManager.focusedKey.toString())}"]`);m.key==="Enter"&&F instanceof HTMLAnchorElement&&z.open(F,m,D.props.href,D.props.routerOptions),t.close();break}else if(D!=null&&D.props.onAction){D.props.onAction(),t.close();break}}t.commit();break;case"Escape":(t.selectedKey!==null||t.inputValue===""||e.allowsCustomValue)&&m.continuePropagation(),t.revert();break;case"ArrowDown":t.open("first","manual");break;case"ArrowUp":t.open("last","manual");break;case"ArrowLeft":case"ArrowRight":t.selectionManager.setFocusedKey(null);break}},w=m=>{var D;let F=(r==null?void 0:r.current)&&r.current===m.relatedTarget,te=(D=c.current)===null||D===void 0?void 0:D.contains(m.relatedTarget);F||te||(e.onBlur&&e.onBlur(m),t.setFocused(!1))},I=m=>{t.isFocused||(e.onFocus&&e.onFocus(m),t.setFocused(!0))},{isInvalid:V,validationErrors:v,validationDetails:_}=t.displayValidation,{labelProps:a,inputProps:b,descriptionProps:C,errorMessageProps:y}=Yr({...e,onChange:t.setInputValue,onKeyDown:S?e.onKeyDown:ar(t.isOpen&&X.onKeyDown,Q,e.onKeyDown),onBlur:w,value:t.inputValue,defaultValue:t.defaultInputValue,onFocus:I,autoComplete:"off",validate:void 0,[Xr]:t},u),K=m=>{if(m.pointerType==="touch"){var D;(D=u.current)===null||D===void 0||D.focus(),t.toggle(null,"manual")}},G=m=>{if(m.pointerType!=="touch"){var D;(D=u.current)===null||D===void 0||D.focus(),t.toggle(m.pointerType==="keyboard"||m.pointerType==="virtual"?"first":null,"manual")}},q=un({id:Y.id,"aria-label":P.format("buttonLabel"),"aria-labelledby":e["aria-labelledby"]||a.id}),o=un({id:H.id,"aria-label":P.format("listboxLabel"),"aria-labelledby":e["aria-labelledby"]||a.id}),s=d.useRef(0),f=m=>{if(E||S)return;if(m.timeStamp-s.current<500){var D;m.preventDefault(),(D=u.current)===null||D===void 0||D.focus();return}let F=m.target.getBoundingClientRect(),te=m.changedTouches[0],ae=Math.ceil(F.left+.5*F.width),me=Math.ceil(F.top+.5*F.height);if(te.clientX===ae&&te.clientY===me){var be;m.preventDefault(),(be=u.current)===null||be===void 0||be.focus(),t.toggle(null,"manual"),s.current=m.timeStamp}},h=t.selectionManager.focusedKey!=null&&t.isOpen?t.collection.getItem(t.selectionManager.focusedKey):void 0;var i;let M=(i=h==null?void 0:h.parentKey)!==null&&i!==void 0?i:null;var T;let R=(T=t.selectionManager.focusedKey)!==null&&T!==void 0?T:null,se=d.useRef(M),oe=d.useRef(R);d.useEffect(()=>{if(ft()&&h!=null&&R!=null&&R!==oe.current){let D=t.selectionManager.isSelected(R),F=M!=null?t.collection.getItem(M):null,te=(F==null?void 0:F["aria-label"])||(typeof(F==null?void 0:F.rendered)=="string"?F.rendered:"")||"";var m;let ae=P.format("focusAnnouncement",{isGroupChange:(m=F&&M!==se.current)!==null&&m!==void 0?m:!1,groupTitle:te,groupCount:F?[...In(F,t.collection)].length:0,optionText:h["aria-label"]||h.textValue||"",isSelected:D});vt(ae)}se.current=M,oe.current=R});let re=Kr(t.collection),le=d.useRef(re),ne=d.useRef(t.isOpen);d.useEffect(()=>{let m=t.isOpen!==ne.current&&(t.selectionManager.focusedKey==null||ft());if(t.isOpen&&(m||re!==le.current)){let D=P.format("countAnnouncement",{optionCount:re});vt(D)}le.current=re,ne.current=t.isOpen});let he=d.useRef(t.selectedKey);return d.useEffect(()=>{if(ft()&&t.isFocused&&t.selectedItem&&t.selectedKey!==he.current){let m=t.selectedItem["aria-label"]||t.selectedItem.textValue||"",D=P.format("selectedAnnouncement",{optionText:m});vt(D)}he.current=t.selectedKey}),d.useEffect(()=>{if(t.isOpen)return yr([u.current,c.current].filter(m=>m!=null))},[t.isOpen,u,c]),Tr(()=>{!h&&u.current&&sr(lr(u.current))===u.current&&ir(u.current,null)},[h]),ur(x,"react-aria-item-action",t.isOpen?()=>{t.close()}:void 0),{labelProps:a,buttonProps:{...Y,...q,excludeFromTabOrder:!0,preventFocusOnPress:!0,onPress:K,onPressStart:G,isDisabled:E||S},inputProps:rn(b,{role:"combobox","aria-expanded":Y["aria-expanded"],"aria-controls":t.isOpen?H.id:void 0,"aria-autocomplete":"list","aria-activedescendant":h?Mr(t,h.key):void 0,onTouchEnd:f,autoCorrect:"off",spellCheck:"false"}),listBoxProps:rn(H,o,{autoFocus:t.focusStrategy||!0,shouldUseVirtualFocus:!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,linkBehavior:"selection",UNSTABLE_itemBehavior:"action"}),descriptionProps:C,errorMessageProps:y,isInvalid:V,validationErrors:v,validationDetails:_}}function ls(e){var t,r,c,u,x;const p=cr(),{validationBehavior:$}=Qr(ea)||{},[j,S]=dr(e,xn.variantKeys),E=(r=(t=e.disableAnimation)!=null?t:p==null?void 0:p.disableAnimation)!=null?r:!1,L=e.disableClearable!==void 0?!e.disableClearable:e.isReadOnly?!1:e.isClearable,{ref:P,as:Y,label:H,isLoading:O,menuTrigger:U="focus",filterOptions:N={sensitivity:"base"},children:X,selectorIcon:z,clearIcon:Q,scrollRef:w,defaultFilter:I,endContent:V,allowsEmptyCollection:v=!0,shouldCloseOnBlur:_=!0,popoverProps:a={},inputProps:b={},scrollShadowProps:C={},listboxProps:y={},selectorButtonProps:K={},clearButtonProps:G={},showScrollIndicators:q=!0,allowsCustomValue:o=!1,isVirtualized:s,maxListboxHeight:f=256,itemHeight:h=32,validationBehavior:i=(c=$??(p==null?void 0:p.validationBehavior))!=null?c:"native",className:M,classNames:T,errorMessage:R,onOpenChange:se,onClose:oe,onClear:re,isReadOnly:le=!1,...ne}=j,{contains:he}=na(N);let m=os({...e,children:X,menuTrigger:U,validationBehavior:i,shouldCloseOnBlur:_,allowsEmptyCollection:v,defaultFilter:I&&typeof I=="function"?I:he,onOpenChange:(k,B)=>{se==null||se(k,B),k||oe==null||oe()}});m={...m,...le&&{disabledKeys:new Set([...m.collection.getKeys()])}};const D=d.useRef(null),F=d.useRef(null),te=d.useRef(null),ae=d.useRef(null),me=an(P),be=an(w),{buttonProps:Se,inputProps:we,listBoxProps:Te,isInvalid:W,validationDetails:J,validationErrors:ee}=ss({validationBehavior:i,...e,inputRef:me,buttonRef:D,listBoxRef:te,popoverRef:ae},m),ge=e.isInvalid||W,ie={inputProps:je({label:H,ref:me,wrapperRef:F,onClick:()=>{!m.isOpen&&m.selectedItem&&m.open()},isClearable:!1,disableAnimation:E},b),popoverProps:je({offset:5,placement:"bottom",triggerScaleOnOpen:!1,disableAnimation:E},a),scrollShadowProps:je({ref:be,isEnabled:(u=q&&m.collection.size>5)!=null?u:!0,hideScrollBar:!0,offset:15},C),listboxProps:je({hideEmptyContent:o,emptyContent:"No results found.",disableAnimation:E},y),selectorButtonProps:je({isLoading:O,size:"sm",variant:"light",radius:"full",color:ge?"danger":e==null?void 0:e.color,isIconOnly:!0,disableAnimation:E},K),clearButtonProps:je({size:"sm",variant:"light",radius:"full",color:ge?"danger":e==null?void 0:e.color,isIconOnly:!0,disableAnimation:E},G)},He=Be(T==null?void 0:T.base,M),Pe=(x=ie.listboxProps)!=null&&x.hideEmptyContent?m.isOpen&&!!m.collection.size:m.isOpen;if(ta(()=>{if(!me.current)return;const k=me.current.value,B=m.collection.getItem(k);B&&m.inputValue!==B.textValue&&(m.setSelectedKey(k),m.setInputValue(B.textValue))},[me.current]),d.useEffect(()=>{let k;if(m.selectedKey!==null&&m.collection.getItem(m.selectedKey)&&!m.disabledKeys.has(m.selectedKey))k=m.selectedKey;else{let B=m.collection.getFirstKey();for(;B&&m.disabledKeys.has(B);)B=m.collection.getKeyAfter(B);k=B}m.selectionManager.setFocusedKey(k)},[m.collection,m.disabledKeys,m.selectedKey]),d.useEffect(()=>{if(m.isOpen&&ae.current&&te.current){let k=te.current.querySelector("[aria-selected=true] [data-label=true]"),B=be.current;if(k&&B&&k.parentElement){let ye=(B==null?void 0:B.getBoundingClientRect()).height;B.scrollTop=k.parentElement.offsetTop-ye/2+k.parentElement.clientHeight/2,m.selectionManager.setFocusedKey(m.selectedKey)}}},[m.isOpen,E]),d.useEffect(()=>{if(Pe&&ae.current&&F.current){let k=F.current.getBoundingClientRect(),B=ae.current;B.style.width=k.width+"px"}},[Pe]),we.onKeyDown){const k=we.onKeyDown;we.onKeyDown=B=>("continuePropagation"in B&&(B.stopPropagation=()=>{}),k(B))}const qe=Y||"div",$e=d.useMemo(()=>xn({...S,isClearable:L,disableAnimation:E}),[mr(S),L,E]),Ze=()=>({"data-invalid":xt(ge),"data-open":xt(m.isOpen),className:$e.base({class:He})}),Je=()=>{var k;return{ref:D,...je(Se,ie.selectorButtonProps),"data-open":xt(m.isOpen),className:$e.selectorButton({class:Be(T==null?void 0:T.selectorButton,(k=ie.selectorButtonProps)==null?void 0:k.className)})}},Ye=()=>{var k,B;return{...ie.clearButtonProps,preventFocusOnPress:!0,excludeFromTabOrder:!0,onPressStart:()=>{var ue;(ue=me.current)==null||ue.focus()},onPress:ue=>{var ye,Ie;(Ie=(ye=ie.clearButtonProps)==null?void 0:ye.onPress)==null||Ie.call(ye,ue),m.selectedItem&&m.setSelectedKey(null),m.setInputValue(""),m.open(),re==null||re()},"data-visible":!!m.selectedItem||((k=m.inputValue)==null?void 0:k.length)>0,className:$e.clearButton({class:Be(T==null?void 0:T.clearButton,(B=ie.clearButtonProps)==null?void 0:B.className)})}},Xe=i==="native"&&m.displayValidation.isInvalid===!1&&m.realtimeValidation.isInvalid===!0;return{Component:qe,inputRef:me,label:H,state:m,slots:$e,classNames:T,isLoading:O,clearIcon:Q,isOpen:Pe,endContent:V,isClearable:L,disableAnimation:E,allowsCustomValue:o,selectorIcon:z,getBaseProps:Ze,getInputProps:()=>({...ne,...we,...ie.inputProps,isInvalid:Xe?void 0:ge,validationBehavior:i,errorMessage:typeof R=="function"?R({isInvalid:ge,validationErrors:ee,validationDetails:J}):R||(ee==null?void 0:ee.join(" ")),onClick:ht(ie.inputProps.onClick,ne.onClick)}),getListBoxProps:()=>{const k=s??m.collection.size>50;return{state:m,ref:te,isVirtualized:k,virtualization:k?{maxListboxHeight:f,itemHeight:h}:void 0,scrollShadowProps:ie.scrollShadowProps,...je(ie.listboxProps,Te,{shouldHighlightOnFocus:!0})}},getPopoverProps:(k={})=>{var B,ue,ye;const Ie=je(ie.popoverProps,k);return{state:m,ref:ae,triggerRef:F,scrollRef:te,triggerType:"listbox",...Ie,classNames:{...(B=ie.popoverProps)==null?void 0:B.classNames,content:$e.popoverContent({class:Be(T==null?void 0:T.popoverContent,(ye=(ue=ie.popoverProps)==null?void 0:ue.classNames)==null?void 0:ye.content,k.className)})},disableDialogFocus:!0}},getEmptyPopoverProps:()=>({ref:ae,className:"hidden"}),getClearButtonProps:Ye,getSelectorButtonProps:Je,getListBoxWrapperProps:(k={})=>{var B,ue;return{...je(ie.scrollShadowProps,k),className:$e.listboxWrapper({class:Be(T==null?void 0:T.listboxWrapper,(B=ie.scrollShadowProps)==null?void 0:B.className,k==null?void 0:k.className)}),style:{maxHeight:(ue=e.maxListboxHeight)!=null?ue:256}}},getEndContentWrapperProps:(k={})=>({className:$e.endContentWrapper({class:Be(T==null?void 0:T.endContentWrapper,k==null?void 0:k.className)}),onPointerDown:ht(k.onPointerDown,B=>{var ue;B.button===0&&B.currentTarget===B.target&&((ue=me.current)==null||ue.focus())}),onMouseDown:ht(k.onMouseDown,B=>{B.button===0&&B.currentTarget===B.target&&B.preventDefault()})})}}var is=pr(function(t,r){var c;const{Component:u,isOpen:x,disableAnimation:p,selectorIcon:$=n.jsx(Hr,{}),clearIcon:j=n.jsx(gr,{}),endContent:S,getBaseProps:E,getSelectorButtonProps:L,getInputProps:P,getListBoxProps:Y,getPopoverProps:H,getEmptyPopoverProps:O,getClearButtonProps:U,getListBoxWrapperProps:N,getEndContentWrapperProps:X}=ls({...t,ref:r}),z=Y(),Q=x?n.jsx(Ur,{...H(),children:n.jsx(Gr,{...N(),children:n.jsx(Wr,{...z})})}):((c=z.state)==null?void 0:c.collection.size)===0?n.jsx("div",{...O()}):null;return n.jsxs(u,{...E(),children:[n.jsx(ve,{...P(),endContent:n.jsxs("div",{...X(),children:[S||n.jsx(xe,{...U(),children:j}),$&&n.jsx(xe,{...L(),children:$})]})}),p?Q:n.jsx(fr,{children:Q})]})}),us=is;function cs({title:e,titleId:t,...r},c){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":t},r),e?d.createElement("title",{id:t},e):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const bn=d.forwardRef(cs);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],yn=Bt("eye-off",ds);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gn=Bt("eye",ms);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fs=Bt("lock",ps),Ae=()=>"var(--borderRadius, 12px)",hs=({allUsers:e,roles:t,designations:r,isMobile:c,isTablet:u,setUsers:x,pagination:p,onPageChange:$,onRowsPerPageChange:j,totalUsers:S=0,onEdit:E,loading:L=!1,updateUserOptimized:P,deleteUserOptimized:Y,toggleUserStatusOptimized:H,updateUserRolesOptimized:O,toggleSingleDeviceLogin:U,resetUserDevice:N,deviceActions:X={}})=>{const[z,Q]=d.useState({}),w=d.useRef({}),I=(o,s="w-5 h-5")=>{const f=(o==null?void 0:o.toLowerCase())||"";return f.includes("mobile")||f.includes("android")||f.includes("iphone")?n.jsx(Ue,{className:`${s} text-primary`}):f.includes("tablet")||f.includes("ipad")?n.jsx(Dn,{className:`${s} text-secondary`}):n.jsx(On,{className:`${s} text-default-500`})},V=o=>{const s=(o==null?void 0:o.toLowerCase())||"";return s.includes("mobile")||s.includes("android")||s.includes("iphone")?"Mobile Device":s.includes("tablet")||s.includes("ipad")?"Tablet":"Desktop"},v=(o,s,f)=>{Q(h=>({...h,[`${o}-${s}`]:f}))},_=(o,s)=>z[`${o}-${s}`]||!1;async function a(o,s){v(o,"role",!0);const f=new Promise(async(h,i)=>{var M;try{const T=await axios.post(route("user.updateRole",{id:o}),{roles:s});T.status===200&&(O&&O(o,s),h([T.data.message||"Role updated successfully"]))}catch(T){((M=T.response)==null?void 0:M.status)===422?i(T.response.data.errors||["Failed to update user role."]):i(["An unexpected error occurred. Please try again later."])}finally{v(o,"role",!1)}});return de.promise(f,{pending:"Updating employee role...",success:{render({data:h}){return h.join(", ")}},error:{render({data:h}){return Array.isArray(h)?h.join(", "):h}}}),f}const b=d.useCallback((o,s)=>{w.current[o]&&clearTimeout(w.current[o]),w.current[o]=setTimeout(async()=>{var f,h;v(o,"reportTo",!0);try{const i=await axios.post(route("users.updateReportTo",{id:o}),{report_to:s||null});i.status===200&&(x&&x(M=>M.map(T=>{var R;return T.id===o?{...T,report_to:s||null,reports_to:((R=i.data.user)==null?void 0:R.reports_to)||null}:T})),de.success(i.data.message||"Report to updated successfully"))}catch(i){console.error("Error updating report to:",i),de.error(((h=(f=i.response)==null?void 0:f.data)==null?void 0:h.error)||"Failed to update report to")}finally{v(o,"reportTo",!1)}},500)},[x]),C=d.useCallback(o=>{var M,T;if(!e||!r)return[];const s=((M=o==null?void 0:o.department)==null?void 0:M.id)||(o==null?void 0:o.department_id),f=((T=o==null?void 0:o.designation)==null?void 0:T.id)||(o==null?void 0:o.designation_id),h=r==null?void 0:r.find(R=>String(R.id)===String(f)),i=h==null?void 0:h.hierarchy_level;return i==null?[]:e.filter(R=>{var le,ne;if(R.id===o.id||!R.active)return!1;const se=((le=R==null?void 0:R.department)==null?void 0:le.id)||(R==null?void 0:R.department_id);if(String(se)!==String(s))return!1;const oe=((ne=R==null?void 0:R.designation)==null?void 0:ne.id)||(R==null?void 0:R.designation_id),re=r==null?void 0:r.find(he=>String(he.id)===String(oe));return!re||re.hierarchy_level===void 0?!1:re.hierarchy_level<i})},[e,r]),y=d.useMemo(()=>{const o=[{name:"#",uid:"sl"},{name:"USER",uid:"user"},{name:"EMAIL",uid:"email"},{name:"DEPARTMENT",uid:"department"},{name:"REPORT TO",uid:"report_to"},{name:"DEVICE STATUS",uid:"device_status"},{name:"STATUS",uid:"status"},{name:"ROLES",uid:"roles"},{name:"ACTIONS",uid:"actions"}];if(!c&&!u)o.splice(3,0,{name:"PHONE",uid:"phone"});else if(c)o.splice(o.findIndex(s=>s.uid==="department"),1),o.splice(o.findIndex(s=>s.uid==="report_to"),1),o.splice(o.findIndex(s=>s.uid==="device_status"),1);else if(u){const s=o.findIndex(f=>f.uid==="device_status");if(s>-1){const f=o.splice(s,1)[0];o.splice(2,0,f)}}return o},[c,u]),K=async(o,s)=>{if(!_(o,"status")){v(o,"status",!0);try{H?(H(o,!s),de.success(`User status ${s?"deactivated":"activated"} successfully`)):x&&(x(f=>f.map(h=>h.id===o?{...h,active:!s}:h)),de.success(`User status ${s?"deactivated":"activated"} successfully`))}catch(f){console.error("Error toggling user status:",f),de.error("Failed to update user status")}finally{v(o,"status",!1)}}},G=(o,s,f)=>{var i,M;const h=o[s];switch(s){case"sl":const se=(p!=null&&p.currentPage&&(p!=null&&p.perPage)?Number((p.currentPage-1)*p.perPage):0)+(typeof f=="number"?f:0)+1;return n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("div",{className:"flex items-center justify-center w-8 h-8 border shadow-sm",style:{background:"var(--theme-content2, #F4F4F5)",borderColor:"var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 8px)",color:"var(--theme-foreground, #000000)"},children:n.jsx("span",{className:"text-sm font-bold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:se})})});case"user":return n.jsx(Tt,{className:"w-fit max-w-full",avatarProps:{radius:Ae(),size:"sm",src:(o==null?void 0:o.profile_image_url)||(o==null?void 0:o.profile_image),showFallback:!0,name:(o==null?void 0:o.name)||"Unnamed User",isBordered:!0,style:{borderColor:"var(--theme-primary, #3B82F6)",borderWidth:"2px"}},name:n.jsx("span",{className:"text-sm font-semibold whitespace-nowrap text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:(o==null?void 0:o.name)||"Unnamed User"}),description:n.jsxs("span",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["ID: ",o==null?void 0:o.id]})});case"email":return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:n.jsx(Et,{className:"w-3.5 h-3.5"})}),n.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:o.email})]});case"phone":return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:n.jsx(Ct,{className:"w-3.5 h-3.5"})}),n.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:o.phone||"N/A"})]});case"department":return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:n.jsx(Me,{className:"w-3.5 h-3.5"})}),n.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((i=o==null?void 0:o.department)==null?void 0:i.name)||"N/A"})]});case"report_to":const oe=C(o),re=_(o.id,"reportTo"),le=o.reports_to||(o.report_to?e==null?void 0:e.find(F=>F.id===o.report_to):null);return n.jsx("div",{className:"flex items-center min-w-[180px]",children:n.jsx(Re,{size:"sm",variant:"bordered",radius:Ae(),placeholder:"Select manager",isDisabled:re||!oe.length,isLoading:re,selectedKeys:o.report_to?[String(o.report_to)]:[],onSelectionChange:F=>{const te=Array.from(F)[0],ae=te?parseInt(te,10):null;ae!==o.report_to&&b(o.id,ae)},classNames:{trigger:"min-h-unit-10 h-unit-10",value:"text-small"},renderValue:F=>le?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_t,{src:le.profile_image_url||le.profile_image,size:"sm",className:"w-6 h-6 flex-shrink-0",showFallback:!0,name:le.name}),n.jsx("span",{className:"text-sm font-medium truncate",children:le.name})]}):n.jsx("span",{className:"text-default-400 text-sm",children:"No manager"}),children:oe.length===0?n.jsx(fe,{isDisabled:!0,textValue:"No eligible managers",children:n.jsx("span",{className:"text-default-400",children:"No eligible managers in department"})},"no-managers"):oe.map(F=>{var te,ae;return n.jsx(fe,{textValue:F.name,children:n.jsx(Tt,{name:F.name,description:((te=F.designation)==null?void 0:te.title)||((ae=F.designation)==null?void 0:ae.name)||"",avatarProps:{src:F.profile_image_url||F.profile_image,size:"sm",showFallback:!0,name:F.name}})},String(F.id))})})});case"device_status":const ne=_(o.id,"deviceToggle");return n.jsx("div",{className:"flex items-center space-x-2",children:o.single_device_login?n.jsxs(n.Fragment,{children:[n.jsx(Ce,{size:"sm",variant:"flat",color:o.active_device?"warning":"success",startContent:ne?n.jsx("div",{className:"animate-spin",children:n.jsx(ke,{className:"w-3 h-3"})}):o.active_device?n.jsx(st,{className:"w-3 h-3"}):n.jsx(at,{className:"w-3 h-3"}),children:ne?"Loading...":o.active_device?"Locked":"Free"}),o.active_device&&!ne&&n.jsx(At,{content:n.jsxs("div",{className:"backdrop-blur-md border rounded-lg p-4 shadow-2xl max-w-sm",style:{background:"color-mix(in srgb, var(--theme-content1) 20%, transparent)",borderColor:"var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)"},children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[I(o.active_device.user_agent,"w-5 h-5"),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-foreground text-sm",style:{fontFamily:'var(--fontFamily, "Inter")'},children:o.active_device.device_name||"Unknown Device"}),n.jsx("div",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:V(o.active_device.user_agent)})]})]}),n.jsx("div",{className:"space-y-2 text-xs",children:n.jsx("div",{className:"pt-2 mt-2 border-t",style:{borderColor:"color-mix(in srgb, var(--theme-divider) 20%, transparent)"},children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ln,{className:"w-3 h-3 text-success"}),n.jsx("span",{className:"text-success text-xs font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:o.active_device.is_active?"Currently Active":"Inactive"})]})})})]}),placement:"top",classNames:{content:"p-0 bg-transparent shadow-none border-none"},children:n.jsx("div",{className:"flex items-center p-1 rounded-sm hover:bg-content1/10 transition-colors cursor-default",children:I(o.active_device.user_agent,"w-4 h-4")})})]}):n.jsx(Ce,{size:"sm",variant:"flat",color:"default",startContent:ne?n.jsx("div",{className:"animate-spin",children:n.jsx(ke,{className:"w-3 h-3"})}):n.jsx(Ge,{className:"w-3 h-3"}),children:ne?"Loading...":"Disabled"})});case"status":return n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o.active,onChange:()=>K(o.id,o.active),disabled:_(o.id,"status")}),n.jsx("div",{className:"w-11 h-6 peer-focus:outline-hidden peer-focus:ring-4 peer-focus:ring-opacity-30 rounded-full peer transition-all duration-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all",style:{backgroundColor:o.active?"var(--theme-success, #10B981)":"var(--theme-danger, #EF4444)"}}),_(o.id,"status")&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx(tt,{size:"sm",color:"default"})})]}),n.jsx("span",{className:"text-xs font-medium",style:{color:o.active?"var(--theme-success, #10B981)":"var(--theme-danger, #EF4444)",fontFamily:'var(--fontFamily, "Inter")'},children:o.active?"Active":"Inactive"})]});case"roles":const he=((M=o.roles)==null?void 0:M.map(F=>typeof F=="object"&&F!==null?F.name:F))||[],m=new Set(he),D=Array.from(m).join(", ")||"No Roles";return n.jsx("div",{className:"flex items-center",children:n.jsxs(Ft,{isDisabled:_(o.id,"role"),className:"max-w-[220px]",children:[n.jsx(wt,{children:n.jsx(xe,{className:"capitalize",variant:"solid",size:"sm",radius:Ae(),startContent:_(o.id,"role")?n.jsx(tt,{size:"sm"}):null,style:{background:"var(--theme-primary, #3B82F6)",color:"white",fontFamily:'var(--fontFamily, "Inter")',borderRadius:Ae()},children:D})}),n.jsx(Nt,{disallowEmptySelection:!1,"aria-label":"Role selection",closeOnSelect:!1,selectedKeys:m,selectionMode:"multiple",variant:"flat",onSelectionChange:F=>{const te=Array.from(F);a(o.id,te)},children:(t||[]).map(F=>n.jsx(Fe,{children:typeof F=="object"&&F!==null?F.name:F},typeof F=="object"&&F!==null?F.name:F))})]})});case"actions":return n.jsx("div",{className:"flex justify-center items-center",children:n.jsxs(Ft,{children:[n.jsx(wt,{children:n.jsx(xe,{isIconOnly:!0,size:"sm",variant:"solid",radius:Ae(),style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)",fontFamily:'var(--fontFamily, "Inter")',borderRadius:Ae()},className:"hover:opacity-80 transition-opacity",children:n.jsx(St,{className:"w-4 h-4"})})}),n.jsxs(Nt,{style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-divider, #E5E7EB)",borderRadius:Ae()},children:[n.jsx(Fe,{textValue:"View Profile",href:route("profile",{user:o.id}),as:sn,className:"text-blue-500",startContent:n.jsx(rt,{className:"w-4 h-4"}),children:"View Profile"}),n.jsx(Fe,{textValue:"Edit User",onPress:()=>{E&&E(o)},className:"text-amber-500",startContent:n.jsx(kn,{className:"w-4 h-4"}),children:"Edit"}),n.jsx(Fe,{textValue:"Device Toggle",onPress:()=>{U&&!_(o.id,"deviceToggle")&&(v(o.id,"deviceToggle",!0),U(o.id,!o.single_device_login).finally(()=>{v(o.id,"deviceToggle",!1)}))},isDisabled:X[o.id]||_(o.id,"deviceToggle"),startContent:_(o.id,"deviceToggle")?n.jsx("div",{className:"animate-spin",children:n.jsx(ke,{className:"w-4 h-4"})}):o.single_device_login?n.jsx(at,{className:"w-4 h-4"}):n.jsx(st,{className:"w-4 h-4"}),className:o.single_device_login?"text-orange-500":"text-green-500",children:_(o.id,"deviceToggle")?"Processing...":o.single_device_login?"Disable Device Lock":"Enable Device Lock"}),o.single_device_login&&o.active_device&&n.jsx(Fe,{textValue:"Reset Device",onPress:()=>{N&&!_(o.id,"deviceReset")&&(v(o.id,"deviceReset",!0),N(o.id).finally(()=>{v(o.id,"deviceReset",!1)}))},isDisabled:X[o.id]||_(o.id,"deviceReset"),startContent:_(o.id,"deviceReset")?n.jsx("div",{className:"animate-spin",children:n.jsx(ke,{className:"w-4 h-4"})}):n.jsx(ke,{className:"w-4 h-4"}),className:"text-red-500",children:_(o.id,"deviceReset")?"Resetting...":"Reset Device"}),n.jsx(Fe,{textValue:"View Devices",href:route("admin.users.devices",{userId:o.id}),as:sn,startContent:n.jsx(Ue,{className:"w-4 h-4"}),className:"text-blue-500",children:"View Device History"})]})]})});default:return h}},q=()=>!e||!S||L?null:n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-6 py-4 border-t",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:"var(--theme-content2, #F4F4F5)",borderRadius:"0 0 var(--borderRadius, 12px) var(--borderRadius, 12px)"},children:[n.jsxs("span",{className:"text-sm text-default-600 mb-3 sm:mb-0 font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["Showing"," ",n.jsx("span",{className:"font-semibold text-default-900",children:(p.currentPage-1)*p.perPage+1})," ","to"," ",n.jsx("span",{className:"font-semibold text-default-900",children:Math.min(p.currentPage*p.perPage,S)})," ","of"," ",n.jsx("span",{className:"font-semibold text-default-900",children:S})," ","users"]}),n.jsx(Vn,{total:Math.ceil(S/p.perPage),initialPage:p.currentPage,page:p.currentPage,onChange:$,size:c?"sm":"md",variant:"flat",showControls:!0,radius:Ae(),style:{fontFamily:'var(--fontFamily, "Inter")'},classNames:{wrapper:"gap-1",item:"bg-default-100 hover:bg-default-200 text-default-700 font-medium border border-default-200",cursor:"bg-primary text-primary-foreground font-semibold shadow-md",prev:"bg-default-100 hover:bg-default-200 text-default-700 border border-default-200",next:"bg-default-100 hover:bg-default-200 text-default-700 border border-default-200"}})]});return n.jsxs("div",{className:"w-full flex flex-col border rounded-lg shadow-lg",style:{maxHeight:"calc(100vh - 240px)",borderColor:"var(--theme-divider, #E4E4E7)",background:"var(--theme-content1, #FFFFFF)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[n.jsx("div",{className:"flex-1 overflow-auto",style:{scrollbarWidth:"thin",scrollbarColor:"var(--theme-divider, #E4E4E7) transparent"},children:n.jsxs(Ir,{removeWrapper:!0,selectionMode:"none",isCompact:c,classNames:{base:"min-w-[900px]",wrapper:"p-0 shadow-none",th:"text-default-600 border-b font-semibold text-xs sticky top-0 z-30",td:"border-b py-4 px-3",table:"border-collapse w-full",thead:"sticky top-0 z-30",tbody:"",tr:"hover:bg-default-50 transition-colors duration-150",emptyWrapper:"text-center h-32",loadingWrapper:"h-32"},style:{"--table-border-color":"var(--theme-divider, #E4E4E7)","--table-header-bg":"var(--theme-content2, #F4F4F5)","--table-row-hover":"var(--theme-default-50, #F9FAFB)"},children:[n.jsx(Br,{columns:y,children:o=>n.jsx(kr,{align:o.uid==="actions"||o.uid==="sl"?"center":"start",width:o.uid==="user"?280:o.uid==="email"?240:o.uid==="phone"?140:o.uid==="department"?160:o.uid==="report_to"?200:o.uid==="device_status"?160:o.uid==="status"?120:o.uid==="roles"?180:o.uid==="actions"?120:void 0,style:{background:"var(--table-header-bg)",borderColor:"var(--table-border-color)",fontFamily:'var(--fontFamily, "Inter")',fontSize:"0.75rem",fontWeight:"600"},children:n.jsxs("div",{className:"flex items-center gap-2 py-1",children:[o.uid==="sl"&&n.jsx(Sr,{className:"w-3 h-3 text-default-400"}),o.uid==="user"&&n.jsx(rt,{className:"w-3 h-3 text-default-400"}),o.uid==="email"&&n.jsx(Et,{className:"w-3 h-3 text-default-400"}),o.uid==="phone"&&n.jsx(Ct,{className:"w-3 h-3 text-default-400"}),o.uid==="department"&&n.jsx(Me,{className:"w-3 h-3 text-default-400"}),o.uid==="report_to"&&n.jsx(Ke,{className:"w-3 h-3 text-default-400"}),o.uid==="device_status"&&n.jsx(Ue,{className:"w-3 h-3 text-default-400"}),o.uid==="status"&&n.jsx(Bn,{className:"w-3 h-3 text-default-400"}),o.uid==="roles"&&n.jsx(Ge,{className:"w-3 h-3 text-default-400"}),o.uid==="actions"&&n.jsx(St,{className:"w-3 h-3 text-default-400"}),n.jsx("span",{children:o.name})]})},o.uid)}),n.jsx(Rr,{items:e||[],emptyContent:n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx(Ar,{className:"w-12 h-12 text-default-300 mb-3"}),n.jsx("p",{className:"text-default-500 font-medium",children:"No users found"}),n.jsx("p",{className:"text-default-400 text-sm",children:"Try adjusting your search or filters"})]}),loadingContent:n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx(tt,{size:"lg",color:"primary"})}),isLoading:L,children:(o,s)=>{const f=e?e.findIndex(h=>h.id===o.id):s;return n.jsx(Pr,{className:"group",style:{background:"var(--theme-content1, #FFFFFF)"},children:h=>n.jsx(Dr,{style:{borderColor:"var(--table-border-color)",fontFamily:'var(--fontFamily, "Inter")',background:"inherit"},children:G(o,h,f)})},o.id)}})]})}),q()]})};let We=Le.create(),To=(e,t)=>`${e.method}:${e.baseURL??t.defaults.baseURL??""}${e.url}`,Io=e=>e.status===204&&e.headers["precognition-success"]==="true";const lt={},Ee={get:(e,t={},r={})=>ze(Ve("get",e,t,r)),post:(e,t={},r={})=>ze(Ve("post",e,t,r)),patch:(e,t={},r={})=>ze(Ve("patch",e,t,r)),put:(e,t={},r={})=>ze(Ve("put",e,t,r)),delete:(e,t={},r={})=>ze(Ve("delete",e,t,r)),use(e){return We=e,Ee},axios(){return We},fingerprintRequestsUsing(e){return To=e===null?()=>null:e,Ee},determineSuccessUsing(e){return Io=e,Ee}},Ve=(e,t,r,c)=>({url:t,method:e,...c,...["get","delete"].includes(e)?{params:Pt({},r,c==null?void 0:c.params)}:{data:Pt({},r,c==null?void 0:c.data)}}),ze=(e={})=>{const t=[xs,bs,ys].reduce((r,c)=>c(r),e);return(t.onBefore??(()=>!0))()===!1?Promise.resolve(null):((t.onStart??(()=>null))(),We.request(t).then(async r=>{t.precognitive&&$n(r);const c=r.status;let u=r;return t.precognitive&&t.onPrecognitionSuccess&&Io(u)&&(u=await Promise.resolve(t.onPrecognitionSuccess(u)??u)),t.onSuccess&&vs(c)&&(u=await Promise.resolve(t.onSuccess(u)??u)),(jn(t,c)??(p=>p))(u)??u},r=>gs(r)?Promise.reject(r):(t.precognitive&&$n(r.response),(jn(t,r.response.status)??((u,x)=>Promise.reject(x)))(r.response,r))).finally(t.onFinish??(()=>null)))},xs=e=>{const t=e.only??e.validate;return{...e,timeout:e.timeout??We.defaults.timeout??3e4,precognitive:e.precognitive!==!1,fingerprint:typeof e.fingerprint>"u"?To(e,We):e.fingerprint,headers:{...e.headers,"Content-Type":$s(e),...e.precognitive!==!1?{Precognition:!0}:{},...t?{"Precognition-Validate-Only":Array.from(t).join()}:{}}}},vs=e=>e>=200&&e<300,bs=e=>{var t;return typeof e.fingerprint!="string"||((t=lt[e.fingerprint])==null||t.abort(),delete lt[e.fingerprint]),e},ys=e=>typeof e.fingerprint!="string"||e.signal||e.cancelToken||!e.precognitive?e:(lt[e.fingerprint]=new AbortController,{...e,signal:lt[e.fingerprint].signal}),$n=e=>{var t;if(((t=e.headers)==null?void 0:t.precognition)!=="true")throw Error("Did not receive a Precognition response. Ensure you have the Precognition middleware in place for the route.")},gs=e=>{var t;return!Pn(e)||typeof((t=e.response)==null?void 0:t.status)!="number"||Rn(e)},jn=(e,t)=>({401:e.onUnauthorized,403:e.onForbidden,404:e.onNotFound,409:e.onConflict,422:e.onValidationError,423:e.onLocked})[t],$s=e=>{var t,r,c;return((t=e.headers)==null?void 0:t["Content-Type"])??((r=e.headers)==null?void 0:r["Content-type"])??((c=e.headers)==null?void 0:c["content-type"])??(Ro(e.data)?"multipart/form-data":"application/json")},Ro=e=>kt(e)||typeof e=="object"&&e!==null&&Object.values(e).some(t=>Ro(t)),kt=e=>typeof File<"u"&&e instanceof File||e instanceof Blob||typeof FileList<"u"&&e instanceof FileList&&e.length>0,Cn=e=>typeof e=="string"?e:e(),Fn=e=>typeof e=="string"?e.toLowerCase():e(),js=(e,t={})=>{const r={errorsChanged:[],touchedChanged:[],validatingChanged:[],validatedChanged:[]};let c=!1,u=!1;const x=b=>b!==u?(u=b,r.validatingChanged):[];let p=[];const $=b=>{const C=[...new Set(b)];return p.length!==C.length||!C.every(y=>p.includes(y))?(p=C,r.validatedChanged):[]},j=()=>p.filter(b=>typeof L[b]>"u");let S=[];const E=b=>{const C=[...new Set(b)];return S.length!==C.length||!C.every(y=>S.includes(y))?(S=C,r.touchedChanged):[]};let L={};const P=b=>{const C=Fs(b);return hr(L,C)?[]:(L=C,r.errorsChanged)},Y=b=>{const C={...L};return delete C[nt(b)],P(C)},H=()=>Object.keys(L).length>0;let O=1500;const U=b=>{O=b,I.cancel(),I=w()};let N=t,X=null,z=[],Q=null;const w=()=>Wa(b=>{e({get:(C,y={},K={})=>Ee.get(C,_(y),V(K,b,y)),post:(C,y={},K={})=>Ee.post(C,_(y),V(K,b,y)),patch:(C,y={},K={})=>Ee.patch(C,_(y),V(K,b,y)),put:(C,y={},K={})=>Ee.put(C,_(y),V(K,b,y)),delete:(C,y={},K={})=>Ee.delete(C,_(y),V(K,b,y))}).catch(C=>{var y;return Rn(C)||Pn(C)&&((y=C.response)==null?void 0:y.status)===422?null:Promise.reject(C)})},O,{leading:!0,trailing:!0});let I=w();const V=(b,C,y={})=>{const K={...b,...C},G=Array.from(K.only??K.validate??S);return{...C,...xr(b,C),only:G,timeout:K.timeout??5e3,onValidationError:(q,o)=>([...$([...p,...G]),...P(Pt(hn({...L},G),q.data.errors))].forEach(s=>s()),K.onValidationError?K.onValidationError(q,o):Promise.reject(o)),onSuccess:q=>($([...p,...G]).forEach(o=>o()),K.onSuccess?K.onSuccess(q):q),onPrecognitionSuccess:q=>([...$([...p,...G]),...P(hn({...L},G))].forEach(o=>o()),K.onPrecognitionSuccess?K.onPrecognitionSuccess(q):q),onBefore:()=>K.onBeforeValidation&&K.onBeforeValidation({data:y,touched:S},{data:N,touched:z})===!1||(K.onBefore||(()=>!0))()===!1?!1:(Q=S,X=y,!0),onStart:()=>{x(!0).forEach(q=>q()),(K.onStart??(()=>null))()},onFinish:()=>{x(!1).forEach(q=>q()),z=Q,N=X,Q=X=null,(K.onFinish??(()=>null))()}}},v=(b,C,y)=>{if(typeof b>"u"){const K=Array.from((y==null?void 0:y.only)??(y==null?void 0:y.validate)??[]);E([...S,...K]).forEach(G=>G()),I(y??{});return}if(kt(C)&&!c){console.warn('Precognition file validation is not active. Call the "validateFiles" function on your form to enable it.');return}b=nt(b),ot(N,b)!==C&&(E([b,...S]).forEach(K=>K()),I(y??{}))},_=b=>c===!1?Dt(b):b,a={touched:()=>S,validate(b,C,y){return typeof b=="object"&&!("target"in b)&&(y=b,b=C=void 0),v(b,C,y),a},touch(b){const C=Array.isArray(b)?b:[nt(b)];return E([...S,...C]).forEach(y=>y()),a},validating:()=>u,valid:j,errors:()=>L,hasErrors:H,setErrors(b){return P(b).forEach(C=>C()),a},forgetError(b){return Y(b).forEach(C=>C()),a},reset(...b){if(b.length===0)E([]).forEach(C=>C());else{const C=[...S];b.forEach(y=>{C.includes(y)&&C.splice(C.indexOf(y),1),jt(N,y,ot(t,y))}),E(C).forEach(y=>y())}return a},setTimeout(b){return U(b),a},on(b,C){return r[b].push(C),a},validateFiles(){return c=!0,a}};return a},Cs=e=>Object.keys(e).reduce((t,r)=>({...t,[r]:Array.isArray(e[r])?e[r][0]:e[r]}),{}),Fs=e=>Object.keys(e).reduce((t,r)=>({...t,[r]:typeof e[r]=="string"?[e[r]]:e[r]}),{}),nt=e=>typeof e!="string"?e.target.name:e,Dt=e=>{const t={...e};return Object.keys(t).forEach(r=>{const c=t[r];if(c!==null){if(kt(c)){delete t[r];return}if(Array.isArray(c)){t[r]=Object.values(Dt({...c}));return}if(typeof c=="object"){t[r]=Dt(t[r]);return}}}),t},ws=(e,t,r,c={})=>{const u=d.useRef(null);u.current===null&&(u.current=et(r));const x=d.useRef(null);x.current===null&&(x.current=Object.keys(u));const p=d.useRef(u.current),[$,j]=d.useState([]),[S,E]=d.useState([]),[L,P]=d.useState(!1),[Y,H]=d.useState(!1),[O,U]=d.useState({}),[N,X]=d.useState(!1),[z,Q]=d.useState(()=>et(u.current)),w=d.useRef(null);w.current===null&&(w.current=js(v=>v[Fn(e)](Cn(t),p.current,c),r).on("validatingChanged",()=>{P(w.current.validating())}).on("validatedChanged",()=>{j(w.current.valid())}).on("touchedChanged",()=>{E(w.current.touched())}).on("errorsChanged",()=>{X(w.current.hasErrors()),U(Cs(w.current.errors())),j(w.current.valid())}));const I=v=>({...v,precognitive:!1,onStart:()=>{H(!0),(v.onStart??(()=>null))()},onFinish:()=>{H(!1),(v.onFinish??(()=>null))()},onValidationError:(_,a)=>(w.current.setErrors(_.data.errors),v.onValidationError?v.onValidationError(_):Promise.reject(a))}),V={data:z,setData(v,_){if(typeof v=="object")p.current=v,Q(v);else{const a=et(p.current);p.current=jt(a,v,_),Q(p.current)}return V},touched(v){return typeof v=="string"?S.includes(v):S.length>0},touch(v){return w.current.touch(v),V},validate(v,_){return typeof v=="object"&&!("target"in v)&&(_=v,v=void 0),typeof v>"u"?w.current.validate(_):(v=nt(v),w.current.validate(v,ot(p.current,v),_)),V},validating:L,valid(v){return $.includes(v)},invalid(v){return typeof O[v]<"u"},errors:O,hasErrors:N,setErrors(v){return w.current.setErrors(v),V},forgetError(v){return w.current.forgetError(v),V},reset(...v){const _=et(u.current);return v.length===0?(p.current=_,Q(_)):(v.forEach(a=>jt(p.current,a,ot(_,a))),Q(p.current)),w.current.reset(...v),V},setValidationTimeout(v){return w.current.setTimeout(v),V},processing:Y,async submit(v={}){return Ee[Fn(e)](Cn(t),p.current,I(v))},validateFiles(){return w.current.validateFiles(),V},validator(){return w.current}};return V},wn=({user:e,allUsers:t,departments:r,designations:c,roles:u,setUsers:x,open:p,closeModal:$,editMode:j=!1})=>{var q;const[S,E]=d.useState(!1),[L,P]=d.useState(!1),[Y,H]=d.useState((e==null?void 0:e.profile_image_url)||(e==null?void 0:e.profile_image)||null),[O,U]=d.useState(null),[N,X]=d.useState(t),[z,Q]=d.useState("lg"),[w,I]=d.useState(c||[]),[V,v]=d.useState(t||[]),_=()=>{var h;if(typeof window>"u")return"lg";const s=((h=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:h.trim())||"12px",f=parseInt(s);return f===0?"none":f<=4?"sm":f<=8?"md":f<=16?"lg":"full"};d.useEffect(()=>{typeof window<"u"&&Q(_())},[]);const a=ws(j?"put":"post",j&&(e!=null&&e.id)?route("users.update",{user:e.id}):route("users.store"),{id:(e==null?void 0:e.id)||"",name:(e==null?void 0:e.name)||"",user_name:(e==null?void 0:e.user_name)||"",gender:(e==null?void 0:e.gender)||"",birthday:(e==null?void 0:e.birthday)||"",date_of_joining:(e==null?void 0:e.date_of_joining)||"",address:(e==null?void 0:e.address)||"",employee_id:(e==null?void 0:e.employee_id)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||"",department_id:(e==null?void 0:e.department_id)||"",designation_id:(e==null?void 0:e.designation_id)||"",report_to:(e==null?void 0:e.report_to)||"",password:"",password_confirmation:"",roles:((q=e==null?void 0:e.roles)==null?void 0:q.map(o=>typeof o=="object"?o.name:o))||[],single_device_login_enabled:(e==null?void 0:e.single_device_login_enabled)||(e==null?void 0:e.single_device_login)||!1,profile_image:null});d.useEffect(()=>{if(a.data.department_id){const o=(c==null?void 0:c.filter(s=>String(s.department_id)===String(a.data.department_id)))||[];I(o),a.data.designation_id&&(o.some(f=>String(f.id)===String(a.data.designation_id))||y("designation_id",""))}else I(c||[])},[a.data.department_id,c]),d.useEffect(()=>{if(a.data.department_id&&a.data.designation_id){const o=c==null?void 0:c.find(f=>String(f.id)===String(a.data.designation_id));if(!o){v([]),y("report_to","");return}if(o.hierarchy_level===1){v([]),y("report_to","");return}const s=(t==null?void 0:t.filter(f=>{var se;const h=f.department_id||((se=f.department)==null?void 0:se.id),i=String(h)===String(a.data.department_id),M=c==null?void 0:c.find(oe=>String(oe.id)===String(f.designation_id)),T=M&&M.hierarchy_level<o.hierarchy_level,R=!j||!a.data.id||f.id!==a.data.id;return i&&T&&R}))||[];console.log("Selected designation:",o.title,"Level:",o.hierarchy_level),console.log("Filtered supervisors (higher hierarchy):",s.length,s),v(s),a.data.report_to&&(s.some(h=>String(h.id)===String(a.data.report_to))||y("report_to",""))}else if(a.data.department_id){const o=(t==null?void 0:t.filter(s=>{var M;const f=s.department_id||((M=s.department)==null?void 0:M.id),h=String(f)===String(a.data.department_id),i=!j||!a.data.id||s.id!==a.data.id;return h&&i}))||[];v(o)}else{const o=(t==null?void 0:t.filter(s=>!j||!a.data.id||s.id!==a.data.id))||[];v(o)}},[a.data.department_id,a.data.designation_id,t,a.data.id,j,c]),d.useEffect(()=>{(e!=null&&e.profile_image_url||e!=null&&e.profile_image)&&H(e.profile_image_url||e.profile_image)},[e]);const b=async()=>{if(O){const s=O.type;if(!["image/jpeg","image/jpg","image/png"].includes(s)){de.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:"🔴"});return}a.setData("profile_image",O)}const o=new Promise(async(s,f)=>{try{await a.submit({preserveScroll:!0,transform:h=>({...h,single_device_login_enabled:h.single_device_login_enabled?1:0}),onSuccess:h=>{x&&x(j?i=>i.map(M=>M.id===h.data.user.id?h.data.user:M):i=>[...i,h.data.user]),$(),s([h.data.message||`User ${j?"updated":"created"} successfully`])},onError:h=>{const i=Object.values(h).flat();i.length>0?f(i.join(", ")):f(`Failed to ${j?"update":"create"} user. Please check the form for errors.`)}})}catch(h){if(console.error("Form submission error:",h),h.response)if(h.response.status===422){const i=h.response.data.errors||{},M=Object.values(i).flat();f(M.length>0?M.join(", "):"Validation failed. Please check the form.")}else h.response.status===500?f(h.response.data.message||"Server error occurred. Please try again later."):f(`HTTP Error ${h.response.status}: ${h.response.data.message||"An unexpected error occurred."}`);else h.request?f("No response received from the server. Please check your internet connection."):f("An error occurred while setting up the request.")}});de.promise(o,{pending:`${j?"Updating":"Creating"} user...`,success:{render({data:s}){return s.join(", ")}},error:{render({data:s}){return s}}})},C=o=>{const s=o.target.files[0];if(s){const f=URL.createObjectURL(s);H(f),U(s)}},y=(o,s)=>{a.setData(o,s),a.touched(o)&&a.validate(o)},K=()=>{E(!S)},G=()=>{var o,s,f,h,i;if(j)return a.isDirty&&!a.processing;{const M=((o=a.data.name)==null?void 0:o.trim())&&((s=a.data.user_name)==null?void 0:s.trim())&&((f=a.data.email)==null?void 0:f.trim())&&((h=a.data.password)==null?void 0:h.trim())&&((i=a.data.password_confirmation)==null?void 0:i.trim()),T=a.data.password===a.data.password_confirmation;return M&&T&&!a.processing}};return n.jsx($r,{isOpen:p,onClose:$,size:"3xl",radius:z,scrollBehavior:"inside",classNames:{base:"backdrop-blur-md max-h-[95vh] my-2",backdrop:"bg-black/50 backdrop-blur-sm",header:"border-b border-divider flex-shrink-0",body:"overflow-y-auto max-h-[calc(95vh-160px)]",footer:"border-t border-divider flex-shrink-0",closeButton:"hover:bg-white/5 active:bg-white/10"},style:{border:"var(--borderWidth, 2px) solid var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:n.jsx(jr,{children:o=>n.jsxs(n.Fragment,{children:[n.jsx(Cr,{className:"flex flex-col gap-1 py-4",style:{borderColor:"var(--theme-divider, #E4E4E7)",fontFamily:'var(--fontFamily, "Inter")'},children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qr,{className:"w-5 h-5 sm:w-6 sm:h-6",style:{color:"var(--theme-primary)"}}),n.jsxs("div",{children:[n.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:j?"Edit User":"Add New User"}),n.jsx("p",{className:"text-sm text-default-500 mt-0.5",style:{fontFamily:'var(--fontFamily, "Inter")'},children:j?"Update user information":"Create a new user account"})]})]})}),n.jsx(Fr,{className:"py-4 px-4 sm:py-6 sm:px-6 overflow-y-auto",style:{fontFamily:'var(--fontFamily, "Inter")'},children:n.jsxs("form",{onSubmit:b,className:"space-y-4",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsxs("div",{className:"relative group cursor-pointer",onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),children:[n.jsx(_t,{src:Y,alt:"Profile",className:"w-32 h-32 text-large transition-all duration-300",style:{border:"4px solid var(--theme-divider, #E4E4E7)",filter:L?"brightness(70%)":"brightness(100%)"}}),n.jsxs("label",{htmlFor:"icon-button-file",className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-opacity duration-300",style:{opacity:L?1:0},children:[n.jsx("input",{accept:"image/*",id:"icon-button-file",type:"file",className:"hidden",onChange:C}),n.jsx(Zr,{className:"w-8 h-8 text-white"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(ve,{label:"Full Name",placeholder:"Enter full name",value:a.data.name,onChange:s=>y("name",s.target.value),onBlur:()=>a.validate("name"),isInvalid:a.invalid("name"),errorMessage:a.errors.name,isRequired:!0,variant:"bordered",size:"sm",radius:z,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),n.jsx(ve,{label:"Username",placeholder:"Enter username",value:a.data.user_name,onChange:s=>y("user_name",s.target.value),onBlur:()=>a.validate("user_name"),isInvalid:a.invalid("user_name"),errorMessage:a.errors.user_name,isRequired:!0,variant:"bordered",size:"sm",radius:z,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),n.jsx(ve,{label:"Email",type:"email",placeholder:"Enter email address",value:a.data.email,onChange:s=>y("email",s.target.value),onBlur:()=>a.validate("email"),isInvalid:a.invalid("email"),errorMessage:a.errors.email,isRequired:!0,variant:"bordered",size:"sm",radius:z,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),n.jsx(ve,{label:"Phone",placeholder:"Enter phone number",value:a.data.phone,onChange:s=>y("phone",s.target.value),onBlur:()=>a.validate("phone"),isInvalid:a.invalid("phone"),errorMessage:a.errors.phone,variant:"bordered",size:"sm",radius:z,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),n.jsx(Re,{label:"Department",placeholder:"Select department",selectedKeys:a.data.department_id?new Set([String(a.data.department_id)]):new Set,onSelectionChange:s=>{const f=Array.from(s)[0];y("department_id",f||"")},onClose:()=>a.validate("department_id"),isInvalid:a.invalid("department_id"),errorMessage:a.errors.department_id,variant:"bordered",size:"sm",radius:z,classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:r==null?void 0:r.map(s=>n.jsx(fe,{value:s.id,children:s.name},s.id))}),n.jsx(Re,{label:"Designation",placeholder:"Select designation",selectedKeys:a.data.designation_id?new Set([String(a.data.designation_id)]):new Set,onSelectionChange:s=>{const f=Array.from(s)[0];y("designation_id",f||"")},onClose:()=>a.validate("designation_id"),isInvalid:a.invalid("designation_id"),errorMessage:a.errors.designation_id,isDisabled:!a.data.department_id||w.length===0,variant:"bordered",size:"sm",radius:z,classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:w==null?void 0:w.map(s=>n.jsx(fe,{value:s.id,children:s.title||s.name},s.id))}),n.jsxs(Re,{label:"Gender",placeholder:"Select gender",selectedKeys:a.data.gender?new Set([a.data.gender]):new Set,onSelectionChange:s=>{const f=Array.from(s)[0];y("gender",f||"")},onClose:()=>a.validate("gender"),isInvalid:a.invalid("gender"),errorMessage:a.errors.gender,variant:"bordered",size:"sm",radius:z,classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[n.jsx(fe,{value:"male",children:"Male"},"male"),n.jsx(fe,{value:"female",children:"Female"},"female"),n.jsx(fe,{value:"other",children:"Other"},"other")]}),n.jsx(ve,{label:"Employee ID",placeholder:"Enter employee ID",value:a.data.employee_id,onChange:s=>y("employee_id",s.target.value),onBlur:()=>a.validate("employee_id"),isInvalid:a.invalid("employee_id"),errorMessage:a.errors.employee_id,variant:"bordered",size:"sm",radius:z,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),n.jsx(ve,{label:"Date of Birth",type:"date",value:a.data.birthday,onChange:s=>y("birthday",s.target.value),onBlur:()=>a.validate("birthday"),isInvalid:a.invalid("birthday"),errorMessage:a.errors.birthday,variant:"bordered",size:"sm",radius:z,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),n.jsx(ve,{label:"Date of Joining",type:"date",value:a.data.date_of_joining,onChange:s=>y("date_of_joining",s.target.value),onBlur:()=>a.validate("date_of_joining"),isInvalid:a.invalid("date_of_joining"),errorMessage:a.errors.date_of_joining,variant:"bordered",size:"sm",radius:z,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(us,{label:"Reports To",placeholder:a.data.department_id?a.data.designation_id?V.length===0?"No supervisor needed (Top-level position)":"Search for a supervisor...":"Select designation first":"Select department first",selectedKey:a.data.report_to?String(a.data.report_to):null,onSelectionChange:s=>{y("report_to",s||"")},isInvalid:a.invalid("report_to"),errorMessage:a.errors.report_to,isDisabled:!a.data.department_id||!a.data.designation_id||V.length===0,variant:"bordered",size:"sm",radius:z,classNames:{base:"w-full"},style:{fontFamily:'var(--fontFamily, "Inter")'},allowsCustomValue:!1,items:V||[],children:s=>n.jsx(fe,{textValue:s.name,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_t,{src:s.profile_image_url||s.profile_image,name:s.name,size:"sm",className:"flex-shrink-0"}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-small font-medium",children:s.name}),s.email&&n.jsx("span",{className:"text-tiny text-default-400",children:s.email})]})]})},s.id)}),a.data.designation_id&&V.length===0&&n.jsx("p",{className:"text-xs text-default-400 px-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"This designation is at the top of the hierarchy and doesn't require a supervisor."})]})]}),n.jsx(ve,{label:"Address",placeholder:"Enter address",value:a.data.address,onChange:s=>y("address",s.target.value),onBlur:()=>a.validate("address"),isInvalid:a.invalid("address"),errorMessage:a.errors.address,variant:"bordered",size:"sm",radius:z,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),n.jsx("div",{className:"col-span-full",children:n.jsx(Re,{label:"Roles",placeholder:"Select user roles",selectionMode:"multiple",selectedKeys:new Set(a.data.roles),onSelectionChange:s=>{const f=Array.from(s);y("roles",f)},onClose:()=>a.validate("roles"),isInvalid:a.invalid("roles"),errorMessage:a.errors.roles,variant:"bordered",size:"sm",radius:z,classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},renderValue:s=>n.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(f=>n.jsx(Ce,{size:"sm",color:"secondary",variant:"flat",children:f.textValue},f.key))}),children:u==null?void 0:u.map(s=>{const f=typeof s=="object"?s.name:s;return n.jsx(fe,{value:f,textValue:f,children:f},f)})})}),n.jsx("div",{className:"col-span-full",children:n.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)"},children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fs,{className:"w-4 h-4",style:{color:"var(--theme-primary)"}}),n.jsx("span",{className:"text-sm font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Single Device Login"})]}),n.jsx("p",{className:"text-xs text-default-500 mt-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Restrict user to login from only one device at a time"})]}),n.jsx(zn,{isSelected:a.data.single_device_login_enabled,onValueChange:s=>y("single_device_login_enabled",s),color:a.data.single_device_login_enabled?"warning":"default",size:"sm"})]})}),!j&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(ve,{label:"Password",type:S?"text":"password",placeholder:"Enter password",value:a.data.password,onChange:s=>y("password",s.target.value),onBlur:()=>a.validate("password"),isInvalid:a.invalid("password"),errorMessage:a.errors.password,isRequired:!j,variant:"bordered",size:"sm",radius:z,endContent:n.jsx("button",{className:"focus:outline-none",type:"button",onClick:K,children:S?n.jsx(yn,{className:"w-4 h-4 text-default-400"}):n.jsx(gn,{className:"w-4 h-4 text-default-400"})}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),n.jsx(ve,{label:"Confirm Password",type:S?"text":"password",placeholder:"Confirm password",value:a.data.password_confirmation,onChange:s=>y("password_confirmation",s.target.value),onBlur:()=>a.validate("password_confirmation"),isInvalid:a.invalid("password_confirmation")||a.data.password!==a.data.password_confirmation&&a.data.password_confirmation,errorMessage:a.errors.password_confirmation||(a.data.password!==a.data.password_confirmation&&a.data.password_confirmation?"Passwords do not match":""),isRequired:!j,variant:"bordered",size:"sm",radius:z,endContent:n.jsx("button",{className:"focus:outline-none",type:"button",onClick:K,children:S?n.jsx(yn,{className:"w-4 h-4 text-default-400"}):n.jsx(gn,{className:"w-4 h-4 text-default-400"})}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})]})]})}),n.jsxs(oa,{className:"flex justify-between px-4 sm:px-6 py-3 sm:py-4",style:{borderColor:"var(--theme-divider, #E4E4E7)",fontFamily:'var(--fontFamily, "Inter")'},children:[n.jsx(xe,{variant:"light",onPress:$,isDisabled:a.processing,radius:z,style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),n.jsx(xe,{variant:"solid",color:"primary",onPress:b,isLoading:a.processing,isDisabled:!G(),radius:z,style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:j?"Update User":"Add User"})]})]})})})},Ns=({title:e,roles:t,departments:r,designations:c})=>{var J,ee,ge,ie,He,Pe,qe,$e,Ze,Je,Ye,Xe,it,ut,ct,dt,mt,pt,k,B,ue,ye,Ie,Lt,Ot,Vt,zt,Kt,Mt,Ut,Gt,Wt,Ht,qt;const[u,x]=d.useState(!1),[p,$]=d.useState(!1),[j,S]=d.useState(!1),[E,L]=d.useState(!1),[P,Y]=d.useState("lg"),H=()=>{var Z;if(typeof window>"u")return"lg";const g=((Z=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:Z.trim())||"12px",A=parseInt(g);return A===0?"none":A<=4?"sm":A<=8?"md":A<=12?"lg":"xl"};d.useEffect(()=>{typeof window<"u"&&Y(H())},[]),d.useEffect(()=>{const l=()=>{x(window.innerWidth<640),$(window.innerWidth<768),S(window.innerWidth>=1025),L(window.innerWidth>=641&&window.innerWidth<=1024)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const[O,U]=d.useState([]),[N,X]=d.useState(!0),[z,Q]=d.useState(null),[w,I]=d.useState(0),[V,v]=d.useState(1),[_,a]=d.useState(null),[b,C]=d.useState({search:"",role:"all",status:"all",department:"all"}),[y,K]=d.useState(!1),[G,q]=d.useState("table"),[o,s]=d.useState({currentPage:1,perPage:10,total:O.length}),[f,h]=d.useState({}),[i,M]=d.useState({overview:{total_users:0,active_users:0,inactive_users:0,deleted_users:0,total_roles:0,total_departments:0},distribution:{by_role:[],by_department:[],by_status:[]},activity:{recent_registrations:{new_users_30_days:0,new_users_90_days:0,new_users_year:0,recently_active:0},user_growth_rate:0,current_month_registrations:0},security:{access_metrics:{users_with_roles:0,users_without_roles:0,admin_users:0,regular_users:0},role_distribution:[]},health:{status_ratio:{active_percentage:0,inactive_percentage:0,deleted_percentage:0},system_metrics:{user_activation_rate:0,role_coverage:0,department_coverage:0}},quick_metrics:{total_users:0,active_ratio:0,role_diversity:0,department_diversity:0,recent_activity:0,system_health_score:0}}),T=d.useMemo(()=>({data:O,total:w,current_page:o.currentPage,per_page:o.perPage,last_page:V}),[O,w,o.currentPage,o.perPage,V]),R=d.useCallback(async()=>{try{const{data:l}=await Le.get(route("users.stats"));l.stats&&M(l.stats)}catch(l){console.error("Error fetching user stats:",l)}},[]),se=d.useCallback(async()=>{X(!0);try{const l=await Le.get(route("users.paginate"),{params:{page:o.currentPage,perPage:o.perPage,search:b.search||void 0,role:b.role!=="all"?b.role:void 0,status:b.status!=="all"?b.status:void 0,department:b.department!=="all"?b.department:void 0}});if(l.status===200){const{users:g}=l.data;g.data&&Array.isArray(g.data)?(U(g.data),g.meta?(I(g.meta.total||0),v(g.meta.last_page||1)):(I(g.total||g.data.length),v(g.last_page||1))):Array.isArray(g)?(U(g),I(g.length),v(1)):(console.error("Unexpected users data format:",g),U([]),I(0),v(1))}}catch(l){console.error("Error fetching users:",l),de.error("Failed to load users data"),U([])}finally{X(!1)}},[b,o.currentPage,o.perPage]);d.useEffect(()=>{se()},[se]),d.useEffect(()=>{R();const l=setInterval(R,6e4);return()=>clearInterval(l)},[R]);const oe=(l,g)=>{C(A=>({...A,[l]:g})),s(A=>({...A,currentPage:1}))},re=l=>{s(g=>({...g,currentPage:l})),window.scrollTo({top:0,behavior:"smooth"})},le=l=>{s(g=>({...g,currentPage:1,perPage:l}))},ne=d.useCallback((l,g=null)=>{a(l),Q(g)},[]),he=d.useCallback(()=>{a(null),Q(null)},[]),m=d.useCallback(l=>{U(l)},[]),D=d.useCallback(l=>{U(g=>g.map(A=>A.id===l.id?{...A,...l}:A))},[]),F=d.useCallback(l=>{U(g=>g.filter(A=>A.id!==l)),R()},[R]),te=d.useCallback((l,g)=>{U(A=>A.map(Z=>Z.id===l?{...Z,active:g}:Z)),R()},[R]),ae=d.useCallback((l,g)=>{U(A=>A.map(Z=>Z.id===l?{...Z,roles:g}:Z)),R()},[R]),me=d.useCallback(async(l,g)=>{var A,Z;h(ce=>({...ce,[l]:!0}));try{const ce=await Le.post(route("admin.users.devices.toggle",{userId:l}));ce.data.success&&(U(Qe=>Qe.map(De=>De.id===l?{...De,single_device_login_enabled:ce.data.single_device_login_enabled}:De)),de.success(ce.data.message))}catch(ce){console.error("Error toggling single device login:",ce),de.error(((Z=(A=ce.response)==null?void 0:A.data)==null?void 0:Z.message)||"Failed to toggle single device login")}finally{h(ce=>({...ce,[l]:!1}))}},[]),be=d.useCallback(async l=>{h(g=>({...g,[l]:!0}));try{const g=await Le.post(route("admin.users.devices.reset",{userId:l}),{reason:"Admin reset via user management"});g.data.success&&(U(A=>A.map(Z=>Z.id===l?{...Z,active_device:null}:Z)),de.success(g.data.message||"User devices have been reset"))}catch(g){console.error("Error resetting user devices:",g),de.error("Failed to reset user devices")}finally{h(g=>({...g,[l]:!1}))}},[]);d.useCallback(async l=>{try{const g=await Le.get(route("admin.users.devices",{userId:l}));if(g.data.success){const A=g.data.devices;if(A.length===0)de.info("User has no registered devices");else{const Z=A.filter(ce=>ce.is_active).length;de.info(`User has ${A.length} device(s): ${Z} active, ${A.length-Z} inactive`)}}}catch(g){console.error("Error fetching user devices:",g),de.error("Failed to fetch device information")}},[]);const Se=(l,g="w-4 h-4")=>{const A=(l==null?void 0:l.toLowerCase())||"";return A.includes("mobile")||A.includes("android")||A.includes("iphone")?n.jsx(Ue,{className:`${g} text-primary`}):A.includes("tablet")||A.includes("ipad")?n.jsx(Dn,{className:`${g} text-secondary`}):n.jsx(On,{className:`${g} text-default-500`})},we=l=>{const g=(l==null?void 0:l.toLowerCase())||"";return g.includes("mobile")||g.includes("android")||g.includes("iphone")?"Mobile":g.includes("tablet")||g.includes("ipad")?"Tablet":"Desktop"},Te=({user:l,index:g})=>n.jsx(Ne,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 h-full min-h-[320px]",style:{background:`linear-gradient(135deg, 
          color-mix(in srgb, var(--theme-content1) 90%, transparent) 20%, 
          color-mix(in srgb, var(--theme-content2) 80%, transparent) 80%)`,borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:n.jsxs(_e,{className:"p-3 flex flex-col h-full",children:[n.jsxs("div",{className:"flex items-start gap-2 mb-3 pb-2 border-b border-white/10",children:[n.jsx(Tt,{avatarProps:{radius:"md",src:(l==null?void 0:l.profile_image_url)||(l==null?void 0:l.profile_image),size:"sm",fallback:n.jsx(rt,{className:"w-4 h-4"}),style:{borderColor:"var(--theme-primary)",borderWidth:"2px"}},name:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-semibold text-foreground text-sm line-clamp-1",children:l.name}),n.jsxs("span",{className:"text-default-500 text-xs line-clamp-1",children:["ID: ",l.id]})]}),classNames:{wrapper:"flex-1 min-w-0",name:"text-sm font-semibold",description:"text-xs text-default-500"}}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(At,{content:"Edit User",size:"sm",children:n.jsx(xe,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-primary min-w-6 w-6 h-6",onPress:()=>ne("edit",l),children:n.jsx(kn,{className:"w-3 h-3"})})}),n.jsxs(Ft,{placement:"bottom-end",children:[n.jsx(wt,{children:n.jsx(xe,{isIconOnly:!0,size:"sm",variant:"ghost",radius:P,isDisabled:f[l.id],className:"min-w-6 w-6 h-6",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)"},children:n.jsx(St,{className:"w-3 h-3"})})}),n.jsxs(Nt,{"aria-label":"Device management actions",variant:"bordered",className:"min-w-[180px]",style:{background:"color-mix(in srgb, var(--theme-content1) 95%, transparent)",backdropFilter:"blur(16px)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:[n.jsx(Fe,{startContent:l.single_device_login?n.jsx(at,{className:"w-3 h-3"}):n.jsx(st,{className:"w-3 h-3"}),onPress:()=>me(l.id,!l.single_device_login),isDisabled:f[l.id],className:"text-xs",children:l.single_device_login?"Disable Lock":"Enable Lock"},"toggle-device-lock"),l.single_device_login&&l.active_device&&n.jsx(Fe,{startContent:n.jsx(ke,{className:"w-3 h-3"}),onPress:()=>be(l.id),isDisabled:f[l.id],className:"text-xs",children:"Reset Device"},"reset-device"),n.jsx(Fe,{startContent:n.jsx(Ue,{className:"w-3 h-3"}),onPress:()=>ln.visit(route("admin.users.devices",{userId:l.id})),className:"text-xs",children:"Device History"},"view-devices"),n.jsx(Fe,{startContent:n.jsx(rt,{className:"w-3 h-3"}),onPress:()=>ln.visit(route("profile",{user:l.id})),className:"text-xs",children:"View Profile"},"view-profile")]})]})]})]}),n.jsxs("div",{className:"space-y-2 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx(Et,{className:"w-3 h-3 text-default-400 shrink-0"}),n.jsx("span",{className:"text-default-600 line-clamp-1 flex-1",children:l.email})]}),l.phone&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx(Ct,{className:"w-3 h-3 text-default-400 shrink-0"}),n.jsx("span",{className:"text-default-600 line-clamp-1",children:l.phone})]}),(l.department||l.department_id)&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx(Me,{className:"w-3 h-3 text-default-400 shrink-0"}),n.jsx("span",{className:"text-default-600 line-clamp-1",children:typeof l.department=="string"?l.department:"N/A"})]})]}),n.jsxs("div",{className:"mb-3 p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-content2) 40%, transparent)"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs font-medium text-default-700",children:"Device Status"}),l.single_device_login&&l.active_device&&n.jsx(At,{content:n.jsxs("div",{className:"p-2 max-w-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Se(l.active_device.user_agent,"w-4 h-4"),n.jsx("span",{className:"font-medium text-xs",children:l.active_device.device_name||"Unknown Device"})]}),n.jsxs("div",{className:"text-xs text-default-500",children:[we(l.active_device.user_agent)," •",l.active_device.is_active?" Active":" Inactive"]})]}),size:"sm",children:n.jsx("div",{className:"cursor-help",children:Se(l.active_device.user_agent,"w-4 h-4")})})]}),n.jsx(Ce,{size:"sm",variant:"flat",color:l.single_device_login?l.active_device?"warning":"success":"default",startContent:l.single_device_login?l.active_device?n.jsx(st,{className:"w-3 h-3"}):n.jsx(at,{className:"w-3 h-3"}):n.jsx(Ge,{className:"w-3 h-3"}),className:"text-xs",children:l.single_device_login?l.active_device?"Locked":"Free":"Disabled"})]}),n.jsxs("div",{className:"mt-auto space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs font-medium text-default-700",children:"Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zn,{size:"sm",isSelected:l.active,onValueChange:A=>te(l.id,A),color:l.active?"success":"danger",classNames:{wrapper:"group-data-[selected=true]:bg-success",thumb:"group-data-[selected=true]:ml-4"}}),n.jsx("span",{className:`text-xs font-medium ${l.active?"text-success":"text-danger"}`,children:l.active?"Active":"Inactive"})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-default-700 mb-1 block",children:"Roles"}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.roles&&l.roles.length>0?l.roles.slice(0,3).map((A,Z)=>{const ce=typeof A=="object"&&A!==null?A.name:A;return n.jsx(Ce,{size:"sm",variant:"flat",color:"secondary",className:"text-xs h-5",children:ce},Z)}):n.jsx(Ce,{size:"sm",variant:"bordered",color:"default",className:"text-xs h-5",children:"No Roles"}),l.roles&&l.roles.length>3&&n.jsxs(Ce,{size:"sm",variant:"bordered",color:"primary",className:"text-xs h-5",children:["+",l.roles.length-3]})]})]})]})]})}),W=d.useMemo(()=>{var l,g,A,Z,ce,Qe,De,Zt,Jt,Yt,Xt,Qt,en,tn;return[{title:"Total Users",value:((l=i==null?void 0:i.overview)==null?void 0:l.total_users)||0,icon:n.jsx(Ke,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All users"},{title:"Active Users",value:((g=i==null?void 0:i.overview)==null?void 0:g.active_users)||0,icon:n.jsx(Bn,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((Z=(A=i==null?void 0:i.health)==null?void 0:A.status_ratio)==null?void 0:Z.active_percentage)||0}% Active`},{title:"Inactive Users",value:((ce=i==null?void 0:i.overview)==null?void 0:ce.inactive_users)||0,icon:n.jsx(ra,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:`${((De=(Qe=i==null?void 0:i.health)==null?void 0:Qe.status_ratio)==null?void 0:De.inactive_percentage)||0}% Inactive`},{title:"Total Roles",value:((Zt=i==null?void 0:i.overview)==null?void 0:Zt.total_roles)||0,icon:n.jsx(Ge,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Role diversity"},{title:"Role Coverage",value:`${((Yt=(Jt=i==null?void 0:i.health)==null?void 0:Jt.system_metrics)==null?void 0:Yt.role_coverage)||0}%`,icon:n.jsx(aa,{className:"w-5 h-5"}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Users with roles"},{title:"Recent Activity",value:((Qt=(Xt=i==null?void 0:i.activity)==null?void 0:Xt.recent_registrations)==null?void 0:Qt.recently_active)||0,icon:n.jsx(Ln,{className:"w-5 h-5"}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Active last 7 days"},{title:"System Health",value:`${((en=i==null?void 0:i.quick_metrics)==null?void 0:en.system_health_score)||0}%`,icon:n.jsx(bn,{className:"w-5 h-5"}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Overall health"},{title:"Departments",value:((tn=i==null?void 0:i.overview)==null?void 0:tn.total_departments)||0,icon:n.jsx(Me,{className:"w-5 h-5"}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Department diversity"}]},[i]);return d.useMemo(()=>{const l=[];return l.push({label:u?"Add":"Add User",icon:n.jsx(bt,{className:"w-4 h-4"}),onPress:()=>ne("add"),className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}),l.push({label:u?"":"Export",isIconOnly:u,icon:n.jsx(cn,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),l},[u,ne]),n.jsxs(n.Fragment,{children:[n.jsx(vr,{title:e||"Users Management"}),_==="add"&&n.jsx(wn,{user:null,allUsers:O,departments:r,designations:c,roles:t,open:_==="add",setUsers:m,closeModal:he,editMode:!1}),_==="edit"&&z&&n.jsx(wn,{user:z,allUsers:O,departments:r,designations:c,roles:t,open:_==="edit",setUsers:m,closeModal:he,editMode:!0}),n.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Users Management",children:n.jsx("div",{className:"space-y-4",children:n.jsx("div",{className:"w-full",children:n.jsx(sa.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:n.jsxs(Ne,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[n.jsx(da,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:n.jsx("div",{className:`${j?"p-6":E?"p-4":"p-3"} w-full`,children:n.jsx("div",{className:"flex flex-col space-y-4",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[N?n.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[n.jsx(pe,{className:"w-12 h-12 rounded-xl"}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx(pe,{className:"w-64 h-6 rounded mb-2"}),n.jsx(pe,{className:"w-48 h-4 rounded"})]})]}):n.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[n.jsx("div",{className:`
                                ${j?"p-3":E?"p-2.5":"p-2"} 
                                rounded-xl flex items-center justify-center
                              `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:n.jsx(Ke,{className:`
                                  ${j?"w-8 h-8":E?"w-6 h-6":"w-5 h-5"}
                                `,style:{color:"var(--theme-primary)"}})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h4",{className:`
                                  ${j?"text-2xl":E?"text-xl":"text-lg"}
                                  font-bold text-foreground
                                  ${j?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Users Management"}),n.jsx("p",{className:`
                                  ${j?"text-sm":"text-xs"} 
                                  text-default-500
                                  ${j?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage user accounts, roles and permissions"})]})]}),N?n.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[n.jsx(pe,{className:"w-24 h-8 rounded"}),n.jsx(pe,{className:"w-20 h-8 rounded"})]}):n.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[n.jsx(xe,{size:u?"sm":"md",color:"primary",startContent:n.jsx(bt,{className:"w-4 h-4"}),onPress:()=>ne("add"),radius:P,style:{fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:u?"Add":"Add User"}),n.jsx(xe,{size:u?"sm":"md",variant:"bordered",startContent:n.jsx(la,{className:"w-4 h-4"}),radius:P,style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-primary) 30%, transparent)",color:"var(--theme-primary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:u?"Export":"Export Users"})]})]})})})}),n.jsxs(_e,{className:"p-6",children:[n.jsx(_r,{stats:W,className:"mb-6",isLoading:N}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6",children:N?n.jsx(n.Fragment,{children:Array.from({length:6}).map((l,g)=>n.jsx(Ne,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-default) 10%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:n.jsxs(_e,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(pe,{className:"w-9 h-9 rounded-lg"}),n.jsxs("div",{className:"flex-1",children:[n.jsx(pe,{className:"w-24 h-4 rounded mb-1"}),n.jsx(pe,{className:"w-32 h-3 rounded"})]})]}),n.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((A,Z)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(pe,{className:"w-20 h-3 rounded"}),n.jsx(pe,{className:"w-12 h-3 rounded"})]},Z))})]})},g))}):n.jsxs(n.Fragment,{children:[n.jsx(Ne,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:n.jsxs(_e,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:n.jsx(ia,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}})}),n.jsxs("div",{children:[n.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role Distribution"}),n.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User roles breakdown"})]})]}),n.jsx("div",{className:"space-y-3",children:((ee=(J=i==null?void 0:i.distribution)==null?void 0:J.by_role)==null?void 0:ee.length)>0?i.distribution.by_role.slice(0,4).map((l,g)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`color-mix(in srgb, var(--theme-primary) ${80-g*15}%, var(--theme-secondary) ${20+g*15}%)`}}),n.jsx("span",{className:"text-sm text-foreground truncate",style:{fontFamily:'var(--fontFamily, "Inter")'},children:l.name})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:l.count}),n.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",l.percentage,"%)"]})]})]},g)):n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No role data available"})})})]})}),n.jsx(Ne,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-secondary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:n.jsxs(_e,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-secondary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:n.jsx(Ke,{className:"w-5 h-5",style:{color:"var(--theme-secondary)"}})}),n.jsxs("div",{children:[n.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User Status"}),n.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Active vs inactive users"})]})]}),n.jsx("div",{className:"space-y-3",children:((ie=(ge=i==null?void 0:i.distribution)==null?void 0:ge.by_status)==null?void 0:ie.length)>0?i.distribution.by_status.map((l,g)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:l.name==="Active"?"var(--theme-success)":l.name==="Inactive"?"var(--theme-danger)":"var(--theme-default)"}}),n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:l.name})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:l.count}),n.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",l.percentage,"%)"]})]})]},g)):n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No status data available"})})})]})}),n.jsx(Ne,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-warning) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:n.jsxs(_e,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-warning) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:n.jsx(Me,{className:"w-5 h-5",style:{color:"var(--theme-warning)"}})}),n.jsxs("div",{children:[n.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Departments"}),n.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Users by department"})]})]}),n.jsx("div",{className:"space-y-3",children:((Pe=(He=i==null?void 0:i.distribution)==null?void 0:He.by_department)==null?void 0:Pe.length)>0?i.distribution.by_department.slice(0,4).map((l,g)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`color-mix(in srgb, var(--theme-warning) ${80-g*15}%, var(--theme-primary) ${20+g*15}%)`}}),n.jsx("span",{className:"text-sm text-foreground truncate",style:{fontFamily:'var(--fontFamily, "Inter")'},children:l.name})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:l.count}),n.jsxs("span",{className:"text-xs text-default-500 ml-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["(",l.percentage,"%)"]})]})]},g)):n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-sm text-default-400",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No department data available"})})})]})}),n.jsx(Ne,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-success) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:n.jsxs(_e,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-success) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:n.jsx(cn,{className:"w-5 h-5",style:{color:"var(--theme-success)"}})}),n.jsxs("div",{children:[n.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"User Growth"}),n.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Registration trends"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"New (30 days)"}),n.jsx("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:(($e=(qe=i==null?void 0:i.activity)==null?void 0:qe.recent_registrations)==null?void 0:$e.new_users_30_days)||0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"New (90 days)"}),n.jsx("span",{className:"text-sm font-medium text-primary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((Je=(Ze=i==null?void 0:i.activity)==null?void 0:Ze.recent_registrations)==null?void 0:Je.new_users_90_days)||0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Recently Active"}),n.jsx("span",{className:"text-sm font-medium text-secondary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((Xe=(Ye=i==null?void 0:i.activity)==null?void 0:Ye.recent_registrations)==null?void 0:Xe.recently_active)||0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Growth Rate"}),n.jsx(Ce,{size:"sm",color:(((it=i==null?void 0:i.activity)==null?void 0:it.user_growth_rate)||0)>0?"success":(((ut=i==null?void 0:i.activity)==null?void 0:ut.user_growth_rate)||0)<0?"danger":"default",variant:"flat",radius:P,children:n.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((ct=i==null?void 0:i.activity)==null?void 0:ct.user_growth_rate)||0,"%"]})})]})]})]})}),n.jsx(Ne,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:n.jsxs(_e,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:n.jsx(Ge,{className:"w-5 h-5",style:{color:"var(--theme-danger)"}})}),n.jsxs("div",{children:[n.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Access Control"}),n.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role assignments"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"With Roles"}),n.jsx("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((mt=(dt=i==null?void 0:i.security)==null?void 0:dt.access_metrics)==null?void 0:mt.users_with_roles)||0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Without Roles"}),n.jsx("span",{className:"text-sm font-medium text-danger",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((k=(pt=i==null?void 0:i.security)==null?void 0:pt.access_metrics)==null?void 0:k.users_without_roles)||0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Admin Users"}),n.jsx("span",{className:"text-sm font-medium text-warning",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((ue=(B=i==null?void 0:i.security)==null?void 0:B.access_metrics)==null?void 0:ue.admin_users)||0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Role Coverage"}),n.jsx(Ce,{size:"sm",color:(((Ie=(ye=i==null?void 0:i.health)==null?void 0:ye.system_metrics)==null?void 0:Ie.role_coverage)||0)>80?"success":(((Ot=(Lt=i==null?void 0:i.health)==null?void 0:Lt.system_metrics)==null?void 0:Ot.role_coverage)||0)>60?"warning":"danger",variant:"flat",radius:P,children:n.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((zt=(Vt=i==null?void 0:i.health)==null?void 0:Vt.system_metrics)==null?void 0:zt.role_coverage)||0,"%"]})})]})]})]})}),n.jsx(Ne,{className:"transition-all duration-200",style:{background:"color-mix(in srgb, var(--theme-content1) 5%, transparent)",borderColor:"color-mix(in srgb, var(--theme-default) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:n.jsxs(_e,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-default) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:n.jsx(bn,{className:"w-5 h-5",style:{color:"var(--theme-default)"}})}),n.jsxs("div",{children:[n.jsx("h6",{className:"font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"System Health"}),n.jsx("p",{className:"text-small text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Overall metrics"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Health Score"}),n.jsx(Ce,{size:"sm",color:(((Kt=i==null?void 0:i.quick_metrics)==null?void 0:Kt.system_health_score)||0)>80?"success":(((Mt=i==null?void 0:i.quick_metrics)==null?void 0:Mt.system_health_score)||0)>60?"warning":"danger",variant:"flat",radius:P,children:n.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((Ut=i==null?void 0:i.quick_metrics)==null?void 0:Ut.system_health_score)||0,"%"]})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Activation Rate"}),n.jsxs("span",{className:"text-sm font-medium text-success",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[((Wt=(Gt=i==null?void 0:i.health)==null?void 0:Gt.system_metrics)==null?void 0:Wt.user_activation_rate)||0,"%"]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Total Roles"}),n.jsx("span",{className:"text-sm font-medium text-primary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((Ht=i==null?void 0:i.overview)==null?void 0:Ht.total_roles)||0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Total Departments"}),n.jsx("span",{className:"text-sm font-medium text-warning",style:{fontFamily:'var(--fontFamily, "Inter")'},children:((qt=i==null?void 0:i.overview)==null?void 0:qt.total_departments)||0})]})]})]})})]})}),n.jsx("div",{className:"mb-6",children:N?n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[n.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(pe,{className:"w-24 h-4 rounded"}),n.jsx(pe,{className:"w-full h-10 rounded-lg"})]})}),n.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(pe,{className:"w-20 h-4 rounded"}),n.jsx(pe,{className:"w-full h-10 rounded-lg"})]})})]}):n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-end",children:[n.jsx("div",{className:"flex-1",children:n.jsx(ve,{label:"Search Users",placeholder:"Search by name, email or phone...",value:b.search,onValueChange:l=>oe("search",l),variant:"bordered",size:u?"sm":"md",radius:P,startContent:n.jsx(ua,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"border-default-200 hover:border-default-300"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),n.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[n.jsxs(Re,{label:"Status",selectedKeys:b.status?[b.status]:[],onSelectionChange:l=>oe("status",Array.from(l)[0]),variant:"bordered",size:u?"sm":"md",radius:P,className:"w-32",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[n.jsx(fe,{children:"All Status"},"all"),n.jsx(fe,{children:"Active"},"active"),n.jsx(fe,{children:"Inactive"},"inactive")]}),n.jsxs(Re,{label:"Role",selectedKeys:b.role?[b.role]:[],onSelectionChange:l=>oe("role",Array.from(l)[0]),variant:"bordered",size:u?"sm":"md",radius:P,className:"w-32",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[n.jsx(fe,{children:"All Roles"},"all"),t==null?void 0:t.map((l,g)=>{const A=typeof l=="object"&&l!==null?l.name:l,Z=typeof A=="string"?A.toLowerCase():String(A||`role-${g}`).toLowerCase();return n.jsx(fe,{children:A||"Unknown Role"},Z)})]}),n.jsxs(ma,{variant:"bordered",radius:P,children:[n.jsx(xe,{isIconOnly:!0,color:G==="table"?"primary":"default",onPress:()=>q("table"),size:u?"sm":"md",children:n.jsx(ca,{className:"w-4 h-4"})}),n.jsx(xe,{isIconOnly:!0,color:G==="grid"?"primary":"default",onPress:()=>q("grid"),size:u?"sm":"md",children:n.jsx(wr,{className:"w-4 h-4"})})]})]})]})}),n.jsx("div",{className:"overflow-hidden",children:N?n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx(tt,{size:"lg"})}):G==="table"?n.jsx(hs,{allUsers:T.data,roles:t,designations:c,setUsers:m,isMobile:u,isTablet:p,pagination:o,onPageChange:re,onRowsPerPageChange:le,totalUsers:T.total,loading:N,onEdit:l=>ne("edit",l),updateUserOptimized:D,deleteUserOptimized:F,toggleUserStatusOptimized:te,updateUserRolesOptimized:ae,toggleSingleDeviceLogin:me,resetUserDevice:be,deviceActions:f}):n.jsxs("div",{children:[T.data&&T.data.length>0?n.jsx("div",{className:`grid gap-4 ${u?"grid-cols-1":p?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:T.data.map((l,g)=>n.jsx(Te,{user:l,index:g},l.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ke,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No users found"}),n.jsx("p",{className:"text-default-500 mb-4",children:"Try adjusting your search criteria or filters"}),n.jsx(xe,{color:"primary",startContent:n.jsx(bt,{className:"w-4 h-4"}),onPress:()=>ne("add"),children:"Add First User"})]}),T.data&&T.data.length>0&&n.jsx("div",{className:"flex justify-center mt-6 border-t pt-4",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:n.jsx(Vn,{total:Math.ceil(T.total/o.perPage),initialPage:o.currentPage,page:o.currentPage,onChange:re,size:u?"sm":"md",variant:"bordered",showControls:!0,radius:P,style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})})]})]})})})})})]})};Ns.layout=e=>n.jsx(Nr,{children:e});export{Ns as default};
