import{u as re,r as l,j as e,h as le,Q as ne,b as k,c as L,d as V}from"./app-GQVV-1lD.js";import{G as ie}from"./logo-a_njRLcj.js";import{P as ce}from"./PageHeader-Bkt5w18W.js";import{S as oe}from"./StatsCards-CoE0Dl3M.js";import{F as T,h as de,k as b,i as me,f as xe,s as j,l as n,t as pe,d as M,A as he}from"./App-Iq9o3Qfi.js";import{F as ue}from"./CheckCircleIcon-CK-otrSh.js";import{F as ge}from"./DocumentArrowDownIcon-pMTY0MSR.js";import{m as $}from"./proxy-DfCaXznD.js";import{F as be}from"./AdjustmentsHorizontalIcon-C0urJ6nj.js";import{F as B}from"./PresentationChartLineIcon-DYT0aJvF.js";import{p as je}from"./chunk-XVMALT6H-Defz8Iah.js";import{c as f}from"./react-toastify.esm-BF61XWHE.js";import{i as fe}from"./chunk-SSA7SXE4-YbzhcqDi.js";import{b as ve}from"./chunk-57V4RE7B-CTj-lXbd.js";import{t as Y,a as z,b as U,c as o}from"./chunk-F3UDT23P-DjMXKxQP.js";import{t as G}from"./chunk-YRZGWF2W-B7cpueAp.js";import{t as s}from"./chunk-TSPNSPCL-B7GCXhvN.js";import{p as we}from"./chunk-EAPQ7RWQ-DUIAAFRb.js";import"./EnvelopeIcon-B2BuzXXZ.js";import"./UserIcon-CAJzumBZ.js";import"./ShieldCheckIcon-D-4Bk5CI.js";import"./KeyIcon-Cc5jjHvP.js";import"./features-animation-B1aG0J2F.js";import"./create-visual-element-DbnlUQQN.js";import"./ExclamationTriangleIcon-BmJWzJB4.js";import"./useProgressBar-C28y07g6.js";import"./NumberFormatter-DNR9MAW-.js";import"./chunk-XJ2YRSUP-CiaVy2so.js";import"./useToggleState-BKendVO1.js";import"./index-DpZRoyAq.js";const Ne=({title:v,summaryData:I})=>{re();const[w]=l.useState(window.innerWidth<640),{users:ye=[],departments:J=[],leave_types:_e=[],columns:Se=[],data:N=[],department_summary:_=[],stats:d={},year:S=new Date().getFullYear(),filters:O={}}=I||{},[K,A]=l.useState(!1),[i,F]=l.useState(O),[p,H]=l.useState(!1),[C,Q]=l.useState("employee"),[c,P]=l.useState(""),[y,D]=l.useState(1),[m,W]=l.useState(15),x=l.useMemo(()=>{let a=N;return c&&(a=a.filter(t=>{var r,u;return((r=t.employee_name)==null?void 0:r.toLowerCase().includes(c.toLowerCase()))||((u=t.department)==null?void 0:u.toLowerCase().includes(c.toLowerCase()))})),a},[N,c]),q=l.useMemo(()=>{const a=(y-1)*m,t=a+m;return x.slice(a,t)},[x,y,m]),E=Math.ceil(x.length/m),X=l.useMemo(()=>[{title:"Total Employees",value:d.total_employees||0,icon:e.jsx(T,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Active employees"},{title:"Approved Leaves",value:d.total_approved_leaves||0,icon:e.jsx(ue,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Total approved days"},{title:"Pending Leaves",value:d.total_pending_leaves||0,icon:e.jsx(de,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Awaiting approval"},{title:"Departments",value:d.departments_count||0,icon:e.jsx(b,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Active departments"}],[d]),h=l.useCallback((a,t)=>{const r={...i,[a]:t};F(r),R(r)},[i]),R=l.useCallback(a=>{A(!0),le.Inertia.get(route("leave-summary"),a,{preserveState:!0,replace:!0,onFinish:()=>A(!1)})},[]),Z=l.useCallback(()=>{const a={year:new Date().getFullYear()};F(a),P(""),R(a)},[]),ee=[{label:"Export Data",icon:e.jsx(ge,{className:"w-4 h-4"}),onPress:()=>{console.log("Export functionality")},className:GRADIENT_PRESETS.primaryButton},{label:"Current Year",icon:e.jsx(me,{className:"w-4 h-4"}),onPress:()=>h("year",new Date().getFullYear()),className:GRADIENT_PRESETS.secondaryButton}],ae=l.useCallback((a,t)=>{const r=a[t];switch(t){case"employee_name":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-bold text-sm text-foreground",children:a.employee_name}),e.jsx("p",{className:"text-tiny text-default-400",children:a.department}),a.designation&&e.jsx("p",{className:"text-tiny text-default-500",children:a.designation})]});case"total_approved":case"total_pending":case"total_rejected":const u={total_approved:"success",total_pending:"warning",total_rejected:"danger"};return r>0?e.jsx(f,{size:"sm",variant:"flat",color:u[t],className:"min-w-12",children:r}):"";case"usage_percentage":const g=r||0,se=g>80?"danger":g>60?"warning":"success";return e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(je,{size:"sm",value:g,color:se,className:"w-16"}),e.jsxs("span",{className:"text-tiny",children:[g,"%"]})]});case"total_balance":return e.jsx("div",{className:"text-center",children:e.jsx("span",{className:r<5?"text-danger":"text-foreground",children:r})});default:return r!=null&&r!==""?r:""}},[]),te=l.useMemo(()=>{const a=new Date().getFullYear();return Array.from({length:10},(t,r)=>a-r)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(ne,{title:v}),e.jsx("div",{className:"flex justify-center p-2",children:e.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:e.jsx(ie,{children:e.jsx(ce,{title:"Leave Summary",subtitle:"Comprehensive employee leave analytics and reporting",icon:e.jsx(B,{className:"w-8 h-8"}),variant:"gradient",actionButtons:ee,children:e.jsxs("div",{className:"p-6",children:[e.jsx(oe,{stats:X,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(fe,{label:"Search Employees",placeholder:"Search by name or department...",startContent:e.jsx(xe,{className:"w-4 h-4 text-default-400"}),value:c,onChange:a=>P(a.target.value)})}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(ve,{variant:"bordered",className:"bg-white/5",children:e.jsxs(k,{isIconOnly:w,color:p?"primary":"default",onPress:()=>H(!p),className:p?"bg-purple-500/20":"bg-white/5",children:[e.jsx(be,{className:"w-4 h-4"}),!w&&e.jsx("span",{className:"ml-1",children:"Filters"})]})})})]}),p&&e.jsx($.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(j,{label:"Year",variant:"bordered",selectedKeys:[String(i.year||S)],onSelectionChange:a=>{const t=Array.from(a)[0];t&&h("year",parseInt(t))},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:te.map(a=>e.jsx(n,{value:a,textValue:String(a),children:a},a))}),e.jsxs(j,{label:"Department",variant:"bordered",selectedKeys:i.department_id?[String(i.department_id)]:[],onSelectionChange:a=>{const t=Array.from(a)[0];h("department_id",t||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e.jsx(n,{value:"",textValue:"All Departments",children:"All Departments"},""),J.map(a=>e.jsx(n,{value:a.id,textValue:a.name,children:a.name},a.id))]}),e.jsxs(j,{label:"Leave Status",variant:"bordered",selectedKeys:i.status?[i.status]:[],onSelectionChange:a=>{const t=Array.from(a)[0];h("status",t||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e.jsx(n,{value:"",textValue:"All Status",children:"All Status"},""),e.jsx(n,{value:"Approved",textValue:"Approved",children:"Approved"},"Approved"),e.jsx(n,{value:"Pending",textValue:"Pending",children:"Pending"},"Pending"),e.jsx(n,{value:"Declined",textValue:"Declined",children:"Declined"},"Declined")]}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(k,{color:"primary",variant:"flat",onPress:Z,size:w?"sm":"md",children:"Clear Filters"})})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs(pe,{selectedKey:C,onSelectionChange:Q,variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-primary",tab:"max-w-fit px-0 h-12"},children:[e.jsx(M,{title:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:"Employee Summary"})]})},"employee"),e.jsx(M,{title:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:"Department Summary"})]})},"department")]})}),C==="employee"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-default-400 text-small",children:["Total ",x.length," employees",c&&` (filtered from ${N.length})`]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-tiny text-default-400",children:"Rows per page:"}),e.jsxs(j,{size:"sm",selectedKeys:[String(m)],onSelectionChange:a=>{const t=Number(Array.from(a)[0]);W(t),D(1)},className:"w-20",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:[e.jsx(n,{value:"10",textValue:"10",children:"10"},"10"),e.jsx(n,{value:"15",textValue:"15",children:"15"},"15"),e.jsx(n,{value:"25",textValue:"25",children:"25"},"25"),e.jsx(n,{value:"50",textValue:"50",children:"50"},"50")]})]})]}),x.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(Y,{"aria-label":"Employee leave summary table",isHeaderSticky:!0,classNames:{wrapper:"max-h-[600px] bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground border-b border-white/10",td:"border-b border-white/5"},children:[e.jsxs(G,{children:[e.jsx(s,{children:"Employee"},"employee_name"),e.jsx(s,{align:"center",children:"JAN"},"JAN"),e.jsx(s,{align:"center",children:"FEB"},"FEB"),e.jsx(s,{align:"center",children:"MAR"},"MAR"),e.jsx(s,{align:"center",children:"APR"},"APR"),e.jsx(s,{align:"center",children:"MAY"},"MAY"),e.jsx(s,{align:"center",children:"JUN"},"JUN"),e.jsx(s,{align:"center",children:"JUL"},"JUL"),e.jsx(s,{align:"center",children:"AUG"},"AUG"),e.jsx(s,{align:"center",children:"SEP"},"SEP"),e.jsx(s,{align:"center",children:"OCT"},"OCT"),e.jsx(s,{align:"center",children:"NOV"},"NOV"),e.jsx(s,{align:"center",children:"DEC"},"DEC"),e.jsx(s,{align:"center",children:"Approved"},"total_approved"),e.jsx(s,{align:"center",children:"Pending"},"total_pending"),e.jsx(s,{align:"center",children:"Balance"},"total_balance"),e.jsx(s,{align:"center",children:"Usage"},"usage_percentage")]}),e.jsx(z,{items:q,isLoading:K,children:a=>e.jsx(U,{children:t=>e.jsx(o,{children:ae(a,t)})},a.id)})]}),E>1&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(we,{total:E,page:y,onChange:D,showControls:!0,showShadow:!0,color:"primary"})})]}):e.jsx(L,{className:"bg-white/5 backdrop-blur-md border-white/10",children:e.jsxs(V,{className:"text-center py-12",children:[e.jsx(B,{className:"w-16 h-16 mx-auto mb-4 text-default-300"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-white",children:"No Leave Data Found"}),e.jsx("p",{className:"text-gray-400",children:c?`No employees found matching "${c}"`:`No leave summary data available for ${i.year||S}.`})]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Department-wise Leave Summary"}),_.length>0?e.jsxs(Y,{"aria-label":"Department leave summary table",classNames:{wrapper:"bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground",td:"border-b border-white/5"},children:[e.jsxs(G,{children:[e.jsx(s,{children:"Department"}),e.jsx(s,{align:"center",children:"Employees"}),e.jsx(s,{align:"center",children:"Total Leaves"}),e.jsx(s,{align:"center",children:"Approved"}),e.jsx(s,{align:"center",children:"Pending"}),e.jsx(s,{align:"center",children:"Avg per Employee"})]}),e.jsx(z,{children:_.map((a,t)=>e.jsxs(U,{children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"font-medium",children:a.department})]})}),e.jsx(o,{className:"text-center",children:e.jsx(f,{size:"sm",variant:"flat",color:"default",children:a.employee_count})}),e.jsx(o,{className:"text-center",children:a.total_leaves}),e.jsx(o,{className:"text-center",children:e.jsx(f,{size:"sm",variant:"flat",color:"success",children:a.total_approved})}),e.jsx(o,{className:"text-center",children:e.jsx(f,{size:"sm",variant:"flat",color:"warning",children:a.total_pending})}),e.jsx(o,{className:"text-center",children:a.avg_leaves_per_employee})]},t))})]}):e.jsx(L,{className:"bg-white/5 backdrop-blur-md border-white/10",children:e.jsxs(V,{className:"text-center py-8",children:[e.jsx(b,{className:"w-12 h-12 mx-auto mb-4 text-default-300"}),e.jsx("p",{className:"text-white",children:"No department data available"})]})})]})]})})})})})]})};Ne.layout=v=>e.jsx(he,{children:v});export{Ne as default};
