import{R as rt,r as n,j as e,d as R,c as we,b as Ne,a as Z,s as J,S as Te,Q as at}from"./app-C-B7qC59.js";import{h as st,i as nt,j as lt,k as it,P as Ue,p as oe,K as ce,G as ot,x as Qe,e as fe,f as be,g as ve,m as ie,o as Le,a as je,E as ct,A as dt}from"./Dashboard-DIFK-c22.js";import{S as mt}from"./StatsCards-D9kQNtuD.js";import{s as B}from"./toastUtils-5-e4yC6y.js";import{F as _e}from"./ExclamationTriangleIcon-lpECprAZ.js";import{F as We}from"./TrashIcon-v6pQdJk9.js";import{c as X}from"./chunk-IHOGUXIG-guIQYe_o.js";import{m as ht}from"./chunk-O5MCAK4F-CrOeDBri.js";import{a as Ge}from"./XMarkIcon-DEBgEZIu.js";import{F as Ve}from"./UserIcon-B1pQWBbr.js";import{F as Je}from"./CheckCircleIcon-B2ss00QP.js";import{p as xt}from"./chunk-XVMALT6H-B1jxM0if.js";import{F as pt}from"./WifiIcon-DzODjdv6.js";import{a as gt}from"./MapPinIcon-BtI6ukDP.js";import{F as ye}from"./EllipsisVerticalIcon-DBmpca_g.js";import{F as Xe}from"./PencilIcon-8-qFnN5k.js";import{F as ke}from"./ClockIcon-KDUDcXBA.js";import{F as ze}from"./EnvelopeIcon-vKmwvqy-.js";import{F as ut}from"./HashtagIcon-DNl9Kpal.js";import{t as ft,a as bt,b as vt,c as jt}from"./chunk-F3UDT23P-WylH7EFk.js";import{t as yt,a as wt}from"./chunk-YRZGWF2W-6XC11wyr.js";import{p as et}from"./chunk-EAPQ7RWQ-BQT05-iP.js";import{s as Fe,l as de}from"./chunk-Y2AYO5NJ-CVm9bu3V.js";import{u as Nt}from"./chunk-S574QCAN-Bh4hXaWw.js";import{F as _t}from"./TrophyIcon-FSDqHEll.js";import{F as He}from"./UserPlusIcon-CWgBxkac.js";import{F as kt}from"./ChartBarIcon-Ccf_dgVs.js";import{m as qe}from"./proxy-DaXjLD9M.js";import{F as Ft}from"./MagnifyingGlassIcon-CXTpRG8Y.js";import{F as Pt}from"./TableCellsIcon-Dkck64FK.js";import{F as Ct}from"./FunnelIcon-BiO2VdhM.js";import{c as Ke}from"./chunk-D5XJWRAV-CvAPN2iv.js";import{i as Rt}from"./chunk-SSA7SXE4-Cly-uwIa.js";import{b as St}from"./chunk-57V4RE7B-DShfTAEm.js";import"./UserGroupIcon-DZNhQXDZ.js";import"./ShieldCheckIcon-CffM_rOf.js";import"./KeyIcon-D7xKtFIJ.js";import"./index-BgyJOU24.js";import"./logo-Pwvcz7fP.js";import"./features-animation-Cn3P6Pqu.js";import"./create-visual-element-CBAuT-PO.js";import"./chunk-TLYTI3QM-izbvUkI3.js";import"./useProgressBar-CSu3ml_z.js";import"./NumberFormatter-DNR9MAW-.js";import"./chunk-XJ2YRSUP-BClKtF6G.js";import"./useToggleState-Cx4s2z1o.js";function tt(w){return null}tt.getCollectionNode=function*(m){let{children:s,title:f,items:j}=m;yield{type:"section",props:m,hasChildNodes:!0,rendered:f,"aria-label":m["aria-label"],*childNodes(){if(typeof s=="function"){if(!j)throw new Error("props.children was a function but props.items is missing");for(let M of j)yield{type:"item",value:M,renderer:s}}else{let M=[];rt.Children.forEach(s,P=>{M.push({type:"item",element:P})}),yield*M}}}};let Dt=tt;var Et=Dt,Mt=Et;function At({title:w,titleId:m,...s},f){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:f,"aria-labelledby":m},s),w?n.createElement("title",{id:m},w):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}const It=n.forwardRef(At);function $t({title:w,titleId:m,...s},f){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:f,"aria-labelledby":m},s),w?n.createElement("title",{id:m},w):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Ye=n.forwardRef($t);function Tt({title:w,titleId:m,...s},f){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:f,"aria-labelledby":m},s),w?n.createElement("title",{id:m},w):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const Lt=n.forwardRef(Tt),zt=({open:w,onClose:m,employee:s,onConfirm:f,loading:j=!1})=>{if(!s)return null;const M=s.active_projects_count>0||s.pending_leaves_count>0||s.active_trainings_count>0;return e.jsx(st,{isOpen:w,onClose:m,size:"2xl",classNames:{backdrop:"bg-black/50 backdrop-blur-sm",base:"border border-white/20 bg-white/90 backdrop-blur-md",header:"border-b border-danger/30 bg-gradient-to-r from-danger-50/50 to-danger-100/30",body:"py-0",footer:"border-t border-white/10 bg-white/5"},children:e.jsxs(nt,{children:[e.jsx(lt,{className:"flex items-center gap-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-danger",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-danger/20 to-danger/10 flex items-center justify-center border border-danger/30",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Delete Employee"})]})}),e.jsxs(it,{children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 backdrop-blur-2xl border border-white/10 mb-6 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx(Ue,{src:s.profile_image_url||s.profile_image,name:s.name,size:"lg",className:"ring-2 ring-white/20 shadow-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-default-500",children:s.email}),s.employee_id&&e.jsxs("span",{className:"inline-block mt-1 px-3 py-1 text-xs rounded-lg bg-white/10 border border-white/10",children:["ID: ",s.employee_id]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(oe,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Department"})]}),e.jsx("p",{className:"text-sm font-medium",children:s.department_name||"Not assigned"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ce,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Designation"})]}),e.jsx("p",{className:"text-sm font-medium",children:s.designation_name||"Not assigned"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 rounded-2xl bg-danger-50/50 backdrop-blur-2xl border border-danger/30",children:e.jsxs("div",{className:"flex items-center gap-3 text-danger",children:[e.jsx(_e,{className:"w-5 h-5"}),e.jsx("p",{className:"text-sm font-medium",children:"This action will permanently delete the employee record and cannot be undone."})]})}),M&&e.jsxs("div",{className:"p-6 rounded-2xl bg-warning-50/50 backdrop-blur-2xl border border-warning/30 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-warning/20 flex items-center justify-center",children:e.jsx(_e,{className:"w-4 h-4 text-warning"})}),e.jsx("h4",{className:"text-sm font-semibold text-warning",children:"Employee Has Active Data"})]}),e.jsx("p",{className:"text-sm text-default-500 mb-4",children:"This employee has the following active records that will also be affected:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.active_projects_count>0&&e.jsxs(X,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[s.active_projects_count," Active Projects"]}),s.pending_leaves_count>0&&e.jsxs(X,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[s.pending_leaves_count," Pending Leaves"]}),s.active_trainings_count>0&&e.jsxs(X,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[s.active_trainings_count," Active Trainings"]})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 border border-white/10 mb-4",children:[e.jsxs("p",{className:"text-sm mb-2 font-medium",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-danger font-semibold",children:s.name}),"?"]}),e.jsx("p",{className:"text-xs text-default-500",children:"Type the employee's name below to confirm this permanent deletion:"})]})]}),e.jsxs(ht,{className:"flex justify-between px-6 py-6 bg-white/5",children:[e.jsx(R,{variant:"light",onPress:m,isDisabled:j,className:"hover:bg-white/10",children:"Cancel"}),e.jsx(R,{color:"danger",variant:"solid",onPress:f,isLoading:j,startContent:!j&&e.jsx(We,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-danger to-danger-600 hover:from-danger-600 hover:to-danger-700 shadow-lg",children:j?"Deleting...":"Delete Employee"})]})]})})},Ut=({isOpen:w,onClose:m,employee:s,onImageUpdate:f})=>{const j=n.useRef(null),[M,P]=n.useState(null),[O,h]=n.useState(null),[T,V]=n.useState(!1),[me,L]=n.useState(0),[N,S]=n.useState(""),re=2*1024*1024,ae=["image/jpeg","image/jpg","image/png","image/webp"],G=100,H=2e3,q=(s==null?void 0:s.profile_image_url)||null,Pe=q&&q!==null,se=A=>{const k=A.target.files[0];if(!k)return;if(S(""),!ae.includes(k.type)){S("Invalid file type. Please select a JPEG, PNG, or WebP image.");return}if(k.size>re){S(`File too large. Maximum size is ${re/1024/1024}MB.`);return}const C=new Image;C.onload=()=>{if(C.width<G||C.height<G){S(`Image dimensions too small. Minimum size is ${G}x${G} pixels.`);return}if(C.width>H||C.height>H){S(`Image dimensions too large. Maximum size is ${H}x${H} pixels.`);return}P(k),h(URL.createObjectURL(k))},C.onerror=()=>{S("Invalid image file.")},C.src=URL.createObjectURL(k)},b=async()=>{var k,C,x,_;if(!M||!s)return;V(!0),L(0),S("");const A=new FormData;A.append("profile_image",M),A.append("user_id",s.id);try{const g=await Z.post(route("profile.image.upload"),A,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:d=>{const K=Math.round(d.loaded*100/d.total);L(K)}});if(g.data.success){if(B.success(g.data.message||"Profile picture updated successfully!"),f){const d=g.data.profile_image_url;f(s.id,d)}D()}else throw new Error(g.data.message||"Upload failed")}catch(g){console.error("Upload error:",g);let d="Failed to upload profile picture";((k=g.response)==null?void 0:k.status)===413?d="File too large. Please choose a smaller image.":((C=g.response)==null?void 0:C.status)===422?d=g.response.data.message||"Validation failed":(_=(x=g.response)==null?void 0:x.data)!=null&&_.message?d=g.response.data.message:g.message&&(d=g.message),S(d),B.error(d)}finally{V(!1),L(0)}},z=async()=>{var k,C;if(!s)return;V(!0),S("");const A=new FormData;A.append("user_id",s.id);try{const x=await Z.delete(route("profile.image.remove"),{data:A,headers:{"Content-Type":"multipart/form-data"}});if(x.data.success){if(B.success(x.data.message||"Profile picture removed successfully!"),f){const _=x.data.profile_image_url;f(s.id,_)}D()}else throw new Error(x.data.message||"Remove failed")}catch(x){console.error("Remove error:",x);const _=((C=(k=x.response)==null?void 0:k.data)==null?void 0:C.message)||x.message||"Failed to remove profile picture";S(_),B.error(_)}finally{V(!1)}},D=()=>{T||(P(null),h(null),S(""),L(0),O&&URL.revokeObjectURL(O),m())};return s?e.jsx(ot,{open:w,closeModal:D,maxWidth:"md",fullWidth:!0,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ye,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Update Profile Picture"}),e.jsx("p",{className:"text-sm text-gray-500",children:(s==null?void 0:s.name)||"Employee"})]})]}),e.jsx(R,{isIconOnly:!0,variant:"light",onPress:D,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ge,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(Qe,{src:O||q||void 0,name:(s==null?void 0:s.name)||"Employee",size:"lg",className:"w-24 h-24",fallback:e.jsx(Ve,{className:"w-12 h-12 text-gray-400"})})}),N&&e.jsx(X,{color:"danger",variant:"flat",startContent:e.jsx(_e,{className:"w-4 h-4"}),className:"mb-4 w-full",children:N}),T&&e.jsx("div",{className:"mb-4",children:e.jsx(xt,{value:me,color:"primary",size:"sm",label:"Uploading...",showValueLabel:!0,className:"w-full"})}),e.jsx(we,{className:"mb-4",children:e.jsxs(Ne,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("input",{ref:j,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:se,className:"hidden",disabled:T}),e.jsx(R,{onPress:()=>{var A;return(A=j.current)==null?void 0:A.click()},startContent:e.jsx(Ye,{className:"w-5 h-5"}),variant:"flat",color:"primary",disabled:T,className:"mb-3",children:"Choose New Picture"}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Supported formats: JPEG, PNG, WebP"}),e.jsx("p",{children:"Maximum size: 2MB"}),e.jsx("p",{children:"Minimum dimensions: 100x100px"}),e.jsx("p",{children:"Maximum dimensions: 2000x2000px"})]})]}),M&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:M.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(M.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(R,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>{P(null),h(null),S("")},disabled:T,children:e.jsx(Ge,{className:"w-4 h-4"})})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[Pe&&e.jsx(R,{onPress:z,startContent:e.jsx(We,{className:"w-4 h-4"}),color:"danger",variant:"flat",disabled:T,children:"Remove Picture"}),e.jsx(R,{onPress:D,variant:"flat",disabled:T,children:"Cancel"}),e.jsx(R,{onPress:b,color:"primary",disabled:!M||T,isLoading:T,children:T?"Uploading...":"Update Picture"})]})]})}):null},Wt=({allUsers:w,allManagers:m=[],departments:s,designations:f,attendanceTypes:j,setUsers:M,isMobile:P,isTablet:O,pagination:h,onPageChange:T,onRowsPerPageChange:V,totalUsers:me=0,loading:L=!1,updateEmployeeOptimized:N,deleteEmployeeOptimized:S})=>{const[re,ae]=n.useState(!1),[G,H]=n.useState(null),[q,Pe]=n.useState({}),[se,b]=n.useState(!1),[z,D]=n.useState(null),[A,k]=n.useState(!1),[C,x]=n.useState({isOpen:!1,employee:null}),_=()=>{var i;if(typeof window>"u")return"lg";const a=((i=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:i.trim())||"12px",c=parseInt(a);return c===0?"none":c<=4?"sm":c<=8?"md":c<=16?"lg":"full"},g=t=>t?t.replace(/_\d+$/,""):"",d=t=>{const a=t==null?void 0:t.config;if(!a)return!1;switch(g(t.slug)){case"geo_polygon":return a.polygon&&a.polygon.length>=3||a.polygons&&a.polygons.some(i=>{var u;return((u=i.points)==null?void 0:u.length)>=3});case"wifi_ip":return a.allowed_ips&&a.allowed_ips.length>0||a.allowed_ranges&&a.allowed_ranges.length>0||a.ip_locations&&a.ip_locations.some(i=>{var u,v;return((u=i.allowed_ips)==null?void 0:u.length)>0||((v=i.allowed_ranges)==null?void 0:v.length)>0});case"route_waypoint":return a.waypoints&&a.waypoints.length>=2||a.routes&&a.routes.some(i=>{var u;return((u=i.waypoints)==null?void 0:u.length)>=2});case"qr_code":return a.code||a.qr_codes&&a.qr_codes.length>0;default:return!1}},K={geo_polygon:{title:"Geo Polygon",icon:gt,color:"warning"},wifi_ip:{title:"WiFi/IP",icon:pt,color:"secondary"},route_waypoint:{title:"Route Waypoint",icon:It,color:"primary"},qr_code:{title:"QR Code",icon:Lt,color:"success"}},ee=n.useMemo(()=>{if(!j)return[];const t={};return j.forEach(a=>{if(!a.is_active||!d(a))return;const c=g(a.slug);K[c]&&(t[c]||(t[c]={...K[c],slug:c,types:[]}),t[c].types.push(a))}),Object.values(t).filter(a=>a.types.length>0)},[j]),te=async(t,a)=>{const c=new Promise(async(i,u)=>{try{if((await Z.post(route("user.updateDepartment",{id:t}),{department:a})).status===200){const p=s.find(y=>y.id===parseInt(a))||null;N==null||N(t,{department_id:a,department_name:(p==null?void 0:p.name)||null,designation_id:null,designation_name:null}),i("Department updated successfully")}}catch(v){console.error("Error updating department:",v),u("Failed to update department")}});B.promise(c,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(J,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating department..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},Ce=async(t,a)=>{const c=new Promise(async(i,u)=>{try{if((await Z.post(route("user.updateDesignation",{id:t}),{designation_id:a})).status===200){const p=f.find(y=>y.id===parseInt(a))||null;N==null||N(t,{designation_id:a,designation_name:(p==null?void 0:p.title)||null}),i("Designation updated successfully")}}catch(v){console.error("Error updating designation:",v),u("Failed to update designation")}});B.promise(c,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(J,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating designation..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},Re=async(t,a)=>{const c=new Promise(async(i,u)=>{try{if((await Z.post(route("user.updateAttendanceType",{id:t}),{attendance_type_id:a})).status===200){const p=j.find(y=>y.id===parseInt(a))||null;N&&N(t,{attendance_type_id:a,attendance_type_name:(p==null?void 0:p.name)||null}),i("Attendance type updated successfully")}}catch(v){console.error("Error updating attendance type:",v),u("Failed to update attendance type")}});B.promise(c,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(J,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating attendance type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},Se=t=>{D(t),b(!0)},De=async()=>{if(!z)return;k(!0);const t=new Promise(async(a,c)=>{var i,u,v,p;try{(await Z.delete(route("user.delete",{id:z.id}))).status===200&&(S&&S(z.id),b(!1),D(null),a("Employee deleted successfully"))}catch(y){console.error("Error deleting employee:",y);let U="Failed to delete employee";((i=y.response)==null?void 0:i.status)===403?U="You do not have permission to delete this employee":((u=y.response)==null?void 0:u.status)===404?U="Employee not found or already deleted":(p=(v=y.response)==null?void 0:v.data)!=null&&p.error&&(U=y.response.data.error),c(U)}finally{k(!1)}});B.promise(t,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(J,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting employee..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:a}){return e.jsx("div",{children:a})},icon:"âœ…",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:a}){return e.jsx("div",{children:a})},icon:"âŒ",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},he=()=>{b(!1),D(null)},Ee=t=>{x({isOpen:!0,employee:t})},Me=()=>{x({isOpen:!1,employee:null})},Ae=(t,a)=>{N&&N(t,{profile_image_url:a})},Y=n.useRef({}),Ie=n.useCallback((t,a)=>{Y.current[t]&&clearTimeout(Y.current[t]),Y.current[t]=setTimeout(async()=>{const c=Z.post(route("users.updateReportTo",{id:t}),{report_to:a||null});B.promise(c,{loading:"Updating manager assignment...",success:i=>{var u,v;return N&&N(t,{report_to:a||null,reports_to:((u=i.data.user)==null?void 0:u.reports_to)||null}),((v=i.data)==null?void 0:v.message)||"Manager assigned successfully!"},error:i=>{var u,v;return((v=(u=i.response)==null?void 0:u.data)==null?void 0:v.error)||"Failed to update manager"}})},500)},[N]),$e=n.useCallback((t,a=null)=>{if(!m||m.length===0)return[];const c=t==null?void 0:t.department_id,i=(t==null?void 0:t.designation_hierarchy_level)??999,v=!m.filter(p=>String(p.department_id)===String(c)&&p.id!==t.id).some(p=>(p.designation_hierarchy_level??999)<i);return m.filter(p=>{if(p.id===t.id)return!1;if(a&&p.id===a)return!0;const y=p.department_id,U=p.designation_hierarchy_level??999,$=String(y)===String(c);return U>=i?!1:!!($||v)})},[m]),xe=n.useMemo(()=>{const t=[{name:"#",uid:"sl",width:60},{name:"EMPLOYEE",uid:"employee",width:"auto",minWidth:200},{name:"DEPARTMENT",uid:"department",width:180},{name:"DESIGNATION",uid:"designation",width:180},{name:"REPORT TO",uid:"report_to",width:200},{name:"ACTIONS",uid:"actions",width:80}];if(P||t.splice(2,0,{name:"CONTACT",uid:"contact",width:220}),!P&&!O&&t.splice(t.length-2,0,{name:"ATTENDANCE TYPE",uid:"attendance_type",width:180}),P){const a=t.findIndex(c=>c.uid==="report_to");a>-1&&t.splice(a,1)}return t},[P,O]),pe=(t,a,c)=>{const i=t[a],p=(h!=null&&h.currentPage&&(h!=null&&h.perPage)?Number((h.currentPage-1)*h.perPage):0)+(typeof c=="number"?c:0)+1;switch(a){case"sl":return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e.jsx("span",{className:"text-sm font-semibold text-foreground",children:p})})});case"employee":return e.jsxs("div",{className:"min-w-max",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{src:(t==null?void 0:t.profile_image_url)||(t==null?void 0:t.profile_image),name:t==null?void 0:t.name,size:P?"sm":"md",onClick:()=>Ee(t)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"font-semibold text-foreground text-left whitespace-nowrap",children:t==null?void 0:t.name}),!P&&e.jsxs("p",{className:"text-default-500 text-left text-xs whitespace-nowrap",children:["ID: ",(t==null?void 0:t.employee_id)||"N/A"]})]})]}),P&&e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(ut,{className:"w-3 h-3"}),(t==null?void 0:t.employee_id)||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(Le,{className:"w-3 h-3"}),t==null?void 0:t.phone]})]})]});case"contact":return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ze,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Le,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:t==null?void 0:t.phone})]})]});case"department":return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(fe,{children:[e.jsx(be,{children:e.jsx(R,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e.jsx(oe,{className:"w-4 h-4"}),endContent:e.jsx(ye,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:t.department_name||"Select Department"})})}),e.jsx(ve,{"aria-label":"Department options",children:s==null?void 0:s.map(o=>e.jsx(ie,{onPress:()=>te(t.id,o.id),children:o.name},o.id.toString()))})]})});case"designation":const y=t.department_id,U=(f==null?void 0:f.filter(o=>o.department_id===parseInt(y)))||[];return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(fe,{isDisabled:!y,children:[e.jsx(be,{children:e.jsx(R,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[150px] transition-all duration-300 ${y?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,isDisabled:!y,startContent:e.jsx(ce,{className:"w-4 h-4"}),endContent:y&&e.jsx(ye,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:y?t.designation_name||"Select Designation":"Select Department First"})})}),e.jsx(ve,{"aria-label":"Designation options",children:U.map(o=>e.jsx(ie,{onPress:()=>Ce(t.id,o.id),children:o.title},o.id.toString()))})]})});case"report_to":const $=t.reports_to,ne=!!$,Q=t.report_to,ue=$e(t,Q),r=[];ue.sort((o,F)=>(o.designation_hierarchy_level??999)-(F.designation_hierarchy_level??999)).forEach(o=>{r.push({id:o.id,name:o.name,profile_image_url:o.profile_image_url,designation_name:o.designation_name||"",description:o.designation_name||"",isCurrent:Q&&o.id===Q})}),ne&&!r.some(o=>o.id===$.id)&&r.unshift({id:$.id,name:$.name,profile_image_url:$.profile_image_url,designation_name:$.designation_name||"",description:$.designation_name||"Current manager",isCurrent:!0});const l=Q,I=l&&r.some(o=>o.id===l);return e.jsx("div",{className:"flex flex-col gap-2 min-w-[180px]",children:e.jsx(Fe,{size:"sm",variant:"bordered",placeholder:"Select manager",isDisabled:r.length===0,selectedKeys:I?[String(l)]:[],onSelectionChange:o=>{const F=Array.from(o)[0],W=F?parseInt(F,10):null;W!==t.report_to&&Ie(t.id,W)},classNames:{trigger:"min-h-unit-10 h-unit-10 backdrop-blur-md border-white/20 bg-white/10 hover:bg-white/15",value:"text-small"},renderValue:o=>o.length===0||!ne?e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm",children:"Select manager"})}):o.map(F=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{src:$.profile_image_url,size:"sm",className:"w-6 h-6 flex-shrink-0",showFallback:!0,name:$.name}),e.jsx("span",{className:"text-sm font-medium truncate",children:$.name})]},F.key)),children:r.length===0?e.jsx(de,{isDisabled:!0,textValue:"No eligible managers",children:e.jsx("span",{className:"text-default-400",children:"No eligible managers in department"})},"no-managers"):r.map(o=>e.jsx(de,{textValue:o.name,children:e.jsx(Nt,{name:o.name,description:o.description,avatarProps:{src:o.profile_image_url,size:"sm",showFallback:!0,name:o.name}})},String(o.id)))})});case"attendance_type":const E=ee.length>0;return e.jsx("div",{className:"flex flex-col gap-2 min-w-[180px]",children:e.jsxs(fe,{isDisabled:!E,children:[e.jsx(be,{children:e.jsx(R,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[180px] transition-all duration-300 ${E?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,startContent:e.jsx(ke,{className:"w-4 h-4"}),endContent:E&&e.jsx(ye,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{className:"truncate",children:E?t.attendance_type_name||"Select Type":"No Types Configured"})})}),e.jsx(ve,{"aria-label":"Attendance Type options",className:"min-w-[200px]",children:ee.map((o,F)=>(o.icon,e.jsx(Mt,{title:o.title,showDivider:F<ee.length-1,classNames:{heading:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-default-500 px-2 py-1"},children:o.types.map(W=>{var le;return e.jsx(ie,{onPress:()=>Re(t.id,W.id),startContent:e.jsx("span",{className:"text-base",children:W.icon||"ðŸ“"}),description:((le=W.description)==null?void 0:le.substring(0,30))||null,children:W.name},W.id.toString())})},o.slug)))})]})});case"actions":return e.jsx("div",{className:"relative flex justify-center items-center",children:e.jsxs(fe,{children:[e.jsx(be,{children:e.jsx(R,{isIconOnly:!0,variant:"light",className:"text-default-400 hover:text-foreground transition-all duration-300",children:e.jsx(ye,{className:"w-5 h-5"})})}),e.jsxs(ve,{"aria-label":"Employee Actions",children:[e.jsx(ie,{startContent:e.jsx(Xe,{className:"w-4 h-4"}),onPress:()=>Te.visit(route("profile",{user:t.id})),children:"Edit Profile"},"edit"),e.jsx(ie,{className:"text-danger",color:"danger",startContent:e.jsx(We,{className:"w-4 h-4"}),onPress:()=>Se(t),children:"Delete"},"delete")]})]})});default:return i}},ge=()=>!h||L?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2",style:{borderTop:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",backdropFilter:"blur(16px)"},children:[e.jsxs("span",{className:"text-xs mb-3 sm:mb-0 opacity-70",style:{color:"var(--theme-foreground)"},children:["Showing ",(h.currentPage-1)*h.perPage+1," to ",Math.min(h.currentPage*h.perPage,h.total)," of ",h.total," employees"]}),e.jsx(et,{total:Math.ceil(h.total/h.perPage),initialPage:h.currentPage,page:h.currentPage,onChange:T,size:P?"sm":"md",variant:"bordered",showControls:!0,style:{"--pagination-item-bg":"color-mix(in srgb, var(--theme-content2) 50%, transparent)","--pagination-item-border":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}})]});return e.jsxs("div",{className:"w-full overflow-hidden flex flex-col relative",style:{maxHeight:"calc(100vh - 200px)",background:"color-mix(in srgb, var(--theme-content1) 85%, transparent)",backdropFilter:"blur(16px)",border:"1px solid color-mix(in srgb, var(--theme-content2) 50%, transparent)",borderRadius:_()},children:[L&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50",style:{background:"color-mix(in srgb, var(--theme-content1) 20%, transparent)",backdropFilter:"blur(8px)",borderRadius:_()},children:e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:_(),backdropFilter:"blur(16px)"},children:[e.jsx(J,{size:"lg",color:"primary"}),e.jsx("span",{className:"text-sm",style:{color:"var(--theme-foreground)"},children:"Loading employees..."})]})}),e.jsx("div",{className:"overflow-auto grow",children:e.jsxs(ft,{"aria-label":"Employees table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"backdrop-blur-md font-medium text-xs sticky top-0 z-10 whitespace-nowrap",td:"py-3 whitespace-nowrap",table:"border-collapse table-auto",thead:"",tr:"hover:opacity-80 transition-all duration-200"},style:{"--table-header-bg":"color-mix(in srgb, var(--theme-content2) 60%, transparent)","--table-row-hover":"color-mix(in srgb, var(--theme-content2) 30%, transparent)","--table-border":"color-mix(in srgb, var(--theme-content3) 30%, transparent)"},isHeaderSticky:!0,isCompact:P,children:[e.jsx(yt,{columns:xe,children:t=>e.jsx(wt,{align:t.uid==="actions"||t.uid==="sl"?"center":"start",width:t.width,minWidth:t.minWidth,className:`backdrop-blur-md ${t.uid==="employee"?"whitespace-nowrap":""}`,style:{backgroundColor:"color-mix(in srgb, var(--theme-content2) 60%, transparent)",color:"var(--theme-foreground)",borderBottom:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)"},children:t.name},t.uid)}),e.jsx(bt,{items:w||[],emptyContent:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Ve,{className:"w-12 h-12 mb-4 opacity-40",style:{color:"var(--theme-foreground)"}}),e.jsx("h6",{className:"text-lg font-semibold mb-2",style:{color:"var(--theme-foreground)"},children:"No employees found"}),e.jsx("p",{className:"text-sm opacity-70",style:{color:"var(--theme-foreground)"},children:"Try adjusting your search or filter criteria"})]}),loadingContent:e.jsx(J,{}),isLoading:L,children:(t,a)=>{const c=w?w.findIndex(i=>i.id===t.id):a;return e.jsx(vt,{className:"transition-all duration-200",style:{color:"var(--theme-foreground)",borderBottom:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)"},children:i=>e.jsx(jt,{className:"transition-all duration-300",children:e.jsx("div",{className:"transition-all duration-200",children:pe(t,i,c)})})},t.id)}})]})}),ge(),e.jsx(zt,{open:se,onClose:he,employee:z,onConfirm:De,loading:A}),e.jsx(Ut,{isOpen:C.isOpen,onClose:Me,employee:C.employee,onImageUpdate:Ae})]})},Vt=({title:w,departments:m,designations:s,attendanceTypes:f})=>{var xe,pe,ge,t,a,c,i,u,v,p,y,U,$,ne,Q,ue;const[j,M]=n.useState(!1),[P,O]=n.useState(!1),[h,T]=n.useState(!1),[V,me]=n.useState(!1);n.useEffect(()=>{const r=()=>{M(window.innerWidth<640),O(window.innerWidth<768),T(window.innerWidth>=1025),me(window.innerWidth>=641&&window.innerWidth<=1024)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const[L,N]=n.useState([]),[S,re]=n.useState([]),[ae,G]=n.useState(!0),[H,q]=n.useState(0),[Pe,se]=n.useState(1),[b,z]=n.useState({search:"",department:"all",designation:"all",attendanceType:"all"}),[D,A]=n.useState("table"),[k,C]=n.useState(!1),[x,_]=n.useState({currentPage:1,perPage:10,total:0}),g=()=>{var E;if(typeof window>"u")return"lg";const l=((E=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:E.trim())||"12px",I=parseInt(l);return I===0?"none":I<=4?"sm":I<=8?"md":I<=16?"lg":"full"},[d,K]=n.useState({overview:{total_employees:0,active_employees:0,inactive_employees:0,total_departments:0,total_designations:0,total_attendance_types:0},distribution:{by_department:[],by_designation:[],by_attendance_type:[]},hiring_trends:{recent_hires:{last_30_days:0,last_90_days:0,last_year:0},monthly_growth_rate:0,current_month_hires:0},workforce_health:{status_ratio:{active_percentage:0,inactive_percentage:0,retention_rate:0},retention_rate:0,turnover_rate:0},quick_metrics:{headcount:0,active_ratio:0,department_diversity:0,role_diversity:0,recent_activity:0}}),ee=n.useCallback(async()=>{G(!0);try{const{data:r}=await Z.get(route("employees.paginate"),{params:{page:x.currentPage,perPage:x.perPage,search:b.search,department:b.department,designation:b.designation,attendanceType:b.attendanceType}});N(r.employees.data),q(r.employees.total),se(r.employees.last_page),_(l=>({...l,total:r.employees.total})),r.allManagers&&re(r.allManagers),r.stats&&K(r.stats)}catch(r){console.error("Error fetching employees:",r),B.error("Failed to load employees. Please try again.")}finally{G(!1)}},[x.currentPage,x.perPage,b]),te=n.useCallback(async()=>{try{const{data:r}=await Z.get(route("employees.stats"));r.stats&&K(r.stats)}catch(r){console.error("Error fetching employee stats:",r)}},[]);n.useEffect(()=>{ee(),te()},[ee,te]);const Ce=n.useCallback(r=>{z(l=>({...l,search:r})),_(l=>({...l,currentPage:1}))},[]),Re=n.useCallback(r=>{z(l=>({...l,department:r,designation:r!=="all"?"all":l.designation})),_(l=>({...l,currentPage:1}))},[]),Se=n.useCallback(r=>{z(l=>({...l,designation:r})),_(l=>({...l,currentPage:1}))},[]),De=n.useCallback(r=>{z(l=>({...l,attendanceType:r})),_(l=>({...l,currentPage:1}))},[]),he=n.useCallback(r=>{_(l=>({...l,currentPage:r}))},[]),Ee=n.useCallback(r=>{_(l=>({...l,perPage:r,currentPage:1}))},[]),Me=n.useCallback((r,l)=>{N(I=>I.map(E=>E.id===r?{...E,...l}:E))},[]),Ae=n.useCallback(r=>{N(l=>l.filter(I=>I.id!==r)),q(l=>l-1),_(l=>({...l,total:l.total-1})),te()},[te]),Y=n.useMemo(()=>b.department==="all"?s:s.filter(r=>r.department_id===parseInt(b.department)),[s,b.department]),Ie=n.useMemo(()=>{var r,l,I,E,o,F,W,le,Be,Ze,Oe;return[{title:"Total Employees",value:((r=d.overview)==null?void 0:r.total_employees)||0,icon:e.jsx(je,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Headcount"},{title:"Active Employees",value:((l=d.overview)==null?void 0:l.active_employees)||0,icon:e.jsx(Je,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((E=(I=d.workforce_health)==null?void 0:I.status_ratio)==null?void 0:E.active_percentage)||0}% Active`},{title:"Departments",value:((o=d.overview)==null?void 0:o.total_departments)||0,icon:e.jsx(oe,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Department Diversity"},{title:"Designations",value:((F=d.overview)==null?void 0:F.total_designations)||0,icon:e.jsx(ce,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Role Diversity"},{title:"Retention Rate",value:`${((W=d.workforce_health)==null?void 0:W.retention_rate)||0}%`,icon:e.jsx(_t,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Employee Retention"},{title:"Recent Hires",value:((Be=(le=d.hiring_trends)==null?void 0:le.recent_hires)==null?void 0:Be.last_30_days)||0,icon:e.jsx(He,{}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 Days"},{title:"Growth Rate",value:`${((Ze=d.hiring_trends)==null?void 0:Ze.monthly_growth_rate)||0}%`,icon:e.jsx(kt,{}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Monthly Growth"},{title:"Attendance Types",value:((Oe=d.overview)==null?void 0:Oe.total_attendance_types)||0,icon:e.jsx(ke,{}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Available Types"}]},[d]),$e=({user:r,index:l})=>{const I=m==null?void 0:m.find(F=>F.id===r.department_id),E=s==null?void 0:s.find(F=>F.id===r.designation_id),o=f==null?void 0:f.find(F=>F.id===r.attendance_type_id);return e.jsx(we,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>Te.visit(route("profile",{user:r.id})),children:e.jsxs(Ne,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(Ue,{src:(r==null?void 0:r.profile_image_url)||(r==null?void 0:r.profile_image),name:r==null?void 0:r.name,size:"md",fallback:e.jsx(Ve,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-semibold text-foreground text-left text-sm",children:r==null?void 0:r.name}),e.jsxs("span",{className:"text-default-500 text-left text-xs",children:["ID: ",(r==null?void 0:r.employee_id)||"N/A"]})]}),e.jsx("div",{className:"flex-1 min-w-0 flex justify-end",children:e.jsx(R,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:F=>{F.stopPropagation(),Te.visit(route("profile",{user:r.id}))},children:e.jsx(Xe,{className:"w-4 h-4"})})})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-3",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ze,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs truncate",children:r==null?void 0:r.email})]}),(r==null?void 0:r.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Le,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs",children:r==null?void 0:r.phone})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[I&&e.jsx(X,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e.jsx(oe,{className:"w-3 h-3"}),children:I.name}),E&&e.jsx(X,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e.jsx(ce,{className:"w-3 h-3"}),children:E.title}),o&&e.jsx(X,{size:"sm",variant:"bordered",className:"text-xs",startContent:e.jsx(ke,{className:"w-3 h-3"}),children:o.name})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(at,{title:w||"Employee Directory"}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Employee Directory Management",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(we,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(Ke,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${h?"p-6":V?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                              ${h?"p-3":V?"p-2.5":"p-2"} 
                              rounded-xl flex items-center justify-center
                            `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(je,{className:`
                                ${h?"w-8 h-8":V?"w-6 h-6":"w-5 h-5"}
                              `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                ${h?"text-2xl":V?"text-xl":"text-lg"}
                                font-bold text-foreground
                                ${h?"":"truncate"}
                              `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Directory"}),e.jsx("p",{className:`
                                ${h?"text-sm":"text-xs"} 
                                text-default-500
                                ${h?"":"truncate"}
                              `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage employee information and organizational structure"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(R,{className:"text-white font-medium",style:{background:"linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary) 80%, var(--theme-secondary)))",borderRadius:g()},startContent:e.jsx(He,{className:"w-4 h-4"}),children:j?"Add":"Add Employee"})})]})})})}),e.jsxs(Ne,{className:"p-6",children:[e.jsx(mt,{stats:Ie,className:"mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"p-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:g(),backdropFilter:"blur(16px)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--theme-foreground)"},children:"Department Distribution"}),e.jsx("div",{className:"space-y-3",children:(pe=(xe=d.distribution)==null?void 0:xe.by_department)==null?void 0:pe.slice(0,5).map((r,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 rounded-full overflow-hidden",style:{background:"color-mix(in srgb, var(--theme-content3) 40%, transparent)"},children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${r.percentage}%`,background:"linear-gradient(90deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary) 80%, var(--theme-secondary)))"}})}),e.jsx("span",{className:"text-xs w-8 opacity-70",style:{color:"var(--theme-foreground)"},children:r.count})]})]},l))})]}),e.jsxs("div",{className:"p-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:g(),backdropFilter:"blur(16px)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--theme-foreground)"},children:"Hiring Trends"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:"Last 30 Days"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--theme-foreground)"},children:((t=(ge=d.hiring_trends)==null?void 0:ge.recent_hires)==null?void 0:t.last_30_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:"Last 90 Days"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--theme-foreground)"},children:((c=(a=d.hiring_trends)==null?void 0:a.recent_hires)==null?void 0:c.last_90_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"This Year"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((u=(i=d.hiring_trends)==null?void 0:i.recent_hires)==null?void 0:u.last_year)||0})]}),e.jsx("div",{className:"pt-2 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Monthly Growth"}),e.jsxs("span",{className:`text-sm font-medium ${(((v=d.hiring_trends)==null?void 0:v.monthly_growth_rate)||0)>=0?"text-green-400":"text-red-400"}`,children:[((p=d.hiring_trends)==null?void 0:p.monthly_growth_rate)||0,"%"]})]})})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Workforce Health"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Retention Rate"}),e.jsxs("span",{className:"text-sm font-medium text-green-400",children:[((y=d.workforce_health)==null?void 0:y.retention_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Turnover Rate"}),e.jsxs("span",{className:"text-sm font-medium text-orange-400",children:[((U=d.workforce_health)==null?void 0:U.turnover_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Active Employees"}),e.jsxs("span",{className:"text-sm font-medium text-blue-400",children:[((ne=($=d.workforce_health)==null?void 0:$.status_ratio)==null?void 0:ne.active_percentage)||0,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Attendance Types"}),e.jsx("div",{className:"space-y-3",children:(ue=(Q=d.distribution)==null?void 0:Q.by_attendance_type)==null?void 0:ue.map((r,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-linear-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${r.percentage}%`}})}),e.jsx("span",{className:"text-xs text-default-500 w-8",children:r.count})]})]},l))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Rt,{label:"Search Employees",placeholder:"Search by name, email, or employee ID...",value:b.search,onChange:r=>Ce(r.target.value),startContent:e.jsx(Ft,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:g(),classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Search employees"})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(St,{variant:"bordered",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:g()},children:[e.jsxs(R,{isIconOnly:j,color:D==="table"?"primary":"default",onPress:()=>A("table"),style:{background:D==="table"?"var(--theme-primary)":"transparent",color:D==="table"?"white":"var(--theme-foreground)"},children:[e.jsx(Pt,{className:"w-4 h-4"}),!j&&e.jsx("span",{className:"ml-1",children:"Table"})]}),e.jsxs(R,{isIconOnly:j,color:D==="grid"?"primary":"default",onPress:()=>A("grid"),style:{background:D==="grid"?"var(--theme-primary)":"transparent",color:D==="grid"?"white":"var(--theme-foreground)"},children:[e.jsx(ct,{className:"w-4 h-4"}),!j&&e.jsx("span",{className:"ml-1",children:"Grid"})]})]}),e.jsx(R,{isIconOnly:!0,variant:"bordered",onPress:()=>C(!k),style:{background:k?"color-mix(in srgb, var(--theme-primary) 20%, transparent)":"color-mix(in srgb, var(--theme-content2) 30%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",color:k?"var(--theme-primary)":"var(--theme-foreground)",borderRadius:g()},children:e.jsx(Ct,{className:"w-4 h-4"})})]})]}),k&&e.jsx(qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-4",children:e.jsxs("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:g(),backdropFilter:"blur(16px)"},children:[e.jsx(Fe,{label:"Department",placeholder:"All Departments",selectedKeys:b.department!=="all"?[b.department]:[],onSelectionChange:r=>{const l=Array.from(r)[0];Re(l||"all")},variant:"bordered",size:"sm",radius:g(),startContent:e.jsx(oe,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:m==null?void 0:m.map(r=>e.jsx(de,{textValue:r.name,children:r.name},String(r.id)))}),e.jsx(Fe,{label:"Designation",placeholder:"All Designations",selectedKeys:b.designation!=="all"?[b.designation]:[],onSelectionChange:r=>{const l=Array.from(r)[0];Se(l||"all")},variant:"bordered",size:"sm",radius:g(),isDisabled:b.department==="all",startContent:e.jsx(ce,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:Y==null?void 0:Y.map(r=>e.jsx(de,{textValue:r.title,children:r.title},String(r.id)))}),e.jsx(Fe,{label:"Attendance Type",placeholder:"All Attendance Types",selectedKeys:b.attendanceType!=="all"?[b.attendanceType]:[],onSelectionChange:r=>{const l=Array.from(r)[0];De(l||"all")},variant:"bordered",size:"sm",radius:g(),startContent:e.jsx(ke,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:f==null?void 0:f.map(r=>e.jsx(de,{textValue:r.name,children:r.name},String(r.id)))}),e.jsx("div",{className:"flex items-end",children:e.jsx(R,{variant:"flat",size:"sm",className:"w-full",onPress:()=>{z({search:"",department:"all",designation:"all",attendanceType:"all"}),_(r=>({...r,currentPage:1}))},isDisabled:b.search===""&&b.department==="all"&&b.designation==="all"&&b.attendanceType==="all",style:{background:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",color:"var(--theme-danger)",borderRadius:g()},children:"Clear Filters"})})]})})]}),e.jsxs(we,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                      var(--theme-content1, #FAFAFA) 20%, 
                      var(--theme-content2, #F4F4F5) 10%, 
                      var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(Ke,{className:"border-b pb-2",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)"},children:e.jsx(je,{className:"w-6 h-6",style:{color:"var(--theme-primary)"}})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Directory"})]})}),e.jsx(Ne,{children:e.jsx("div",{className:"max-h-[84vh] overflow-y-auto",children:ae?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{size:"lg",color:"primary"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading employees data..."})]}):D==="table"?e.jsx(Wt,{allUsers:L,allManagers:S,departments:m,designations:s,attendanceTypes:f,setUsers:N,isMobile:j,isTablet:P,pagination:x,onPageChange:he,onRowsPerPageChange:Ee,totalUsers:H,loading:ae,updateEmployeeOptimized:Me,deleteEmployeeOptimized:Ae}):e.jsxs("div",{className:"p-4",children:[L.length>0?e.jsx("div",{className:`grid gap-4 ${j?"grid-cols-1":P?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:L.map((r,l)=>e.jsx($e,{user:r,index:l},r.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(je,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e.jsx("p",{className:"text-base text-default-500",children:"No employees found"}),e.jsx("p",{className:"text-sm text-default-500",children:"Try adjusting your search or filters"})]}),L.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2",style:{borderTop:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",backdropFilter:"blur(16px)"},children:[e.jsxs("span",{className:"text-xs mb-3 sm:mb-0 opacity-70",style:{color:"var(--theme-foreground)"},children:["Showing ",(x.currentPage-1)*x.perPage+1," to ",Math.min(x.currentPage*x.perPage,x.total)," of ",x.total," employees"]}),e.jsx(et,{total:Math.ceil(x.total/x.perPage),initialPage:x.currentPage,page:x.currentPage,onChange:he,size:j?"sm":"md",variant:"bordered",showControls:!0,style:{"--pagination-item-bg":"color-mix(in srgb, var(--theme-content2) 50%, transparent)","--pagination-item-border":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}})]})]})})})]})]})]})})})})})]})};Vt.layout=w=>e.jsx(dt,{children:w});export{Vt as default};
