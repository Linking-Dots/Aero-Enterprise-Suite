import{e as _e,R as Ie,j as e,b as G,F as de,c as H,d as Z,g as fe,r as E,L as Pe,a as pe,Q as We,A as Ae}from"./app-BKviuaq4.js";import{u as te,j as re,g as he,v as ne,k as xe,n as ye,h as Ce,x as Me,y as Ye,z as ze,B as Be,e as Te,s as Le,l as be,A as Ve}from"./App-bWaIDeMl.js";import{F as J,a as ge,r as ve,c as Qe,D as qe,b as Ue,d as He,u as T,w as Ze}from"./xlsx-Rug5yupA.js";import{F as ie}from"./ClockIcon-BS6ciKpG.js";import{F as je}from"./CheckCircleIcon-BdmWU-8W.js";import{F as V}from"./ChartBarIcon-Gnb6Tv0d.js";import{F as ue}from"./CheckCircleIcon-D--loFGL.js";import{F as Ge}from"./ExclamationTriangleIcon-CAe_YbIh.js";import{c as A,t as Je,a as Xe,b as Ke}from"./chunk-F3UDT23P-DQvsp_AR.js";import{p as X}from"./chunk-XVMALT6H-HBxP5FCL.js";import{c as le,B as q}from"./react-toastify.esm-D1wkWoxc.js";import{t as et}from"./chunk-YRZGWF2W-Bu6AyDY9.js";import{t as tt}from"./chunk-TSPNSPCL-Rgv1bXhR.js";import{s as K}from"./chunk-TLYTI3QM-DbXflhxS.js";import{S as rt}from"./StatsCards-BOVmoCAf.js";import{r as Ne}from"./chunk-IRK6BJWJ-CpTxAEm_.js";import{c as st}from"./chunk-XJ2YRSUP-Dvh7f2ra.js";import{F as at}from"./InformationCircleIcon-CFAWceuq.js";import{m as nt}from"./chunk-O5MCAK4F-4SE_fpvO.js";import{d as I}from"./dayjs.min-KCvrFo1M.js";import{i as it}from"./isBetween-s_QSlGcQ.js";import{F as lt}from"./DocumentArrowDownIcon-JgC9gY94.js";import{m as we}from"./proxy-C-Dyuo4b.js";import{F as ot}from"./FunnelIcon-pKvuRr_e.js";import{F as ct}from"./AdjustmentsHorizontalIcon-T4RJ0rsv.js";import{b as dt}from"./chunk-57V4RE7B-BM6cyEBz.js";import{i as Fe}from"./chunk-SSA7SXE4-DJb6g2q8.js";import"./EnvelopeIcon-dMmSMKng.js";import"./UserIcon-9UImPXWy.js";import"./ShieldCheckIcon-DFIjpe0y.js";import"./KeyIcon-pm5aDH1r.js";import"./logo-NelKEGxq.js";import"./features-animation-LoACrkjm.js";import"./create-visual-element-D348Q6so.js";import"./createLucideIcon-DUNB04Kv.js";import"./useProgressBar-BK1Jw4md.js";import"./NumberFormatter-DNR9MAW-.js";import"./useToggleState-CqFN5XPj.js";import"./index-D-1-jIXv.js";function P(){return P=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(i[a]=r[a])}return i},P.apply(null,arguments)}var mt=String.prototype.replace,ut=/%20/g,ft="RFC3986",U={default:ft,formatters:{RFC1738:function(i){return mt.call(i,ut,"+")},RFC3986:function(i){return String(i)}},RFC1738:"RFC1738"},oe=Object.prototype.hasOwnProperty,L=Array.isArray,M=function(){for(var i=[],t=0;t<256;++t)i.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return i}(),ke=function(i,t){for(var r=t&&t.plainObjects?Object.create(null):{},a=0;a<i.length;++a)i[a]!==void 0&&(r[a]=i[a]);return r},z={arrayToObject:ke,assign:function(i,t){return Object.keys(t).reduce(function(r,a){return r[a]=t[a],r},i)},combine:function(i,t){return[].concat(i,t)},compact:function(i){for(var t=[{obj:{o:i},prop:"o"}],r=[],a=0;a<t.length;++a)for(var c=t[a],o=c.obj[c.prop],n=Object.keys(o),m=0;m<n.length;++m){var d=n[m],x=o[d];typeof x=="object"&&x!==null&&r.indexOf(x)===-1&&(t.push({obj:o,prop:d}),r.push(x))}return function(g){for(;g.length>1;){var h=g.pop(),v=h.obj[h.prop];if(L(v)){for(var u=[],s=0;s<v.length;++s)v[s]!==void 0&&u.push(v[s]);h.obj[h.prop]=u}}}(t),i},decode:function(i,t,r){var a=i.replace(/\+/g," ");if(r==="iso-8859-1")return a.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(a)}catch{return a}},encode:function(i,t,r,a,c){if(i.length===0)return i;var o=i;if(typeof i=="symbol"?o=Symbol.prototype.toString.call(i):typeof i!="string"&&(o=String(i)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(x){return"%26%23"+parseInt(x.slice(2),16)+"%3B"});for(var n="",m=0;m<o.length;++m){var d=o.charCodeAt(m);d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||c===U.RFC1738&&(d===40||d===41)?n+=o.charAt(m):d<128?n+=M[d]:d<2048?n+=M[192|d>>6]+M[128|63&d]:d<55296||d>=57344?n+=M[224|d>>12]+M[128|d>>6&63]+M[128|63&d]:(d=65536+((1023&d)<<10|1023&o.charCodeAt(m+=1)),n+=M[240|d>>18]+M[128|d>>12&63]+M[128|d>>6&63]+M[128|63&d])}return n},isBuffer:function(i){return!(!i||typeof i!="object"||!(i.constructor&&i.constructor.isBuffer&&i.constructor.isBuffer(i)))},isRegExp:function(i){return Object.prototype.toString.call(i)==="[object RegExp]"},maybeMap:function(i,t){if(L(i)){for(var r=[],a=0;a<i.length;a+=1)r.push(t(i[a]));return r}return t(i)},merge:function i(t,r,a){if(!r)return t;if(typeof r!="object"){if(L(t))t.push(r);else{if(!t||typeof t!="object")return[t,r];(a&&(a.plainObjects||a.allowPrototypes)||!oe.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||typeof t!="object")return[t].concat(r);var c=t;return L(t)&&!L(r)&&(c=ke(t,a)),L(t)&&L(r)?(r.forEach(function(o,n){if(oe.call(t,n)){var m=t[n];m&&typeof m=="object"&&o&&typeof o=="object"?t[n]=i(m,o,a):t.push(o)}else t[n]=o}),t):Object.keys(r).reduce(function(o,n){var m=r[n];return o[n]=oe.call(o,n)?i(o[n],m,a):m,o},c)}},pt=Object.prototype.hasOwnProperty,Se={brackets:function(i){return i+"[]"},comma:"comma",indices:function(i,t){return i+"["+t+"]"},repeat:function(i){return i}},Q=Array.isArray,ht=String.prototype.split,xt=Array.prototype.push,Oe=function(i,t){xt.apply(i,Q(t)?t:[t])},yt=Date.prototype.toISOString,De=U.default,C={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:z.encode,encodeValuesOnly:!1,format:De,formatter:U.formatters[De],indices:!1,serializeDate:function(i){return yt.call(i)},skipNulls:!1,strictNullHandling:!1},bt=function i(t,r,a,c,o,n,m,d,x,g,h,v,u,s){var p,f=t;if(typeof m=="function"?f=m(r,f):f instanceof Date?f=g(f):a==="comma"&&Q(f)&&(f=z.maybeMap(f,function(y){return y instanceof Date?g(y):y})),f===null){if(c)return n&&!u?n(r,C.encoder,s,"key",h):r;f=""}if(typeof(p=f)=="string"||typeof p=="number"||typeof p=="boolean"||typeof p=="symbol"||typeof p=="bigint"||z.isBuffer(f)){if(n){var l=u?r:n(r,C.encoder,s,"key",h);if(a==="comma"&&u){for(var b=ht.call(String(f),","),j="",k=0;k<b.length;++k)j+=(k===0?"":",")+v(n(b[k],C.encoder,s,"value",h));return[v(l)+"="+j]}return[v(l)+"="+v(n(f,C.encoder,s,"value",h))]}return[v(r)+"="+v(String(f))]}var w,F=[];if(f===void 0)return F;if(a==="comma"&&Q(f))w=[{value:f.length>0?f.join(",")||null:void 0}];else if(Q(m))w=m;else{var _=Object.keys(f);w=d?_.sort(d):_}for(var W=0;W<w.length;++W){var S=w[W],$=typeof S=="object"&&S.value!==void 0?S.value:f[S];if(!o||$!==null){var ae=Q(f)?typeof a=="function"?a(r,S):r:r+(x?"."+S:"["+S+"]");Oe(F,i($,ae,a,c,o,n,m,d,x,g,h,v,u,s))}}return F},me=Object.prototype.hasOwnProperty,gt=Array.isArray,ee={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:z.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},vt=function(i){return i.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},Ee=function(i,t){return i&&typeof i=="string"&&t.comma&&i.indexOf(",")>-1?i.split(","):i},jt=function(i,t,r,a){if(i){var c=r.allowDots?i.replace(/\.([^.[]+)/g,"[$1]"):i,o=/(\[[^[\]]*])/g,n=r.depth>0&&/(\[[^[\]]*])/.exec(c),m=n?c.slice(0,n.index):c,d=[];if(m){if(!r.plainObjects&&me.call(Object.prototype,m)&&!r.allowPrototypes)return;d.push(m)}for(var x=0;r.depth>0&&(n=o.exec(c))!==null&&x<r.depth;){if(x+=1,!r.plainObjects&&me.call(Object.prototype,n[1].slice(1,-1))&&!r.allowPrototypes)return;d.push(n[1])}return n&&d.push("["+c.slice(n.index)+"]"),function(g,h,v,u){for(var s=u?h:Ee(h,v),p=g.length-1;p>=0;--p){var f,l=g[p];if(l==="[]"&&v.parseArrays)f=[].concat(s);else{f=v.plainObjects?Object.create(null):{};var b=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,j=parseInt(b,10);v.parseArrays||b!==""?!isNaN(j)&&l!==b&&String(j)===b&&j>=0&&v.parseArrays&&j<=v.arrayLimit?(f=[])[j]=s:b!=="__proto__"&&(f[b]=s):f={0:s}}s=f}return s}(d,t,r,a)}},Nt=function(i,t){var r=function(x){return ee}();if(i===""||i==null)return r.plainObjects?Object.create(null):{};for(var a=typeof i=="string"?function(x,g){var h,v={},u=(g.ignoreQueryPrefix?x.replace(/^\?/,""):x).split(g.delimiter,g.parameterLimit===1/0?void 0:g.parameterLimit),s=-1,p=g.charset;if(g.charsetSentinel)for(h=0;h<u.length;++h)u[h].indexOf("utf8=")===0&&(u[h]==="utf8=%E2%9C%93"?p="utf-8":u[h]==="utf8=%26%2310003%3B"&&(p="iso-8859-1"),s=h,h=u.length);for(h=0;h<u.length;++h)if(h!==s){var f,l,b=u[h],j=b.indexOf("]="),k=j===-1?b.indexOf("="):j+1;k===-1?(f=g.decoder(b,ee.decoder,p,"key"),l=g.strictNullHandling?null:""):(f=g.decoder(b.slice(0,k),ee.decoder,p,"key"),l=z.maybeMap(Ee(b.slice(k+1),g),function(w){return g.decoder(w,ee.decoder,p,"value")})),l&&g.interpretNumericEntities&&p==="iso-8859-1"&&(l=vt(l)),b.indexOf("[]=")>-1&&(l=gt(l)?[l]:l),v[f]=me.call(v,f)?z.combine(v[f],l):l}return v}(i,r):i,c=r.plainObjects?Object.create(null):{},o=Object.keys(a),n=0;n<o.length;++n){var m=o[n],d=jt(m,a[m],r,typeof i=="string");c=z.merge(c,d,r)}return z.compact(c)};class ce{constructor(t,r,a){var c,o;this.name=t,this.definition=r,this.bindings=(c=r.bindings)!=null?c:{},this.wheres=(o=r.wheres)!=null?o:{},this.config=a}get template(){const t=`${this.origin}/${this.definition.uri}`.replace(/\/+$/,"");return t===""?"/":t}get origin(){return this.config.absolute?this.definition.domain?`${this.config.url.match(/^\w+:\/\//)[0]}${this.definition.domain}${this.config.port?`:${this.config.port}`:""}`:this.config.url:""}get parameterSegments(){var t,r;return(t=(r=this.template.match(/{[^}?]+\??}/g))==null?void 0:r.map(a=>({name:a.replace(/{|\??}/g,""),required:!/\?}$/.test(a)})))!=null?t:[]}matchesUrl(t){var r;if(!this.definition.methods.includes("GET"))return!1;const a=this.template.replace(/[.*+$()[\]]/g,"\\$&").replace(/(\/?){([^}?]*)(\??)}/g,(m,d,x,g)=>{var h;const v=`(?<${x}>${((h=this.wheres[x])==null?void 0:h.replace(/(^\^)|(\$$)/g,""))||"[^/?]+"})`;return g?`(${d}${v})?`:`${d}${v}`}).replace(/^\w+:\/\//,""),[c,o]=t.replace(/^\w+:\/\//,"").split("?"),n=(r=new RegExp(`^${a}/?$`).exec(c))!=null?r:new RegExp(`^${a}/?$`).exec(decodeURI(c));if(n){for(const m in n.groups)n.groups[m]=typeof n.groups[m]=="string"?decodeURIComponent(n.groups[m]):n.groups[m];return{params:n.groups,query:Nt(o)}}return!1}compile(t){return this.parameterSegments.length?this.template.replace(/{([^}?]+)(\??)}/g,(r,a,c)=>{var o,n;if(!c&&[null,void 0].includes(t[a]))throw new Error(`Ziggy error: '${a}' parameter is required for route '${this.name}'.`);if(this.wheres[a]&&!new RegExp(`^${c?`(${this.wheres[a]})?`:this.wheres[a]}$`).test((n=t[a])!=null?n:""))throw new Error(`Ziggy error: '${a}' parameter '${t[a]}' does not match required format '${this.wheres[a]}' for route '${this.name}'.`);return encodeURI((o=t[a])!=null?o:"").replace(/%7C/g,"|").replace(/%25/g,"%").replace(/\$/g,"%24")}).replace(this.config.absolute?/(\.[^/]+?)(\/\/)/:/(^)(\/\/)/,"$1/").replace(/\/+$/,""):this.template}}class wt extends String{constructor(t,r,a=!0,c){if(super(),this.t=c??(typeof Ziggy<"u"?Ziggy:globalThis==null?void 0:globalThis.Ziggy),this.t=P({},this.t,{absolute:a}),t){if(!this.t.routes[t])throw new Error(`Ziggy error: route '${t}' is not in the route list.`);this.i=new ce(t,this.t.routes[t],this.t),this.u=this.l(r)}}toString(){const t=Object.keys(this.u).filter(r=>!this.i.parameterSegments.some(({name:a})=>a===r)).filter(r=>r!=="_query").reduce((r,a)=>P({},r,{[a]:this.u[a]}),{});return this.i.compile(this.u)+function(r,a){var c,o=r,n=function(u){if(!u)return C;if(u.encoder!=null&&typeof u.encoder!="function")throw new TypeError("Encoder has to be a function.");var s=u.charset||C.charset;if(u.charset!==void 0&&u.charset!=="utf-8"&&u.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var p=U.default;if(u.format!==void 0){if(!pt.call(U.formatters,u.format))throw new TypeError("Unknown format option provided.");p=u.format}var f=U.formatters[p],l=C.filter;return(typeof u.filter=="function"||Q(u.filter))&&(l=u.filter),{addQueryPrefix:typeof u.addQueryPrefix=="boolean"?u.addQueryPrefix:C.addQueryPrefix,allowDots:u.allowDots===void 0?C.allowDots:!!u.allowDots,charset:s,charsetSentinel:typeof u.charsetSentinel=="boolean"?u.charsetSentinel:C.charsetSentinel,delimiter:u.delimiter===void 0?C.delimiter:u.delimiter,encode:typeof u.encode=="boolean"?u.encode:C.encode,encoder:typeof u.encoder=="function"?u.encoder:C.encoder,encodeValuesOnly:typeof u.encodeValuesOnly=="boolean"?u.encodeValuesOnly:C.encodeValuesOnly,filter:l,format:p,formatter:f,serializeDate:typeof u.serializeDate=="function"?u.serializeDate:C.serializeDate,skipNulls:typeof u.skipNulls=="boolean"?u.skipNulls:C.skipNulls,sort:typeof u.sort=="function"?u.sort:null,strictNullHandling:typeof u.strictNullHandling=="boolean"?u.strictNullHandling:C.strictNullHandling}}(a);typeof n.filter=="function"?o=(0,n.filter)("",o):Q(n.filter)&&(c=n.filter);var m=[];if(typeof o!="object"||o===null)return"";var d=Se[a&&a.arrayFormat in Se?a.arrayFormat:a&&"indices"in a?a.indices?"indices":"repeat":"indices"];c||(c=Object.keys(o)),n.sort&&c.sort(n.sort);for(var x=0;x<c.length;++x){var g=c[x];n.skipNulls&&o[g]===null||Oe(m,bt(o[g],g,d,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset))}var h=m.join(n.delimiter),v=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(v+=n.charset==="iso-8859-1"?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),h.length>0?v+h:""}(P({},t,this.u._query),{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:(r,a)=>typeof r=="boolean"?Number(r):a(r)})}p(t){t?this.t.absolute&&t.startsWith("/")&&(t=this.h().host+t):t=this.v();let r={};const[a,c]=Object.entries(this.t.routes).find(([o,n])=>r=new ce(o,n,this.t).matchesUrl(t))||[void 0,void 0];return P({name:a},r,{route:c})}v(){const{host:t,pathname:r,search:a}=this.h();return(this.t.absolute?t+r:r.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+a}current(t,r){const{name:a,params:c,query:o,route:n}=this.p();if(!t)return a;const m=new RegExp(`^${t.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(a);if([null,void 0].includes(r)||!m)return m;const d=new ce(a,n,this.t);r=this.l(r,d);const x=P({},c,o);if(Object.values(r).every(h=>!h)&&!Object.values(x).some(h=>h!==void 0))return!0;const g=(h,v)=>Object.entries(h).every(([u,s])=>Array.isArray(s)&&Array.isArray(v[u])?s.every(p=>v[u].includes(p)):typeof s=="object"&&typeof v[u]=="object"&&s!==null&&v[u]!==null?g(s,v[u]):v[u]==s);return g(r,x)}h(){var t,r,a,c,o,n;const{host:m="",pathname:d="",search:x=""}=typeof window<"u"?window.location:{};return{host:(t=(r=this.t.location)==null?void 0:r.host)!=null?t:m,pathname:(a=(c=this.t.location)==null?void 0:c.pathname)!=null?a:d,search:(o=(n=this.t.location)==null?void 0:n.search)!=null?o:x}}get params(){const{params:t,query:r}=this.p();return P({},t,r)}get routeParams(){return this.p().params}get queryParams(){return this.p().query}has(t){return this.t.routes.hasOwnProperty(t)}l(t={},r=this.i){t!=null||(t={}),t=["string","number"].includes(typeof t)?[t]:t;const a=r.parameterSegments.filter(({name:c})=>!this.t.defaults[c]);return Array.isArray(t)?t=t.reduce((c,o,n)=>P({},c,a[n]?{[a[n].name]:o}:typeof o=="object"?o:{[o]:""}),{}):a.length!==1||t[a[0].name]||!t.hasOwnProperty(Object.values(r.bindings)[0])&&!t.hasOwnProperty("id")||(t={[a[0].name]:t}),P({},this.m(r),this.j(t,r))}m(t){return t.parameterSegments.filter(({name:r})=>this.t.defaults[r]).reduce((r,{name:a},c)=>P({},r,{[a]:this.t.defaults[a]}),{})}j(t,{bindings:r,parameterSegments:a}){return Object.entries(t).reduce((c,[o,n])=>{if(!n||typeof n!="object"||Array.isArray(n)||!a.some(({name:m})=>m===o))return P({},c,{[o]:n});if(!n.hasOwnProperty(r[o])){if(!n.hasOwnProperty("id"))throw new Error(`Ziggy error: object passed as '${o}' parameter is missing route model binding key '${r[o]}'.`);r[o]="id"}return P({},c,{[o]:n[r[o]]})},{})}valueOf(){return this.toString()}}function Re(i,t,r,a){const c=new wt(i,t,r,a);return i?c.toString():c}const Ft=({filteredData:i,onRefresh:t,loading:r=!1})=>{const{theme:a}=_e(),c=te("(max-width: 1024px)"),o=()=>{var p;if(typeof window>"u")return"lg";const s=parseInt(((p=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:p.trim())||"12");return s===0?"none":s<=4?"sm":s<=8?"md":s<=16?"lg":"full"},n=()=>e.jsxs("div",{className:"max-h-[84vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[e.jsx(K,{className:"w-32 h-6 rounded"}),e.jsx(K,{className:"w-20 h-8 rounded"})]}),e.jsx(ne,{className:"max-h-[70vh]",children:e.jsxs("div",{className:"border border-divider rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-default-100/80 backdrop-blur-md border-b border-divider",children:e.jsx("div",{className:"flex",children:u.map((s,p)=>e.jsx("div",{className:"flex-1 p-3",children:e.jsx(K,{className:"w-20 h-4 rounded"})},p))})}),e.jsx("div",{className:"divide-y divide-divider",children:Array.from({length:8}).map((s,p)=>e.jsx("div",{className:"flex hover:bg-default-50/50 transition-colors",children:u.map((f,l)=>e.jsx("div",{className:"flex-1 p-3",children:e.jsx(K,{className:"w-full h-4 rounded"})},l))},p))})]})})]}),m=s=>new Date(s).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}),d=s=>s>=100?"success":s>=75?"warning":s>=50?"primary":"danger",x=s=>s>=100?e.jsx(je,{className:"w-3 h-3"}):s>=50?e.jsx(ie,{className:"w-3 h-3"}):e.jsx(Ge,{className:"w-3 h-3"}),g=(s,p)=>{const f="w-3 h-3",l=p>0?"":"text-gray-400";switch(s==null?void 0:s.toLowerCase()){case"embankment":return e.jsx(xe,{className:`${f} text-amber-500 ${l}`});case"structure":return e.jsx(J,{className:`${f} text-blue-500 ${l}`});case"pavement":return e.jsx(ye,{className:`${f} text-gray-500 ${l}`});default:return e.jsx(re,{className:`${f} text-primary ${l}`})}},h=({summary:s})=>{const p=s.totalDailyWorks>0?(s.completed/s.totalDailyWorks*100).toFixed(1):0,f=s.rfiSubmissions>0&&s.completed>0?(s.rfiSubmissions/s.completed*100).toFixed(1):0,l=s.totalDailyWorks-s.completed;return e.jsx(H,{className:"mb-2",shadow:"sm",radius:o(),style:{border:"var(--borderWidth, 1px) solid var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(Z,{className:"p-3",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"flex items-center gap-3 flex-1",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-primary",style:{fontFamily:'var(--fontFamily, "Inter")'},children:m(s.date)}),e.jsxs("span",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[s.totalDailyWorks," total works"]})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(le,{size:"sm",variant:"flat",color:d(parseFloat(p)),startContent:x(parseFloat(p)),radius:o(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:[p,"%"]})})]}),e.jsx(fe,{className:"my-3"}),e.jsxs("div",{className:"space-y-3 mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Completion Progress"}),e.jsxs("span",{className:"text-xs font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[s.completed,"/",s.totalDailyWorks]})]}),e.jsx(X,{value:parseFloat(p),color:d(parseFloat(p)),size:"sm",radius:o(),className:"w-full"})]}),s.rfiSubmissions>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-default-600",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"RFI Submission"}),e.jsxs("span",{className:"text-xs font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[s.rfiSubmissions,"/",s.completed]})]}),e.jsx(X,{value:parseFloat(f),color:d(parseFloat(f)),size:"sm",radius:o(),className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"flex flex-col items-center p-2 bg-white/5 rounded-lg",style:{borderRadius:"var(--borderRadius, 8px)"},children:[g("embankment",s.embankment),e.jsx("span",{className:"text-xs mt-1 text-default-600",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Embankment"}),e.jsx("span",{className:"text-xs font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s.embankment})]}),e.jsxs("div",{className:"flex flex-col items-center p-2 bg-white/5 rounded-lg",style:{borderRadius:"var(--borderRadius, 8px)"},children:[g("structure",s.structure),e.jsx("span",{className:"text-xs mt-1 text-default-600",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Structure"}),e.jsx("span",{className:"text-xs font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s.structure})]}),e.jsxs("div",{className:"flex flex-col items-center p-2 bg-white/5 rounded-lg",style:{borderRadius:"var(--borderRadius, 8px)"},children:[g("pavement",s.pavement),e.jsx("span",{className:"text-xs mt-1 text-default-600",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Pavement"}),e.jsx("span",{className:"text-xs font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:s.pavement})]})]}),e.jsx(fe,{className:"my-3"}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3 text-warning"}),e.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:["Resubmissions: ",s.resubmissions]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"w-3 h-3 text-danger"}),e.jsxs("span",{style:{fontFamily:'var(--fontFamily, "Inter")'},children:["Pending: ",l]})]})]})]})})},v=Ie.useCallback((s,p)=>{const f=s.totalDailyWorks>0?(s.completed/s.totalDailyWorks*100).toFixed(1):0,l=s.rfiSubmissions>0&&s.completed>0?(s.rfiSubmissions/s.completed*100).toFixed(1):0,b=s.totalDailyWorks-s.completed;switch(p){case"date":return e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3 text-default-500"}),e.jsx("span",{className:"text-sm font-medium",children:m(s.date)})]})});case"totalDailyWorks":return e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"w-3 h-3 text-primary"}),e.jsx("span",{className:"text-sm font-bold",children:s.totalDailyWorks})]})});case"resubmissions":return e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3 text-warning"}),e.jsx("span",{className:"text-sm",children:s.resubmissions})]})});case"embankment":case"structure":case"pavement":return e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[g(p,s[p]),e.jsx("span",{className:"text-sm",children:s[p]})]})});case"completed":return e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3 text-success"}),e.jsx("span",{className:"text-sm font-medium text-success",children:s.completed})]})});case"pending":return e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"w-3 h-3 text-danger"}),e.jsx("span",{className:"text-sm font-medium text-danger",children:b})]})});case"completionPercentage":return e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{value:parseFloat(f),color:d(parseFloat(f)),size:"sm",className:"flex-1 min-w-[80px]"}),e.jsxs(le,{size:"sm",variant:"flat",color:d(parseFloat(f)),startContent:x(parseFloat(f)),children:[f,"%"]})]})});case"rfiSubmissions":return e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-3 h-3 text-info"}),e.jsx("span",{className:"text-sm",children:s.rfiSubmissions})]})});case"rfiSubmissionPercentage":return e.jsx(A,{children:e.jsx("div",{className:"flex items-center gap-2",children:s.rfiSubmissions>0?e.jsxs(e.Fragment,{children:[e.jsx(X,{value:parseFloat(l),color:d(parseFloat(l)),size:"sm",className:"flex-1 min-w-[80px]"}),e.jsxs(le,{size:"sm",variant:"flat",color:d(parseFloat(l)),startContent:x(parseFloat(l)),children:[l,"%"]})]}):e.jsx("span",{className:"text-sm text-default-400",children:"-"})})});default:return e.jsx(A,{children:s[p]})}},[]),u=[{name:"Date",uid:"date",icon:he},{name:"Total Daily Works",uid:"totalDailyWorks",icon:re},{name:"Resubmissions",uid:"resubmissions",icon:de},{name:"Embankment",uid:"embankment",icon:xe},{name:"Structure",uid:"structure",icon:J},{name:"Pavement",uid:"pavement",icon:ye},{name:"Completed",uid:"completed",icon:ue},{name:"Pending",uid:"pending",icon:Ce},{name:"Completion %",uid:"completionPercentage",icon:V},{name:"RFI Submissions",uid:"rfiSubmissions",icon:J},{name:"RFI Submission %",uid:"rfiSubmissionPercentage",icon:V}];return c?e.jsxs("div",{className:"space-y-4",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[t&&e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(G,{size:"sm",variant:"bordered",color:"primary",radius:o(),startContent:e.jsx(de,{className:"w-4 h-4"}),onPress:t,style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Refresh Summary"})}),e.jsx(ne,{className:"max-h-[70vh]",children:(i==null?void 0:i.length)>0?i.map((s,p)=>e.jsx(h,{summary:s},p)):e.jsx(H,{className:"text-center py-8",radius:o(),style:{border:"var(--borderWidth, 1px) solid var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(Z,{children:[e.jsx(V,{className:"w-12 h-12 text-default-300 mb-4 mx-auto"}),e.jsx("h6",{className:"text-lg font-semibold text-default-600 mb-2",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No summary data found"}),e.jsx("p",{className:"text-sm text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No work summary available for the selected period"})]})})})]}):r?e.jsx(n,{}):e.jsx("div",{className:"max-h-[84vh] overflow-y-auto",children:e.jsx(ne,{className:"max-h-[70vh]",children:e.jsxs(Je,{selectionMode:"none",isCompact:!0,removeWrapper:!0,isStriped:!0,"aria-label":"Daily Work Summary Table",isHeaderSticky:!0,radius:o(),classNames:{base:"max-h-[520px] overflow-auto",table:"min-h-[200px] w-full",thead:"z-10",tbody:"overflow-y-auto",th:"bg-default-100 text-default-700 font-semibold",td:"text-default-600"},style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(et,{columns:u,children:s=>e.jsx(tt,{align:s.uid==="date"?"start":"center",className:`bg-default-100/80 backdrop-blur-md ${s.width||""}`,style:{minWidth:s.uid==="date"?"128px":s.uid==="incharge"?"192px":"auto"},children:e.jsxs("div",{className:`flex items-center gap-1 ${s.uid==="date"?"justify-start":"justify-center"}`,children:[s.icon&&e.jsx(s.icon,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-semibold",children:s.name})]})},s.uid)}),e.jsx(Xe,{items:i||[],emptyContent:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(V,{className:"w-12 h-12 text-default-300 mb-4"}),e.jsx("h6",{className:"text-lg font-medium text-default-600",children:"No summary data found"}),e.jsx("span",{className:"text-sm text-default-500",children:"No work summary available for the selected period"})]}),children:s=>e.jsx(Ke,{children:p=>v(s,p)},s.date)})]})})})},kt=({open:i,closeModal:t,filteredData:r=[],inCharges:a=[]})=>{var p,f;const[c,o]=E.useState({format:"excel",columns:["date","totalDailyWorks","completed","pending","completionPercentage","rfiSubmissions","embankment","structure","pavement","resubmissions"],includeCharts:!1,groupBy:"date"}),[n,m]=E.useState(!1),d=[{key:"excel",label:"Excel (.xlsx)",description:"Comprehensive spreadsheet with summary data",icon:e.jsx(Ue,{size:20,className:"text-green-600"})},{key:"csv",label:"CSV (.csv)",description:"Simple comma-separated values",icon:e.jsx(He,{size:20,className:"text-blue-600"})}],x=[{key:"date",label:"Date",description:"Summary date"},{key:"totalDailyWorks",label:"Total Works",description:"Total number of daily works"},{key:"completed",label:"Completed",description:"Number of completed works"},{key:"pending",label:"Pending",description:"Number of pending works"},{key:"completionPercentage",label:"Completion %",description:"Completion percentage"},{key:"rfiSubmissions",label:"RFI Submissions",description:"Number of RFI submissions"},{key:"rfiSubmissionPercentage",label:"RFI Submission %",description:"RFI submission percentage"},{key:"embankment",label:"Embankment Works",description:"Number of embankment works"},{key:"structure",label:"Structure Works",description:"Number of structure works"},{key:"pavement",label:"Pavement Works",description:"Number of pavement works"},{key:"resubmissions",label:"Resubmissions",description:"Number of resubmissions"}],g=[{key:"date",label:"By Date",description:"Group summary by date"},{key:"type",label:"By Type",description:"Group summary by work type"},{key:"overall",label:"Overall Summary",description:"Single overall summary"}],h=async()=>{m(!0);try{let l=v();const b=`daily_work_summary_${new Date().toISOString().split("T")[0]}`;switch(c.format){case"excel":u(l,b);break;case"csv":s(l,b);break}q.success(`Successfully exported ${l.length} summary records`,{icon:e.jsx(ue,{className:"w-5 h-5"})}),t()}catch(l){q.error("Export failed: "+l.message)}finally{m(!1)}},v=()=>{let l=[...r];if(c.groupBy==="overall"){const b=l.reduce((S,$)=>S+$.totalDailyWorks,0),j=l.reduce((S,$)=>S+$.completed,0),k=l.reduce((S,$)=>S+$.rfiSubmissions,0),w=l.reduce((S,$)=>S+$.embankment,0),F=l.reduce((S,$)=>S+$.structure,0),_=l.reduce((S,$)=>S+$.pavement,0),W=l.reduce((S,$)=>S+$.resubmissions,0);l=[{date:"Overall Summary",totalDailyWorks:b,completed:j,pending:b-j,completionPercentage:b>0?(j/b*100).toFixed(1)+"%":"0%",rfiSubmissions:k,rfiSubmissionPercentage:b>0?(k/b*100).toFixed(1)+"%":"0%",embankment:w,structure:F,pavement:_,resubmissions:W}]}else if(c.groupBy==="type"){const b=l.reduce((j,k)=>(["embankment","structure","pavement"].forEach(w=>{k[w]>0&&(j[w]||(j[w]={type:w.charAt(0).toUpperCase()+w.slice(1),totalWorks:0,dates:[]}),j[w].totalWorks+=k[w],j[w].dates.push(k.date))}),j),{});l=Object.values(b).map(j=>({type:j.type,totalWorks:j.totalWorks,dateRange:`${Math.min(...j.dates)} to ${Math.max(...j.dates)}`,dateCount:j.dates.length}))}return l.map(b=>{const j={};return c.columns.forEach(k=>{var w;if(b.hasOwnProperty(k)){const F=((w=x.find(_=>_.key===k))==null?void 0:w.label)||k;j[F]=b[k]}}),j})},u=(l,b)=>{const j=T.json_to_sheet(l),k=T.book_new();T.book_append_sheet(k,j,"Summary");const w=Object.keys(l[0]||{}).map(()=>({wch:20}));j["!cols"]=w;const F=T.decode_range(j["!ref"]);for(let _=F.s.c;_<=F.e.c;_++){const W=T.encode_cell({r:0,c:_});j[W]&&(j[W].s={font:{bold:!0},fill:{fgColor:{rgb:"CCCCCC"}}})}Ze(k,`${b}.xlsx`)},s=(l,b)=>{const j=T.json_to_sheet(l),k=T.sheet_to_csv(j),w=new Blob([k],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a"),_=URL.createObjectURL(w);F.setAttribute("href",_),F.setAttribute("download",`${b}.csv`),F.style.visibility="hidden",document.body.appendChild(F),F.click(),document.body.removeChild(F)};return e.jsx(Me,{isOpen:i,onClose:t,size:"3xl",scrollBehavior:"inside",classNames:{base:"backdrop-blur-md",backdrop:"bg-black/50 backdrop-blur-sm"},children:e.jsxs(Ye,{children:[e.jsxs(ze,{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-6 h-6 text-primary"}),e.jsx("span",{children:"Export Daily Work Summary"})]}),e.jsx("p",{className:"text-sm text-default-500 font-normal",children:"Export summary data with customizable grouping and format options"})]}),e.jsx(Be,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{className:"bg-default-50",children:e.jsxs(Z,{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Export Format"}),e.jsx(ve,{value:c.format,onValueChange:l=>o(b=>({...b,format:l})),orientation:"horizontal",children:d.map(l=>e.jsx(Ne,{value:l.key,children:e.jsxs("div",{className:"flex items-center gap-2",children:[l.icon,e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l.label}),e.jsx("div",{className:"text-xs text-default-500",children:l.description})]})]})},l.key))})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Grouping & Summary"}),e.jsx(ve,{value:c.groupBy,onValueChange:l=>o(b=>({...b,groupBy:l})),children:g.map(l=>e.jsx(Ne,{value:l.key,children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l.label}),e.jsx("div",{className:"text-xs text-default-500",children:l.description})]})},l.key))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Columns to Export"}),e.jsx(Qe,{value:c.columns,onValueChange:l=>o(b=>({...b,columns:l})),children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:x.map(l=>e.jsx(st,{value:l.key,children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l.label}),e.jsx("div",{className:"text-xs text-default-500",children:l.description})]})},l.key))})})]}),e.jsx(H,{className:"bg-primary-50 border-primary-200",children:e.jsx(Z,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(at,{className:"w-5 h-5 text-primary-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-primary-900",children:"Export Summary"}),e.jsxs("div",{className:"text-sm text-primary-700 space-y-1",children:[e.jsxs("p",{children:["• Format: ",(p=d.find(l=>l.key===c.format))==null?void 0:p.label]}),e.jsxs("p",{children:["• Grouping: ",(f=g.find(l=>l.key===c.groupBy))==null?void 0:f.label]}),e.jsxs("p",{children:["• Columns: ",c.columns.length," selected"]}),e.jsxs("p",{children:["• Records: ",r.length," summary entries"]})]})]})]})})})]})}),e.jsxs(nt,{children:[e.jsx(G,{variant:"light",onPress:t,isDisabled:n,children:"Cancel"}),e.jsx(G,{color:"primary",onPress:h,isLoading:n,startContent:!n&&e.jsx(qe,{size:16}),isDisabled:c.columns.length===0,children:n?"Exporting...":"Export Summary"})]})]})})};var se={exports:{}},St=se.exports,$e;function Dt(){return $e||($e=1,function(i,t){(function(r,a){i.exports=a()})(St,function(){return function(r,a,c){var o=function(n,m){if(!m||!m.length||m.length===1&&!m[0]||m.length===1&&Array.isArray(m[0])&&!m[0].length)return null;var d;m.length===1&&m[0].length>0&&(m=m[0]),d=(m=m.filter(function(g){return g}))[0];for(var x=1;x<m.length;x+=1)m[x].isValid()&&!m[x][n](d)||(d=m[x]);return d};c.max=function(){var n=[].slice.call(arguments,0);return o("isAfter",n)},c.min=function(){var n=[].slice.call(arguments,0);return o("isBefore",n)}}})}(se)),se.exports}var Rt=Dt();const $t=Pe(Rt);I.extend($t);I.extend(it);const Ct=({auth:i,title:t,summary:r,jurisdictions:a,inCharges:c})=>{const o=te("(min-width: 1025px)"),n=te("(min-width: 641px) and (max-width: 1024px)"),m=te("(max-width: 640px)"),d=()=>{var R;if(typeof window>"u")return"lg";const O=((R=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:R.trim())||"12px",N=parseInt(O);return N===0?"none":N<=4?"sm":N<=8?"md":N<=16?"lg":"full"},[x,g]=E.useState(r),[h,v]=E.useState(r),[u,s]=E.useState(!1),[p,f]=E.useState(null),[l,b]=E.useState(!1),j=E.useCallback(y=>{f(y)},[]),k=E.useCallback(()=>{f(null)},[]),w=E.useMemo(()=>!x||x.length===0?[]:x.map(y=>I(y.date)).filter(y=>y.isValid()),[x]),[F,_]=E.useState({startDate:w.length>0?I.min(...w).format("YYYY-MM-DD"):I().subtract(30,"days").format("YYYY-MM-DD"),endDate:w.length>0?I.max(...w).format("YYYY-MM-DD"):I().format("YYYY-MM-DD"),status:"all",incharge:"all"}),W=E.useCallback(async()=>{s(!0);try{const y=F.startDate||I().subtract(30,"days").format("YYYY-MM-DD"),O=F.endDate||I().format("YYYY-MM-DD"),N=await pe.post(Re("daily-works-summary.refresh"),{startDate:y,endDate:O});if(N.data&&N.data.summary)g(N.data.summary),q.success("Summary data refreshed successfully");else if(N.data&&N.data.message){const R=await pe.get(Re("daily-works-summary.data"),{params:{startDate:y,endDate:O}});R.data&&R.data.summary&&g(R.data.summary),q.success("Summary data refreshed successfully")}}catch(y){console.error("Failed to refresh summary:",y),y.response&&y.response.data&&y.response.data.message?q.error(y.response.data.message):q.error("Failed to refresh summary data")}finally{s(!1)}},[F]),S=E.useCallback((y,O)=>{_(N=>({...N,[y]:O}))},[]),$=E.useMemo(()=>{const y=h.reduce((Y,B)=>Y+B.totalDailyWorks,0),O=h.reduce((Y,B)=>Y+B.completed,0),N=h.reduce((Y,B)=>Y+B.pending,0),R=h.reduce((Y,B)=>Y+B.rfiSubmissions,0),D=y>0?(O/y*100).toFixed(1):0;return[{title:"Total Works",value:y,icon:e.jsx(V,{className:"w-5 h-5"}),color:"text-blue-600",description:"All logged works"},{title:"Completed",value:O,icon:e.jsx(ue,{className:"w-5 h-5"}),color:"text-green-600",description:`${D}% completion rate`},{title:"Pending",value:N,icon:e.jsx(Ce,{className:"w-5 h-5"}),color:"text-orange-600",description:"In progress"},{title:"RFI Submissions",value:R,icon:e.jsx(re,{className:"w-5 h-5"}),color:"text-purple-600",description:"Ready for inspection"}]},[h]),ae=[{label:"Refresh",icon:e.jsx(de,{className:"w-4 h-4"}),variant:"flat",color:"primary",onPress:W,isLoading:u,className:"bg-linear-to-r from-blue-500/20 to-cyan-500/20 hover:from-blue-500/30 hover:to-cyan-500/30"},...i.roles.includes("Administrator")||i.designation==="Supervision Engineer"?[{label:"Export",icon:e.jsx(lt,{className:"w-4 h-4"}),variant:"flat",color:"success",onPress:()=>j("exportDailyWorkSummary"),className:"bg-linear-to-r from-green-500/20 to-emerald-500/20 hover:from-green-500/30 hover:to-emerald-500/30"}]:[]];return E.useEffect(()=>{w.length>0&&(!F.startDate||!F.endDate)&&_(y=>({...y,startDate:I.min(...w).format("YYYY-MM-DD"),endDate:I.max(...w).format("YYYY-MM-DD")}))},[w]),E.useEffect(()=>{const O=x.filter(N=>{const R=I(N.date),D=I(F.startDate),Y=I(F.endDate);return R.isBetween(D,Y,null,"[]")&&(F.incharge==="all"||!F.incharge||N.incharge===F.incharge)}).reduce((N,R)=>{const D=I(R.date).format("YYYY-MM-DD");return N[D]?(N[D].totalDailyWorks+=R.totalDailyWorks,N[D].resubmissions+=R.resubmissions,N[D].embankment+=R.embankment,N[D].structure+=R.structure,N[D].pavement+=R.pavement,N[D].pending+=R.pending,N[D].completed+=R.completed,N[D].rfiSubmissions+=R.rfiSubmissions,N[D].completionPercentage=N[D].totalDailyWorks>0?N[D].completed/N[D].totalDailyWorks*100:0,N[D].rfiSubmissionPercentage=N[D].totalDailyWorks>0?N[D].rfiSubmissions/N[D].totalDailyWorks*100:0):N[D]={...R},N},{});v(Object.values(O))},[F,x]),e.jsxs(e.Fragment,{children:[e.jsx(We,{title:t}),p==="exportDailyWorkSummary"&&e.jsx(kt,{open:p==="exportDailyWorkSummary",closeModal:k,filteredData:h,inCharges:c}),e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full max-w-[2000px]",children:e.jsxs(H,{className:"transition-all duration-200",radius:d(),style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                var(--theme-content1, #FAFAFA) 20%, 
                                var(--theme-content2, #F4F4F5) 10%, 
                                var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(Te,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                    color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                    color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${o?"p-6":n?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                                    ${o?"p-3":n?"p-2.5":"p-2"} 
                                                    rounded-xl flex items-center justify-center
                                                `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(V,{className:`
                                                        ${o?"w-8 h-8":n?"w-6 h-6":"w-5 h-5"}
                                                    `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                                        ${o?"text-2xl":n?"text-xl":"text-lg"}
                                                        font-bold text-foreground
                                                        ${o?"":"truncate"}
                                                    `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Daily Work Summary"}),e.jsx("p",{className:`
                                                        ${o?"text-sm":"text-xs"} 
                                                        text-default-500
                                                        ${o?"":"truncate"}
                                                    `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Overview of daily work statistics and progress"})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"flex items-center gap-2",children:ae.map((y,O)=>e.jsx(G,{size:o?"md":"sm",variant:y.variant||"flat",color:y.color||"primary",startContent:y.icon,onPress:y.onPress,isLoading:y.isLoading,className:`${y.className||""} font-medium`,radius:d(),style:{fontFamily:'var(--fontFamily, "Inter")',borderRadius:"var(--borderRadius, 12px)"},children:y.label},O))})})]})})})}),e.jsxs(Z,{className:"pt-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(rt,{stats:$,isLoading:u}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5 text-default-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Quick Filters:"})]}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(dt,{variant:"bordered",radius:d(),className:"bg-white/5",children:e.jsxs(G,{isIconOnly:m,color:l?"primary":"default",onPress:()=>b(!l),className:l?"bg-primary/20":"bg-white/5",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(ct,{className:"w-4 h-4"}),!m&&e.jsx("span",{className:"ml-1",children:"Advanced Filters"})]})})})]}),e.jsx(Ae,{children:l&&e.jsx(we.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"sm:col-span-2 lg:col-span-2",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Date Range"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start sm:items-center",children:[e.jsx(Fe,{type:"date",label:"Start date",value:F.startDate,onChange:y=>S("startDate",y.target.value),size:"sm",variant:"bordered",radius:d(),classNames:{input:"text-foreground",inputWrapper:`bg-content2/50 hover:bg-content2/70 
                                                                                         focus-within:bg-content2/90 border-divider/50 
                                                                                         hover:border-divider data-[focus]:border-primary`},style:{fontFamily:'var(--fontFamily, "Inter")'}}),e.jsx("span",{className:"text-sm text-default-500 px-2",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"to"}),e.jsx(Fe,{type:"date",label:"End date",value:F.endDate,onChange:y=>S("endDate",y.target.value),size:"sm",variant:"bordered",radius:d(),classNames:{input:"text-foreground",inputWrapper:`bg-content2/50 hover:bg-content2/70 
                                                                                         focus-within:bg-content2/90 border-divider/50 
                                                                                         hover:border-divider data-[focus]:border-primary`},style:{fontFamily:'var(--fontFamily, "Inter")'}})]})]})}),(i.roles.includes("Administrator")||i.designation==="Supervision Engineer")&&e.jsx("div",{children:e.jsxs(Le,{label:"In Charge",placeholder:"Select in charge...",selectedKeys:F.incharge?[String(F.incharge)]:["all"],onSelectionChange:y=>{const O=Array.from(y)[0];S("incharge",O==="all"?"all":O)},variant:"bordered",size:"sm",radius:d(),className:"w-full",classNames:{trigger:"text-sm",value:"text-foreground",listboxWrapper:"bg-content1",popoverContent:"bg-content1"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Filter by in charge",children:[e.jsx(be,{value:"all",children:"All"},"all"),c.map(y=>e.jsx(be,{value:y.id,children:y.name},y.id))]})})]})})})})]})}),e.jsx(H,{radius:d(),className:"bg-content1/80 backdrop-blur-md border border-divider/20",style:{fontFamily:'var(--fontFamily, "Inter")',borderRadius:"var(--borderRadius, 12px)",border:"var(--borderWidth, 1px) solid var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                        color-mix(in srgb, var(--theme-content1) 90%, transparent) 20%, 
                                        color-mix(in srgb, var(--theme-content2) 60%, transparent) 10%)`},children:e.jsx(Z,{className:"p-0",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsx(Ft,{filteredData:h,onRefresh:W,loading:u})})})]})]})})})]})};Ct.layout=i=>e.jsx(Ve,{children:i});export{Ct as default};
