import{r as i,u as fe,J as we,e as Y,j as e,Q as _e,F as J,a as d,R as Ne,b as $}from"./app-2c7u7EvZ.js";import{t as Te,k as R,F as ee,o as Ce,I as re,A as ke}from"./Dashboard-ut-uTYa1.js";import{G as Re}from"./GlassCard-DJHboOiP.js";import{P as Se}from"./PageHeader-DWmJCwc5.js";import{s as z}from"./toastUtils-9mT78FF5.js";import{b as D}from"./XMarkIcon-Cv9cS_ra.js";import{F as Fe}from"./ChartBarIcon-nyCBQz4Y.js";import{F as G}from"./ShieldCheckIcon-Bn1mNc_N.js";import{F as se}from"./DocumentArrowDownIcon-CnZZy8O5.js";import{F as Ee}from"./ClockIcon-DrPRI1xR.js";import{F as S}from"./ExclamationTriangleIcon-0OwFYDN5.js";import{m as Ae}from"./proxy--RyoqgPN.js";import{F as ae}from"./CheckCircleIcon-BK5yRv8r.js";import{F as te}from"./LockClosedIcon-CHMSjEkX.js";import{F as Pe}from"./KeyIcon-CXuJ5V_o.js";import{F as Me}from"./PresentationChartLineIcon-DQC9clcq.js";import{R as Le,A as $e,C as ze,X as De,Y as Ge,T as Ie,a as Be}from"./AreaChart-D8ibybuQ.js";import{F as Oe}from"./ChartPieIcon-OnbrTa8Q.js";import{F as qe}from"./TableCellsIcon-Ayc4ro_C.js";import{F as Ue}from"./InformationCircleIcon-Ba2N0bKg.js";import{s as He}from"./chunk-TQNYOUFX-Gz7swghj.js";import{s as ie,l as C}from"./chunk-Y2AYO5NJ-BOC3jhcU.js";import{c as b}from"./chunk-IHOGUXIG-C9esasSB.js";import{c as v}from"./chunk-D5XJWRAV-CqAxdy3X.js";import{t as I,b as k,c as s,a as B}from"./chunk-F3UDT23P-dWfslj-A.js";import"./EnvelopeIcon-CFXOPER_.js";import"./UserGroupIcon-DKyx_-H9.js";import"./MapPinIcon-BxpL7FKX.js";import"./UserIcon-DpR6Yxvw.js";import"./index-BzR0Ydkt.js";import"./chunk-SSA7SXE4-CYs09r68.js";import"./logo-Pwvcz7fP.js";import"./MagnifyingGlassIcon-B0trLquL.js";import"./features-animation-CjaMVz5S.js";import"./create-visual-element-DqSzzSQU.js";import"./index-D9PjUjBl.js";import"./useToggleState-BrFcryJF.js";import"./chunk-XJ2YRSUP-DLGgeZNc.js";function Qe({title:j,titleId:f,..._},N){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:N,"aria-labelledby":f},_),j?i.createElement("title",{id:f},j):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"}))}const ne=i.forwardRef(Qe);function We({title:j,titleId:f,..._},N){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:N,"aria-labelledby":f},_),j?i.createElement("title",{id:f},j):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const Ke=i.forwardRef(We);function Ze({title:j,titleId:f,..._},N){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:N,"aria-labelledby":f},_),j?i.createElement("title",{id:f},j):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const Ve=i.forwardRef(Ze),Xe=({title:j,initialData:f})=>{var H;const{isDark:_}=fe();getThemePrimaryColor();const[N,le]=i.useState(!1);i.useEffect(()=>{const r=()=>{le(window.innerWidth<768)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const{auth:Ye,app:T}=we().props,[n,oe]=i.useState(f||{}),[ce,F]=i.useState(!1),[E,de]=i.useState(!0),[P,me]=i.useState("30"),[A,xe]=i.useState("overview"),[M,he]=i.useState("24h"),[Je,er]=i.useState("database");i.useEffect(()=>{if(!E)return;const r=setInterval(()=>{L()},parseInt(P)*1e3);return()=>clearInterval(r)},[E,P]);const L=i.useCallback(async()=>{F(!0);try{const r=await Y.get("/api/system-monitoring/metrics",{params:{type:A,period:M}});oe(r.data)}catch(r){console.error("Failed to fetch monitoring data:",r),z.error("Failed to refresh system data")}finally{F(!1)}},[A,M]),pe=r=>{switch(r){case"healthy":case"compliant":case"good":return"success";case"warning":case"partial":return"warning";case"critical":case"unhealthy":case"non_compliant":return"error";default:return"default"}},ue=r=>{switch(r){case"healthy":case"compliant":return e.jsx(ae,{className:"w-5 h-5"});case"warning":case"partial":return e.jsx(S,{className:"w-5 h-5"});case"critical":case"unhealthy":return e.jsx(Ke,{className:"w-5 h-5"});default:return e.jsx(Ue,{className:"w-5 h-5"})}},O={primary:theme.palette.primary.main,secondary:theme.palette.secondary.main,success:theme.palette.success.main,warning:theme.palette.warning.main,error:theme.palette.error.main,info:theme.palette.info.main},q=i.useCallback(async()=>{try{F(!0);const r=await Y.get("/admin/system-report",{responseType:"blob"}),c=window.URL.createObjectURL(new Blob([r.data])),l=document.createElement("a");l.href=c,l.setAttribute("download",`system-report-${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(c),z.success("System report exported successfully")}catch(r){console.error("Failed to export report:",r),z.error("Failed to export system report")}finally{F(!1)}},[]),U=()=>{var c,l,g,h,x,u,m,p,a;const r=[{title:"System Health",value:((c=n.system_health)==null?void 0:c.overall_status)||"Unknown",icon:e.jsx(Ve,{}),color:((l=n.system_health)==null?void 0:l.overall_status)==="healthy"?"success":"error",description:"Overall system status"},{title:"Response Time",value:`${Math.round(((g=n.performance_summary)==null?void 0:g.avg_response_time)||0)}ms`,icon:e.jsx(Ee,{}),color:(((h=n.performance_summary)==null?void 0:h.avg_response_time)||0)<500?"success":"warning",description:"Average response time"},{title:"Active Users",value:((x=n.user_activity)==null?void 0:x.active_users)||0,icon:e.jsx(D,{}),color:"info",description:"Currently online"},{title:"Error Rate",value:`${((((u=n.error_summary)==null?void 0:u.total_errors)||0)/Math.max(((m=n.performance_summary)==null?void 0:m.total_requests)||1,1)*100).toFixed(2)}%`,icon:e.jsx(S,{}),color:(((p=n.error_summary)==null?void 0:p.total_errors)||0)<10?"success":"error",description:"System error rate"}];return e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,children:e.jsx(Grid,{container:!0,spacing:3,children:r.map((o,y)=>e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},children:e.jsx(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",p:2},children:e.jsx(CardContent,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"h4",className:"font-bold",children:o.value}),e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:o.title}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:o.description})]}),e.jsx("div",{className:`p-3 rounded-full bg-${o.color}-500/20`,children:Ne.cloneElement(o.icon,{className:`w-6 h-6 text-${o.color}-500`})})]})})})})},y))})}),e.jsx(Grid,{item:!0,xs:12,lg:8,children:e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"System Health Checks",avatar:e.jsx(ae,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsx("div",{className:"space-y-3",children:((a=n.system_health)==null?void 0:a.checks)&&Object.entries(n.system_health.checks).map(([o,y])=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/10 backdrop-blur-md border border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[ue(y.status),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",className:"capitalize font-medium",children:o.replace(/_/g," ")}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:y.message})]})]}),e.jsx(b,{label:y.status,color:pe(y.status),size:"small",variant:"outlined",className:"capitalize"})]},o))})})]})}),e.jsx(Grid,{item:!0,xs:12,lg:4,children:e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"Quick Actions",avatar:e.jsx(Ce,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx($,{startIcon:e.jsx(J,{className:"w-4 h-4"}),onClick:L,className:"w-full",variant:"bordered",children:"Refresh Data"}),e.jsx($,{startIcon:e.jsx(se,{className:"w-4 h-4"}),onClick:q,className:"w-full",variant:"bordered",children:"Export Report"}),e.jsx($,{startIcon:e.jsx(re,{className:"w-4 h-4"}),className:"w-full",variant:"bordered",children:"Configure Alerts"})]})})]})})]})},be=()=>{var u,m,p,a,o,y,Q,W,K,Z,V;const[r,c]=i.useState(0),[l,g]=i.useState(10),h=((m=(u=n.database_stats)==null?void 0:u.table_analysis)==null?void 0:m.tables)||[],x=((a=(p=n.database_stats)==null?void 0:p.table_analysis)==null?void 0:a.summary)||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(Typography,{variant:"h4",className:"font-bold text-blue-500",children:x.total_tables||0}),e.jsx(Typography,{variant:"subtitle2",children:"Total Tables"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsxs(Typography,{variant:"h4",className:"font-bold text-green-500",children:[((o=x.total_size_mb)==null?void 0:o.toFixed(2))||0," MB"]}),e.jsx(Typography,{variant:"subtitle2",children:"Total Size"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(Typography,{variant:"h4",className:"font-bold text-purple-500",children:((y=x.total_rows)==null?void 0:y.toLocaleString())||0}),e.jsx(Typography,{variant:"subtitle2",children:"Total Rows"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(Typography,{variant:"h4",className:"font-bold text-orange-500",children:((Q=x.engines_used)==null?void 0:Q.length)||0}),e.jsx(Typography,{variant:"subtitle2",children:"Storage Engines"})]})})})]}),e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"Table Analysis",avatar:e.jsx(qe,{className:"w-6 h-6"}),action:e.jsx(b,{label:`${h.length} Tables`,color:"primary",variant:"outlined"})}),e.jsxs(CardContent,{children:[e.jsx(TableContainer,{children:e.jsxs(I,{children:[e.jsx(TableHead,{children:e.jsxs(k,{children:[e.jsx(s,{children:"Table Name"}),e.jsx(s,{align:"right",children:"Rows"}),e.jsx(s,{align:"right",children:"Size (MB)"}),e.jsx(s,{align:"right",children:"Data (MB)"}),e.jsx(s,{align:"right",children:"Index (MB)"}),e.jsx(s,{children:"Engine"}),e.jsx(s,{children:"Created"})]})}),e.jsx(B,{children:h.slice(r*l,r*l+l).map((t,w)=>{var X;return e.jsxs(k,{hover:!0,children:[e.jsx(s,{children:e.jsx(Typography,{variant:"subtitle2",className:"font-medium",children:t.TABLE_NAME})}),e.jsx(s,{align:"right",children:((X=t.TABLE_ROWS)==null?void 0:X.toLocaleString())||0}),e.jsx(s,{align:"right",children:e.jsx(b,{label:`${t.size_mb||0} MB`,size:"small",color:t.size_mb>10?"warning":"default"})}),e.jsx(s,{align:"right",children:t.data_mb||0}),e.jsx(s,{align:"right",children:t.index_mb||0}),e.jsx(s,{children:e.jsx(b,{label:t.ENGINE,size:"small",variant:"outlined"})}),e.jsx(s,{children:t.CREATE_TIME?new Date(t.CREATE_TIME).toLocaleDateString():"N/A"})]},t.TABLE_NAME)})})]})}),e.jsx(TablePagination,{rowsPerPageOptions:[5,10,25,50],component:"div",count:h.length,rowsPerPage:l,page:r,onPageChange:(t,w)=>c(w),onRowsPerPageChange:t=>{g(parseInt(t.target.value,10)),c(0)}})]})]}),((W=n.database_stats)==null?void 0:W.storage_analysis)&&e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"Storage Analysis",avatar:e.jsx(ne,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsxs("div",{className:"space-y-4",children:[(K=n.database_stats.storage_analysis.by_engine)==null?void 0:K.map((t,w)=>e.jsx("div",{className:"p-3 rounded-lg bg-white/5",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(Typography,{variant:"subtitle2",className:"font-medium",children:[t.ENGINE," Engine"]}),e.jsxs(Typography,{variant:"caption",color:"text.secondary",children:[t.table_count," tables"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(Typography,{variant:"subtitle2",className:"font-bold",children:[t.total_size_mb," MB"]}),e.jsxs(Typography,{variant:"caption",color:"text.secondary",children:["Avg: ",t.avg_size_mb," MB"]})]})]})},w)),((Z=n.database_stats.storage_analysis.fragmentation)==null?void 0:Z.length)>0&&e.jsxs("div",{children:[e.jsx(Typography,{variant:"h6",className:"mb-3",children:"Fragmentation Issues"}),n.database_stats.storage_analysis.fragmentation.map((t,w)=>e.jsxs(Alert,{severity:t.fragmentation_percent>50?"error":"warning",className:"mb-2",children:["Table ",e.jsx("strong",{children:t.TABLE_NAME})," has ",t.fragmentation_percent,"% fragmentation (",t.fragmentation_mb," MB)"]},w))]}),((V=n.database_stats.storage_analysis.recommendations)==null?void 0:V.length)>0&&e.jsxs("div",{children:[e.jsx(Typography,{variant:"h6",className:"mb-3",children:"Recommendations"}),n.database_stats.storage_analysis.recommendations.map((t,w)=>e.jsx(Alert,{severity:t.priority==="high"?"error":"info",className:"mb-2",children:t.message},w))]})]})})]})]})},ge=()=>{var g,h,x,u,m,p;const r=((g=n.performance_summary)==null?void 0:g.metrics)||[],c=((h=n.database_stats)==null?void 0:h.query_performance)||{},l=r.length>0?r.map((a,o)=>({name:a.metric_type?a.metric_type.replace(/_/g," ").replace(/\b\w/g,y=>y.toUpperCase()):`Metric ${o+1}`,avgTime:Math.round(a.avg_time||a.average_time||0),requests:a.total_requests||a.count||0,maxTime:Math.round(a.max_time||0)})):[{name:"API Requests",avgTime:120,requests:150,maxTime:500},{name:"Database Queries",avgTime:80,requests:200,maxTime:300},{name:"Cache Operations",avgTime:15,requests:80,maxTime:45},{name:"File Operations",avgTime:250,requests:30,maxTime:800}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:8,children:e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"Performance Metrics",avatar:e.jsx(Me,{className:"w-6 h-6"}),action:r.length===0&&e.jsx(b,{label:"Sample Data",size:"small",color:"warning"})}),e.jsx(CardContent,{children:e.jsx(Le,{width:"100%",height:300,children:e.jsxs($e,{data:l,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(ze,{strokeDasharray:"3 3",stroke:theme.palette.divider,opacity:.3}),e.jsx(De,{dataKey:"name",stroke:theme.palette.text.secondary,fontSize:12}),e.jsx(Ge,{stroke:theme.palette.text.secondary,fontSize:12,label:{value:"Response Time (ms)",angle:-90,position:"insideLeft"}}),"                                        ",e.jsx(Ie,{contentStyle:{backgroundColor:theme.palette.background.paper,border:`1px solid ${theme.palette.divider}`,borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(Be,{type:"monotone",dataKey:"avgTime",stroke:O.primary,fill:`${O.primary}30`,strokeWidth:2})]})})})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"Performance Summary",avatar:e.jsx(Oe,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Typography,{variant:"h4",className:"font-bold text-blue-500",children:((x=c.performance_summary)==null?void 0:x.total_queries_24h)||0}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:"Queries (24h)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs(Typography,{variant:"h4",className:"font-bold text-green-500",children:[Math.round(((u=c.performance_summary)==null?void 0:u.avg_execution_time)||0),"ms"]}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:"Avg Execution Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs(Typography,{variant:"h4",className:"font-bold text-red-500",children:[Math.round(((m=c.performance_summary)==null?void 0:m.slowest_query_time)||0),"ms"]}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:"Slowest Query"})]})]})})]})})]}),((p=c.slow_queries)==null?void 0:p.length)>0&&e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"Slow Queries",avatar:e.jsx(S,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsx(TableContainer,{children:e.jsxs(I,{children:[e.jsx(TableHead,{children:e.jsxs(k,{children:[e.jsx(s,{children:"Query Type"}),e.jsx(s,{align:"right",children:"Execution Time (ms)"}),e.jsx(s,{align:"right",children:"Memory Usage"}),e.jsx(s,{children:"Timestamp"})]})}),e.jsx(B,{children:c.slow_queries.slice(0,10).map((a,o)=>e.jsxs(k,{hover:!0,children:[e.jsx(s,{children:a.metric_type}),e.jsx(s,{align:"right",children:e.jsx(b,{label:`${a.execution_time_ms}ms`,color:a.execution_time_ms>2e3?"error":"warning",size:"small"})}),e.jsx(s,{align:"right",children:a.memory_usage||"N/A"}),e.jsx(s,{children:new Date(a.created_at).toLocaleString()})]},o))})]})})})]})]})},je=()=>{var g,h,x,u;const r=n.security_metrics||{},c=r.authentication||{},l=r.suspicious_activities||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(G,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx(Typography,{variant:"h4",className:"font-bold text-green-500",children:c.successful_logins_24h||0}),e.jsx(Typography,{variant:"subtitle2",children:"Successful Logins (24h)"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(S,{className:"w-8 h-8 mx-auto mb-2 text-red-500"}),e.jsx(Typography,{variant:"h4",className:"font-bold text-red-500",children:((g=r.failed_attempts)==null?void 0:g.length)||0}),e.jsx(Typography,{variant:"subtitle2",children:"Failed Login Attempts"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(te,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx(Typography,{variant:"h4",className:"font-bold text-blue-500",children:c.unique_users_24h||0}),e.jsx(Typography,{variant:"subtitle2",children:"Unique Users (24h)"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(re,{className:"w-8 h-8 mx-auto mb-2 text-orange-500"}),e.jsx(Typography,{variant:"h4",className:"font-bold text-orange-500",children:((h=l.high_frequency_ips)==null?void 0:h.length)||0}),e.jsx(Typography,{variant:"subtitle2",children:"Suspicious IPs"})]})})})]}),((x=r.security_events)==null?void 0:x.length)>0&&e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"Recent Security Events",avatar:e.jsx(Pe,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsx("div",{className:"space-y-3",children:r.security_events.slice(0,10).map((m,p)=>e.jsx("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",className:"font-medium",children:m.description}),e.jsxs(Typography,{variant:"caption",color:"text.secondary",children:["User: ",m.causer_id," | ",new Date(m.created_at).toLocaleString()]})]}),e.jsx(b,{label:"Security Event",size:"small",color:"warning",variant:"outlined"})]})},p))})})]}),((u=r.failed_attempts)==null?void 0:u.length)>0&&e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"Failed Login Attempts",avatar:e.jsx(S,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsx(TableContainer,{children:e.jsxs(I,{children:[e.jsx(TableHead,{children:e.jsxs(k,{children:[e.jsx(s,{children:"Error Type"}),e.jsx(s,{children:"Message"}),e.jsx(s,{children:"IP Address"}),e.jsx(s,{children:"Timestamp"})]})}),e.jsx(B,{children:r.failed_attempts.slice(0,10).map((m,p)=>e.jsxs(k,{hover:!0,children:[e.jsx(s,{children:e.jsx(b,{label:m.error_type,size:"small",color:"error"})}),e.jsx(s,{children:m.message}),e.jsx(s,{children:m.ip_address||"Unknown"}),e.jsx(s,{children:new Date(m.created_at).toLocaleString()})]},p))})]})})})]})]})},ye=()=>{var g,h,x,u,m,p;const r=n.compliance_metrics||{},c=r.iso_27001||{},l=r.data_protection||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"ISO 27001 Compliance",avatar:e.jsx(G,{className:"w-6 h-6"})}),e.jsxs(CardContent,{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs(Typography,{variant:"h3",className:"font-bold text-blue-500",children:[c.compliance_score||0,"%"]}),e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Compliance Score"})]}),c.checks&&Object.entries(c.checks).map(([a,o])=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/5 mb-2",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",className:"capitalize",children:a.replace(/_/g," ")}),e.jsxs(Typography,{variant:"caption",color:"text.secondary",children:["Score: ",o.score,"%"]})]}),e.jsx(b,{label:o.compliant?"Compliant":"Non-Compliant",color:o.compliant?"success":"error",size:"small"})]},a))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"Data Protection Compliance",avatar:e.jsx(te,{className:"w-6 h-6"})}),e.jsxs(CardContent,{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs(Typography,{variant:"h3",className:"font-bold text-green-500",children:[l.gdpr_compliance_score||0,"%"]}),e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"GDPR Compliance Score"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white/5",children:[e.jsx(Typography,{variant:"subtitle2",children:"Data Retention"}),e.jsx(b,{label:`${((g=l.data_retention)==null?void 0:g.score)||0}%`,size:"small",color:"info"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white/5",children:[e.jsx(Typography,{variant:"subtitle2",children:"Data Anonymization"}),e.jsx(b,{label:`${((h=l.data_anonymization)==null?void 0:h.score)||0}%`,size:"small",color:"warning"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white/5",children:[e.jsx(Typography,{variant:"subtitle2",children:"Consent Management"}),e.jsx(b,{label:`${((x=l.consent_management)==null?void 0:x.score)||0}%`,size:"small",color:"success"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white/5",children:[e.jsx(Typography,{variant:"subtitle2",children:"Breach Procedures"}),e.jsx(b,{label:`${((u=l.data_breach_procedures)==null?void 0:u.score)||0}%`,size:"small",color:"info"})]})]})]})]})})]}),e.jsxs(d,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(v,{title:"Compliance Recommendations",avatar:e.jsx(ee,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"h6",className:"mb-3",children:"ISO 27001 Recommendations"}),(m=c.recommendations)==null?void 0:m.map((a,o)=>e.jsx(Alert,{severity:"info",className:"mb-2",children:a},o))]}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"h6",className:"mb-3",children:"Data Protection Recommendations"}),(p=l.recommendations)==null?void 0:p.map((a,o)=>e.jsx(Alert,{severity:"warning",className:"mb-2",children:a},o))]})]})})]})]})},ve=()=>{switch(A){case"overview":return e.jsx(U,{});case"database":return e.jsx(be,{});case"performance":return e.jsx(ge,{});case"security":return e.jsx(je,{});case"compliance":return e.jsx(ye,{});default:return e.jsx(U,{})}};return e.jsxs(e.Fragment,{children:[e.jsx(_e,{title:j}),e.jsx(Box,{className:"min-h-screen p-2 sm:p-4 md:p-6",sx:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)"},children:e.jsx(Grow,{in:!0,timeout:800,children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(Re,{children:e.jsx(Se,{title:"Enterprise System Monitoring",subtitle:"ISO-compliant comprehensive system monitoring and analysis dashboard",icon:e.jsx(D,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:"Export Report",icon:e.jsx(se,{className:"w-4 h-4"}),onPress:q,className:"bg-linear-to-r from-[rgba(var(--theme-primary-rgb),0.2)] to-[rgba(var(--theme-secondary-rgb),0.2)] hover:from-[rgba(var(--theme-primary-rgb),0.3)] hover:to-[rgba(var(--theme-secondary-rgb),0.3)] border border-[rgba(var(--theme-primary-rgb),0.3)]"},{label:"Refresh Data",icon:e.jsx(J,{className:"w-4 h-4"}),onPress:L,loading:ce}],children:e.jsxs("div",{className:"p-6",children:[e.jsx(Paper,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",p:3,mb:4},children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{checked:E,onChange:r=>de(r.target.checked),size:"sm"}),e.jsx(Typography,{variant:"body2",children:"Auto Refresh"})]}),e.jsxs(ie,{size:"sm",selectedKeys:[P],onSelectionChange:r=>me(Array.from(r)[0]),className:"w-24",isDisabled:!E,"aria-label":"Refresh interval",children:[e.jsx(C,{value:"30",children:"30s"},"30"),e.jsx(C,{value:"60",children:"1m"},"60"),e.jsx(C,{value:"300",children:"5m"},"300")]})]}),e.jsxs(ie,{size:"sm",selectedKeys:[M],onSelectionChange:r=>he(Array.from(r)[0]),className:"w-32","aria-label":"Time period",children:[e.jsx(C,{value:"1h",children:"Last Hour"},"1h"),e.jsx(C,{value:"24h",children:"Last 24h"},"24h"),e.jsx(C,{value:"7d",children:"Last 7 days"},"7d")]})]})}),e.jsx(Paper,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",mb:4},children:e.jsxs(Te,{selectedKey:A,onSelectionChange:xe,"aria-label":"System monitoring sections",className:"p-4",children:[e.jsx(R,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Overview"]})},"overview"),e.jsx(R,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"Database"]})},"database"),e.jsx(R,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Performance"]})},"performance"),e.jsx(R,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Security"]})},"security"),e.jsx(R,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),"Compliance"]})},"compliance")]})}),e.jsx("div",{className:"min-h-[600px]",children:ve()}),e.jsx(Paper,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",p:3,mt:4},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Last Updated"}),e.jsx(Typography,{variant:"body2",className:"font-medium",children:(H=n.system_health)!=null&&H.last_check?new Date(n.system_health.last_check).toLocaleString():new Date().toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Monitoring Since"}),e.jsx(Typography,{variant:"body2",className:"font-medium",children:new Date().toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"System Version"}),e.jsxs(Typography,{variant:"body2",className:"font-medium",children:[(T==null?void 0:T.name)||"ERP System"," v",(T==null?void 0:T.version)||"2.0"]})]}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Compliance Status"}),e.jsx(b,{label:"ISO Compliant",color:"success",size:"small",variant:"outlined"})]})]})})]})})})})})})]})};Xe.layout=j=>e.jsx(ke,{children:j});export{Xe as default};
