import{r as i,j as e,a as R,S as Se,F as U,Q as Fe,b as m,t as Le}from"./app-CFOXYWdD.js";import{g as E,B as v,j as Ce,h as Re,b as Te,d as $,H as ce,C as oe,c as $e,v as B,w as W,x as z,y as h,t as Ae,A as Me}from"./App-D44H3aE5.js";import{m as Oe,G as _}from"./logo-AMLCgbkx.js";import{G as Pe}from"./GlassDialog-CB1Z5Bs0.js";import{P as Ie}from"./PageHeader-DIUdhN7v.js";import{S as Ue}from"./StatsCards-GNCJc6Af.js";import{F as A}from"./DevicePhoneMobileIcon-DStYPa2-.js";import{F as J}from"./CheckCircleIcon-WfVI_0Z3.js";import{b as Ee,F as Be,a as We}from"./SignalIcon-q6OB8yEM.js";import{F as ze}from"./ArrowLeftIcon-4ec49zxj.js";import{F as de}from"./DocumentArrowDownIcon-CebuwUHN.js";import{a as He}from"./ShieldCheckIcon-DfAiaKpT.js";import{F as Ve}from"./LockClosedIcon-sxTsvOMn.js";import{F as Ge}from"./GlobeAltIcon-b2fU3EP6.js";import{F as Ke}from"./FunnelIcon-CAU2n7eZ.js";import{F as ue}from"./ExclamationTriangleIcon-Kx82ewut.js";import{F as Qe}from"./MapPinIcon-DFEGbRZw.js";import{F as qe}from"./XCircleIcon-CXS-JZ21.js";import{F as Ze}from"./EllipsisVerticalIcon-C5p9jyC7.js";import{F as Je}from"./EyeIcon-CA5zd612.js";import{F as Xe}from"./IdentificationIcon-Br4i_l8h.js";import{t as Ye,a as es,b as ss,c as k}from"./chunk-F3UDT23P-DfyL8aGa.js";import{t as ts}from"./chunk-YRZGWF2W-CVS3z9wo.js";import{t as D}from"./chunk-TSPNSPCL-CDimUInN.js";import{p as rs}from"./chunk-EAPQ7RWQ-CTPnoxCw.js";import"./EnvelopeIcon-DJsx2AYc.js";import"./UserIcon-B8KaJTnW.js";import"./chunk-SSA7SXE4-B38lyIff.js";import"./create-visual-element-DL7V4SzU.js";import"./chunk-D5XJWRAV-Bs0mRdwq.js";import"./index-CaGcrq76.js";import"./useHasTabbableChild-Bti5CcwH.js";import"./index-CokAva9Y.js";function as({title:x,titleId:g,...N},y){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:y,"aria-labelledby":g},N),x?i.createElement("title",{id:g},x):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const H=i.forwardRef(as);function is({title:x,titleId:g,...N},y){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:y,"aria-labelledby":g},N),x?i.createElement("title",{id:g},x):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 20.25h12m-7.5-3v3m3-3v3m-10.125-3h17.25c.621 0 1.125-.504 1.125-1.125V4.875c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125Z"}))}const ns=i.forwardRef(is);function ls({title:x,titleId:g,...N},y){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:y,"aria-labelledby":g},N),x?i.createElement("title",{id:g},x):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"}))}const cs=i.forwardRef(ls),os=({title:x,user:g,devices:N})=>{var ae,ie,ne,le;const y=()=>{const[s,t]=i.useState(!1),[r,n]=i.useState(!1);return i.useEffect(()=>{const o=()=>{t(window.innerWidth<640),n(window.innerWidth<768)};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),{isMobile:s,isTablet:r}},{isMobile:j}=y(),[a,V]=i.useState(g),[d,T]=i.useState(N||[]),[me,S]=i.useState(!1),[b,F]=i.useState({}),[X,Y]=i.useState(!1),[c,ee]=i.useState(null),[he,se]=i.useState(!1),[l,te]=i.useState({search:"",status:"all",type:"all",dateRange:"all"}),[G,xe]=i.useState(!1),[L,K]=i.useState({currentPage:1,perPage:10}),p=i.useMemo(()=>{const s=new Date,t=new Date(s.getTime()-5*60*1e3),r=new Date(s.getTime()-24*60*60*1e3),n=d.filter(f=>f.is_active),o=d.filter(f=>f.is_active&&f.last_seen_at&&new Date(f.last_seen_at)>t),u=d.filter(f=>f.last_seen_at&&new Date(f.last_seen_at)>r),I=d.filter(f=>f.user_agent&&f.user_agent.toLowerCase().includes("mobile"));return{total:d.length,active:n.length,online:o.length,recent:u.length,mobile:I.length,desktop:d.length-I.length,inactive:d.length-n.length}},[d]),fe=i.useMemo(()=>[{title:"Total Devices",value:p.total,icon:e.jsx(A,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All registered devices"},{title:"Active Sessions",value:p.active,icon:e.jsx(J,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Currently active devices"},{title:"Online Now",value:p.online,icon:e.jsx(Ee,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Active within 5 minutes"},{title:"Recent Activity",value:p.recent,icon:e.jsx(E,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Active within 24 hours"}],[p]),C=i.useCallback(async()=>{S(!0);try{const s=await R.get(route("users.device.list",{user:a.id}));s.status===200&&(T(s.data.devices||[]),s.data.user&&V(t=>({...t,...s.data.user})))}catch(s){console.error("Error fetching devices:",s),v.error("Failed to fetch device information"),T([])}finally{S(!1)}},[a.id]),ge=i.useCallback(async()=>{Y(!0),await C(),Y(!1),v.success("Device data refreshed")},[C]),pe=i.useCallback(()=>{const s=d.map(u=>({"Device Name":u.device_name||"Unknown","User Agent":u.user_agent,"IP Address":u.ip_address,Location:u.location||"Unknown",Status:u.is_active?"Active":"Inactive","Last Seen":u.last_seen_at?new Date(u.last_seen_at).toLocaleString():"Never",Created:u.created_at?new Date(u.created_at).toLocaleString():"Unknown"})),t=[Object.keys(s[0]||{}).join(","),...s.map(u=>Object.values(u).map(I=>`"${I}"`).join(","))].join(`
`),r=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download=`${a.name}_devices_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(n),v.success("Device data exported successfully")},[d,a.name]),be=i.useMemo(()=>{const s=[];return s.push({label:j?"Back":"Back to Users",icon:e.jsx(ze,{className:"w-4 h-4"}),onClick:()=>Se.visit(route("users")),variant:"light"}),s.push({label:j?"Refresh":"Refresh Data",icon:e.jsx(U,{className:"w-4 h-4"}),onClick:ge,variant:"flat",color:"primary",isLoading:X}),p.total>0&&s.push({label:j?"Export":"Export Devices",icon:e.jsx(de,{className:"w-4 h-4"}),onClick:pe,variant:"flat"}),s},[j,p.total,X]),ve=async s=>{F(t=>({...t,toggle:!0}));try{const t=await R.post(route("users.device.toggle"),{user_id:a.id,enabled:s});if(t.status===200&&t.data.success){const r={...a,single_device_login:t.data.user.single_device_login,active_device:t.data.user.active_device};V(r),v.success(t.data.message||(s?"Single device login enabled":"Single device login disabled")),S(!0);try{const n=await R.get(route("users.device.list",{user:a.id}));n.status===200&&T(n.data.devices||[])}catch(n){console.error("Error refreshing devices:",n)}finally{S(!1)}}}catch(t){console.error("Error toggling single device login:",t),v.error("Failed to update device settings")}finally{F(t=>({...t,toggle:!1}))}},je=async()=>{F(s=>({...s,reset:!0}));try{(await R.post(route("users.device.reset"),{user_id:a.id})).status===200&&(V(t=>({...t,active_device:null})),T(t=>t.map(r=>({...r,is_active:!1}))),v.success("User device has been reset"),setTimeout(async()=>{try{S(!0);const t=await R.get(route("users.device.list",{user:a.id}));t.status===200&&T(t.data.devices||[])}catch(t){console.error("Error refreshing devices after reset:",t)}finally{S(!1)}},1e3))}catch(s){console.error("Error resetting user device:",s),v.error("Failed to reset user device")}finally{F(s=>({...s,reset:!1}))}},Q=i.useCallback(async s=>{F(t=>({...t,[`logout_${s}`]:!0}));try{(await R.post(route("users.device.logout"),{user_id:a.id,device_id:s})).status===200&&(v.success("Device logged out successfully"),await C())}catch(t){console.error("Error logging out device:",t),v.error("Failed to logout device")}finally{F(t=>({...t,[`logout_${s}`]:!1}))}},[a.id,C]),w=i.useMemo(()=>{let s=[...d];if(l.search){const t=l.search.toLowerCase();s=s.filter(r=>(r.device_name||"").toLowerCase().includes(t)||(r.user_agent||"").toLowerCase().includes(t)||(r.ip_address||"").toLowerCase().includes(t)||(r.location||"").toLowerCase().includes(t))}if(l.status!=="all"&&(s=s.filter(t=>l.status==="active"?t.is_active:l.status==="inactive"?!t.is_active:!0)),l.type!=="all"&&(s=s.filter(t=>{const r=(t.user_agent||"").toLowerCase();return l.type==="mobile"?r.includes("mobile")||r.includes("android")||r.includes("iphone"):l.type==="desktop"?!(r.includes("mobile")||r.includes("android")||r.includes("iphone")):!0})),l.dateRange!=="all"){const t=new Date;s=s.filter(r=>{if(!r.last_seen_at)return!1;const n=new Date(r.last_seen_at),o=(t-n)/(1e3*60*60);switch(l.dateRange){case"hour":return o<=1;case"day":return o<=24;case"week":return o<=168;case"month":return o<=720;default:return!0}})}return s},[d,l]),we=i.useMemo(()=>{const s=(L.currentPage-1)*L.perPage,t=s+L.perPage;return w.slice(s,t)},[w,L]),re=Math.ceil(w.length/L.perPage),M=(s,t)=>{te(r=>({...r,[s]:t})),K(r=>({...r,currentPage:1}))},O=(s,t="w-5 h-5")=>{const r=(s||"").toLowerCase();return r.includes("iphone")||r.includes("ipod")?e.jsx(A,{className:`${t} text-default-600`}):r.includes("android")&&r.includes("mobile")?e.jsx(A,{className:`${t} text-default-600`}):r.includes("ipad")||r.includes("android")&&r.includes("tablet")?e.jsx(We,{className:`${t} text-default-600`}):r.includes("smart-tv")||r.includes("smarttv")||r.includes("tizen")||r.includes("webos")?e.jsx(ns,{className:`${t} text-default-600`}):e.jsx(oe,{className:`${t} text-default-600`})},q=s=>{const t=(s||"").toLowerCase();return t.includes("iphone")||t.includes("ipod")?"iPhone":t.includes("android")&&t.includes("mobile")?"Android Phone":t.includes("ipad")?"iPad":t.includes("android")&&t.includes("tablet")?"Android Tablet":t.includes("smart-tv")||t.includes("smarttv")?"Smart TV":t.includes("windows")?"Windows PC":t.includes("mac")?"Mac":t.includes("linux")?"Linux":"Desktop"},Ne=s=>{const t=(s||"").toLowerCase();return t.includes("chrome")&&!t.includes("edg")?"Chrome":t.includes("firefox")?"Firefox":t.includes("safari")&&!t.includes("chrome")?"Safari":t.includes("edg")?"Edge":t.includes("opera")?"Opera":"Unknown Browser"},ye=s=>{const t=(s||"").toLowerCase();if(t.includes("windows nt 10"))return"Windows 10/11";if(t.includes("windows nt 6.3"))return"Windows 8.1";if(t.includes("windows nt 6.1"))return"Windows 7";if(t.includes("windows"))return"Windows";if(t.includes("mac os x")){const r=t.match(/mac os x ([0-9_]+)/);return r?`macOS ${r[1].replace(/_/g,".")}`:"macOS"}if(t.includes("android")){const r=t.match(/android ([0-9.]+)/);return r?`Android ${r[1]}`:"Android"}if(t.includes("iphone os")){const r=t.match(/iphone os ([0-9_]+)/);return r?`iOS ${r[1].replace(/_/g,".")}`:"iOS"}return t.includes("linux")?"Linux":"Unknown OS"},_e=s=>{ee(s),se(!0)},P=()=>{se(!1),ee(null)},Z=s=>{if(!s)return"Never";const t=new Date(s),n=Math.floor((new Date-t)/(1e3*60));if(n<1)return"Just now";if(n<60)return`${n}m ago`;const o=Math.floor(n/60);if(o<24)return`${o}h ago`;const u=Math.floor(o/24);return u<7?`${u}d ago`:t.toLocaleDateString()},ke=s=>{if(!s.is_active)return"default";if(s.last_seen_at){const t=new Date,r=new Date(s.last_seen_at),n=(t-r)/(1e3*60);if(n<=5)return"success";if(n<=60)return"warning"}return"primary"},De=s=>{if(!s.is_active)return"Inactive";if(s.last_seen_at){const t=new Date,r=new Date(s.last_seen_at),n=(t-r)/(1e3*60);if(n<=5)return"Online";if(n<=60)return"Recent"}return"Active"};return i.useEffect(()=>{C()},[C]),e.jsxs(e.Fragment,{children:[e.jsx(Fe,{title:x}),e.jsx(Oe.div,{className:"flex justify-center p-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,ease:"easeOut"},children:e.jsx(_,{children:e.jsx(Ie,{title:`Device Management - ${a.name}`,subtitle:`Manage ${a.name}'s device access, restrictions and session history`,icon:e.jsx(A,{className:"w-8 h-8"}),actionButtons:be,children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(Ue,{stats:fe,className:"mb-6"}),e.jsx("div",{className:"mb-6",children:e.jsx(_,{variant:"glass",className:"overflow-hidden",children:e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"lg:w-2/5 bg-linear-to-br from-white/5 to-white/10 p-6 border-r border-white/10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-linear-to-br from-primary/60 via-secondary/60 to-accent/60 p-1 shadow-2xl",children:e.jsx("div",{className:"w-full h-full rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center overflow-hidden border border-white/20",children:a.profile_image_url?e.jsx("img",{src:a.profile_image_url,alt:a.name,className:"w-full h-full object-cover rounded-full"}):e.jsx("span",{className:"text-2xl font-bold text-white",children:((ie=(ae=a.name)==null?void 0:ae.charAt(0))==null?void 0:ie.toUpperCase())||"U"})})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-success/80 backdrop-blur-xs border-2 border-white/30 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]}),e.jsx("h2",{className:"text-xl font-bold text-foreground mb-1",children:a.name}),e.jsx("p",{className:"text-sm text-default-500 mb-3",children:a.email})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white/5 backdrop-blur-xs rounded-lg p-3 border border-white/10 hover:bg-white/10 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-primary/30",children:e.jsx(Ce,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-400 uppercase tracking-wide",children:"Department"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:((ne=a.department)==null?void 0:ne.name)||"No Department"})]})]})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-xs rounded-lg p-3 border border-white/10 hover:bg-white/10 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-secondary/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-secondary/30",children:e.jsx(Re,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-400 uppercase tracking-wide",children:"Member Since"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.created_at?new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]})]})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-xs rounded-lg p-3 border border-white/10 hover:bg-white/10 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-success/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-success/30",children:e.jsx(Te,{className:"w-5 h-5 text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-400 uppercase tracking-wide",children:"User ID"}),e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["#",a.id]})]})]})}),e.jsxs("div",{className:"pt-4 border-t border-white/10",children:[e.jsx("p",{className:"text-xs text-default-400 uppercase tracking-wide mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{as:Le,href:route("profile",{user:a.id}),size:"sm",variant:"flat",className:"bg-primary/20 text-primary border-primary/30 hover:bg-primary/30 backdrop-blur-xs",startContent:e.jsx(H,{className:"w-4 h-4"}),children:"View Profile"}),e.jsx(m,{size:"sm",variant:"flat",className:"bg-secondary/20 text-secondary border-secondary/30 hover:bg-secondary/30 backdrop-blur-xs",startContent:e.jsx(de,{className:"w-4 h-4"}),children:"Export Data"})]})]})]})]}),e.jsxs("div",{className:"lg:w-3/5 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Device Security Settings"}),e.jsx("p",{className:"text-sm text-default-400",children:"Manage device access restrictions and session controls"})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-xs rounded-xl p-5 border border-white/10 hover:bg-white/10 transition-colors mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/20 backdrop-blur-xs rounded-xl flex items-center justify-center border border-primary/30",children:e.jsx(He,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Single Device Login"}),e.jsx("p",{className:"text-xs text-default-400",children:"Restrict user to one active device"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:a.single_device_login,onChange:s=>{ve(s.target.checked)},disabled:b.toggle}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-hidden peer-focus:ring-4 peer-focus:ring-opacity-30 rounded-full peer transition-all duration-300 ${a.single_device_login?"bg-green-500 peer-focus:ring-green-300":"bg-red-500 peer-focus:ring-red-300"} peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all`}),b.toggle&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("span",{className:"text-sm font-medium text-default-600",children:"Current Status:"}),e.jsx($,{size:"sm",variant:"flat",className:`font-semibold backdrop-blur-xs ${a.single_device_login?a.active_device?"bg-warning/20 text-warning border-warning/30":"bg-success/20 text-success border-success/30":"bg-default/20 text-default-600 border-default/30"}`,startContent:a.single_device_login?a.active_device?e.jsx(Ve,{className:"w-3 h-3"}):e.jsx(Be,{className:"w-3 h-3"}):e.jsx(ce,{className:"w-3 h-3"}),children:a.single_device_login?a.active_device?"Device Locked":"Device Free":"Disabled"})]}),a.single_device_login&&a.active_device&&e.jsxs("div",{className:"bg-warning/10 backdrop-blur-xs border border-warning/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-warning/20 backdrop-blur-xs rounded-lg flex items-center justify-center shrink-0 border border-warning/30",children:(le=a.active_device.device_name)!=null&&le.toLowerCase().includes("mobile")?e.jsx(A,{className:"w-5 h-5 text-warning"}):e.jsx(oe,{className:"w-5 h-5 text-warning"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-warning mb-1",children:"Active Device"}),e.jsx("p",{className:"text-sm text-warning/80 mb-2",children:a.active_device.device_name||"Unknown Device"}),a.active_device.last_seen_at&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-warning/70",children:[e.jsx(E,{className:"w-3 h-3"}),"Last seen: ",Z(a.active_device.last_seen_at)]})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-warning/20",children:e.jsx(m,{size:"sm",variant:"flat",className:"bg-danger/20 text-danger border-danger/30 hover:bg-danger/30 backdrop-blur-xs",startContent:b.reset?e.jsx(U,{className:"w-4 h-4 animate-spin"}):e.jsx(U,{className:"w-4 h-4"}),isDisabled:b.reset,onClick:()=>je(),children:b.reset?"Resetting...":"Reset Device Lock"})})]}),a.single_device_login&&!a.active_device&&e.jsx("div",{className:"bg-success/10 backdrop-blur-xs border border-success/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-8 h-8 text-success shrink-0"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-success mb-1",children:"Ready for Device Lock"}),e.jsx("p",{className:"text-sm text-success/80",children:"Single device login is enabled. The user's next login will lock their session to that device."})]})]})}),!a.single_device_login&&e.jsx("div",{className:"bg-primary/10 backdrop-blur-xs border border-primary/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ge,{className:"w-8 h-8 text-primary shrink-0"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-primary mb-1",children:"Multiple Device Access"}),e.jsx("p",{className:"text-sm text-primary/80",children:"User can log in from multiple devices simultaneously. Enable single device login for enhanced security."})]})]})})]})]})]})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(TextField,{label:"Search Devices",placeholder:"Search by device name, IP, location...",value:l.search,onChange:s=>M("search",s.target.value),InputProps:{startAdornment:e.jsx(InputAdornment,{position:"start",children:e.jsx($e,{className:"w-4 h-4"})})},fullWidth:!0,size:j?"small":"medium",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"12px",color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&.Mui-focused fieldset":{borderColor:"var(--primary-color)"},"& input::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"var(--primary-color)"}}}})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(m,{isIconOnly:j,variant:"bordered",onPress:()=>xe(!G),className:"bg-white/5 border-white/20",children:[e.jsx(Ke,{className:"w-4 h-4"}),!j&&e.jsx("span",{className:"ml-2",children:"Filters"})]}),e.jsx("div",{className:"hidden md:flex items-center gap-4 px-4 py-2 bg-white/5 rounded-lg border border-white/20",children:e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"text-default-500",children:"Showing: "}),e.jsx("span",{className:"font-medium text-foreground",children:w.length}),e.jsxs("span",{className:"text-default-500",children:[" / ",d.length]})]})})]})]}),G&&e.jsx(Fade,{in:G,children:e.jsx("div",{className:"mb-6 p-4 bg-white/5 rounded-lg border border-white/10",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Status"}),e.jsxs(B,{children:[e.jsx(W,{children:e.jsx(m,{variant:"bordered",className:"w-full justify-between bg-white/5",children:l.status==="all"?"All Status":l.status==="active"?"Active Only":"Inactive Only"})}),e.jsxs(z,{selectedKeys:[l.status],onSelectionChange:s=>M("status",Array.from(s)[0]),children:[e.jsx(h,{children:"All Status"},"all"),e.jsx(h,{children:"Active Only"},"active"),e.jsx(h,{children:"Inactive Only"},"inactive")]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Device Type"}),e.jsxs(B,{children:[e.jsx(W,{children:e.jsx(m,{variant:"bordered",className:"w-full justify-between bg-white/5",children:l.type==="all"?"All Types":l.type==="mobile"?"Mobile Only":"Desktop Only"})}),e.jsxs(z,{selectedKeys:[l.type],onSelectionChange:s=>M("type",Array.from(s)[0]),children:[e.jsx(h,{children:"All Types"},"all"),e.jsx(h,{children:"Mobile Only"},"mobile"),e.jsx(h,{children:"Desktop Only"},"desktop")]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Activity"}),e.jsxs(B,{children:[e.jsx(W,{children:e.jsx(m,{variant:"bordered",className:"w-full justify-between bg-white/5",children:l.dateRange==="all"?"All Time":l.dateRange==="hour"?"Last Hour":l.dateRange==="day"?"Last 24 Hours":l.dateRange==="week"?"Last Week":"Last Month"})}),e.jsxs(z,{selectedKeys:[l.dateRange],onSelectionChange:s=>M("dateRange",Array.from(s)[0]),children:[e.jsx(h,{children:"All Time"},"all"),e.jsx(h,{children:"Last Hour"},"hour"),e.jsx(h,{children:"Last 24 Hours"},"day"),e.jsx(h,{children:"Last Week"},"week"),e.jsx(h,{children:"Last Month"},"month")]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(m,{variant:"flat",color:"primary",className:"w-full",onPress:()=>{te({search:"",status:"all",type:"all",dateRange:"all"}),K(s=>({...s,currentPage:1}))},children:"Clear Filters"})})]})})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"h6",className:"font-semibold text-foreground",children:"Device History"}),e.jsxs(Typography,{variant:"caption",className:"text-default-500",children:[w.length," device",w.length!==1?"s":""," found",w.length!==d.length&&e.jsxs("span",{children:[" (filtered from ",d.length," total)"]})]})]}),p.total>0&&e.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[e.jsxs($,{size:"sm",variant:"flat",color:"primary",children:[p.active," Active"]}),e.jsxs($,{size:"sm",variant:"flat",color:"success",children:[p.online," Online"]})]})]})}),me?e.jsx("div",{className:"flex justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(CircularProgress,{size:40}),e.jsx(Typography,{className:"mt-4 text-default-500",children:"Loading device data..."})]})}):w.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ue,{className:"w-12 h-12 text-default-300 mx-auto mb-4"}),e.jsx(Typography,{variant:"h6",className:"text-foreground mb-2",children:"No devices found"}),e.jsx(Typography,{variant:"body2",className:"text-default-500",children:d.length===0?`${a.name} has no device records yet`:"Try adjusting your search or filters"}),d.length===0&&e.jsx(Typography,{variant:"caption",className:"text-default-400 block mt-2",children:"Device records are created when users log in"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ye,{"aria-label":"Device history table",className:"w-full",classNames:{wrapper:"shadow-none bg-transparent",th:"bg-white/10 backdrop-blur-md text-default-600 border-b border-white/10",td:"border-b border-white/5"},children:[e.jsxs(ts,{children:[e.jsx(D,{children:"Device"}),e.jsx(D,{children:"Type"}),e.jsx(D,{children:"IP Address"}),e.jsx(D,{children:"Location"}),e.jsx(D,{children:"Status"}),e.jsx(D,{children:"Last Seen"}),e.jsx(D,{children:"Actions"})]}),e.jsx(es,{children:we.map(s=>e.jsxs(ss,{className:"hover:bg-white/5 transition-colors",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"shrink-0",children:O(s.user_agent)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-sm text-foreground truncate",children:s.device_name||"Unknown Device"}),e.jsx("div",{className:"text-xs text-default-500 truncate max-w-48",title:s.user_agent,children:s.user_agent})]})]})}),e.jsx(k,{children:e.jsx($,{size:"sm",variant:"flat",color:q(s.user_agent)==="Mobile"?"secondary":"default",startContent:O(s.user_agent),children:q(s.user_agent)})}),e.jsx(k,{children:e.jsx("span",{className:"text-sm font-mono text-foreground",children:s.ip_address})}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-sm text-foreground truncate",children:s.location||"Unknown"})]})}),e.jsx(k,{children:e.jsx($,{size:"sm",variant:"flat",color:ke(s),startContent:s.is_active?e.jsx(J,{className:"w-3 h-3"}):e.jsx(qe,{className:"w-3 h-3"}),children:De(s)})}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-sm text-foreground",children:Z(s.last_seen_at)})]})}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[s.is_active&&e.jsx(Ae,{content:"Force logout this device",children:e.jsx(m,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",onPress:()=>Q(s.id),isDisabled:b[`logout_${s.id}`],className:"min-w-0 w-8 h-8",children:b[`logout_${s.id}`]?e.jsx("div",{className:"animate-spin",children:e.jsx(U,{className:"w-3 h-3"})}):e.jsx(H,{className:"w-3 h-3"})})}),e.jsxs(B,{children:[e.jsx(W,{children:e.jsx(m,{isIconOnly:!0,size:"sm",variant:"light",className:"min-w-0 w-8 h-8",children:e.jsx(Ze,{className:"w-3 h-3"})})}),e.jsxs(z,{"aria-label":"Device Actions",children:[e.jsx(h,{description:"View detailed device information",startContent:e.jsx(Je,{className:"w-4 h-4"}),onPress:()=>_e(s),children:"Device Details"},"details"),s.is_active&&e.jsx(h,{description:"Force logout this device",startContent:e.jsx(H,{className:"w-4 h-4"}),color:"warning",onPress:()=>Q(s.id),children:"Force Logout"},"logout")]})]})]})})]},s.id))})]}),re>1&&e.jsx("div",{className:"flex justify-center items-center p-4 border-t border-white/10",children:e.jsx(rs,{total:re,page:L.currentPage,onChange:s=>K(t=>({...t,currentPage:s})),showControls:!0,showShadow:!0,color:"primary",size:j?"sm":"md",classNames:{wrapper:"gap-2",item:"bg-white/10 backdrop-blur-md",cursor:"bg-primary text-primary-foreground"}})})]})]})]})})})}),e.jsx(Pe,{open:he,closeModal:P,maxWidth:"md",fullWidth:!0,children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[c&&O(c.user_agent,"w-6 h-6"),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Device Information"}),e.jsx("p",{className:"text-sm text-default-500",children:(c==null?void 0:c.device_name)||"Unknown Device"})]})]}),e.jsx(m,{isIconOnly:!0,variant:"light",onPress:P,className:"text-default-400 hover:text-foreground",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(_,{variant:"glass",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-primary/30",children:O(c.user_agent,"w-5 h-5")}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Device Type"}),e.jsx("p",{className:"text-default-500 text-sm",children:q(c.user_agent)})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-400",children:"Browser:"}),e.jsx("span",{className:"text-foreground",children:Ne(c.user_agent)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-400",children:"OS:"}),e.jsx("span",{className:"text-foreground",children:ye(c.user_agent)})]})]})]})}),e.jsx(_,{variant:"glass",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-secondary/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-secondary/30",children:e.jsx(cs,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle1",className:"font-semibold text-foreground",children:"Connection"}),e.jsx(Typography,{variant:"body2",className:"text-default-500",children:"Network Information"})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-400",children:"IP Address:"}),e.jsx("span",{className:"text-foreground font-mono",children:c.ip_address})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-default-400",children:"Location:"}),e.jsx("span",{className:"text-foreground",children:c.location||"Unknown"})]})]})]})})]}),e.jsx(_,{variant:"glass",children:e.jsxs(Box,{p:3,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-success/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-success/30",children:e.jsx(E,{className:"w-5 h-5 text-success"})}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle1",className:"font-semibold text-foreground",children:"Activity Timeline"}),e.jsx(Typography,{variant:"body2",className:"text-default-500",children:"Session and usage information"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx(Typography,{variant:"h6",className:"font-bold text-foreground",children:c.is_active?"Active":"Inactive"}),e.jsx(Typography,{variant:"caption",className:"text-default-400",children:"Current Status"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx(Typography,{variant:"h6",className:"font-bold text-foreground",children:Z(c.last_seen_at)}),e.jsx(Typography,{variant:"caption",className:"text-default-400",children:"Last Seen"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx(Typography,{variant:"h6",className:"font-bold text-foreground",children:c.created_at?new Date(c.created_at).toLocaleDateString():"Unknown"}),e.jsx(Typography,{variant:"caption",className:"text-default-400",children:"First Login"})]})]})]})}),e.jsx(_,{variant:"glass",children:e.jsxs(Box,{p:3,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-warning/20 backdrop-blur-xs rounded-lg flex items-center justify-center border border-warning/30",children:e.jsx(Xe,{className:"w-5 h-5 text-warning"})}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle1",className:"font-semibold text-foreground",children:"Technical Information"}),e.jsx(Typography,{variant:"body2",className:"text-default-500",children:"Detailed device specifications"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"caption",className:"text-default-400 uppercase tracking-wide",children:"Device ID"}),e.jsx(Typography,{variant:"body2",className:"text-foreground font-mono mt-1 p-2 bg-white/5 rounded-sm border border-white/10",children:c.id})]}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"caption",className:"text-default-400 uppercase tracking-wide",children:"User Agent"}),e.jsx(Typography,{variant:"body2",className:"text-foreground break-all mt-1 p-2 bg-white/5 rounded-sm border border-white/10",children:c.user_agent})]})]})]})}),c.is_active&&e.jsx(_,{variant:"glass",children:e.jsxs(Box,{p:3,className:"bg-danger/10 backdrop-blur-xs border border-danger/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ue,{className:"w-6 h-6 text-danger shrink-0"}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle1",className:"font-semibold text-danger",children:"Security Actions"}),e.jsx(Typography,{variant:"body2",className:"text-danger/80",children:"Manage device access and security"})]})]}),e.jsx(m,{size:"sm",variant:"flat",className:"bg-danger/20 text-danger border-danger/30 hover:bg-danger/30 backdrop-blur-xs",startContent:e.jsx(H,{className:"w-4 h-4"}),onPress:()=>{Q(c.id),P()},isDisabled:b[`logout_${c.id}`],children:b[`logout_${c.id}`]?"Logging out...":"Force Logout Device"})]})})]})}),e.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-white/10",children:e.jsx(m,{variant:"flat",onPress:P,className:"bg-default/20 text-default-700 border-default/30 hover:bg-default/30",children:"Close"})})]})})]})};os.layout=x=>e.jsx(Me,{children:x});export{os as default};
