import{r as l,j as e,i as ne,H as ie,e as L,g as M,h as V}from"./app-B8QYX9Px.js";import{u as oe,B as ce,G as de,F as me,T as b}from"./logo-BoX8pchB.js";import{P as pe}from"./PageHeader-XJFWVm9P.js";import{S as xe}from"./StatsCards-DEVVTSBN.js";import{u as he,e as T,a as ue,f as j,c as f,G as B,g as ge,b as be,A as je}from"./App-DkF9RL3Y.js";import{F as fe}from"./CheckCircleIcon-B90VRiLI.js";import{G as ve}from"./Grow-DP1KP2ex.js";import{T as we}from"./TextField-BAa6JqDO.js";import{I as Ne}from"./InputAdornment-Cc_eLtv_.js";import{F as ye}from"./AdjustmentsHorizontalIcon-BrcFRj1g.js";import{F as $}from"./PresentationChartLineIcon-fF9RAVuy.js";import{F as _e}from"./DocumentArrowDownIcon-JzXafcAn.js";import{p as Se}from"./chunk-XVMALT6H-Dh5JAmN7.js";import{b as Fe}from"./chunk-57V4RE7B-DRnWK4yB.js";import{s as v,l as n}from"./chunk-Y2AYO5NJ-DRZIqULh.js";import{t as Ce,a as I}from"./chunk-ML27DD5T-BmKztbKh.js";import{t as Y,a as G,b as r,c as z,d as U,e as c}from"./chunk-F3UDT23P-Hrzl6yhk.js";import{p as Ae}from"./chunk-EAPQ7RWQ-OKuZgSIq.js";import"./create-visual-element-4S4I33NB.js";import"./chunk-D5XJWRAV-zQzkTunB.js";import"./EnvelopeIcon-B1M8vjD_.js";import"./UserIcon-D9_80nkG.js";import"./ShieldCheckIcon-RZqgNGJW.js";import"./ExclamationTriangleIcon-BW32ASrn.js";import"./Select-8HD_0XQO.js";import"./InputLabel-CehJzubO.js";import"./index-DU2jcyFo.js";import"./NumberFormatter-DNR9MAW-.js";import"./useListState-7_qqofvb.js";import"./index-Dxlg9OmP.js";import"./chunk-VAMG3REK-CFukFOAm.js";import"./useHasTabbableChild-CrUAHYqA.js";import"./index-CokAva9Y.js";import"./features-animation-Cm0J4Rxa.js";const Pe=({title:w,summaryData:J})=>{const O=oe(),N=he(O.breakpoints.down("sm")),{users:De=[],departments:H=[],leave_types:Ee=[],columns:ke=[],data:y=[],department_summary:S=[],stats:d={},year:F=new Date().getFullYear(),filters:K={}}=J||{},[Q,C]=l.useState(!1),[i,A]=l.useState(K),[x,W]=l.useState(!1),[P,q]=l.useState("employee"),[o,D]=l.useState(""),[_,E]=l.useState(1),[m,X]=l.useState(15),p=l.useMemo(()=>{let a=y;return o&&(a=a.filter(t=>{var s,u;return((s=t.employee_name)==null?void 0:s.toLowerCase().includes(o.toLowerCase()))||((u=t.department)==null?void 0:u.toLowerCase().includes(o.toLowerCase()))})),a},[y,o]),Z=l.useMemo(()=>{const a=(_-1)*m,t=a+m;return p.slice(a,t)},[p,_,m]),k=Math.ceil(p.length/m),ee=l.useMemo(()=>[{title:"Total Employees",value:d.total_employees||0,icon:e.jsx(T,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Active employees"},{title:"Approved Leaves",value:d.total_approved_leaves||0,icon:e.jsx(fe,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Total approved days"},{title:"Pending Leaves",value:d.total_pending_leaves||0,icon:e.jsx(ue,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Awaiting approval"},{title:"Departments",value:d.departments_count||0,icon:e.jsx(j,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Active departments"}],[d]),h=l.useCallback((a,t)=>{const s={...i,[a]:t};A(s),R(s)},[i]),R=l.useCallback(a=>{C(!0),ne.Inertia.get(route("leave-summary"),a,{preserveState:!0,replace:!0,onFinish:()=>C(!1)})},[]),ae=l.useCallback(()=>{const a={year:new Date().getFullYear()};A(a),D(""),R(a)},[]),te=[{label:"Export Data",icon:e.jsx(_e,{className:"w-4 h-4"}),onPress:()=>{console.log("Export functionality")},className:B.primaryButton},{label:"Current Year",icon:e.jsx(be,{className:"w-4 h-4"}),onPress:()=>h("year",new Date().getFullYear()),className:B.secondaryButton}],re=l.useCallback((a,t)=>{const s=a[t];switch(t){case"employee_name":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-bold text-sm text-foreground",children:a.employee_name}),e.jsx("p",{className:"text-tiny text-default-400",children:a.department}),a.designation&&e.jsx("p",{className:"text-tiny text-default-500",children:a.designation})]});case"total_approved":case"total_pending":case"total_rejected":const u={total_approved:"success",total_pending:"warning",total_rejected:"danger"};return s>0?e.jsx(f,{size:"sm",variant:"flat",color:u[t],className:"min-w-12",children:s}):"";case"usage_percentage":const g=s||0,le=g>80?"danger":g>60?"warning":"success";return e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(Se,{size:"sm",value:g,color:le,className:"w-16"}),e.jsxs("span",{className:"text-tiny",children:[g,"%"]})]});case"total_balance":return e.jsx("div",{className:"text-center",children:e.jsx("span",{className:s<5?"text-danger":"text-foreground",children:s})});default:return s!=null&&s!==""?s:""}},[]),se=l.useMemo(()=>{const a=new Date().getFullYear();return Array.from({length:10},(t,s)=>a-s)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(ie,{title:w}),e.jsx(ce,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(ve,{in:!0,children:e.jsx(de,{children:e.jsx(pe,{title:"Leave Summary",subtitle:"Comprehensive employee leave analytics and reporting",icon:e.jsx($,{className:"w-8 h-8"}),variant:"gradient",actionButtons:te,children:e.jsxs("div",{className:"p-6",children:[e.jsx(xe,{stats:ee,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(we,{label:"Search Employees",placeholder:"Search by name or department...",InputProps:{startAdornment:e.jsx(Ne,{position:"start",children:e.jsx(ge,{className:"w-4 h-4"})})},value:o,onChange:a=>D(a.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"12px",color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&.Mui-focused fieldset":{borderColor:"var(--primary-color)"},"& input::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"var(--primary-color)"}}}})}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(Fe,{variant:"bordered",className:"bg-white/5",children:e.jsxs(L,{isIconOnly:N,color:x?"primary":"default",onPress:()=>W(!x),className:x?"bg-purple-500/20":"bg-white/5",children:[e.jsx(ye,{className:"w-4 h-4"}),!N&&e.jsx("span",{className:"ml-1",children:"Filters"})]})})})]}),x&&e.jsx(me,{in:!0,timeout:300,children:e.jsx("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(v,{label:"Year",variant:"bordered",selectedKeys:[String(i.year||F)],onSelectionChange:a=>{const t=Array.from(a)[0];t&&h("year",parseInt(t))},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:se.map(a=>e.jsx(n,{value:a,textValue:String(a),children:a},a))}),e.jsxs(v,{label:"Department",variant:"bordered",selectedKeys:i.department_id?[String(i.department_id)]:[],onSelectionChange:a=>{const t=Array.from(a)[0];h("department_id",t||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e.jsx(n,{value:"",textValue:"All Departments",children:"All Departments"},""),H.map(a=>e.jsx(n,{value:a.id,textValue:a.name,children:a.name},a.id))]}),e.jsxs(v,{label:"Leave Status",variant:"bordered",selectedKeys:i.status?[i.status]:[],onSelectionChange:a=>{const t=Array.from(a)[0];h("status",t||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e.jsx(n,{value:"",textValue:"All Status",children:"All Status"},""),e.jsx(n,{value:"Approved",textValue:"Approved",children:"Approved"},"Approved"),e.jsx(n,{value:"Pending",textValue:"Pending",children:"Pending"},"Pending"),e.jsx(n,{value:"Declined",textValue:"Declined",children:"Declined"},"Declined")]}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(L,{color:"primary",variant:"flat",onPress:ae,size:N?"sm":"md",children:"Clear Filters"})})]})})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs(Ce,{selectedKey:P,onSelectionChange:q,variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-primary",tab:"max-w-fit px-0 h-12"},children:[e.jsx(I,{title:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:"Employee Summary"})]})},"employee"),e.jsx(I,{title:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:"Department Summary"})]})},"department")]})}),P==="employee"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-default-400 text-small",children:["Total ",p.length," employees",o&&` (filtered from ${y.length})`]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-tiny text-default-400",children:"Rows per page:"}),e.jsxs(v,{size:"sm",selectedKeys:[String(m)],onSelectionChange:a=>{const t=Number(Array.from(a)[0]);X(t),E(1)},className:"w-20",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:[e.jsx(n,{value:"10",textValue:"10",children:"10"},"10"),e.jsx(n,{value:"15",textValue:"15",children:"15"},"15"),e.jsx(n,{value:"25",textValue:"25",children:"25"},"25"),e.jsx(n,{value:"50",textValue:"50",children:"50"},"50")]})]})]}),p.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(Y,{"aria-label":"Employee leave summary table",isHeaderSticky:!0,classNames:{wrapper:"max-h-[600px] bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground border-b border-white/10",td:"border-b border-white/5"},children:[e.jsxs(G,{children:[e.jsx(r,{children:"Employee"},"employee_name"),e.jsx(r,{align:"center",children:"JAN"},"JAN"),e.jsx(r,{align:"center",children:"FEB"},"FEB"),e.jsx(r,{align:"center",children:"MAR"},"MAR"),e.jsx(r,{align:"center",children:"APR"},"APR"),e.jsx(r,{align:"center",children:"MAY"},"MAY"),e.jsx(r,{align:"center",children:"JUN"},"JUN"),e.jsx(r,{align:"center",children:"JUL"},"JUL"),e.jsx(r,{align:"center",children:"AUG"},"AUG"),e.jsx(r,{align:"center",children:"SEP"},"SEP"),e.jsx(r,{align:"center",children:"OCT"},"OCT"),e.jsx(r,{align:"center",children:"NOV"},"NOV"),e.jsx(r,{align:"center",children:"DEC"},"DEC"),e.jsx(r,{align:"center",children:"Approved"},"total_approved"),e.jsx(r,{align:"center",children:"Pending"},"total_pending"),e.jsx(r,{align:"center",children:"Balance"},"total_balance"),e.jsx(r,{align:"center",children:"Usage"},"usage_percentage")]}),e.jsx(z,{items:Z,isLoading:Q,children:a=>e.jsx(U,{children:t=>e.jsx(c,{children:re(a,t)})},a.id)})]}),k>1&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(Ae,{total:k,page:_,onChange:E,showControls:!0,showShadow:!0,color:"primary"})})]}):e.jsx(M,{className:"bg-white/5 backdrop-blur-md border-white/10",children:e.jsxs(V,{className:"text-center py-12",children:[e.jsx($,{className:"w-16 h-16 mx-auto mb-4 text-default-300"}),e.jsx(b,{variant:"h6",className:"mb-2 text-white",children:"No Leave Data Found"}),e.jsx(b,{variant:"body2",className:"text-gray-400",children:o?`No employees found matching "${o}"`:`No leave summary data available for ${i.year||F}.`})]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{variant:"h6",className:"mb-4 text-white",children:"Department-wise Leave Summary"}),S.length>0?e.jsxs(Y,{"aria-label":"Department leave summary table",classNames:{wrapper:"bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground",td:"border-b border-white/5"},children:[e.jsxs(G,{children:[e.jsx(r,{children:"Department"}),e.jsx(r,{align:"center",children:"Employees"}),e.jsx(r,{align:"center",children:"Total Leaves"}),e.jsx(r,{align:"center",children:"Approved"}),e.jsx(r,{align:"center",children:"Pending"}),e.jsx(r,{align:"center",children:"Avg per Employee"})]}),e.jsx(z,{children:S.map((a,t)=>e.jsxs(U,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"font-medium",children:a.department})]})}),e.jsx(c,{className:"text-center",children:e.jsx(f,{size:"sm",variant:"flat",color:"default",children:a.employee_count})}),e.jsx(c,{className:"text-center",children:a.total_leaves}),e.jsx(c,{className:"text-center",children:e.jsx(f,{size:"sm",variant:"flat",color:"success",children:a.total_approved})}),e.jsx(c,{className:"text-center",children:e.jsx(f,{size:"sm",variant:"flat",color:"warning",children:a.total_pending})}),e.jsx(c,{className:"text-center",children:a.avg_leaves_per_employee})]},t))})]}):e.jsx(M,{className:"bg-white/5 backdrop-blur-md border-white/10",children:e.jsxs(V,{className:"text-center py-8",children:[e.jsx(j,{className:"w-12 h-12 mx-auto mb-4 text-default-300"}),e.jsx(b,{variant:"body1",className:"text-white",children:"No department data available"})]})})]})]})})})})})]})};Pe.layout=w=>e.jsx(je,{children:w});export{Pe as default};
