import{R as Ge,r as n,j as e,d as C,c as fe,b as ge,a as H,s as Q,S as Fe,Q as He}from"./app-DXLr2JSW.js";import{c as qe,e as Ye,f as Qe,g as Je,P as Se,k as be,D as ve,G as Xe,x as Ke,d as de,a as me,b as xe,m as re,j as Pe,v as he,C as et,A as tt}from"./Dashboard-BgmTgjvY.js";import{S as rt}from"./StatsCards-CZJSFQea.js";import{B as Z}from"./react-toastify.esm-B4SYOumr.js";import{F as ue}from"./ExclamationTriangleIcon-CFVB-8p0.js";import{F as Ee}from"./TrashIcon-DnohOAqU.js";import{c as J}from"./chunk-IHOGUXIG-afYFP2hg.js";import{m as at}from"./chunk-O5MCAK4F-DWIMe8eU.js";import{a as Te}from"./XMarkIcon-BGfbF9Wi.js";import{F as De}from"./UserIcon-BV5ND9Jr.js";import{F as Be}from"./CheckCircleIcon-BweZ2itk.js";import{p as st}from"./chunk-XVMALT6H-D_3JEBuH.js";import{F as nt}from"./WifiIcon-B7Nq_o_4.js";import{a as lt}from"./MapPinIcon-B1acBkvS.js";import{F as pe}from"./EllipsisVerticalIcon-BTxFNyNc.js";import{F as Oe}from"./PencilIcon-BfiST_Es.js";import{F as Ce}from"./ClockIcon-Dmmd6gvM.js";import{F as Re}from"./EnvelopeIcon-C_HcULvY.js";import{F as it}from"./HashtagIcon-GD3rtJO2.js";import{t as ot,a as ct,b as dt,c as mt}from"./chunk-F3UDT23P-Dk2lIbpy.js";import{t as xt,a as ht}from"./chunk-YRZGWF2W-G6JX6HYe.js";import{p as Ze}from"./chunk-EAPQ7RWQ-FoqBgYsM.js";import{F as pt}from"./TrophyIcon-Cjf4jvuU.js";import{F as Ue}from"./UserPlusIcon-Dp8OwCiy.js";import{F as ft}from"./ChartBarIcon-pJ-ciuRa.js";import{m as gt}from"./proxy-BobxGmBJ.js";import{F as ut}from"./MagnifyingGlassIcon-W4jVFiiM.js";import{F as bt}from"./TableCellsIcon-CeYKYklG.js";import{F as vt}from"./FunnelIcon-CEt1Qgw_.js";import{c as ze}from"./chunk-D5XJWRAV-IWtQpaSn.js";import{i as jt}from"./chunk-SSA7SXE4-HnglYb0P.js";import{b as yt}from"./chunk-57V4RE7B-Cr47ij1K.js";import"./UserGroupIcon-BY5YxbNr.js";import"./ShieldCheckIcon-BfeIckgd.js";import"./KeyIcon-BmXF0vMD.js";import"./index-DFms4NyZ.js";import"./chunk-Y2AYO5NJ-BEC47Sil.js";import"./logo-Pwvcz7fP.js";import"./features-animation-DXIcyXgY.js";import"./create-visual-element-CEYRf2zr.js";import"./chunk-TLYTI3QM-0veljl09.js";import"./useProgressBar-bmWxDD4J.js";import"./NumberFormatter-DNR9MAW-.js";import"./chunk-XJ2YRSUP-iGPeRevR.js";import"./useToggleState-BRBcX2FH.js";function Ve(g){return null}Ve.getCollectionNode=function*(m){let{children:a,title:p,items:j}=m;yield{type:"section",props:m,hasChildNodes:!0,rendered:p,"aria-label":m["aria-label"],*childNodes(){if(typeof a=="function"){if(!j)throw new Error("props.children was a function but props.items is missing");for(let f of j)yield{type:"item",value:f,renderer:a}}else{let f=[];Ge.Children.forEach(a,A=>{f.push({type:"item",element:A})}),yield*f}}}};let wt=Ve;var Nt=wt,_t=Nt;function kt({title:g,titleId:m,...a},p){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:p,"aria-labelledby":m},a),g?n.createElement("title",{id:m},g):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}const Ft=n.forwardRef(kt);function Pt({title:g,titleId:m,...a},p){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:p,"aria-labelledby":m},a),g?n.createElement("title",{id:m},g):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const We=n.forwardRef(Pt);function Ct({title:g,titleId:m,...a},p){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:p,"aria-labelledby":m},a),g?n.createElement("title",{id:m},g):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const Rt=n.forwardRef(Ct),St=({open:g,onClose:m,employee:a,onConfirm:p,loading:j=!1})=>{if(!a)return null;const f=a.active_projects_count>0||a.pending_leaves_count>0||a.active_trainings_count>0;return e.jsx(qe,{isOpen:g,onClose:m,size:"2xl",classNames:{backdrop:"bg-black/50 backdrop-blur-sm",base:"border border-white/20 bg-white/90 backdrop-blur-md",header:"border-b border-danger/30 bg-gradient-to-r from-danger-50/50 to-danger-100/30",body:"py-0",footer:"border-t border-white/10 bg-white/5"},children:e.jsxs(Ye,{children:[e.jsx(Qe,{className:"flex items-center gap-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-danger",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-danger/20 to-danger/10 flex items-center justify-center border border-danger/30",children:e.jsx(ue,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Delete Employee"})]})}),e.jsxs(Je,{children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 backdrop-blur-2xl border border-white/10 mb-6 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx(Se,{src:a.profile_image_url||a.profile_image,name:a.name,size:"lg",className:"ring-2 ring-white/20 shadow-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:a.name}),e.jsx("p",{className:"text-sm text-default-500",children:a.email}),a.employee_id&&e.jsxs("span",{className:"inline-block mt-1 px-3 py-1 text-xs rounded-lg bg-white/10 border border-white/10",children:["ID: ",a.employee_id]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(be,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Department"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.department_name||"Not assigned"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ve,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Designation"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.designation_name||"Not assigned"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 rounded-2xl bg-danger-50/50 backdrop-blur-2xl border border-danger/30",children:e.jsxs("div",{className:"flex items-center gap-3 text-danger",children:[e.jsx(ue,{className:"w-5 h-5"}),e.jsx("p",{className:"text-sm font-medium",children:"This action will permanently delete the employee record and cannot be undone."})]})}),f&&e.jsxs("div",{className:"p-6 rounded-2xl bg-warning-50/50 backdrop-blur-2xl border border-warning/30 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-warning/20 flex items-center justify-center",children:e.jsx(ue,{className:"w-4 h-4 text-warning"})}),e.jsx("h4",{className:"text-sm font-semibold text-warning",children:"Employee Has Active Data"})]}),e.jsx("p",{className:"text-sm text-default-500 mb-4",children:"This employee has the following active records that will also be affected:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.active_projects_count>0&&e.jsxs(J,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[a.active_projects_count," Active Projects"]}),a.pending_leaves_count>0&&e.jsxs(J,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[a.pending_leaves_count," Pending Leaves"]}),a.active_trainings_count>0&&e.jsxs(J,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[a.active_trainings_count," Active Trainings"]})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 border border-white/10 mb-4",children:[e.jsxs("p",{className:"text-sm mb-2 font-medium",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-danger font-semibold",children:a.name}),"?"]}),e.jsx("p",{className:"text-xs text-default-500",children:"Type the employee's name below to confirm this permanent deletion:"})]})]}),e.jsxs(at,{className:"flex justify-between px-6 py-6 bg-white/5",children:[e.jsx(C,{variant:"light",onPress:m,isDisabled:j,className:"hover:bg-white/10",children:"Cancel"}),e.jsx(C,{color:"danger",variant:"solid",onPress:p,isLoading:j,startContent:!j&&e.jsx(Ee,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-danger to-danger-600 hover:from-danger-600 hover:to-danger-700 shadow-lg",children:j?"Deleting...":"Delete Employee"})]})]})})},Et=({isOpen:g,onClose:m,employee:a,onImageUpdate:p})=>{const j=n.useRef(null),[f,A]=n.useState(null),[x,D]=n.useState(null),[M,T]=n.useState(!1),[q,y]=n.useState(0),[U,R]=n.useState(""),X=2*1024*1024,ae=["image/jpeg","image/jpg","image/png","image/webp"],V=100,K=2e3,ee=(a==null?void 0:a.profile_image_url)||null,$=ee&&ee!==null,z=S=>{const o=S.target.files[0];if(!o)return;if(R(""),!ae.includes(o.type)){R("Invalid file type. Please select a JPEG, PNG, or WebP image.");return}if(o.size>X){R(`File too large. Maximum size is ${X/1024/1024}MB.`);return}const h=new Image;h.onload=()=>{if(h.width<V||h.height<V){R(`Image dimensions too small. Minimum size is ${V}x${V} pixels.`);return}if(h.width>K||h.height>K){R(`Image dimensions too large. Maximum size is ${K}x${K} pixels.`);return}A(o),D(URL.createObjectURL(o))},h.onerror=()=>{R("Invalid image file.")},h.src=URL.createObjectURL(o)},E=async()=>{var o,h,u,c;if(!f||!a)return;T(!0),y(0),R("");const S=new FormData;S.append("profile_image",f),S.append("user_id",a.id);try{const N=await H.post(route("profile.image.upload"),S,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:k=>{const W=Math.round(k.loaded*100/k.total);y(W)}});if(N.data.success){if(Z.success(N.data.message||"Profile picture updated successfully!"),p){const k=N.data.profile_image_url;p(a.id,k)}L()}else throw new Error(N.data.message||"Upload failed")}catch(N){console.error("Upload error:",N);let k="Failed to upload profile picture";((o=N.response)==null?void 0:o.status)===413?k="File too large. Please choose a smaller image.":((h=N.response)==null?void 0:h.status)===422?k=N.response.data.message||"Validation failed":(c=(u=N.response)==null?void 0:u.data)!=null&&c.message?k=N.response.data.message:N.message&&(k=N.message),R(k),Z.error(k)}finally{T(!1),y(0)}},G=async()=>{var o,h;if(!a)return;T(!0),R("");const S=new FormData;S.append("user_id",a.id);try{const u=await H.delete(route("profile.image.remove"),{data:S,headers:{"Content-Type":"multipart/form-data"}});if(u.data.success){if(Z.success(u.data.message||"Profile picture removed successfully!"),p){const c=u.data.profile_image_url;p(a.id,c)}L()}else throw new Error(u.data.message||"Remove failed")}catch(u){console.error("Remove error:",u);const c=((h=(o=u.response)==null?void 0:o.data)==null?void 0:h.message)||u.message||"Failed to remove profile picture";R(c),Z.error(c)}finally{T(!1)}},L=()=>{M||(A(null),D(null),R(""),y(0),x&&URL.revokeObjectURL(x),m())};return a?e.jsx(Xe,{open:g,closeModal:L,maxWidth:"md",fullWidth:!0,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Update Profile Picture"}),e.jsx("p",{className:"text-sm text-gray-500",children:(a==null?void 0:a.name)||"Employee"})]})]}),e.jsx(C,{isIconOnly:!0,variant:"light",onPress:L,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Te,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(Ke,{src:x||ee||void 0,name:(a==null?void 0:a.name)||"Employee",size:"lg",className:"w-24 h-24",fallback:e.jsx(De,{className:"w-12 h-12 text-gray-400"})})}),U&&e.jsx(J,{color:"danger",variant:"flat",startContent:e.jsx(ue,{className:"w-4 h-4"}),className:"mb-4 w-full",children:U}),M&&e.jsx("div",{className:"mb-4",children:e.jsx(st,{value:q,color:"primary",size:"sm",label:"Uploading...",showValueLabel:!0,className:"w-full"})}),e.jsx(fe,{className:"mb-4",children:e.jsxs(ge,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("input",{ref:j,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:z,className:"hidden",disabled:M}),e.jsx(C,{onPress:()=>{var S;return(S=j.current)==null?void 0:S.click()},startContent:e.jsx(We,{className:"w-5 h-5"}),variant:"flat",color:"primary",disabled:M,className:"mb-3",children:"Choose New Picture"}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Supported formats: JPEG, PNG, WebP"}),e.jsx("p",{children:"Maximum size: 2MB"}),e.jsx("p",{children:"Minimum dimensions: 100x100px"}),e.jsx("p",{children:"Maximum dimensions: 2000x2000px"})]})]}),f&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(f.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(C,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>{A(null),D(null),R("")},disabled:M,children:e.jsx(Te,{className:"w-4 h-4"})})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[$&&e.jsx(C,{onPress:G,startContent:e.jsx(Ee,{className:"w-4 h-4"}),color:"danger",variant:"flat",disabled:M,children:"Remove Picture"}),e.jsx(C,{onPress:L,variant:"flat",disabled:M,children:"Cancel"}),e.jsx(C,{onPress:E,color:"primary",disabled:!f||M,isLoading:M,children:M?"Uploading...":"Update Picture"})]})]})}):null},Dt=({allUsers:g,departments:m,designations:a,attendanceTypes:p,setUsers:j,isMobile:f,isTablet:A,pagination:x,onPageChange:D,onRowsPerPageChange:M,totalUsers:T=0,loading:q=!1,updateEmployeeOptimized:y,deleteEmployeeOptimized:U})=>{const[R,X]=n.useState(!1),[ae,V]=n.useState(null),[K,ee]=n.useState({}),[$,z]=n.useState(!1),[E,G]=n.useState(null),[L,S]=n.useState(!1),[o,h]=n.useState({isOpen:!1,employee:null}),u=()=>{var i;if(typeof window>"u")return"lg";const s=((i=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:i.trim())||"12px",d=parseInt(s);return d===0?"none":d<=4?"sm":d<=8?"md":d<=16?"lg":"full"},c=t=>t?t.replace(/_\d+$/,""):"",N=t=>{const s=t==null?void 0:t.config;if(!s)return!1;switch(c(t.slug)){case"geo_polygon":return s.polygon&&s.polygon.length>=3||s.polygons&&s.polygons.some(i=>{var v;return((v=i.points)==null?void 0:v.length)>=3});case"wifi_ip":return s.allowed_ips&&s.allowed_ips.length>0||s.allowed_ranges&&s.allowed_ranges.length>0||s.ip_locations&&s.ip_locations.some(i=>{var v,_;return((v=i.allowed_ips)==null?void 0:v.length)>0||((_=i.allowed_ranges)==null?void 0:_.length)>0});case"route_waypoint":return s.waypoints&&s.waypoints.length>=2||s.routes&&s.routes.some(i=>{var v;return((v=i.waypoints)==null?void 0:v.length)>=2});case"qr_code":return s.code||s.qr_codes&&s.qr_codes.length>0;default:return!1}},k={geo_polygon:{title:"Geo Polygon",icon:lt,color:"warning"},wifi_ip:{title:"WiFi/IP",icon:nt,color:"secondary"},route_waypoint:{title:"Route Waypoint",icon:Ft,color:"primary"},qr_code:{title:"QR Code",icon:Rt,color:"success"}},W=n.useMemo(()=>{if(!p)return[];const t={};return p.forEach(s=>{if(!s.is_active||!N(s))return;const d=c(s.slug);k[d]&&(t[d]||(t[d]={...k[d],slug:d,types:[]}),t[d].types.push(s))}),Object.values(t).filter(s=>s.types.length>0)},[p]),je=async(t,s)=>{const d=new Promise(async(i,v)=>{try{if((await H.post(route("user.updateDepartment",{id:t}),{department:s})).status===200){const w=m.find(b=>b.id===parseInt(s))||null;y==null||y(t,{department_id:s,department_name:(w==null?void 0:w.name)||null,designation_id:null,designation_name:null}),i("Department updated successfully")}}catch(_){console.error("Error updating department:",_),v("Failed to update department")}});Z.promise(d,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(Q,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating department..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},se=async(t,s)=>{const d=new Promise(async(i,v)=>{try{if((await H.post(route("user.updateDesignation",{id:t}),{designation_id:s})).status===200){const w=a.find(b=>b.id===parseInt(s))||null;y==null||y(t,{designation_id:s,designation_name:(w==null?void 0:w.title)||null}),i("Designation updated successfully")}}catch(_){console.error("Error updating designation:",_),v("Failed to update designation")}});Z.promise(d,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(Q,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating designation..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},ye=async(t,s)=>{const d=new Promise(async(i,v)=>{try{if((await H.post(route("user.updateAttendanceType",{id:t}),{attendance_type_id:s})).status===200){const w=p.find(b=>b.id===parseInt(s))||null;y&&y(t,{attendance_type_id:s,attendance_type_name:(w==null?void 0:w.name)||null}),i("Attendance type updated successfully")}}catch(_){console.error("Error updating attendance type:",_),v("Failed to update attendance type")}});Z.promise(d,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(Q,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating attendance type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},we=t=>{G(t),z(!0)},Ne=async()=>{if(!E)return;S(!0);const t=new Promise(async(s,d)=>{var i,v,_,w;try{(await H.delete(route("user.delete",{id:E.id}))).status===200&&(U&&U(E.id),z(!1),G(null),s("Employee deleted successfully"))}catch(b){console.error("Error deleting employee:",b);let O="Failed to delete employee";((i=b.response)==null?void 0:i.status)===403?O="You do not have permission to delete this employee":((v=b.response)==null?void 0:v.status)===404?O="Employee not found or already deleted":(w=(_=b.response)==null?void 0:_.data)!=null&&w.error&&(O=b.response.data.error),d(O)}finally{S(!1)}});Z.promise(t,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(Q,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting employee..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:s}){return e.jsx("div",{children:s})},icon:"âœ…",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:s}){return e.jsx("div",{children:s})},icon:"âŒ",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},_e=()=>{z(!1),G(null)},ke=t=>{h({isOpen:!0,employee:t})},ne=()=>{h({isOpen:!1,employee:null})},le=(t,s)=>{y&&y(t,{profile_image_url:s})},ie=n.useMemo(()=>{const t=[{name:"#",uid:"sl",width:60},{name:"EMPLOYEE",uid:"employee",width:"auto",minWidth:200},{name:"DEPARTMENT",uid:"department",width:180},{name:"DESIGNATION",uid:"designation",width:180},{name:"ACTIONS",uid:"actions",width:80}];return f||t.splice(2,0,{name:"CONTACT",uid:"contact",width:220}),!f&&!A&&t.splice(t.length-1,0,{name:"ATTENDANCE TYPE",uid:"attendance_type",width:180}),t},[f,A]),oe=(t,s,d)=>{const i=t[s],w=(x!=null&&x.currentPage&&(x!=null&&x.perPage)?Number((x.currentPage-1)*x.perPage):0)+(typeof d=="number"?d:0)+1;switch(s){case"sl":return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e.jsx("span",{className:"text-sm font-semibold text-foreground",children:w})})});case"employee":return e.jsxs("div",{className:"min-w-max",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{src:(t==null?void 0:t.profile_image_url)||(t==null?void 0:t.profile_image),name:t==null?void 0:t.name,size:f?"sm":"md",onClick:()=>ke(t)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"font-semibold text-foreground text-left whitespace-nowrap",children:t==null?void 0:t.name}),!f&&e.jsxs("p",{className:"text-default-500 text-left text-xs whitespace-nowrap",children:["ID: ",(t==null?void 0:t.employee_id)||"N/A"]})]})]}),f&&e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(it,{className:"w-3 h-3"}),(t==null?void 0:t.employee_id)||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Re,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(Pe,{className:"w-3 h-3"}),t==null?void 0:t.phone]})]})]});case"contact":return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Re,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Pe,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:t==null?void 0:t.phone})]})]});case"department":return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(de,{children:[e.jsx(me,{children:e.jsx(C,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e.jsx(be,{className:"w-4 h-4"}),endContent:e.jsx(pe,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:t.department_name||"Select Department"})})}),e.jsx(xe,{"aria-label":"Department options",children:m==null?void 0:m.map(F=>e.jsx(re,{onPress:()=>je(t.id,F.id),children:F.name},F.id.toString()))})]})});case"designation":const b=t.department_id,O=(a==null?void 0:a.filter(F=>F.department_id===parseInt(b)))||[];return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(de,{isDisabled:!b,children:[e.jsx(me,{children:e.jsx(C,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[150px] transition-all duration-300 ${b?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,isDisabled:!b,startContent:e.jsx(ve,{className:"w-4 h-4"}),endContent:b&&e.jsx(pe,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:b?t.designation_name||"Select Designation":"Select Department First"})})}),e.jsx(xe,{"aria-label":"Designation options",children:O.map(F=>e.jsx(re,{onPress:()=>se(t.id,F.id),children:F.title},F.id.toString()))})]})});case"attendance_type":const Y=W.length>0;return e.jsx("div",{className:"flex flex-col gap-2 min-w-[180px]",children:e.jsxs(de,{isDisabled:!Y,children:[e.jsx(me,{children:e.jsx(C,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[180px] transition-all duration-300 ${Y?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,startContent:e.jsx(Ce,{className:"w-4 h-4"}),endContent:Y&&e.jsx(pe,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{className:"truncate",children:Y?t.attendance_type_name||"Select Type":"No Types Configured"})})}),e.jsx(xe,{"aria-label":"Attendance Type options",className:"min-w-[200px]",children:W.map((F,r)=>(F.icon,e.jsx(_t,{title:F.title,showDivider:r<W.length-1,classNames:{heading:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-default-500 px-2 py-1"},children:F.types.map(l=>{var P;return e.jsx(re,{onPress:()=>ye(t.id,l.id),startContent:e.jsx("span",{className:"text-base",children:l.icon||"ðŸ“"}),description:((P=l.description)==null?void 0:P.substring(0,30))||null,children:l.name},l.id.toString())})},F.slug)))})]})});case"actions":return e.jsx("div",{className:"relative flex justify-center items-center",children:e.jsxs(de,{children:[e.jsx(me,{children:e.jsx(C,{isIconOnly:!0,variant:"light",className:"text-default-400 hover:text-foreground transition-all duration-300",children:e.jsx(pe,{className:"w-5 h-5"})})}),e.jsxs(xe,{"aria-label":"Employee Actions",children:[e.jsx(re,{startContent:e.jsx(Oe,{className:"w-4 h-4"}),onPress:()=>Fe.visit(route("profile",{user:t.id})),children:"Edit Profile"},"edit"),e.jsx(re,{className:"text-danger",color:"danger",startContent:e.jsx(Ee,{className:"w-4 h-4"}),onPress:()=>we(t),children:"Delete"},"delete")]})]})});default:return i}},ce=()=>!x||q?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2",style:{borderTop:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",backdropFilter:"blur(16px)"},children:[e.jsxs("span",{className:"text-xs mb-3 sm:mb-0 opacity-70",style:{color:"var(--theme-foreground)"},children:["Showing ",(x.currentPage-1)*x.perPage+1," to ",Math.min(x.currentPage*x.perPage,x.total)," of ",x.total," employees"]}),e.jsx(Ze,{total:Math.ceil(x.total/x.perPage),initialPage:x.currentPage,page:x.currentPage,onChange:D,size:f?"sm":"md",variant:"bordered",showControls:!0,style:{"--pagination-item-bg":"color-mix(in srgb, var(--theme-content2) 50%, transparent)","--pagination-item-border":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}})]});return e.jsxs("div",{className:"w-full overflow-hidden flex flex-col relative",style:{maxHeight:"calc(100vh - 200px)",background:"color-mix(in srgb, var(--theme-content1) 85%, transparent)",backdropFilter:"blur(16px)",border:"1px solid color-mix(in srgb, var(--theme-content2) 50%, transparent)",borderRadius:u()},children:[q&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50",style:{background:"color-mix(in srgb, var(--theme-content1) 20%, transparent)",backdropFilter:"blur(8px)",borderRadius:u()},children:e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:u(),backdropFilter:"blur(16px)"},children:[e.jsx(Q,{size:"lg",color:"primary"}),e.jsx("span",{className:"text-sm",style:{color:"var(--theme-foreground)"},children:"Loading employees..."})]})}),e.jsx("div",{className:"overflow-auto grow",children:e.jsxs(ot,{"aria-label":"Employees table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"backdrop-blur-md font-medium text-xs sticky top-0 z-10 whitespace-nowrap",td:"py-3 whitespace-nowrap",table:"border-collapse table-auto",thead:"",tr:"hover:opacity-80 transition-all duration-200"},style:{"--table-header-bg":"color-mix(in srgb, var(--theme-content2) 60%, transparent)","--table-row-hover":"color-mix(in srgb, var(--theme-content2) 30%, transparent)","--table-border":"color-mix(in srgb, var(--theme-content3) 30%, transparent)"},isHeaderSticky:!0,isCompact:f,children:[e.jsx(xt,{columns:ie,children:t=>e.jsx(ht,{align:t.uid==="actions"||t.uid==="sl"?"center":"start",width:t.width,minWidth:t.minWidth,className:`backdrop-blur-md ${t.uid==="employee"?"whitespace-nowrap":""}`,style:{backgroundColor:"color-mix(in srgb, var(--theme-content2) 60%, transparent)",color:"var(--theme-foreground)",borderBottom:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)"},children:t.name},t.uid)}),e.jsx(ct,{items:g||[],emptyContent:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(De,{className:"w-12 h-12 mb-4 opacity-40",style:{color:"var(--theme-foreground)"}}),e.jsx("h6",{className:"text-lg font-semibold mb-2",style:{color:"var(--theme-foreground)"},children:"No employees found"}),e.jsx("p",{className:"text-sm opacity-70",style:{color:"var(--theme-foreground)"},children:"Try adjusting your search or filter criteria"})]}),loadingContent:e.jsx(Q,{}),isLoading:q,children:(t,s)=>{const d=g?g.findIndex(i=>i.id===t.id):s;return e.jsx(dt,{className:"transition-all duration-200 hover:scale-[1.01]",style:{color:"var(--theme-foreground)",borderBottom:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)"},children:i=>e.jsx(mt,{className:"transition-all duration-300",children:e.jsx("div",{className:"transition-all duration-200",children:oe(t,i,d)})})},t.id)}})]})}),ce(),e.jsx(St,{open:$,onClose:_e,employee:E,onConfirm:Ne,loading:L}),e.jsx(Et,{isOpen:o.isOpen,onClose:ne,employee:o.employee,onImageUpdate:le})]})},Mt=({title:g,departments:m,designations:a,attendanceTypes:p})=>{var ne,le,ie,oe,ce,t,s,d,i,v,_,w,b,O,Y,F;const[j,f]=n.useState(!1),[A,x]=n.useState(!1),[D,M]=n.useState(!1),[T,q]=n.useState(!1);n.useEffect(()=>{const r=()=>{f(window.innerWidth<640),x(window.innerWidth<768),M(window.innerWidth>=1025),q(window.innerWidth>=641&&window.innerWidth<=1024)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const[y,U]=n.useState([]),[R,X]=n.useState(!0),[ae,V]=n.useState(0),[K,ee]=n.useState(1),[$,z]=n.useState({search:"",department:"all",designation:"all",attendanceType:"all"}),[E,G]=n.useState("table"),[L,S]=n.useState(!1),[o,h]=n.useState({currentPage:1,perPage:10,total:0}),u=()=>{var I;if(typeof window>"u")return"lg";const l=((I=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:I.trim())||"12px",P=parseInt(l);return P===0?"none":P<=4?"sm":P<=8?"md":P<=16?"lg":"full"},[c,N]=n.useState({overview:{total_employees:0,active_employees:0,inactive_employees:0,total_departments:0,total_designations:0,total_attendance_types:0},distribution:{by_department:[],by_designation:[],by_attendance_type:[]},hiring_trends:{recent_hires:{last_30_days:0,last_90_days:0,last_year:0},monthly_growth_rate:0,current_month_hires:0},workforce_health:{status_ratio:{active_percentage:0,inactive_percentage:0,retention_rate:0},retention_rate:0,turnover_rate:0},quick_metrics:{headcount:0,active_ratio:0,department_diversity:0,role_diversity:0,recent_activity:0}}),k=n.useCallback(async()=>{X(!0);try{const{data:r}=await H.get(route("employees.paginate"),{params:{page:o.currentPage,perPage:o.perPage,search:$.search,department:$.department,designation:$.designation,attendanceType:$.attendanceType}});U(r.employees.data),V(r.employees.total),ee(r.employees.last_page),h(l=>({...l,total:r.employees.total})),r.stats&&N(r.stats)}catch(r){console.error("Error fetching employees:",r),Z.error("Failed to load employees data")}finally{X(!1)}},[o.currentPage,o.perPage,$]),W=n.useCallback(async()=>{try{const{data:r}=await H.get(route("employees.stats"));r.stats&&N(r.stats)}catch(r){console.error("Error fetching employee stats:",r)}},[]);n.useEffect(()=>{k(),W()},[k,W]);const je=n.useCallback(r=>{z(l=>({...l,search:r})),h(l=>({...l,currentPage:1}))},[]);n.useCallback(r=>{z(l=>({...l,department:r,designation:r!=="all"?"all":l.designation})),h(l=>({...l,currentPage:1}))},[]),n.useCallback(r=>{z(l=>({...l,designation:r})),h(l=>({...l,currentPage:1}))},[]),n.useCallback(r=>{z(l=>({...l,attendanceType:r})),h(l=>({...l,currentPage:1}))},[]);const se=n.useCallback(r=>{h(l=>({...l,currentPage:r}))},[]),ye=n.useCallback(r=>{h(l=>({...l,perPage:r,currentPage:1}))},[]),we=n.useCallback((r,l)=>{U(P=>P.map(I=>I.id===r?{...I,...l}:I))},[]),Ne=n.useCallback(r=>{U(l=>l.filter(P=>P.id!==r)),V(l=>l-1),h(l=>({...l,total:l.total-1})),W()},[W]);n.useMemo(()=>$.department==="all"?a:a.filter(r=>r.department_id===parseInt($.department)),[a,$.department]);const _e=n.useMemo(()=>{var r,l,P,I,te,B,Me,$e,Ie,Ae,Le;return[{title:"Total Employees",value:((r=c.overview)==null?void 0:r.total_employees)||0,icon:e.jsx(he,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Headcount"},{title:"Active Employees",value:((l=c.overview)==null?void 0:l.active_employees)||0,icon:e.jsx(Be,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((I=(P=c.workforce_health)==null?void 0:P.status_ratio)==null?void 0:I.active_percentage)||0}% Active`},{title:"Departments",value:((te=c.overview)==null?void 0:te.total_departments)||0,icon:e.jsx(be,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Department Diversity"},{title:"Designations",value:((B=c.overview)==null?void 0:B.total_designations)||0,icon:e.jsx(ve,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Role Diversity"},{title:"Retention Rate",value:`${((Me=c.workforce_health)==null?void 0:Me.retention_rate)||0}%`,icon:e.jsx(pt,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Employee Retention"},{title:"Recent Hires",value:((Ie=($e=c.hiring_trends)==null?void 0:$e.recent_hires)==null?void 0:Ie.last_30_days)||0,icon:e.jsx(Ue,{}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 Days"},{title:"Growth Rate",value:`${((Ae=c.hiring_trends)==null?void 0:Ae.monthly_growth_rate)||0}%`,icon:e.jsx(ft,{}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Monthly Growth"},{title:"Attendance Types",value:((Le=c.overview)==null?void 0:Le.total_attendance_types)||0,icon:e.jsx(Ce,{}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Available Types"}]},[c]),ke=({user:r,index:l})=>{const P=m==null?void 0:m.find(B=>B.id===r.department_id),I=a==null?void 0:a.find(B=>B.id===r.designation_id),te=p==null?void 0:p.find(B=>B.id===r.attendance_type_id);return e.jsx(fe,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>Fe.visit(route("profile",{user:r.id})),children:e.jsxs(ge,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(Se,{src:(r==null?void 0:r.profile_image_url)||(r==null?void 0:r.profile_image),name:r==null?void 0:r.name,size:"md",fallback:e.jsx(De,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-semibold text-foreground text-left text-sm",children:r==null?void 0:r.name}),e.jsxs("span",{className:"text-default-500 text-left text-xs",children:["ID: ",(r==null?void 0:r.employee_id)||"N/A"]})]}),e.jsx("div",{className:"flex-1 min-w-0 flex justify-end",children:e.jsx(C,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:B=>{B.stopPropagation(),Fe.visit(route("profile",{user:r.id}))},children:e.jsx(Oe,{className:"w-4 h-4"})})})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-3",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Re,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs truncate",children:r==null?void 0:r.email})]}),(r==null?void 0:r.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Pe,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs",children:r==null?void 0:r.phone})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[P&&e.jsx(J,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e.jsx(be,{className:"w-3 h-3"}),children:P.name}),I&&e.jsx(J,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e.jsx(ve,{className:"w-3 h-3"}),children:I.title}),te&&e.jsx(J,{size:"sm",variant:"bordered",className:"text-xs",startContent:e.jsx(Ce,{className:"w-3 h-3"}),children:te.name})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(He,{title:g||"Employee Directory"}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Employee Directory Management",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(gt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(fe,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(ze,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${D?"p-6":T?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                              ${D?"p-3":T?"p-2.5":"p-2"} 
                              rounded-xl flex items-center justify-center
                            `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(he,{className:`
                                ${D?"w-8 h-8":T?"w-6 h-6":"w-5 h-5"}
                              `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                ${D?"text-2xl":T?"text-xl":"text-lg"}
                                font-bold text-foreground
                                ${D?"":"truncate"}
                              `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Directory"}),e.jsx("p",{className:`
                                ${D?"text-sm":"text-xs"} 
                                text-default-500
                                ${D?"":"truncate"}
                              `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage employee information and organizational structure"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(C,{className:"text-white font-medium",style:{background:"linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary) 80%, var(--theme-secondary)))",borderRadius:u()},startContent:e.jsx(Ue,{className:"w-4 h-4"}),children:j?"Add":"Add Employee"})})]})})})}),e.jsxs(ge,{className:"p-6",children:[e.jsx(rt,{stats:_e,className:"mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"p-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:u(),backdropFilter:"blur(16px)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--theme-foreground)"},children:"Department Distribution"}),e.jsx("div",{className:"space-y-3",children:(le=(ne=c.distribution)==null?void 0:ne.by_department)==null?void 0:le.slice(0,5).map((r,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 rounded-full overflow-hidden",style:{background:"color-mix(in srgb, var(--theme-content3) 40%, transparent)"},children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${r.percentage}%`,background:"linear-gradient(90deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary) 80%, var(--theme-secondary)))"}})}),e.jsx("span",{className:"text-xs w-8 opacity-70",style:{color:"var(--theme-foreground)"},children:r.count})]})]},l))})]}),e.jsxs("div",{className:"p-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:u(),backdropFilter:"blur(16px)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--theme-foreground)"},children:"Hiring Trends"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:"Last 30 Days"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--theme-foreground)"},children:((oe=(ie=c.hiring_trends)==null?void 0:ie.recent_hires)==null?void 0:oe.last_30_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:"Last 90 Days"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--theme-foreground)"},children:((t=(ce=c.hiring_trends)==null?void 0:ce.recent_hires)==null?void 0:t.last_90_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"This Year"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((d=(s=c.hiring_trends)==null?void 0:s.recent_hires)==null?void 0:d.last_year)||0})]}),e.jsx("div",{className:"pt-2 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Monthly Growth"}),e.jsxs("span",{className:`text-sm font-medium ${(((i=c.hiring_trends)==null?void 0:i.monthly_growth_rate)||0)>=0?"text-green-400":"text-red-400"}`,children:[((v=c.hiring_trends)==null?void 0:v.monthly_growth_rate)||0,"%"]})]})})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Workforce Health"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Retention Rate"}),e.jsxs("span",{className:"text-sm font-medium text-green-400",children:[((_=c.workforce_health)==null?void 0:_.retention_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Turnover Rate"}),e.jsxs("span",{className:"text-sm font-medium text-orange-400",children:[((w=c.workforce_health)==null?void 0:w.turnover_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Active Employees"}),e.jsxs("span",{className:"text-sm font-medium text-blue-400",children:[((O=(b=c.workforce_health)==null?void 0:b.status_ratio)==null?void 0:O.active_percentage)||0,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Attendance Types"}),e.jsx("div",{className:"space-y-3",children:(F=(Y=c.distribution)==null?void 0:Y.by_attendance_type)==null?void 0:F.map((r,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-linear-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${r.percentage}%`}})}),e.jsx("span",{className:"text-xs text-default-500 w-8",children:r.count})]})]},l))})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsx(jt,{label:"Search Employees",placeholder:"Search by name, email, or employee ID...",value:$.search,onChange:r=>je(r.target.value),startContent:e.jsx(ut,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:u(),classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Search employees"})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(yt,{variant:"bordered",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:u()},children:[e.jsxs(C,{isIconOnly:j,color:E==="table"?"primary":"default",onPress:()=>G("table"),style:{background:E==="table"?"var(--theme-primary)":"transparent",color:E==="table"?"white":"var(--theme-foreground)"},children:[e.jsx(bt,{className:"w-4 h-4"}),!j&&e.jsx("span",{className:"ml-1",children:"Table"})]}),e.jsxs(C,{isIconOnly:j,color:E==="grid"?"primary":"default",onPress:()=>G("grid"),style:{background:E==="grid"?"var(--theme-primary)":"transparent",color:E==="grid"?"white":"var(--theme-foreground)"},children:[e.jsx(et,{className:"w-4 h-4"}),!j&&e.jsx("span",{className:"ml-1",children:"Grid"})]})]}),e.jsx(C,{isIconOnly:!0,variant:"bordered",onPress:()=>S(!L),style:{background:L?"color-mix(in srgb, var(--theme-primary) 20%, transparent)":"color-mix(in srgb, var(--theme-content2) 30%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",color:L?"var(--theme-primary)":"var(--theme-foreground)",borderRadius:u()},children:e.jsx(vt,{className:"w-4 h-4"})})]})]})}),e.jsxs(fe,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                      var(--theme-content1, #FAFAFA) 20%, 
                      var(--theme-content2, #F4F4F5) 10%, 
                      var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(ze,{className:"border-b pb-2",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)"},children:e.jsx(he,{className:"w-6 h-6",style:{color:"var(--theme-primary)"}})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Directory"})]})}),e.jsx(ge,{children:e.jsx("div",{className:"max-h-[84vh] overflow-y-auto",children:R?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Q,{size:"lg",color:"primary"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading employees data..."})]}):E==="table"?e.jsx(Dt,{allUsers:y,departments:m,designations:a,attendanceTypes:p,setUsers:U,isMobile:j,isTablet:A,pagination:o,onPageChange:se,onRowsPerPageChange:ye,totalUsers:ae,loading:R,updateEmployeeOptimized:we,deleteEmployeeOptimized:Ne}):e.jsxs("div",{className:"p-4",children:[y.length>0?e.jsx("div",{className:`grid gap-4 ${j?"grid-cols-1":A?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:y.map((r,l)=>e.jsx(ke,{user:r,index:l},r.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(he,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e.jsx("p",{className:"text-base text-default-500",children:"No employees found"}),e.jsx("p",{className:"text-sm text-default-500",children:"Try adjusting your search or filters"})]}),y.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2",style:{borderTop:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",backdropFilter:"blur(16px)"},children:[e.jsxs("span",{className:"text-xs mb-3 sm:mb-0 opacity-70",style:{color:"var(--theme-foreground)"},children:["Showing ",(o.currentPage-1)*o.perPage+1," to ",Math.min(o.currentPage*o.perPage,o.total)," of ",o.total," employees"]}),e.jsx(Ze,{total:Math.ceil(o.total/o.perPage),initialPage:o.currentPage,page:o.currentPage,onChange:se,size:j?"sm":"md",variant:"bordered",showControls:!0,style:{"--pagination-item-bg":"color-mix(in srgb, var(--theme-content2) 50%, transparent)","--pagination-item-border":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}})]})]})})})]})]})]})})})})})]})};Mt.layout=g=>e.jsx(tt,{children:g});export{Mt as default};
