import{r,j as e,Q as os,d as l,F as cs,b as se,s as ds,a as w,c as ms,K as be,A as Se}from"./app-C-B7qC59.js";import{G as Me}from"./GlassCard-D9QMbUyN.js";import{y as te,z as Fe,A as us,h as z,i as $,j as I,k as D,B as ke,C as ae,e as re,f as ie,g as le,m as j,D as ps,E as hs}from"./Dashboard-DIFK-c22.js";import{P as xs}from"./PageHeader-jJq7VBgE.js";import{S as fs}from"./StatsCards-D9kQNtuD.js";import{s as d}from"./toastUtils-5-e4yC6y.js";import{F as Ee}from"./DocumentIcon-liDe2Pd-.js";import{F as js}from"./ShieldCheckIcon-CffM_rOf.js";import{F as ne}from"./PlusIcon-B26qsUDN.js";import{F as gs}from"./MagnifyingGlassIcon-CXTpRG8Y.js";import{s as oe}from"./chunk-TQNYOUFX-5xjx48W3.js";import{m as L}from"./chunk-O5MCAK4F-CrOeDBri.js";import{c as vs}from"./chunk-XJ2YRSUP-BClKtF6G.js";import{F as ce}from"./EllipsisVerticalIcon-DBmpca_g.js";import{F as de}from"./PencilSquareIcon-BWLhozXZ.js";import{F as me}from"./KeyIcon-D7xKtFIJ.js";import{F as ue}from"./TrashIcon-v6pQdJk9.js";import{m as Re}from"./proxy-DaXjLD9M.js";import{t as ys,F as Cs}from"./XMarkIcon-DEBgEZIu.js";import{i as n}from"./chunk-SSA7SXE4-Cly-uwIa.js";import{s as H,l as F}from"./chunk-Y2AYO5NJ-CVm9bu3V.js";import{c as ws}from"./chunk-D5XJWRAV-CvAPN2iv.js";import{c as g}from"./chunk-IHOGUXIG-guIQYe_o.js";import"./MapPinIcon-BtI6ukDP.js";import"./EnvelopeIcon-vKmwvqy-.js";import"./UserGroupIcon-DZNhQXDZ.js";import"./ClockIcon-KDUDcXBA.js";import"./UserIcon-B1pQWBbr.js";import"./index-BgyJOU24.js";import"./logo-Pwvcz7fP.js";import"./features-animation-Cn3P6Pqu.js";import"./create-visual-element-CBAuT-PO.js";import"./CheckCircleIcon-B2ss00QP.js";import"./ExclamationTriangleIcon-lpECprAZ.js";import"./chunk-TLYTI3QM-izbvUkI3.js";import"./useToggleState-Cx4s2z1o.js";function Ns({title:h,titleId:v,...b},S){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:S,"aria-labelledby":v},b),h?r.createElement("title",{id:v},h):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 0 1-1.125-1.125v-3.75ZM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-8.25ZM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-2.25Z"}))}const _s=r.forwardRef(Ns);function bs({title:h,titleId:v,...b},S){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:S,"aria-labelledby":v},b),h?r.createElement("title",{id:v},h):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75 2.25 12l4.179 2.25m0-4.5 5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0 4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0-5.571 3-5.571-3"}))}const Ss=r.forwardRef(bs),Ms={page:e.jsx(Ee,{className:"w-4 h-4"}),section:e.jsx(_s,{className:"w-4 h-4"}),widget:e.jsx(hs,{className:"w-4 h-4"}),action:e.jsx(ps,{className:"w-4 h-4"}),api:e.jsx(Cs,{className:"w-4 h-4"})},Oe={page:"primary",section:"secondary",widget:"success",action:"warning",api:"danger"},Fs={core_system:"primary",self_service:"secondary",human_resources:"success",project_management:"warning",document_management:"default",customer_relations:"primary",supply_chain:"secondary",retail_sales:"success",financial_management:"warning",system_administration:"danger"},ks=(h,v)=>{const[b,S]=r.useState(h);return r.useEffect(()=>{const A=setTimeout(()=>{S(h)},v);return()=>clearTimeout(A)},[h,v]),b},ut=h=>{var _e;const{modules:v=[],permissions:b=[],statistics:S={},categories:A={},componentTypes:Pe={},title:pe="Module Permission Registry"}=h,[he,ze]=r.useState(v),[R,$e]=r.useState(S),[M,u]=r.useState(!1),[xe,Ie]=r.useState(""),[q,De]=r.useState("all"),[O,Le]=r.useState("all"),[Ae,qe]=r.useState(new Set),[Ue,Te]=r.useState(new Set),[Ve,U]=r.useState(!1),[Be,T]=r.useState(!1),[Ke,V]=r.useState(!1),[Qe,B]=r.useState(!1),[Ge,K]=r.useState(!1),[Q,fe]=r.useState(null),[G,je]=r.useState(null),[Z,ge]=r.useState(null),[Ze,He]=r.useState(null),[We,Je]=r.useState(null),[o,ve]=r.useState(null),[x,Xe]=r.useState(null),[i,y]=r.useState({code:"",name:"",description:"",icon:"",category:"core_system",route_prefix:"",is_active:!0,priority:100}),[c,C]=r.useState({code:"",name:"",description:"",icon:"",route:"",is_active:!0,priority:100}),[m,N]=r.useState({code:"",name:"",description:"",type:"page",route:"",is_active:!0}),[E,W]=r.useState([]),P=ks(xe,300),J=r.useMemo(()=>he.filter(s=>{var _;const t=!P||s.name.toLowerCase().includes(P.toLowerCase())||s.code.toLowerCase().includes(P.toLowerCase())||((_=s.description)==null?void 0:_.toLowerCase().includes(P.toLowerCase())),a=q==="all"||s.category===q,p=O==="all"||O==="active"&&s.is_active||O==="inactive"&&!s.is_active;return t&&a&&p}),[he,P,q,O]),Ye=r.useMemo(()=>[{title:"Total Modules",value:R.total_modules||0,icon:e.jsx(te,{className:"w-6 h-6"}),color:"primary",description:"Top-level modules"},{title:"Sub-Modules",value:R.total_sub_modules||0,icon:e.jsx(Fe,{className:"w-6 h-6"}),color:"secondary",description:"Functional areas"},{title:"Components",value:R.total_components||0,icon:e.jsx(Ee,{className:"w-6 h-6"}),color:"success",description:"UI components"},{title:"Permission Rules",value:R.total_permission_requirements||0,icon:e.jsx(js,{className:"w-6 h-6"}),color:"warning",description:"Access requirements"}],[R]),ye=s=>{qe(t=>{const a=new Set(t);return a.has(s)?a.delete(s):a.add(s),a})},Ce=s=>{Te(t=>{const a=new Set(t);return a.has(s)?a.delete(s):a.add(s),a})},k=async()=>{u(!0);try{const s=await w.get(route("modules.api.index"));ze(s.data.modules||[]),$e(s.data.statistics||{}),d("Data refreshed successfully","success")}catch(s){d("Failed to refresh data","error"),console.error("Refresh error:",s)}finally{u(!1)}},X=(s=null)=>{s?(fe(s),y({code:s.code,name:s.name,description:s.description||"",icon:s.icon||"",category:s.category||"core_system",route_prefix:s.route_prefix||"",is_active:s.is_active,priority:s.priority||100})):(fe(null),y({code:"",name:"",description:"",icon:"",category:"core_system",route_prefix:"",is_active:!0,priority:100})),U(!0)},we=(s,t=null)=>{He(s),t?(je(t),C({code:t.code,name:t.name,description:t.description||"",icon:t.icon||"",route:t.route||"",is_active:t.is_active,priority:t.priority||100})):(je(null),C({code:"",name:"",description:"",icon:"",route:"",is_active:!0,priority:100})),T(!0)},Ne=(s,t=null)=>{Je(s),t?(ge(t),N({code:t.code,name:t.name,description:t.description||"",type:t.type||"page",route:t.route||"",is_active:t.is_active})):(ge(null),N({code:"",name:"",description:"",type:"page",route:"",is_active:!0})),V(!0)},Y=s=>{var a;Xe(s);const t=((a=s.permission_requirements)==null?void 0:a.map(p=>p.permission_id))||[];W(t),B(!0)},es=async()=>{var s,t;u(!0);try{Q?(await w.put(route("modules.update",Q.id),i),d("Module updated successfully","success")):(await w.post(route("modules.store"),i),d("Module created successfully","success")),U(!1),k()}catch(a){d(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save module","error")}finally{u(!1)}},ss=async()=>{var s,t;u(!0);try{G?(await w.put(route("modules.sub-modules.update",G.id),c),d("Sub-module updated successfully","success")):(await w.post(route("modules.sub-modules.store",Ze),c),d("Sub-module created successfully","success")),T(!1),k()}catch(a){d(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save sub-module","error")}finally{u(!1)}},ts=async()=>{var s,t;u(!0);try{Z?(await w.put(route("modules.components.update",Z.id),m),d("Component updated successfully","success")):(await w.post(route("modules.components.store",We),m),d("Component created successfully","success")),V(!1),k()}catch(a){d(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save component","error")}finally{u(!1)}},as=async()=>{var s,t;u(!0);try{let a;x.type==="module"?a=route("modules.sync-permissions",x.id):x.type==="sub_module"?a=route("modules.sub-modules.sync-permissions",x.id):a=route("modules.components.sync-permissions",x.id),await w.post(a,{permission_ids:E}),d("Permissions updated successfully","success"),B(!1),k()}catch(a){d(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save permissions","error")}finally{u(!1)}},ee=(s,t)=>{ve({...s,type:t}),K(!0)},rs=async()=>{var s,t;if(o){u(!0);try{let a;o.type==="module"?a=route("modules.destroy",o.id):o.type==="sub_module"?a=route("modules.sub-modules.destroy",o.id):a=route("modules.components.destroy",o.id),await w.delete(a),d(`${o.type} deleted successfully`,"success"),K(!1),ve(null),k()}catch(a){d(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to delete","error")}finally{u(!1)}}},is=s=>{var _;const t=Ae.has(s.id),a=s.sub_modules||[],p=((_=s.permission_requirements)==null?void 0:_.length)||0;return e.jsx(ms,{className:"mb-3",children:e.jsxs(se,{className:"p-0",children:[e.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer hover:bg-default-100 transition-colors ${s.is_active?"":"opacity-60"}`,onClick:()=>ye(s.id),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(l,{isIconOnly:!0,size:"sm",variant:"light",onClick:f=>{f.stopPropagation(),ye(s.id)},children:t?e.jsx(be,{className:"w-4 h-4"}):e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(te,{className:"w-6 h-6 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:s.name}),e.jsx(g,{size:"sm",variant:"flat",color:Fs[s.category]||"default",children:s.code}),!s.is_active&&e.jsx(g,{size:"sm",variant:"flat",color:"danger",children:"Inactive"})]}),e.jsx("p",{className:"text-sm text-default-500 mt-1",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{content:a.length,color:"primary",size:"sm",children:e.jsx(g,{size:"sm",variant:"bordered",children:"Sub-modules"})}),e.jsx(ae,{content:p,color:"warning",size:"sm",children:e.jsx(g,{size:"sm",variant:"bordered",children:"Permissions"})}),e.jsxs(re,{children:[e.jsx(ie,{children:e.jsx(l,{isIconOnly:!0,size:"sm",variant:"light",onClick:f=>f.stopPropagation(),children:e.jsx(ce,{className:"w-5 h-5"})})}),e.jsxs(le,{children:[e.jsx(j,{startContent:e.jsx(de,{className:"w-4 h-4"}),onClick:()=>X(s),children:"Edit Module"},"edit"),e.jsx(j,{startContent:e.jsx(me,{className:"w-4 h-4"}),onClick:()=>Y({...s,type:"module"}),children:"Manage Permissions"},"permissions"),e.jsx(j,{startContent:e.jsx(ne,{className:"w-4 h-4"}),onClick:()=>we(s.id),children:"Add Sub-Module"},"add-submodule"),e.jsx(j,{startContent:e.jsx(ue,{className:"w-4 h-4"}),color:"danger",className:"text-danger",onClick:()=>ee(s,"module"),children:"Delete Module"},"delete")]})]})]})]}),e.jsx(Se,{children:t&&a.length>0&&e.jsx(Re.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"border-t border-default-200",children:e.jsx("div",{className:"pl-8 py-2",children:a.map(f=>ls(f,s.id))})})})]})},s.id)},ls=(s,t)=>{var _;const a=Ue.has(s.id),p=s.components||[];return(_=s.permission_requirements)!=null&&_.length,e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg bg-default-50 hover:bg-default-100 cursor-pointer transition-colors ${s.is_active?"":"opacity-60"}`,onClick:()=>Ce(s.id),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(l,{isIconOnly:!0,size:"sm",variant:"light",onClick:f=>{f.stopPropagation(),Ce(s.id)},children:a?e.jsx(be,{className:"w-4 h-4"}):e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(Fe,{className:"w-5 h-5 text-secondary"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx(g,{size:"sm",variant:"flat",color:"secondary",children:s.code}),!s.is_active&&e.jsx(g,{size:"sm",variant:"flat",color:"danger",children:"Inactive"})]}),s.description&&e.jsx("p",{className:"text-xs text-default-400 mt-0.5",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{content:p.length,color:"success",size:"sm",children:e.jsx(g,{size:"sm",variant:"bordered",children:"Components"})}),e.jsxs(re,{children:[e.jsx(ie,{children:e.jsx(l,{isIconOnly:!0,size:"sm",variant:"light",onClick:f=>f.stopPropagation(),children:e.jsx(ce,{className:"w-4 h-4"})})}),e.jsxs(le,{children:[e.jsx(j,{startContent:e.jsx(de,{className:"w-4 h-4"}),onClick:()=>we(t,s),children:"Edit Sub-Module"},"edit"),e.jsx(j,{startContent:e.jsx(me,{className:"w-4 h-4"}),onClick:()=>Y({...s,type:"sub_module"}),children:"Manage Permissions"},"permissions"),e.jsx(j,{startContent:e.jsx(ne,{className:"w-4 h-4"}),onClick:()=>Ne(s.id),children:"Add Component"},"add-component"),e.jsx(j,{startContent:e.jsx(ue,{className:"w-4 h-4"}),color:"danger",className:"text-danger",onClick:()=>ee(s,"sub_module"),children:"Delete Sub-Module"},"delete")]})]})]})]}),e.jsx(Se,{children:a&&p.length>0&&e.jsx(Re.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"pl-10 mt-2",children:p.map(f=>ns(f,s.id))})})]},s.id)},ns=(s,t)=>{var p;const a=((p=s.permission_requirements)==null?void 0:p.length)||0;return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md bg-default-100 hover:bg-default-200 mb-1 transition-colors ${s.is_active?"":"opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ys,{content:s.type,children:e.jsx("span",{className:`text-${Oe[s.type]}`,children:Ms[s.type]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:s.name}),e.jsx(g,{size:"sm",variant:"flat",color:Oe[s.type],children:s.type}),s.route&&e.jsx(g,{size:"sm",variant:"bordered",color:"default",children:s.route})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a>0&&e.jsxs(g,{size:"sm",variant:"flat",color:"warning",children:[a," perms"]}),e.jsxs(re,{children:[e.jsx(ie,{children:e.jsx(l,{isIconOnly:!0,size:"sm",variant:"light",children:e.jsx(ce,{className:"w-4 h-4"})})}),e.jsxs(le,{children:[e.jsx(j,{startContent:e.jsx(de,{className:"w-4 h-4"}),onClick:()=>Ne(t,s),children:"Edit Component"},"edit"),e.jsx(j,{startContent:e.jsx(me,{className:"w-4 h-4"}),onClick:()=>Y({...s,type:"component"}),children:"Manage Permissions"},"permissions"),e.jsx(j,{startContent:e.jsx(ue,{className:"w-4 h-4"}),color:"danger",className:"text-danger",onClick:()=>ee(s,"component"),children:"Delete Component"},"delete")]})]})]})]},s.id)};return e.jsxs(us,{children:[e.jsx(os,{title:pe}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(xs,{title:pe,subtitle:"Manage module permissions and access control hierarchy",icon:e.jsx(Ss,{className:"w-8 h-8"}),actions:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"flat",startContent:e.jsx(cs,{className:"w-4 h-4"}),onClick:k,isLoading:M,children:"Refresh"}),e.jsx(l,{color:"primary",startContent:e.jsx(ne,{className:"w-4 h-4"}),onClick:()=>X(),children:"Add Module"})]})}),e.jsx(fs,{stats:Ye,className:"mb-6"}),e.jsx(Me,{className:"mb-6",children:e.jsx(se,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(n,{placeholder:"Search modules...",value:xe,onChange:s=>Ie(s.target.value),startContent:e.jsx(gs,{className:"w-4 h-4 text-default-400"}),className:"flex-1"}),e.jsxs(H,{label:"Category",selectedKeys:[q],onChange:s=>De(s.target.value),className:"w-full sm:w-48",children:[e.jsx(F,{value:"all",children:"All Categories"},"all"),Object.entries(A).map(([s,t])=>e.jsx(F,{value:s,children:t},s))]}),e.jsxs(H,{label:"Status",selectedKeys:[O],onChange:s=>Le(s.target.value),className:"w-full sm:w-36",children:[e.jsx(F,{value:"all",children:"All"},"all"),e.jsx(F,{value:"active",children:"Active"},"active"),e.jsx(F,{value:"inactive",children:"Inactive"},"inactive")]})]})})}),e.jsxs(Me,{children:[e.jsxs(ws,{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Module Hierarchy"}),e.jsxs(g,{variant:"flat",color:"default",children:[J.length," modules"]})]}),e.jsx(se,{children:M?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(ds,{size:"lg"})}):J.length===0?e.jsxs("div",{className:"text-center py-12 text-default-500",children:[e.jsx(te,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No modules found"}),e.jsx(l,{color:"primary",variant:"flat",className:"mt-4",onClick:()=>X(),children:"Create First Module"})]}):e.jsx("div",{className:"space-y-2",children:J.map(s=>is(s))})})]})]}),e.jsx(z,{isOpen:Ve,onClose:()=>U(!1),size:"2xl",children:e.jsxs($,{children:[e.jsx(I,{children:Q?"Edit Module":"Create New Module"}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{label:"Code",placeholder:"MODULE_CODE",value:i.code,onChange:s=>y({...i,code:s.target.value.toUpperCase()}),isRequired:!0}),e.jsx(n,{label:"Name",placeholder:"Module Name",value:i.name,onChange:s=>y({...i,name:s.target.value}),isRequired:!0}),e.jsx(n,{label:"Icon",placeholder:"Icon class name",value:i.icon,onChange:s=>y({...i,icon:s.target.value}),className:"col-span-2"}),e.jsx(n,{label:"Route Prefix",placeholder:"/module-route",value:i.route_prefix,onChange:s=>y({...i,route_prefix:s.target.value})}),e.jsx(H,{label:"Category",selectedKeys:[i.category],onChange:s=>y({...i,category:s.target.value}),children:Object.entries(A).map(([s,t])=>e.jsx(F,{value:s,children:t},s))}),e.jsx(n,{label:"Priority",type:"number",value:i.priority,onChange:s=>y({...i,priority:parseInt(s.target.value)})}),e.jsx("div",{className:"flex items-center",children:e.jsx(oe,{isSelected:i.is_active,onValueChange:s=>y({...i,is_active:s}),children:"Active"})}),e.jsx(n,{label:"Description",placeholder:"Module description",value:i.description,onChange:s=>y({...i,description:s.target.value}),className:"col-span-2"})]})}),e.jsxs(L,{children:[e.jsx(l,{variant:"flat",onClick:()=>U(!1),children:"Cancel"}),e.jsx(l,{color:"primary",onClick:es,isLoading:M,children:Q?"Update":"Create"})]})]})}),e.jsx(z,{isOpen:Be,onClose:()=>T(!1),size:"xl",children:e.jsxs($,{children:[e.jsx(I,{children:G?"Edit Sub-Module":"Create New Sub-Module"}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{label:"Code",placeholder:"SUBMODULE_CODE",value:c.code,onChange:s=>C({...c,code:s.target.value.toUpperCase()}),isRequired:!0}),e.jsx(n,{label:"Name",placeholder:"Sub-Module Name",value:c.name,onChange:s=>C({...c,name:s.target.value}),isRequired:!0}),e.jsx(n,{label:"Icon",placeholder:"Icon class name",value:c.icon,onChange:s=>C({...c,icon:s.target.value})}),e.jsx(n,{label:"Route",placeholder:"Named route",value:c.route,onChange:s=>C({...c,route:s.target.value})}),e.jsx(n,{label:"Priority",type:"number",value:c.priority,onChange:s=>C({...c,priority:parseInt(s.target.value)})}),e.jsx("div",{className:"flex items-center",children:e.jsx(oe,{isSelected:c.is_active,onValueChange:s=>C({...c,is_active:s}),children:"Active"})}),e.jsx(n,{label:"Description",placeholder:"Sub-module description",value:c.description,onChange:s=>C({...c,description:s.target.value}),className:"col-span-2"})]})}),e.jsxs(L,{children:[e.jsx(l,{variant:"flat",onClick:()=>T(!1),children:"Cancel"}),e.jsx(l,{color:"primary",onClick:ss,isLoading:M,children:G?"Update":"Create"})]})]})}),e.jsx(z,{isOpen:Ke,onClose:()=>V(!1),size:"xl",children:e.jsxs($,{children:[e.jsx(I,{children:Z?"Edit Component":"Create New Component"}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{label:"Code",placeholder:"COMPONENT_CODE",value:m.code,onChange:s=>N({...m,code:s.target.value.toUpperCase()}),isRequired:!0}),e.jsx(n,{label:"Name",placeholder:"Component Name",value:m.name,onChange:s=>N({...m,name:s.target.value}),isRequired:!0}),e.jsx(H,{label:"Type",selectedKeys:[m.type],onChange:s=>N({...m,type:s.target.value}),children:Object.entries(Pe).map(([s,t])=>e.jsx(F,{value:s,children:t},s))}),e.jsx(n,{label:"Route",placeholder:"Named route",value:m.route,onChange:s=>N({...m,route:s.target.value})}),e.jsx("div",{className:"flex items-center col-span-2",children:e.jsx(oe,{isSelected:m.is_active,onValueChange:s=>N({...m,is_active:s}),children:"Active"})}),e.jsx(n,{label:"Description",placeholder:"Component description",value:m.description,onChange:s=>N({...m,description:s.target.value}),className:"col-span-2"})]})}),e.jsxs(L,{children:[e.jsx(l,{variant:"flat",onClick:()=>V(!1),children:"Cancel"}),e.jsx(l,{color:"primary",onClick:ts,isLoading:M,children:Z?"Update":"Create"})]})]})}),e.jsx(z,{isOpen:Qe,onClose:()=>B(!1),size:"3xl",scrollBehavior:"inside",children:e.jsxs($,{children:[e.jsxs(I,{children:["Manage Permissions - ",x==null?void 0:x.name]}),e.jsxs(D,{children:[e.jsxs("p",{className:"text-sm text-default-500 mb-4",children:["Select the permissions required to access this ",(_e=x==null?void 0:x.type)==null?void 0:_e.replace("_","-"),"."]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-96 overflow-y-auto",children:b.map(s=>e.jsx(vs,{isSelected:E.includes(s.id),onValueChange:t=>{W(t?[...E,s.id]:E.filter(a=>a!==s.id))},size:"sm",children:e.jsx("span",{className:"text-sm",children:s.name})},s.id))})]}),e.jsxs(L,{children:[e.jsx(l,{variant:"flat",onClick:()=>B(!1),children:"Cancel"}),e.jsxs(l,{color:"primary",onClick:as,isLoading:M,children:["Save Permissions (",E.length,")"]})]})]})}),e.jsx(z,{isOpen:Ge,onClose:()=>K(!1),children:e.jsxs($,{children:[e.jsx(I,{className:"text-danger",children:"Confirm Delete"}),e.jsxs(D,{children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("strong",{children:o==null?void 0:o.name}),"?"]}),(o==null?void 0:o.type)==="module"&&e.jsx("p",{className:"text-sm text-warning mt-2",children:"This will also delete all sub-modules and components within this module."}),(o==null?void 0:o.type)==="sub_module"&&e.jsx("p",{className:"text-sm text-warning mt-2",children:"This will also delete all components within this sub-module."})]}),e.jsxs(L,{children:[e.jsx(l,{variant:"flat",onClick:()=>K(!1),children:"Cancel"}),e.jsx(l,{color:"danger",onClick:rs,isLoading:M,children:"Delete"})]})]})})]})};export{ut as default};
