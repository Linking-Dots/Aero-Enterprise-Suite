import{w as Ie,y as We,U as Be,Y as ze,h as ue,k as _,r as l,z as Ee,C as W,D as N,g as Te,j as e,n as Le,Q as Ge,d as B,a as ne}from"./app-CI9jgpGr.js";import{F as Ue,k as qe,c as me,e as fe,f as he,g as xe,A as Ve}from"./Dashboard-CzIFBT2v.js";import{G as Ke}from"./GlassCard-tjSCpL_2.js";import{P as Qe}from"./PageHeader-DQVkVYso.js";import{S as Ze}from"./StatsCards-CLbabIlk.js";import{B as Q}from"./react-toastify.esm-CV0C0LVz.js";import{F as be,t as ge}from"./XMarkIcon-DvsiU2Rd.js";import{F as ye}from"./ClockIcon-2D1Z2RsK.js";import{F as Je}from"./PencilIcon-BMlThOL5.js";import{F as Xe}from"./TrashIcon-DgaRg_2d.js";import{F as ea}from"./CheckCircleIcon-XknPN_gf.js";import{F as aa}from"./ExclamationTriangleIcon-CuvcMoTc.js";import{m as ve}from"./proxy-C7VVT4m1.js";import{F as ta}from"./MagnifyingGlassIcon-DWHYxoyR.js";import{F as sa}from"./FunnelIcon-DmbrXoBx.js";import{F as ra}from"./PlusIcon-BdX5Bu1-.js";import{d as je,$ as we,a as oa,b as _e,c as la,e as ia,f as na,D as da,g as ca}from"./useDateFieldState-C4JcUZZi.js";import{b as pa,c as ua,F as ma,i as Ne}from"./chunk-SSA7SXE4-BMR-vlGj.js";import{u as de}from"./index-EtzUnLRI.js";import{c as z}from"./chunk-IHOGUXIG-ldqSf1QR.js";import{s as Pe,l as ce}from"./chunk-Y2AYO5NJ-CEp4_nVX.js";import{t as fa,a as ha,b as xa,c as ba}from"./chunk-F3UDT23P-DA3G40Ix.js";import{t as ga,a as ya}from"./chunk-YRZGWF2W-SFDP_qWu.js";import{t as va}from"./chunk-QESP63UR-DFhVWeCt.js";import{m as Ce}from"./chunk-O5MCAK4F-R3-welGz.js";import"./MapPinIcon-DN1rXz6V.js";import"./EnvelopeIcon-Bw67huL8.js";import"./UserGroupIcon-rQI1hKKo.js";import"./UserIcon-CJL6sl3p.js";import"./ShieldCheckIcon-DiQR7cBT.js";import"./KeyIcon-B_Yjgf9Q.js";import"./index-7rJiuKod.js";import"./logo-Pwvcz7fP.js";import"./features-animation-CBgyEZ3k.js";import"./create-visual-element-itydVQ4j.js";import"./chunk-D5XJWRAV-DRsYeYzH.js";import"./chunk-TLYTI3QM-BVcWX9IA.js";import"./NumberFormatter-DNR9MAW-.js";import"./useFilter-D07zP4Yn.js";import"./chunk-XJ2YRSUP-BQKAmoxE.js";import"./useToggleState-0u8cznMq.js";function ja(i){var v,n,P,h,C,p,x;const o=Ie(),{validationBehavior:D}=pa(ma)||{},[d,F]=We(i,je.variantKeys),{locale:S}=Be(),$=we(new oa(S).resolvedOptions().calendar),E=ze($.identifier),{ref:Z,as:J,label:j,inputRef:X,description:ee,startContent:T,endContent:L,className:H,classNames:t,validationState:g,groupProps:u={},labelProps:m,fieldProps:G,innerWrapperProps:w,errorMessageProps:ae,descriptionProps:O,validationBehavior:U=(v=D??(o==null?void 0:o.validationBehavior))!=null?v:"native",shouldForceLeadingZeros:k=!0,minValue:te=(P=(n=o==null?void 0:o.defaultDates)==null?void 0:n.minDate)!=null?P:new _e($,1900+E,1,1),maxValue:se=(C=(h=o==null?void 0:o.defaultDates)==null?void 0:h.maxDate)!=null?C:new _e($,2099+E,12,31),createCalendar:y=(p=o==null?void 0:o.createCalendar)!=null?p:null,isInvalid:re=g?g==="invalid":!1,errorMessage:oe}=d,R=ue(Z),q=ue(X),a=(x=i.disableAnimation)!=null?x:o==null?void 0:o.disableAnimation,s=la({...i,label:j,locale:S,minValue:te,maxValue:se,validationBehavior:U,shouldForceLeadingZeros:k,createCalendar:!y||typeof y!="function"?we:y}),{labelProps:c,fieldProps:b,inputProps:A,validationErrors:V,validationDetails:M,descriptionProps:Y,errorMessageProps:K,isInvalid:le}=ia({...i,label:j,validationBehavior:U,inputRef:q},s,R),Fe=_(t==null?void 0:t.base,H),pe=re||le,I=ua({labelPlacement:i.labelPlacement,label:j}),Se=I==="outside"||I==="outside-left",f=l.useMemo(()=>je({...F,disableAnimation:a,labelPlacement:I}),[Ee(F),a,I]),$e=r=>({...W(c,m,r),"data-slot":"label",className:f.label({class:_(t==null?void 0:t.label,void 0)})}),He=r=>({...r,...A,ref:q}),Oe=(r={})=>({ref:R,"data-slot":"input-field",...W(b,G,r),className:f.input({class:_(t==null?void 0:t.input,r==null?void 0:r.className)})}),ke=(r={})=>({...r,...u,"data-slot":"input-wrapper",className:f.inputWrapper({class:t==null?void 0:t.inputWrapper}),onClick:b.onClick}),Re=r=>{const ie=W(w,r);return{...ie,"data-slot":"inner-wrapper",className:f.innerWrapper({class:na(t==null?void 0:t.innerWrapper,ie==null?void 0:ie.className)})}},Ae=r=>({...r,"data-slot":"helper-wrapper",className:f.helperWrapper({class:_(t==null?void 0:t.helperWrapper,void 0)})}),Me=(r={})=>({...W(K,ae,r),"data-slot":"error-message",className:f.errorMessage({class:_(t==null?void 0:t.errorMessage,r==null?void 0:r.className)})}),Ye=(r={})=>({...W(Y,O,r),"data-slot":"description",className:f.description({class:_(t==null?void 0:t.description,r==null?void 0:r.className)})});return{state:s,domRef:R,slots:f,classNames:t,labelPlacement:I,getBaseGroupProps:()=>({as:J,label:j,description:ee,endContent:L,errorMessage:oe,isInvalid:pe,startContent:T,validationDetails:M,validationErrors:V,shouldLabelBeOutside:Se,"data-slot":"base","data-required":N(i.isRequired),"data-disabled":N(i.isDisabled),"data-readonly":N(i.isReadOnly),"data-invalid":N(pe),"data-has-start-content":N(!!T),"data-has-end-content":N(!!L),descriptionProps:Ye(),errorMessageProps:Me(),groupProps:ke(),helperWrapperProps:Ae(),labelProps:$e(),wrapperProps:Re(),className:f.base({class:Fe})}),getFieldProps:Oe,getInputProps:He}}var wa=Te(function(v,n){const{state:P,slots:h,classNames:C,getBaseGroupProps:p,getInputProps:x,getFieldProps:o}=ja({...v,ref:n});return e.jsx(da,{...p(),children:e.jsx(ca,{classNames:C,inputProps:x(),slots:h,state:P,...o()})})}),De=wa;const _a=({title:i,holidays:v,stats:n})=>{const{theme:P}=Le(),[h]=l.useState(window.innerWidth<640),[C]=l.useState(window.innerWidth<768),[p,x]=l.useState(v),[o,D]=l.useState(""),[d,F]=l.useState(new Date().getFullYear().toString()),[S,$]=l.useState(!1),{isOpen:E,onOpen:Z,onClose:J}=de(),{isOpen:j,onOpen:X,onClose:ee}=de(),{isOpen:T,onOpen:L,onClose:H}=de(),[t,g]=l.useState(null),[u,m]=l.useState({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1}),[G,w]=l.useState(!1),ae=l.useMemo(()=>[{title:"Total Holidays",value:n.total_holidays,icon:e.jsx(be,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All company holidays",trend:`${n.this_year_holidays} this year`},{title:"Upcoming",value:n.upcoming_holidays,icon:e.jsx(ye,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Next holidays",trend:"Next 90 days"},{title:"This Month",value:n.this_month_holidays,icon:e.jsx(Ue,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Current month",trend:"Ongoing & upcoming"},{title:"Working Days",value:365-n.total_holidays,icon:e.jsx(qe,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Business days",trend:`${Math.round((365-n.total_holidays)/365*100)}% of year`}],[n]),O=l.useMemo(()=>p.filter(a=>{const s=a.title.toLowerCase().includes(o.toLowerCase()),c=d==="all"||new Date(a.from_date).getFullYear().toString()===d;return s&&c}),[p,o,d]),U=l.useMemo(()=>[...new Set(p.map(s=>new Date(s.from_date).getFullYear()))].sort((s,c)=>c-s),[p]),k=[{key:"public",label:"Public Holiday",color:"primary"},{key:"religious",label:"Religious Holiday",color:"secondary"},{key:"national",label:"National Holiday",color:"success"},{key:"company",label:"Company Holiday",color:"warning"},{key:"optional",label:"Optional Holiday",color:"default"}],te=async()=>{w(!0);try{const a=t?await ne.put(route("holiday.update",t.id),u):await ne.post(route("holiday.store"),u);a.data.success&&(x(t?s=>s.map(c=>c.id===t.id?a.data.holiday:c):s=>[...s,a.data.holiday]),Q.success(t?"Holiday updated successfully!":"Holiday created successfully!"),y())}catch{Q.error("Failed to save holiday. Please try again.")}finally{w(!1)}},se=async()=>{if(t){w(!0);try{await ne.delete(route("holiday.destroy",t.id)),x(a=>a.filter(s=>s.id!==t.id)),Q.success("Holiday deleted successfully!"),H(),g(null)}catch{Q.error("Failed to delete holiday. Please try again.")}finally{w(!1)}}},y=()=>{J(),ee(),g(null),m({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1})},re=a=>{g(a),m({title:a.title,from_date:a.from_date,to_date:a.to_date,description:a.description||"",type:a.type||"public",is_recurring:a.is_recurring||!1}),X()},oe=a=>{g(a),L()},R=[{name:"Holiday",uid:"title"},{name:"Date",uid:"dates"},{name:"Duration",uid:"duration"},{name:"Type",uid:"type"},{name:"Status",uid:"status"},{name:"Actions",uid:"actions"}],q=l.useCallback((a,s)=>{const c=a[s],b=new Date(a.from_date),A=new Date(a.to_date),V=Math.ceil((A-b)/(1e3*60*60*24))+1,M=b>new Date,Y=b<=new Date&&A>=new Date;switch(s){case"title":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-bold text-small capitalize",children:a.title}),a.description&&e.jsx("p",{className:"text-bold text-tiny capitalize text-default-400",children:a.description})]});case"dates":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-small",children:b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:b.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}),a.from_date!==a.to_date&&e.jsxs("span",{className:"text-tiny text-default-400",children:["to ",A.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]});case"duration":return e.jsxs(z,{size:"sm",variant:"flat",children:[V," ",V===1?"day":"days"]});case"type":const K=k.find(le=>le.key===a.type)||k[0];return e.jsx(z,{size:"sm",color:K.color,variant:"flat",children:K.label});case"status":return e.jsx(z,{size:"sm",color:Y?"success":M?"warning":"default",variant:"flat",startContent:Y?e.jsx(ea,{className:"w-3 h-3"}):M?e.jsx(ye,{className:"w-3 h-3"}):e.jsx(aa,{className:"w-3 h-3"}),children:Y?"Ongoing":M?"Upcoming":"Past"});case"actions":return e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx(ge,{content:"Edit holiday",children:e.jsx("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>re(a),children:e.jsx(Je,{className:"w-4 h-4"})})}),e.jsx(ge,{color:"danger",content:"Delete holiday",children:e.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:()=>oe(a),children:e.jsx(Xe,{className:"w-4 h-4"})})})]});default:return c}},[]);return e.jsxs(e.Fragment,{children:[e.jsx(Ge,{title:i}),e.jsx("div",{className:"flex justify-center p-2",children:e.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:e.jsx(Ke,{children:e.jsx(Qe,{title:"Company Holidays",subtitle:"Manage company-wide holidays and special occasions",icon:e.jsx(be,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:h?"Add":"Add Holiday",icon:e.jsx(ra,{className:"w-4 h-4"}),onClick:Z,className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}],children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(Ze,{stats:ae,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ne,{label:"Search Holidays",placeholder:"Search by holiday name...",value:o,onChange:a=>D(a.target.value),startContent:e.jsx(ta,{className:"w-4 h-4 text-default-400"})})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(Pe,{label:"Year",selectedKeys:[d],onSelectionChange:a=>F(Array.from(a)[0]),className:"w-32",children:[e.jsx(ce,{value:"all",children:"All Years"},"all"),U.map(a=>e.jsx(ce,{value:a.toString(),children:a},a.toString()))]}),e.jsxs(B,{isIconOnly:h,variant:"bordered",onPress:()=>$(!S),className:S?"bg-purple-500/20":"bg-white/5",children:[e.jsx(sa,{className:"w-4 h-4"}),!h&&e.jsx("span",{className:"ml-1",children:"Filters"})]})]})]}),(o||d!==new Date().getFullYear().toString())&&e.jsxs(ve.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-4 flex flex-wrap gap-2",children:[o&&e.jsxs(z,{variant:"flat",color:"primary",size:"sm",onClose:()=>D(""),children:["Search: ",o]}),d!==new Date().getFullYear().toString()&&e.jsxs(z,{variant:"flat",color:"secondary",size:"sm",onClose:()=>F(new Date().getFullYear().toString()),children:["Year: ",d==="all"?"All Years":d]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Company Holidays",e.jsxs("span",{className:"text-sm text-default-500 ml-2",children:["(",O.length," ",O.length===1?"holiday":"holidays",")"]})]})}),e.jsxs(fa,{isStriped:!0,removeWrapper:!0,"aria-label":"Holidays table",classNames:{th:"bg-white/5 text-default-600 border-b border-white/10",td:"border-b border-white/5"},children:[e.jsx(ga,{columns:R,children:a=>e.jsx(ya,{align:a.uid==="actions"?"center":"start",children:a.name},a.uid)}),e.jsx(ha,{items:O,children:a=>e.jsx(xa,{children:s=>e.jsx(ba,{children:q(a,s)})},a.id)})]})]})]})})})})}),e.jsx(me,{isOpen:E||j,onClose:y,size:"2xl",backdrop:"blur",classNames:{backdrop:"bg-linear-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20",base:"border-[#292f46] bg-linear-to-br from-white/10 to-white/5 backdrop-blur-md",header:"border-b border-[#292f46]",footer:"border-t border-[#292f46]"},children:e.jsxs(fe,{children:[e.jsx(he,{className:"flex flex-col gap-1",children:t?"Edit Holiday":"Add New Holiday"}),e.jsxs(xe,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Ne,{label:"Holiday Title",placeholder:"Enter holiday name",value:u.title,onChange:a=>m(s=>({...s,title:a.target.value})),isRequired:!0}),e.jsx(Pe,{label:"Holiday Type",selectedKeys:[u.type],onSelectionChange:a=>m(s=>({...s,type:Array.from(a)[0]})),children:k.map(a=>e.jsx(ce,{value:a.key,children:a.label},a.key))}),e.jsx(De,{label:"From Date",value:u.from_date,onChange:a=>m(s=>({...s,from_date:a})),isRequired:!0}),e.jsx(De,{label:"To Date",value:u.to_date,onChange:a=>m(s=>({...s,to_date:a})),isRequired:!0})]}),e.jsx(va,{label:"Description (Optional)",placeholder:"Enter holiday description or additional notes",value:u.description,onChange:a=>m(s=>({...s,description:a.target.value})),rows:3})]}),e.jsxs(Ce,{children:[e.jsx(B,{color:"danger",variant:"light",onPress:y,children:"Cancel"}),e.jsx(B,{color:"primary",onPress:te,isLoading:G,children:t?"Update Holiday":"Add Holiday"})]})]})}),e.jsx(me,{isOpen:T,onClose:H,size:"md",backdrop:"blur",children:e.jsxs(fe,{children:[e.jsx(he,{className:"flex flex-col gap-1",children:"Confirm Delete"}),e.jsxs(xe,{children:[e.jsxs("p",{children:['Are you sure you want to delete the holiday "',t==null?void 0:t.title,'"?']}),e.jsx("p",{className:"text-small text-danger",children:"This action cannot be undone."})]}),e.jsxs(Ce,{children:[e.jsx(B,{color:"default",variant:"light",onPress:H,children:"Cancel"}),e.jsx(B,{color:"danger",onPress:se,isLoading:G,children:"Delete Holiday"})]})]})})]})};_a.layout=i=>e.jsx(Ve,{children:i});export{_a as default};
