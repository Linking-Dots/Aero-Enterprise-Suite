import{r as l,j as e,k as D,b as P,a as H,d as ee,e as se,f as te,H as ae}from"./app-DaB-CN0o.js";import{m as K,n as Q,o as q,p as G,s as re,l as ie,g as V,h as $,F as O,y as ne,u as W,i as oe,A as le}from"./App-BCgXjngS.js";import{T as de}from"./TimeSheetTable-b67LFQkD.js";import{B as S,c as T}from"./react-toastify.esm-CzBbiHw6.js";import{d as w}from"./dayjs.min-Byd41D82.js";import{F as A}from"./UserPlusIcon-DSbVuAYX.js";import{F as B}from"./InformationCircleIcon-_-gS8Ski.js";import{F as J}from"./MapPinIcon-1geql6Dj.js";import{u as X}from"./chunk-S574QCAN-ecaRBd1z.js";import{i as I}from"./chunk-SSA7SXE4-C4o3Qyri.js";import{t as Z}from"./chunk-QESP63UR-b3A9wqIL.js";import{m as U}from"./chunk-O5MCAK4F-ycKgpbQ3.js";import{c as L}from"./chunk-XJ2YRSUP-pJ1ENfHi.js";import{F as me}from"./CheckCircleIcon-X-G5qmsi.js";import{F as ce}from"./ChartBarIcon-RQWU8cPA.js";import"./EnvelopeIcon-DMw76KVb.js";import"./UserIcon-B2hylrt8.js";import"./ShieldCheckIcon-BJDzENCZ.js";import"./KeyIcon-FNnfzH4Z.js";import"./logo-eMlcfKMq.js";import"./proxy-CjVFj0tM.js";import"./create-visual-element-wJ2WEOtq.js";import"./features-animation-DHwWeTkE.js";import"./ExclamationTriangleIcon-CWEnmACB.js";import"./PageHeader-D1g_um0u.js";import"./XCircleIcon-D3o06pmI.js";import"./DocumentArrowDownIcon-D7P9bTl6.js";import"./chunk-JOT4BT4P-BcK7s5nw.js";import"./chunk-TLYTI3QM-CTlwgEng.js";import"./chunk-F3UDT23P-CIYUOVjL.js";import"./chunk-YRZGWF2W-CNr6S42x.js";import"./chunk-TSPNSPCL-BB-tv7nH.js";import"./chunk-EAPQ7RWQ-D7e8n7Cr.js";import"./useToggleState-BE-db7zu.js";import"./index-CErQMG-8.js";const ue=({open:F,closeModal:f,selectedDate:g,allUsers:u,refreshTimeSheet:E,currentUser:p=null})=>{const m=()=>{var c;if(typeof window>"u")return"lg";const t=((c=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:c.trim())||"12px",o=parseInt(t);return o===0?"none":o<=4?"sm":o<=8?"md":o<=16?"lg":"full"},[s,b]=l.useState({user_id:"",date:g,punch_in_time:"09:00",punch_out_time:"",reason:"",location:"Office - Manually marked present by admin"}),[n,_]=l.useState({}),[x,k]=l.useState(!1);l.useEffect(()=>{b(p?i=>({...i,user_id:p.id,date:g}):i=>({...i,user_id:"",date:g,punch_in_time:"09:00",punch_out_time:"",reason:"",location:"Office - Manually marked present by admin"})),_({})},[p,g,F]);const M=l.useMemo(()=>(u==null?void 0:u.filter(i=>{var t;return(t=i.roles)==null?void 0:t.some(o=>o.name==="Employee")}))||[],[u]),y=(i,t)=>{b(o=>({...o,[i]:t})),n[i]&&_(o=>({...o,[i]:void 0}))},h=l.useMemo(()=>{if(s.punch_in_time&&s.punch_out_time){const i=w(`${s.date} ${s.punch_in_time}`),t=w(`${s.date} ${s.punch_out_time}`);if(t.isAfter(i)){const o=t.diff(i,"minute"),c=Math.floor(o/60),r=o%60;return`${c}h ${r}m`}}return null},[s.punch_in_time,s.punch_out_time,s.date]),j=async i=>{var t,o,c;i.preventDefault(),k(!0),_({});try{const r={user_id:s.user_id,date:s.date,punch_in_time:s.punch_in_time,punch_out_time:s.punch_out_time||null,reason:s.reason||"Marked present by administrator",location:s.location},a=await H.post(route("attendance.mark-as-present"),r);a.status===200&&(S.success(a.data.message||"User marked as present successfully!"),E(),f())}catch(r){((t=r.response)==null?void 0:t.status)===422?(_(r.response.data.errors||{}),S.error(r.response.data.message||"Please check the form for errors")):S.error(((c=(o=r.response)==null?void 0:o.data)==null?void 0:c.message)||"Failed to mark user as present")}finally{k(!1)}},C=M.find(i=>i.id==s.user_id);return e.jsx(K,{isOpen:F,onClose:f,size:"2xl",radius:m(),scrollBehavior:"inside",classNames:{base:"backdrop-blur-md mx-2 my-2 sm:mx-4 sm:my-8 max-h-[95vh]",backdrop:"bg-black/50 backdrop-blur-sm",header:"border-b border-divider",body:"overflow-y-auto",footer:"border-t border-divider",closeButton:"hover:bg-white/5 active:bg-white/10"},style:{border:"var(--borderWidth, 2px) solid var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:e.jsx(Q,{children:i=>e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"flex flex-col gap-1",style:{borderColor:"var(--theme-divider, #E4E4E7)",fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Mark Employee as Present"})]})}),e.jsxs("form",{onSubmit:j,children:[e.jsx(G,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}}),e.jsx("h3",{className:"text-base font-semibold",style:{color:"var(--theme-foreground)"},children:"Employee Selection"})]}),"                                        ",e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(re,{label:"Select Employee",placeholder:"Choose an employee to mark as present",selectedKeys:s.user_id?new Set([s.user_id.toString()]):new Set,onSelectionChange:t=>{const o=Array.from(t)[0];y("user_id",o||"")},isInvalid:!!n.user_id,errorMessage:n.user_id,variant:"bordered",size:"sm",radius:m(),classNames:{trigger:"min-h-unit-12",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},renderValue:t=>t.map(o=>{const c=M.find(r=>r.id.toString()===o.key);return c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:c.name}),e.jsxs("span",{className:"text-xs text-default-500",children:["(",c.employee_id,")"]})]},o.key):null}),children:M.map(t=>e.jsx(ie,{value:t.id.toString(),textValue:`${t.name} (${t.employee_id})`,children:e.jsx(X,{avatarProps:{size:"sm",src:t.profile_image_url,showFallback:!0,name:t.name},description:`ID: ${t.employee_id}`,name:t.name})},t.id.toString()))}),e.jsx(I,{label:"Date",type:"date",value:s.date,onValueChange:t=>y("date",t),isInvalid:!!n.date,errorMessage:n.date,variant:"bordered",size:"sm",radius:m(),startContent:e.jsx(V,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})]})]}),e.jsx(D,{style:{background:"var(--theme-divider)"}}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}}),e.jsx("h3",{className:"text-base font-semibold",style:{color:"var(--theme-foreground)"},children:"Working Hours"})]}),h&&e.jsxs("span",{className:"text-sm px-2 py-1 rounded-md bg-success/10 text-success",children:["Duration: ",h]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Punch In Time",type:"time",value:s.punch_in_time,onValueChange:t=>y("punch_in_time",t),isInvalid:!!n.punch_in_time,errorMessage:n.punch_in_time,variant:"bordered",size:"sm",radius:m(),startContent:e.jsx($,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),e.jsx(I,{label:"Punch Out Time (Optional)",type:"time",value:s.punch_out_time,onValueChange:t=>y("punch_out_time",t),isInvalid:!!n.punch_out_time,errorMessage:n.punch_out_time,variant:"bordered",size:"sm",radius:m(),startContent:e.jsx($,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'},description:"Leave empty if employee is still working"})]})]}),e.jsx(D,{style:{background:"var(--theme-divider)"}}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}}),e.jsx("h3",{className:"text-base font-semibold",style:{color:"var(--theme-foreground)"},children:"Additional Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(I,{label:"Location",value:s.location,onValueChange:t=>y("location",t),isInvalid:!!n.location,errorMessage:n.location,variant:"bordered",size:"sm",radius:m(),startContent:e.jsx(J,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),e.jsx(Z,{label:"Reason (Optional)",placeholder:"Reason for manually marking as present...",value:s.reason,onValueChange:t=>y("reason",t),isInvalid:!!n.reason,errorMessage:n.reason,variant:"bordered",size:"sm",radius:m(),minRows:3,maxRows:5,classNames:{input:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'}})]})]}),C&&e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--theme-content2)",borderColor:"var(--theme-divider)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",style:{color:"var(--theme-foreground)"},children:"Preview"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--theme-foreground-600)"},children:[C.name," will be marked present for"," ",w(s.date).format("MMM D, YYYY")," from"," ",s.punch_in_time," ",s.punch_out_time&&`to ${s.punch_out_time}`,h&&` (${h})`]})]})]})})]})}),e.jsxs(U,{className:"flex flex-col sm:flex-row justify-center gap-2 px-4 sm:px-6 py-3 sm:py-4",style:{borderColor:"var(--theme-divider, #E4E4E7)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(P,{color:"default",variant:"bordered",onPress:i,radius:m(),size:"sm",isDisabled:x,style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(P,{type:"submit",color:"primary",variant:"solid",isLoading:x,isDisabled:x||!s.user_id,radius:m(),size:"sm",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:x?"Marking Present...":"Mark as Present"})]})]})]})})})},pe=({open:F,closeModal:f,selectedDate:g,allUsers:u,refreshTimeSheet:E,selectedUsers:p=[]})=>{const m=()=>{var v;if(typeof window>"u")return"lg";const a=((v=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:v.trim())||"12px",d=parseInt(a);return d===0?"none":d<=4?"sm":d<=8?"md":d<=16?"lg":"full"},[s,b]=l.useState({user_ids:[],date:g,punch_in_time:"09:00",punch_out_time:"",reason:"",location:"Office - Bulk marked present by admin"}),[n,_]=l.useState({}),[x,k]=l.useState(!1),[M,y]=l.useState(!1),h=l.useMemo(()=>(u==null?void 0:u.filter(r=>{var a;return(a=r.roles)==null?void 0:a.some(d=>d.name==="Employee")}))||[],[u]);l.useEffect(()=>{const r=p.map(a=>a.id.toString());b(a=>({...a,user_ids:r,date:g})),y(r.length===h.length),_({})},[p,g,F,h.length]);const j=(r,a)=>{b(d=>({...d,[r]:a})),n[r]&&_(d=>({...d,[r]:void 0}))},C=(r,a)=>{const d=r.toString();b(v=>({...v,user_ids:a?[...v.user_ids,d]:v.user_ids.filter(N=>N!==d)}))},i=r=>{y(r),b(a=>({...a,user_ids:r?h.map(d=>d.id.toString()):[]}))},t=l.useMemo(()=>{if(s.punch_in_time&&s.punch_out_time){const r=w(`${s.date} ${s.punch_in_time}`),a=w(`${s.date} ${s.punch_out_time}`);if(a.isAfter(r)){const d=a.diff(r,"minute"),v=Math.floor(d/60),N=d%60;return`${v}h ${N}m`}}return null},[s.punch_in_time,s.punch_out_time,s.date]),o=async r=>{var a,d,v;r.preventDefault(),k(!0),_({});try{const N={user_ids:s.user_ids.map(Y=>parseInt(Y)),date:s.date,punch_in_time:s.punch_in_time,punch_out_time:s.punch_out_time||null,reason:s.reason||"Bulk marked present by administrator",location:s.location},z=await H.post(route("attendance.bulk-mark-as-present"),N);if(z.status===200){const{data:Y}=z.data,{summary:R}=z.data;R.successful>0&&S.success(`Successfully marked ${R.successful} employees as present!`),R.failed>0&&S.warning(`${R.failed} employees failed to be marked present.`),R.skipped>0&&S.info(`${R.skipped} employees were skipped (already have attendance).`),E(),f()}}catch(N){((a=N.response)==null?void 0:a.status)===422?(_(N.response.data.errors||{}),S.error(N.response.data.message||"Please check the form for errors")):S.error(((v=(d=N.response)==null?void 0:d.data)==null?void 0:v.message)||"Failed to bulk mark users as present")}finally{k(!1)}},c=h.filter(r=>s.user_ids.includes(r.id.toString()));return e.jsx(K,{isOpen:F,onClose:f,size:"4xl",radius:m(),scrollBehavior:"inside",classNames:{base:"backdrop-blur-md mx-2 my-2 sm:mx-4 sm:my-8 max-h-[95vh]",backdrop:"bg-black/50 backdrop-blur-sm",header:"border-b border-divider",body:"overflow-y-auto",footer:"border-t border-divider",closeButton:"hover:bg-white/5 active:bg-white/10"},style:{border:"var(--borderWidth, 2px) solid var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:e.jsx(Q,{children:r=>e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"flex flex-col gap-1",style:{borderColor:"var(--theme-divider, #E4E4E7)",fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Bulk Mark as Present"})]}),e.jsxs(T,{variant:"bordered",size:"sm",style:{borderColor:"var(--theme-primary)",color:"var(--theme-primary)"},children:[s.user_ids.length," selected"]})]})}),e.jsxs("form",{onSubmit:o,children:[e.jsx(G,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}}),e.jsx("h3",{className:"text-base font-semibold",style:{color:"var(--theme-foreground)"},children:"Date & Time Configuration"})]}),t&&e.jsxs("span",{className:"text-sm px-2 py-1 rounded-md bg-success/10 text-success",children:["Duration: ",t]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(I,{label:"Date",type:"date",value:s.date,onValueChange:a=>j("date",a),isInvalid:!!n.date,errorMessage:n.date,variant:"bordered",size:"sm",radius:m(),startContent:e.jsx(V,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),e.jsx(I,{label:"Punch In Time",type:"time",value:s.punch_in_time,onValueChange:a=>j("punch_in_time",a),isInvalid:!!n.punch_in_time,errorMessage:n.punch_in_time,variant:"bordered",size:"sm",radius:m(),startContent:e.jsx($,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),e.jsx(I,{label:"Punch Out Time (Optional)",type:"time",value:s.punch_out_time,onValueChange:a=>j("punch_out_time",a),isInvalid:!!n.punch_out_time,errorMessage:n.punch_out_time,variant:"bordered",size:"sm",radius:m(),startContent:e.jsx($,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'},description:"Leave empty if employees are still working"})]})]}),e.jsx(D,{style:{background:"var(--theme-divider)"}}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}}),e.jsxs("h3",{className:"text-base font-semibold",style:{color:"var(--theme-foreground)"},children:["Select Employees (",s.user_ids.length," of ",h.length,")"]})]}),e.jsx(L,{isSelected:M,onValueChange:i,color:"primary",size:"sm",children:"Select All"})]}),e.jsx(ee,{children:e.jsx(se,{className:"p-4",children:e.jsx(ne,{className:"max-h-64",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:h.map(a=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-default-50",children:[e.jsx(L,{isSelected:s.user_ids.includes(a.id.toString()),onValueChange:d=>C(a.id,d),color:"primary",size:"sm"}),e.jsx(X,{avatarProps:{size:"sm",src:a.profile_image_url,showFallback:!0,name:a.name},description:`ID: ${a.employee_id}`,name:a.name,classNames:{name:"text-sm",description:"text-xs"}})]},a.id))})})})}),n.user_ids&&e.jsx("p",{className:"text-danger text-sm",children:n.user_ids})]}),e.jsx(D,{style:{background:"var(--theme-divider)"}}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}}),e.jsx("h3",{className:"text-base font-semibold",style:{color:"var(--theme-foreground)"},children:"Additional Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(I,{label:"Location",value:s.location,onValueChange:a=>j("location",a),isInvalid:!!n.location,errorMessage:n.location,variant:"bordered",size:"sm",radius:m(),startContent:e.jsx(J,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),e.jsx(Z,{label:"Reason (Optional)",placeholder:"Reason for bulk marking employees as present...",value:s.reason,onValueChange:a=>j("reason",a),isInvalid:!!n.reason,errorMessage:n.reason,variant:"bordered",size:"sm",radius:m(),minRows:3,maxRows:5,classNames:{input:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'}})]})]}),c.length>0&&e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--theme-content2)",borderColor:"var(--theme-divider)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(B,{className:"w-5 h-5 mt-0.5",style:{color:"var(--theme-primary)"}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-medium text-sm mb-2",style:{color:"var(--theme-foreground)"},children:["Preview - ",c.length," employee",c.length!==1?"s":""," will be marked present"]}),e.jsxs("p",{className:"text-xs mb-3",style:{color:"var(--theme-foreground-600)"},children:["Date: ",w(s.date).format("MMM D, YYYY")," | Time: ",s.punch_in_time,s.punch_out_time&&` to ${s.punch_out_time}`,t&&` (${t})`]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.slice(0,10).map(a=>e.jsx(T,{size:"sm",variant:"flat",color:"primary",children:a.name},a.id)),c.length>10&&e.jsxs(T,{size:"sm",variant:"flat",color:"default",children:["+",c.length-10," more"]})]})]})]})})]})}),e.jsxs(U,{className:"flex flex-col sm:flex-row justify-center gap-2 px-4 sm:px-6 py-3 sm:py-4",style:{borderColor:"var(--theme-divider, #E4E4E7)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(P,{color:"default",variant:"bordered",onPress:r,radius:m(),size:"sm",isDisabled:x,style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(P,{type:"submit",color:"primary",variant:"solid",isLoading:x,isDisabled:x||s.user_ids.length===0,radius:m(),size:"sm",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:x?"Processing...":`Mark ${s.user_ids.length} Employee${s.user_ids.length!==1?"s":""} as Present`})]})]})]})})})},he=({title:F,allUsers:f})=>{var C;const{auth:g}=te().props;W("(max-width: 768px)"),W("(max-width: 640px)");const[u,E]=l.useState(w().format("YYYY-MM-DD")),[p,m]=l.useState({type:null,selectedUsers:[],currentUser:null}),[s,b]=l.useState(0),[n,_]=l.useState({currentMonth:w().format("YYYY-MM")}),x=l.useCallback((i,t=[],o=null)=>{m({type:i,selectedUsers:t,currentUser:o})},[]),k=l.useCallback(()=>{m({type:null,selectedUsers:[],currentUser:null})},[]),M=l.useCallback(i=>{const t=i.target.value;E(t)},[]),y=l.useCallback(()=>{b(i=>i+1)},[]),h=l.useCallback(i=>{x("mark_as_present",[],i)},[x]);l.useMemo(()=>{const i=w(u);return[{title:"Present Today",value:0,icon:e.jsx(me,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Employees present"},{title:"Absent Today",value:0,icon:e.jsx(A,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Employees absent"},{title:"Total Employees",value:(f==null?void 0:f.length)||0,icon:e.jsx(ce,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Active employees"},{title:"Date",value:i.format("MMM D"),icon:e.jsx(oe,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:i.format("dddd")}]},[u,f]);const j=l.useMemo(()=>({open:!!p.type,closeModal:k,selectedDate:u,allUsers:f,refreshTimeSheet:y,selectedUsers:p.selectedUsers,currentUser:p.currentUser}),[p.type,k,u,f,y,p.selectedUsers,p.currentUser]);return(C=g.permissions)!=null&&C.includes("attendance.view"),e.jsxs(e.Fragment,{children:[e.jsx(ae,{title:F}),p.type==="mark_as_present"&&e.jsx(ue,{...j}),p.type==="bulk_mark_as_present"&&e.jsx(pe,{...j}),e.jsx(de,{handleDateChange:M,selectedDate:u,updateTimeSheet:s,externalFilterData:n,externalEmployee:"",onMarkAsPresent:h})]})};he.layout=F=>e.jsx(le,{children:F});export{he as default};
