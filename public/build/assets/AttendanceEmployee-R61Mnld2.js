import{R as M,u as k,r as o,a as C,j as e,b as n,H as A,d as R,F as $}from"./app-Ol1-3YLP.js";import{u as g,F as f,a as c,G as B,A as H}from"./App-Db-2N56m.js";import{P as N}from"./PageHeader-VddISsN1.js";import{S as T}from"./StatsCards-MW3dR8cd.js";import{T as W}from"./TimeSheetTable-BI-e2jJJ.js";import{u as L,G as P,B as m,T as Y}from"./logo-BDcq4bh7.js";import{F as j}from"./CheckCircleIcon-CrlMHnae.js";import{F as E}from"./XCircleIcon-B6B3lu2P.js";import{F as G}from"./ExclamationTriangleIcon-CkhRHS5M.js";import{F as _}from"./ChartBarIcon-Bjg0TRwK.js";import{F as z}from"./UserIcon-Dqer_rAH.js";import{C as I}from"./CardHeader-Cv99F5Ex.js";import{C as O}from"./CardContent-DnZrMehr.js";import{F as Q}from"./PresentationChartLineIcon-DgTrWw9i.js";import{i as U}from"./chunk-SSA7SXE4-tUlMByoI.js";import"./app-DaK0gnF8.js";import"./EnvelopeIcon-DPdz4c2F.js";import"./ShieldCheckIcon-Bv5Af3OT.js";import"./chunk-D5XJWRAV-DCqp9hjw.js";import"./dayjs.min-BItn3byB.js";import"./Button-C_OOnEiA.js";import"./DocumentArrowDownIcon-DrAsTt1h.js";import"./chunk-TLYTI3QM-inpK2peY.js";import"./chunk-F3UDT23P-ZGH0dOcb.js";import"./chunk-XJ2YRSUP-Dz8robVt.js";import"./useHasTabbableChild-Dg-2FDG1.js";import"./index-DpqD91GJ.js";import"./chunk-EAPQ7RWQ-C6iTIHE7.js";import"./index-CokAva9Y.js";import"./chunk-S574QCAN-ClPalI2M.js";import"./create-visual-element-DN6WA9sp.js";const V=M.memo(({title:i,totalWorkingDays:q,presentDays:J,absentDays:K,lateArrivals:X})=>{const{auth:Z}=k().props,d=L(),b=g(d.breakpoints.down("sm"));g(d.breakpoints.down("md"));const[h,y]=o.useState(new Date),[v,p]=o.useState(!1),[ee,te]=o.useState(!1),[r,w]=o.useState({currentMonth:new Date().toISOString().slice(0,7)}),[a,D]=o.useState({totalWorkingDays:0,totalDaysInMonth:0,holidaysCount:0,weekendsCount:0,presentDays:0,absentDays:0,lateArrivals:0,attendancePercentage:0,averageWorkHours:0,overtimeHours:0,totalWorkHours:0,totalLeaveDays:0,leaveBreakdown:{},month:"",generated_at:null}),x=t=>{const l=t.target.value;y(new Date(l)),p(s=>!s)},F=o.useCallback((t,l)=>{w(s=>({...s,[t]:l})),p(s=>!s)},[]),u=o.useCallback(async()=>{try{const t=await C.get(route("attendance.myMonthlyStats"),{params:{currentYear:r.currentMonth?new Date(r.currentMonth).getFullYear():new Date().getFullYear(),currentMonth:r.currentMonth?String(new Date(r.currentMonth).getMonth()+1).padStart(2,"0"):String(new Date().getMonth()+1).padStart(2,"0")}});t.data.success&&D(t.data.data)}catch(t){console.error("Failed to fetch monthly stats:",t)}},[r.currentMonth]);o.useEffect(()=>{u()},[u]);const S=[{title:"Working Days",value:a.totalWorkingDays,icon:e(f,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:`Total for ${a.month||"this month"}`},{title:"Present Days",value:a.presentDays,icon:e(j,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Days attended this month"},{title:"Absent Days",value:a.absentDays,icon:e(E,{}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Days missed this month"},{title:"Late Arrivals",value:a.lateArrivals,icon:e(G,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Times late this month"},{title:"Attendance Rate",value:`${a.attendancePercentage}%`,icon:e(_,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Your monthly performance"},{title:"Avg Work Hours",value:`${a.averageWorkHours}h`,icon:e(c,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Daily average this month"},{title:"Overtime",value:`${a.overtimeHours}h`,icon:e(c,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Extra hours this month"},{title:"Leave Days",value:a.totalLeaveDays,icon:e(z,{}),color:"text-amber-400",iconBg:"bg-amber-500/20",description:"Leaves taken this month"}];return n($,{children:["            ",e(A,{title:i||"My Attendance"}),e(m,{sx:{display:"flex",justifyContent:"center",p:2},children:e(B,{in:!0,children:e(P,{children:e(N,{title:"My Attendance",subtitle:"View your attendance records and timesheet details",icon:e(Q,{className:"w-8 h-8"}),variant:"default",children:n("div",{className:"p-6",children:[e(T,{stats:S,className:"mb-6"}),e("div",{className:"mb-6",children:e("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:e("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e(U,{label:"Month/Year",type:"month",value:r.currentMonth,onChange:t=>F("currentMonth",t.target.value),startContent:e(f,{className:"w-4 h-4"}),variant:"bordered",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:b?"sm":"md"})})})}),n("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e(I,{title:n(m,{className:"flex items-center gap-3",children:[e(c,{className:"w-6 h-6 text-primary"}),e(Y,{variant:"h5",component:"h1",sx:{fontSize:{xs:"1.25rem",sm:"1.5rem",md:"1.75rem"},fontWeight:600},children:"My Attendance Records"})]}),sx:{padding:"24px"}}),e(R,{}),e(O,{children:e(m,{sx:{maxHeight:"84vh",overflowY:"auto"},children:e(W,{selectedDate:h,handleDateChange:x,updateTimeSheet:v,externalFilterData:r},`${h}-${r.currentMonth}`)})})]})]})})})})})]})});V.layout=i=>e(H,{children:i});export{V as default};
