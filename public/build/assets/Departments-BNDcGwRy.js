import{J as pe,r as d,j as e,s as fe,d as w,f as Y,a as L,u as Pe,Q as Se,c as Fe,b as Te}from"./app-n1LIYQPq.js";import{G as Ie}from"./GlassCard-tq8d8nY0.js";import{P as Ee}from"./PageHeader-BotAXnpM.js";import{S as Ae}from"./StatsCards-CChDBcUs.js";import{B as G,C as ke,D as Re,E as Me,H as V,a as ge,i as je,w as J,e as be,G as $e,s as W,m as Oe,j as ze,k as Be,n as Ge,o as Le,c as Ye,A as We,f as He,I as Ue,l as O}from"./Dashboard-DJ5BzCaS.js";import{d as ee}from"./dayjs.min-B9vFY_nY.js";import{N as Qe}from"./NoDataMessage-BW2gelus.js";import{F as ce}from"./EyeIcon-kjikpHR1.js";import{F as K}from"./PencilIcon-BkKyTD42.js";import{F as me}from"./TrashIcon-jO2cXYDk.js";import{F as Ve}from"./EllipsisVerticalIcon-MD4dfyXX.js";import{F as X}from"./CheckCircleIcon-CTmMgZPD.js";import{F as Z}from"./XCircleIcon-ChDLRiub.js";import{F as qe}from"./UserIcon-CpBOTOOT.js";import{t as Je,a as Ke,b as Xe,c as Ze}from"./chunk-F3UDT23P-CfD27OBv.js";import{t as es,a as ss}from"./chunk-YRZGWF2W-BSYRfbDM.js";import{p as ve}from"./chunk-EAPQ7RWQ-C_ZIqbI7.js";import{t as q,c as A,a as we,B as F}from"./react-toastify.esm-BDdnkiAB.js";import{u as he}from"./chunk-S574QCAN-Cb5yHIHy.js";import{s as as}from"./chunk-TQNYOUFX-Drz50ky1.js";import{F as ts}from"./ExclamationTriangleIcon-DMLwC-5W.js";import{F as rs}from"./PlusIcon-BCxHxKhs.js";import{F as ls}from"./DocumentArrowDownIcon-BTegPBhP.js";import{m as xe}from"./proxy-BHshDoAS.js";import{b as ns}from"./chunk-57V4RE7B-DYEOAoWt.js";import{F as is}from"./TableCellsIcon-m10qWc7L.js";import{F as os}from"./AdjustmentsHorizontalIcon-DoeVcrNC.js";import{i as ds}from"./chunk-SSA7SXE4-BTItze1Z.js";import"./chunk-D5XJWRAV-CVXe_h6o.js";import"./chunk-TLYTI3QM-BSxz-uix.js";import"./EnvelopeIcon-Cyp16-sG.js";import"./ShieldCheckIcon-BYBWX_Ph.js";import"./KeyIcon-BR78fqqK.js";import"./logo-Pwvcz7fP.js";import"./features-animation-BfbXr3Ir.js";import"./create-visual-element-Dv6o1znz.js";import"./chunk-XJ2YRSUP-lNaR9vZt.js";import"./useToggleState-CNXYdUeg.js";const cs=({departments:u,onEdit:m,onDelete:C,onView:t,loading:p,isMobile:o,isTablet:v,pagination:f,onPageChange:c,onRowsPerPageChange:T,canEditDepartment:r=!1,canDeleteDepartment:P=!1})=>{var I,k;const{auth:l}=pe().props,h=r||((I=l.permissions)==null?void 0:I.includes("departments.update"))||!1,x=P||((k=l.permissions)==null?void 0:k.includes("departments.delete"))||!1,g=d.useMemo(()=>[{name:"DEPARTMENT",uid:"name"},{name:"CODE",uid:"code",hide:o},{name:"MANAGER",uid:"manager"},{name:"EMPLOYEES",uid:"employees"},{name:"LOCATION",uid:"location",hide:o},{name:"STATUS",uid:"status"},{name:"ESTABLISHED",uid:"established",hide:o||v},{name:"ACTIONS",uid:"actions"}].filter(y=>!y.hide),[o,v]),n=(a,y)=>{var j,S;switch(y){case"name":return e.jsx(he,{avatarProps:{radius:"lg",fallback:e.jsx(be,{className:"w-8 h-4"}),size:o?"sm":"md"},name:a.name,description:a.parent?a.parent.name:"Top-level department",classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}});case"code":return e.jsx("div",{children:a.code?e.jsx(A,{size:"sm",variant:"flat",color:"primary",className:"text-xs",children:a.code}):e.jsx("span",{className:"text-default-400 text-xs",children:"-"})});case"manager":return e.jsx("div",{className:"flex items-start ",children:a.manager?e.jsxs(e.Fragment,{children:[e.jsx(he,{avatarProps:{radius:"lg",src:((j=a.manager)==null?void 0:j.profile_image_url)||((S=a.manager)==null?void 0:S.profile_image),size:"md",fallback:e.jsx(qe,{className:"w-5 h-5"})},classNames:{name:"font-semibold text-foreground text-sm",description:"text-default-500 text-xs"}}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm",children:a.manager.name}),!o&&a.manager.email&&e.jsx("span",{className:"text-xs text-default-400",children:a.manager.email})]})]}):e.jsx("span",{className:"text-default-400 text-xs",children:"Not assigned"})});case"employees":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{children:a.employee_count||0})]});case"location":return e.jsx("div",{className:"flex items-center gap-2",children:a.location?e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{children:a.location})]}):e.jsx("span",{className:"text-default-400 text-xs",children:"-"})});case"status":return e.jsx(A,{size:"sm",variant:a.is_active?"solid":"bordered",color:a.is_active?"success":"danger",startContent:a.is_active?e.jsx(X,{className:"w-3 h-3"}):e.jsx(Z,{className:"w-3 h-3"}),children:a.is_active?"Active":"Inactive"});case"established":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-sm",children:a.established_date?ee(a.established_date).format("MMM D, YYYY"):e.jsx("span",{className:"text-default-400 text-xs",children:"-"})})]});case"actions":return e.jsx("div",{className:"flex justify-end items-center",children:o?e.jsxs(ke,{children:[e.jsx(Re,{children:e.jsx(w,{isIconOnly:!0,size:"sm",variant:"light",children:e.jsx(Ve,{className:"w-4 h-4"})})}),e.jsxs(Me,{"aria-label":"Department actions",children:[e.jsx(V,{startContent:e.jsx(ce,{className:"w-4 h-4"}),onPress:()=>t(a),children:"View Details"},"view"),h&&e.jsx(V,{startContent:e.jsx(K,{className:"w-4 h-4"}),onPress:()=>m(a),children:"Edit Department"},"edit"),x&&e.jsx(V,{className:"text-danger",color:"danger",startContent:e.jsx(me,{className:"w-4 h-4"}),isDisabled:a.employee_count>0,onPress:()=>C(a),children:"Delete Department"},"delete")]})]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{content:"View Department",children:e.jsx(w,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:()=>t(a),children:e.jsx(ce,{className:"w-4 h-4"})})}),h&&e.jsx(q,{content:"Edit Department",children:e.jsx(w,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-blue-500",onPress:()=>m(a),children:e.jsx(K,{className:"w-4 h-4"})})}),x&&e.jsx(q,{content:a.employee_count>0?"Cannot delete department with employees":"Delete Department",children:e.jsx(w,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-danger",isDisabled:a.employee_count>0,onPress:()=>C(a),children:e.jsx(me,{className:"w-4 h-4"})})})]})});default:return e.jsx("span",{children:a[y]})}},N=()=>!u||!u.data||p?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10",children:[e.jsxs("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(f.currentPage-1)*f.perPage+1," to ",Math.min(f.currentPage*f.perPage,u.total)," of ",u.total," departments"]}),e.jsx(ve,{total:Math.ceil(u.total/f.perPage),initialPage:f.currentPage,page:f.currentPage,onChange:c,size:o?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]});return!p&&(!u||!u.data||u.data.length===0)?e.jsx("div",{className:"w-full",children:e.jsx(Qe,{message:"No departments found",icon:e.jsx(G,{className:"w-12 h-12 text-default-300"}),description:"Try adjusting your search or filters"})}):e.jsx("div",{className:"w-full",children:e.jsxs(Je,{"aria-label":"Departments table",removeWrapper:!0,classNames:{base:"bg-transparent",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs",td:"border-b border-white/5 py-3"},bottomContent:N(),children:[e.jsx(es,{columns:g,children:a=>e.jsx(ss,{children:a.name},a.uid)}),e.jsx(Ke,{items:u.data||[],emptyContent:!p&&"No departments found",loadingContent:e.jsx(fe,{}),isLoading:p,children:a=>e.jsx(Xe,{children:y=>e.jsx(Ze,{children:n(a,y)})},a.id)})]})})},ue=({open:u,onClose:m,onSuccess:C,department:t=null,managers:p=[],parentDepartments:o=[]})=>{var k,a,y,j,S;const{theme:v,getCurrentColors:f}=useTheme(),c=f();typeof c.primary=="object"?c.primary.DEFAULT:c.primary;const T=useMediaQuery(v.breakpoints.down("md")),[r,P]=d.useState(!1),[l,h]=d.useState({}),x={name:"",code:"",description:"",parent_id:null,manager_id:null,location:"",is_active:!0,established_date:""},[g,n]=d.useState(x);d.useEffect(()=>{n(t?{name:t.name||"",code:t.code||"",description:t.description||"",parent_id:t.parent_id||null,manager_id:t.manager_id||null,location:t.location||"",is_active:t.is_active??!0,established_date:t.established_date?ee(t.established_date).format("YYYY-MM-DD"):""}:x),h({})},[t,u]);const N=i=>{const{name:E,value:_,type:D,checked:z}=i.target;n(B=>({...B,[E]:D==="checkbox"?z:_})),l[E]&&h(B=>({...B,[E]:null}))},I=async()=>{var i,E;P(!0),h({});try{const _={...g,established_date:g.established_date||null};let D;t!=null&&t.id?(D=await L.put(`/departments/${t.id}`,_),F.success("Department updated successfully")):(D=await L.post("/departments",_),F.success("Department created successfully")),C(D.data.department),m()}catch(_){if(console.error("Error saving department:",_),(E=(i=_.response)==null?void 0:i.data)!=null&&E.errors){h(_.response.data.errors);const D=Object.values(_.response.data.errors)[0];D&&F.error(D[0])}else F.error("An error occurred while saving the department")}finally{P(!1)}};return e.jsxs($e,{open:u,onClose:r?void 0:m,maxWidth:"md",fullWidth:!0,fullScreen:T,"aria-labelledby":"department-form-dialog",children:[e.jsxs(DialogTitle,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[e.jsx(Typography,{variant:"h6",component:"div",children:t?"Edit Department":"Create New Department"}),e.jsx(IconButton,{edge:"end",color:"inherit",onClick:m,disabled:r,"aria-label":"close",children:e.jsx(we,{className:"w-5 h-5"})})]}),e.jsx(Y,{}),e.jsx(DialogContent,{sx:{pt:2},children:e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,children:e.jsx(Typography,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Basic Information"})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsx(TextField,{name:"name",label:"Department Name",fullWidth:!0,required:!0,value:g.name,onChange:N,error:!!l.name,helperText:((k=l.name)==null?void 0:k[0])||"",disabled:r})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsx(TextField,{name:"code",label:"Department Code",fullWidth:!0,value:g.code||"",onChange:N,error:!!l.code,helperText:((a=l.code)==null?void 0:a[0])||"Unique identifier (e.g., HR001, FIN002)",disabled:r})}),e.jsx(Grid,{item:!0,xs:12,children:e.jsx(TextField,{name:"description",label:"Description",fullWidth:!0,multiline:!0,rows:3,value:g.description||"",onChange:N,error:!!l.description,helperText:((y=l.description)==null?void 0:y[0])||"",disabled:r})}),e.jsx(Grid,{item:!0,xs:12,sx:{mt:2},children:e.jsx(Typography,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Organizational Information"})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsxs(FormControl,{fullWidth:!0,error:!!l.parent_id,children:[e.jsx(InputLabel,{id:"parent-department-label",children:"Parent Department"}),e.jsxs(W,{labelId:"parent-department-label",name:"parent_id",value:g.parent_id||"",onChange:N,label:"Parent Department",disabled:r,children:[e.jsx(MenuItem,{value:"",children:e.jsx("em",{children:"None (Top-Level Department)"})}),o.map(i=>(t==null?void 0:t.id)!==i.id&&e.jsx(MenuItem,{value:i.id,children:i.name},i.id))]}),l.parent_id&&e.jsx(FormHelperText,{children:l.parent_id[0]})]})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsxs(FormControl,{fullWidth:!0,error:!!l.manager_id,children:[e.jsx(InputLabel,{id:"manager-label",children:"Department Manager"}),e.jsxs(W,{labelId:"manager-label",name:"manager_id",value:g.manager_id||"",onChange:N,label:"Department Manager",disabled:r,children:[e.jsx(MenuItem,{value:"",children:e.jsx("em",{children:"Not Assigned"})}),p.map(i=>e.jsx(MenuItem,{value:i.id,children:i.name},i.id))]}),l.manager_id&&e.jsx(FormHelperText,{children:l.manager_id[0]})]})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsx(TextField,{name:"location",label:"Location",fullWidth:!0,value:g.location||"",onChange:N,error:!!l.location,helperText:((j=l.location)==null?void 0:j[0])||"Physical location of the department",disabled:r})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsx(TextField,{name:"established_date",label:"Established Date",type:"date",fullWidth:!0,value:g.established_date||"",onChange:N,error:!!l.established_date,helperText:((S=l.established_date)==null?void 0:S[0])||"",disabled:r,InputLabelProps:{shrink:!0}})}),e.jsxs(Grid,{item:!0,xs:12,children:[e.jsx(FormControlLabel,{control:e.jsx(as,{checked:g.is_active,onChange:N,name:"is_active",color:"success",disabled:r}),label:"Department is active"}),l.is_active&&e.jsx(FormHelperText,{error:!0,children:l.is_active[0]})]})]})}),e.jsx(Y,{}),e.jsxs(DialogActions,{sx:{px:3,py:2},children:[e.jsx(w,{onClick:m,disabled:r,color:"inherit",children:"Cancel"}),e.jsx(w,{onClick:I,variant:"contained",color:"primary",disabled:r,children:r?"Saving...":t?"Update Department":"Create Department"})]})]})},ms=({open:u,onClose:m,onSuccess:C,department:t})=>{const[p,o]=d.useState(!1),[v,f]=d.useState(null),c=async()=>{var T,r,P,l;if(t){o(!0),f(null);try{await L.delete(`/departments/${t.id}`),F.success("Department deleted successfully"),C(),m()}catch(h){if(console.error("Error deleting department:",h),(r=(T=h.response)==null?void 0:T.data)!=null&&r.message)f(h.response.data.message),F.error(h.response.data.message);else if((l=(P=h.response)==null?void 0:P.data)!=null&&l.errors){const x=Object.values(h.response.data.errors)[0];f(x),F.error(x)}else f("An error occurred while deleting the department"),F.error("An error occurred while deleting the department")}finally{o(!1)}}};return t?e.jsx(Oe,{isOpen:u,onOpenChange:p?void 0:m,size:"lg",children:e.jsxs(ze,{children:[e.jsxs(Be,{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delete Department"}),e.jsx(w,{isIconOnly:!0,variant:"light",onPress:m,isDisabled:p,"aria-label":"close",children:e.jsx(we,{className:"w-5 h-5"})})]}),e.jsx(Y,{}),e.jsx(Ge,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-8 h-8 text-yellow-500"}),e.jsxs("p",{className:"text-sm",children:["Are you sure you want to delete the department ",e.jsx("strong",{children:t.name}),"?"]})]}),t.employee_count>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded",children:["This department has ",t.employee_count," employees assigned to it. You cannot delete a department with active employees. Please reassign these employees to other departments first."]}),v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:v}),e.jsx("p",{className:"text-sm text-default-500 mt-1",children:"This action cannot be undone. All associated data will be permanently removed."})]})}),e.jsx(Y,{}),e.jsxs(Le,{children:[e.jsx(w,{onPress:m,isDisabled:p,variant:"light",children:"Cancel"}),e.jsx(w,{onPress:c,color:"danger",isDisabled:p||t.employee_count>0,isLoading:p,children:p?"Deleting...":"Delete Department"})]})]})}):null},Js=({title:u,departments:m,managers:C,parentDepartments:t,stats:p,filters:o})=>{var te,re,le,ne,ie,oe;const{auth:v}=pe().props,{theme:f}=Pe(),[c]=d.useState(window.innerWidth<640),[T]=d.useState(window.innerWidth<768),[r,P]=d.useState(m||{data:[]}),[l,h]=d.useState(!1),[x,g]=d.useState({type:null,department:null}),[n,N]=d.useState({search:(o==null?void 0:o.search)||"",status:(o==null?void 0:o.status)||"all",parentDepartment:(o==null?void 0:o.parentDepartment)||"all"}),[I,k]=d.useState(!1),[a,y]=d.useState("table"),[j,S]=d.useState({currentPage:(m==null?void 0:m.current_page)||1,perPage:(m==null?void 0:m.per_page)||10}),[i,E]=d.useState(p||{total:0,active:0,inactive:0,parent_departments:0}),_=((te=v.permissions)==null?void 0:te.includes("departments.create"))||!1,D=((re=v.permissions)==null?void 0:re.includes("departments.update"))||!1,z=((le=v.permissions)==null?void 0:le.includes("departments.delete"))||!1,B=D||((ne=v.permissions)==null?void 0:ne.includes("departments.update"))||!1;z||(ie=v.permissions)!=null&&ie.includes("departments.delete");const H=d.useCallback(async()=>{h(!0);try{const s=await L.get(route("api.departments"),{params:{page:j.currentPage,per_page:j.perPage,search:n.search,status:n.status,parent_department:n.parentDepartment}});P(s.data.departments)}catch(s){console.error("Error fetching departments:",s),F.error("Failed to load departments data")}finally{h(!1)}},[j.currentPage,j.perPage,n.search,n.status,n.parentDepartment]),U=d.useCallback(async()=>{try{const s=await L.get(route("departments.stats"));if(s.status===200){const{stats:b}=s.data;E(b)}}catch(s){console.error("Error fetching department stats:",s)}},[]);d.useEffect(()=>{H(),U()},[H,U]);const R=(s,b)=>{N($=>({...$,[s]:b})),S($=>({...$,currentPage:1}))},se=s=>{S(b=>({...b,currentPage:s})),window.scrollTo({top:0,behavior:"smooth"})},Ne=s=>{S({currentPage:1,perPage:s})},M=(s,b=null)=>{g({type:s,department:b})},Q=()=>{g({type:null,department:null})},ae=()=>{H(),U()},ye=({department:s,index:b})=>{const $=s.manager,de=s.parent;return e.jsx(Fe,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>M("view_department",s),children:e.jsxs(Te,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e.jsx("div",{className:"flex justify-center items-center h-10 w-10 rounded-lg bg-primary/20 text-primary shrink-0",children:e.jsx(be,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground text-sm line-clamp-1",children:s.name}),e.jsx("p",{className:"text-default-500 text-xs",children:s.code||"No Code"})]}),B&&e.jsx(w,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground ml-2",onPress:Ce=>{Ce.stopPropagation(),M("edit_department",s)},children:e.jsx(K,{className:"w-4 h-4"})})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[s.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(je,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs line-clamp-1",children:s.location})]}),s.established_date&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ge,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs",children:ee(s.established_date).format("MMM D, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(J,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsxs("span",{className:"text-default-600 text-xs",children:[s.employee_count||0," ",s.employee_count===1?"Employee":"Employees"]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[e.jsx(A,{size:"sm",variant:s.is_active?"solid":"bordered",color:s.is_active?"success":"danger",className:"text-xs",startContent:s.is_active?e.jsx(X,{className:"w-3 h-3"}):e.jsx(Z,{className:"w-3 h-3"}),children:s.is_active?"Active":"Inactive"}),de&&e.jsx(A,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e.jsx(G,{className:"w-3 h-3"}),children:de.name}),$&&e.jsx(A,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e.jsx(J,{className:"w-3 h-3"}),children:$.name})]})]})})},_e=d.useMemo(()=>[{title:"Total Departments",value:(i==null?void 0:i.total)||0,icon:e.jsx(G,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All departments"},{title:"Active",value:(i==null?void 0:i.active)||0,icon:e.jsx(X,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Active departments"},{title:"Inactive",value:(i==null?void 0:i.inactive)||0,icon:e.jsx(Z,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Inactive departments"},{title:"Parent Departments",value:(i==null?void 0:i.parent_departments)||0,icon:e.jsx(Ye,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Top-level departments"}],[i]),De=d.useMemo(()=>{const s=[];return _&&s.push({label:c?"Add":"Add Department",icon:e.jsx(rs,{className:"w-4 h-4"}),onPress:()=>M("add_department"),className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}),s.push({label:c?"":"Export",isIconOnly:c,icon:e.jsx(ls,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),s},[_,c]);return e.jsxs(We,{children:[e.jsx(Se,{title:u}),e.jsx("div",{className:"flex justify-center p-2",children:e.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:e.jsx(Ie,{children:e.jsx(Ee,{title:"Department Management",subtitle:"Manage company departments, hierarchies, and organizational structure",icon:e.jsx(G,{className:"w-8 h-8"}),variant:"default",actionButtons:De,children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(Ae,{stats:_e,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ds,{label:"Search Departments",placeholder:"Search by name, code, or location...",value:n.search,onChange:s=>R("search",s.target.value),startContent:e.jsx(He,{className:"w-4 h-4 text-default-400"})})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(ns,{variant:"bordered",className:"bg-white/5",children:[e.jsxs(w,{isIconOnly:c,color:a==="table"?"primary":"default",onPress:()=>y("table"),className:a==="table"?"bg-blue-500/20":"",children:[e.jsx(is,{className:"w-4 h-4"}),!c&&e.jsx("span",{className:"ml-1",children:"Table"})]}),e.jsxs(w,{isIconOnly:c,color:a==="grid"?"primary":"default",onPress:()=>y("grid"),className:a==="grid"?"bg-blue-500/20":"",children:[e.jsx(Ue,{className:"w-4 h-4"}),!c&&e.jsx("span",{className:"ml-1",children:"Grid"})]})]}),e.jsxs(w,{isIconOnly:c,variant:"bordered",onPress:()=>k(!I),className:I?"bg-purple-500/20":"bg-white/5",children:[e.jsx(os,{className:"w-4 h-4"}),!c&&e.jsx("span",{className:"ml-1",children:"Filters"})]})]})]}),I&&e.jsxs(xe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(W,{label:"Status",variant:"bordered",selectedKeys:n.status!=="all"?[n.status]:[],onSelectionChange:s=>{const b=Array.from(s)[0]||"all";R("status",b)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e.jsx(O,{value:"all",children:"All Statuses"},"all"),e.jsx(O,{value:"active",children:"Active Only"},"active"),e.jsx(O,{value:"inactive",children:"Inactive Only"},"inactive")]}),e.jsxs(W,{label:"Parent Department",variant:"bordered",selectedKeys:n.parentDepartment!=="all"?[n.parentDepartment]:[],onSelectionChange:s=>{const b=Array.from(s)[0]||"all";R("parentDepartment",b)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e.jsx(O,{value:"all",children:"All Parent Departments"},"all"),e.jsx(O,{value:"none",children:"Top-Level Departments"},"none"),t==null?void 0:t.map(s=>e.jsx(O,{value:s.id.toString(),children:s.name},s.id.toString()))]})]}),(n.search||n.status!=="all"||n.parentDepartment!=="all")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[n.search&&e.jsxs(A,{variant:"flat",color:"primary",size:"sm",onClose:()=>R("search",""),children:["Search: ",n.search]}),n.status!=="all"&&e.jsxs(A,{variant:"flat",color:"secondary",size:"sm",onClose:()=>R("status","all"),children:["Status: ",n.status==="active"?"Active":"Inactive"]}),n.parentDepartment!=="all"&&e.jsxs(A,{variant:"flat",color:"warning",size:"sm",onClose:()=>R("parentDepartment","all"),children:["Parent: ",n.parentDepartment==="none"?"None (Top-Level)":(oe=t==null?void 0:t.find(s=>s.id===parseInt(n.parentDepartment)))==null?void 0:oe.name]})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:[a==="table"?"Department Table":"Department Grid",e.jsxs("span",{className:"text-sm text-default-500 ml-2",children:["(",r.total||0," ",r.total===1?"department":"departments",")"]})]})}),l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(fe,{size:"lg"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading departments data..."})]}):a==="table"?e.jsx(cs,{departments:r,loading:l,onEdit:D?s=>M("edit_department",s):void 0,onDelete:z?s=>M("delete_department",s):void 0,onView:s=>M("view_department",s),isMobile:c,isTablet:T,pagination:j,onPageChange:se,onRowsPerPageChange:Ne,canEditDepartment:D,canDeleteDepartment:z}):e.jsxs("div",{className:"p-4",children:[r.data&&r.data.length>0?e.jsx("div",{className:`grid gap-4 ${c?"grid-cols-1":T?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:r.data.map((s,b)=>e.jsx(ye,{department:s,index:b},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(G,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e.jsx("p",{className:"text-default-500 mb-1",children:"No departments found"}),e.jsx("p",{className:"text-xs text-default-400",children:"Try adjusting your search or filters"})]}),r.data&&r.data.length>0&&e.jsx("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e.jsx(ve,{total:Math.ceil(r.total/j.perPage),initialPage:j.currentPage,page:j.currentPage,onChange:se,size:c?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})}),(x.type==="add_department"||x.type==="edit_department")&&e.jsx(ue,{open:!0,onClose:Q,onSuccess:ae,department:x.type==="edit_department"?x.department:null,managers:C,parentDepartments:t}),x.type==="delete_department"&&e.jsx(ms,{open:!0,onClose:Q,onSuccess:ae,department:x.department}),x.type==="view_department"&&e.jsx(ue,{open:!0,onClose:Q,onSuccess:()=>{},department:x.department,managers:C,parentDepartments:t,readOnly:!0})]})};export{Js as default};
