import{r as i,R as te,k as Fe,j as e,C as se,x as ne,a4 as Ne,a5 as Re,H as ze,c as M,a as Z}from"./app-C1U45Ebj.js";import{u as ie,a as le,F as ke,g as Le,c as $,G as De,h as Oe,B as Y,A as Pe}from"./App-whY0_PgO.js";import{_ as Ee,a as Te,u as Ae,B as Me,G as $e,F as Be,T as Ie}from"./logo-CfQNLy2U.js";import{P as We}from"./PageHeader-BguKKtkP.js";import{S as Ye}from"./StatsCards-CTb1gp2_.js";import{u as de,t as Ue,a as Ge,b as qe,c as Ve,d as Ke,e as Qe}from"./chunk-F3UDT23P-C9zYK25D.js";import{m as ce,a as ue,b as pe,c as he,d as fe}from"./chunk-UKLRQS27-BP4OTlSe.js";import{F as me}from"./GlobeAltIcon-DQpReNcy.js";import{F as Xe}from"./PencilIcon-BS_QTdXf.js";import{F as Ze}from"./TrashIcon-CloBOZ-O.js";import{F as Je}from"./CheckCircleIcon-B_RrSLXz.js";import{F as et}from"./ExclamationTriangleIcon-C6Etxr_V.js";import{F as tt}from"./FunnelIcon-DQeo0PRv.js";import{F as at}from"./PlusIcon-BuMNm0s1.js";import{d as ge}from"./chunk-URM6S66B-24pSbC3S.js";import{a as rt,C as ot,i as xe}from"./chunk-SSA7SXE4-CwjhqkNF.js";import{t as be}from"./chunk-BOOVDPB6-5to7tsiY.js";import{s as ye,l as J}from"./chunk-Y2AYO5NJ-BRwLVlLS.js";import"./EnvelopeIcon-DYtxSQqd.js";import"./UserIcon-Ch89lSMO.js";import"./ShieldCheckIcon-BOaBImyC.js";import"./create-visual-element-BuHeE9lo.js";import"./chunk-D5XJWRAV-D_e-q5OY.js";import"./useHasTabbableChild-zsiyx3Qk.js";import"./index-C-LltKoZ.js";import"./NumberFormatter-DNR9MAW-.js";var st=i.useLayoutEffect,nt=function(r){var a=te.useRef(r);return st(function(){a.current=r}),a},ve=function(r,a){if(typeof r=="function"){r(a);return}r.current=a},it=function(r,a){var o=te.useRef();return te.useCallback(function(l){r.current=l,o.current&&ve(o.current,null),o.current=a,a&&ve(a,l)},[a])},je={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},lt=function(r){Object.keys(je).forEach(function(a){r.style.setProperty(a,je[a],"important")})},we=lt,b=null,Ce=function(r,a){var o=r.scrollHeight;return a.sizingStyle.boxSizing==="border-box"?o+a.borderSize:o-a.paddingSize};function dt(s,r,a,o){a===void 0&&(a=1),o===void 0&&(o=1/0),b||(b=document.createElement("textarea"),b.setAttribute("tabindex","-1"),b.setAttribute("aria-hidden","true"),we(b)),b.parentNode===null&&document.body.appendChild(b);var l=s.paddingSize,h=s.borderSize,u=s.sizingStyle,f=u.boxSizing;Object.keys(u).forEach(function(m){var y=m;b.style[y]=u[y]}),we(b),b.value=r;var p=Ce(b,s);b.value=r,p=Ce(b,s),b.value="x";var d=b.scrollHeight-l,g=d*a;f==="border-box"&&(g=g+l+h),p=Math.max(g,p);var x=d*o;return f==="border-box"&&(x=x+l+h),p=Math.min(x,p),[p,d]}var Se=function(){},ct=function(r,a){return r.reduce(function(o,l){return o[l]=a[l],o},{})},ut=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],pt=!!document.documentElement.currentStyle,ht=function(r){var a=window.getComputedStyle(r);if(a===null)return null;var o=ct(ut,a),l=o.boxSizing;if(l==="")return null;pt&&l==="border-box"&&(o.width=parseFloat(o.width)+parseFloat(o.borderRightWidth)+parseFloat(o.borderLeftWidth)+parseFloat(o.paddingRight)+parseFloat(o.paddingLeft)+"px");var h=parseFloat(o.paddingBottom)+parseFloat(o.paddingTop),u=parseFloat(o.borderBottomWidth)+parseFloat(o.borderTopWidth);return{sizingStyle:o,paddingSize:h,borderSize:u}},ft=ht;function ae(s,r,a){var o=nt(a);i.useLayoutEffect(function(){var l=function(u){return o.current(u)};if(s)return s.addEventListener(r,l),function(){return s.removeEventListener(r,l)}},[])}var mt=function(r,a){ae(document.body,"reset",function(o){r.current.form===o.target&&a(o)})},gt=function(r){ae(window,"resize",r)},xt=function(r){ae(document.fonts,"loadingdone",r)},bt=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],yt=function(r,a){var o=r.cacheMeasurements,l=r.maxRows,h=r.minRows,u=r.onChange,f=u===void 0?Se:u,p=r.onHeightChange,d=p===void 0?Se:p,g=Ee(r,bt),x=g.value!==void 0,m=i.useRef(null),y=it(m,a),_=i.useRef(0),S=i.useRef(),j=function(){var v=m.current,k=o&&S.current?S.current:ft(v);if(k){S.current=k;var H=dt(k,v.value||v.placeholder||"x",h,l),c=H[0],R=H[1];_.current!==c&&(_.current=c,v.style.setProperty("height",c+"px","important"),d(c,{rowHeight:R}))}},w=function(v){x||j(),f(v)};return i.useLayoutEffect(j),mt(m,function(){if(!x){var z=m.current.value;requestAnimationFrame(function(){var v=m.current;v&&z!==v.value&&j()})}}),gt(j),xt(j),i.createElement("textarea",Te({},g,{onChange:w,ref:y}))},vt=i.forwardRef(yt),_e=Fe(({style:s,minRows:r=3,maxRows:a=8,cacheMeasurements:o=!1,disableAutosize:l=!1,onHeightChange:h,...u},f)=>{const{Component:p,label:d,description:g,startContent:x,endContent:m,hasHelper:y,shouldLabelBeOutside:_,shouldLabelBeInside:S,isInvalid:j,errorMessage:w,getBaseProps:z,getLabelProps:v,getInputProps:k,getInnerWrapperProps:H,getInputWrapperProps:c,getHelperWrapperProps:R,getDescriptionProps:F,getErrorMessageProps:N,isClearable:P,getClearButtonProps:L}=rt({...u,ref:f,isMultiline:!0}),[U,E]=i.useState(r>1),[G,T]=i.useState(!1),B=d?e.jsx("label",{...v(),children:d}):null,D=k(),A=(n,C)=>{if(r===1&&E(n>=C.rowHeight*2),a>r){const O=n>=a*C.rowHeight;T(O)}h==null||h(n,C)},I=l?e.jsx("textarea",{...D,style:se(D.style,s??{})}):e.jsx(vt,{...D,cacheMeasurements:o,"data-hide-scroll":ne(!G),maxRows:a,minRows:r,style:se(D.style,s??{}),onHeightChange:A}),q=i.useMemo(()=>P?e.jsx("button",{...L(),children:e.jsx(ot,{})}):null,[P,L]),V=i.useMemo(()=>x||m?e.jsxs("div",{...H(),children:[x,I,m]}):e.jsx("div",{...H(),children:I}),[x,D,m,H]),W=j&&w,t=W||g;return e.jsxs(p,{...z(),children:[_?B:null,e.jsxs("div",{...c(),"data-has-multiple-rows":ne(U),children:[S?B:null,V,q]}),y&&t?e.jsx("div",{...R(),children:W?e.jsx("div",{...N(),children:w}):e.jsx("div",{...F(),children:g})}):null]})});_e.displayName="HeroUI.Textarea";var jt=_e;function ee(s={}){const{id:r,defaultOpen:a,isOpen:o,onClose:l,onOpen:h,onChange:u=()=>{}}=s,f=de(h),p=de(l),[d,g]=Ne(o,a||!1,u),x=i.useId(),m=r||x,y=o!==void 0,_=i.useCallback(()=>{y||g(!1),p==null||p()},[y,p]),S=i.useCallback(()=>{y||g(!0),f==null||f()},[y,f]),j=i.useCallback(()=>{(d?_:S)()},[d,S,_]);return{isOpen:!!d,onOpen:S,onClose:_,onOpenChange:j,isControlled:y,getButtonProps:(w={})=>({...w,"aria-expanded":d,"aria-controls":m,onClick:Re(w.onClick,j)}),getDisclosureProps:(w={})=>({...w,hidden:!d,id:m})}}const wt=({title:s,holidays:r,stats:a})=>{const o=Ae(),l=ie(o.breakpoints.down("sm"));ie(o.breakpoints.down("md"));const[h,u]=i.useState(r),[f,p]=i.useState(""),[d,g]=i.useState(new Date().getFullYear().toString()),[x,m]=i.useState(!1),{isOpen:y,onOpen:_,onClose:S}=ee(),{isOpen:j,onOpen:w,onClose:z}=ee(),{isOpen:v,onOpen:k,onClose:H}=ee(),[c,R]=i.useState(null),[F,N]=i.useState({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1}),[P,L]=i.useState(!1),U=i.useMemo(()=>[{title:"Total Holidays",value:a.total_holidays,icon:e.jsx(me,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All company holidays",trend:`${a.this_year_holidays} this year`},{title:"Upcoming",value:a.upcoming_holidays,icon:e.jsx(le,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Next holidays",trend:"Next 90 days"},{title:"This Month",value:a.this_month_holidays,icon:e.jsx(ke,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Current month",trend:"Ongoing & upcoming"},{title:"Working Days",value:365-a.total_holidays,icon:e.jsx(Le,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Business days",trend:`${Math.round((365-a.total_holidays)/365*100)}% of year`}],[a]),E=i.useMemo(()=>h.filter(t=>{const n=t.title.toLowerCase().includes(f.toLowerCase()),C=d==="all"||new Date(t.from_date).getFullYear().toString()===d;return n&&C}),[h,f,d]),G=i.useMemo(()=>[...new Set(h.map(n=>new Date(n.from_date).getFullYear()))].sort((n,C)=>C-n),[h]),T=[{key:"public",label:"Public Holiday",color:"primary"},{key:"religious",label:"Religious Holiday",color:"secondary"},{key:"national",label:"National Holiday",color:"success"},{key:"company",label:"Company Holiday",color:"warning"},{key:"optional",label:"Optional Holiday",color:"default"}],B=async()=>{L(!0);try{const t=c?await Z.put(route("holiday.update",c.id),F):await Z.post(route("holiday.store"),F);t.data.success&&(u(c?n=>n.map(C=>C.id===c.id?t.data.holiday:C):n=>[...n,t.data.holiday]),Y.success(c?"Holiday updated successfully!":"Holiday created successfully!"),A())}catch{Y.error("Failed to save holiday. Please try again.")}finally{L(!1)}},D=async()=>{if(c){L(!0);try{await Z.delete(route("holiday.destroy",c.id)),u(t=>t.filter(n=>n.id!==c.id)),Y.success("Holiday deleted successfully!"),H(),R(null)}catch{Y.error("Failed to delete holiday. Please try again.")}finally{L(!1)}}},A=()=>{S(),z(),R(null),N({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1})},I=t=>{R(t),N({title:t.title,from_date:t.from_date,to_date:t.to_date,description:t.description||"",type:t.type||"public",is_recurring:t.is_recurring||!1}),w()},q=t=>{R(t),k()},V=[{name:"Holiday",uid:"title"},{name:"Date",uid:"dates"},{name:"Duration",uid:"duration"},{name:"Type",uid:"type"},{name:"Status",uid:"status"},{name:"Actions",uid:"actions"}],W=i.useCallback((t,n)=>{const C=t[n],O=new Date(t.from_date),K=new Date(t.to_date),re=Math.ceil((K-O)/(1e3*60*60*24))+1,Q=O>new Date,X=O<=new Date&&K>=new Date;switch(n){case"title":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-bold text-small capitalize",children:t.title}),t.description&&e.jsx("p",{className:"text-bold text-tiny capitalize text-default-400",children:t.description})]});case"dates":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-small",children:O.toLocaleDateString("en-US",{month:"short",day:"numeric",year:O.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}),t.from_date!==t.to_date&&e.jsxs("span",{className:"text-tiny text-default-400",children:["to ",K.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]});case"duration":return e.jsxs($,{size:"sm",variant:"flat",children:[re," ",re===1?"day":"days"]});case"type":const oe=T.find(He=>He.key===t.type)||T[0];return e.jsx($,{size:"sm",color:oe.color,variant:"flat",children:oe.label});case"status":return e.jsx($,{size:"sm",color:X?"success":Q?"warning":"default",variant:"flat",startContent:X?e.jsx(Je,{className:"w-3 h-3"}):Q?e.jsx(le,{className:"w-3 h-3"}):e.jsx(et,{className:"w-3 h-3"}),children:X?"Ongoing":Q?"Upcoming":"Past"});case"actions":return e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx(be,{content:"Edit holiday",children:e.jsx("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>I(t),children:e.jsx(Xe,{className:"w-4 h-4"})})}),e.jsx(be,{color:"danger",content:"Delete holiday",children:e.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:()=>q(t),children:e.jsx(Ze,{className:"w-4 h-4"})})})]});default:return C}},[]);return e.jsxs(e.Fragment,{children:[e.jsx(ze,{title:s}),e.jsx(Me,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(De,{in:!0,timeout:800,children:e.jsx($e,{children:e.jsx(We,{title:"Company Holidays",subtitle:"Manage company-wide holidays and special occasions",icon:e.jsx(me,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:l?"Add":"Add Holiday",icon:e.jsx(at,{className:"w-4 h-4"}),onClick:_,className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}],children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(Ye,{stats:U,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(xe,{label:"Search Holidays",variant:"bordered",placeholder:"Search by holiday name...",value:f,onValueChange:p,startContent:e.jsx(Oe,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:l?"sm":"md"})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(ye,{label:"Year",variant:"bordered",selectedKeys:[d],onSelectionChange:t=>g(Array.from(t)[0]),className:"w-32",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e.jsx(J,{value:"all",children:"All Years"},"all"),G.map(t=>e.jsx(J,{value:t.toString(),children:t},t.toString()))]}),e.jsxs(M,{isIconOnly:l,variant:"bordered",onPress:()=>m(!x),className:x?"bg-purple-500/20":"bg-white/5",children:[e.jsx(tt,{className:"w-4 h-4"}),!l&&e.jsx("span",{className:"ml-1",children:"Filters"})]})]})]}),(f||d!==new Date().getFullYear().toString())&&e.jsx(Be,{in:!0,timeout:300,children:e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[f&&e.jsxs($,{variant:"flat",color:"primary",size:"sm",onClose:()=>p(""),children:["Search: ",f]}),d!==new Date().getFullYear().toString()&&e.jsxs($,{variant:"flat",color:"secondary",size:"sm",onClose:()=>g(new Date().getFullYear().toString()),children:["Year: ",d==="all"?"All Years":d]})]})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs(Ie,{variant:"h6",className:"font-semibold text-foreground",children:["Company Holidays",e.jsxs("span",{className:"text-sm text-default-500 ml-2",children:["(",E.length," ",E.length===1?"holiday":"holidays",")"]})]})}),e.jsxs(Ue,{isStriped:!0,removeWrapper:!0,"aria-label":"Holidays table",classNames:{th:"bg-white/5 text-default-600 border-b border-white/10",td:"border-b border-white/5"},children:[e.jsx(Ge,{columns:V,children:t=>e.jsx(qe,{align:t.uid==="actions"?"center":"start",children:t.name},t.uid)}),e.jsx(Ve,{items:E,children:t=>e.jsx(Ke,{children:n=>e.jsx(Qe,{children:W(t,n)})},t.id)})]})]})]})})})})}),e.jsx(ce,{isOpen:y||j,onClose:A,size:"2xl",backdrop:"blur-sm",classNames:{backdrop:"bg-linear-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20",base:"border-[#292f46] bg-linear-to-br from-white/10 to-white/5 backdrop-blur-md",header:"border-b border-[#292f46]",footer:"border-t border-[#292f46]"},children:e.jsxs(ue,{children:[e.jsx(pe,{className:"flex flex-col gap-1",children:c?"Edit Holiday":"Add New Holiday"}),e.jsxs(he,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(xe,{label:"Holiday Title",placeholder:"Enter holiday name",value:F.title,onChange:t=>N(n=>({...n,title:t.target.value})),isRequired:!0}),e.jsx(ye,{label:"Holiday Type",selectedKeys:[F.type],onSelectionChange:t=>N(n=>({...n,type:Array.from(t)[0]})),children:T.map(t=>e.jsx(J,{value:t.key,children:t.label},t.key))}),e.jsx(ge,{label:"From Date",value:F.from_date,onChange:t=>N(n=>({...n,from_date:t})),isRequired:!0}),e.jsx(ge,{label:"To Date",value:F.to_date,onChange:t=>N(n=>({...n,to_date:t})),isRequired:!0})]}),e.jsx(jt,{label:"Description (Optional)",placeholder:"Enter holiday description or additional notes",value:F.description,onChange:t=>N(n=>({...n,description:t.target.value})),rows:3})]}),e.jsxs(fe,{children:[e.jsx(M,{color:"danger",variant:"light",onPress:A,children:"Cancel"}),e.jsx(M,{color:"primary",onPress:B,isLoading:P,children:c?"Update Holiday":"Add Holiday"})]})]})}),e.jsx(ce,{isOpen:v,onClose:H,size:"md",backdrop:"blur-sm",children:e.jsxs(ue,{children:[e.jsx(pe,{className:"flex flex-col gap-1",children:"Confirm Delete"}),e.jsxs(he,{children:[e.jsxs("p",{children:['Are you sure you want to delete the holiday "',c==null?void 0:c.title,'"?']}),e.jsx("p",{className:"text-small text-danger",children:"This action cannot be undone."})]}),e.jsxs(fe,{children:[e.jsx(M,{color:"default",variant:"light",onPress:H,children:"Cancel"}),e.jsx(M,{color:"danger",onPress:D,isLoading:P,children:"Delete Holiday"})]})]})})]})};wt.layout=s=>e.jsx(Pe,{children:s});export{wt as default};
