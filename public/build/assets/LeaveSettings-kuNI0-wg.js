import{r as f,u as W,j as e,H as G}from"./app-C1U45Ebj.js";import{G as H,k as c,l as _,R as P,B as C,A as Y}from"./App-whY0_PgO.js";import{u as D,B as U,G as $,T as S}from"./logo-CfQNLy2U.js";import{C as q}from"./CardHeader-BqMsir7C.js";import{C as I}from"./CardContent-Dr2XfLTO.js";import{T as b,I as E}from"./TextField-BppgltFh.js";import{S as N,M as m}from"./Select-6qEezkdx.js";import{B as k}from"./Button-D2aSymif.js";import{T as z}from"./TableContainer-jAGzG00m.js";import{T as J,a as K,b as F,c as l,d as O}from"./TableRow-B-G4QO1J.js";import{C as T}from"./CircularProgress-CE3Tiwse.js";import"./EnvelopeIcon-DYtxSQqd.js";import"./UserIcon-Ch89lSMO.js";import"./ShieldCheckIcon-BOaBImyC.js";import"./chunk-SSA7SXE4-CwjhqkNF.js";import"./ExclamationTriangleIcon-C6Etxr_V.js";import"./create-visual-element-BuHeE9lo.js";import"./Popover-B0BuhAs7.js";const Q=({title:h})=>{const j={type:"",days:"",eligibility:"",carry_forward:"",earned_leave:"",special_conditions:""},[x,v]=f.useState(W().props.leaveTypes),[n,y]=f.useState(j),[w,L]=f.useState(!1),r=D(),u=a=>{const{name:t,value:s}=a.target;y({...n,[t]:s})},R=async()=>{const a=new Promise(async(t,s)=>{var d,o;try{const i=await axios.post("/add-leave-type",n);i.status===201?(v([...x,{...n,id:i.data.id}]),y(j),t(["Leave type added successfully."])):s(["Failed to add leave type. Please try again."])}catch(i){console.error(i),s([((o=(d=i.response)==null?void 0:d.data)==null?void 0:o.message)||"Failed to add leave type. Please try again."])}});C.promise(a,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(T,{}),e.jsx("span",{style:{marginLeft:"8px"},children:"Adding leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:t}){return e.jsx(e.Fragment,{children:t.map((s,d)=>e.jsx("div",{children:s},d))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:t}){return e.jsx(e.Fragment,{children:t})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})},A=async a=>{const t=x.find(s=>s.id===a);y(t),L(!0)},B=()=>{const a=new Promise(async(t,s)=>{var d,o;try{const i=await axios.put(`/update-leave-type/${n.id}`,n);if(i.status===200){const p=x.map(g=>g.id===n.id?{...n,id:i.data.id}:g);v(p),y(j),L(!1),t(["Leave type updated successfully."])}else s(["Failed to update leave type. Please try again."])}catch(i){console.error(i),s([((o=(d=i.response)==null?void 0:d.data)==null?void 0:o.message)||"Failed to update leave type. Please try again."])}});C.promise(a,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(T,{}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:t}){return e.jsx(e.Fragment,{children:t.map((s,d)=>e.jsx("div",{children:s},d))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:t}){return e.jsx(e.Fragment,{children:t})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})},M=async a=>{const t=new Promise(async(s,d)=>{var o,i;try{const p=await axios.delete(`/delete-leave-type/${a}`);p.status===200?(v(x.filter(g=>g.id!==a)),s([p.data.message||"Leave type deleted successfully."])):d(["Failed to delete leave type. Please try again."])}catch(p){console.error(p),d([((i=(o=p.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to delete leave type. Please try again."])}});C.promise(t,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(T,{}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:s}){return e.jsx(e.Fragment,{children:s.map((d,o)=>e.jsx("div",{children:d},o))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:s}){return e.jsx(e.Fragment,{children:s})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})};return e.jsxs(e.Fragment,{children:[e.jsx(G,{title:h}),e.jsx(U,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(H,{in:!0,children:e.jsxs($,{children:[e.jsx(q,{title:"Leave Settings",sx:{padding:"24px"}}),e.jsx(I,{children:e.jsxs(c,{container:!0,spacing:1,alignItems:"center",children:[e.jsx(c,{item:!0,xs:6,sm:3,md:3,children:e.jsx(b,{fullWidth:!0,label:"Leave Type",name:"type",value:n.type,onChange:u})}),e.jsx(c,{item:!0,xs:6,sm:3,md:3,children:e.jsx(b,{fullWidth:!0,label:"Number of Days",name:"days",type:"number",value:n.days,onChange:u})}),e.jsx(c,{item:!0,xs:6,sm:3,md:3,children:e.jsxs(_,{fullWidth:!0,children:[e.jsx(E,{id:"carry-forward-label",children:"Carry Forward"}),e.jsxs(N,{variant:"outlined",labelId:"carry-forward-label",label:"Carry Forward",name:"carry_forward",value:n.carry_forward,onChange:u,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(m,{value:!0,children:"Yes"}),e.jsx(m,{value:!1,children:"No"})]})]})}),e.jsx(c,{item:!0,xs:6,sm:3,md:3,children:e.jsxs(_,{fullWidth:!0,children:[e.jsx(E,{id:"earned-leave-label",children:"Earned Leave"}),e.jsxs(N,{variant:"outlined",labelId:"earned-leave-label",label:"Earned Leave",name:"earned_leave",value:n.earned_leave,onChange:u,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(m,{value:!0,children:"Yes"}),e.jsx(m,{value:!1,children:"No"})]})]})}),e.jsx(c,{item:!0,xs:12,sm:6,md:6,children:e.jsx(b,{fullWidth:!0,label:"Eligibility Criteria",name:"eligibility",value:n.eligibility,onChange:u})}),e.jsx(c,{item:!0,xs:12,sm:6,md:6,children:e.jsx(b,{fullWidth:!0,label:"Special Conditions",name:"special_conditions",value:n.special_conditions,onChange:u})}),e.jsx(c,{item:!0,xs:12,sm:12,md:12,sx:{display:"flex",justifyContent:"center"},children:e.jsx(k,{sx:{height:"100%"},variant:"outlined",color:"primary",onClick:w?B:R,children:w?"Update Leave Type":"Add Leave Type"})})]})}),e.jsx(I,{children:e.jsx(z,{style:{maxHeight:"84vh",overflowY:"auto"},children:e.jsxs(J,{children:[e.jsx(K,{children:e.jsxs(F,{children:[e.jsx(l,{children:"Type"}),e.jsx(l,{children:"Days"}),e.jsx(l,{children:"Eligibility"}),e.jsx(l,{children:"Carry Forward"}),e.jsx(l,{children:"Earned Leave"}),e.jsx(l,{children:"Special Conditions"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(O,{children:x.length>0?x.map(a=>e.jsxs(F,{children:[e.jsx(l,{children:a.type}),e.jsx(l,{children:a.days}),e.jsx(l,{children:a.eligibility}),e.jsx(l,{children:e.jsxs(S,{children:[e.jsx(P,{checked:!0,sx:{color:a.carry_forward?"green":"red","&.Mui-checked":{color:a.carry_forward?"green":"red"}},disabled:!0}),a.carry_forward?"Yes":"No"]})}),e.jsx(l,{children:e.jsxs(S,{children:[e.jsx(P,{checked:!0,sx:{color:a.earned_leave?"green":"red","&.Mui-checked":{color:a.earned_leave?"green":"red"}},disabled:!0}),a.earned_leave?"Yes":"No"]})}),e.jsx(l,{children:a.special_conditions?a.special_conditions:"N/A"}),e.jsxs(l,{children:[e.jsx(k,{variant:"outlined",color:"primary",onClick:()=>A(a.id),sx:{marginRight:1},children:"Edit"}),e.jsx(k,{variant:"outlined",color:"secondary",onClick:()=>M(a.id),children:"Delete"})]})]},a.id)):e.jsx(F,{children:e.jsx(l,{colSpan:7,align:"center",children:"No leave types available."})})})]})})})]})})})]})};Q.layout=h=>e.jsx(Y,{children:h});export{Q as default};
