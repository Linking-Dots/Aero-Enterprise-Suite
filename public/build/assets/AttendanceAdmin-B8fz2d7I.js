import{r,j as e,c as O,d as V,h as te,R as we,H as Ne,f as se,b as W}from"./app-DAM6xFci.js";import{S as Fe}from"./StatsCards-CSUTj349.js";import{F as re,a as ae,A as _e}from"./Dashboard-wGjhU35x.js";import{u as G,a as ke}from"./serviceWorkerManager-D4sbfQWe.js";import{d as x}from"./dayjs.min-B_hAYDdj.js";import{F as J}from"./DocumentChartBarIcon-CRMXXOjS.js";import{F as H}from"./UserIcon-nSWhJjy4.js";import{t as Ae,a as Re}from"./chunk-YRZGWF2W-UClh-wUG.js";import{t as Me,a as Ee,b as $e,c as Y}from"./chunk-F3UDT23P-D0GFSETy.js";import{u as ne}from"./chunk-S574QCAN-Cfoy6u8u.js";import{F as Ie}from"./ExclamationTriangleIcon-jz3KqMKv.js";import{F as Le}from"./XCircleIcon-Bl3Z5gjd.js";import{F as Se}from"./CheckCircleIcon-CIKT3NWV.js";import{a as T}from"./chunk-Y2AYO5NJ-B8eMLiG9.js";import{s}from"./chunk-TLYTI3QM-Cj6nLS0W.js";import{t as oe,F as Pe,B as Ce}from"./react-toastify.esm-DKLNLV_8.js";import{c as le}from"./chunk-IHOGUXIG-C3_Ej4JK.js";import{F as ie}from"./CheckCircleIcon-_Wj3zYan.js";import{F as We}from"./XCircleIcon-CEjt_vY9.js";import{F as Ye}from"./ExclamationTriangleIcon-BoJZLUxa.js";import{F as de}from"./PresentationChartLineIcon-jziJJVZk.js";import{F as Be}from"./ClipboardDocumentListIcon-BU2XNciQ.js";import{m as ze}from"./proxy-BfZUgj-o.js";import{F as ce}from"./DocumentArrowDownIcon-DGfVNYST.js";import{F as De}from"./MagnifyingGlassIcon-r5ruTrUB.js";import{p as Ue}from"./chunk-EAPQ7RWQ-BJRxWyvP.js";import{c as me}from"./chunk-D5XJWRAV-YMOmPBd4.js";import{i as xe}from"./chunk-SSA7SXE4-gcc4yHhI.js";import"./EnvelopeIcon-CUTSQuzO.js";import"./ShieldCheckIcon-DIOUr86x.js";import"./ComputerDesktopIcon-PiZY5dFq.js";import"./UsersIcon-BdrRaxv3.js";import"./BuildingOfficeIcon-CdHlVT0F.js";import"./KeyIcon-Bvz7BSHc.js";import"./index-DfKNtmRa.js";import"./logo-Pwvcz7fP.js";import"./CogIcon-DHHry7j5.js";import"./features-animation-CdRSmZyR.js";import"./create-visual-element-C3-YBUtD.js";import"./chunk-XJ2YRSUP-BvHKRcQd.js";import"./useToggleState-jUijjYXn.js";import"./chunk-M3MASYO7-DQVDvDmK.js";function Te({title:w,titleId:c,...i},f){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:f,"aria-labelledby":c},i),w?r.createElement("title",{id:c},w):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm3 10.5a.75.75 0 0 0 0-1.5H9a.75.75 0 0 0 0 1.5h6Z",clipRule:"evenodd"}))}const He=r.forwardRef(Te),S=()=>{var f;if(typeof window>"u")return"lg";const c=((f=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:f.trim())||"12px",i=parseInt(c);return i===0?"none":i<=4?"sm":i<=8?"md":i<=12?"lg":"xl"},Oe=({loading:w,attendanceData:c,currentYear:i,currentMonth:f,leaveTypes:F,leaveCounts:v,attendanceSettings:_,onRefresh:P})=>{const z=G("(min-width: 1025px)");G("(min-width: 641px) and (max-width: 1024px)");const k=G("(max-width: 640px)"),A=x(`${i}-${f}-01`).daysInMonth(),I=r.useMemo(()=>t=>{if(!(_!=null&&_.weekend_days)){const h=x(t).day();return h===0||h===6}const n=x(t).format("dddd").toLowerCase();return _.weekend_days.includes(n)},[_==null?void 0:_.weekend_days]),q={"âˆš":{icon:Se,color:"var(--theme-success)",bg:"color-mix(in srgb, var(--theme-success) 20%, transparent)",label:"âˆš",short:"P"},"â–¼":{icon:Le,color:"var(--theme-danger)",bg:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",label:"â–¼",short:"A"},"#":{icon:Ie,color:"var(--theme-warning)",bg:"color-mix(in srgb, var(--theme-warning) 20%, transparent)",label:"#",short:"H"},"/":{icon:He,color:"var(--theme-secondary)",bg:"color-mix(in srgb, var(--theme-secondary) 20%, transparent)",label:"/",short:"L"}},X=r.useMemo(()=>[{label:"No.",key:"sl",icon:J,width:60},{label:"Employee",key:"name",icon:H,width:200},...Array.from({length:A},(t,n)=>{const h=n+1,m=x(`${i}-${f}-${h}`);return{label:`${h}`,sublabel:m.format("ddd"),key:`day-${h}`,width:40,isWeekend:I(m)}}),...F?F.map(t=>({label:t.type,key:t.type,icon:re,width:80})):[]],[A,i,f,F,I]),D=t=>q[t]||{icon:null,color:"var(--theme-foreground-500)",bg:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",label:"No Data",short:"-"},Z=({data:t,index:n,daysInMonth:h,currentMonth:m,currentYear:R,leaveTypes:y,leaveCounts:E,isWeekendDay:o})=>e.jsx(O,{className:"mb-2",style:{background:"color-mix(in srgb, var(--theme-content1) 85%, transparent)",backdropFilter:"blur(16px)",border:"1px solid color-mix(in srgb, var(--theme-content2) 50%, transparent)",borderRadius:S()},children:e.jsxs(V,{className:"p-3",children:[e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsx(ne,{avatarProps:{radius:S(),size:"md",src:t.profile_image_url||t.profile_image,fallback:e.jsx(H,{className:"w-6 h-6"})},name:e.jsx("span",{className:"text-sm font-medium",style:{fontFamily:'var(--fontFamily, "Inter")',color:"var(--theme-foreground, #000000)"},children:t.name||"Unknown"}),description:e.jsxs("span",{className:"text-xs",style:{fontFamily:'var(--fontFamily, "Inter")',color:"var(--theme-foreground-600, #71717A)"},children:["Employee #",n+1]})})}),e.jsx(te,{style:{borderColor:"var(--theme-divider, #E4E4E7)"}}),e.jsx("div",{className:"grid grid-cols-7 gap-1 my-4",children:Array.from({length:h},($,g)=>{const j=g+1,L=x(`${R}-${m}-${j}`).format("YYYY-MM-DD"),d=t[L],U=o(x(L)),N=typeof d=="object"&&(d==null?void 0:d.status)||"â–¼",p=D(N);return e.jsx(oe,{placement:"top",content:e.jsxs("div",{className:"text-sm space-y-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",N]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Punch In:"})," ",(d==null?void 0:d.punch_in)||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Punch Out:"})," ",(d==null?void 0:d.punch_out)||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Work Hours:"})," ",(d==null?void 0:d.total_work_hours)||"00:00"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Remarks:"})," ",(d==null?void 0:d.remarks)||"N/A"]})]}),children:e.jsxs("div",{className:`
                                        flex flex-col items-center justify-center p-1 rounded text-xs cursor-pointer
                                        transition-colors
                                        ${U?"bg-default-100":"bg-default-50"}
                                    `,style:{borderRadius:"var(--borderRadius, 6px)",fontFamily:'var(--fontFamily, "Inter")',backgroundColor:p.bg},children:[e.jsx("span",{className:"font-medium",children:j}),e.jsx("span",{children:p.icon?e.jsx(p.icon,{className:"w-3 h-3",style:{color:p.color}}):e.jsx("span",{style:{color:p.color},children:N})})]})},j)})}),(y==null?void 0:y.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map($=>{var j;const g=((j=E==null?void 0:E[t.user_id])==null?void 0:j[$.type])||0;return e.jsxs(le,{size:"sm",variant:"flat",startContent:e.jsx(re,{className:"w-3 h-3"}),radius:S(),style:{background:g>0?"color-mix(in srgb, var(--theme-warning) 20%, transparent)":"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:`1px solid ${g>0?"color-mix(in srgb, var(--theme-warning) 40%, transparent)":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}`,color:g>0?"var(--theme-warning)":"var(--theme-foreground)",fontFamily:'var(--fontFamily, "Inter")'},children:[$.type,": ",g]},$.type)})})]})});return w?k?e.jsx("div",{className:"space-y-4",children:e.jsx(T,{className:"max-h-[70vh]",children:Array.from({length:6}).map((t,n)=>e.jsx(O,{className:"mb-2",style:{background:"color-mix(in srgb, var(--theme-content1) 85%, transparent)",backdropFilter:"blur(16px)",border:"1px solid color-mix(in srgb, var(--theme-content2) 50%, transparent)",borderRadius:S()},children:e.jsxs(V,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(s,{className:"w-12 h-12 rounded-full"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(s,{className:"w-32 h-4 rounded"}),e.jsx(s,{className:"w-20 h-3 rounded"})]})]}),e.jsx(te,{style:{borderColor:"var(--theme-divider, #E4E4E7)"}}),e.jsx("div",{className:"grid grid-cols-7 gap-1 my-4",children:Array.from({length:A},(h,m)=>e.jsxs("div",{className:"flex flex-col items-center justify-center p-1 rounded text-xs",style:{borderRadius:"var(--borderRadius, 6px)",backgroundColor:"color-mix(in srgb, var(--theme-content2) 30%, transparent)"},children:[e.jsx(s,{className:"w-4 h-3 rounded mb-1"}),e.jsx(s,{className:"w-4 h-4 rounded"})]},m+1))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:3}).map((h,m)=>e.jsx(s,{className:"w-16 h-6 rounded-full"},m))})]})},n))})}):e.jsxs("div",{className:"max-h-[84vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[e.jsx(s,{className:"w-32 h-6 rounded"}),e.jsx(s,{className:"w-20 h-8 rounded"})]}),e.jsx(T,{className:"max-h-[70vh]",children:e.jsxs("div",{className:"border border-divider rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-default-100/80 backdrop-blur-md border-b border-divider",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-16 p-3 flex items-center justify-center",children:e.jsx(s,{className:"w-8 h-4 rounded"})}),e.jsxs("div",{className:"w-48 p-3 flex items-center gap-1",children:[e.jsx(s,{className:"w-4 h-4 rounded"}),e.jsx(s,{className:"w-20 h-4 rounded"})]}),Array.from({length:A},(t,n)=>e.jsxs("div",{className:"w-10 p-3 flex flex-col items-center justify-center gap-1",children:[e.jsx(s,{className:"w-4 h-3 rounded"}),e.jsx(s,{className:"w-6 h-3 rounded"})]},n)),Array.from({length:3}).map((t,n)=>e.jsx("div",{className:"w-20 p-3 flex items-center justify-center",children:e.jsx(s,{className:"w-12 h-4 rounded"})},`leave-${n}`))]})}),e.jsx("div",{className:"divide-y divide-divider",children:Array.from({length:8}).map((t,n)=>e.jsxs("div",{className:"flex bg-content1 hover:bg-content2/50",children:[e.jsx("div",{className:"w-16 p-3 flex items-center justify-center",children:e.jsx(s,{className:"w-6 h-4 rounded"})}),e.jsxs("div",{className:"w-48 p-3 flex items-center gap-3",children:[e.jsx(s,{className:"w-8 h-8 rounded-full"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(s,{className:"w-24 h-4 rounded"}),e.jsx(s,{className:"w-16 h-3 rounded"})]})]}),Array.from({length:A},(h,m)=>e.jsx("div",{className:"w-10 p-3 flex items-center justify-center",children:e.jsx(s,{className:"w-6 h-6 rounded"})},m)),Array.from({length:3}).map((h,m)=>e.jsx("div",{className:"w-20 p-3 flex items-center justify-center",children:e.jsx(s,{className:"w-8 h-6 rounded"})},`leave-${m}`))]},n))})]})}),e.jsx("div",{className:"py-4 flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{className:"w-8 h-8 rounded"}),e.jsx(s,{className:"w-8 h-8 rounded"}),e.jsx(s,{className:"w-8 h-8 rounded"}),e.jsx(s,{className:"w-8 h-8 rounded"}),e.jsx(s,{className:"w-8 h-8 rounded"})]})})]}):!c||c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(J,{className:"w-12 h-12 text-default-300 mb-4"}),e.jsx("span",{className:"text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No attendance data found"})]}):k?e.jsx("div",{className:"space-y-4",children:e.jsx(T,{className:"max-h-[70vh]",children:c.map((t,n)=>e.jsx(Z,{data:t,index:n,daysInMonth:A,currentMonth:f,currentYear:i,leaveTypes:F,leaveCounts:v,isWeekendDay:I},t.user_id||n))})}):e.jsx("div",{children:e.jsx(T,{className:"max-h-[70vh]",children:e.jsxs(Me,{isStriped:!0,isCompact:!z,isHeaderSticky:!0,removeWrapper:!0,"aria-label":"Monthly Attendance Table",radius:S(),classNames:{base:"max-h-[520px] overflow-auto",table:"min-h-[200px] w-full",thead:"z-10",tbody:"overflow-y-auto",th:"backdrop-blur-md",td:"text-default-600"},style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(Ae,{columns:X,children:t=>e.jsx(Re,{align:t.key==="sl"||t.key.startsWith("day-")?"center":"start",className:"bg-default-100/50 backdrop-blur-md",width:t.width,style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[t.icon&&e.jsx(t.icon,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-medium",children:t.label})]}),t.sublabel&&e.jsx("span",{className:`text-xs ${t.isWeekend?"text-warning":"text-default-400"}`,children:t.sublabel})]})},t.key)}),e.jsx(Ee,{items:c,emptyContent:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(J,{className:"w-12 h-12 text-default-300 mb-4"}),e.jsx("span",{className:"text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No attendance data found"})]}),children:t=>e.jsx($e,{children:n=>{var m;const h=c.findIndex(R=>(R.user_id||R.id)===(t.user_id||t.id));switch(n){case"sl":return e.jsx(Y,{className:"text-center font-medium",children:h+1});case"name":return e.jsx(Y,{className:"whitespace-nowrap",children:e.jsx(ne,{avatarProps:{radius:"lg",size:z?"md":"sm",src:t.profile_image_url||t.profile_image,fallback:e.jsx(H,{className:"w-6 h-6"})},name:t.name||"Unknown User",description:`Employee ID: ${t.employee_id}`||`ID: ${t.user_id}`})});default:if(n.startsWith("day-")){const y=parseInt(n.split("-")[1]),E=x(`${i}-${f}-${y}`).format("YYYY-MM-DD"),o=t[E],$=I(x(E)),g=typeof o=="object"&&(o==null?void 0:o.status)||"â–¼",j=D(g);return e.jsx(Y,{className:`text-center ${$?"bg-default-50":""}`,children:e.jsx(oe,{content:e.jsxs("div",{className:"text-sm space-y-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",g]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Punch In:"})," ",(o==null?void 0:o.punch_in)||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Punch Out:"})," ",(o==null?void 0:o.punch_out)||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Work Hours:"})," ",(o==null?void 0:o.total_work_hours)||"00:00"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Remarks:"})," ",(o==null?void 0:o.remarks)||"N/A"]})]}),placement:"top",children:e.jsx("div",{className:"flex items-center justify-center cursor-help",children:j.icon?e.jsx(j.icon,{className:"w-4 h-4",style:{color:j.color}}):e.jsx("span",{className:"text-xs",style:{color:j.color},children:g})})})})}const R=F==null?void 0:F.find(y=>y.type===n);if(R){const y=((m=v==null?void 0:v[t.user_id])==null?void 0:m[R.type])||0;return e.jsx(Y,{className:"text-center",children:e.jsx(le,{size:"sm",variant:y>0?"flat":"bordered",color:y>0?"warning":"default",className:"min-w-8",radius:S(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:y})})}return e.jsx(Y,{children:"-"})}}},t.user_id||t.id)})]})})})},B=()=>{var f;if(typeof window>"u")return"lg";const c=((f=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:f.trim())||"12px",i=parseInt(c);return i===0?"none":i<=4?"sm":i<=8?"md":i<=12?"lg":"xl"},Ve=we.memo(({title:w})=>{const[c,i]=r.useState(!1),[f,F]=r.useState(!1),[v,_]=r.useState(!1),[P,z]=r.useState(!1);r.useEffect(()=>{const a=()=>{i(window.innerWidth<640),F(window.innerWidth<768),_(window.innerWidth>=1025),z(window.innerWidth>=641&&window.innerWidth<=1024)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const[k,A]=r.useState(!1),[I,q]=r.useState([]),[X,D]=r.useState([]),[Z,t]=r.useState([]),[n,h]=r.useState(null),[m,R]=r.useState(0),[y,E]=r.useState(0),[o,$]=r.useState(""),[g,j]=r.useState(30),[L,d]=r.useState(1),[U,N]=r.useState(""),[p,he]=r.useState({currentMonth:x().format("YYYY-MM")}),[l,ue]=r.useState({month:"",year:"",totalEmployees:0,totalWorkingDays:0,totalWeekendDays:0,totalHolidays:0,totalPresentDays:0,totalAbsentDays:0,totalLateArrivals:0,totalEarlyLeaves:0,attendancePercentage:0,totalLeaveDays:0,approvedLeaves:0,pendingLeaves:0,rejectedLeaves:0,perfectAttendanceEmployees:0,averageAttendanceRate:0,mostAbsentEmployee:null,bestAttendanceEmployee:null,lastUpdated:null,generatedAt:null}),pe=r.useCallback((a,M)=>{he(b=>({...b,[a]:M}))},[]),fe=async(a=1,M=30,b)=>{A(!0);try{const u=b.currentMonth?x(b.currentMonth).format("MM"):x().format("MM"),K=b.currentMonth?x(b.currentMonth).year():x().year(),C=await W.get(route("attendancesAdmin.paginate"),{params:{page:a,perPage:M,employee:o,currentYear:K,currentMonth:u}});q(C.data.data),R(C.data.total),E(C.data.last_page),t(C.data.leaveTypes),D(C.data.leaveCounts);const Q=await W.get("/settings/attendance",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});Q.data&&Q.data.attendanceSettings&&h(Q.data.attendanceSettings);const ee=await W.get(route("attendance.monthlyStats"),{params:{currentYear:K,currentMonth:u}});ee.data.success&&ue(ee.data.data)}catch(u){console.error(u),Ce.error("Failed to fetch data.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",fontFamily:'var(--fontFamily, "Inter")',background:"var(--theme-content1, #FFFFFF)",border:"var(--borderWidth, 1px) solid var(--theme-divider, #E4E4E7)",color:"var(--theme-foreground, #000000)"}})}finally{A(!1)}},ye=a=>{const M=a.target.value.toLowerCase();$(M)};r.useEffect(()=>{fe(L,g,p).then(a=>"")},[L,g,p,o]);const ge=a=>{d(a)},ve=async()=>{N("excel");try{const a=p.currentMonth?x(p.currentMonth).format("YYYY-MM"):x().format("YYYY-MM"),M=await W.get(route("attendance.exportAdminExcel"),{params:{month:a},responseType:"blob"}),b=window.URL.createObjectURL(new Blob([M.data])),u=document.createElement("a");u.href=b,u.download=`Admin_Attendance_${a}.xlsx`,document.body.appendChild(u),u.click(),N(""),u.remove(),window.URL.revokeObjectURL(b)}catch(a){console.error("Download failed:",a),N(""),alert("Failed to download attendance sheet.")}},je=async()=>{N("pdf");try{const a=p.currentMonth?x(p.currentMonth).format("YYYY-MM"):x().format("YYYY-MM"),M=await W.get(route("attendance.exportAdminPdf"),{params:{month:a},responseType:"blob"}),b=window.URL.createObjectURL(new Blob([M.data],{type:"application/pdf"})),u=document.createElement("a");u.href=b,u.download=`Admin_Attendance_${a}.pdf`,document.body.appendChild(u),u.click(),N(""),u.remove(),window.URL.revokeObjectURL(b)}catch(a){console.error("PDF download failed:",a),N(""),alert("Failed to download attendance PDF.")}},be=r.useMemo(()=>[{title:"Total Employees",value:l.totalEmployees,icon:e.jsx(ke,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Active employees"},{title:"Working Days",value:l.totalWorkingDays,icon:e.jsx(ae,{}),color:"text-indigo-600",iconBg:"bg-indigo-500/20",description:`This month (${l.month||"Current"})`},{title:"Present Days",value:l.totalPresentDays,icon:e.jsx(ie,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Total present days this month"},{title:"Absent Days",value:l.totalAbsentDays,icon:e.jsx(We,{}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Total absent days this month"},{title:"Late Arrivals",value:l.totalLateArrivals,icon:e.jsx(Ye,{}),color:"text-warning-500",iconBg:"bg-warning-500/20",description:"Total late arrivals this month"},{title:"Attendance Rate",value:`${l.attendancePercentage||0}%`,icon:e.jsx(de,{}),color:"text-emerald-600",iconBg:"bg-emerald-500/20",description:"Monthly attendance percentage"},{title:"Approved Leaves",value:l.approvedLeaves,icon:e.jsx(Be,{}),color:"text-blue-500",iconBg:"bg-blue-500/20",description:"Approved leave requests this month"},{title:"Perfect Attendance",value:l.perfectAttendanceEmployees,icon:e.jsx(ie,{}),color:"text-success-500",iconBg:"bg-success-500/20",description:"Employees with perfect attendance"},{title:"Total Leave Days",value:l.totalLeaveDays,icon:e.jsx(H,{}),color:"text-amber-600",iconBg:"bg-amber-500/20",description:"Total leave days taken this month"}],[l.totalEmployees,l.totalWorkingDays,l.month,l.totalPresentDays,l.totalAbsentDays,l.totalLateArrivals,l.attendancePercentage,l.approvedLeaves,l.perfectAttendanceEmployees,l.totalLeaveDays]);return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{title:w||"Attendance Management"}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Attendance Management",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(ze.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(O,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(me,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${v?"p-6":P?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[k?e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx(s,{className:"w-12 h-12 rounded-xl"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(s,{className:"w-64 h-6 rounded mb-2"}),e.jsx(s,{className:"w-48 h-4 rounded"})]})]}):e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                                                ${v?"p-3":P?"p-2.5":"p-2"} 
                                                                rounded-xl flex items-center justify-center
                                                            `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(de,{className:`
                                                                    ${v?"w-8 h-8":P?"w-6 h-6":"w-5 h-5"}
                                                                `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                                                    ${v?"text-2xl":P?"text-xl":"text-lg"}
                                                                    font-bold text-foreground
                                                                    ${v?"":"truncate"}
                                                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Attendance Management"}),e.jsx("p",{className:`
                                                                    ${v?"text-sm":"text-xs"} 
                                                                    text-default-500
                                                                    ${v?"":"truncate"}
                                                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Monitor and manage employee attendance records"})]})]}),k?e.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[e.jsx(s,{className:"w-16 h-8 rounded"}),e.jsx(s,{className:"w-14 h-8 rounded"})]}):e.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[e.jsx(se,{size:c?"sm":"md",variant:"bordered",startContent:e.jsx(ce,{className:"w-4 h-4"}),onPress:ve,isLoading:U==="excel",radius:B(),style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-primary) 30%, transparent)",color:"var(--theme-primary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:"Excel"}),e.jsx(se,{size:c?"sm":"md",variant:"bordered",startContent:e.jsx(ce,{className:"w-4 h-4"}),onPress:je,isLoading:U==="pdf",radius:B(),style:{background:"color-mix(in srgb, var(--theme-danger) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-danger) 30%, transparent)",color:"var(--theme-danger)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:"PDF"})]})]})})})}),e.jsxs(V,{className:"p-6",children:[e.jsx(Fe,{stats:be,className:"mb-6",isLoading:k}),e.jsx("div",{className:"mb-6",children:k?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{className:"w-24 h-4 rounded"}),e.jsx(s,{className:"w-full h-10 rounded-lg"})]})}),e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{className:"w-20 h-4 rounded"}),e.jsx(s,{className:"w-full h-10 rounded-lg"})]})})]}):e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsx(xe,{label:"Search Employee",type:"text",value:o,onValueChange:ye,placeholder:"Enter employee name...",variant:"bordered",size:c?"sm":"md",radius:B(),startContent:e.jsx(De,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"border-default-200 hover:border-default-300"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsx(xe,{label:"Month/Year",type:"month",value:p.currentMonth,onValueChange:a=>pe("currentMonth",a),variant:"bordered",size:c?"sm":"md",radius:B(),startContent:e.jsx(ae,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"border-default-200 hover:border-default-300"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}),e.jsxs(O,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                                                var(--theme-content1, #FAFAFA) 20%, 
                                                var(--theme-content2, #F4F4F5) 10%, 
                                                var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(me,{className:"border-b pb-2",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:k?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"w-8 h-8 rounded-lg"}),e.jsx(s,{className:"w-64 h-6 rounded"})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)"},children:e.jsx(Pe,{className:"w-6 h-6",style:{color:"var(--theme-primary)"}})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Attendance Records"})]})}),e.jsx(V,{children:e.jsxs("div",{className:"max-h-[84vh] overflow-y-auto",children:[e.jsx(Oe,{attendanceData:I,currentYear:p.currentYear,currentMonth:p.currentMonth,leaveTypes:Z,leaveCounts:X,loading:k,attendanceSettings:n}),m>=30&&e.jsx("div",{className:"py-4 px-2 flex justify-center items-center",children:e.jsx(Ue,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:L,total:y,onChange:ge,radius:B(),style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})})]})]})]})})})})})]})});Ve.layout=w=>e.jsx(_e,{children:w});export{Ve as default};
