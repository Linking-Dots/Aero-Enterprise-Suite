import{r as s,j as e,c as O,d as V,i as te,R as we,H as Ne,f as re,b as W}from"./app-C5K_9KK-.js";import{S as Fe}from"./StatsCards-Bt5nVeRP.js";import{p as G,F as se,A as ke}from"./Dashboard-CWk23WvD.js";import{d as x}from"./dayjs.min-BNU-CQGU.js";import{F as T}from"./UserIcon-CA8VtYlK.js";import{t as _e,a as Ae}from"./chunk-YRZGWF2W-Btn_9_b8.js";import{t as Re,a as Me,b as Ee,c as Y}from"./chunk-F3UDT23P-CbHioAJf.js";import{u as ae}from"./chunk-S574QCAN-DFJ_UH_c.js";import{F as $e}from"./ExclamationTriangleIcon-yNZckvP4.js";import{F as Le}from"./XCircleIcon-CHyKidRn.js";import{F as Ie}from"./CheckCircleIcon-9Gf8d5Ae.js";import{a as H}from"./chunk-Y2AYO5NJ-DNW0zTNL.js";import{s as r}from"./chunk-TLYTI3QM-CVNUbvtX.js";import{t as ne}from"./XMarkIcon-DEsRQaY4.js";import{c as oe}from"./chunk-IHOGUXIG-DEoiLfba.js";import{B as Se}from"./react-toastify.esm-CinaYzkz.js";import{F as Ce}from"./UserGroupIcon-KdPJnRG1.js";import{F as le}from"./MapPinIcon-BMpdw9KS.js";import{F as ie}from"./CheckCircleIcon-k9cVNu7a.js";import{F as Pe}from"./XCircleIcon-Bg8gSL12.js";import{F as We}from"./ExclamationTriangleIcon-jgvpCu-s.js";import{F as de}from"./PresentationChartLineIcon-CIbbTJwD.js";import{F as Ye}from"./ClipboardDocumentListIcon-t4dYFR7k.js";import{m as Be}from"./proxy-Dc_g5Wt_.js";import{F as ce}from"./DocumentArrowDownIcon-7KYggIqc.js";import{F as De}from"./MagnifyingGlassIcon-TD2wiTho.js";import{F as ze}from"./ClockIcon-Cm9yGH9I.js";import{p as Ue}from"./chunk-APIAPHLK-CNDba45j.js";import{c as me}from"./chunk-D5XJWRAV-DIgVQent.js";import{i as xe}from"./chunk-SSA7SXE4-Drwqh7w1.js";import"./EnvelopeIcon-Bf-B5eT0.js";import"./ShieldCheckIcon-B4rPsFTo.js";import"./KeyIcon-2ogj-0zO.js";import"./index-CKXAUfcI.js";import"./logo-Pwvcz7fP.js";import"./MagnifyingGlassIcon-B7v60_ow.js";import"./chunk-XJ2YRSUP-BvSqgxMu.js";import"./useToggleState-CE-9rKhV.js";import"./create-visual-element-D7J1mfUn.js";function He({title:v,titleId:i,...l},h){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:h,"aria-labelledby":i},l),v?s.createElement("title",{id:i},v):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const J=s.forwardRef(He);function Te({title:v,titleId:i,...l},h){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:h,"aria-labelledby":i},l),v?s.createElement("title",{id:i},v):null,s.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm3 10.5a.75.75 0 0 0 0-1.5H9a.75.75 0 0 0 0 1.5h6Z",clipRule:"evenodd"}))}const Oe=s.forwardRef(Te),S=()=>{var h;if(typeof window>"u")return"lg";const i=((h=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:h.trim())||"12px",l=parseInt(i);return l===0?"none":l<=4?"sm":l<=8?"md":l<=12?"lg":"xl"},Ve=({loading:v,attendanceData:i,currentYear:l,currentMonth:h,leaveTypes:F,leaveCounts:j,attendanceSettings:k,onRefresh:C})=>{const D=G("(min-width: 1025px)");G("(min-width: 641px) and (max-width: 1024px)");const _=G("(max-width: 640px)"),A=x(`${l}-${h}-01`).daysInMonth(),L=s.useMemo(()=>t=>{if(!(k!=null&&k.weekend_days)){const u=x(t).day();return u===0||u===6}const n=x(t).format("dddd").toLowerCase();return k.weekend_days.includes(n)},[k==null?void 0:k.weekend_days]),q={"âˆš":{icon:Ie,color:"var(--theme-success)",bg:"color-mix(in srgb, var(--theme-success) 20%, transparent)",label:"âˆš",short:"P"},"â–¼":{icon:Le,color:"var(--theme-danger)",bg:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",label:"â–¼",short:"A"},"#":{icon:$e,color:"var(--theme-warning)",bg:"color-mix(in srgb, var(--theme-warning) 20%, transparent)",label:"#",short:"H"},"/":{icon:Oe,color:"var(--theme-secondary)",bg:"color-mix(in srgb, var(--theme-secondary) 20%, transparent)",label:"/",short:"L"}},Z=s.useMemo(()=>[{label:"No.",key:"sl",icon:J,width:60},{label:"Employee",key:"name",icon:T,width:200},...Array.from({length:A},(t,n)=>{const u=n+1,m=x(`${l}-${h}-${u}`);return{label:`${u}`,sublabel:m.format("ddd"),key:`day-${u}`,width:40,isWeekend:L(m)}}),...F?F.map(t=>({label:t.type,key:t.type,icon:se,width:80})):[]],[A,l,h,F,L]),z=t=>q[t]||{icon:null,color:"var(--theme-foreground-500)",bg:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",label:"No Data",short:"-"},X=({data:t,index:n,daysInMonth:u,currentMonth:m,currentYear:R,leaveTypes:y,leaveCounts:E,isWeekendDay:o})=>e.jsx(O,{className:"mb-2",style:{background:"color-mix(in srgb, var(--theme-content1) 85%, transparent)",backdropFilter:"blur(16px)",border:"1px solid color-mix(in srgb, var(--theme-content2) 50%, transparent)",borderRadius:S()},children:e.jsxs(V,{className:"p-3",children:[e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsx(ae,{avatarProps:{radius:S(),size:"md",src:t.profile_image_url||t.profile_image,fallback:e.jsx(T,{className:"w-6 h-6"})},name:e.jsx("span",{className:"text-sm font-medium",style:{fontFamily:'var(--fontFamily, "Inter")',color:"var(--theme-foreground, #000000)"},children:t.name||"Unknown"}),description:e.jsxs("span",{className:"text-xs",style:{fontFamily:'var(--fontFamily, "Inter")',color:"var(--theme-foreground-600, #71717A)"},children:["Employee #",n+1]})})}),e.jsx(te,{style:{borderColor:"var(--theme-divider, #E4E4E7)"}}),e.jsx("div",{className:"grid grid-cols-7 gap-1 my-4",children:Array.from({length:u},($,g)=>{const b=g+1,I=x(`${R}-${m}-${b}`).format("YYYY-MM-DD"),c=t[I],U=o(x(I)),N=typeof c=="object"&&(c==null?void 0:c.status)||"â–¼",f=z(N);return e.jsx(ne,{placement:"top",content:e.jsxs("div",{className:"text-sm space-y-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",N]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Punch In:"})," ",(c==null?void 0:c.punch_in)||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Punch Out:"})," ",(c==null?void 0:c.punch_out)||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Work Hours:"})," ",(c==null?void 0:c.total_work_hours)||"00:00"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Remarks:"})," ",(c==null?void 0:c.remarks)||"N/A"]})]}),children:e.jsxs("div",{className:`
                                        flex flex-col items-center justify-center p-1 rounded text-xs cursor-pointer
                                        transition-colors
                                        ${U?"bg-default-100":"bg-default-50"}
                                    `,style:{borderRadius:"var(--borderRadius, 6px)",fontFamily:'var(--fontFamily, "Inter")',backgroundColor:f.bg},children:[e.jsx("span",{className:"font-medium",children:b}),e.jsx("span",{children:f.icon?e.jsx(f.icon,{className:"w-3 h-3",style:{color:f.color}}):e.jsx("span",{style:{color:f.color},children:N})})]})},b)})}),(y==null?void 0:y.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map($=>{var b;const g=((b=E==null?void 0:E[t.user_id])==null?void 0:b[$.type])||0;return e.jsxs(oe,{size:"sm",variant:"flat",startContent:e.jsx(se,{className:"w-3 h-3"}),radius:S(),style:{background:g>0?"color-mix(in srgb, var(--theme-warning) 20%, transparent)":"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:`1px solid ${g>0?"color-mix(in srgb, var(--theme-warning) 40%, transparent)":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}`,color:g>0?"var(--theme-warning)":"var(--theme-foreground)",fontFamily:'var(--fontFamily, "Inter")'},children:[$.type,": ",g]},$.type)})})]})});return v?_?e.jsx("div",{className:"space-y-4",children:e.jsx(H,{className:"max-h-[70vh]",children:Array.from({length:6}).map((t,n)=>e.jsx(O,{className:"mb-2",style:{background:"color-mix(in srgb, var(--theme-content1) 85%, transparent)",backdropFilter:"blur(16px)",border:"1px solid color-mix(in srgb, var(--theme-content2) 50%, transparent)",borderRadius:S()},children:e.jsxs(V,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(r,{className:"w-12 h-12 rounded-full"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(r,{className:"w-32 h-4 rounded"}),e.jsx(r,{className:"w-20 h-3 rounded"})]})]}),e.jsx(te,{style:{borderColor:"var(--theme-divider, #E4E4E7)"}}),e.jsx("div",{className:"grid grid-cols-7 gap-1 my-4",children:Array.from({length:A},(u,m)=>e.jsxs("div",{className:"flex flex-col items-center justify-center p-1 rounded text-xs",style:{borderRadius:"var(--borderRadius, 6px)",backgroundColor:"color-mix(in srgb, var(--theme-content2) 30%, transparent)"},children:[e.jsx(r,{className:"w-4 h-3 rounded mb-1"}),e.jsx(r,{className:"w-4 h-4 rounded"})]},m+1))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:3}).map((u,m)=>e.jsx(r,{className:"w-16 h-6 rounded-full"},m))})]})},n))})}):e.jsxs("div",{className:"max-h-[84vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[e.jsx(r,{className:"w-32 h-6 rounded"}),e.jsx(r,{className:"w-20 h-8 rounded"})]}),e.jsx(H,{className:"max-h-[70vh]",children:e.jsxs("div",{className:"border border-divider rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-default-100/80 backdrop-blur-md border-b border-divider",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-16 p-3 flex items-center justify-center",children:e.jsx(r,{className:"w-8 h-4 rounded"})}),e.jsxs("div",{className:"w-48 p-3 flex items-center gap-1",children:[e.jsx(r,{className:"w-4 h-4 rounded"}),e.jsx(r,{className:"w-20 h-4 rounded"})]}),Array.from({length:A},(t,n)=>e.jsxs("div",{className:"w-10 p-3 flex flex-col items-center justify-center gap-1",children:[e.jsx(r,{className:"w-4 h-3 rounded"}),e.jsx(r,{className:"w-6 h-3 rounded"})]},n)),Array.from({length:3}).map((t,n)=>e.jsx("div",{className:"w-20 p-3 flex items-center justify-center",children:e.jsx(r,{className:"w-12 h-4 rounded"})},`leave-${n}`))]})}),e.jsx("div",{className:"divide-y divide-divider",children:Array.from({length:8}).map((t,n)=>e.jsxs("div",{className:"flex bg-content1 hover:bg-content2/50",children:[e.jsx("div",{className:"w-16 p-3 flex items-center justify-center",children:e.jsx(r,{className:"w-6 h-4 rounded"})}),e.jsxs("div",{className:"w-48 p-3 flex items-center gap-3",children:[e.jsx(r,{className:"w-8 h-8 rounded-full"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(r,{className:"w-24 h-4 rounded"}),e.jsx(r,{className:"w-16 h-3 rounded"})]})]}),Array.from({length:A},(u,m)=>e.jsx("div",{className:"w-10 p-3 flex items-center justify-center",children:e.jsx(r,{className:"w-6 h-6 rounded"})},m)),Array.from({length:3}).map((u,m)=>e.jsx("div",{className:"w-20 p-3 flex items-center justify-center",children:e.jsx(r,{className:"w-8 h-6 rounded"})},`leave-${m}`))]},n))})]})}),e.jsx("div",{className:"py-4 flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"w-8 h-8 rounded"}),e.jsx(r,{className:"w-8 h-8 rounded"}),e.jsx(r,{className:"w-8 h-8 rounded"}),e.jsx(r,{className:"w-8 h-8 rounded"}),e.jsx(r,{className:"w-8 h-8 rounded"})]})})]}):!i||i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(J,{className:"w-12 h-12 text-default-300 mb-4"}),e.jsx("span",{className:"text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No attendance data found"})]}):_?e.jsx("div",{className:"space-y-4",children:e.jsx(H,{className:"max-h-[70vh]",children:i.map((t,n)=>e.jsx(X,{data:t,index:n,daysInMonth:A,currentMonth:h,currentYear:l,leaveTypes:F,leaveCounts:j,isWeekendDay:L},t.user_id||n))})}):e.jsx("div",{children:e.jsx(H,{className:"max-h-[70vh]",children:e.jsxs(Re,{isStriped:!0,isCompact:!D,isHeaderSticky:!0,removeWrapper:!0,"aria-label":"Monthly Attendance Table",radius:S(),classNames:{base:"max-h-[520px] overflow-auto",table:"min-h-[200px] w-full",thead:"z-10",tbody:"overflow-y-auto",th:"backdrop-blur-md",td:"text-default-600"},style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(_e,{columns:Z,children:t=>e.jsx(Ae,{align:t.key==="sl"||t.key.startsWith("day-")?"center":"start",className:"bg-default-100/50 backdrop-blur-md",width:t.width,style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[t.icon&&e.jsx(t.icon,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-medium",children:t.label})]}),t.sublabel&&e.jsx("span",{className:`text-xs ${t.isWeekend?"text-warning":"text-default-400"}`,children:t.sublabel})]})},t.key)}),e.jsx(Me,{items:i,emptyContent:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(J,{className:"w-12 h-12 text-default-300 mb-4"}),e.jsx("span",{className:"text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No attendance data found"})]}),children:t=>e.jsx(Ee,{children:n=>{var m;const u=i.findIndex(R=>(R.user_id||R.id)===(t.user_id||t.id));switch(n){case"sl":return e.jsx(Y,{className:"text-center font-medium",children:u+1});case"name":return e.jsx(Y,{className:"whitespace-nowrap",children:e.jsx(ae,{avatarProps:{radius:"lg",size:D?"md":"sm",src:t.profile_image_url||t.profile_image,fallback:e.jsx(T,{className:"w-6 h-6"})},name:t.name||"Unknown User",description:`Employee ID: ${t.employee_id}`||`ID: ${t.user_id}`})});default:if(n.startsWith("day-")){const y=parseInt(n.split("-")[1]),E=x(`${l}-${h}-${y}`).format("YYYY-MM-DD"),o=t[E],$=L(x(E)),g=typeof o=="object"&&(o==null?void 0:o.status)||"â–¼",b=z(g);return e.jsx(Y,{className:`text-center ${$?"bg-default-50":""}`,children:e.jsx(ne,{content:e.jsxs("div",{className:"text-sm space-y-1",style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",g]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Punch In:"})," ",(o==null?void 0:o.punch_in)||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Punch Out:"})," ",(o==null?void 0:o.punch_out)||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Work Hours:"})," ",(o==null?void 0:o.total_work_hours)||"00:00"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Remarks:"})," ",(o==null?void 0:o.remarks)||"N/A"]})]}),placement:"top",children:e.jsx("div",{className:"flex items-center justify-center cursor-help",children:b.icon?e.jsx(b.icon,{className:"w-4 h-4",style:{color:b.color}}):e.jsx("span",{className:"text-xs",style:{color:b.color},children:g})})})})}const R=F==null?void 0:F.find(y=>y.type===n);if(R){const y=((m=j==null?void 0:j[t.user_id])==null?void 0:m[R.type])||0;return e.jsx(Y,{className:"text-center",children:e.jsx(oe,{size:"sm",variant:y>0?"flat":"bordered",color:y>0?"warning":"default",className:"min-w-8",radius:S(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:y})})}return e.jsx(Y,{children:"-"})}}},t.user_id||t.id)})]})})})},B=()=>{var h;if(typeof window>"u")return"lg";const i=((h=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:h.trim())||"12px",l=parseInt(i);return l===0?"none":l<=4?"sm":l<=8?"md":l<=12?"lg":"xl"},qe=we.memo(({title:v})=>{const[i,l]=s.useState(!1),[h,F]=s.useState(!1),[j,k]=s.useState(!1),[C,D]=s.useState(!1);s.useEffect(()=>{const a=()=>{l(window.innerWidth<640),F(window.innerWidth<768),k(window.innerWidth>=1025),D(window.innerWidth>=641&&window.innerWidth<=1024)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const[_,A]=s.useState(!1),[L,q]=s.useState([]),[Z,z]=s.useState([]),[X,t]=s.useState([]),[n,u]=s.useState(null),[m,R]=s.useState(0),[y,E]=s.useState(0),[o,$]=s.useState(""),[g,b]=s.useState(30),[I,c]=s.useState(1),[U,N]=s.useState(""),[f,he]=s.useState({currentMonth:x().format("YYYY-MM")}),[d,ue]=s.useState({month:"",year:"",totalEmployees:0,totalWorkingDays:0,totalWeekendDays:0,totalHolidays:0,totalPresentDays:0,totalAbsentDays:0,totalLateArrivals:0,totalEarlyLeaves:0,attendancePercentage:0,totalLeaveDays:0,approvedLeaves:0,pendingLeaves:0,rejectedLeaves:0,perfectAttendanceEmployees:0,averageAttendanceRate:0,mostAbsentEmployee:null,bestAttendanceEmployee:null,lastUpdated:null,generatedAt:null}),pe=s.useCallback((a,M)=>{he(w=>({...w,[a]:M}))},[]),fe=async(a=1,M=30,w)=>{A(!0);try{const p=w.currentMonth?x(w.currentMonth).format("MM"):x().format("MM"),K=w.currentMonth?x(w.currentMonth).year():x().year(),P=await W.get(route("attendancesAdmin.paginate"),{params:{page:a,perPage:M,employee:o,currentYear:K,currentMonth:p}});q(P.data.data),R(P.data.total),E(P.data.last_page),t(P.data.leaveTypes),z(P.data.leaveCounts);const Q=await W.get("/settings/attendance",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});Q.data&&Q.data.attendanceSettings&&u(Q.data.attendanceSettings);const ee=await W.get(route("attendance.monthlyStats"),{params:{currentYear:K,currentMonth:p}});ee.data.success&&ue(ee.data.data)}catch(p){console.error(p),Se.error("Failed to fetch data.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",fontFamily:'var(--fontFamily, "Inter")',background:"var(--theme-content1, #FFFFFF)",border:"var(--borderWidth, 1px) solid var(--theme-divider, #E4E4E7)",color:"var(--theme-foreground, #000000)"}})}finally{A(!1)}},ye=a=>{const M=a.target.value.toLowerCase();$(M)};s.useEffect(()=>{fe(I,g,f).then(a=>"")},[I,g,f,o]);const ve=a=>{c(a)},ge=async()=>{N("excel");try{const a=f.currentMonth?x(f.currentMonth).format("YYYY-MM"):x().format("YYYY-MM"),M=await W.get(route("attendance.exportAdminExcel"),{params:{month:a},responseType:"blob"}),w=window.URL.createObjectURL(new Blob([M.data])),p=document.createElement("a");p.href=w,p.download=`Admin_Attendance_${a}.xlsx`,document.body.appendChild(p),p.click(),N(""),p.remove(),window.URL.revokeObjectURL(w)}catch(a){console.error("Download failed:",a),N(""),alert("Failed to download attendance sheet.")}},je=async()=>{N("pdf");try{const a=f.currentMonth?x(f.currentMonth).format("YYYY-MM"):x().format("YYYY-MM"),M=await W.get(route("attendance.exportAdminPdf"),{params:{month:a},responseType:"blob"}),w=window.URL.createObjectURL(new Blob([M.data],{type:"application/pdf"})),p=document.createElement("a");p.href=w,p.download=`Admin_Attendance_${a}.pdf`,document.body.appendChild(p),p.click(),N(""),p.remove(),window.URL.revokeObjectURL(w)}catch(a){console.error("PDF download failed:",a),N(""),alert("Failed to download attendance PDF.")}},be=s.useMemo(()=>[{title:"Total Employees",value:d.totalEmployees,icon:e.jsx(Ce,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Active employees"},{title:"Working Days",value:d.totalWorkingDays,icon:e.jsx(le,{}),color:"text-indigo-600",iconBg:"bg-indigo-500/20",description:`This month (${d.month||"Current"})`},{title:"Present Days",value:d.totalPresentDays,icon:e.jsx(ie,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Total present days this month"},{title:"Absent Days",value:d.totalAbsentDays,icon:e.jsx(Pe,{}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Total absent days this month"},{title:"Late Arrivals",value:d.totalLateArrivals,icon:e.jsx(We,{}),color:"text-warning-500",iconBg:"bg-warning-500/20",description:"Total late arrivals this month"},{title:"Attendance Rate",value:`${d.attendancePercentage||0}%`,icon:e.jsx(de,{}),color:"text-emerald-600",iconBg:"bg-emerald-500/20",description:"Monthly attendance percentage"},{title:"Approved Leaves",value:d.approvedLeaves,icon:e.jsx(Ye,{}),color:"text-blue-500",iconBg:"bg-blue-500/20",description:"Approved leave requests this month"},{title:"Perfect Attendance",value:d.perfectAttendanceEmployees,icon:e.jsx(ie,{}),color:"text-success-500",iconBg:"bg-success-500/20",description:"Employees with perfect attendance"},{title:"Total Leave Days",value:d.totalLeaveDays,icon:e.jsx(T,{}),color:"text-amber-600",iconBg:"bg-amber-500/20",description:"Total leave days taken this month"}],[d.totalEmployees,d.totalWorkingDays,d.month,d.totalPresentDays,d.totalAbsentDays,d.totalLateArrivals,d.attendancePercentage,d.approvedLeaves,d.perfectAttendanceEmployees,d.totalLeaveDays]);return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{title:v||"Attendance Management"}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Attendance Management",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(Be.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(O,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(me,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${j?"p-6":C?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[_?e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx(r,{className:"w-12 h-12 rounded-xl"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(r,{className:"w-64 h-6 rounded mb-2"}),e.jsx(r,{className:"w-48 h-4 rounded"})]})]}):e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                                                ${j?"p-3":C?"p-2.5":"p-2"} 
                                                                rounded-xl flex items-center justify-center
                                                            `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(de,{className:`
                                                                    ${j?"w-8 h-8":C?"w-6 h-6":"w-5 h-5"}
                                                                `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                                                    ${j?"text-2xl":C?"text-xl":"text-lg"}
                                                                    font-bold text-foreground
                                                                    ${j?"":"truncate"}
                                                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Attendance Management"}),e.jsx("p",{className:`
                                                                    ${j?"text-sm":"text-xs"} 
                                                                    text-default-500
                                                                    ${j?"":"truncate"}
                                                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Monitor and manage employee attendance records"})]})]}),_?e.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[e.jsx(r,{className:"w-16 h-8 rounded"}),e.jsx(r,{className:"w-14 h-8 rounded"})]}):e.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[e.jsx(re,{size:i?"sm":"md",variant:"bordered",startContent:e.jsx(ce,{className:"w-4 h-4"}),onPress:ge,isLoading:U==="excel",radius:B(),style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-primary) 30%, transparent)",color:"var(--theme-primary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:"Excel"}),e.jsx(re,{size:i?"sm":"md",variant:"bordered",startContent:e.jsx(ce,{className:"w-4 h-4"}),onPress:je,isLoading:U==="pdf",radius:B(),style:{background:"color-mix(in srgb, var(--theme-danger) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-danger) 30%, transparent)",color:"var(--theme-danger)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:"PDF"})]})]})})})}),e.jsxs(V,{className:"p-6",children:[e.jsx(Fe,{stats:be,className:"mb-6",isLoading:_}),e.jsx("div",{className:"mb-6",children:_?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"w-24 h-4 rounded"}),e.jsx(r,{className:"w-full h-10 rounded-lg"})]})}),e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"w-20 h-4 rounded"}),e.jsx(r,{className:"w-full h-10 rounded-lg"})]})})]}):e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsx(xe,{label:"Search Employee",type:"text",value:o,onValueChange:ye,placeholder:"Enter employee name...",variant:"bordered",size:i?"sm":"md",radius:B(),startContent:e.jsx(De,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"border-default-200 hover:border-default-300"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsx(xe,{label:"Month/Year",type:"month",value:f.currentMonth,onValueChange:a=>pe("currentMonth",a),variant:"bordered",size:i?"sm":"md",radius:B(),startContent:e.jsx(le,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"border-default-200 hover:border-default-300"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}),e.jsxs(O,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                                                var(--theme-content1, #FAFAFA) 20%, 
                                                var(--theme-content2, #F4F4F5) 10%, 
                                                var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(me,{className:"border-b pb-2",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:_?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{className:"w-8 h-8 rounded-lg"}),e.jsx(r,{className:"w-64 h-6 rounded"})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)"},children:e.jsx(ze,{className:"w-6 h-6",style:{color:"var(--theme-primary)"}})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Attendance Records"})]})}),e.jsx(V,{children:e.jsxs("div",{className:"max-h-[84vh] overflow-y-auto",children:[e.jsx(Ve,{attendanceData:L,currentYear:f.currentYear,currentMonth:f.currentMonth,leaveTypes:X,leaveCounts:Z,loading:_,attendanceSettings:n}),m>=30&&e.jsx("div",{className:"py-4 px-2 flex justify-center items-center",children:e.jsx(Ue,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:I,total:y,onChange:ve,radius:B(),style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})})]})]})]})})})})})]})});qe.layout=v=>e.jsx(ke,{children:v});export{qe as default};
