import{x as Y,r as w,j as e,Q as q,d as u,S as O,c as o,b as c,f as m}from"./app-u4QenFlR.js";import{d as f}from"./dayjs.min-GLp8uVTG.js";import{B as R}from"./react-toastify.esm-Ch2v8GvP.js";import{F as I}from"./ArrowLeftIcon-CvUxsYfX.js";import{F as $,a as E}from"./MapPinIcon-C1FdCG0O.js";import{F as A}from"./ClockIcon-D0bslx6n.js";import{F as T}from"./CheckCircleIcon-2dAiFPkh.js";import{c as j}from"./chunk-IHOGUXIG-BGAuLm1I.js";import{c as L}from"./chunk-D5XJWRAV-BFAX5ne2.js";import{i as x}from"./chunk-SSA7SXE4-D2K53r4M.js";import{s as V,l as p}from"./chunk-Y2AYO5NJ-FLMb-rLo.js";import{t as B}from"./chunk-QESP63UR-WMYtyCDk.js";import{c as H}from"./chunk-ITDNPVX3-DKEtUnZa.js";import{c as Q}from"./chunk-XJ2YRSUP-CEZEVyhe.js";import"./useToggleState-Cvw5P-xc.js";const r=()=>getComputedStyle(document.documentElement).getPropertyValue("--borderRadius").trim()||"md",de=({event:s,canRegister:g,registrationStatus:F,remainingSlots:P})=>{var y;const{data:l,setData:n,post:z,processing:S,errors:d}=Y({name:"",email:"",phone:"",address:"",organization_or_department:"",gender:"prefer_not_to_say",sub_event_ids:[],payment_proof:null,custom_fields:{}}),[_,M]=w.useState(null),[b,N]=w.useState(!1),C=a=>{const t=a.target.files[0];t&&(n("payment_proof",t),M(URL.createObjectURL(t)))},D=a=>{a.preventDefault();const t=new FormData;Object.keys(l).forEach(i=>{i==="sub_event_ids"?l[i].forEach(h=>t.append("sub_event_ids[]",h)):i==="custom_fields"?Object.keys(l[i]).forEach(h=>{t.append(`custom_fields[${h}]`,l[i][h])}):(i==="payment_proof"&&l[i]||l[i])&&t.append(i,l[i])}),z(route("public.events.register",s.slug),{data:t,forceFormData:!0,onSuccess:()=>{R.success("Registration submitted successfully!")},onError:i=>{R.error("Failed to submit registration. Please check the form."),console.error(i)}})},v=((y=s.sub_events)==null?void 0:y.filter(a=>l.sub_event_ids.includes(a.id.toString())).reduce((a,t)=>a+parseFloat(t.joining_fee||0),0))||0;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-secondary-50 to-background",children:[e.jsx(q,{title:s.title}),s.banner_image&&e.jsxs("div",{className:"relative h-96 bg-black",children:[e.jsx("img",{src:`/storage/${s.banner_image}`,alt:s.title,className:"w-full h-full object-cover opacity-80"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 w-full",children:[e.jsx(u,{variant:"flat",startContent:e.jsx(I,{className:"w-4 h-4"}),onPress:()=>O.get(route("public.events.index")),className:"mb-4",radius:r(),children:"Back to Events"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-white/90",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),e.jsx("span",{children:f(s.event_date).format("MMMM DD, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{children:s.event_time})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:s.venue})]})]})]})})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(o,{radius:r(),children:e.jsxs(c,{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"About This Event"}),e.jsx("p",{className:"text-default-700 whitespace-pre-line",children:s.description})]})}),s.sub_events&&s.sub_events.length>0&&e.jsx(o,{radius:r(),children:e.jsxs(c,{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Sub-Events"}),e.jsx("div",{className:"space-y-4",children:s.sub_events.map(a=>e.jsx("div",{className:"p-4 bg-default-100 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.title}),e.jsx("p",{className:"text-sm text-default-600 mt-1",children:a.description}),a.schedule&&e.jsxs("p",{className:"text-sm text-default-500 mt-2",children:[e.jsx("span",{className:"font-medium",children:"Schedule:"})," ",a.schedule]}),a.prize_details&&e.jsxs("p",{className:"text-sm text-success mt-1",children:[e.jsx("span",{className:"font-medium",children:"Prize:"})," ",a.prize_details]})]}),e.jsxs("div",{className:"text-right ml-4",children:[parseFloat(a.joining_fee)>0&&e.jsxs(j,{color:"primary",variant:"flat",radius:r(),children:["৳",a.joining_fee]}),a.max_participants&&e.jsxs("p",{className:"text-xs text-default-500 mt-2",children:["Max: ",a.max_participants]})]})]})},a.id))})]})}),(s.food_details||s.rules)&&e.jsx(o,{radius:r(),children:e.jsxs(c,{children:[s.food_details&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Food & Refreshments"}),e.jsx("p",{className:"text-default-700",children:s.food_details})]}),s.food_details&&s.rules&&e.jsx(m,{}),s.rules&&e.jsxs("div",{className:s.food_details?"mt-6":"",children:[e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Rules & Regulations"}),e.jsx("p",{className:"text-default-700 whitespace-pre-line",children:s.rules})]})]})}),b&&g&&e.jsxs(o,{radius:r(),children:[e.jsx(L,{children:e.jsx("h2",{className:"text-2xl font-bold",children:"Register for Event"})}),e.jsx(c,{children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(x,{label:"Full Name",placeholder:"Enter your full name",value:l.name,onChange:a=>n("name",a.target.value),errorMessage:d.name,isInvalid:!!d.name,isRequired:!0,radius:r()}),e.jsx(x,{type:"email",label:"Email",placeholder:"your@email.com",value:l.email,onChange:a=>n("email",a.target.value),errorMessage:d.email,isInvalid:!!d.email,isRequired:!0,radius:r()}),e.jsx(x,{label:"Phone",placeholder:"Enter phone number",value:l.phone,onChange:a=>n("phone",a.target.value),errorMessage:d.phone,isInvalid:!!d.phone,isRequired:!0,radius:r()}),e.jsxs(V,{label:"Gender",selectedKeys:[l.gender],onChange:a=>n("gender",a.target.value),isRequired:!0,radius:r(),children:[e.jsx(p,{value:"male",children:"Male"},"male"),e.jsx(p,{value:"female",children:"Female"},"female"),e.jsx(p,{value:"other",children:"Other"},"other"),e.jsx(p,{value:"prefer_not_to_say",children:"Prefer not to say"},"prefer_not_to_say")]})]}),e.jsx(B,{label:"Address",placeholder:"Enter your address",value:l.address,onChange:a=>n("address",a.target.value),errorMessage:d.address,isInvalid:!!d.address,rows:2,isRequired:!0,radius:r()}),e.jsx(x,{label:"Organization/Department",placeholder:"Your organization or department",value:l.organization_or_department,onChange:a=>n("organization_or_department",a.target.value),radius:r()}),s.sub_events&&s.sub_events.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Sub-Events to Participate *"}),e.jsx(H,{value:l.sub_event_ids,onValueChange:a=>n("sub_event_ids",a),errorMessage:d.sub_event_ids,isInvalid:!!d.sub_event_ids,radius:r(),children:s.sub_events.map(a=>e.jsxs(Q,{value:a.id.toString(),children:[a.title,parseFloat(a.joining_fee)>0&&e.jsxs("span",{className:"text-primary ml-2",children:["(৳",a.joining_fee,")"]})]},a.id))})]}),s.custom_fields&&s.custom_fields.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{}),e.jsx("h3",{className:"font-semibold",children:"Additional Information"}),s.custom_fields.map(a=>e.jsx(x,{label:a.field_label,placeholder:a.placeholder||"",description:a.help_text||"",isRequired:a.is_required,onChange:t=>n("custom_fields",{...l.custom_fields,[a.field_name]:t.target.value}),radius:r()},a.id))]}),v>0&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Payment Proof (Total: ৳",v,")"]}),e.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:C,className:"block w-full text-sm"}),_&&e.jsx("img",{src:_,alt:"Payment proof",className:"mt-3 max-h-32 rounded"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(u,{variant:"flat",onPress:()=>N(!1),radius:r(),children:"Cancel"}),e.jsx(u,{type:"submit",color:"primary",isLoading:S,radius:r(),children:"Submit Registration"})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(o,{radius:r(),children:e.jsxs(c,{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Event Details"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-default-500",children:"Date & Time"}),e.jsx("p",{className:"font-medium",children:f(s.event_date).format("MMM DD, YYYY")}),e.jsx("p",{className:"font-medium",children:s.event_time})]}),e.jsx(m,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-default-500",children:"Venue"}),e.jsx("p",{className:"font-medium",children:s.venue})]}),s.registration_deadline&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-default-500",children:"Registration Deadline"}),e.jsx("p",{className:"font-medium",children:f(s.registration_deadline).format("MMM DD, YYYY HH:mm")})]})]}),s.max_participants&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-default-500",children:"Available Slots"}),e.jsxs("p",{className:"font-medium",children:[P," / ",s.max_participants]})]})]})]})]})}),e.jsx(o,{radius:r(),children:e.jsx(c,{children:g?e.jsxs(e.Fragment,{children:[e.jsxs(j,{color:"success",variant:"flat",className:"mb-4",radius:r(),children:[e.jsx(T,{className:"w-4 h-4 mr-1"}),"Registration Open"]}),!b&&e.jsx(u,{color:"primary",size:"lg",fullWidth:!0,onPress:()=>N(!0),radius:r(),children:"Register Now"})]}):e.jsxs("div",{children:[e.jsx(j,{color:"default",variant:"flat",className:"mb-2",radius:r(),children:"Registration Closed"}),e.jsx("p",{className:"text-sm text-default-500",children:F})]})})}),(s.organizer_name||s.organizer_email||s.organizer_phone)&&e.jsx(o,{radius:r(),children:e.jsxs(c,{children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Contact Organizer"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[s.organizer_name&&e.jsxs("p",{children:[e.jsx("span",{className:"text-default-500",children:"Name:"})," ",s.organizer_name]}),s.organizer_email&&e.jsxs("p",{children:[e.jsx("span",{className:"text-default-500",children:"Email:"})," ",s.organizer_email]}),s.organizer_phone&&e.jsxs("p",{children:[e.jsx("span",{className:"text-default-500",children:"Phone:"})," ",s.organizer_phone]})]})]})})]})]})})]})};export{de as default};
