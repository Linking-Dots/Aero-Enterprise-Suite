import{r as v,j as e,H as Q,f as p,c as y,d as g,A as X,h as Z,g as ee}from"./app-DAM6xFci.js";import{F as U}from"./ArrowLeftIcon-DOgOxJwU.js";import{F as se}from"./BuildingOfficeIcon-CdHlVT0F.js";import{F as ae}from"./CogIcon-DHHry7j5.js";import{F as le}from"./UserIcon-nSWhJjy4.js";import{F as ie}from"./SparklesIcon-BJCRyDOT.js";import{F as b}from"./CheckIcon-KSzeCbQB.js";import{m as N}from"./proxy-BfZUgj-o.js";import{F as te}from"./ArrowRightIcon-1nOkvoAC.js";import{p as re,s as T,l as u}from"./chunk-Y2AYO5NJ-B8eMLiG9.js";import{i as o}from"./chunk-SSA7SXE4-gcc4yHhI.js";import{t as ne}from"./chunk-QESP63UR-DP8V2Khu.js";import{c as E}from"./chunk-IHOGUXIG-C3_Ej4JK.js";import{c as M}from"./chunk-D5XJWRAV-YMOmPBd4.js";import{c as Y}from"./chunk-XJ2YRSUP-BvHKRcQd.js";import"./create-visual-element-C3-YBUtD.js";import"./index-DfKNtmRa.js";import"./chunk-M3MASYO7-DQVDvDmK.js";import"./useToggleState-jUijjYXn.js";function Pe({subscriptionPlans:m=[],modules:w=[]}){var R,$,q,I,V;const[n,A]=v.useState(1),[a,C]=v.useState({companyName:"",companySlug:"",contactEmail:"",contactPhone:"",industry:"",companySize:"",website:"",description:"",selectedPlan:null,selectedModules:[],billingCycle:"monthly",adminName:"",adminEmail:"",password:"",passwordConfirmation:"",timezone:"UTC",agreeToTerms:!1}),[t,_]=v.useState({}),[B,S]=v.useState(!1),h=[{id:1,title:"Company Info",icon:se,description:"Tell us about your company"},{id:2,title:"Select Plan",icon:ae,description:"Choose your modules and plan"},{id:3,title:"Admin Account",icon:le,description:"Create your admin account"},{id:4,title:"Finalize",icon:ie,description:"Review and complete setup"}],L=["Technology","Healthcare","Manufacturing","Education","Finance","Retail","Construction","Transportation","Food & Beverage","Other"],F=[{value:"1-10",label:"1-10 employees"},{value:"11-50",label:"11-50 employees"},{value:"51-200",label:"51-200 employees"},{value:"201-500",label:"201-500 employees"},{value:"500+",label:"500+ employees"}],r=(s,l)=>{if(C(i=>({...i,[s]:l})),s==="companyName"){const i=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");C(c=>({...c,companySlug:i}))}t[s]&&_(i=>({...i,[s]:null}))},H=s=>{C(l=>({...l,selectedModules:l.selectedModules.includes(s)?l.selectedModules.filter(i=>i!==s):[...l.selectedModules,s]}))},k=()=>{if(!a.selectedPlan)return 0;const s=m.find(i=>i.id===a.selectedPlan);if(!s)return 0;let l=a.billingCycle==="monthly"?parseFloat(s.base_monthly_price||0):parseFloat(s.base_yearly_price||0);return a.selectedModules.forEach(i=>{var d,x,D;const c=w.find(j=>j.id===i);if(c){const j=(d=s.modules)==null?void 0:d.find(P=>P.id===i);if(!(((x=j==null?void 0:j.pivot)==null?void 0:x.is_included)||((D=s.included_modules)==null?void 0:D.includes(i))||!1)){const P=a.billingCycle==="monthly"?parseFloat(c.monthly_price||0):parseFloat(c.yearly_price||0),J=parseFloat(s.module_discount_percentage||0),W=P*(1-J/100);l+=W}}}),l.toFixed(2)},z=s=>{const l={};switch(s){case 1:a.companyName.trim()||(l.companyName="Company name is required"),a.contactEmail.trim()||(l.contactEmail="Contact email is required"),a.industry||(l.industry="Industry selection is required"),a.companySize||(l.companySize="Company size is required");break;case 2:a.selectedPlan||(l.selectedPlan="Please select a plan"),a.selectedModules.length===0&&(l.selectedModules="Please select at least one module");break;case 3:a.adminName.trim()||(l.adminName="Admin name is required"),a.adminEmail.trim()||(l.adminEmail="Admin email is required"),a.password||(l.password="Password is required"),a.password!==a.passwordConfirmation&&(l.passwordConfirmation="Passwords do not match");break;case 4:a.agreeToTerms||(l.agreeToTerms="You must agree to the terms");break}return _(l),Object.keys(l).length===0},O=()=>{z(n)&&A(s=>Math.min(s+1,h.length))},K=()=>{A(s=>Math.max(s-1,1))},G=async()=>{if(z(n)){S(!0);try{ee.post("/register-tenant",{...a,totalPrice:k()},{onSuccess:()=>{},onError:s=>{_(s),S(!1)}})}catch(s){console.error("Registration error:",s),S(!1)}}},f={hidden:{opacity:0,x:50},visible:{opacity:1,x:0},exit:{opacity:0,x:-50}};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{title:"Create Your Company Account"}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[e.jsx("div",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-lg border-b border-gray-200 dark:border-slate-700",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold",children:"A"})}),e.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Aero Enterprise Suite"})]}),e.jsx(p,{variant:"light",startContent:e.jsx(U,{className:"w-4 h-4"}),as:"a",href:"/",children:"Back to Home"})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:h.map((s,l)=>{const i=s.icon,c=n===s.id,d=n>s.id;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`
                                            w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300
                                            ${c?"bg-blue-600 text-white":d?"bg-green-600 text-white":"bg-gray-200 dark:bg-slate-700 text-gray-500 dark:text-gray-400"}
                                        `,children:d?e.jsx(b,{className:"w-5 h-5"}):e.jsx(i,{className:"w-5 h-5"})}),l<h.length-1&&e.jsx("div",{className:`
                                                w-20 h-1 mx-4 transition-all duration-300
                                                ${d?"bg-green-600":"bg-gray-200 dark:bg-slate-700"}
                                            `})]},s.id)})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:h[n-1].title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:h[n-1].description})]}),e.jsx(re,{value:n/h.length*100,color:"primary",className:"mt-6"})]}),e.jsx(y,{className:"bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm border-0 shadow-xl",children:e.jsx(g,{className:"p-8",children:e.jsxs(X,{mode:"wait",children:[n===1&&e.jsxs(N.div,{variants:f,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{label:"Company Name",placeholder:"Enter your company name",value:a.companyName,onValueChange:s=>r("companyName",s),isInvalid:!!t.companyName,errorMessage:t.companyName,isRequired:!0}),e.jsx(o,{label:"Company Subdomain",placeholder:"your-company",value:a.companySlug,onValueChange:s=>r("companySlug",s),endContent:e.jsx("span",{className:"text-small text-gray-500",children:".aero.com"}),description:"This will be your unique company URL"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{type:"email",label:"Contact Email",placeholder:"contact@yourcompany.com",value:a.contactEmail,onValueChange:s=>r("contactEmail",s),isInvalid:!!t.contactEmail,errorMessage:t.contactEmail,isRequired:!0}),e.jsx(o,{label:"Phone Number",placeholder:"+1 (555) 123-4567",value:a.contactPhone,onValueChange:s=>r("contactPhone",s)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(T,{label:"Industry",placeholder:"Select your industry",selectedKeys:a.industry?[a.industry]:[],onSelectionChange:s=>r("industry",Array.from(s)[0]),isInvalid:!!t.industry,errorMessage:t.industry,isRequired:!0,children:L.map(s=>e.jsx(u,{value:s,children:s},s))}),e.jsx(T,{label:"Company Size",placeholder:"Select company size",selectedKeys:a.companySize?[a.companySize]:[],onSelectionChange:s=>r("companySize",Array.from(s)[0]),isInvalid:!!t.companySize,errorMessage:t.companySize,isRequired:!0,children:F.map(s=>e.jsx(u,{value:s.value,children:s.label},s.value))})]}),e.jsx(o,{label:"Website (Optional)",placeholder:"https://yourcompany.com",value:a.website,onValueChange:s=>r("website",s)}),e.jsx(ne,{label:"Company Description (Optional)",placeholder:"Tell us about your company...",value:a.description,onValueChange:s=>r("description",s),minRows:3})]},"step1"),n===2&&e.jsxs(N.div,{variants:f,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},className:"space-y-8",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex bg-gray-100 dark:bg-slate-700 rounded-lg p-1",children:[e.jsx(p,{size:"sm",variant:a.billingCycle==="monthly"?"solid":"light",color:a.billingCycle==="monthly"?"primary":"default",onPress:()=>r("billingCycle","monthly"),children:"Monthly"}),e.jsxs(p,{size:"sm",variant:a.billingCycle==="yearly"?"solid":"light",color:a.billingCycle==="yearly"?"primary":"default",onPress:()=>r("billingCycle","yearly"),children:["Yearly",e.jsx(E,{size:"sm",color:"success",variant:"flat",className:"ml-2",children:"Save 15%"})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Choose Your Base Plan"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.map(s=>e.jsxs(y,{isPressable:!0,isHoverable:!0,className:`
                                                            relative cursor-pointer transition-all duration-300
                                                            ${a.selectedPlan===s.id?"ring-2 ring-blue-500 bg-blue-50 dark:bg-blue-950/20":"hover:shadow-lg"}
                                                            ${s.is_popular?"border-blue-500":""}
                                                        `,onPress:()=>r("selectedPlan",s.id),children:[s.is_popular&&e.jsx(E,{color:"primary",size:"sm",className:"absolute -top-2 left-1/2 -translate-x-1/2 z-10",children:"Most Popular"}),e.jsx(M,{className:"pb-2",children:e.jsxs("div",{className:"w-full text-center",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:s.description})]})}),e.jsxs(g,{className:"pt-2",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("span",{className:"text-3xl font-bold text-blue-600",children:["$",a.billingCycle==="monthly"?s.base_monthly_price:s.base_yearly_price]}),e.jsxs("span",{className:"text-gray-500 ml-1",children:["/",a.billingCycle==="monthly"?"month":"year"]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx(b,{className:"w-4 h-4 text-green-500 mr-2"}),s.max_employees?`Up to ${s.max_employees} employees`:"Unlimited employees"]}),e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx(b,{className:"w-4 h-4 text-green-500 mr-2"}),s.max_storage_gb?`${s.max_storage_gb}GB storage`:"Unlimited storage"]}),e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx(b,{className:"w-4 h-4 text-green-500 mr-2"}),s.module_discount_percentage,"% discount on modules"]})]})]})]},s.id))}),t.selectedPlan&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:t.selectedPlan})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Select Additional Modules"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.map(s=>{var d;const l=m.find(x=>x.id===a.selectedPlan),i=(d=l==null?void 0:l.included_modules)==null?void 0:d.includes(s.id),c=a.selectedModules.includes(s.id);return e.jsx(y,{className:`
                                                                cursor-pointer transition-all duration-300
                                                                ${c||i?"ring-2 ring-blue-500 bg-blue-50 dark:bg-blue-950/20":"hover:shadow-md"}
                                                                ${i?"opacity-75":""}
                                                            `,children:e.jsx(g,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx(Y,{isSelected:c||i,isDisabled:i,onValueChange:()=>!i&&H(s.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:s.name}),i&&e.jsx(E,{size:"sm",color:"success",variant:"flat",children:"Included"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:i?"FREE":`$${a.billingCycle==="monthly"?s.monthly_price:s.yearly_price}/${a.billingCycle==="monthly"?"mo":"yr"}`}),s.features&&e.jsxs("span",{className:"text-xs text-gray-500",children:[s.features.length," features"]})]})]})]})})})},s.id)})}),t.selectedModules&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:t.selectedModules})]}),a.selectedPlan&&e.jsx(y,{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800",children:e.jsxs(g,{className:"p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Price Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Base Plan (",(R=m.find(s=>s.id===a.selectedPlan))==null?void 0:R.name,")"]}),e.jsxs("span",{children:["$",a.billingCycle==="monthly"?($=m.find(s=>s.id===a.selectedPlan))==null?void 0:$.base_monthly_price:(q=m.find(s=>s.id===a.selectedPlan))==null?void 0:q.base_yearly_price]})]}),a.selectedModules.map(s=>{var d;const l=w.find(x=>x.id===s),i=m.find(x=>x.id===a.selectedPlan),c=(d=i==null?void 0:i.included_modules)==null?void 0:d.includes(s);return!l||c?null:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:l.name}),e.jsxs("span",{children:["$",a.billingCycle==="monthly"?l.monthly_price:l.yearly_price]})]},s)}),e.jsx(Z,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold text-blue-600",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",k(),"/",a.billingCycle==="monthly"?"month":"year"]})]})]})]})})]},"step2"),n===3&&e.jsxs(N.div,{variants:f,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Create Your Admin Account"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"This will be the primary administrator account for your company"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{label:"Full Name",placeholder:"John Doe",value:a.adminName,onValueChange:s=>r("adminName",s),isInvalid:!!t.adminName,errorMessage:t.adminName,isRequired:!0}),e.jsx(o,{type:"email",label:"Email Address",placeholder:"admin@yourcompany.com",value:a.adminEmail,onValueChange:s=>r("adminEmail",s),isInvalid:!!t.adminEmail,errorMessage:t.adminEmail,isRequired:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{type:"password",label:"Password",placeholder:"Choose a strong password",value:a.password,onValueChange:s=>r("password",s),isInvalid:!!t.password,errorMessage:t.password,isRequired:!0}),e.jsx(o,{type:"password",label:"Confirm Password",placeholder:"Confirm your password",value:a.passwordConfirmation,onValueChange:s=>r("passwordConfirmation",s),isInvalid:!!t.passwordConfirmation,errorMessage:t.passwordConfirmation,isRequired:!0})]}),e.jsxs(T,{label:"Timezone",placeholder:"Select your timezone",selectedKeys:[a.timezone],onSelectionChange:s=>r("timezone",Array.from(s)[0]),children:[e.jsx(u,{value:"UTC",children:"UTC"},"UTC"),e.jsx(u,{value:"America/New_York",children:"Eastern Time"},"America/New_York"),e.jsx(u,{value:"America/Chicago",children:"Central Time"},"America/Chicago"),e.jsx(u,{value:"America/Denver",children:"Mountain Time"},"America/Denver"),e.jsx(u,{value:"America/Los_Angeles",children:"Pacific Time"},"America/Los_Angeles")]})]},"step3"),n===4&&e.jsxs(N.div,{variants:f,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Review Your Setup"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Please review your information before completing the setup"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(y,{children:[e.jsx(M,{children:e.jsx("h4",{className:"font-semibold",children:"Company Information"})}),e.jsxs(g,{className:"pt-0 space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",a.companyName]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Domain:"})," ",a.companySlug,".aero.com"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",a.contactEmail]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Industry:"})," ",a.industry]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Size:"})," ",(I=F.find(s=>s.value===a.companySize))==null?void 0:I.label]})]})]}),e.jsxs(y,{children:[e.jsx(M,{children:e.jsx("h4",{className:"font-semibold",children:"Subscription Details"})}),e.jsxs(g,{className:"pt-0 space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Plan:"})," ",(V=m.find(s=>s.id===a.selectedPlan))==null?void 0:V.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Billing:"})," ",a.billingCycle]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Modules:"})," ",a.selectedModules.length," selected"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total:"})," $",k(),"/",a.billingCycle==="monthly"?"month":"year"]})]})]})]}),e.jsx(Y,{isSelected:a.agreeToTerms,onValueChange:s=>r("agreeToTerms",s),isInvalid:!!t.agreeToTerms,children:e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["I agree to the"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Privacy Policy"})]})}),t.agreeToTerms&&e.jsx("p",{className:"text-red-500 text-sm",children:t.agreeToTerms})]},"step4")]})})}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(p,{variant:"bordered",startContent:e.jsx(U,{className:"w-4 h-4"}),onPress:K,isDisabled:n===1,children:"Previous"}),n<h.length?e.jsx(p,{color:"primary",endContent:e.jsx(te,{className:"w-4 h-4"}),onPress:O,children:"Next"}):e.jsx(p,{color:"success",endContent:e.jsx(b,{className:"w-4 h-4"}),onPress:G,isLoading:B,children:"Complete Setup"})]})]})]})]})}export{Pe as default};
