import{R as et,r as n,j as e,f as P,c as je,d as we,b as Z,s as J,h as Ae,H as tt}from"./app-LVThMHv6.js";import{c as rt,e as at,f as st,g as nt,P as Te,k as ie,C as oe,G as lt,w as Ye,d as fe,a as ge,b as be,m as ne,v as le,j as $e,B as it,A as ot}from"./Dashboard-DBbCgV-n.js";import{S as ct}from"./StatsCards-Y5c7dy96.js";import{B as z}from"./react-toastify.esm-XSUbqWj4.js";import{F as ye}from"./ExclamationTriangleIcon-CbuBhWRQ.js";import{F as Me}from"./TrashIcon-Bk9upnxi.js";import{c as Q}from"./chunk-IHOGUXIG-_168abAb.js";import{m as dt}from"./chunk-O5MCAK4F-CsD6owuC.js";import{a as Ze}from"./XMarkIcon-BOrBl2CU.js";import{F as Le}from"./UserIcon-86B7TkEY.js";import{F as Ke}from"./CheckCircleIcon-C0Nql-s2.js";import{p as mt}from"./chunk-XVMALT6H-BqWV1iSD.js";import{F as ht}from"./WifiIcon-BH6qa-7T.js";import{a as xt}from"./MapPinIcon-C447FcTQ.js";import{F as ve}from"./EllipsisVerticalIcon-CJn2cOfP.js";import{F as Je}from"./PencilIcon-DJ2WqisH.js";import{F as Ne}from"./ClockIcon-DtscKg2-.js";import{F as Ie}from"./EnvelopeIcon-DtnMZwXJ.js";import{F as pt}from"./HashtagIcon-BdEtEUkc.js";import{t as ut,a as ft,b as gt,c as bt}from"./chunk-F3UDT23P-Sug-Eqba.js";import{t as vt,a as jt}from"./chunk-YRZGWF2W-CBTrIlcC.js";import{p as Qe}from"./chunk-APIAPHLK-Ds0iDEOX.js";import{s as _e,l as ce}from"./chunk-Y2AYO5NJ-Dvw4KXqa.js";import{u as wt}from"./chunk-S574QCAN-D5urRlRu.js";import{F as yt}from"./TrophyIcon-BZHT4gJi.js";import{F as Oe}from"./UserPlusIcon-BP8oTlic.js";import{F as Nt}from"./ChartBarIcon-Dv3lSYxj.js";import{m as Ge}from"./proxy-CcHlyH9G.js";import{F as _t}from"./MagnifyingGlassIcon-BZJE1KKS.js";import{F as kt}from"./TableCellsIcon-C53dt45_.js";import{F as Ft}from"./FunnelIcon-B-ojR1mP.js";import{c as He}from"./chunk-D5XJWRAV-kriH8qZu.js";import{i as Pt}from"./chunk-SSA7SXE4-BZRsjoCY.js";import{b as Ct}from"./chunk-57V4RE7B-BT4b1sSI.js";import"./UserGroupIcon-Do9jVOOs.js";import"./ShieldCheckIcon-k6dvI0-q.js";import"./KeyIcon-B8-iyAa4.js";import"./index-BYMQF0fe.js";import"./logo-Pwvcz7fP.js";import"./chunk-TLYTI3QM-DFSGgdJp.js";import"./useProgressBar-CG8Iu-D0.js";import"./NumberFormatter-DNR9MAW-.js";import"./chunk-XJ2YRSUP-M7U33Ktn.js";import"./useToggleState-Bj91Jdos.js";import"./create-visual-element-Dg9ZhQ6T.js";function Xe(x){return null}Xe.getCollectionNode=function*(h){let{children:a,title:u,items:k}=h;yield{type:"section",props:h,hasChildNodes:!0,rendered:u,"aria-label":h["aria-label"],*childNodes(){if(typeof a=="function"){if(!k)throw new Error("props.children was a function but props.items is missing");for(let b of k)yield{type:"item",value:b,renderer:a}}else{let b=[];et.Children.forEach(a,M=>{b.push({type:"item",element:M})}),yield*b}}}};let Rt=Xe;var St=Rt,Dt=St;function Et({title:x,titleId:h,...a},u){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":h},a),x?n.createElement("title",{id:h},x):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}const At=n.forwardRef(Et);function $t({title:x,titleId:h,...a},u){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":h},a),x?n.createElement("title",{id:h},x):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const qe=n.forwardRef($t);function It({title:x,titleId:h,...a},u){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":h},a),x?n.createElement("title",{id:h},x):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const Tt=n.forwardRef(It),Mt=({open:x,onClose:h,employee:a,onConfirm:u,loading:k=!1})=>{if(!a)return null;const b=a.active_projects_count>0||a.pending_leaves_count>0||a.active_trainings_count>0;return e.jsx(rt,{isOpen:x,onClose:h,size:"2xl",classNames:{backdrop:"bg-black/50 backdrop-blur-sm",base:"border border-white/20 bg-white/90 backdrop-blur-md",header:"border-b border-danger/30 bg-gradient-to-r from-danger-50/50 to-danger-100/30",body:"py-0",footer:"border-t border-white/10 bg-white/5"},children:e.jsxs(at,{children:[e.jsx(st,{className:"flex items-center gap-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-danger",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-danger/20 to-danger/10 flex items-center justify-center border border-danger/30",children:e.jsx(ye,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Delete Employee"})]})}),e.jsxs(nt,{children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 backdrop-blur-2xl border border-white/10 mb-6 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx(Te,{src:a.profile_image_url||a.profile_image,name:a.name,size:"lg",className:"ring-2 ring-white/20 shadow-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:a.name}),e.jsx("p",{className:"text-sm text-default-500",children:a.email}),a.employee_id&&e.jsxs("span",{className:"inline-block mt-1 px-3 py-1 text-xs rounded-lg bg-white/10 border border-white/10",children:["ID: ",a.employee_id]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Department"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.department_name||"Not assigned"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(oe,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Designation"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.designation_name||"Not assigned"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 rounded-2xl bg-danger-50/50 backdrop-blur-2xl border border-danger/30",children:e.jsxs("div",{className:"flex items-center gap-3 text-danger",children:[e.jsx(ye,{className:"w-5 h-5"}),e.jsx("p",{className:"text-sm font-medium",children:"This action will permanently delete the employee record and cannot be undone."})]})}),b&&e.jsxs("div",{className:"p-6 rounded-2xl bg-warning-50/50 backdrop-blur-2xl border border-warning/30 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-warning/20 flex items-center justify-center",children:e.jsx(ye,{className:"w-4 h-4 text-warning"})}),e.jsx("h4",{className:"text-sm font-semibold text-warning",children:"Employee Has Active Data"})]}),e.jsx("p",{className:"text-sm text-default-500 mb-4",children:"This employee has the following active records that will also be affected:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.active_projects_count>0&&e.jsxs(Q,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[a.active_projects_count," Active Projects"]}),a.pending_leaves_count>0&&e.jsxs(Q,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[a.pending_leaves_count," Pending Leaves"]}),a.active_trainings_count>0&&e.jsxs(Q,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[a.active_trainings_count," Active Trainings"]})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 border border-white/10 mb-4",children:[e.jsxs("p",{className:"text-sm mb-2 font-medium",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-danger font-semibold",children:a.name}),"?"]}),e.jsx("p",{className:"text-xs text-default-500",children:"Type the employee's name below to confirm this permanent deletion:"})]})]}),e.jsxs(dt,{className:"flex justify-between px-6 py-6 bg-white/5",children:[e.jsx(P,{variant:"light",onPress:h,isDisabled:k,className:"hover:bg-white/10",children:"Cancel"}),e.jsx(P,{color:"danger",variant:"solid",onPress:u,isLoading:k,startContent:!k&&e.jsx(Me,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-danger to-danger-600 hover:from-danger-600 hover:to-danger-700 shadow-lg",children:k?"Deleting...":"Delete Employee"})]})]})})},Lt=({isOpen:x,onClose:h,employee:a,onImageUpdate:u})=>{const k=n.useRef(null),[b,M]=n.useState(null),[v,A]=n.useState(null),[$,W]=n.useState(!1),[Y,y]=n.useState(0),[B,R]=n.useState(""),X=2*1024*1024,de=["image/jpeg","image/jpg","image/png","image/webp"],O=100,ee=2e3,te=(a==null?void 0:a.profile_image_url)||null,j=te&&te!==null,L=S=>{const d=S.target.files[0];if(!d)return;if(R(""),!de.includes(d.type)){R("Invalid file type. Please select a JPEG, PNG, or WebP image.");return}if(d.size>X){R(`File too large. Maximum size is ${X/1024/1024}MB.`);return}const g=new Image;g.onload=()=>{if(g.width<O||g.height<O){R(`Image dimensions too small. Minimum size is ${O}x${O} pixels.`);return}if(g.width>ee||g.height>ee){R(`Image dimensions too large. Maximum size is ${ee}x${ee} pixels.`);return}M(d),A(URL.createObjectURL(d))},g.onerror=()=>{R("Invalid image file.")},g.src=URL.createObjectURL(d)},E=async()=>{var d,g,f,m;if(!b||!a)return;W(!0),y(0),R("");const S=new FormData;S.append("profile_image",b),S.append("user_id",a.id);try{const F=await Z.post(route("profile.image.upload"),S,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:C=>{const U=Math.round(C.loaded*100/C.total);y(U)}});if(F.data.success){if(z.success(F.data.message||"Profile picture updated successfully!"),u){const C=F.data.profile_image_url;u(a.id,C)}T()}else throw new Error(F.data.message||"Upload failed")}catch(F){console.error("Upload error:",F);let C="Failed to upload profile picture";((d=F.response)==null?void 0:d.status)===413?C="File too large. Please choose a smaller image.":((g=F.response)==null?void 0:g.status)===422?C=F.response.data.message||"Validation failed":(m=(f=F.response)==null?void 0:f.data)!=null&&m.message?C=F.response.data.message:F.message&&(C=F.message),R(C),z.error(C)}finally{W(!1),y(0)}},G=async()=>{var d,g;if(!a)return;W(!0),R("");const S=new FormData;S.append("user_id",a.id);try{const f=await Z.delete(route("profile.image.remove"),{data:S,headers:{"Content-Type":"multipart/form-data"}});if(f.data.success){if(z.success(f.data.message||"Profile picture removed successfully!"),u){const m=f.data.profile_image_url;u(a.id,m)}T()}else throw new Error(f.data.message||"Remove failed")}catch(f){console.error("Remove error:",f);const m=((g=(d=f.response)==null?void 0:d.data)==null?void 0:g.message)||f.message||"Failed to remove profile picture";R(m),z.error(m)}finally{W(!1)}},T=()=>{$||(M(null),A(null),R(""),y(0),v&&URL.revokeObjectURL(v),h())};return a?e.jsx(lt,{open:x,closeModal:T,maxWidth:"md",fullWidth:!0,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qe,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Update Profile Picture"}),e.jsx("p",{className:"text-sm text-gray-500",children:(a==null?void 0:a.name)||"Employee"})]})]}),e.jsx(P,{isIconOnly:!0,variant:"light",onPress:T,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(Ye,{src:v||te||void 0,name:(a==null?void 0:a.name)||"Employee",size:"lg",className:"w-24 h-24",fallback:e.jsx(Le,{className:"w-12 h-12 text-gray-400"})})}),B&&e.jsx(Q,{color:"danger",variant:"flat",startContent:e.jsx(ye,{className:"w-4 h-4"}),className:"mb-4 w-full",children:B}),$&&e.jsx("div",{className:"mb-4",children:e.jsx(mt,{value:Y,color:"primary",size:"sm",label:"Uploading...",showValueLabel:!0,className:"w-full"})}),e.jsx(je,{className:"mb-4",children:e.jsxs(we,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("input",{ref:k,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:L,className:"hidden",disabled:$}),e.jsx(P,{onPress:()=>{var S;return(S=k.current)==null?void 0:S.click()},startContent:e.jsx(qe,{className:"w-5 h-5"}),variant:"flat",color:"primary",disabled:$,className:"mb-3",children:"Choose New Picture"}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Supported formats: JPEG, PNG, WebP"}),e.jsx("p",{children:"Maximum size: 2MB"}),e.jsx("p",{children:"Minimum dimensions: 100x100px"}),e.jsx("p",{children:"Maximum dimensions: 2000x2000px"})]})]}),b&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(b.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(P,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>{M(null),A(null),R("")},disabled:$,children:e.jsx(Ze,{className:"w-4 h-4"})})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[j&&e.jsx(P,{onPress:G,startContent:e.jsx(Me,{className:"w-4 h-4"}),color:"danger",variant:"flat",disabled:$,children:"Remove Picture"}),e.jsx(P,{onPress:T,variant:"flat",disabled:$,children:"Cancel"}),e.jsx(P,{onPress:E,color:"primary",disabled:!b||$,isLoading:$,children:$?"Uploading...":"Update Picture"})]})]})}):null},zt=({allUsers:x,departments:h,designations:a,attendanceTypes:u,setUsers:k,isMobile:b,isTablet:M,pagination:v,onPageChange:A,onRowsPerPageChange:$,totalUsers:W=0,loading:Y=!1,updateEmployeeOptimized:y,deleteEmployeeOptimized:B})=>{const[R,X]=n.useState(!1),[de,O]=n.useState(null),[ee,te]=n.useState({}),[j,L]=n.useState(!1),[E,G]=n.useState(null),[T,S]=n.useState(!1),[d,g]=n.useState({isOpen:!1,employee:null}),f=()=>{var i;if(typeof window>"u")return"lg";const s=((i=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:i.trim())||"12px",o=parseInt(s);return o===0?"none":o<=4?"sm":o<=8?"md":o<=16?"lg":"full"},m=r=>r?r.replace(/_\d+$/,""):"",F=r=>{const s=r==null?void 0:r.config;if(!s)return!1;switch(m(r.slug)){case"geo_polygon":return s.polygon&&s.polygon.length>=3||s.polygons&&s.polygons.some(i=>{var p;return((p=i.points)==null?void 0:p.length)>=3});case"wifi_ip":return s.allowed_ips&&s.allowed_ips.length>0||s.allowed_ranges&&s.allowed_ranges.length>0||s.ip_locations&&s.ip_locations.some(i=>{var p,c;return((p=i.allowed_ips)==null?void 0:p.length)>0||((c=i.allowed_ranges)==null?void 0:c.length)>0});case"route_waypoint":return s.waypoints&&s.waypoints.length>=2||s.routes&&s.routes.some(i=>{var p;return((p=i.waypoints)==null?void 0:p.length)>=2});case"qr_code":return s.code||s.qr_codes&&s.qr_codes.length>0;default:return!1}},C={geo_polygon:{title:"Geo Polygon",icon:xt,color:"warning"},wifi_ip:{title:"WiFi/IP",icon:ht,color:"secondary"},route_waypoint:{title:"Route Waypoint",icon:At,color:"primary"},qr_code:{title:"QR Code",icon:Tt,color:"success"}},U=n.useMemo(()=>{if(!u)return[];const r={};return u.forEach(s=>{if(!s.is_active||!F(s))return;const o=m(s.slug);C[o]&&(r[o]||(r[o]={...C[o],slug:o,types:[]}),r[o].types.push(s))}),Object.values(r).filter(s=>s.types.length>0)},[u]),ke=async(r,s)=>{const o=new Promise(async(i,p)=>{try{if((await Z.post(route("user.updateDepartment",{id:r}),{department:s})).status===200){const _=h.find(w=>w.id===parseInt(s))||null;y==null||y(r,{department_id:s,department_name:(_==null?void 0:_.name)||null,designation_id:null,designation_name:null}),i("Department updated successfully")}}catch(c){console.error("Error updating department:",c),p("Failed to update department")}});z.promise(o,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(J,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating department..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},Fe=async(r,s)=>{const o=new Promise(async(i,p)=>{try{if((await Z.post(route("user.updateDesignation",{id:r}),{designation_id:s})).status===200){const _=a.find(w=>w.id===parseInt(s))||null;y==null||y(r,{designation_id:s,designation_name:(_==null?void 0:_.title)||null}),i("Designation updated successfully")}}catch(c){console.error("Error updating designation:",c),p("Failed to update designation")}});z.promise(o,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(J,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating designation..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},Pe=async(r,s)=>{const o=new Promise(async(i,p)=>{try{if((await Z.post(route("user.updateAttendanceType",{id:r}),{attendance_type_id:s})).status===200){const _=u.find(w=>w.id===parseInt(s))||null;y&&y(r,{attendance_type_id:s,attendance_type_name:(_==null?void 0:_.name)||null}),i("Attendance type updated successfully")}}catch(c){console.error("Error updating attendance type:",c),p("Failed to update attendance type")}});z.promise(o,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(J,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating attendance type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},Ce=r=>{G(r),L(!0)},me=async()=>{if(!E)return;S(!0);const r=new Promise(async(s,o)=>{var i,p,c,_;try{(await Z.delete(route("user.delete",{id:E.id}))).status===200&&(B&&B(E.id),L(!1),G(null),s("Employee deleted successfully"))}catch(w){console.error("Error deleting employee:",w);let I="Failed to delete employee";((i=w.response)==null?void 0:i.status)===403?I="You do not have permission to delete this employee":((p=w.response)==null?void 0:p.status)===404?I="Employee not found or already deleted":(_=(c=w.response)==null?void 0:c.data)!=null&&_.error&&(I=w.response.data.error),o(I)}finally{S(!1)}});z.promise(r,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(J,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting employee..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:s}){return e.jsx("div",{children:s})},icon:"âœ…",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:s}){return e.jsx("div",{children:s})},icon:"âŒ",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},Re=()=>{L(!1),G(null)},Se=r=>{g({isOpen:!0,employee:r})},De=()=>{g({isOpen:!1,employee:null})},re=(r,s)=>{y&&y(r,{profile_image_url:s})},ae=n.useRef({}),Ee=n.useCallback((r,s)=>{ae.current[r]&&clearTimeout(ae.current[r]),ae.current[r]=setTimeout(async()=>{var o,i,p;try{const c=await Z.post(route("users.updateReportTo",{id:r}),{report_to:s||null});c.status===200&&(y&&y(r,{report_to:s||null,reports_to:((o=c.data.user)==null?void 0:o.reports_to)||null}),z.success(c.data.message||"Report to updated successfully"))}catch(c){console.error("Error updating report to:",c),z.error(((p=(i=c.response)==null?void 0:i.data)==null?void 0:p.error)||"Failed to update report to")}},500)},[y]),he=n.useCallback(r=>{if(!x||!a)return[];const s=r==null?void 0:r.department_id,o=r==null?void 0:r.designation_id,i=a==null?void 0:a.find(c=>String(c.id)===String(o)),p=i==null?void 0:i.hierarchy_level;return p==null?[]:x.filter(c=>{if(c.id===r.id)return!1;const _=c==null?void 0:c.department_id;if(String(_)!==String(s))return!1;const w=c==null?void 0:c.designation_id,I=a==null?void 0:a.find(H=>String(H.id)===String(w));return!I||I.hierarchy_level===void 0?!1:I.hierarchy_level<p})},[x,a]),xe=n.useMemo(()=>{const r=[{name:"#",uid:"sl",width:60},{name:"EMPLOYEE",uid:"employee",width:"auto",minWidth:200},{name:"DEPARTMENT",uid:"department",width:180},{name:"DESIGNATION",uid:"designation",width:180},{name:"REPORT TO",uid:"report_to",width:200},{name:"ACTIONS",uid:"actions",width:80}];if(b||r.splice(2,0,{name:"CONTACT",uid:"contact",width:220}),!b&&!M&&r.splice(r.length-2,0,{name:"ATTENDANCE TYPE",uid:"attendance_type",width:180}),b){const s=r.findIndex(o=>o.uid==="report_to");s>-1&&r.splice(s,1)}return r},[b,M]),pe=(r,s,o)=>{const i=r[s],_=(v!=null&&v.currentPage&&(v!=null&&v.perPage)?Number((v.currentPage-1)*v.perPage):0)+(typeof o=="number"?o:0)+1;switch(s){case"sl":return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e.jsx("span",{className:"text-sm font-semibold text-foreground",children:_})})});case"employee":return e.jsxs("div",{className:"min-w-max",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{src:(r==null?void 0:r.profile_image_url)||(r==null?void 0:r.profile_image),name:r==null?void 0:r.name,size:b?"sm":"md",onClick:()=>Se(r)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"font-semibold text-foreground text-left whitespace-nowrap",children:r==null?void 0:r.name}),!b&&e.jsxs("p",{className:"text-default-500 text-left text-xs whitespace-nowrap",children:["ID: ",(r==null?void 0:r.employee_id)||"N/A"]})]})]}),b&&e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(pt,{className:"w-3 h-3"}),(r==null?void 0:r.employee_id)||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:r==null?void 0:r.email})]}),(r==null?void 0:r.phone)&&e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx($e,{className:"w-3 h-3"}),r==null?void 0:r.phone]})]})]});case"contact":return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:r==null?void 0:r.email})]}),(r==null?void 0:r.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx($e,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:r==null?void 0:r.phone})]})]});case"department":return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(fe,{children:[e.jsx(ge,{children:e.jsx(P,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e.jsx(ie,{className:"w-4 h-4"}),endContent:e.jsx(ve,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:r.department_name||"Select Department"})})}),e.jsx(be,{"aria-label":"Department options",children:h==null?void 0:h.map(t=>e.jsx(ne,{onPress:()=>ke(r.id,t.id),children:t.name},t.id.toString()))})]})});case"designation":const w=r.department_id,I=(a==null?void 0:a.filter(t=>t.department_id===parseInt(w)))||[];return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(fe,{isDisabled:!w,children:[e.jsx(ge,{children:e.jsx(P,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[150px] transition-all duration-300 ${w?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,isDisabled:!w,startContent:e.jsx(oe,{className:"w-4 h-4"}),endContent:w&&e.jsx(ve,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:w?r.designation_name||"Select Designation":"Select Department First"})})}),e.jsx(be,{"aria-label":"Designation options",children:I.map(t=>e.jsx(ne,{onPress:()=>Fe(r.id,t.id),children:t.title},t.id.toString()))})]})});case"report_to":const H=he(r),q=r.reports_to||(r.report_to?x==null?void 0:x.find(t=>t.id===r.report_to):null);return e.jsx("div",{className:"flex flex-col gap-2 min-w-[180px]",children:e.jsx(_e,{size:"sm",variant:"bordered",placeholder:"Select manager",isDisabled:!H.length,selectedKeys:r.report_to?[String(r.report_to)]:[],onSelectionChange:t=>{const l=Array.from(t)[0],N=l?parseInt(l,10):null;N!==r.report_to&&Ee(r.id,N)},classNames:{trigger:"min-h-unit-10 h-unit-10 backdrop-blur-md border-white/20 bg-white/10 hover:bg-white/15",value:"text-small"},startContent:e.jsx(le,{className:"w-4 h-4"}),renderValue:t=>q?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{src:q.profile_image_url||q.profile_image,size:"sm",className:"w-6 h-6 flex-shrink-0",showFallback:!0,name:q.name}),e.jsx("span",{className:"text-sm font-medium truncate",children:q.name})]}):e.jsx("span",{className:"text-default-400 text-sm",children:"No manager"}),children:H.length===0?e.jsx(ce,{isDisabled:!0,textValue:"No eligible managers",children:e.jsx("span",{className:"text-default-400",children:"No eligible managers in department"})},"no-managers"):H.map(t=>e.jsx(ce,{textValue:t.name,children:e.jsx(wt,{name:t.name,description:t.designation_name||"",avatarProps:{src:t.profile_image_url||t.profile_image,size:"sm",showFallback:!0,name:t.name}})},String(t.id)))})});case"attendance_type":const K=U.length>0;return e.jsx("div",{className:"flex flex-col gap-2 min-w-[180px]",children:e.jsxs(fe,{isDisabled:!K,children:[e.jsx(ge,{children:e.jsx(P,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[180px] transition-all duration-300 ${K?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,startContent:e.jsx(Ne,{className:"w-4 h-4"}),endContent:K&&e.jsx(ve,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{className:"truncate",children:K?r.attendance_type_name||"Select Type":"No Types Configured"})})}),e.jsx(be,{"aria-label":"Attendance Type options",className:"min-w-[200px]",children:U.map((t,l)=>(t.icon,e.jsx(Dt,{title:t.title,showDivider:l<U.length-1,classNames:{heading:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-default-500 px-2 py-1"},children:t.types.map(N=>{var D;return e.jsx(ne,{onPress:()=>Pe(r.id,N.id),startContent:e.jsx("span",{className:"text-base",children:N.icon||"ðŸ“"}),description:((D=N.description)==null?void 0:D.substring(0,30))||null,children:N.name},N.id.toString())})},t.slug)))})]})});case"actions":return e.jsx("div",{className:"relative flex justify-center items-center",children:e.jsxs(fe,{children:[e.jsx(ge,{children:e.jsx(P,{isIconOnly:!0,variant:"light",className:"text-default-400 hover:text-foreground transition-all duration-300",children:e.jsx(ve,{className:"w-5 h-5"})})}),e.jsxs(be,{"aria-label":"Employee Actions",children:[e.jsx(ne,{startContent:e.jsx(Je,{className:"w-4 h-4"}),onPress:()=>Ae.visit(route("profile",{user:r.id})),children:"Edit Profile"},"edit"),e.jsx(ne,{className:"text-danger",color:"danger",startContent:e.jsx(Me,{className:"w-4 h-4"}),onPress:()=>Ce(r),children:"Delete"},"delete")]})]})});default:return i}},ue=()=>!v||Y?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2",style:{borderTop:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",backdropFilter:"blur(16px)"},children:[e.jsxs("span",{className:"text-xs mb-3 sm:mb-0 opacity-70",style:{color:"var(--theme-foreground)"},children:["Showing ",(v.currentPage-1)*v.perPage+1," to ",Math.min(v.currentPage*v.perPage,v.total)," of ",v.total," employees"]}),e.jsx(Qe,{total:Math.ceil(v.total/v.perPage),initialPage:v.currentPage,page:v.currentPage,onChange:A,size:b?"sm":"md",variant:"bordered",showControls:!0,style:{"--pagination-item-bg":"color-mix(in srgb, var(--theme-content2) 50%, transparent)","--pagination-item-border":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}})]});return e.jsxs("div",{className:"w-full overflow-hidden flex flex-col relative",style:{maxHeight:"calc(100vh - 200px)",background:"color-mix(in srgb, var(--theme-content1) 85%, transparent)",backdropFilter:"blur(16px)",border:"1px solid color-mix(in srgb, var(--theme-content2) 50%, transparent)",borderRadius:f()},children:[Y&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50",style:{background:"color-mix(in srgb, var(--theme-content1) 20%, transparent)",backdropFilter:"blur(8px)",borderRadius:f()},children:e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:f(),backdropFilter:"blur(16px)"},children:[e.jsx(J,{size:"lg",color:"primary"}),e.jsx("span",{className:"text-sm",style:{color:"var(--theme-foreground)"},children:"Loading employees..."})]})}),e.jsx("div",{className:"overflow-auto grow",children:e.jsxs(ut,{"aria-label":"Employees table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"backdrop-blur-md font-medium text-xs sticky top-0 z-10 whitespace-nowrap",td:"py-3 whitespace-nowrap",table:"border-collapse table-auto",thead:"",tr:"hover:opacity-80 transition-all duration-200"},style:{"--table-header-bg":"color-mix(in srgb, var(--theme-content2) 60%, transparent)","--table-row-hover":"color-mix(in srgb, var(--theme-content2) 30%, transparent)","--table-border":"color-mix(in srgb, var(--theme-content3) 30%, transparent)"},isHeaderSticky:!0,isCompact:b,children:[e.jsx(vt,{columns:xe,children:r=>e.jsx(jt,{align:r.uid==="actions"||r.uid==="sl"?"center":"start",width:r.width,minWidth:r.minWidth,className:`backdrop-blur-md ${r.uid==="employee"?"whitespace-nowrap":""}`,style:{backgroundColor:"color-mix(in srgb, var(--theme-content2) 60%, transparent)",color:"var(--theme-foreground)",borderBottom:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)"},children:r.name},r.uid)}),e.jsx(ft,{items:x||[],emptyContent:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Le,{className:"w-12 h-12 mb-4 opacity-40",style:{color:"var(--theme-foreground)"}}),e.jsx("h6",{className:"text-lg font-semibold mb-2",style:{color:"var(--theme-foreground)"},children:"No employees found"}),e.jsx("p",{className:"text-sm opacity-70",style:{color:"var(--theme-foreground)"},children:"Try adjusting your search or filter criteria"})]}),loadingContent:e.jsx(J,{}),isLoading:Y,children:(r,s)=>{const o=x?x.findIndex(i=>i.id===r.id):s;return e.jsx(gt,{className:"transition-all duration-200 hover:scale-[1.01]",style:{color:"var(--theme-foreground)",borderBottom:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)"},children:i=>e.jsx(bt,{className:"transition-all duration-300",children:e.jsx("div",{className:"transition-all duration-200",children:pe(r,i,o)})})},r.id)}})]})}),ue(),e.jsx(Mt,{open:j,onClose:Re,employee:E,onConfirm:me,loading:T}),e.jsx(Lt,{isOpen:d.isOpen,onClose:De,employee:d.employee,onImageUpdate:re})]})},Wt=({title:x,departments:h,designations:a,attendanceTypes:u})=>{var he,xe,pe,ue,r,s,o,i,p,c,_,w,I,H,q,K;const[k,b]=n.useState(!1),[M,v]=n.useState(!1),[A,$]=n.useState(!1),[W,Y]=n.useState(!1);n.useEffect(()=>{const t=()=>{b(window.innerWidth<640),v(window.innerWidth<768),$(window.innerWidth>=1025),Y(window.innerWidth>=641&&window.innerWidth<=1024)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const[y,B]=n.useState([]),[R,X]=n.useState(!0),[de,O]=n.useState(0),[ee,te]=n.useState(1),[j,L]=n.useState({search:"",department:"all",designation:"all",attendanceType:"all"}),[E,G]=n.useState("table"),[T,S]=n.useState(!1),[d,g]=n.useState({currentPage:1,perPage:10,total:0}),f=()=>{var D;if(typeof window>"u")return"lg";const l=((D=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:D.trim())||"12px",N=parseInt(l);return N===0?"none":N<=4?"sm":N<=8?"md":N<=16?"lg":"full"},[m,F]=n.useState({overview:{total_employees:0,active_employees:0,inactive_employees:0,total_departments:0,total_designations:0,total_attendance_types:0},distribution:{by_department:[],by_designation:[],by_attendance_type:[]},hiring_trends:{recent_hires:{last_30_days:0,last_90_days:0,last_year:0},monthly_growth_rate:0,current_month_hires:0},workforce_health:{status_ratio:{active_percentage:0,inactive_percentage:0,retention_rate:0},retention_rate:0,turnover_rate:0},quick_metrics:{headcount:0,active_ratio:0,department_diversity:0,role_diversity:0,recent_activity:0}}),C=n.useCallback(async()=>{X(!0);try{const{data:t}=await Z.get(route("employees.paginate"),{params:{page:d.currentPage,perPage:d.perPage,search:j.search,department:j.department,designation:j.designation,attendanceType:j.attendanceType}});B(t.employees.data),O(t.employees.total),te(t.employees.last_page),g(l=>({...l,total:t.employees.total})),t.stats&&F(t.stats)}catch(t){console.error("Error fetching employees:",t),z.error("Failed to load employees data")}finally{X(!1)}},[d.currentPage,d.perPage,j]),U=n.useCallback(async()=>{try{const{data:t}=await Z.get(route("employees.stats"));t.stats&&F(t.stats)}catch(t){console.error("Error fetching employee stats:",t)}},[]);n.useEffect(()=>{C(),U()},[C,U]);const ke=n.useCallback(t=>{L(l=>({...l,search:t})),g(l=>({...l,currentPage:1}))},[]),Fe=n.useCallback(t=>{L(l=>({...l,department:t,designation:t!=="all"?"all":l.designation})),g(l=>({...l,currentPage:1}))},[]),Pe=n.useCallback(t=>{L(l=>({...l,designation:t})),g(l=>({...l,currentPage:1}))},[]),Ce=n.useCallback(t=>{L(l=>({...l,attendanceType:t})),g(l=>({...l,currentPage:1}))},[]),me=n.useCallback(t=>{g(l=>({...l,currentPage:t}))},[]),Re=n.useCallback(t=>{g(l=>({...l,perPage:t,currentPage:1}))},[]),Se=n.useCallback((t,l)=>{B(N=>N.map(D=>D.id===t?{...D,...l}:D))},[]),De=n.useCallback(t=>{B(l=>l.filter(N=>N.id!==t)),O(l=>l-1),g(l=>({...l,total:l.total-1})),U()},[U]),re=n.useMemo(()=>j.department==="all"?a:a.filter(t=>t.department_id===parseInt(j.department)),[a,j.department]),ae=n.useMemo(()=>{var t,l,N,D,se,V,ze,We,Be,Ue,Ve;return[{title:"Total Employees",value:((t=m.overview)==null?void 0:t.total_employees)||0,icon:e.jsx(le,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Headcount"},{title:"Active Employees",value:((l=m.overview)==null?void 0:l.active_employees)||0,icon:e.jsx(Ke,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((D=(N=m.workforce_health)==null?void 0:N.status_ratio)==null?void 0:D.active_percentage)||0}% Active`},{title:"Departments",value:((se=m.overview)==null?void 0:se.total_departments)||0,icon:e.jsx(ie,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Department Diversity"},{title:"Designations",value:((V=m.overview)==null?void 0:V.total_designations)||0,icon:e.jsx(oe,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Role Diversity"},{title:"Retention Rate",value:`${((ze=m.workforce_health)==null?void 0:ze.retention_rate)||0}%`,icon:e.jsx(yt,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Employee Retention"},{title:"Recent Hires",value:((Be=(We=m.hiring_trends)==null?void 0:We.recent_hires)==null?void 0:Be.last_30_days)||0,icon:e.jsx(Oe,{}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 Days"},{title:"Growth Rate",value:`${((Ue=m.hiring_trends)==null?void 0:Ue.monthly_growth_rate)||0}%`,icon:e.jsx(Nt,{}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Monthly Growth"},{title:"Attendance Types",value:((Ve=m.overview)==null?void 0:Ve.total_attendance_types)||0,icon:e.jsx(Ne,{}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Available Types"}]},[m]),Ee=({user:t,index:l})=>{const N=h==null?void 0:h.find(V=>V.id===t.department_id),D=a==null?void 0:a.find(V=>V.id===t.designation_id),se=u==null?void 0:u.find(V=>V.id===t.attendance_type_id);return e.jsx(je,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>Ae.visit(route("profile",{user:t.id})),children:e.jsxs(we,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(Te,{src:(t==null?void 0:t.profile_image_url)||(t==null?void 0:t.profile_image),name:t==null?void 0:t.name,size:"md",fallback:e.jsx(Le,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-semibold text-foreground text-left text-sm",children:t==null?void 0:t.name}),e.jsxs("span",{className:"text-default-500 text-left text-xs",children:["ID: ",(t==null?void 0:t.employee_id)||"N/A"]})]}),e.jsx("div",{className:"flex-1 min-w-0 flex justify-end",children:e.jsx(P,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:V=>{V.stopPropagation(),Ae.visit(route("profile",{user:t.id}))},children:e.jsx(Je,{className:"w-4 h-4"})})})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-3",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs truncate",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx($e,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs",children:t==null?void 0:t.phone})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[N&&e.jsx(Q,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e.jsx(ie,{className:"w-3 h-3"}),children:N.name}),D&&e.jsx(Q,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e.jsx(oe,{className:"w-3 h-3"}),children:D.title}),se&&e.jsx(Q,{size:"sm",variant:"bordered",className:"text-xs",startContent:e.jsx(Ne,{className:"w-3 h-3"}),children:se.name})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(tt,{title:x||"Employee Directory"}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Employee Directory Management",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(Ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(je,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(He,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${A?"p-6":W?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                              ${A?"p-3":W?"p-2.5":"p-2"} 
                              rounded-xl flex items-center justify-center
                            `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(le,{className:`
                                ${A?"w-8 h-8":W?"w-6 h-6":"w-5 h-5"}
                              `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                ${A?"text-2xl":W?"text-xl":"text-lg"}
                                font-bold text-foreground
                                ${A?"":"truncate"}
                              `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Directory"}),e.jsx("p",{className:`
                                ${A?"text-sm":"text-xs"} 
                                text-default-500
                                ${A?"":"truncate"}
                              `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage employee information and organizational structure"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(P,{className:"text-white font-medium",style:{background:"linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary) 80%, var(--theme-secondary)))",borderRadius:f()},startContent:e.jsx(Oe,{className:"w-4 h-4"}),children:k?"Add":"Add Employee"})})]})})})}),e.jsxs(we,{className:"p-6",children:[e.jsx(ct,{stats:ae,className:"mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"p-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:f(),backdropFilter:"blur(16px)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--theme-foreground)"},children:"Department Distribution"}),e.jsx("div",{className:"space-y-3",children:(xe=(he=m.distribution)==null?void 0:he.by_department)==null?void 0:xe.slice(0,5).map((t,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 rounded-full overflow-hidden",style:{background:"color-mix(in srgb, var(--theme-content3) 40%, transparent)"},children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${t.percentage}%`,background:"linear-gradient(90deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary) 80%, var(--theme-secondary)))"}})}),e.jsx("span",{className:"text-xs w-8 opacity-70",style:{color:"var(--theme-foreground)"},children:t.count})]})]},l))})]}),e.jsxs("div",{className:"p-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:f(),backdropFilter:"blur(16px)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--theme-foreground)"},children:"Hiring Trends"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:"Last 30 Days"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--theme-foreground)"},children:((ue=(pe=m.hiring_trends)==null?void 0:pe.recent_hires)==null?void 0:ue.last_30_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:"Last 90 Days"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--theme-foreground)"},children:((s=(r=m.hiring_trends)==null?void 0:r.recent_hires)==null?void 0:s.last_90_days)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"This Year"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:((i=(o=m.hiring_trends)==null?void 0:o.recent_hires)==null?void 0:i.last_year)||0})]}),e.jsx("div",{className:"pt-2 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Monthly Growth"}),e.jsxs("span",{className:`text-sm font-medium ${(((p=m.hiring_trends)==null?void 0:p.monthly_growth_rate)||0)>=0?"text-green-400":"text-red-400"}`,children:[((c=m.hiring_trends)==null?void 0:c.monthly_growth_rate)||0,"%"]})]})})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Workforce Health"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Retention Rate"}),e.jsxs("span",{className:"text-sm font-medium text-green-400",children:[((_=m.workforce_health)==null?void 0:_.retention_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Turnover Rate"}),e.jsxs("span",{className:"text-sm font-medium text-orange-400",children:[((w=m.workforce_health)==null?void 0:w.turnover_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Active Employees"}),e.jsxs("span",{className:"text-sm font-medium text-blue-400",children:[((H=(I=m.workforce_health)==null?void 0:I.status_ratio)==null?void 0:H.active_percentage)||0,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Attendance Types"}),e.jsx("div",{className:"space-y-3",children:(K=(q=m.distribution)==null?void 0:q.by_attendance_type)==null?void 0:K.map((t,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-linear-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${t.percentage}%`}})}),e.jsx("span",{className:"text-xs text-default-500 w-8",children:t.count})]})]},l))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Pt,{label:"Search Employees",placeholder:"Search by name, email, or employee ID...",value:j.search,onChange:t=>ke(t.target.value),startContent:e.jsx(_t,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:f(),classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Search employees"})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(Ct,{variant:"bordered",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:f()},children:[e.jsxs(P,{isIconOnly:k,color:E==="table"?"primary":"default",onPress:()=>G("table"),style:{background:E==="table"?"var(--theme-primary)":"transparent",color:E==="table"?"white":"var(--theme-foreground)"},children:[e.jsx(kt,{className:"w-4 h-4"}),!k&&e.jsx("span",{className:"ml-1",children:"Table"})]}),e.jsxs(P,{isIconOnly:k,color:E==="grid"?"primary":"default",onPress:()=>G("grid"),style:{background:E==="grid"?"var(--theme-primary)":"transparent",color:E==="grid"?"white":"var(--theme-foreground)"},children:[e.jsx(it,{className:"w-4 h-4"}),!k&&e.jsx("span",{className:"ml-1",children:"Grid"})]})]}),e.jsx(P,{isIconOnly:!0,variant:"bordered",onPress:()=>S(!T),style:{background:T?"color-mix(in srgb, var(--theme-primary) 20%, transparent)":"color-mix(in srgb, var(--theme-content2) 30%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",color:T?"var(--theme-primary)":"var(--theme-foreground)",borderRadius:f()},children:e.jsx(Ft,{className:"w-4 h-4"})})]})]}),T&&e.jsx(Ge.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-4",children:e.jsxs("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:f(),backdropFilter:"blur(16px)"},children:[e.jsx(_e,{label:"Department",placeholder:"All Departments",selectedKeys:j.department!=="all"?[j.department]:[],onSelectionChange:t=>{const l=Array.from(t)[0];Fe(l||"all")},variant:"bordered",size:"sm",radius:f(),startContent:e.jsx(ie,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:h==null?void 0:h.map(t=>e.jsx(ce,{textValue:t.name,children:t.name},String(t.id)))}),e.jsx(_e,{label:"Designation",placeholder:"All Designations",selectedKeys:j.designation!=="all"?[j.designation]:[],onSelectionChange:t=>{const l=Array.from(t)[0];Pe(l||"all")},variant:"bordered",size:"sm",radius:f(),isDisabled:j.department==="all",startContent:e.jsx(oe,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:re==null?void 0:re.map(t=>e.jsx(ce,{textValue:t.title,children:t.title},String(t.id)))}),e.jsx(_e,{label:"Attendance Type",placeholder:"All Attendance Types",selectedKeys:j.attendanceType!=="all"?[j.attendanceType]:[],onSelectionChange:t=>{const l=Array.from(t)[0];Ce(l||"all")},variant:"bordered",size:"sm",radius:f(),startContent:e.jsx(Ne,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:u==null?void 0:u.map(t=>e.jsx(ce,{textValue:t.name,children:t.name},String(t.id)))}),e.jsx("div",{className:"flex items-end",children:e.jsx(P,{variant:"flat",size:"sm",className:"w-full",onPress:()=>{L({search:"",department:"all",designation:"all",attendanceType:"all"}),g(t=>({...t,currentPage:1}))},isDisabled:j.search===""&&j.department==="all"&&j.designation==="all"&&j.attendanceType==="all",style:{background:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",color:"var(--theme-danger)",borderRadius:f()},children:"Clear Filters"})})]})})]}),e.jsxs(je,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                      var(--theme-content1, #FAFAFA) 20%, 
                      var(--theme-content2, #F4F4F5) 10%, 
                      var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(He,{className:"border-b pb-2",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)"},children:e.jsx(le,{className:"w-6 h-6",style:{color:"var(--theme-primary)"}})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Directory"})]})}),e.jsx(we,{children:e.jsx("div",{className:"max-h-[84vh] overflow-y-auto",children:R?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{size:"lg",color:"primary"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading employees data..."})]}):E==="table"?e.jsx(zt,{allUsers:y,departments:h,designations:a,attendanceTypes:u,setUsers:B,isMobile:k,isTablet:M,pagination:d,onPageChange:me,onRowsPerPageChange:Re,totalUsers:de,loading:R,updateEmployeeOptimized:Se,deleteEmployeeOptimized:De}):e.jsxs("div",{className:"p-4",children:[y.length>0?e.jsx("div",{className:`grid gap-4 ${k?"grid-cols-1":M?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:y.map((t,l)=>e.jsx(Ee,{user:t,index:l},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(le,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e.jsx("p",{className:"text-base text-default-500",children:"No employees found"}),e.jsx("p",{className:"text-sm text-default-500",children:"Try adjusting your search or filters"})]}),y.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2",style:{borderTop:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",backdropFilter:"blur(16px)"},children:[e.jsxs("span",{className:"text-xs mb-3 sm:mb-0 opacity-70",style:{color:"var(--theme-foreground)"},children:["Showing ",(d.currentPage-1)*d.perPage+1," to ",Math.min(d.currentPage*d.perPage,d.total)," of ",d.total," employees"]}),e.jsx(Qe,{total:Math.ceil(d.total/d.perPage),initialPage:d.currentPage,page:d.currentPage,onChange:me,size:k?"sm":"md",variant:"bordered",showControls:!0,style:{"--pagination-item-bg":"color-mix(in srgb, var(--theme-content2) 50%, transparent)","--pagination-item-border":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}})]})]})})})]})]})]})})})})})]})};Wt.layout=x=>e.jsx(ot,{children:x});export{Wt as default};
