import{J,r as n,j as e,a as q,Q as G,c as b,d as m,b as w,s as H,S as u}from"./app-DyyunZfI.js";import{A as X}from"./Dashboard-eJcnLUU8.js";import{S as Z}from"./StatsCards-CbSl8WWA.js";import{B as ee}from"./react-toastify.esm-CYg29cdz.js";import{d as N}from"./dayjs.min-yj2Gt7q1.js";import{F as g,a as se}from"./MapPinIcon-BzuMXqkn.js";import{F as ae}from"./CheckCircleIcon-Btm8mRnI.js";import{F as te}from"./ClockIcon-D7ADVzPp.js";import{F as z}from"./UserGroupIcon-27E50qMZ.js";import{m as P}from"./proxy-DAD54e0o.js";import{F as $}from"./PlusIcon-BwWvZwsK.js";import{F as re}from"./MagnifyingGlassIcon-CnIa6Cul.js";import{F as le}from"./AdjustmentsHorizontalIcon-DJZK32RV.js";import{F as I}from"./ChartBarIcon-BNPyXGBz.js";import{c as ie}from"./chunk-D5XJWRAV-Drq72Bup.js";import{i as ne}from"./chunk-SSA7SXE4-BLP1fpPl.js";import{b as oe}from"./chunk-57V4RE7B-DrIXK_m0.js";import{s as y,l as o}from"./chunk-Y2AYO5NJ-Cdo7__Ed.js";import{c as p}from"./chunk-IHOGUXIG-B8WOVLyW.js";import{p as ce}from"./chunk-EAPQ7RWQ-M_tJxQ7i.js";import"./EnvelopeIcon-CQykiiND.js";import"./UserIcon-BkD21Ack.js";import"./ShieldCheckIcon-kgeUV64N.js";import"./XMarkIcon-CsXY58VA.js";import"./KeyIcon-Dltk5WDG.js";import"./index-CZqnmJ4-.js";import"./logo-Pwvcz7fP.js";import"./ExclamationTriangleIcon-BsmzlS1r.js";import"./features-animation-CECeEVLg.js";import"./create-visual-element-202FNWgM.js";import"./chunk-TLYTI3QM-cTtarB9c.js";const de=({events:j,filters:r})=>{var E,R,F;const{auth:v}=J().props,x=()=>{var d;if(typeof window>"u")return"lg";const i=((d=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius"))==null?void 0:d.trim())||"12px",l=parseInt(i);return l===0?"none":l<=4?"sm":l<=8?"md":l<=16?"lg":"full"},[h,A]=n.useState(!1),[me,M]=n.useState(!1);n.useEffect(()=>{const s=()=>{A(window.innerWidth<640),M(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const[a,k]=n.useState(j||{data:[]}),[T,_]=n.useState(!1),[f,V]=n.useState(!1),[t,B]=n.useState({search:(r==null?void 0:r.search)||"",status:(r==null?void 0:r.status)||"all",registration:(r==null?void 0:r.registration)||"all",timeline:(r==null?void 0:r.timeline)||"all"}),S=((E=v.permissions)==null?void 0:E.includes("event.create"))||!1,D=((R=v.permissions)==null?void 0:R.includes("event.registration.manage"))||!1,L=n.useMemo(()=>{var s,i,l;return[{title:"Total Events",value:(a==null?void 0:a.total)||0,icon:e.jsx(g,{}),color:"text-primary",iconBg:"bg-primary/20",description:"All events"},{title:"Published",value:((s=a==null?void 0:a.data)==null?void 0:s.filter(d=>d.is_published).length)||0,icon:e.jsx(ae,{}),color:"text-success",iconBg:"bg-success/20",description:"Live events"},{title:"Upcoming",value:((i=a==null?void 0:a.data)==null?void 0:i.filter(d=>N(d.event_date).isAfter(N())).length)||0,icon:e.jsx(te,{}),color:"text-secondary",iconBg:"bg-secondary/20",description:"Future events"},{title:"Total Registrations",value:((l=a==null?void 0:a.data)==null?void 0:l.reduce((d,W)=>d+(W.registrations_count||0),0))||0,icon:e.jsx(z,{}),color:"text-warning",iconBg:"bg-warning/20",description:"All participants"}]},[a]);n.useCallback(async()=>{_(!0);try{const s=await q.get(route("events.index"),{params:t});k(s.data.events)}catch(s){console.error("Error fetching events:",s),ee.error("Failed to load events")}finally{_(!1)}},[t]);const c=(s,i)=>{B(l=>({...l,[s]:i}))},Y=s=>{u.get(route("events.index"),{...t,page:s},{preserveState:!0})},C=()=>{u.get(route("events.create"))},K=s=>{u.get(route("events.show",s.id))},O=s=>{u.get(route("events.edit",s.id))},Q=s=>{u.get(route("events.registrations.index",s.id))},U=s=>{u.get(route("events.analytics",s.id))};return e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Event Management"}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"max-w-[1600px] mx-auto",children:e.jsx("div",{className:"p-6",children:e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(b,{className:"bg-content1/50 backdrop-blur-md border border-divider/30",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(ie,{className:"pb-0",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 p-6 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10 backdrop-blur-sm",children:e.jsx(g,{className:`${h?"w-6 h-6":"w-8 h-8"} text-primary`})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`${h?"text-xl":"text-2xl"} font-bold text-foreground`,children:"Event Management"}),e.jsx("p",{className:`${h?"text-xs":"text-sm"} text-default-500`,children:"Manage events, sub-events, and registrations"})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:S&&e.jsx(m,{color:"primary",variant:"shadow",startContent:e.jsx($,{className:"w-4 h-4"}),onPress:C,size:h?"sm":"md",className:"font-semibold",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Create Event"})})]})})}),e.jsxs(w,{className:"p-6",children:[e.jsx(Z,{stats:L,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ne,{label:"Search Events",placeholder:"Search by title or description...",value:t.search,onChange:s=>c("search",s.target.value),startContent:e.jsx(re,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:x(),className:"w-full",classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(oe,{variant:"bordered",radius:x(),className:"bg-white/5",children:e.jsxs(m,{isIconOnly:h,color:f?"primary":"default",onPress:()=>V(!f),className:f?"bg-purple-500/20":"bg-white/5",children:[e.jsx(le,{className:"w-4 h-4"}),!h&&e.jsx("span",{className:"ml-1",children:"Filters"})]})})})]}),f&&e.jsx(P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxs("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(y,{label:"Status",placeholder:"Select status...",selectedKeys:[t.status],onChange:s=>c("status",s.target.value),variant:"bordered",size:"sm",radius:x(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(o,{value:"all",children:"All Status"},"all"),e.jsx(o,{value:"published",children:"Published"},"published"),e.jsx(o,{value:"draft",children:"Draft"},"draft")]}),e.jsxs(y,{label:"Registration",placeholder:"Select registration status...",selectedKeys:[t.registration],onChange:s=>c("registration",s.target.value),variant:"bordered",size:"sm",radius:x(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(o,{value:"all",children:"All"},"all"),e.jsx(o,{value:"open",children:"Open"},"open"),e.jsx(o,{value:"closed",children:"Closed"},"closed")]}),e.jsxs(y,{label:"Timeline",placeholder:"Select timeline...",selectedKeys:[t.timeline],onChange:s=>c("timeline",s.target.value),variant:"bordered",size:"sm",radius:x(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(o,{value:"all",children:"All Events"},"all"),e.jsx(o,{value:"upcoming",children:"Upcoming"},"upcoming"),e.jsx(o,{value:"past",children:"Past"},"past")]})]}),(t.search||t.status!=="all"||t.registration!=="all"||t.timeline!=="all")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[t.search&&e.jsxs(p,{variant:"flat",color:"primary",size:"sm",onClose:()=>c("search",""),children:["Search: ",t.search]}),t.status!=="all"&&e.jsxs(p,{variant:"flat",color:"secondary",size:"sm",onClose:()=>c("status","all"),children:["Status: ",t.status]}),t.registration!=="all"&&e.jsxs(p,{variant:"flat",color:"warning",size:"sm",onClose:()=>c("registration","all"),children:["Registration: ",t.registration]}),t.timeline!=="all"&&e.jsxs(p,{variant:"flat",color:"success",size:"sm",onClose:()=>c("timeline","all"),children:["Timeline: ",t.timeline]})]})]})}),e.jsxs("div",{className:"min-h-96",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 font-semibold text-lg",children:[e.jsx(I,{className:"w-5 h-5"}),"Events Management"]}),T?e.jsx(b,{className:"bg-white/10 backdrop-blur-md border-white/20",children:e.jsxs(w,{className:"text-center py-12",children:[e.jsx(H,{size:"lg"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading events..."})]})}):((F=a==null?void 0:a.data)==null?void 0:F.length)>0?e.jsxs("div",{className:"space-y-4",children:[a.data.map(s=>{var i,l;return e.jsx(b,{className:"hover:shadow-lg transition-shadow",children:e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.banner_image&&e.jsx("div",{className:"w-full md:w-48 h-32 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:`/storage/${s.banner_image}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-default-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(g,{className:"w-4 h-4"}),N(s.event_date).format("MMM DD, YYYY")," at ",s.event_time]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"w-4 h-4"}),s.venue]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{color:s.is_published?"success":"warning",size:"sm",variant:"flat",children:s.is_published?"Published":"Draft"}),e.jsx(p,{color:s.is_registration_open?"primary":"default",size:"sm",variant:"flat",children:s.is_registration_open?"Open":"Closed"})]})]}),e.jsx("p",{className:"text-sm text-default-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"w-4 h-4"}),s.approved_registrations_count||0," / ",s.max_participants||"âˆž"," participants"]}),e.jsxs("span",{children:[((i=s.sub_events)==null?void 0:i.length)||0," sub-events"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{size:"sm",variant:"flat",onPress:()=>K(s),children:"View"}),((l=v.permissions)==null?void 0:l.includes("event.update"))&&e.jsx(m,{size:"sm",color:"primary",variant:"flat",onPress:()=>O(s),children:"Edit"}),D&&e.jsxs(m,{size:"sm",color:"secondary",variant:"flat",onPress:()=>Q(s),children:["Registrations (",s.registrations_count||0,")"]}),e.jsx(m,{size:"sm",variant:"flat",startContent:e.jsx(I,{className:"w-4 h-4"}),onPress:()=>U(s),children:"Analytics"})]})]})]})]})})},s.id)}),(a==null?void 0:a.last_page)>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(ce,{total:a.last_page,page:a.current_page,onChange:Y,showControls:!0,radius:x()})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Events Found"}),e.jsx("p",{className:"text-default-500 mb-4",children:"No events match your search criteria."}),S&&e.jsx(m,{color:"primary",startContent:e.jsx($,{className:"w-5 h-5"}),onPress:C,children:"Create Your First Event"})]})]})]})]})})})})})]})};de.layout=j=>e.jsx(X,{children:j});export{de as default};
