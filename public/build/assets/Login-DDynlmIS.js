import{r as a,u as q,S as H,j as e,Q as M,c as E,A as U,d as S,t as I,s as B,f as J}from"./app-D7Emqt7L.js";import{B as w,F as $,a as Q,b as G,t as Y,c as K}from"./react-toastify.esm-Dr4R_w2z.js";import{m as h}from"./proxy-Dz6ef5Fu.js";import{F as X}from"./CheckCircleIcon-DeMwk4ZO.js";import{F as ee}from"./ExclamationTriangleIcon-BNRs6txW.js";import{F as re}from"./DevicePhoneMobileIcon-Dy2teN7N.js";import{F as se}from"./EnvelopeIcon-SPfHBOr2.js";import{F as ae}from"./EyeSlashIcon-COlPNUTv.js";import{F as te}from"./EyeIcon-ByTzjLGV.js";import{F as ie}from"./LockClosedIcon-d0Mes1E7.js";import{c as oe}from"./chunk-XJ2YRSUP-B0eby2gR.js";import{F as ne}from"./ShieldCheckIcon-CUPquFrg.js";import{i as z}from"./chunk-SSA7SXE4-SzD2TXjA.js";import"./create-visual-element-K5FB3JuS.js";import"./useToggleState-BEq91bvp.js";function le({title:t,titleId:c,...i},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":c},i),t?a.createElement("title",{id:c},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const de=a.forwardRef(le),y={email:{maxLength:254,pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/},password:{minLength:6,maxLength:128}},P={success:8e3,error:12e3},me=t=>{if(!t||typeof t!="string")return{isValid:!1,message:"Email is required"};const c=t.trim();return c.length===0?{isValid:!1,message:"Email is required"}:c.length>y.email.maxLength?{isValid:!1,message:"Email address is too long"}:y.email.pattern.test(c)?{isValid:!0,message:null}:{isValid:!1,message:"Please enter a valid email address"}},ce=t=>!t||typeof t!="string"?{isValid:!1,message:"Password is required"}:t.length<y.password.minLength?{isValid:!1,message:`Password must be at least ${y.password.minLength} characters`}:t.length>y.password.maxLength?{isValid:!1,message:"Password is too long"}:{isValid:!0,message:null},ue=(t,c)=>{let i;return function(...p){const f=()=>{clearTimeout(i),t(...p)};clearTimeout(i),i=setTimeout(f,c)}},he=()=>{const[t,c]=a.useState({isMobile:!1,isTablet:!1,isDesktop:!1}),i=a.useCallback(()=>{const d=window.innerWidth,p={isMobile:d<=768,isTablet:d>768&&d<=1024,isDesktop:d>1024};c(f=>JSON.stringify(f)!==JSON.stringify(p)?p:f)},[]);return a.useEffect(()=>{i();const d=ue(i,150);return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[i]),t};function Re({status:t,canResetPassword:c,deviceBlocked:i,deviceMessage:d,blockedDeviceInfo:p}){console.log("Login component props:",{status:t,canResetPassword:c,deviceBlocked:i,deviceMessage:d,blockedDeviceInfo:p});const{themeSettings:f}=q(),V=()=>{var o;const r=(o=f.layout)==null?void 0:o.borderRadius;if(!r)return"lg";const s=parseInt(r);return s===0?"none":s<=4?"sm":s<=8?"md":s<=16?"lg":"full"},{isMobile:v}=he(),N=a.useRef(null),A=a.useRef(null),j=a.useRef(null),[u,C]=a.useState({email:"",password:"",remember:!1}),[n,g]=a.useState({isPasswordVisible:!1,isSubmitting:!1,isLoaded:!1,showSuccessAlert:!!t,showDeviceAlert:!!i}),[l,F]=a.useState({email:null,password:null,hasAttemptedSubmit:!1}),m=a.useMemo(()=>{const r=me(u.email),s=ce(u.password);return{email:r,password:s,isFormValid:r.isValid&&s.isValid&&u.email.trim()!==""&&u.password!==""}},[u.email,u.password]),k=a.useCallback((r,s)=>{C(o=>({...o,[r]:s})),l.hasAttemptedSubmit&&l[r]&&F(o=>({...o,[r]:null}))},[l.hasAttemptedSubmit]),W=a.useCallback(()=>{g(r=>({...r,isPasswordVisible:!r.isPasswordVisible}))},[]),O=a.useCallback(r=>{C(s=>({...s,remember:r}))},[]),x=a.useCallback(r=>{g(s=>({...s,[`show${r}Alert`]:!1}))},[]),L=a.useCallback(()=>{!m.email.isValid&&N.current?N.current.focus():!m.password.isValid&&A.current&&A.current.focus()},[m.email.isValid,m.password.isValid]),_=a.useCallback(async r=>{if(r.preventDefault(),j.current&&clearTimeout(j.current),!n.isSubmitting){if(F(s=>({...s,hasAttemptedSubmit:!0})),!m.isFormValid){F(s=>({...s,email:m.email.message,password:m.password.message})),setTimeout(L,0);return}g(s=>({...s,isSubmitting:!0}));try{const s={email:u.email.trim(),password:u.password,remember:u.remember};H.post(route("login"),s,{preserveState:!1,preserveScroll:!1,onSuccess:()=>{w.success("Login successful! Redirecting...",{style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-success)",color:"var(--theme-success-foreground)"}})},onError:o=>{console.error("Login validation errors:",o);const R={...l};o.email&&(R.email=o.email),o.password&&(R.password=o.password),F(R),Object.entries(o).forEach(([D,T])=>{D!=="email"&&D!=="password"&&typeof T=="string"&&w.error(T,{style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-danger)",color:"var(--theme-danger-foreground)"}})})},onFinish:()=>{g(o=>({...o,isSubmitting:!1})),C(o=>({...o,password:""}))}})}catch(s){console.error("Login submission error:",s),w.error("An unexpected error occurred. Please try again.",{style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-danger)",color:"var(--theme-danger-foreground)"}}),g(o=>({...o,isSubmitting:!1}))}}},[n.isSubmitting,m.isFormValid,u,m.email.message,m.password.message,L,l]);a.useEffect(()=>{g(r=>({...r,isLoaded:!0})),setTimeout(()=>{typeof window<"u"&&window.document&&console.log("Login component mounted, theme background should be applied")},100)},[]),a.useEffect(()=>{if(t){g(s=>({...s,showSuccessAlert:!0})),w.success(t);const r=setTimeout(()=>{x("Success")},P.success);return()=>clearTimeout(r)}},[t,x]),a.useEffect(()=>{if(console.log("Device blocking useEffect triggered:",{deviceBlocked:i,deviceMessage:d}),i){console.log("Setting showDeviceAlert to true"),g(s=>({...s,showDeviceAlert:!0})),w.error(d||"Device access blocked");const r=setTimeout(()=>{x("Device")},P.error);return()=>clearTimeout(r)}},[i,d,x]),a.useEffect(()=>{console.log("Initializing device alert state:",{deviceBlocked:i}),i&&(console.log("Setting initial showDeviceAlert to true"),g(r=>({...r,showDeviceAlert:!0})))},[i]),a.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const Z={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.6,staggerChildren:.1}}},b={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:[.4,0,.2,1]}}};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Sign In"}),e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative",style:{fontFamily:"var(--fontFamily, 'Inter')",transform:"scale(var(--scale, 1))",transformOrigin:"center center"},children:[e.jsx(h.div,{className:"absolute top-20 left-20 w-20 h-20 rounded-full hidden lg:block",style:{background:`linear-gradient(135deg, 
                            color-mix(in srgb, var(--theme-primary, #006FEE) 15%, transparent),
                            color-mix(in srgb, var(--theme-secondary, #7C3AED) 12%, transparent)
                        )`,backdropFilter:"blur(20px)",border:"1px solid color-mix(in srgb, var(--theme-primary, #006FEE) 20%, transparent)",transform:"scale(var(--scale, 1))"},animate:{y:[-10,10,-10],rotate:[0,180,360],scale:[1,1.1,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),e.jsx(h.div,{className:"absolute bottom-20 right-20 w-16 h-16 rounded-full hidden lg:block",style:{background:`linear-gradient(135deg,
                            color-mix(in srgb, var(--theme-secondary, #7C3AED) 18%, transparent),
                            color-mix(in srgb, var(--theme-primary, #006FEE) 12%, transparent)
                        )`,backdropFilter:"blur(20px)",border:"1px solid color-mix(in srgb, var(--theme-secondary, #7C3AED) 20%, transparent)",transform:"scale(var(--scale, 1))"},animate:{x:[-8,8,-8],scale:[1,1.1,1],rotate:[0,-180,0]},transition:{duration:15,repeat:1/0,ease:"easeInOut",delay:5}}),e.jsx(h.div,{variants:Z,initial:"hidden",animate:n.isLoaded?"visible":"hidden",className:`w-full ${v?"max-w-sm":"max-w-md"}`,children:e.jsx(E,{className:"backdrop-blur-xl border-none shadow-2xl",style:{background:`linear-gradient(to bottom right, 
                                color-mix(in srgb, var(--theme-content1, #FAFAFA) 98%, transparent), 
                                color-mix(in srgb, var(--theme-content2, #F4F4F5) 95%, transparent)
                            )`,borderColor:"color-mix(in srgb, var(--theme-divider, #E4E4E7) 50%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderStyle:"solid",borderRadius:`var(--borderRadius, ${v?"20px":"24px"})`,fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",boxShadow:`
                                0 20px 40px color-mix(in srgb, var(--theme-shadow, #000000) 15%, transparent),
                                0 8px 16px color-mix(in srgb, var(--theme-shadow, #000000) 10%, transparent),
                                inset 0 1px 0 color-mix(in srgb, var(--theme-background, #FFFFFF) 50%, transparent)
                            `},children:e.jsxs("div",{className:`${v?"p-6":"p-8"}`,children:[e.jsxs(h.div,{variants:b,className:"text-center mb-8",children:[e.jsx(h.div,{className:"flex justify-center mb-6",whileHover:{scale:1.05},transition:{type:"spring",stiffness:400,damping:30},children:e.jsx("img",{src:"/assets/images/logo.png",alt:"Logo",className:`${v?"w-40 h-40":"w-52 h-52"} object-contain`,onError:r=>{r.target.style.display="none",r.target.nextSibling.style.display="flex"}})}),e.jsx("h1",{className:`${v?"text-2xl":"text-3xl"} font-bold mb-2`,style:{color:"var(--theme-foreground, #11181C)",background:`linear-gradient(135deg, 
                                            var(--theme-foreground, #11181C), 
                                            color-mix(in srgb, var(--theme-foreground, #11181C) 80%, var(--theme-primary, #006FEE))
                                        )`,backgroundClip:"text",WebkitBackgroundClip:"text"},children:"Welcome Back"})]}),e.jsxs(U,{children:[t&&n.showSuccessAlert&&e.jsx(h.div,{variants:b,initial:"hidden",animate:"visible",exit:"hidden",className:"mb-6",children:e.jsx(E,{className:"border-none",style:{background:"color-mix(in srgb, var(--theme-success, #22C55E) 12%, transparent)",borderColor:"color-mix(in srgb, var(--theme-success, #22C55E) 30%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderStyle:"solid",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"w-5 h-5 flex-shrink-0",style:{color:"var(--theme-success, #22C55E)"}}),e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--theme-success-foreground, #166534)"},children:t}),e.jsx(S,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>x("Success"),className:"ml-auto",children:e.jsx($,{className:"w-4 h-4"})})]})})})}),(console.log("Rendering device alert check:",{deviceBlocked:i,showDeviceAlert:n.showDeviceAlert}),null),i&&n.showDeviceAlert&&e.jsx(h.div,{variants:b,initial:"hidden",animate:"visible",exit:"hidden",className:"mb-6",children:e.jsx(E,{className:"border-none",style:{background:"color-mix(in srgb, var(--theme-danger, #EF4444) 12%, transparent)",borderColor:"color-mix(in srgb, var(--theme-danger, #EF4444) 30%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderStyle:"solid",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ee,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:"var(--theme-danger, #EF4444)"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold mb-1",style:{color:"var(--theme-danger-foreground, #991B1B)"},children:"Device Access Blocked"}),e.jsx("p",{className:"text-sm mb-3",style:{color:"var(--theme-danger-foreground, #991B1B)80"},children:d||"You can only be logged in from one device at a time."}),p&&e.jsx(E,{className:"mt-3",style:{background:"color-mix(in srgb, var(--theme-danger, #EF4444) 8%, transparent)",borderColor:"color-mix(in srgb, var(--theme-danger, #EF4444) 20%, transparent)",borderWidth:"var(--borderWidth, 1px)",borderStyle:"solid",borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-xs font-medium mb-2",style:{color:"var(--theme-danger-foreground, #991B1B)"},children:"Currently active device:"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-3 h-3"}),e.jsx("span",{children:p.device_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-3 h-3"}),e.jsxs("span",{children:[p.browser," ",p.browser_version]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-3 h-3"}),e.jsx("span",{children:p.platform})]})]})]})})]}),e.jsx(S,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>x("Device"),children:e.jsx($,{className:"w-4 h-4"})})]})})})})]}),e.jsxs("form",{onSubmit:_,className:"space-y-6",noValidate:!0,children:[e.jsx(h.div,{variants:b,children:e.jsx(z,{ref:N,type:"email",label:"Email Address",placeholder:"Enter your email",value:u.email,onChange:r=>k("email",r.target.value),isInvalid:!!(l.email||l.hasAttemptedSubmit&&!m.email.isValid),errorMessage:l.email||l.hasAttemptedSubmit&&m.email.message,autoComplete:"username",autoFocus:!0,isRequired:!0,size:"lg",radius:V(),variant:"bordered",color:l.email||l.hasAttemptedSubmit&&!m.email.isValid?"danger":"primary",startContent:e.jsx(se,{className:"w-4 h-4",style:{color:"var(--theme-foreground, #11181C)60"}})})}),e.jsx(h.div,{variants:b,children:e.jsx(z,{ref:A,type:n.isPasswordVisible?"text":"password",label:"Password",placeholder:"Enter your password",value:u.password,onChange:r=>k("password",r.target.value),isInvalid:!!(l.password||l.hasAttemptedSubmit&&!m.password.isValid),errorMessage:l.password||l.hasAttemptedSubmit&&m.password.message,autoComplete:"current-password",isRequired:!0,size:"lg",radius:V(),variant:"bordered",color:l.password||l.hasAttemptedSubmit&&!m.password.isValid?"danger":"primary",startContent:e.jsx(ie,{className:"w-4 h-4",style:{color:"var(--theme-foreground, #11181C)60"}}),endContent:e.jsx(Y,{content:n.isPasswordVisible?"Hide password":"Show password",children:e.jsx(S,{isIconOnly:!0,variant:"light",size:"sm",onPress:W,"aria-label":n.isPasswordVisible?"Hide password":"Show password",children:n.isPasswordVisible?e.jsx(ae,{className:"w-4 h-4 text-foreground/60"}):e.jsx(te,{className:"w-4 h-4 text-foreground/60"})})})})}),e.jsxs(h.div,{variants:b,className:"flex items-center justify-between",children:[e.jsx(oe,{isSelected:u.remember,onValueChange:O,size:"sm",color:"primary",style:{"--checkbox-color":"var(--theme-primary, #006FEE)","--checkbox-border":"var(--theme-divider, #E4E4E7)"},children:e.jsx("span",{className:"text-sm",style:{color:"var(--theme-foreground, #11181C)80"},children:"Remember me"})}),c&&e.jsx(I,{href:route("password.request"),className:"text-sm font-medium transition-colors duration-200 hover:underline",style:{color:"var(--theme-primary, #006FEE)"},children:"Forgot password?"})]}),e.jsx(h.div,{variants:b,children:e.jsx(S,{type:"submit",color:"primary",size:"lg",className:"w-full font-semibold transition-all duration-300",isLoading:n.isSubmitting,disabled:n.isSubmitting,spinner:e.jsx(B,{size:"sm",color:"white"}),endContent:!n.isSubmitting&&e.jsx(de,{className:"w-4 h-4"}),style:{background:n.isSubmitting?"color-mix(in srgb, var(--theme-primary, #006FEE) 70%, transparent)":`linear-gradient(135deg, 
                                                    var(--theme-primary, #006FEE), 
                                                    color-mix(in srgb, var(--theme-primary, #006FEE) 90%, var(--theme-secondary, #7C3AED))
                                                  )`,boxShadow:n.isSubmitting?"none":"0 8px 24px color-mix(in srgb, var(--theme-primary, #006FEE) 30%, transparent)",transform:n.isSubmitting?"scale(0.98)":"scale(var(--scale, 1))",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',borderWidth:"var(--borderWidth, 2px)",borderStyle:"solid",borderColor:"transparent"},children:n.isSubmitting?"Signing in...":"Sign In"})}),e.jsx(J,{className:"my-6",style:{borderColor:"color-mix(in srgb, var(--theme-divider, #E4E4E7) 60%, transparent)"}}),e.jsx(h.div,{variants:b,className:"text-center",children:e.jsxs("p",{className:"text-sm",style:{color:"var(--theme-foreground, #11181C)70"},children:["Don't have an account?"," ",e.jsx(I,{href:route("register"),className:"font-semibold transition-colors duration-200 hover:underline",style:{color:"var(--theme-primary, #006FEE)"},children:"Sign up here"})]})}),e.jsxs(h.div,{variants:b,className:"pt-4",style:{borderTop:"1px solid color-mix(in srgb, var(--theme-divider, #E4E4E7) 50%, transparent)"},children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-3",children:e.jsx(K,{size:"sm",variant:"flat",color:"success",startContent:e.jsx(ne,{className:"w-3 h-3"}),children:"Secure Login"})}),e.jsx("p",{className:"text-xs text-center opacity-60",style:{color:"var(--theme-foreground, #11181C)"},children:"© 2025 Emam Hosen. All rights reserved."})]})]})]})})})]})]})}export{Re as default};
