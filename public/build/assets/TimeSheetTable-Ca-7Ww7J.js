import{R as qe,r,j as e,t as Qe,u as ve,a as X,g as _e,e as Ce,d as ke}from"./app-B8QYX9Px.js";import{B as a,T as i,G as Xe}from"./logo-BoX8pchB.js";import{d as h}from"./dayjs.min-BHuFkWn-.js";import{P as Ze}from"./PageHeader-XJFWVm9P.js";import{F as I}from"./CheckCircleIcon-B90VRiLI.js";import{F as Me}from"./XCircleIcon-tcb-l3UC.js";import{i as es,g as re,p as ss,q as ts,F as Z,a as u,u as Se,s as Pe,m as S,e as as}from"./App-DkF9RL3Y.js";import{F as E}from"./ExclamationTriangleIcon-BW32ASrn.js";import{B as rs}from"./Button-CpKhJqSS.js";import{F as ns}from"./UserIcon-D9_80nkG.js";import{p as Le}from"./chunk-EAPQ7RWQ-OKuZgSIq.js";import{G as os}from"./Grow-DP1KP2ex.js";import{C as ls}from"./CardHeader-Bhq2T4qN.js";import{F as Ye}from"./DocumentArrowDownIcon-JzXafcAn.js";import{C as $e}from"./CardContent-B5B4Qw18.js";import{T as Fe}from"./TextField-BAa6JqDO.js";import{I as Re}from"./InputAdornment-Cc_eLtv_.js";import{l as cs}from"./chunk-JOT4BT4P-C9GtIuSp.js";import{s as Te}from"./chunk-TLYTI3QM-rNm1AEt9.js";import{t as Ae,a as Ue,b as Ee,c as Ie,d as De,e as v}from"./chunk-F3UDT23P-Hrzl6yhk.js";import{u as is}from"./chunk-S574QCAN-CoPQlLbo.js";const ds=qe.memo(({absentUsers:P,selectedDate:o,getUserLeave:L})=>{const[_,k]=r.useState(5),[b,w]=r.useState(""),d=r.useMemo(()=>{if(!b.trim())return P;const l=b.toLowerCase();return P.filter(c=>{var z,B,H,p;const N=((z=c.name)==null?void 0:z.toLowerCase())||"",C=((B=c.employee_id)==null?void 0:B.toString().toLowerCase())||"",Y=((H=c.email)==null?void 0:H.toLowerCase())||"",$=((p=c.phone)==null?void 0:p.toString().toLowerCase())||"";return N.includes(l)||C.includes(l)||Y.includes(l)||$.includes(l)})},[P,b]),R=()=>{k(l=>l+5)},T=l=>{w(l.target.value),k(5)},D=l=>{switch(l==null?void 0:l.toLowerCase()){case"approved":return e.jsx(I,{className:"w-4 h-4 text-success"});case"rejected":return e.jsx(Me,{className:"w-4 h-4 text-danger"});default:return e.jsx(u,{className:"w-4 h-4 text-warning"})}},ee=d.length;return P.length===0?e.jsxs(a,{className:"h-full",children:[e.jsx(Ze,{title:"Perfect Attendance!",subtitle:`No employees are absent on ${h(o).format("MMMM D, YYYY")}`,icon:e.jsx(I,{className:"w-6 h-6"}),variant:"gradient",actionButtons:[{label:"0",variant:"flat",color:"success",icon:e.jsx(I,{className:"w-4 h-4"}),className:"bg-green-500/10 text-green-500 border-green-500/20"}]}),e.jsxs(a,{role:"region","aria-label":"No absent employees today",className:"text-center py-12 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg h-96 flex flex-col items-center justify-center",children:[e.jsx(I,{className:"w-12 h-12 text-success mx-auto mb-4"}),e.jsx(i,{variant:"body2",color:"success",className:"mb-2 text-sm font-medium",children:"Perfect Attendance!"}),e.jsx(i,{variant:"caption",color:"textSecondary",className:"text-xs",children:"No employees are absent today."}),e.jsx(i,{variant:"caption",color:"textSecondary",className:"mt-1 block text-xs",children:"All employees are either present or on approved leave."})]})]}):e.jsxs(a,{className:"h-full",children:[e.jsx(a,{className:"mb-4 flex items-center justify-between",children:e.jsx(a,{className:"mb-4",children:e.jsxs(i,{variant:"h6",className:"font-semibold text-red-600 flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5"}),"Absent Employees (",ee,")"]})})}),e.jsx(a,{className:"mb-3 m-2",children:e.jsx(es,{type:"text",placeholder:"Search absent employees...",value:b,onChange:T,startContent:e.jsx(re,{className:"w-4 h-4 text-default-400"}),variant:"bordered","aria-label":"Search absent employees",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 h-10",input:"text-sm"}})}),b&&e.jsx(a,{className:"mb-2 ",children:e.jsxs(i,{variant:"caption",color:"textSecondary",className:"text-xs",children:[d.length," of ",P.length," employees found"]})}),b&&d.length===0&&e.jsxs(a,{className:"text-center py-8 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg",children:[e.jsx(re,{className:"w-8 h-8 text-default-300 mx-auto mb-2"}),e.jsxs(i,{variant:"body2",color:"textSecondary",className:"text-sm",children:['No employees found matching "',b,'"']})]}),e.jsxs(a,{role:"region","aria-label":"Absent employees list",className:"overflow-y-auto max-h-[520px]",children:[d.slice(0,_).map(l=>{var N,C;const c=L(l.id);return e.jsx(ss,{in:!0,timeout:"auto",children:e.jsx("div",{className:"p-3 m-2 bg-white/10 backdrop-blur-md border border-white/20 hover:bg-white/15 transition-all duration-200 rounded-lg",children:e.jsxs(a,{className:"flex items-start justify-between",children:[e.jsxs(a,{className:"flex items-center gap-2 flex-1",children:[e.jsx(ts,{src:l.profile_image_url||l.profile_image,name:l.name,isBordered:!0,size:"sm",showFallback:!0}),e.jsxs(a,{className:"flex-1 min-w-0",children:["                                            ",e.jsx(i,{variant:"body2",fontWeight:"medium",className:"truncate text-sm",children:l.name}),l.employee_id&&e.jsxs(i,{variant:"caption",color:"textSecondary",className:"block text-xs",children:["ID: ",l.employee_id]}),c?e.jsxs(a,{className:"flex flex-col gap-1 mt-1",children:[e.jsxs(i,{variant:"caption",color:"textSecondary",className:"flex items-center gap-1 text-xs",children:[e.jsx(Z,{className:"w-3 h-3"}),c.from_date===c.to_date?c.from_date:`${c.from_date} - ${c.to_date}`]}),e.jsxs(i,{variant:"caption",color:"primary",className:"flex items-center gap-1 text-xs",children:[D(c.status),c.leave_type," Leave"]})]}):e.jsxs(i,{variant:"caption",color:"error",className:"flex items-center gap-1 mt-1 text-xs",children:[e.jsx(E,{className:"w-3 h-3"}),"Absent without leave"]})]})]}),c&&e.jsx("div",{className:"bg-white/20 backdrop-blur-md border border-white/30 rounded-md px-1.5 py-0.5 ml-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[D(c.status),e.jsx(i,{variant:"caption",className:`font-semibold text-xs ${((N=c.status)==null?void 0:N.toLowerCase())==="approved"?"text-green-600":((C=c.status)==null?void 0:C.toLowerCase())==="rejected"?"text-red-600":"text-orange-600"}`,children:c.status})]})})]})})},l.id)}),_<d.length&&e.jsx(a,{className:"text-center mt-4 pb-4",children:e.jsxs(rs,{variant:"outlined",onClick:R,startIcon:e.jsx(Qe,{className:"w-4 h-4"}),size:"small",color:"warning",fullWidth:!0,children:["Show More (",d.length-_," remaining)"]})})]})]})}),As=({handleDateChange:P,selectedDate:o,updateTimeSheet:L,externalFilterData:_,externalEmployee:k})=>{var be,je,we;const{auth:b}=ve().props,{url:w}=ve(),d=Se("(min-width: 1025px)"),R=Se("(min-width: 641px) and (max-width: 1024px)"),[T,D]=r.useState([]),[ee,l]=r.useState([]),[c,N]=r.useState([]),[C,Y]=r.useState(""),[$,z]=r.useState(0),[B,H]=r.useState(0),[p,ms]=r.useState(10),[M,se]=r.useState(1),[y,ne]=r.useState(k||""),[G,F]=r.useState(!1),[K,hs]=r.useState(0),[xs,oe]=r.useState(null),[le,us]=r.useState(!0),[te,ce]=r.useState(new Date),[J,A]=r.useState(""),ie=r.useRef(null),x=r.useRef({currentMonth:h().format("YYYY-MM"),employee:k||"",filterData:_||{currentMonth:h().format("YYYY-MM")},selectedDate:o,perPage:10,updateTimeSheet:L,refreshKey:0,currentPage:1}),[f,de]=r.useState(_||{currentMonth:h().format("YYYY-MM")}),V=r.useCallback(async()=>{try{return F(!1),await he(o,M,p,y,f,!0),w!=="/attendance-employee"&&await xe(o,y),ce(new Date),!0}catch(s){return console.error("Error refreshing timesheet:",s),!1}finally{F(!0)}},[o,M,p,y,f,w]),ae=r.useCallback(async()=>{if(o)try{const s=route("check-timesheet-updates",{date:h(o).format("YYYY-MM-DD"),month:f.currentMonth}),n=await fetch(s);if(!n.ok){const j=await n.json().catch(()=>({}));throw new Error(`HTTP ${n.status}: ${j.message||"Failed to check for updates"}`)}const t=await n.json();t.success&&t.last_updated!==ie.current&&t.last_updated&&(ie.current=t.last_updated,await V(),oe(new Date)),ce(new Date)}catch(s){console.error("Error checking for timesheet updates:",s)}},[o,f.currentMonth,V]),me=r.useMemo(()=>te?te.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):null,[te]),he=async(s,n,t,j,m,q=!1)=>{var O,W;if(!s){F(!0),Y("No date selected");return}const Q=w!=="/attendance-employee"?route("admin.getPresentUsersForDate"):route("getCurrentUserAttendanceForDate");try{F(!1),Y("");const g=await X.get(Q,{params:{page:n,perPage:t,employee:j,date:h(s).format("YYYY-MM-DD"),currentYear:m!=null&&m.currentMonth?h(m.currentMonth).year():"",currentMonth:m!=null&&m.currentMonth?h(m.currentMonth).format("MM"):"",_t:q?Date.now():void 0}});g.status===200?(D(g.data.attendances||[]),z(g.data.total||0),H(g.data.last_page||1),se(g.data.current_page||1),oe(new Date),Y("")):Y(`Unexpected response: ${g.status}`)}catch(g){console.error("Error fetching attendance data:",g),Y(((W=(O=g.response)==null?void 0:O.data)==null?void 0:W.message)||"An error occurred while retrieving attendance data."),D([]),z(0)}finally{F(!0)}},xe=async(s,n)=>{if(w==="/attendance-employee"){N([]),l([]);return}if(!s){N([]),l([]);return}try{const t=await X.get(route("admin.getAbsentUsersForDate"),{params:{date:h(s).format("YYYY-MM-DD"),employee:n||"",_t:Date.now()}});t.status===200?(N(t.data.absent_users||[]),l(t.data.leaves||[])):(console.warn("Unexpected response getting absent users:",t.status),N([]),l([]))}catch(t){console.error("Error fetching absent users:",t),N([]),l([])}},ue=s=>{se(s)};r.useCallback((s,n)=>{de(t=>({...t,[s]:n}))},[]);const ze=s=>ee.find(n=>String(n.user_id)===String(s)),pe=(s,n)=>{if(!s)return null;try{let t;if(typeof s=="string"){const j=h(n).format("YYYY-MM-DD");if(s.match(/^\d{2}:\d{2}:\d{2}$/)){const m=`${j}T${s}`;t=new Date(m)}else if(s.includes("T")||s.includes(" "))t=new Date(s);else if(s.match(/^\d{2}:\d{2}$/)){const m=`${j}T${s}:00`;t=new Date(m)}else t=new Date(`${j}T${s}`)}else t=new Date(s);return isNaN(t.getTime())?(console.warn("Invalid time data:",s),"Invalid time"):t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(t){return console.warn("Error formatting time:",{timeString:s,date:n,error:t}),"Invalid time"}},U=((be=b.permissions)==null?void 0:be.includes("attendance.view"))||!1,Be=((je=b.permissions)==null?void 0:je.includes("attendance.manage"))||!1,Oe=((we=b.permissions)==null?void 0:we.includes("attendance.export"))||Be||!1;r.useMemo(()=>c,[c]);const fe=[...!U||w==="/attendance-employee"?[{name:"Date",uid:"date",icon:Z,ariaLabel:"Attendance date"}]:[],...U&&w!=="/attendance-employee"?[{name:"Employee",uid:"employee",icon:ns,ariaLabel:"Employee name and information"}]:[],{name:"Clock In",uid:"clockin_time",icon:u,ariaLabel:"First punch in time"},{name:"Clock Out",uid:"clockout_time",icon:u,ariaLabel:"Last punch out time"},{name:"Work Hours",uid:"production_time",icon:u,ariaLabel:"Total working hours"},{name:"Punches",uid:"punch_details",icon:u,ariaLabel:"Number of time punches recorded"}],ge=(s,n)=>{var m,q,Q,O,W,g,Ne;const t="text-xs sm:text-sm md:text-base whitespace-nowrap",j=h(s.date).isSame(h(),"day");switch(n){case"date":return e.jsx(v,{className:`${t}`,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-primary shrink-0"}),e.jsx(a,{className:"flex flex-col",children:e.jsx("span",{children:h(s.date).format("MMM D, YYYY")})})]})});case"employee":return e.jsx(v,{className:"whitespace-nowrap",children:e.jsx(is,{avatarProps:{radius:"lg",size:"sm",src:((m=s.user)==null?void 0:m.profile_image_url)||((q=s.user)==null?void 0:q.profile_image),showFallback:!0,name:((Q=s.user)==null?void 0:Q.name)||"Unnamed User",isBordered:!0},description:(O=s.user)!=null&&O.phone?e.jsx(cs,{href:`tel:${(W=s.user)==null?void 0:W.phone}`,size:"sm",className:"text-xs text-blue-500 hover:underline",children:(g=s.user)==null?void 0:g.phone}):e.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-400 italic",children:[e.jsx(PhoneOff,{className:"w-3 h-3"})," No Phone"]}),name:e.jsx("span",{className:"text-sm font-medium",children:((Ne=s.user)==null?void 0:Ne.name)||"Unnamed User"})})});case"clockin_time":return e.jsx(v,{className:`${t}`,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4 text-success"}),e.jsxs(a,{className:"flex flex-col",children:[e.jsx("span",{children:s.punchin_time?pe(s.punchin_time,s.date)||"Invalid time":"Not clocked in"}),s.punchin_time&&e.jsx("span",{className:"text-xs text-default-500",children:"First punch"})]})]})});case"clockout_time":return e.jsx(v,{className:`${t}`,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4 text-danger"}),e.jsxs(a,{className:"flex flex-col",children:[e.jsx("span",{children:s.punchout_time?pe(s.punchout_time,s.date)||"Invalid time":s.punchin_time?j?"Currently working":"Missing punch-out":"Not started"}),s.punchout_time&&e.jsx("span",{className:"text-xs text-default-500",children:"Last punch"})]})]})});case"production_time":const Ge=s.total_work_minutes>0,ye=s.has_incomplete_punch,Ke=s.punchin_time&&!s.punchout_time&&j;if(Ge){const Je=Math.floor(s.total_work_minutes/60),Ve=Math.floor(s.total_work_minutes%60);return e.jsx(v,{className:`${t}`,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(u,{className:`w-4 h-4 ${ye?"text-warning":"text-primary"}`}),e.jsxs(a,{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:`${Je}h ${Ve}m`}),e.jsx("span",{className:"text-xs text-default-500",children:ye?"Partial data - in progress":"Total worked time"})]})]})})}else{if(Ke)return e.jsx(v,{className:`${t}`,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4 text-warning"}),e.jsxs(a,{className:"flex flex-col",children:[e.jsx("span",{className:"text-warning",children:"In Progress"}),e.jsx("span",{className:"text-xs text-default-500",children:"Currently working"})]})]})});if(s.punchin_time&&!s.punchout_time&&!j)return e.jsx(v,{className:`${t}`,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-danger"}),e.jsxs(a,{className:"flex flex-col",children:[e.jsx("span",{className:"text-danger",children:"Incomplete punch"}),e.jsx("span",{className:"text-xs text-default-500",children:"Missing punch out"})]})]})})}return e.jsx(v,{className:`${t}`,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-warning"}),e.jsxs(a,{className:"flex flex-col",children:[e.jsx("span",{className:"text-warning",children:"No work time"}),e.jsx("span",{className:"text-xs text-default-500",children:"No attendance"})]})]})});case"punch_details":return e.jsx(v,{className:`${t}`,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4 text-default-400"}),e.jsxs(a,{className:"flex flex-col",children:[e.jsxs("span",{className:"text-xs font-medium",children:[s.punch_count||0," punch",(s.punch_count||0)!==1?"es":""]}),s.complete_punches!==s.punch_count&&e.jsxs("span",{className:"text-xs text-warning",children:[s.complete_punches," complete"]}),s.complete_punches===s.punch_count&&s.punch_count>0&&e.jsx("span",{className:"text-xs text-success",children:"All complete"})]})]})});default:return e.jsx(v,{className:`${t}`,children:"N/A"})}},We=r.useCallback(async()=>{A("excel");try{const s=await X.get(route("attendance.exportExcel"),{params:{date:o},responseType:"blob"}),n=window.URL.createObjectURL(new Blob([s.data])),t=document.createElement("a");t.href=n,t.setAttribute("download",`Daily_Timesheet_${h(o).format("YYYY_MM_DD")}.xlsx`),document.body.appendChild(t),t.click(),t.remove(),window.URL.revokeObjectURL(n),A("")}catch(s){console.error("Error downloading Excel:",s),alert("Failed to download attendance excel."),A("")}},[o]),He=r.useCallback(async()=>{A("pdf");try{const s=await X.get(route("attendance.exportPdf"),{params:{date:o},responseType:"blob"}),n=window.URL.createObjectURL(new Blob([s.data])),t=document.createElement("a");t.href=n,t.setAttribute("download",`Daily_Timesheet_${h(o).format("YYYY_MM_DD")}.pdf`),document.body.appendChild(t),t.click(),t.remove(),window.URL.revokeObjectURL(n),A("")}catch(s){console.error("Error downloading PDF:",s),alert("Failed to download attendance pdf."),A("")}},[o]);return r.useEffect(()=>{if(o){if((y!==x.current.employee||f!==x.current.filterData||o!==x.current.selectedDate||p!==x.current.perPage||L!==x.current.updateTimeSheet||K!==x.current.refreshKey)&&M!==1){x.current={...x.current,employee:y,filterData:f,selectedDate:o,perPage:p,updateTimeSheet:L,refreshKey:K},se(1);return}(async()=>{F(!1);try{await Promise.all([he(o,M,p,y,f),w!=="/attendance-employee"?xe(o,y):Promise.resolve()])}catch(t){console.error("Error updating attendance data:",t)}finally{F(!0)}})(),x.current={...x.current,employee:y,filterData:f,selectedDate:o,perPage:p,updateTimeSheet:L,refreshKey:K,currentPage:M}}},[o,M,p,y,f,L,K]),r.useEffect(()=>{_&&de(_)},[_]),r.useEffect(()=>{k!==void 0&&ne(k)},[k]),r.useEffect(()=>{JSON.stringify(f)!==JSON.stringify(x.current.filterData)&&(x.current={...x.current,filterData:{...f}},V())},[f,V]),r.useEffect(()=>{if(!le||!o)return;ae();const s=setInterval(ae,5e3);return()=>{clearInterval(s)}},[le,ae,o]),w==="/attendance-employee"?e.jsx(a,{role:"region","aria-label":"Attendance data table",className:"w-full",children:C?e.jsx(_e,{className:"p-4 bg-danger-50 border-danger-200",children:e.jsxs(a,{className:"flex items-center gap-3",children:[e.jsx(E,{className:"w-5 h-5 text-danger"}),e.jsx(i,{color:"error",variant:"body1",children:C})]})}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{orientation:"horizontal",className:"overflow-y-hidden",children:e.jsx(Te,{className:"rounded-lg",isLoaded:G,children:e.jsxs(Ae,{selectionMode:"multiple",selectionBehavior:"toggle",isCompact:!0,removeWrapper:!0,"aria-label":"Employee attendance timesheet table",isHeaderSticky:!0,classNames:{base:"max-h-[520px] overflow-auto",table:"min-h-[200px] w-full",thead:"z-10",tbody:"overflow-y-auto"},children:[e.jsx(Ue,{columns:fe,children:s=>e.jsx(Ee,{align:"start","aria-label":s.ariaLabel||s.name,children:e.jsxs(a,{className:"flex items-center gap-2",children:[s.icon&&e.jsx(s.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]})},s.uid)}),e.jsx(Ie,{items:T,emptyContent:e.jsxs(a,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(u,{className:"w-16 h-16 text-default-300 mb-4"}),e.jsx(i,{variant:"h6",className:"mb-2",children:"No Attendance Records"}),e.jsx(i,{variant:"body2",color:"textSecondary",children:"No attendance records found for the selected date"})]}),children:s=>e.jsx(De,{children:n=>ge(s,n)},s.id||s.user_id)})]})})}),$>p&&e.jsx(a,{className:"py-4 flex justify-center",children:e.jsx(Le,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:M,total:B,onChange:ue,"aria-label":"Timesheet pagination"})})]})}):e.jsx(a,{sx:{display:"flex",justifyContent:"center",p:2},component:"main",role:"main","aria-label":"Timesheet Management",children:e.jsx(S,{container:!0,spacing:2,children:e.jsx(S,{item:!0,xs:12,children:e.jsx(os,{in:!0,timeout:500,children:e.jsxs(Xe,{children:[e.jsx(ls,{className:"bg-linear-to-br from-slate-50/50 to-white/30 backdrop-blur-xs border-b border-white/20",title:e.jsx("div",{className:`${d?"p-6":R?"p-4":"p-3"}`,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                                        ${d?"p-3":R?"p-2.5":"p-2"} 
                                                        rounded-xl bg-linear-to-br from-[rgba(var(--theme-primary-rgb),0.2)] to-[rgba(var(--theme-secondary-rgb),0.2)] border border-[rgba(var(--theme-primary-rgb),0.3)] backdrop-blur-xs
                                                    `,children:e.jsx(u,{className:`
                                                                ${d?"w-8 h-8":R?"w-6 h-6":"w-5 h-5"}
                                                            `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(i,{variant:d?"h4":R?"h5":"h6",className:`
                                                                font-bold bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) bg-clip-text text-transparent
                                                                ${d?"":"truncate"}
                                                            `,style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:"Daily Timesheet"}),e.jsx(i,{variant:d?"body2":"caption",color:"textSecondary",className:d?"":"truncate",style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:new Date(o).toLocaleString("en-US",{month:d?"long":"short",day:"numeric",year:d?"numeric":void 0})})]})]}),"                                                ",e.jsxs("div",{className:"flex items-center gap-4",children:[me&&e.jsxs(i,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.75rem",display:{xs:"block",sm:"block"}},children:["Updated: ",me]}),e.jsx("div",{className:"flex items-center gap-2",children:Oe&&e.jsxs(e.Fragment,{children:[e.jsx(Ce,{color:"success",variant:"flat",size:d?"md":"sm",startContent:e.jsx(Ye,{className:`
                                                                            ${d?"w-4 h-4":"w-3.5 h-3.5"}
                                                                        `}),className:"bg-linear-to-r from-[rgba(var(--theme-success-rgb),0.1)] to-[rgba(var(--theme-success-rgb),0.2)] hover:from-[rgba(var(--theme-success-rgb),0.2)] hover:to-[rgba(var(--theme-success-rgb),0.3)] border border-[rgba(var(--theme-success-rgb),0.2)] backdrop-blur-xs",onPress:We,isDisabled:!G||T.length===0||J!=="",isLoading:J==="excel",style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:d?"Excel":"XLS"}),e.jsx(Ce,{color:"danger",variant:"flat",size:d?"md":"sm",startContent:e.jsx(Ye,{className:`
                                                                            ${d?"w-4 h-4":"w-3.5 h-3.5"}
                                                                        `}),className:"bg-linear-to-r from-[rgba(var(--theme-danger-rgb),0.1)] to-[rgba(var(--theme-danger-rgb),0.2)] hover:from-[rgba(var(--theme-danger-rgb),0.2)] hover:to-[rgba(var(--theme-danger-rgb),0.3)] border border-[rgba(var(--theme-danger-rgb),0.2)] backdrop-blur-xs",onPress:He,isDisabled:!G||T.length===0||J!=="",isLoading:J==="pdf",style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:"PDF"})]})})]})]}),d&&e.jsxs("div",{className:"flex items-center gap-6 pt-2 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-success"}),e.jsxs(i,{variant:"caption",color:"textSecondary",children:["Present: ",$]})]}),U&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-warning"}),e.jsxs(i,{variant:"caption",color:"textSecondary",children:["Absent: ",c.length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-4 h-4 text-primary"}),e.jsxs(i,{variant:"caption",color:"textSecondary",children:["Total: ",$+c.length]})]})]})]})}),sx:{padding:0,"& .MuiCardHeader-content":{width:"100%",overflow:"hidden"}}}),e.jsx(ke,{}),e.jsx($e,{children:e.jsx(a,{component:"section",role:"search","aria-label":"Timesheet filters",children:e.jsx(S,{container:!0,spacing:3,children:U&&e.jsxs(e.Fragment,{children:[e.jsx(S,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Fe,{type:"text",label:"Search Employee",placeholder:"Enter employee name",value:y,onChange:s=>ne(s.target.value),variant:"outlined",fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(Re,{position:"start",children:e.jsx(re,{className:"w-4 h-4 text-default-400"})}),style:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px"}},"aria-label":"Search employees"})}),e.jsx(S,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Fe,{label:"Select Date",type:"date",variant:"outlined",onChange:P,value:new Date(o).toISOString().slice(0,10)||"",fullWidth:!0,size:"small",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(Re,{position:"start",children:e.jsx(Z,{className:"w-4 h-4 text-default-400"})}),style:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px"}},"aria-label":"Select date for timesheet"})})]})})})}),e.jsx(ke,{}),e.jsx($e,{children:e.jsxs(S,{container:!0,spacing:3,children:[e.jsx(S,{item:!0,xs:12,md:U?9:12,children:C?e.jsx(_e,{className:"p-4 bg-danger-50 border-danger-200",children:e.jsxs(a,{className:"flex items-center gap-3",children:[e.jsx(E,{className:"w-5 h-5 text-danger"}),e.jsx(i,{color:"error",variant:"body1",children:C})]})}):e.jsxs(a,{role:"region","aria-label":"Present employees attendance table",className:"border-r border-gray-200 pr-4",sx:{borderRightColor:"rgba(0, 0, 0, 0.1)"},children:[e.jsx(a,{className:"mb-4",children:e.jsxs(i,{variant:"h6",className:"font-semibold text-blue-600 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Present Employees (",$,")"]})}),e.jsx(Pe,{orientation:"horizontal",className:"overflow-y-hidden",children:e.jsx(Te,{className:"rounded-lg",isLoaded:G,children:e.jsxs(Ae,{isCompact:!0,removeWrapper:!0,"aria-label":"Employee attendance timesheet table",isHeaderSticky:!0,classNames:{base:"max-h-[520px] overflow-auto",table:"min-h-[200px] w-full",thead:"z-10",tbody:"overflow-y-auto"},children:[e.jsx(Ue,{columns:fe,children:s=>e.jsx(Ee,{align:"start",children:e.jsxs(a,{className:"flex items-center gap-2",children:[s.icon&&e.jsx(s.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]})},s.uid)}),e.jsx(Ie,{items:T,emptyContent:e.jsxs(a,{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(u,{className:"w-12 h-12 text-default-300 mb-4"}),e.jsx(i,{variant:"body1",color:"textSecondary",children:"No attendance records found"})]}),children:s=>e.jsx(De,{children:n=>ge(s,n)},s.id||s.user_id)})]})})}),$>p&&e.jsx(a,{className:"py-4 flex justify-center",children:e.jsx(Le,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:M,total:B,onChange:ue,"aria-label":"Timesheet pagination"})})]})}),U&&e.jsx(S,{item:!0,xs:12,md:3,children:e.jsx(ds,{absentUsers:c,selectedDate:o,getUserLeave:ze})})]})})]})})})})})};export{As as T};
