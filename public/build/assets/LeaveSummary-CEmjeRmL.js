import{r as l,j as e,i as ne,H as ie,c as L,g as V,h as T}from"./app-C1U45Ebj.js";import{u as ce,B as oe,G as de,F as me,T as j}from"./logo-CfQNLy2U.js";import{P as xe}from"./PageHeader-BguKKtkP.js";import{S as he}from"./StatsCards-CTb1gp2_.js";import{u as pe,e as B,a as ue,g as f,c as v,G as ge,f as M,h as be,b as je,A as fe}from"./App-whY0_PgO.js";import{F as ve}from"./CheckCircleIcon-B_RrSLXz.js";import{F as we}from"./AdjustmentsHorizontalIcon-yosOaLGg.js";import{F as $}from"./PresentationChartLineIcon-ilneQpuQ.js";import{F as Ne}from"./DocumentArrowDownIcon-BXxQ19kw.js";import{p as ye}from"./chunk-XVMALT6H-CYgKbo0D.js";import{i as _e}from"./chunk-SSA7SXE4-CwjhqkNF.js";import{b as Se}from"./chunk-57V4RE7B-8Sp0zFrU.js";import{s as w,l as n}from"./chunk-Y2AYO5NJ-BRwLVlLS.js";import{t as Ce,a as Y}from"./chunk-ML27DD5T-CtKvWbdu.js";import{t as z,a as G,b as s,c as U,d as J,e as o}from"./chunk-F3UDT23P-C9zYK25D.js";import{p as Fe}from"./chunk-EAPQ7RWQ-X8us5Cw9.js";import"./create-visual-element-BuHeE9lo.js";import"./chunk-D5XJWRAV-D_e-q5OY.js";import"./EnvelopeIcon-DYtxSQqd.js";import"./UserIcon-Ch89lSMO.js";import"./ShieldCheckIcon-BOaBImyC.js";import"./ExclamationTriangleIcon-C6Etxr_V.js";import"./index-aV7qt4-Z.js";import"./NumberFormatter-DNR9MAW-.js";import"./index-C-LltKoZ.js";import"./useHasTabbableChild-zsiyx3Qk.js";import"./index-CokAva9Y.js";import"./features-animation-Bw_RqQvo.js";const Ae=({title:N,summaryData:I})=>{const O=ce(),h=pe(O.breakpoints.down("sm")),{users:Pe=[],departments:H=[],leave_types:De=[],columns:Ee=[],data:y=[],department_summary:C=[],stats:d={},year:F=new Date().getFullYear(),filters:K={}}=I||{},[Q,A]=l.useState(!1),[i,P]=l.useState(K),[p,W]=l.useState(!1),[D,q]=l.useState("employee"),[c,_]=l.useState(""),[S,E]=l.useState(1),[m,X]=l.useState(15),x=l.useMemo(()=>{let a=y;return c&&(a=a.filter(t=>{var r,g;return((r=t.employee_name)==null?void 0:r.toLowerCase().includes(c.toLowerCase()))||((g=t.department)==null?void 0:g.toLowerCase().includes(c.toLowerCase()))})),a},[y,c]),Z=l.useMemo(()=>{const a=(S-1)*m,t=a+m;return x.slice(a,t)},[x,S,m]),k=Math.ceil(x.length/m),ee=l.useMemo(()=>[{title:"Total Employees",value:d.total_employees||0,icon:e.jsx(B,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Active employees"},{title:"Approved Leaves",value:d.total_approved_leaves||0,icon:e.jsx(ve,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Total approved days"},{title:"Pending Leaves",value:d.total_pending_leaves||0,icon:e.jsx(ue,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Awaiting approval"},{title:"Departments",value:d.departments_count||0,icon:e.jsx(f,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Active departments"}],[d]),u=l.useCallback((a,t)=>{const r={...i,[a]:t};P(r),R(r)},[i]),R=l.useCallback(a=>{A(!0),ne.Inertia.get(route("leave-summary"),a,{preserveState:!0,replace:!0,onFinish:()=>A(!1)})},[]),ae=l.useCallback(()=>{const a={year:new Date().getFullYear()};P(a),_(""),R(a)},[]),te=[{label:"Export Data",icon:e.jsx(Ne,{className:"w-4 h-4"}),onPress:()=>{console.log("Export functionality")},className:M.primaryButton},{label:"Current Year",icon:e.jsx(je,{className:"w-4 h-4"}),onPress:()=>u("year",new Date().getFullYear()),className:M.secondaryButton}],se=l.useCallback((a,t)=>{const r=a[t];switch(t){case"employee_name":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-bold text-sm text-foreground",children:a.employee_name}),e.jsx("p",{className:"text-tiny text-default-400",children:a.department}),a.designation&&e.jsx("p",{className:"text-tiny text-default-500",children:a.designation})]});case"total_approved":case"total_pending":case"total_rejected":const g={total_approved:"success",total_pending:"warning",total_rejected:"danger"};return r>0?e.jsx(v,{size:"sm",variant:"flat",color:g[t],className:"min-w-12",children:r}):"";case"usage_percentage":const b=r||0,le=b>80?"danger":b>60?"warning":"success";return e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(ye,{size:"sm",value:b,color:le,className:"w-16"}),e.jsxs("span",{className:"text-tiny",children:[b,"%"]})]});case"total_balance":return e.jsx("div",{className:"text-center",children:e.jsx("span",{className:r<5?"text-danger":"text-foreground",children:r})});default:return r!=null&&r!==""?r:""}},[]),re=l.useMemo(()=>{const a=new Date().getFullYear();return Array.from({length:10},(t,r)=>a-r)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(ie,{title:N}),e.jsx(oe,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(ge,{in:!0,children:e.jsx(de,{children:e.jsx(xe,{title:"Leave Summary",subtitle:"Comprehensive employee leave analytics and reporting",icon:e.jsx($,{className:"w-8 h-8"}),variant:"gradient",actionButtons:te,children:e.jsxs("div",{className:"p-6",children:[e.jsx(he,{stats:ee,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(_e,{isClearable:!0,label:"Search Employees",variant:"bordered",placeholder:"Search by name or department...",startContent:e.jsx(be,{className:"w-4 h-4"}),value:c,onClear:()=>_(""),onValueChange:_,classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:h?"sm":"md"})}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(Se,{variant:"bordered",className:"bg-white/5",children:e.jsxs(L,{isIconOnly:h,color:p?"primary":"default",onPress:()=>W(!p),className:p?"bg-purple-500/20":"bg-white/5",children:[e.jsx(we,{className:"w-4 h-4"}),!h&&e.jsx("span",{className:"ml-1",children:"Filters"})]})})})]}),p&&e.jsx(me,{in:!0,timeout:300,children:e.jsx("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(w,{label:"Year",variant:"bordered",selectedKeys:[String(i.year||F)],onSelectionChange:a=>{const t=Array.from(a)[0];t&&u("year",parseInt(t))},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:re.map(a=>e.jsx(n,{value:a,textValue:String(a),children:a},a))}),e.jsxs(w,{label:"Department",variant:"bordered",selectedKeys:i.department_id?[String(i.department_id)]:[],onSelectionChange:a=>{const t=Array.from(a)[0];u("department_id",t||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e.jsx(n,{value:"",textValue:"All Departments",children:"All Departments"},""),H.map(a=>e.jsx(n,{value:a.id,textValue:a.name,children:a.name},a.id))]}),e.jsxs(w,{label:"Leave Status",variant:"bordered",selectedKeys:i.status?[i.status]:[],onSelectionChange:a=>{const t=Array.from(a)[0];u("status",t||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e.jsx(n,{value:"",textValue:"All Status",children:"All Status"},""),e.jsx(n,{value:"Approved",textValue:"Approved",children:"Approved"},"Approved"),e.jsx(n,{value:"Pending",textValue:"Pending",children:"Pending"},"Pending"),e.jsx(n,{value:"Declined",textValue:"Declined",children:"Declined"},"Declined")]}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(L,{color:"primary",variant:"flat",onPress:ae,size:h?"sm":"md",children:"Clear Filters"})})]})})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs(Ce,{selectedKey:D,onSelectionChange:q,variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-primary",tab:"max-w-fit px-0 h-12"},children:[e.jsx(Y,{title:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:"Employee Summary"})]})},"employee"),e.jsx(Y,{title:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:"Department Summary"})]})},"department")]})}),D==="employee"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-default-400 text-small",children:["Total ",x.length," employees",c&&` (filtered from ${y.length})`]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-tiny text-default-400",children:"Rows per page:"}),e.jsxs(w,{size:"sm",selectedKeys:[String(m)],onSelectionChange:a=>{const t=Number(Array.from(a)[0]);X(t),E(1)},className:"w-20",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:[e.jsx(n,{value:"10",textValue:"10",children:"10"},"10"),e.jsx(n,{value:"15",textValue:"15",children:"15"},"15"),e.jsx(n,{value:"25",textValue:"25",children:"25"},"25"),e.jsx(n,{value:"50",textValue:"50",children:"50"},"50")]})]})]}),x.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(z,{"aria-label":"Employee leave summary table",isHeaderSticky:!0,classNames:{wrapper:"max-h-[600px] bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground border-b border-white/10",td:"border-b border-white/5"},children:[e.jsxs(G,{children:[e.jsx(s,{children:"Employee"},"employee_name"),e.jsx(s,{align:"center",children:"JAN"},"JAN"),e.jsx(s,{align:"center",children:"FEB"},"FEB"),e.jsx(s,{align:"center",children:"MAR"},"MAR"),e.jsx(s,{align:"center",children:"APR"},"APR"),e.jsx(s,{align:"center",children:"MAY"},"MAY"),e.jsx(s,{align:"center",children:"JUN"},"JUN"),e.jsx(s,{align:"center",children:"JUL"},"JUL"),e.jsx(s,{align:"center",children:"AUG"},"AUG"),e.jsx(s,{align:"center",children:"SEP"},"SEP"),e.jsx(s,{align:"center",children:"OCT"},"OCT"),e.jsx(s,{align:"center",children:"NOV"},"NOV"),e.jsx(s,{align:"center",children:"DEC"},"DEC"),e.jsx(s,{align:"center",children:"Approved"},"total_approved"),e.jsx(s,{align:"center",children:"Pending"},"total_pending"),e.jsx(s,{align:"center",children:"Balance"},"total_balance"),e.jsx(s,{align:"center",children:"Usage"},"usage_percentage")]}),e.jsx(U,{items:Z,isLoading:Q,children:a=>e.jsx(J,{children:t=>e.jsx(o,{children:se(a,t)})},a.id)})]}),k>1&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(Fe,{total:k,page:S,onChange:E,showControls:!0,showShadow:!0,color:"primary"})})]}):e.jsx(V,{className:"bg-white/5 backdrop-blur-md border-white/10",children:e.jsxs(T,{className:"text-center py-12",children:[e.jsx($,{className:"w-16 h-16 mx-auto mb-4 text-default-300"}),e.jsx(j,{variant:"h6",className:"mb-2 text-white",children:"No Leave Data Found"}),e.jsx(j,{variant:"body2",className:"text-gray-400",children:c?`No employees found matching "${c}"`:`No leave summary data available for ${i.year||F}.`})]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{variant:"h6",className:"mb-4 text-white",children:"Department-wise Leave Summary"}),C.length>0?e.jsxs(z,{"aria-label":"Department leave summary table",classNames:{wrapper:"bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground",td:"border-b border-white/5"},children:[e.jsxs(G,{children:[e.jsx(s,{children:"Department"}),e.jsx(s,{align:"center",children:"Employees"}),e.jsx(s,{align:"center",children:"Total Leaves"}),e.jsx(s,{align:"center",children:"Approved"}),e.jsx(s,{align:"center",children:"Pending"}),e.jsx(s,{align:"center",children:"Avg per Employee"})]}),e.jsx(U,{children:C.map((a,t)=>e.jsxs(J,{children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"font-medium",children:a.department})]})}),e.jsx(o,{className:"text-center",children:e.jsx(v,{size:"sm",variant:"flat",color:"default",children:a.employee_count})}),e.jsx(o,{className:"text-center",children:a.total_leaves}),e.jsx(o,{className:"text-center",children:e.jsx(v,{size:"sm",variant:"flat",color:"success",children:a.total_approved})}),e.jsx(o,{className:"text-center",children:e.jsx(v,{size:"sm",variant:"flat",color:"warning",children:a.total_pending})}),e.jsx(o,{className:"text-center",children:a.avg_leaves_per_employee})]},t))})]}):e.jsx(V,{className:"bg-white/5 backdrop-blur-md border-white/10",children:e.jsxs(T,{className:"text-center py-8",children:[e.jsx(f,{className:"w-12 h-12 mx-auto mb-4 text-default-300"}),e.jsx(j,{variant:"body1",className:"text-white",children:"No department data available"})]})})]})]})})})})})]})};Ae.layout=N=>e.jsx(fe,{children:N});export{Ae as default};
